function trace(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=isDebug;n&&console.log(e,t)}function traceByTime(e){var t=isDebug;if(t=!0){var i=new Date,n=StringUtil.substitute("time:{0} {1}",TimeUtil.formatTime(i.getTime()),e);console.log(n)}}function qqDebug(e){console.log(e)}function testTime(e,t,i){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];var a=getTimer(),o=t.apply(i,n);return traceByTime(StringUtil.substitute("{0} cost time = {1}ms",e,getTimer()-a)),o}function traceByCareer(e,t){var i=isDebug;if(i){var n=new Date;if(RoleModel.getInstance().isMyPartner(t)){var s=RoleModel.getInstance().getPartnerInfo(t),a=Tools.getJobName(s.getCareer()),o=StringUtil.substitute("time:{0} {1} {2}",TimeUtil.formatTime(n.getTime()),a,e);console.log(o)}}}function rURL(e){return e.indexOf(ConfigManager.rootURL)>-1?e:e.indexOf("http://")>-1||e.indexOf("https://")>-1?e:ConfigManager.rootURL+e}function getTimer(){return egret.getTimer()}function is(e,t){return egret.is(e,t)}function setTimeout2(e,t){function i(t,i,n){void 0===n&&(n=null),clearTimeout(a);var s=getTimer();t.apply(null,n),getTimer()-s>10&&trace("setTimeout执行消耗:"+i+","+(getTimer()-s)),e=null}for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];var a=setTimeout(i,t,e,t,n);return a}function shareSuccessSendMsgToServer(e){void 0===e&&(e=0),0==e?ConfigManager.isBigScene()?ShareModel.getInstance().last_time<=0&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ShareEvtName.CCMD15101)):GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ShareEvtName.CCMD15101)):trace(StringUtil.substitute("shareSuccessSendMsgToServer code = {0}",e))}function shareNewGiftInGame(e){0==e&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(CheckPointBossEvtName.CCMD20400))}function getInviteRewardQQ(e){0==e&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(QQEvtName.REQEUST_20800))}function shareForSpeedInGame(e){0==e&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.CCMD_13010))}function shareForMoneyInGame(e){0==e&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FuLiEvtName.CCMD_16910))}function shareTriggerInGame(e){0==e&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FuLiEvtName.CCMD22100))}function shareTriggerOfOrder(e){if(0==e){var t=ShareModel.getInstance().shareOrderID;t>0&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.REQUEST_22801,{id:t}))}ShareModel.getInstance().shareOrderID=0}function getAttentionReward(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(JinBangYXManager.GET_JBYXREWARD))}function requestOnLineRewardQQ(e){0==e&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.ONLINE_REWARD_GET))}function shareForFanliLoginInGame(e){0==e&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.CCMD17310))}function shareForWildBossInGame(e){0==e&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.CCMD20730))}function shareForBossHomeInGame(e){0==e&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.CCMD20530))}function shareForSpeedFreeInGame(e){0==e&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.CCMD13020))}var AssetAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var s=RES.getRes(e);s?n(s):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var CustomVsnController=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.getVirtualUrl=function(t){var i;return i=t.indexOf("sceneMapTile")>-1?bigResCode:this._vsnDic[t],i?e.prototype.getVirtualUrl.call(this,t)+"?v="+i:e.prototype.getVirtualUrl.call(this,t)},n.setVsn=function(e){this._vsnDic=e},t}(RES.VersionController);egret.registerClass(CustomVsnController,"CustomVsnController");var LoadingUI=function(e){function t(){e.call(this),this._wordArr=["角色正在清洁羽翼","角色正在穿戴装备","角色正在擦拭武器","怪物正在集结","时空传送正在充能","正在读取猎杀奖励","即将进入战场","服务器过于火爆，正在排队进入"],this._wordIndex=0,this._timeIndex=1,this.touchEnabled=!1;var t='<?xml version="1.0" encoding="utf-8"?>\n<e:Skin class="loadingUISkin" width="640" height="1136" xmlns:e="http://ns.egret.com/eui" xmlns:ns1="*" xmlns:w="http://ns.egret.com/wing">\n	<ns1:CustomImage id="_imgBg" x="0" y="0" source="resourceassetsiconloginloading.jpg"/>\n	<ns1:CustomImage y="602" source="loading_json.loading_barBg" x="198"/>\n	<e:Image id="_imageBar" source="loading_json.loading_bar" x="215" y="607"/>\n	<ns1:CustomLabel text="1231231/1212" id="textField" x="197" y="604" size="14" width="230" textAlign="center"/>\n	<ns1:CustomLabel text="首次加载文件较大，请耐心等待" textAlign="center" id="_txtWord" x="179" y="624" width="268" size="14" bold="true" textColor="0x22dd28"/>\n	<ns1:CustomLabel id="_txt1" text="" x="17" y="1076" anchorOffsetX="0" width="617" anchorOffsetY="0" height="60" size="12" textAlign="center"/>\n	<ns1:CustomLabel id="_txt2" text="" x="17" y="957" size="12" anchorOffsetX="0" width="320" anchorOffsetY="0" height="96"/>\n	<ns1:CustomLabel id="_txt3" text="" x="17" y="941" size="12"/>\n</e:Skin>';this.skinName=t,ConfigManager.isNewCreate()?(this._imgBg.source=rURL("resource/assets/icon/login/loading_csyx.jpg"),this._txt1.visible=!1,this._txt2.visible=!1,this._txt3.visible=!1):ConfigManager.isTencent()?(this._imgBg.source=rURL("resource/assets/icon/login/loading_qq.jpg"),this._txt1.visible=!1,this._txt2.visible=!1,this._txt3.visible=!1):ConfigManager.isGuoZiZF()?(this._imgBg.source=rURL("resource/assets/icon/login/loading_gzzf.jpg"),this._txt1.visible=!1,this._txt2.visible=!1,this._txt3.visible=!1):ConfigManager.isb9cb()?(this._imgBg.source=rURL("resource/assets/icon/login/loading_b9cb.jpg"),this._txt1.visible=!1,this._txt2.visible=!1,this._txt3.visible=!1):ConfigManager.isyxjinbang()||ConfigManager.isb7724()?(this._imgBg.source=rURL("resource/assets/icon/login/loading_yxjb.jpg"),this._txt1.visible=!1,this._txt2.visible=!1,this._txt3.visible=!1):ConfigManager.isWanZui()?(this._imgBg.source=rURL("resource/assets/icon/login/loading_wanzui.jpg"),this._txt1.visible=!1,this._txt2.visible=!1,this._txt3.visible=!1):(this._txt1.lineSpacing=2,this._txt2.lineSpacing=2,this._txt1.text="抵制不良游戏 拒绝盗版游戏 注意自我保护 谨防受骗上当\n适度游戏益脑 沉迷游戏伤身 合理安排时间 享受健康生活\n本网络游戏适合年满18周岁以上的用户使用；请您确定已如实进行实名注册；为了您的健康，请合理控制游戏时间",this._txt2.text="新出网证（粤）字010号\n著作权人：上海皋宇网络科技有限公司\n出版单位：北京艺术与科学电子出版社\n批准文号：新广出审【2016】372号\n出版物号：ISBN978-7-89429-689-4",this._txt3.text="粤网文【2014】0633-233号",this._imgBg.source=rURL("resource/assets/icon/login/loading.jpg"))}__extends(t,e);var i=(__define,t),n=i.prototype;return n.setProgress=function(e,t){var i=(100*e/t).toFixed(1);this._imageBar.scaleX=e/t,this.textField.text=i+"%";var n=e/t;n>=1&&(this._wordIndex=0,this._txtWord.text=this._wordArr[this._wordIndex],TimerManager.getInstance().add(3e3,this.onTimer,this))},n.onTimer=function(){this._wordIndex++,this._wordIndex==this._wordArr.length-1&&(TimerManager.getInstance().remove(3e3,this.onTimer,this),TimerManager.getInstance().add(1e3,this.addPoint,this)),this._txtWord.text=this._wordArr[this._wordIndex]},n.addPoint=function(){for(var e=this._timeIndex%6,t="",i=0;e>i;i++)t+="·";this._txtWord&&this._txtWord.parent&&this._wordArr&&this._wordArr[this._wordIndex]&&(this._txtWord.text=this._wordArr[this._wordIndex]+t),this._timeIndex++},n.dispose=function(){this._imgBg&&(this._imgBg.parent&&this._imgBg.parent.removeChild(this._imgBg),this._imgBg.bitmapData=null,this._imgBg.source=null,this._imgBg=null),TimerManager.getInstance().remove(3e3,this.onTimer,this),TimerManager.getInstance().remove(1e3,this.addPoint,this)},t}(eui.Component);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.apply(this,arguments),this.isNeedDirectEnter=!1,this.GROUP_LOADINGUI="loadingUI",this.isPreThemeLoadEnd=!1,this.isThemeLoadEnd=!1,this.isCreateResourceLoadEnd=!1,this.isResourceLoadEnd=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){e.prototype.createChildren.call(this),GameContent.stage=this.stage;var i=this.stage.stageWidth,n=this.stage.stageHeight;GameContent.stageWidth=i,GameContent.stageHeight=n,GameContent.gameLayers=new GameLayers(this.stage),GameContent.root=this,RES.setMaxLoadingThread(3),AllParamObj.cdn_url&&(ConfigManager.rootURL=AllParamObj.cdn_url);var s=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",s),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),GameDispatcher.getInstance().addEventListener(t.SHOW_MAINUI,this.showMainUI,this),GameDispatcher.getInstance().addEventListener(t.REMOVE_LOADINGUI,this.removeLoadingUI,this),GameDispatcher.getInstance().addEventListener(t.LOAD_GAMERESOURCE,this.loadGameResource,this),GameDispatcher.getInstance().addEventListener(t.LOAD_CREATEROLE_RESOURCE,this.loadCreateRoleResource,this),this.loadVsnFile(),this.addEventListener(egret.Event.ACTIVATE,this.gameActivate,this),this.stage.addEventListener(egret.StageOrientationEvent.ORIENTATION_CHANGE,this.onResize2,this)},n.loadVsnFile=function(){var e=new egret.URLLoader;e.dataFormat=egret.URLLoaderDataFormat.TEXT;var t=rURL("resource/vsn.json?v=")+vsnFileCode,i=new egret.URLRequest(t);e.addEventListener(egret.Event.COMPLETE,this.onVsnComplete,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.ioError,this),e.load(i)},n.ioError=function(e){trace("error")},n.onVsnComplete=function(e){this.setPlatfrom();var t=e.target;t.removeEventListener(egret.Event.COMPLETE,this.onVsnComplete,this);var i=JSON.parse(t.data),n=new CustomVsnController;n.setVsn(i),RES.registerVersionController(n),this.initResConfig();var s;s=ConfigManager.isNewCreate()?"resource/assets/icon/login/loading_csyx.jpg":ConfigManager.isTencent()?"resource/assets/icon/login/loading_qq.jpg":ConfigManager.isGuoZiZF()?"resource/assets/icon/login/loading_gzzf.jpg":ConfigManager.isb9cb()?"resource/assets/icon/login/loading_b9cb.jpg":ConfigManager.isyxjinbang()||ConfigManager.isb7724()?"resource/assets/icon/login/loading_yxjb.jpg":ConfigManager.isWanZui()?"resource/assets/icon/login/loading_wanzui.jpg":"resource/assets/icon/login/loading.jpg",RES.getResByUrl(rURL(s),this.loadLoadingBgCompleteHandler,this),this.isNeedDirectEnter=ConfigManager.isDirectEnter()},n.loadLoadingBgCompleteHandler=function(e){null==this._bg&&(this._bg=new eui.Image),this._bg.source=e,this.addChildAt(this._bg,0),this.removeOutSideLoadPage()},n.initResConfig=function(){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json",rURL("resource/"))},n.removeOutSideLoadPage=function(){window.removeLoadPage&&window.removeLoadPage()},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)},n.onThemeLoadComplete=function(){return this.isThemeLoadEnd=!0,0==this.isNeedDirectEnter?void GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_LOGIN_VIEW)):void(LoginModel.getInstance().isNeedCreateRole?this.showCreateRole():this.showMainUI(null))},n.onPreThemeLoadComplete=function(){this.isPreThemeLoadEnd=!0,0==this.isNeedDirectEnter&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_LOGIN_VIEW))},n.onResourceLoadComplete=function(e){"createRole"==e.groupName?(this.isCreateResourceLoadEnd=!0,this.showCreateRole()):"preload"==e.groupName?(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.GAMERESOURCE_LOADEND)),GameStateManager.getInstance().isResLoaded=!0,this.isResourceLoadEnd=!0,new Modules,GameStateManager.getInstance().isSceneLoaded&&MainUIModel.getInstance().isMainUIInited&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.GAME_START)),this.showMainUI(null)):e.groupName==this.GROUP_LOADINGUI&&(null==this.loadingView&&(this.loadingView=new LoadingUI,this.loadingView.setProgress(0,1)),this.stage.addChild(this.loadingView),this.disposeBgImage())},n.disposeBgImage=function(){this._bg&&(this.contains(this._bg)&&this.removeChild(this._bg),this._bg.source=null,this._bg=null)},n.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},n.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},n.onResourceProgress=function(e){if("preload"==e.groupName)null==this.loadingView&&(this.loadingView=new LoadingUI),null==this.loadingView.parent&&this.stage.addChild(this.loadingView),this.loadingView&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal),"share_json"==e.resItem.name&&CustomSocket.getInstance().isClosed&&Alert.show("连接服务器失败，请刷新游戏",0,function(){Tools.GameRefresh()});else if("createRole"==e.groupName)null==this.loadingView&&(this.loadingView=new LoadingUI),null==this.loadingView.parent&&this.stage.addChild(this.loadingView),this.loadingView&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal);else if("allConfig"==e.groupName&&(null==this.loadingView&&(this.loadingView=new LoadingUI),null==this.loadingView.parent&&this.stage.addChild(this.loadingView),this.loadingView&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal),"all_json"==e.resItem.name)){var t=RES.getRes(e.resItem.name);DataManager.getInstance().setData(t),new MessageControl}},n.loadGameResource=function(e){0==LoginModel.getInstance().isNeedCreateRole&&(RES.loadGroup("loadingUI",4),RES.loadGroup("allConfig",3)),RES.loadGroup("preload",2),GameDispatcher.getInstance().removeEventListener(t.LOAD_GAMERESOURCE,this.loadGameResource,this)},n.loadCreateRoleResource=function(e){RES.loadGroup("loadingUI",4),RES.loadGroup("allConfig",3),RES.loadGroup("createRole",2),GameDispatcher.getInstance().removeEventListener(t.LOAD_CREATEROLE_RESOURCE,this.loadCreateRoleResource,this)},n.removeLoadingUI=function(e){this.loadingView&&this.stage.contains(this.loadingView)&&(this.loadingView.dispose(),this.stage.removeChild(this.loadingView),this.loadingView=null),this.disposeBgImage()},n.showCreateRole=function(){this.isThemeLoadEnd&&this.isCreateResourceLoadEnd&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_CREATEROLE))},n.showMainUI=function(e){this.isThemeLoadEnd&&GameStateManager.getInstance().isResLoaded&&GameStateManager.getInstance().isSceneLoaded&&(GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_INIT)),GameDispatcher.getInstance().removeEventListener(t.SHOW_MAINUI,this.showMainUI,this),GameDispatcher.getInstance().removeEventListener(t.REMOVE_LOADINGUI,this.removeLoadingUI,this),3==PhpHttpStatisticsManager._curStep&&PhpHttpStatisticsManager.send(4))},n.setPlatfrom=function(){var e=0,t=Tools.getPageParams("platform"),i=Tools.getPageParams("user_id"),n=Tools.getPageParams("cur_channel");e=parseInt(Tools.getPageParams(egret.getOption("ret"))),ConfigManager.plat_id=i,ConfigManager.cur_channel=n,null!=t&&""!=t&&(AllParamObj.platform=t,"dev"==t&&(AllParamObj.center_url=ConfigManager.test_centerUrl)),ConfigManager.isTencent()&&(egret.ImageLoader.crossOrigin="anonymous")},n.gameActivate=function(e){CustomSocket.getInstance().isClosed&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.RECONNECT))},n.onResize2=function(e){if(ConfigManager.isTencent()){this.setGameContent();var t=window.getOrientation();"portrait"==t?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(SceneEvtName.SCREEN_ROTATE,{type:1})):"landscape"==t&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(SceneEvtName.SCREEN_ROTATE,{type:0}))}},n.setGameContent=function(){var e=this.stage.stageWidth,t=this.stage.stageHeight;GameContent.stageWidth=e,GameContent.stageHeight=t},t.SHOW_MAINUI="SHOW_MAINUI",t.REMOVE_LOADINGUI="REMOVE_LOADINGUI",t.LOAD_GAMERESOURCE="LOAD_GAMERESOURCE",t.LOAD_CREATEROLE_RESOURCE="LOAD_CREATEROLE_RESOURCE",t}(eui.UILayer);egret.registerClass(Main,"Main");var Modules=function(){function e(){new SceneControl,new MainUIControl,new RoleControl,new BagControl,new FigureControl,new SkillControl,new MallControl,new MailControl,new FriendControl,new ChatControl,new RongLianControl,new TaskControl,new ZhuanControl,new BuildControl,new VipControl,new MeridianControl,new WingControl,new ForgemindControl,new GuildControl,new GuildDonateControl,new GuildFarmControl,new GuildFubenControl,new ChenghaoControl,new BossControl,new FuliControl,new LoginRewardControl,new MeetPlayerControl,new FirstChargeControl,new ArtifactControl,new FubenControl,new CheckPointBossControl,new RankControl,new TreasureControl,new OrangesuitControl,new LegendSuitControl,new HeFuControl,new HuoDongDailyControl,new RedDotsControl,new ReliveControl,new DominateControl,new CityWarControl,new ChargeControl,new MinesControl,new DarkControl,new FanLiControl,new ShadowControl,new FashionControl,new KingControl,new AwakeControl,new KuaFuControl,new KFBossControl,new AwakeEquipControl,new AchievementControl,new ActivityControl,new ShopControl,new OrderGiftControl,new OnlineRewardControl,new MagicPetControl,new PKSkillControl,new KfKillerControl,ConfigManager.isTencent()&&new QQControl,(ConfigManager.isyxjinbang()||ConfigManager.isb7724()||ConfigManager.isB9g())&&new JinbangControl}var t=(__define,e);t.prototype;return e}();egret.registerClass(Modules,"Modules");var ThemeAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getTheme=function(e,t,i,n){function s(e){t.call(n,e)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var BaseInt=function(){function e(e){void 0===e&&(e=0),this.value=e}var t=(__define,e),i=t.prototype;return i.toString=function(){return this.value.toString()},e}();egret.registerClass(BaseInt,"BaseInt");var Int16=function(e){function t(t){void 0===t&&(t=0),e.call(this,t),this.size=16}__extends(t,e);var i=(__define,t);i.prototype;return t}(BaseInt);egret.registerClass(Int16,"Int16");var Int32=function(e){function t(t){void 0===t&&(t=0),e.call(this,t),this.size=32}__extends(t,e);var i=(__define,t);i.prototype;return t}(BaseInt);egret.registerClass(Int32,"Int32");var Int64=function(e){function t(t){void 0===t&&(t=0),e.call(this,t),this.size=64}__extends(t,e);var i=(__define,t);i.prototype;return t}(BaseInt);egret.registerClass(Int64,"Int64");var Int8=function(e){function t(t){void 0===t&&(t=0),e.call(this,t),this.size=8}__extends(t,e);var i=(__define,t);i.prototype;return t}(BaseInt);egret.registerClass(Int8,"Int8");var BaseContol=function(){function e(){this._callBackDelay=0,this.init(),this.addEventHandler(),this.addCmdHandler()}var t=(__define,e),i=t.prototype;return i.init=function(){this._socket=CustomSocket.getInstance(),this._dispatcher=GameDispatcher.getInstance(),this.addEventListener(EventName.GAME_START,this.onGameStart,this)},i.onGameStart=function(e){var t=this;this.removeEventListener(EventName.GAME_START,this.onGameStart,this,!1);var i=this._callBackDelay;return-1==i?void this.gameStartCallBack():(0==i&&(i=2e3+Math.ceil(5e3*Math.random())),void setTimeout2(function(){t.gameStartCallBack()},i))},i.addCmdHandler=function(){},i.addEventHandler=function(){},i.addCmdListener=function(e,t,i){this._socket.addCmdListener(e,t,i)},i.gameStartCallBack=function(){},i.removeCmdListener=function(e,t){},i.sendSocketData=function(e,t){void 0===t&&(t=null),this._socket.sendMessage(e,t)},i.addEventListener=function(e,t,i,n,s){void 0===n&&(n=!1),void 0===s&&(s=1),this._dispatcher.addEventListener(e,t,i,n,s)},i.removeEventListener=function(e,t,i,n){void 0===n&&(n=!1),this._dispatcher.removeEventListener(e,t,i,n)},i.hasEventListener=function(e){return this._dispatcher.hasEventListener(e)},i.once=function(e,t,i,n){void 0===n&&(n=!1),this._dispatcher.once(e,t,i,n)},i.dispatchEvent=function(e){return this._dispatcher.dispatchEvent(e)},i.willTrigger=function(e){return this._dispatcher.willTrigger(e)},e}();egret.registerClass(BaseContol,"BaseContol");var AchievementControl=function(e){function t(){e.call(this),this._model=AchievementModel.getInstance()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.onClickIcon=function(){this.dispatchEvent(new ParamEvent(AchievementEvtName.ACHIEVEMENT_WINDOW_OPEN))},n.addCmdHandler=function(){var e=this;this.addCmdListener(21100,function(t){e.SCMD21100Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(AchievementEvtName.CCMD21100,function(t){e.CCMD21100Request(t)},this),this.addEventListener(AchievementEvtName.CCMD21101,function(t){e.CCMD21101Request(t)},this)},n.CCMD21100Request=function(e){new CCMD21100;this.sendSocketData(21100)},n.SCMD21100Response=function(e){this._model.setData(e),RedDotsModel.getInstance().calMainArtifactIconRedDot()},n.CCMD21101Request=function(e){var t=new CCMD21101;t.type=e.data.type,this.sendSocketData(21101,t)},t}(BaseContol);egret.registerClass(AchievementControl,"AchievementControl");var ActivityControl=function(e){function t(){e.call(this),this._isShowSuperVip=!0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.gameStartCallBack=function(){if(e.prototype.gameStartCallBack.call(this),ConfigManager.isTencent()&&!QQManager.getInstance().isWeiXin()){var t=TipsWordManager.getInstance().addWordIcon(TipsWord.QQ_VIP);t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openQQVipView,this),this.CCMD22900Request()}},n.addEventHandler=function(){this.addEventListener(FanLiEvtName.CCMD17300_UPDATE,this.createIcon,this),this.addEventListener(VipEvtName.VIP_UPDATE,this.onVipChange,this),this.addEventListener(QQEvtName.UPDATE_VERIFY_STATU,this.createSuperVipIcon,this),this.addEventListener(ActivityEvtName.SUPER_VIP_CLOSE_VIEW,this.closeSuperVipView,this),this.addEventListener(ActivityEvtName.CCMD22200,this.CCMD22200Request,this),this.addEventListener(ActivityEvtName.CCMD22210,this.CCMD22210Request,this),this.addEventListener(ActivityEvtName.CCMD22310,this.CCMD22310Request,this),this.addEventListener(ActivityEvtName.CCMD22311,this.CCMD22311Request,this),this.addEventListener(ActivityEvtName.CCMD22410,this.CCMD22410Request,this),this.addEventListener(ActivityEvtName.CCMD22600,this.CCMD22600Request,this),this.addEventListener(ActivityEvtName.CCMD22910,this.CCMD22910Request,this),this.addEventListener(ActivityEvtName.CCMD22920,this.CCMD22920Request,this),this.addEventListener(ActivityEvtName.CCMD24700,this.CCMD24700Request,this),this.addEventListener(ActivityEvtName.CCMD24710,this.CCMD24710Request,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(22200,function(t){e.SCMD22200Response(t)},this),this.addCmdListener(22300,function(t){e.SCMD22300Response(t)},this),this.addCmdListener(22400,function(t){e.SCMD22400Response(t)},this),this.addCmdListener(22600,function(t){e.SCMD22600Response(t)},this),this.addCmdListener(22610,function(t){e.SCMD22610Response(t)},this),this.addCmdListener(22611,function(t){e.SCMD22611Response(t)},this),this.addCmdListener(22900,function(t){e.SCMD22900Response(t)},this),this.addCmdListener(24700,function(t){e.SCMD24700Response(t)},this)},n.createIcon=function(){FanLiModel.getInstance().checkHasFanliDataByType(FanLiModel.ACTIVITY_OFF)?this._btnOff||(this._btnOff=TipsWordManager.getInstance().addWordIcon(TipsWord.ACTIVITY_OFF),this._btnOff.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openView,this)):this._btnOff&&(TipsWordManager.getInstance().removeIcon(TipsWord.ACTIVITY_OFF),this._btnOff.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openView,this),this._btnOff=null),FanLiModel.getInstance().checkHasFanliDataByType(FanLiModel.ACTIVITY_BACK)?this.CCMD22200Request():this._btBack&&(TipsWordManager.getInstance().removeIcon(TipsWord.ACTIVITY_BACK),this._btBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openBackView,this),this._btBack=null),FanLiModel.getInstance().checkHasFanliDataByType(FanLiModel.ACTIVITY_YY)&&!ConfigManager.isyxjinbang()?this._btnYY||(this._btnYY=TipsWordManager.getInstance().addWordIcon(TipsWord.ACTIVITY_YY),this._btnYY.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openYYView,this)):this._btnYY&&(TipsWordManager.getInstance().removeIcon(TipsWord.ACTIVITY_YY),this._btnYY.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openYYView,this),this._btnYY=null)},n.onVipChange=function(){QQManager.getInstance().hasVerifyVip()},n.createSuperVipIcon=function(){var e=ActivityModel.getInstance().getSuperVipShop();this._isShowSuperVip&&HuoDongDailyModel.getInstance().kaiFuDay>=14&&2!=QQManager.getInstance().verifyVipStatu&&ConfigManager.isTencent()&&VipModel.getInstance().getVIPLevel()>=e.show_vip&&!this._tw_super&&(this._tw_super=TipsWordManager.getInstance().addWordIcon(TipsWord.SUPER_VIP),this._tw_super.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openSuperVipView,this))},n.CCMD22200Request=function(){var e=FanLiModel.getInstance().checkHasFanliDataByType(FanLiModel.ACTIVITY_BACK),t=new CCMD22200;t.act_id=e.template_id,this.sendSocketData(22200,t)},n.CCMD22210Request=function(){var e=FanLiModel.getInstance().checkHasFanliDataByType(FanLiModel.ACTIVITY_BACK),t=new CCMD22210;t.act_id=e.template_id,this.sendSocketData(22210,t)},n.CCMD22300Request=function(){var e=FanLiModel.getInstance().checkHasFanliDataByType(FanLiModel.ACTIVITY_YY),t=new CCMD22300;t.act_id=e.template_id,this.sendSocketData(22300,t)},n.CCMD22310Request=function(){var e=FanLiModel.getInstance().checkHasFanliDataByType(FanLiModel.ACTIVITY_YY),t=new CCMD22310;t.act_id=e.template_id,this.sendSocketData(22310,t)},n.CCMD22311Request=function(){var e=FanLiModel.getInstance().checkHasFanliDataByType(FanLiModel.ACTIVITY_YY),t=new CCMD22311;t.act_id=e.template_id,this.sendSocketData(22311,t)},n.CCMD22400Request=function(){var e=FanLiModel.getInstance().checkHasFanliDataByType(FanLiModel.ACTIVITY_OFF),t=new CCMD22400;t.act_id=e.template_id,this.sendSocketData(22400,t)},n.CCMD22410Request=function(){var e=FanLiModel.getInstance().checkHasFanliDataByType(FanLiModel.ACTIVITY_OFF),t=new CCMD22410;t.act_id=e.template_id,this.sendSocketData(22410,t)},n.SCMD22200Response=function(e){this.dispatchEvent(new ParamEvent(ActivityEvtName.CCMD22200_UPDATE,e)),1!=e.flag||this._btBack||(this._btBack=TipsWordManager.getInstance().addWordIcon(TipsWord.ACTIVITY_BACK),this._btBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openBackView,this))},n.SCMD22300Response=function(e){this.dispatchEvent(new ParamEvent(ActivityEvtName.CCMD22300_UPDATE,e))},n.SCMD22400Response=function(e){this.dispatchEvent(new ParamEvent(ActivityEvtName.CCMD22400_UPDATE,e))},n.CCMD22600Request=function(){this.sendSocketData(22600)},n.CCMD22610Request=function(){this.sendSocketData(22610)},n.CCMD22900Request=function(){this.sendSocketData(22900)},n.CCMD22910Request=function(){this.sendSocketData(22910)},n.CCMD22920Request=function(e){var t=new CCMD22920;t.cfg_id=e.data,this.sendSocketData(22920,t)},n.CCMD24700Request=function(){this.sendSocketData(24700)},n.CCMD24710Request=function(){this.sendSocketData(24710)},n.SCMD24700Response=function(e){this.dispatchEvent(new ParamEvent(ActivityEvtName.CCMD24700_UPDATE,e.gold_num))},n.SCMD22600Response=function(e){ActivityModel.getInstance().jubaoBuyData=e.bowl_buys,this.dispatchEvent(new ParamEvent(ActivityEvtName.CCMD22600_UPDATE,e.bowl_buys))},n.SCMD22610Response=function(e){e.act_bowl_list.sort(function(e,t){return e.act_id>t.act_id?1:-1}),ActivityModel.getInstance().jubaoData=e.act_bowl_list},n.SCMD22611Response=function(e){},n.SCMD22900Response=function(e){ActivityModel.getInstance().qqvipData=e,this.dispatchEvent(new ParamEvent(ActivityEvtName.CCMD22900_UPDATE,e))},n.openView=function(e){this._offView||(this._offView=new ActivityOffLineWindow,this._offView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._offView.isPop=!0,this.CCMD22400Request()},n.disposeView=function(e){this._offView&&(this._offView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._offView.dispose(),this._offView=null)},n.openBackView=function(e){this._backView||(this._backView=new ActivityBackWindow,this._backView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeBackView,this)),this._backView.isPop2=!0,this.CCMD22200Request()},n.disposeBackView=function(e){this._backView&&(this._backView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeBackView,this),this._backView.dispose(),this._backView=null)},n.openYYView=function(e){this._yyView||(this._yyView=new ActivityYuyueWindow,this._yyView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeYYView,this)),this._yyView.isPop2=!0,this.CCMD22300Request()},n.disposeYYView=function(e){this._yyView&&(this._yyView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeYYView,this),this._yyView.dispose(),this._yyView=null)},n.openQQVipView=function(e){this._qqvip||(this._qqvip=new QQVipWindow,this._qqvip.addEventListener(EventName.WINDOW_DISPOSE,this.disposeQQVipView,this)),this._qqvip.isPop=!0,this.CCMD22900Request()},n.disposeQQVipView=function(e){this._qqvip&&(this._qqvip.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeQQVipView,this),this._qqvip.dispose(),this._qqvip=null)},n.openSuperVipView=function(e){this._supervip||(this._supervip=new SuperVipWindow,this._supervip.addEventListener(EventName.WINDOW_DISPOSE,this.disposeSuperVipView,this)),this._supervip.isPop=!0},n.closeSuperVipView=function(){this._supervip&&(this._supervip.isPop=!1),this._tw_super&&(TipsWordManager.getInstance().removeIcon(TipsWord.SUPER_VIP),this._tw_super.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openSuperVipView,this),this._tw_super=null,this._isShowSuperVip=!1)},n.disposeSuperVipView=function(e){this._supervip&&(this._supervip.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeSuperVipView,this),this._supervip.dispose(),this._supervip=null)},t}(BaseContol);egret.registerClass(ActivityControl,"ActivityControl");var ArtifactControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t),this.updateSingleIconRedDotHandler()},n.addCmdHandler=function(){var e=this;this.addCmdListener(12900,function(t){e.SCMD12900Response(t)},this),this.addCmdListener(15900,function(t){e.SCMD15900Response(t)},this),this.addCmdListener(16e3,function(t){e.SCMD16000Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(ArtifactEvtName.ARTIFACT_OPEN_WINDOW,this.onOpenWindowHandler,this),this.addEventListener(ArtifactEvtName.ARTIFACT_CLOSE_WINDOW,this.onCloseWindowHandler,this),this.addEventListener(ArtifactEvtName.ARTIFACT_OPEN_SINGLE_WINDOW,this.onOpenSingleWindowHandler,this),this.addEventListener(ArtifactEvtName.CCMD12900,function(t){e.CCMD12900Request(t)},this),this.addEventListener(ArtifactEvtName.CCMD12901,function(t){e.CCMD12901Request(t)},this),this.addEventListener(ArtifactEvtName.CCMD15900,function(t){e.CCMD15900Request(t)
},this),this.addEventListener(ArtifactEvtName.CCMD15901,function(t){e.CCMD15901Request(t)},this),this.addEventListener(ArtifactEvtName.CCMD16000,function(t){e.CCMD16000Request(t)},this),this.addEventListener(ArtifactEvtName.CCMD16001,function(t){e.CCMD16001Request(t)},this),RedDotsModel.getInstance().addEventListener(RedDotsModel.MAIN_ARTIFACT_SINGLE_ICON_REDDOT,this.updateSingleIconRedDotHandler,this)},n.CCMD12900Request=function(e){RoleModel.getInstance().getRoleCommon().level<FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.ARTIFACT).open_level||this.sendSocketData(12900)},n.SCMD12900Response=function(e){ArtifactModel.getInstance().setServerData(e),RedDotsModel.getInstance().calMainArtifactSingleIconRedDot()},n.CCMD12901Request=function(e){var t=new CCMD12901;t.type=e.data.type,this.sendSocketData(12901,t)},n.CCMD15900Request=function(e){RoleModel.getInstance().getRoleCommon().level<FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.ARTIFACT).open_level||this.sendSocketData(15900)},n.SCMD15900Response=function(e){ArtifactModel.getInstance().sgLv=e.level,ArtifactModel.getInstance().sgExp=e.exp,RedDotsModel.getInstance().calMainArtifactIconRedDot(),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ArtifactEvtName.SHENGONG_UPDATE_INFO))},n.CCMD15901Request=function(e){this.sendSocketData(15901)},n.CCMD16000Request=function(e){RoleModel.getInstance().getRoleCommon().level<FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.ARTIFACT).open_level||this.sendSocketData(16e3)},n.SCMD16000Response=function(e){ArtifactModel.getInstance().exnobility_lv=e.level,RedDotsModel.getInstance().calMainArtifactIconRedDot(),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ArtifactEvtName.EXNOBILITY_UPDATE_INFO))},n.CCMD16001Request=function(e){this.sendSocketData(16001)},n.onClickIconHandler=function(){var e=new ParamEvent(ArtifactEvtName.ARTIFACT_OPEN_WINDOW);e.data={index:0,isOpen:!0},this.dispatchEvent(e)},n.onClickSingleIconHandler=function(){var e=new ParamEvent(ArtifactEvtName.ARTIFACT_OPEN_SINGLE_WINDOW);e.data={index:0,isOpen:!0},this.dispatchEvent(e)},n.onCloseWindowHandler=function(e){var t=this;t._artifactWindow&&1==t._artifactWindow.isPop&&(t._artifactWindow.isPop=!1)},n.onOpenWindowHandler=function(e){var t,i=0;e.data&&(i=e.data.index,t=e.data.isOpen),this._artifactWindow||(this._artifactWindow=new ArtifactWindow,this._artifactWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeArtifactWindow,this)),this._artifactWindow.openView(i,t)},n.disposeArtifactWindow=function(e){this._artifactWindow&&(this._artifactWindow.dispose(),this._artifactWindow=null)},n.onOpenSingleWindowHandler=function(e){var t,i=0;e.data&&(i=e.data.index,t=e.data.isOpen),this._artifactSingleWindow||(this._artifactSingleWindow=new ArtifactSingleWindow,this._artifactSingleWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeArtifactSingleWindow,this)),this._artifactSingleWindow.openView(i,t)},n.disposeArtifactSingleWindow=function(e){this._artifactSingleWindow&&(this._artifactSingleWindow.dispose(),this._artifactSingleWindow=null)},n.updateIconRedDotHandler=function(){var e=TipsWordManager.getInstance().getTipsWord("bt_lilian");e&&(e.showRedDot=RedDotsModel.getInstance().main_artifactIconRedDot)},n.updateSingleIconRedDotHandler=function(){},t}(BaseContol);egret.registerClass(ArtifactControl,"ArtifactControl");var AwakeControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){var i=this;e.prototype.onGameStart.call(this,t),setTimeout2(function(){i.requestStarGame(),i.CCMD23500Request(null)},5e3*Math.random())},n.requestStarGame=function(){FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_48,!1)&&this.CCMD19800Request()},n.addCmdHandler=function(){var e=this;this.addCmdListener(19800,function(t){e.SCMD19800Response(t)},this),this.addCmdListener(23500,function(t){e.SCMD23500Response(t)},this)},n.addEventHandler=function(){this.addEventListener(AwakeEvtName.OPEN_AWAKE,this.openView,this),this.addEventListener(AwakeEvtName.OPEN_AWAKE_SKILL,this.openSkillView,this),this.addEventListener(AwakeEvtName.OPEN_AWAKE_BUY,this.openBuyView,this),this.addEventListener(AwakeEvtName.OPEN_AWAKE_SCORE,this.openScoreView,this),this.addEventListener(AwakeEvtName.CCMD_19800,this.CCMD19800Request,this),this.addEventListener(AwakeEvtName.CCMD_19801,this.CCMD19801Request,this),this.addEventListener(AwakeEvtName.CCMD_19802,this.CCMD19802Request,this),this.addEventListener(AwakeEvtName.CCMD_23500,this.CCMD23500Request,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGAWAKE,this.onRedDot,this)},n.CCMD19800Request=function(){this.sendSocketData(19800)},n.CCMD19801Request=function(e){this.sendSocketData(19801)},n.CCMD19802Request=function(e){var t=new CCMD19802;t.item_id=e.data.id,this.sendSocketData(19802,t)},n.SCMD19800Response=function(e){AwakeModel.getInstance().setCurId(e.cfg_id),this.dispatchEvent(new ParamEvent(AwakeEvtName.CCMD_19800_UPDATE,e.cfg_id)),this.onRedDot()},n.openView=function(e){void 0===e&&(e=0),FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_48)&&(this._view||(this._view=new AwakeWindow,this._view.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._view.isPop=!0)},n.disposeView=function(e){this._view&&(this._view.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._view.dispose(),this._view=null)},n.openSkillView=function(e){this._skill||(this._skill=new AwakeSkillWindow,this._skill.addEventListener(EventName.WINDOW_DISPOSE,this.disposeSkillView,this)),this._skill.setData(e.data),this._skill.isPop2=!0},n.disposeSkillView=function(e){this._skill&&(this._skill.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeSkillView,this),this._skill.dispose(),this._skill=null)},n.openScoreView=function(e){this._score||(this._score=new AwakeScoreWindow,this._score.addEventListener(EventName.WINDOW_DISPOSE,this.disposeScoreView,this)),this._score.isPop2=!0},n.disposeScoreView=function(e){this._score&&(this._score.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeScoreView,this),this._score.dispose(),this._score=null)},n.openBuyView=function(e){this._buy||(this._buy=new AwakeBuyWindow,this._buy.addEventListener(EventName.WINDOW_DISPOSE,this.disposeBuyView,this)),this._buy.isPop2=!0},n.disposeBuyView=function(e){this._buy&&(this._buy.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeBuyView,this),this._buy.dispose(),this._buy=null)},n.onRedDot=function(){TipsWordManager.getInstance().showRedDots(TipsWord.AWAKE,AwakeModel.getInstance().isUpAwake)},n.CCMD23500Request=function(e){this.sendSocketData(23500)},n.SCMD23500Response=function(e){AwakeModel.getInstance().setAwakeTotalScore(e.grade)},t}(BaseContol);egret.registerClass(AwakeControl,"AwakeControl");var AwakeEquipControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){var e=this;this.addCmdListener(20310,function(t){e.SCMD20310Response(t)},this),this.addCmdListener(21600,function(t){e.SCMD21600Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(AwakeEquipEvtName.AWAKEEQUIPMENU_OPEN,this.onOpenAwakeEquipMenuHandler,this),this.addEventListener(AwakeEquipEvtName.AWAKEEQUIPMENU_CLOSE,this.onCloseAwakeEquipMenuHandler,this),this.addEventListener(AwakeEquipEvtName.AWAKEEQUIPWEAR_OPEN,this.onOpenAwakeEquipWearHandler,this),this.addEventListener(AwakeEquipEvtName.AWAKEEQUIPCOMPOSE_OPEN,this.onOpenAwakeEquipComposeHandler,this),this.addEventListener(AwakeEquipEvtName.AWAKEEQUIP_SOUL_VIEW_OPEN,this.onOpenAwakeEquipSoulHandler,this),this.addEventListener(AwakeEquipEvtName.AWAKEEQUIPCOMPOSE_MATERIAL_OPEN,this.onOpenAwakeEquipComposeMaterialHandler,this),this.addEventListener(AwakeEquipEvtName.CCMD20300,function(t){e.CCMD20300Request(t)},this),this.addEventListener(AwakeEquipEvtName.CCMD20301,function(t){e.CCMD20301Request(t)},this),this.addEventListener(AwakeEquipEvtName.CCMD20302,function(t){e.CCMD20302Request(t)},this),this.addEventListener(AwakeEquipEvtName.CCMD20310,function(t){e.CCMD20310Request(t)},this),this.addEventListener(AwakeEquipEvtName.CCMD21600,function(t){e.CCMD216000Request(t)},this),this.addEventListener(AwakeEquipEvtName.CCMD21601,function(t){e.CCMD21601Request(t)},this)},n.CCMD20300Request=function(e){var t=new CCMD20300;t.partner_id=e.data.id,this.sendSocketData(20300,t)},n.CCMD20301Request=function(e){var t=new CCMD20301;t.partner_id=e.data.id,t.item_id=e.data.item_id,this.sendSocketData(20301,t)},n.CCMD20302Request=function(e){var t=new CCMD20302;t.partner_id=e.data.id,t.slot_id=e.data.slot_id,this.sendSocketData(20302,t)},n.CCMD20310Request=function(e){var t=new CCMD20310;t.cfg_id=e.data.cfg_id,t.item_ids=e.data.item_ids,this.sendSocketData(20310,t)},n.SCMD20310Response=function(e){1==e.flag?(Message.show("合成成功"),this.dispatchEvent(new ParamEvent(AwakeEquipEvtName.AWAKEEQUIPCOMPOSE_SUCCESS)),RedDotsModel.getInstance().calMainFigureIconRedDot()):Message.show("合成失败")},n.CCMD216000Request=function(e){var t=new CCMD21600;t.partner_id=e.data.id,this.sendSocketData(21600,t)},n.SCMD21600Response=function(e){AwakeModel.getInstance().setAwakeEquipSoulData(e)},n.CCMD21601Request=function(e){var t=new CCMD21601;t.partner_id=e.data.partner_id,t.type=e.data.type,this.sendSocketData(21601,t)},n.onOpenAwakeEquipMenuHandler=function(e){null==this._awakeEquipMenu&&(this._awakeEquipMenu=new AwakeEquipMenuView,this._awakeEquipMenu.updateData(e.data.item),Number(e.data.item.name)<EquipmentVO.AWAKELEQUIP_GRID[4]?this._awakeEquipMenu.x=e.data.item.x+80:this._awakeEquipMenu.x=e.data.item.x-80,this._awakeEquipMenu.y=e.data.item.y+80),e.data.parentObj.addChild(this._awakeEquipMenu)},n.onCloseAwakeEquipMenuHandler=function(e){this._awakeEquipMenu&&(this._awakeEquipMenu.dispose(),this._awakeEquipMenu=null)},n.onOpenAwakeEquipWearHandler=function(e){this._awakeEquipWearView||(this._awakeEquipWearView=new AwakeEquipWearView(e.data.type),this._awakeEquipWearView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeAwakeEquipWearView,this)),this._awakeEquipWearView.isPop=!0},n.disposeAwakeEquipWearView=function(e){this._awakeEquipWearView&&(this._awakeEquipWearView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeAwakeEquipWearView,this),this._awakeEquipWearView.dispose(),this._awakeEquipWearView=null)},n.onOpenAwakeEquipComposeHandler=function(e){this._awakeEquipComposeWindow||(this._awakeEquipComposeWindow=new AwakeEquipComposeWindow,this._awakeEquipComposeWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeAwakeEquipComposeWindow,this)),this._awakeEquipComposeWindow.isPop=!0},n.disposeAwakeEquipComposeWindow=function(e){this._awakeEquipComposeWindow&&(this._awakeEquipComposeWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeAwakeEquipComposeWindow,this),this._awakeEquipComposeWindow.dispose(),this._awakeEquipComposeWindow=null)},n.onOpenAwakeEquipComposeMaterialHandler=function(e){this._awakeEquipComposeMaterialView||(this._awakeEquipComposeMaterialView=new AwakeEquipComposeMaterialView(e.data.level,e.data.round,e.data.ids),this._awakeEquipComposeMaterialView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeAwakeEquipComposeMateiralView,this)),this._awakeEquipComposeMaterialView.isPop=!0},n.disposeAwakeEquipComposeMateiralView=function(e){this._awakeEquipComposeMaterialView&&(this._awakeEquipComposeMaterialView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeAwakeEquipComposeMateiralView,this),this._awakeEquipComposeMaterialView.dispose(),this._awakeEquipComposeMaterialView=null)},n.onOpenAwakeEquipSoulHandler=function(e){var t=0,i=!0;e.data&&(t=e.data.index,i=e.data.isOpen),this._awakeEquipSoulWindow||(this._awakeEquipSoulWindow=new AwakeEquipSoulWindow,this._awakeEquipSoulWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeAwakeEquipSoulWindow,this)),this._awakeEquipSoulWindow.openView(t,i)},n.disposeAwakeEquipSoulWindow=function(e){this._awakeEquipSoulWindow&&(this._awakeEquipSoulWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeAwakeEquipSoulWindow,this),this._awakeEquipSoulWindow.dispose(),this._awakeEquipSoulWindow=null)},t}(BaseContol);egret.registerClass(AwakeEquipControl,"AwakeEquipControl");var BagControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){var e=this;this.addCmdListener(10430,function(t){e.SCMD10430Response(t)},this),this.addCmdListener(10400,function(t){e.SCMD10400Response(t)},this),this.addCmdListener(10410,function(t){e.SCMD10410Response(t)},this),this.addCmdListener(10411,function(t){e.SCMD10411Response(t)},this),this.addCmdListener(10403,function(t){e.SCMD10403Response(t)},this),this.addCmdListener(10420,function(t){e.SCMD10420Response(t)},this),this.addCmdListener(10401,function(t){e.SCMD10401Response(t)},this),this.addCmdListener(10440,function(t){e.SCMD10440Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(EventName.MAINUI_CLICK_PACK,this.onOpenBagViewHandler,this),this.addEventListener(EventName.OPEN_OPENGRID_VIEW,this.onOpenOpenGridViewHandler,this),this.addEventListener(EventName.OPEN_GETMATERIAL_WINDOW,this.onOpenGetMaterialWindowHandler,this),this.addEventListener(EventName.OPEN_GETMATERIAL_BUY_WINDOW,this.onOpenGetMaterialBuyWindowHandler,this),this.addEventListener(EventName.GET_GOODS,this.onBagGetItem,this),this.addEventListener(EventName.SHOW_ITEM_TIPS,this.onShowItemTips,this),this.addEventListener(EventName.REQUEST_GOODSINFO,function(t){e.CCMD10430Request(t)},this),this.addEventListener(EventName.REQUEST_USEITEM,function(t){e.CCMD10401Request(t)},this),this.addEventListener(EventName.REQUEST_ECONOMY,function(t){e.CCMD10410Request(t)},this),this.addEventListener(EventName.REQUEST_BAGGRIDNUM,function(t){e.CCMD10420Request(t)},this),this.addEventListener(EventName.REQUEST_BAG_STARTGRID,function(t){e.CCMD10421Request(t)},this)},n.CCMD10430Request=function(e){this.sendSocketData(10430,null)},n.SCMD10400Response=function(e){e.item.length;GoodsListProxy.getInstance().createList(e.item),RedDotsModel.getInstance().calMainFigureIconRedDot(),RedDotsModel.getInstance().calMainBagIconRedDot()},n.CCMD10401Request=function(e){var t=new CCMD10401;t.item_id=e.data.id,t.num=e.data.num,this.sendSocketData(10401,t)},n.SCMD10403Response=function(e){for(var t=0;t<e.del_itemids.length;t++)GoodsListProxy.getInstance().deleteGoods(e.del_itemids[t]);this.dispatchEvent(new ParamEvent(EventName.UPDATE_GOODSITEM))},n.CCMD10410Request=function(e){this.sendSocketData(10410)},n.SCMD10410Response=function(e){for(var t,i=0;i<e.economy.length;i++)t=e.economy[i],this.updateRoleEconomy(t)},n.SCMD10411Response=function(e){for(var t,i=0;i<e.economy.length;i++)t=e.economy[i],this.updateRoleEconomy(t)},n.updateRoleEconomy=function(e){1==e.type?(RoleModel.getInstance().getRoleInfo().setCoin(e.value),RedDotsModel.getInstance().calMainFigureIconRedDot()):2==e.type?RoleModel.getInstance().getRoleInfo().setGold(e.value):3==e.type?RoleModel.getInstance().getRoleInfo().setGx(e.value):4==e.type?(RoleModel.getInstance().getRoleInfo().setSoul(e.value),RedDotsModel.getInstance().calMainFigureIconRedDot()):7==e.type?RoleModel.getInstance().getRoleInfo().setMallPoint(e.value):8==e.type?RoleModel.getInstance().getRoleInfo().setFeat(e.value):e.type==WelfareType.ADD_AWAKE&&RoleModel.getInstance().getRoleInfo().setAwake(e.value)},n.CCMD10420Request=function(e){this.sendSocketData(10420)},n.SCMD10420Response=function(e){GoodsListProxy.getInstance().setBaseGrid(e.base_num),GoodsListProxy.getInstance().setOtherGrid(e.other_num),GoodsListProxy.getInstance().updateBagGridNum()},n.CCMD10421Request=function(e){var t=new CCMD10421;t.num=e.data.num,this.sendSocketData(10421,t)},n.SCMD10401Response=function(e){GoodsListProxy.getInstance().changeEquipPos(e.item)},n.SCMD10430Response=function(e){GoodsListProxy.getInstance().createList(e.item,!1)},n.onOpenBagViewHandler=function(e){var t,i=0;e.data&&(i=e.data.index,t=e.data.isOpen),this.bagView||(this.bagView=new BagWindow,this.bagView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeBagWindow,this)),this.bagView.openView(i,t)},n.disposeBagWindow=function(e){this.bagView&&(this.bagView.dispose(),this.bagView=null)},n.onOpenGetMaterialWindowHandler=function(e){this._getMaterialWindow||(this._getMaterialWindow=new GetMaterialWindow,this._getMaterialWindow.addEventListener(EventName.WINDOW_DISPOSE,this.onCloseGetMaterialWindowHandler,this)),this._getMaterialWindow.setData(e.data.typeId,e.data.type,e.data.linkStrArr),this._getMaterialWindow.isPop2=!0},n.onCloseGetMaterialWindowHandler=function(e){this._getMaterialWindow&&(this._getMaterialWindow.dispose(),this._getMaterialWindow=null)},n.onOpenGetMaterialBuyWindowHandler=function(e){this._getMaterialBuyWindow||(this._getMaterialBuyWindow=new GetMaterialBuyWindow,this._getMaterialBuyWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._getMaterialBuyWindow.setData(e.data.typeId,e.data.type,e.data.linkStrArr),this._getMaterialBuyWindow.isPop2=!0},n.disposeView=function(e){this._getMaterialBuyWindow&&(this._getMaterialBuyWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._getMaterialBuyWindow.dispose(),this._getMaterialBuyWindow=null)},n.onOpenOpenGridViewHandler=function(e){this._openGridView||(this._openGridView=new OpenGridView),this._openGridView.isPop2=!0},n.onBagGetItem=function(e){var t=e.data.vo;if(t.type==GoodsType.ITEM_EQUIP&&t.quality==GoodsType.QUALITY_5)this.showItemTips(UrlUtil.getGoodsImageURL(t.pic),"恭喜获得橙装装备——"+t.name);else if(t.type==GoodsType.ITEM_EQUIP&&t.quality==GoodsType.QUALITY_6)this.dispatchEvent(new ParamEvent(FuLiEvtName.SHOW_SHARENEW_VIEW,6));else if(ShareModel.getInstance().isShareGoods(t.template_id)){var i=ShareModel.getInstance().getShareReward(t.template_id);if(OrderGiftModel.getInstance().hasGot(i))return;ShareModel.getInstance().shareOrderID=i,this.dispatchEvent(new ParamEvent(FuLiEvtName.SHOW_SHARENEW_VIEW,i))}},n.onShowItemTips=function(e){this.showItemTips(e.data.url,e.data.str)},n.showItemTips=function(e,t){this._arrEquipTips||(this._arrEquipTips=[]);var i=new BagEquipTipsView;i.setData(e,t),this._arrEquipTips.push(i),this._bagEquipTips||this.showItemTips2()},n.showItemTips2=function(){var e=this;this._bagEquipTips=this._arrEquipTips.shift(),this._bagEquipTips.x=GameContent.stageWidth/2-290,this._bagEquipTips.y=GameContent.stageHeight,GameContent.gameLayers.tipsLayer.addChild(this._bagEquipTips),egret.Tween.get(this._bagEquipTips).to({y:GameContent.stageHeight-300},1e3).wait(50).call(function(){clearTimeout(e._timeIndex),e._timeIndex=setTimeout2(function(){e._bagEquipTips&&e._bagEquipTips.parent&&(e._bagEquipTips.parent.removeChild(e._bagEquipTips),e._bagEquipTips=null),e._arrEquipTips.length>0&&e.showItemTips2()},500)})},n.SCMD10440Response=function(e){e.drop_list},t}(BaseContol);egret.registerClass(BagControl,"BagControl");var BossControl=function(e){function t(){e.call(this),this._currentPersonBoss=0,this._isStart=!0,this._bossDropSi=0,this._roundBossSi=0,this._guildBossID=0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this),this._model=BossModel.getInstance()},n.onGameStart=function(t){var i=this;e.prototype.onGameStart.call(this,t);var n=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.MEETBOSS);SceneModel.getInstance().getSceneWave().wave_id>=n.open_hook&&setTimeout2(function(){i.dispatchEvent(new ParamEvent(EventName.GET_BOSS_MEET_INFO))},2512),setTimeout2(function(){i.addBossIcon()},2e3*Math.random()),this._iconRoundBoss=TipsWordManager.getInstance().addWordIcon("btn_zhuansheng"),this._iconRoundBoss.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openRoundBossHandler,this)},n.addBossIcon=function(){if(this._isStart){this._isStart=!1;var e=SceneModel.getInstance().getSceneWave().total_wave_id;e>=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.MEETBOSS).open_hook?(SceneModel.getInstance().removeEventListener(SceneModel.UPDATE_SCENE_WAVE,this.updateWaveInfo,this),this.showRedDots(),this.request14400(),this.request14401()):SceneModel.getInstance().addEventListener(SceneModel.UPDATE_SCENE_WAVE,this.updateWaveInfo,this)}},n.updateWaveInfo=function(e){this.addBossIcon()},n.addEventHandler=function(){this.addEventListener(EventName.GET_BOSS_MEET_INFO,this.getBossMeetInfo,this),this.addEventListener(BossEvtName.OPEN_MEET_BOSS_WINDOW,this.openMeetBossView,this),this.addEventListener(BossEvtName.CHALLENGE_MEET_BOSS,this.challengeMeetBoss,this),this.addEventListener(EventName.MEET_BOSS_FINISH,this.meetBossFinish,this),this.addEventListener(BossEvtName.OPEN_BOSS_WINDOW,this.openBossView,this),this.addEventListener(BossEvtName.OPEN_BOSS_ALL_SETTING,this.openBossSettingView,this),this.addEventListener(BossEvtName.OPEN_BOSS_ALL_KILL,this.openBossKillRankView,this),this.addEventListener(BossEvtName.OPEN_BOSS_ALL_HIT,this.openBossHitRankView,this),this.addEventListener(BossEvtName.OPEN_BOSS_MAINUI,this.openBossMainView,this),this.addEventListener(BossEvtName.OPEN_BOSS_ROUND_HIT,this.openBossRoundHitRankView,this),this.addEventListener(BossEvtName.OPEN_BOSS_ROUND_REWARD,this.openBossRoundRewardView,this),this.addEventListener(BossEvtName.BOSS_CCMD13110,this.request13110,this),this.addEventListener(BossEvtName.BOSS_CCMD13111,this.request13111,this),this.addEventListener(BossEvtName.BOSS_CCMD13112,this.request13112,this),this.addEventListener(BossEvtName.BOSS_CCMD14400,this.request14400,this),this.addEventListener(BossEvtName.BOSS_CCMD14401,this.request14401,this),this.addEventListener(BossEvtName.BOSS_CCMD14402,this.request14402,this),this.addEventListener(BossEvtName.BOSS_CCMD14410,this.request14410,this),this.addEventListener(EventName.SCENE_CHANGE,this.sceneChangeHandler,this),this.addEventListener(BossEvtName.BOSS_CCMD14800,this.request14800,this),this.addEventListener(BossEvtName.BOSS_CCMD14810,this.request14810,this),this.addEventListener(BossEvtName.BOSS_CCMD14811,this.request14811,this),this.addEventListener(BossEvtName.BOSS_CCMD14820,this.request14820,this),this.addEventListener(EventName.ROLLPOINT_RESULT,this.updateRollPointResult,this),this.addEventListener(EventName.ROLLPOINT_MAX,this.updateRollMax,this),this.addEventListener(EventName.SHOW_ROLLPOINT,this.showRollPointViewHandler,this),this.addEventListener(EventName.SHOW_BOSSBLOOD_VIEW,this.showBossBloodViewHandler,this),this.addEventListener(BossEvtName.CMD19400,this.request19400,this),this.addEventListener(BossEvtName.CMD19410,this.request19410,this),this.addEventListener(BossEvtName.CMD19420,this.request19420,this),this.addEventListener(BossEvtName.CMD19430,this.request19430,this),this.addEventListener(BossEvtName.CMD19431,this.request19431,this),this.addEventListener(DailyEvtName.DAILY_UPDATE,this.showRedDots,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_CHANGE,this.showRedDots,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_ROUND_CHANGE,this.showRedDots,this),this.addEventListener(EventName.TIPSWORD_UPDATE,this.onTipsWordUpdate,this),this.addEventListener(BossEvtName.BOSS_SHOW_FIGHT_RESULT,this.onShowFightResult,this),this.addEventListener(BossEvtName.CMD20500,this.request20500,this),this.addEventListener(BossEvtName.CMD20510,this.request20510,this),this.addEventListener(BossEvtName.CMD20520,this.request20520,this),this.addEventListener(BossEvtName.CMD20600,this.request20600,this),this.addEventListener(BossEvtName.CMD20610,this.request20610,this),this.addEventListener(BossEvtName.CMD20700,this.request20700,this),this.addEventListener(BossEvtName.CMD20710,this.request20710,this),this.addEventListener(BossEvtName.CMD20720,this.request20720,this),this.addEventListener(SceneEvtName.MAIN_CITY_CHANGE,this.mainCityChange,this),this.addEventListener(BossEvtName.CCMD20730,this.request20730,this),this.addEventListener(BossEvtName.CCMD20530,this.request20530,this),this.addEventListener(EventName.SCENE_CHANGE,this.sceneChange,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(13100,function(t){e.response13100(t)},this),this.addCmdListener(13110,function(t){e.response13110(t)},this),this.addCmdListener(13111,function(t){e.response13111(t)},this),this.addCmdListener(14400,function(t){e.response14400(t)},this),this.addCmdListener(14401,function(t){e.response14401(t)},this),this.addCmdListener(14405,function(t){e.response14405(t)},this),this.addCmdListener(14410,function(t){e.response14410(t)},this),this.addCmdListener(14411,function(t){e.response14411(t)},this),this.addCmdListener(14412,function(t){e.response14412(t)},this),this.addCmdListener(14420,function(t){e.response14420(t)},this),this.addCmdListener(14800,function(t){e.response14800(t)},this),this.addCmdListener(14810,function(t){e.response14810(t)},this),this.addCmdListener(14811,function(t){e.response14811(t)},this),this.addCmdListener(14812,function(t){e.response14812(t)},this),this.addCmdListener(14813,function(t){e.response14813(t)},this),this.addCmdListener(14820,function(t){e.response14820(t)},this),this.addCmdListener(14821,function(t){e.response14821(t)},this),this.addCmdListener(14822,function(){e.response14822()},this),this.addCmdListener(14830,function(t){e.response14830(t)},this),this.addCmdListener(19400,function(t){e.response19400(t)},this),this.addCmdListener(19410,function(t){e.response19410(t)},this),this.addCmdListener(19411,function(t){e.response19411(t)},this),this.addCmdListener(19412,function(t){e.response19412(t)},this),this.addCmdListener(19413,function(t){e.response19413(t)},this),this.addCmdListener(19430,function(t){e.response19430(t)},this),this.addCmdListener(19431,function(t){e.response19431(t)},this),this.addCmdListener(20500,function(t){e.response20500(t)},this),this.addCmdListener(20501,function(t){e.response20501(t)},this),this.addCmdListener(20510,function(t){e.response20510(t)},this),this.addCmdListener(20511,function(t){e.resposne20511(t)},this),this.addCmdListener(20600,function(t){e.response20600(t)},this),this.addCmdListener(20610,function(t){e.response20610(t)},this),this.addCmdListener(20611,function(t){e.response20611(t)},this),this.addCmdListener(20700,function(t){e.response20700(t)},this),this.addCmdListener(20701,function(t){e.response20701(t)},this),this.addCmdListener(20710,function(t){e.response20710(t)},this),this.addCmdListener(20711,function(t){e.response20711(t)},this)},n.mainCityChange=function(e){this._bossRightView&&(TipsWordManager.getInstance().isCity?this._bossRightView.visible=!1:SceneModel.getInstance().isShowBossRight()&&(this._bossRightView.visible=!0)),this._bossBloodView&&(TipsWordManager.getInstance().isCity?this._bossBloodView.visible=!1:SceneModel.getInstance().isBossScene()&&(this._bossBloodView.visible=!0))},n.getBossMeetInfo=function(e){this.request13100()},n.request13100=function(){this.sendSocketData(13100)},n.response13100=function(e){this._model.setMeetBossInfo(e),e.template_id>0&&(this.dispatchEvent(new ParamEvent(BossEvtName.ADD_BOSS_OF_MEET)),SceneModel.getInstance().isHookSmall()&&this._model.addMeetBoss())},n.openMeetBossView=function(e){null==this._meetBossView&&(this._meetBossView=new MeetBossWindow,this._meetBossView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeMeetBossWindow,this));var t=this._model.getMeetBossInfo();t?(this._meetBossView.isPop=!0,this._meetBossView.setData(t)):Message.show("暂时没有遭遇Boss可挑战")},n.disposeMeetBossWindow=function(e){this._meetBossView&&(this._meetBossView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeMeetBossWindow,this),this._meetBossView.dispose(),this._meetBossView=null)},n.challengeMeetBoss=function(e){SceneModel.getInstance().removeTypeMon(MonsterVO.COMMON),this.dispatchEvent(new ParamEvent(EventName.ADD_BOSS_MEET))},n.meetBossFinish=function(e){SceneModel.getInstance().toFightBossMeet=!1;var t=BossModel.getInstance().getMeetBossInfo();t&&(this.request13101(t.template_id),BossModel.getInstance().setMeetBossInfo(null)),this.dispatchEvent(new ParamEvent(EventName.REQUEST_NEXT_WAVE)),this._meetBossView&&(this._meetBossView.isPop=!1)},n.request13101=function(e){var t=new CCMD13101;t.template_id=e,this.sendSocketData(13101,t)},n.openBossView=function(e){if(GuildAertManager.getInstance().remove("btn_boss"),null==this._bossView&&(this._bossView=new BossWindow,this._bossView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._bossView.isPop=!0,this._bossView.isPop){var t=0;e.data&&(t=Number(e.data)),this._bossView.setSelectIndex(t,!0)}},n.disposeView=function(e){this._bossView&&(this._bossView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._bossView.dispose(),this._bossView=null)},n.request13110=function(e){if(FunctionOpenModel.getInstance().check(FunctionOpenModel.MEETBOSS,!1)){var t=new CCMD13110;t.template_id=e.data,this.sendSocketData(13110,t),this._model.currentPersonBoss=e.data,this._bossView&&(this._bossView.isPop=!1)}},n.response13110=function(e){SceneModel.getInstance().showResult(1,e.drop_list)},n.request13111=function(e){var t=new CCMD13111;t.template_id=e.data,this.sendSocketData(13111,t)},n.response13111=function(e){0==e.flag&&this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_FAIL,{dropList:[]}))},n.request13112=function(e){var t=new CCMD13112;t.template_id=e.data,this.sendSocketData(13112,t)},n.request14400=function(){this.sendSocketData(14400)},n.request14401=function(){this.sendSocketData(14401)},n.request14402=function(e){var t=new CCMD14402;t.template_id=e.data.id,t.flag=e.data.flag,this.sendSocketData(14402,t)},n.request14410=function(e){var t=new CCMD14410;t.template_id=e.data,this._model.currentPeopleBossID=t.template_id,this.sendSocketData(14410,t),this._bossView&&(this._bossView.isPop=!1)},n.response14400=function(e){BossModel.getInstance().bossAllInfo=e,BossModel.getInstance().setBossAllData(e.boss_alls),this.dispatchEvent(new ParamEvent(BossEvtName.BOSS_CCMD14400_UPDATE,e)),this.showRedDots()},n.response14401=function(e){BossModel.getInstance().setBossAllTipStauts(e.boss_all_notices),this.dispatchEvent(new ParamEvent(BossEvtName.BOSS_CCMD14401_UPDATE,e))},n.response14405=function(e){BossModel.getInstance().setBossAllData(e.boss_alls),this.dispatchEvent(new ParamEvent(BossEvtName.BOSS_CCMD14400_UPDATE,e)),this.showRedDots()},n.response14410=function(e){SceneModel.getInstance().showResult(1,e.drop_list)},n.response14411=function(e){1==e.flag&&this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_FAIL,{dropList:[]}))},n.response14412=function(e){this.dispatchEvent(new ParamEvent(EventName.SHOW_BOSSBLOOD_VIEW)),e.boss_all_hits=e.boss_all_hits.reverse();var t=this._model.changePeopleToBossDamageVo(e);this._model.setBossDamageInfo(t)},n.showBossBloodViewHandler=function(e){this.showBossBloodView()},n.showBossBloodView=function(){null==this._bossBloodView&&(this._bossBloodView=new BossBloodView,this._bossBloodView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeBloodView,this)),this._bossBloodView.onAdd()},n.disposeBloodView=function(e){this._bossBloodView&&(this._bossBloodView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeBloodView,this),this._bossBloodView.dispose(),this._bossBloodView=null)},n.response14420=function(e){},n.openBossSettingView=function(e){null==this._settingView&&(this._settingView=new BossAllSettingWindow,this._settingView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeSetView,this)),this._settingView.isPop2=!this._settingView.isPop,this._settingView.isPop&&this.request14401()},n.disposeSetView=function(e){this._settingView&&(this._settingView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeSetView,this),this._settingView.dispose(),this._settingView=null)
},n.openBossHitRankView=function(e){null==this._hitRank&&(this._hitRank=new BossAllHitRankWindow,this._hitRank.addEventListener(EventName.WINDOW_DISPOSE,this.disposeHitView,this)),this._hitRank.isPop2=!this._hitRank.isPop,this._hitRank.isPop&&this._hitRank.updateData(e.data)},n.disposeHitView=function(e){this._hitRank&&(this._hitRank.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeHitView,this),this._hitRank.dispose(),this._hitRank=null)},n.openBossKillRankView=function(e){null==this._killRank&&(this._killRank=new BossAllKillRankWindow,this._killRank.addEventListener(EventName.WINDOW_DISPOSE,this.disposekillView,this)),this._killRank.isPop2=!this._killRank.isPop,this._killRank.isPop&&this._killRank.updateData(e.data)},n.disposekillView=function(e){this._killRank&&(this._killRank.removeEventListener(EventName.WINDOW_DISPOSE,this.disposekillView,this),this._killRank.dispose(),this._killRank=null)},n.openBossMainView=function(e){null==this._mainBoss&&(this._mainBoss=new BossMainWindow,this._mainBoss.addEventListener(EventName.WINDOW_DISPOSE,this.disposeMainView,this)),this._mainBoss.isPop=!this._mainBoss.isPop,this._mainBoss.isPop&&this._mainBoss.setType(e.data)},n.disposeMainView=function(e){this._mainBoss&&(this._mainBoss.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeMainView,this),this._mainBoss.dispose(),this._mainBoss=null)},n.sceneChangeHandler=function(e){SceneModel.getInstance().isPeopleBoss()||SceneModel.getInstance().isRoundBoss()||SceneModel.getInstance().isGuildBoss()||SceneModel.getInstance().isKFBossScene()||(SceneModel.getInstance().isClientMakeBossBloodScene()||this._bossBloodView&&this._bossBloodView.onRemove(),this._bossRightView&&this._bossRightView.onRemove(),this._bossShieldView&&this._bossShieldView.onRemove()),SceneModel.getInstance().isShowBossRight()?(null==this._bossRightView&&(this._bossRightView=new BossRightView),this._bossRightView.showView()):this._rollPointView&&this._rollPointView.onRemove(),this.dispatchEvent(new ParamEvent(EventName.CLOSE_RELIVE_VIEW)),SceneModel.getInstance().isPeopleBoss()||(this._model.currentPeopleBossID=0),SceneModel.getInstance().isPersonBoss()||(this._model.currentPersonBoss=0),SceneModel.getInstance().isGuildBoss()||(this._model.guildBossID=0),this._roundBossSi>0&&clearTimeout(this._roundBossSi),ReliveModel.getInstance().setReliveLeftTimeByServer(0)},n.request14800=function(e){FunctionOpenModel.getInstance().check(FunctionOpenModel.MEETBOSS,!1)&&this.sendSocketData(14800)},n.request14810=function(e){FunctionOpenModel.getInstance().check(FunctionOpenModel.MEETBOSS,!1)&&(this.sendSocketData(14810),this._bossView&&(this._bossView.isPop=!1),this.dispatchEvent(new ParamEvent(EventName.CLOSE_CITY_VIEW)))},n.request14811=function(e){var t=new CCMD14811,i=e.data.type;t.type=i,this.sendSocketData(14811,t)},n.response14800=function(e){BossModel.getInstance().setRoundData(e.boss_rounds),this.dispatchEvent(new ParamEvent(BossEvtName.BOSS_CCMD14800_UPDATE,e))},n.response14810=function(e){var t=this;1==e.flag&&(ReliveModel.getInstance().isAuto&&RoleModel.getInstance().getRoleInfo().getGold()>=ReliveModel.getInstance().getReliveYuanBao()?(this._roundBossSi>0&&clearTimeout(this._roundBossSi),this._roundBossSi=setTimeout2(function(){t.dispatchEvent(new ParamEvent(BossEvtName.BOSS_CCMD14811,{type:1}))},1e3)):this.dispatchEvent(new ParamEvent(EventName.SHOW_RELIVE_VIEW)))},n.response14811=function(e){this.showBossBloodView(),this._currentBossID=e.boss_id,e.boss_round_hits=e.boss_round_hits.reverse();var t=this._model.changeRoundToBossDamageVo(e);0==t.shieldRate||100==t.shieldRate?this.removeBossSHieldView():this.showBossShieldView(),this._model.setBossDamageInfo(t)},n.showBossShieldView=function(){null==this._bossShieldView&&(this._bossShieldView=new BossShieldView),this._bossShieldView.showView()},n.removeBossSHieldView=function(){this._bossShieldView&&this._bossShieldView.onRemove()},n.response14812=function(e){if(SceneModel.getInstance().isRoundBoss()&&this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_SUCCESS,{list:e.drop_list})),ReliveModel.getInstance().setReliveLeftTimeByServer(0),ConfigManager.isTencent()&&e.drop_list.length>0){var t="击杀了转生BOSS";QQManager.getInstance().sendWanBaMsg(t)}},n.response14813=function(e){1==e.flag?(ReliveModel.getInstance().setReliveLeftTimeByServer(e.last_cd),this.dispatchEvent(new ParamEvent(EventName.SHOW_RELIVE_VIEW))):ReliveModel.getInstance().setReliveLeftTimeByServer(0)},n.openBossRoundHitRankView=function(e){null==this._roundHitRank&&(this._roundHitRank=new BossRoundHitRankWindow,this._roundHitRank.addEventListener(EventName.WINDOW_DISPOSE,this.disposeRoundHitView,this)),this._roundHitRank.isPop2=!this._roundHitRank.isPop,this._roundHitRank.isPop&&this._roundHitRank.updateData(e.data)},n.disposeRoundHitView=function(e){this._roundHitRank&&(this._roundHitRank.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeRoundHitView,this),this._roundHitRank.dispose(),this._roundHitRank=null)},n.openBossRoundRewardView=function(e){null==this._roundReward&&(this._roundReward=new BossRoundRewardWindow,this._roundReward.addEventListener(EventName.WINDOW_DISPOSE,this.disposeRoundRewardView,this)),this._roundReward.isPop2=!this._roundReward.isPop},n.disposeRoundRewardView=function(e){this._roundReward&&(this._roundReward.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeRoundRewardView,this),this._roundReward.dispose(),this._roundReward=null)},n.showRedDots=function(){},n.request14820=function(e){this.sendSocketData(14820)},n.response14820=function(e){this.dispatchEvent(new ParamEvent(EventName.ROLLPOINT_RESULT,{point:e.num}))},n.response14821=function(e){this.dispatchEvent(new ParamEvent(EventName.ROLLPOINT_MAX,{name:e.name,value:e.num}))},n.showRollPointViewHandler=function(e){this.showRollPointView()},n.showRollPointView=function(){null==this._rollPointView&&(this._rollPointView=new RollPointView),this._rollPointView.showView();var e;if(SceneModel.getInstance().isRoundBoss()){var t=BossModel.getInstance().getBossRoundTypeReward(this._currentBossID,3);e=t.itemList[0].info}else if(SceneModel.getInstance().isCityWar()){var i=CityWarModel.getInstance().getTypeRewardConfigList(CityWarRewardConfigVo.ROLL),n=i[0].goodsList[0];e=GoodsListProxy.getInstance().getGoodsInfoByType(n.asset_id),e.num=n.value}this._rollPointView.setData(e)},n.updateRollPointResult=function(e){this._rollPointView&&this._rollPointView.setMyValue(e.data.point)},n.updateRollMax=function(e){var t=e.data.value,i=e.data.name;this._rollPointView&&this._rollPointView.setMax(t,i)},n.response14822=function(){this.dispatchEvent(new ParamEvent(EventName.SHOW_ROLLPOINT))},n.response14830=function(e){},n.onTipsWordUpdate=function(){},n.request19400=function(e){this.sendSocketData(19400)},n.request19410=function(e){var t=new CCMD19410;t.template_id=e.data,this.sendSocketData(19410,t),this._bossView&&(this._bossView.isPop=!1)},n.request19420=function(e){var t=new CCMD19420;t.template_id=this._model.guildBossID,this.sendSocketData(19420,t)},n.request19430=function(){var e=new CCMD19430;e.template_id=this._model.guildBossID,this.sendSocketData(19430,e)},n.request19431=function(){this.sendSocketData(19431)},n.response19431=function(e){var t=this;t._txtBossGuildTime.text=TimeUtil.getTime2(e.cd),t._bossGuildTime=e.cd,t._bossGuildTime>0?(t._txtBossGuildTime.text=TimeUtil.getTime2(e.cd),TimerManager.getInstance().add(1e3,t.timeComplete,t),t._btnBossGuildCall.enabled=!1):(t._txtBossGuildTime.text="",t._btnBossGuildCall.enabled=!0)},n.timeComplete=function(){var e=this;e._bossGuildTime--,e._txtBossGuildTime?e._bossGuildTime<=0?(TimerManager.getInstance().remove(1e3,e.timeComplete,e),e._txtBossGuildTime.text="",e._btnBossGuildCall.enabled=!0):e._txtBossGuildTime.text=TimeUtil.getTime2(e._bossGuildTime):TimerManager.getInstance().remove(1e3,e.timeComplete,e)},n.response19400=function(e){BossModel.getInstance().setBossGuildData(e.boss_guilds),this.dispatchEvent(new ParamEvent(BossEvtName.CMD19400_UPDATE,e))},n.response19410=function(e){SceneModel.getInstance().showResult(e.is_top,e.drop_list)},n.response19411=function(e){var t=this,i=this;1==e.flag&&(ReliveModel.getInstance().isAuto&&RoleModel.getInstance().getRoleInfo().getGold()>=ReliveModel.getInstance().getReliveYuanBao()?(this._roundBossSi>0&&clearTimeout(this._roundBossSi),this._roundBossSi=setTimeout2(function(){t.dispatchEvent(new ParamEvent(BossEvtName.CMD19420))},1e3)):this.dispatchEvent(new ParamEvent(EventName.SHOW_RELIVE_VIEW)),i._btnBossGuildCall&&(i._btnBossGuildCall.enabled=!1))},n.response19412=function(e){if(SceneModel.getInstance().isGuildBoss()){this._guildBossID=e.boss_id,this.dispatchEvent(new ParamEvent(EventName.SHOW_BOSSBLOOD_VIEW));var t=this._model.changeGuildBossToBossDamageVo(e);this._model.setBossDamageInfo(t)}},n.response19413=function(e){this.dispatchEvent(new ParamEvent(BossEvtName.BOSS_SHOW_FIGHT_RESULT,e))},n.response19430=function(e){var t=this;BossModel.getInstance().setBossGuildCall(e),BossModel.getInstance().BossGuildCallArr.length>0?BossModel.getInstance().isShowBossGuildCall?t.onShowBossGuildCall():(SceneModel.getInstance().isHookSmall()||SceneModel.getInstance().isMainCity())&&(t._btnBossGuildIcon||(t._btnBossGuildIcon=new PicLoader,t._btnBossGuildIcon.load("resource/assets/icon/mainUIBtn/btn_bossGuildCall.png"),t._btnBossGuildIcon.touchEnabled=!0,t._btnBossGuildIcon.x=135,t._btnBossGuildIcon.y=875,t._btnBossGuildIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onShowBossGuildCall,t)),GameContent.gameLayers.mainUILayer.addChild(t._btnBossGuildIcon)):t.removeBossGuildIcon()},n.onShowFightResult=function(e){this._arrTips||(this._arrTips=[]),this._arrTips.push(e.data),this._fightResultTips||this.showItemTips()},n.showItemTips=function(){var e=this;this._fightResultTips||(this._fightResultTips=new FightResultTips,this._fightResultTips.x=GameContent.stageWidth/2-257,this._fightResultTips.y=260,GameContent.gameLayers.tipsLayer.addChild(this._fightResultTips)),this._fightResultTips.setData(this._arrTips.shift()),clearTimeout(this._timeIndex),this._timeIndex=setTimeout2(function(){e._arrTips.length>0?e.showItemTips():e._fightResultTips&&(e._fightResultTips.dispose(),e._fightResultTips=null)},1e3)},n.request20500=function(e){this.sendSocketData(20500)},n.request20510=function(e){var t=new CCMD20510;t.template_id=e.data,this.sendSocketData(20510,t),this._bossView&&(this._bossView.isPop=!1)},n.request20520=function(e){this.sendSocketData(20520)},n.request20600=function(){this.sendSocketData(20600)},n.request20610=function(e){var t=new CCMD20610;t.template_id=e.data,this.sendSocketData(20610,t),this._bossView&&(this._bossView.isPop=!1)},n.request20700=function(){FunctionOpenModel.getInstance().check(FunctionOpenModel.MEETBOSS,!1)&&this.sendSocketData(20700)},n.request20710=function(e){var t=new CCMD20710;t.template_id=e.data,this.sendSocketData(20710,t),this._bossView&&(this._bossView.isPop=!1)},n.request20720=function(){this.sendSocketData(20720)},n.response20500=function(e){BossModel.getInstance().bossHomeCD=e,this.dispatchEvent(new ParamEvent(BossEvtName.CMD20500_UPDATE,e))},n.response20501=function(e){BossModel.getInstance().setBossHomeData(e.boss_homes),this.dispatchEvent(new ParamEvent(BossEvtName.CMD20501_UPDATE,e.boss_homes))},n.response20510=function(e){1==e.is_win?SceneModel.getInstance().showResult(e.is_win,e.drop_list):2==e.is_win?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"BOSS之家",content:"\n时间已到，BOSS逃跑了，请等下次刷出"})):GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"BOSS之家",content:"\nBOSS被抢走了"}))},n.resposne20511=function(e){if(SceneModel.getInstance().isBossHome()){this.dispatchEvent(new ParamEvent(EventName.SHOW_BOSSBLOOD_VIEW));var t=this._model.changeNoHitListBossDamageVo(e.boss_id,e.hp,e.max_hp);this._model.setBossDamageInfo(t)}},n.response20600=function(e){BossModel.getInstance().setBossEliteData(e.boss_elites),this.dispatchEvent(new ParamEvent(BossEvtName.CMD20600_UPDATE,e.boss_elites))},n.response20610=function(e){1==e.is_win?SceneModel.getInstance().showResult(e.is_win,e.drop_list):2==e.is_win?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"精英BOSS",content:"\n时间已到，BOSS逃跑了，请等下次刷出"})):GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"精英BOSS",content:"\nBOSS被抢走了"}))},n.response20611=function(e){if(SceneModel.getInstance().isEliteBoss()){this.dispatchEvent(new ParamEvent(EventName.SHOW_BOSSBLOOD_VIEW));var t=this._model.changeNoHitListBossDamageVo(e.boss_id,e.hp,e.max_hp);this._model.setBossDamageInfo(t)}},n.response20700=function(e){this.dispatchEvent(new ParamEvent(BossEvtName.CMD20700_UPDATE,e.last_time))},n.response20701=function(e){BossModel.getInstance().setBossFieldData(e.boss_fields),this.dispatchEvent(new ParamEvent(BossEvtName.CMD20701_UPDATE,e.boss_fields))},n.response20710=function(e){1==e.is_win?SceneModel.getInstance().showResult(e.is_win,e.drop_list):2==e.is_win?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"野外BOSS",content:"\n时间已到，BOSS逃跑了，请等下次刷出"})):GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"野外BOSS",content:"\nBOSS被抢走了"}))},n.response20711=function(e){if(SceneModel.getInstance().isWildBoss()){this.dispatchEvent(new ParamEvent(EventName.SHOW_BOSSBLOOD_VIEW));var t=this._model.changeNoHitListBossDamageVo(e.boss_id,e.hp,e.max_hp);this._model.setBossDamageInfo(t)}},n.request20730=function(e){this.sendSocketData(20730)},n.request20530=function(e){this.sendSocketData(20530)},n.openRoundBossHandler=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.OPEN_BOSS_WINDOW,7))},n.sceneChange=function(e){var t=this;SceneModel.getInstance().isGuildBoss()?(t._btnBossGuildCall||(t._btnBossGuildCall=new CustomButton,t._btnBossGuildCall.skinName="CustomButtomSkin5Skin",t._btnBossGuildCall.label="一键召请",t._btnBossGuildCall.x=20,t._btnBossGuildCall.y=875,t._btnBossGuildCall.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBossGuildCallClick,this)),t._btnBossGuildCall.enabled=!1,GameContent.gameLayers.topLayer.addChild(t._btnBossGuildCall),t._txtBossGuildTime||(t._txtBossGuildTime=new CustomLabel,t._txtBossGuildTime.textColor=3026478,t._txtBossGuildTime.size=18,t._txtBossGuildTime.x=55,t._txtBossGuildTime.y=850),GameContent.gameLayers.topLayer.addChild(t._txtBossGuildTime),t.request19431(),t.removeBossGuildIcon()):(t._btnBossGuildCall&&t._btnBossGuildCall.parent&&(t._btnBossGuildCall.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onBossGuildCallClick,this),t._btnBossGuildCall.parent.removeChild(t._btnBossGuildCall),t._btnBossGuildCall=null),t._txtBossGuildTime&&t._txtBossGuildTime.parent&&(t._txtBossGuildTime.parent.removeChild(t._txtBossGuildTime),t._txtBossGuildTime=null))},n.onBossGuildCallClick=function(){var e=this;e._btnBossGuildCall.enabled=!1,e.request19430()},n.onShowBossGuildCall=function(){var e=this;null==e._bossGuildCallView&&(e._bossGuildCallView=new BossGuildCallWindow,e._bossGuildCallView.addEventListener(EventName.WINDOW_DISPOSE,e.disposeBossGuildView,e)),e._bossGuildCallView.isPop=!0,e._bossGuildCallView&&e._bossGuildCallView.isPop&&(e._bossGuildCallView.setData(BossModel.getInstance().BossGuildCallArr.shift()),e.removeBossGuildIcon())},n.removeBossGuildIcon=function(){var e=this;e._btnBossGuildIcon&&(e._btnBossGuildIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onShowBossGuildCall,e),e._btnBossGuildIcon.dispose(),e._btnBossGuildIcon=null)},n.disposeBossGuildView=function(e){var t=this;t._bossGuildCallView&&(t._bossGuildCallView.removeEventListener(EventName.WINDOW_DISPOSE,t.disposeBossGuildView,t),t._bossGuildCallView.dispose(),t._bossGuildCallView=null)},t}(BaseContol);egret.registerClass(BossControl,"BossControl");var BuildControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addEventHandler=function(){this.addEventListener(EventName.MAINUI_CLICK_BUILD,this.openView,this),this.addEventListener(BuildEvtName.BUILD_CCMD11800,this.CCMD11800Request,this),this.addEventListener(BuildEvtName.BUILD_CCMD11801,this.CCMD11801Request,this),this.addEventListener(BuildEvtName.BUILD_CCMD11810,this.CCMD11810Request,this),this.addEventListener(BuildEvtName.BUILD_CCMD11811,this.CCMD11811Request,this),this.addEventListener(BuildEvtName.BUILD_CCMD11820,this.CCMD11820Request,this),this.addEventListener(BuildEvtName.BUILD_CCMD11821,this.CCMD11821Request,this),this.addEventListener(BuildEvtName.BUILD_CCMD11830,this.CCMD11830Request,this),this.addEventListener(BuildEvtName.BUILD_CCMD11831,this.CCMD11831Request,this),this.addEventListener(BuildEvtName.BUILD_CCMD21900,this.CCMD21900Request,this),this.addEventListener(BuildEvtName.BUILD_CCMD21901,this.CCMD21901Request,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.showRedDots,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.showRedDots,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(11800,function(t){e.SCMD11800Response(t)},this),this.addCmdListener(11810,function(t){e.SCMD11810Response(t)},this),this.addCmdListener(11820,function(t){e.SCMD11820Response(t)},this),this.addCmdListener(11830,function(t){e.SCMD11830Response(t)},this),this.addCmdListener(21900,function(t){e.SCMD21900Response(t)},this)},n.CCMD11800Request=function(e){var t=new CCMD11800;t.partner_id=e.data.id,this.sendSocketData(11800,t)},n.CCMD11801Request=function(e){var t=new CCMD11801;t.partner_id=e.data,this.sendSocketData(11801,t)},n.CCMD11810Request=function(e){var t=new CCMD11810;t.partner_id=e.data.id,this.sendSocketData(11810,t)},n.CCMD11811Request=function(e){var t=new CCMD11811;t.partner_id=e.data,this.sendSocketData(11811,t)},n.CCMD11820Request=function(e){var t=new CCMD11820;t.partner_id=e.data.id,this.sendSocketData(11820,t)},n.CCMD11830Request=function(e){var t=new CCMD11830;t.partner_id=e.data.id,this.sendSocketData(11830,t)},n.CCMD11831Request=function(e){var t=new CCMD11831;t.partner_id=e.data,this.sendSocketData(11831,t)},n.CCMD11821Request=function(e){var t=new CCMD11821;t.partner_id=e.data,this.sendSocketData(11821,t)},n.CCMD21900Request=function(e){var t=new CCMD21900;t.partner_id=e.data.id,this.sendSocketData(21900,t)},n.CCMD21901Request=function(e){var t=new CCMD21901;t.partner_id=e.data.id,t.slot=e.data.type,this.sendSocketData(21901,t)},n.SCMD21900Response=function(e){BuildModel.getInstance().setStarData(e.forge_list,e.partner_id),this.dispatchEvent(new ParamEvent(BuildEvtName.BUILD_CCMD21900_UPDATE,e))},n.SCMD11800Response=function(e){BuildModel.getInstance().setStrengData(e.forge_list,e.partner_id),this.dispatchEvent(new ParamEvent(BuildEvtName.BUILD_CCMD11800_UPDATE,e))},n.SCMD11810Response=function(e){BuildModel.getInstance().setStoneData(e.forge_list,e.partner_id),this.dispatchEvent(new ParamEvent(BuildEvtName.BUILD_CCMD11810_UPDATE,e))},n.SCMD11820Response=function(e){BuildModel.getInstance().setSoulData(e.forge_list,e.partner_id),this.dispatchEvent(new ParamEvent(BuildEvtName.BUILD_CCMD11820_UPDATE,e))},n.SCMD11830Response=function(e){BuildModel.getInstance().setRuneData(e.forge_list,e.partner_id),this.dispatchEvent(new ParamEvent(BuildEvtName.BUILD_CCMD11830_UPDATE,e))},n.openView=function(e){if(null==this._buildView&&(this._buildView=new BuildWindow,this._buildView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._buildView.isPop=!this._buildView.isPop,this._buildView&&this._buildView.isPop){var t=0;e.data&&(t=Number(e.data)),this._buildView.setSelectIndex(t)}},n.disposeView=function(e){this._buildView&&(this._buildView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._buildView.dispose(),this._buildView=null)},n.showRedDots=function(){this.dispatchEvent(new ParamEvent(EventName.RED_DOTS,{type:"build",flag:BuildModel.getInstance().isUpgrade}))},t}(BaseContol);egret.registerClass(BuildControl,"BuildControl");var ChargeControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){var e=this;this.addCmdListener(15800,function(t){e.SCMD15800Response(t)},this)},n.addEventHandler=function(){this.addEventListener(EventName.CHARGE_OPEN,this.onOpenWindowHandler,this),this.addEventListener(EventName.REQUEST_CHARGET_DOUBLE,this.CCMD15800Request,this)},n.CCMD15800Request=function(e){this.sendSocketData(15800)},n.SCMD15800Response=function(e){ChargeModel.getInstance().setServerData(e)},n.onOpenWindowHandler=function(e){0!=FirstChargeModel.getInstance().firstChargeFiveReward||ChargeModel.getInstance().isShowTest?(this._chargeView||(this._chargeView=new ChargeView,this._chargeView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeChargeWindow,this)),this._chargeView.isPop=!0):this.dispatchEvent(new ParamEvent(FirstChargeEvtName.OPEN_FIRST_CHARGE_FIVE_WINDOW))},n.disposeChargeWindow=function(e){this._chargeView&&(this._chargeView.dispose(),this._chargeView=null)},t}(BaseContol);egret.registerClass(ChargeControl,"ChargeControl");var ChatControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){var i=this;e.prototype.onGameStart.call(this,t),setTimeout2(function(){i.sendSocketData(11610)},2e3*Math.random()),setTimeout2(function(){i.sendSocketData(11611)},2e3*Math.random()),setTimeout2(function(){i.sendSocketData(11612)},2e3*Math.random())},n.addEventHandler=function(){this.addEventListener(EventName.MAINUI_CLICK_CHAT,this.openView,this),this.addEventListener(ChatEvtName.CHAT_SHOW_LABA,this.openLabaView,this),this.addEventListener(ChatEvtName.CHAT_CCMD11600,this.CCMD11600Request,this),this.addEventListener(ChatEvtName.CHAT_CCMD11601,this.CCMD11601Request,this),this.addEventListener(ChatEvtName.CHAT_CCMD11602,this.CCMD11602Request,this),this.addEventListener(ChatEvtName.CHAT_CCMD11620,this.CCMD11620Request,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(11602,function(t){e.SCMD11602Response(t)},this),this.addCmdListener(11610,function(t){e.SCMD11610Response(t)},this),this.addCmdListener(11611,function(t){e.SCMD11611Response(t)},this),this.addCmdListener(11612,function(t){e.SCMD11612Response(t)},this),this.addCmdListener(11620,function(t){e.SCMD11620Response(t)},this)},n.CCMD11600Request=function(e){var t=new CCMD11600;t.content=e.data,this.sendSocketData(11600,t)},n.CCMD11601Request=function(e){var t=new CCMD11601;t.content=e.data,this.sendSocketData(11601,t)},n.CCMD11602Request=function(e){var t=new CCMD11602;t.tar_role_id=e.data.id,t.content=e.data.content,this.sendSocketData(11602,t)},n.CCMD11620Request=function(e){var t=new CCMD11620;t.content=e.data,this.sendSocketData(11620,t)},n.SCMD11602Response=function(e){ChatModel.getInstance().updatePrivateData(e),this.dispatchEvent(new ParamEvent(ChatEvtName.CHAT_SCMD11602_UPDATE,e))},n.SCMD11610Response=function(e){if(ChatModel.getInstance().setWorldData(e.chatworld_list),this.dispatchEvent(new ParamEvent(ChatEvtName.CHAT_SCMD11600_UPDATE,e.chatworld_list)),1==e.chatworld_list.length){var t=e.chatworld_list[0].name+"："+e.chatworld_list[0].content;this.dispatchEvent(new ParamEvent(ChatEvtName.CHAT_SHOW_TOP,t))}},n.SCMD11611Response=function(e){ChatModel.getInstance().setSystemData(e.chatsvr_list),this.dispatchEvent(new ParamEvent(ChatEvtName.CHAT_SCMD11603_UPDATE,e.chatsvr_list))},n.SCMD11612Response=function(e){if(ChatModel.getInstance().setGuildData(e.chatguild_list),this.dispatchEvent(new ParamEvent(ChatEvtName.CHAT_SCMD11601_UPDATE,e.chatguild_list)),1==e.chatguild_list.length){var t=e.chatguild_list[0].name+"："+e.chatguild_list[0].content;this.dispatchEvent(new ParamEvent(ChatEvtName.CHAT_SHOW_TOP,t))}},n.SCMD11620Response=function(e){var t=new PicLoader;t.load("resource/assets/icon/chat/chat_roleOnline_"+e.type+".png"),t.y=330,GameContent.gameLayers.mainUILayer.addChild(t);var i=new CustomTextField;i.size=22,i.width=160,i.textColor=16765440,i.textAlign="center",i.text=e.role_name,i.x=2==e.type?280:260,i.y=2==e.type?465:418,GameContent.gameLayers.mainUILayer.addChild(i),setTimeout2(function(){t.dispose(),t=null,i.parent.removeChild(i),i=null},3e3)},n.openView=function(){this._chatView||(this._chatView=new ChatWindow,this._chatView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._chatView&&(this._chatView.isPop=!this._chatView.isPop,this._chatView&&this._chatView.isPop&&this._chatView.setIndex())},n.disposeView=function(e){this._chatView&&(this._chatView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._chatView.dispose(),this._chatView=null)},n.openLabaView=function(){this._laba||(this._laba=new ChatLabaWindow,this._laba.addEventListener(EventName.WINDOW_DISPOSE,this.disposeLabaView,this)),this._laba.isPop2=!0},n.disposeLabaView=function(e){this._laba&&(this._laba.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeLabaView,this),this._laba.dispose(),this._laba=null)},t}(BaseContol);egret.registerClass(ChatControl,"ChatControl");var CheckPointBossControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){},n.addEventHandler=function(){var e=this;this.addEventListener(CheckPointBossEvtName.CHECKPOINTBOSS_OPEN_WINDOW,this.onOpenWindowHandler,this),this.addEventListener(CheckPointBossEvtName.NOVICECG_OPEN_WINDOW,this.onOpenNoviceCgWindowHandler,this),this.addEventListener(CheckPointBossEvtName.NOVICECG_CLOSE_WINDOW,this.onCloseNoviceCgWindowHandler,this),this.addEventListener(CheckPointBossEvtName.NOVICECG_TASK_GIFT_OPEN_WINDOW,this.onOpenNoviceTaskGiftWindowHandler,this),this.addEventListener(CheckPointBossEvtName.LEVELUP_ALERT_OPEN_WINDOW,this.onOpenLevelupAlertWindowHandler,this),this.addEventListener(TaskEvtName.TASK_COMPLETE,this.onTaskCompleteHandler,this),this.addEventListener(EventName.OPEN_NOVICE_OTHER_VIEW,this.showNoviceOtherView,this),this.addEventListener(EventName.CLOSE_NOVICE_OTHER_VIEW,this.closeNoviceOtherView,this),this.addEventListener(CheckPointBossEvtName.CCMD10605,function(t){e.CCMD10605Request(t)},this),this.addEventListener(CheckPointBossEvtName.CCMD20400,function(t){e.CCMD20400Request(t)},this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_UP,this.onLevelupHandler,this)},n.CCMD10605Request=function(e){new CCMD10605;this.sendSocketData(10605)},n.CCMD20400Request=function(e){this.sendSocketData(20400)},n.onOpenWindowHandler=function(e){this._window||(this._window=new CheckPointBossWindow,this._window.addEventListener(EventName.WINDOW_DISPOSE,this.disposeCheckPointBossWindow,this)),this._window.isPop=!0},n.disposeCheckPointBossWindow=function(e){this._window&&(this._window.dispose(),this._window=null)},n.onOpenNoviceCgWindowHandler=function(e){this._noviceWindow||(this._noviceWindow=new NoviceCgWindow),null==this._noviceWindow.parent&&(GameContent.gameLayers.noticeLayer.addChild(this._noviceWindow),this._noviceWindow.x=GameContent.stageWidth-this._noviceWindow.width>>1,this._noviceWindow.y=GameContent.stageHeight-this._noviceWindow.height>>1),this._noviceWindow.onOpenHandler()},n.onCloseNoviceCgWindowHandler=function(){this._noviceWindow&&(this._noviceWindow.parent&&this._noviceWindow.parent.removeChild(this._noviceWindow),this._noviceWindow.onCloseHandler(),this._noviceWindow.dispose(),this._noviceWindow=null)},n.onOpenNoviceTaskGiftWindowHandler=function(e){(ConfigManager.isTencent()||ConfigManager.isGuoZi()||ConfigManager.isGuoZiZF())&&(this._noviceTaskGiftWindow||(this._noviceTaskGiftWindow=new NoviceTaskGiftWindow,this._noviceTaskGiftWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeNoviceTaskGiftWindow,this)),this._noviceTaskGiftWindow.isPop=!0)},n.disposeNoviceTaskGiftWindow=function(e){this._noviceTaskGiftWindow&&(this._noviceTaskGiftWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeNoviceTaskGiftWindow,this),this._noviceTaskGiftWindow.dispose(),this._noviceTaskGiftWindow=null)},n.onTaskCompleteHandler=function(e){var t=e.data,i=SingleModel.getInstance().getSingVO(SingleModel.KEY_20401);i&&t.template_id==Number(i.value)&&this.dispatchEvent(new ParamEvent(CheckPointBossEvtName.NOVICECG_TASK_GIFT_OPEN_WINDOW))},n.onOpenLevelupAlertWindowHandler=function(e){this._levelupAlertView||(this._levelupAlertView=new LeveupAlertView,this._levelupAlertView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeLevelupAlertWindow,this)),this._levelupAlertView.isPop=!0},n.disposeLevelupAlertWindow=function(e){this._levelupAlertView&&(this._levelupAlertView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeLevelupAlertWindow,this),this._levelupAlertView.dispose(),this._levelupAlertView=null)},n.onLevelupHandler=function(){if(this.onOpenLevelupAlertWindowHandler(null),70==RoleModel.getInstance().getRoleCommon().level&&this.dispatchEvent(new ParamEvent(EventName.SHOW_WELCOME2,{type:2})),50==RoleModel.getInstance().getRoleCommon().level&&this.dispatchEvent(new ParamEvent(EventName.OPEN_NOVICE_OTHER_VIEW,{type:0})),35==RoleModel.getInstance().getRoleCommon().level){var e=TipsWordManager.getInstance().getTipsWord("btn_kaifu");e&&this.dispatchEvent(new ParamEvent(EventName.OPEN_NOVICE_OTHER_VIEW,{type:1}))}},n.showNoviceOtherView=function(e){var t=this;if(null==t._noviceOtherView){var i=new Point;if(0==e.data.type)i.x=MainUIModel.getInstance().guildRect.x-173,i.y=MainUIModel.getInstance().guildRect.y-35;else if(1==e.data.type){var n=TipsWordManager.getInstance().getTipsWord("btn_kaifu");n&&(i=n.parent.localToGlobal(n.x-92,n.y+62))}t._noviceOtherView=new NoviceOtherView(e.data.type,i.x,i.y)}},n.closeNoviceOtherView=function(e){var t=this;t._noviceOtherView&&(t._noviceOtherView.parent&&t._noviceOtherView.parent.removeChild(t._noviceOtherView),t._noviceOtherView.dispose(),t._noviceOtherView=null)},t}(BaseContol);egret.registerClass(CheckPointBossControl,"CheckPointBossControl");var ChenghaoControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){var e=this;this.addCmdListener(12300,function(t){e.SCMD12300Response(t)},this),this.addCmdListener(12301,function(t){e.SCMD12301Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(ChenghaoEvtName.CHENGHAO_OPEN_WINDOW,this.onOpenWindowHandler,this),this.addEventListener(ChenghaoEvtName.CHENGHAO_OPEN_GETVIEW,this.onOpenGetViewHandler,this),this.addEventListener(ChenghaoEvtName.CCMD12300,function(t){e.CCMD12300Request(t)},this),this.addEventListener(ChenghaoEvtName.CCMD12301,function(t){e.CCMD12301Request(t)},this),this.addEventListener(ChenghaoEvtName.CCMD12302,function(t){e.CCMD12302Request(t)},this)},n.CCMD12300Request=function(e){var t=new CCMD12300;this.sendSocketData(12300,t)},n.SCMD12300Response=function(e){ChenghaoModel.getInstance().setChenghaoServerData(e),RedDotsModel.getInstance().calMainFigureIconRedDot()},n.SCMD12301Response=function(e){ChenghaoModel.getInstance().deleteChenghao(e.title_id)},n.CCMD12301Request=function(e){var t=new CCMD12301;t.partner_id=e.data.id,t.title_id=e.data.titleId,this.sendSocketData(12301,t)},n.CCMD12302Request=function(e){var t=new CCMD12302;t.partner_id=e.data.id,t.title_id=e.data.titleId,this.sendSocketData(12302,t)},n.onOpenWindowHandler=function(e){this._chenghaoWindow||(this._chenghaoWindow=new ChenghaoWindow,this._chenghaoWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeChenghaoWindow,this)),this._chenghaoWindow.isPop=!0},n.disposeChenghaoWindow=function(e){this._chenghaoWindow&&(this._chenghaoWindow.dispose(),this._chenghaoWindow=null)
},n.onOpenGetViewHandler=function(e){this._chenghaoGetView||(this._chenghaoGetView=new ChenghaoGetView,this._chenghaoGetView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeChenghaoGetWindow,this)),this._chenghaoGetView.isPop2=!0,this._chenghaoGetView.tid=e.data.id},n.disposeChenghaoGetWindow=function(e){this._chenghaoGetView&&(this._chenghaoGetView.dispose(),this._chenghaoGetView=null)},t}(BaseContol);egret.registerClass(ChenghaoControl,"ChenghaoControl");var CityWarControl=function(e){function t(){e.call(this),this._currentCaiJiTime=0,this._caiJiMax=0,this._15502Si=0,this._randomRunSi=0,this._model=CityWarModel.getInstance(),this._sm=SceneModel.getInstance()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.addEventHandler=function(){e.prototype.addEventHandler.call(this),this.addEventListener(CityWarEvtName.SHOW_CITYWAR_VIEW,this.showView,this),this.addEventListener(CityWarEvtName.SHOW_REWARDCONFIG_VIEW,this.showRewardConfigView,this),this.addEventListener(CityWarEvtName.SHOW_CWASSIGNVIEW,this.showAssignView,this),this.addEventListener(CityWarEvtName.SHOW_DAILYREWARDVIEW,this.showDailyRewardView,this),this.addEventListener(CityWarEvtName.SHOW_HELP_VIEW,this.showHelpView,this),this.addEventListener(CityWarEvtName.REQUEST_15200,this.request15200Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15201,this.request15201Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15202,this.request15202Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15203,this.request15203Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15210,this.request15210Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15211,this.request15211Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15220,this.request15220Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15230,this.request15230Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15310,this.request15310Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15400,this.request15400Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15410,this.request15410Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15411,this.request15411Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15412,this.request15412Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15413,this.request15413Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15420,this.request15420Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15500,this.request15500Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15501,this.request15501Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15502,this.request15502Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15510,this.request15510Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15520,this.request15520Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15521,this.request15521Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15600,this.request15600Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15601,this.request15601Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15602,this.request15602Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15610,this.request15610Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15611,this.request15611Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15612,this.request15612Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15620,this.request15620Handler,this),this.addEventListener(CityWarEvtName.REQUEST_15630,this.request15630Handler,this),this.addEventListener(EventName.SCENE_CHANGE,this.sceneChangeHandler,this),this.addEventListener(SceneEvtName.ROLE_ENTER,this.roleEnterHandler,this),this.addEventListener(SceneEvtName.ROLE_EXIT,this.roleExitHandler,this)},n.addCmdHandler=function(){var t=this;e.prototype.addCmdHandler.call(this),this.addCmdListener(15200,function(e){t.SCMD15200Response(e)},this),this.addCmdListener(15201,function(e){t.SCMD15201Response(e)},this),this.addCmdListener(15202,function(e){t.SCMD15202Response(e)},this),this.addCmdListener(15210,function(e){t.SCMD15210Response(e)},this),this.addCmdListener(15230,function(e){t.SCMD15230Response(e)},this),this.addCmdListener(15231,function(e){t.SCMD15231Response(e)},this),this.addCmdListener(15240,function(e){t.SCMD15240Response(e)},this),this.addCmdListener(15300,function(e){t.SCMD15300Response(e)},this),this.addCmdListener(15310,function(e){t.SCMD15310Response(e)},this),this.addCmdListener(15311,function(e){t.SCMD15311Response(e)},this),this.addCmdListener(15312,function(e){t.SCMD15312Response(e)},this),this.addCmdListener(15400,function(e){t.SCMD15400Response(e)},this),this.addCmdListener(15410,function(e){t.SCMD15410Response(e)},this),this.addCmdListener(15412,function(e){t.SCMD15412Response(e)},this),this.addCmdListener(15413,function(e){t.SCMD15413Response(e)},this),this.addCmdListener(15414,function(e){t.SCMD15414Response(e)},this),this.addCmdListener(15430,function(e){t.SCMD15430Response(e)},this),this.addCmdListener(15500,function(e){t.SCMD15500Response(e)},this),this.addCmdListener(15502,function(e){t.SCMD15502Response(e)},this),this.addCmdListener(15503,function(e){t.SCMD15503Response(e)},this),this.addCmdListener(15504,function(e){t.SCMD15504Response(e)},this),this.addCmdListener(15510,function(e){t.SCMD15510Response(e)},this),this.addCmdListener(15600,function(e){t.SCMD15600Response(e)},this),this.addCmdListener(15601,function(e){t.SCMD15601Response(e)},this),this.addCmdListener(15602,function(e){t.SCMD15602Response(e)},this),this.addCmdListener(15610,function(e){t.SCMD15610Response(e)},this),this.addCmdListener(15612,function(e){t.SCMD15612Response(e)},this),this.addCmdListener(15613,function(e){t.SCMD15613Response(e)},this),this.addCmdListener(15614,function(e){t.SCMD15614Response(e)},this),this.addCmdListener(15620,function(e){t.SCMD15620Response(e)},this),this.addCmdListener(15415,function(e){t.SCMD15415Response(e)},this),this.addCmdListener(15511,function(e){t.SCMD15511Response(e)},this),this.addCmdListener(15621,function(e){t.SCMD15621Response(e)},this)},n.onGameStart=function(t){var i=this;e.prototype.onGameStart.call(this,t),setTimeout2(function(){i.checkAddIcon(),i.CCMD15240Request(),i.request15200()},2351)},n.sceneChangeHandler=function(e){var t=this._sm;if(t.isCityWar())if(this._cityWarView&&(this._cityWarView.isPop=!1),t.isCityWarInner()){this.addInnerView();var i=t.id;switch(this._cwInnerView.changeStatu(i),this.dispatchEvent(new ParamEvent(CityWarEvtName.REQUEST_15230)),this.dispatchEvent(new ParamEvent(EventName.SHOW_MAINUI_TOPBAR,{state:!0})),i){case SceneInfoVo.CITYWAR_INSIDE:this.dispatchEvent(new ParamEvent(CityWarEvtName.REQUEST_15410));break;case SceneInfoVo.CITYWAR_FRONTPALACE:this.dispatchEvent(new ParamEvent(CityWarEvtName.REQUEST_15500));break;case SceneInfoVo.CITYWAR_PALACE:this.dispatchEvent(new ParamEvent(CityWarEvtName.REQUEST_15600)),this.dispatchEvent(new ParamEvent(CityWarEvtName.REQUEST_15610))}this.dispatchEvent(new ParamEvent(EventName.RANDOM_RUN)),this._model.setFighting(!1)}else this.removeInnerView();else this.removeInnerView(),this.dispatchEvent(new ParamEvent(EventName.SHOW_MAINUI_TOPBAR,{state:!1}));this.removeCaiFlagEffect(),this.removeFlagProgress(),this._15502Si>0&&clearTimeout(this._15502Si)},n.checkAddIcon=function(){this._model.isOpen()&&this.dispatchEvent(new ParamEvent(CityWarEvtName.ADD_CITYWAR_ICON))},n.showView=function(e){return 0==RoleModel.getInstance().getRoleCommon().guild_id?void Message.show("请加入公会"):(null==this._cityWarView&&(this._cityWarView=new CityWarWindowView,this._cityWarView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeCityWarWindow,this)),void(e.data?this._cityWarView.isPop=e.data.isShow:this._cityWarView.isPop=!this._cityWarView.isPop))},n.disposeCityWarWindow=function(e){this._cityWarView&&(this._cityWarView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeCityWarWindow,this),this._cityWarView.dispose(),this._cityWarView=null)},n.showRewardConfigView=function(e){null==this._cwRewardView&&(this._cwRewardView=new CityWarRewardWindow,this._cwRewardView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeRewardConfigView,this)),this._cwRewardView.isPop=!this._cwRewardView.isPop},n.disposeRewardConfigView=function(e){this._cwRewardView&&(this._cwRewardView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeRewardConfigView,this),this._cwRewardView.dispose(),this._cwRewardView=null)},n.request15200Handler=function(e){this.request15200()},n.request15200=function(){var e=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.GUILD),t=RoleModel.getInstance().getRoleCommon().level;e&&t>=e.open_level&&this.sendSocketData(15200)},n.SCMD15200Response=function(e){this._model.setOccupyInfo(e)},n.request15201Handler=function(e){this.request15201()},n.request15201=function(){this.sendSocketData(15201)},n.SCMD15201Response=function(e){this._model.setGuildRankInfo(e)},n.request15202Handler=function(e){this.request15202()},n.request15202=function(){this.sendSocketData(15202)},n.SCMD15202Response=function(e){this._model.setPersonRankInfo(e)},n.request15203Handler=function(e){this.request15203(),this.dispatchEvent(new ParamEvent(CityWarEvtName.REQUEST_15200)),this._cwDailyRewardView&&(this._cwDailyRewardView.dispose(),this._cwDailyRewardView=null)},n.request15203=function(){this.sendSocketData(15203)},n.request15210Handler=function(e){this.request15210()},n.request15210=function(){this.sendSocketData(15210)},n.SCMD15210Response=function(e){this._model.setCityWarStorageInfo(e)},n.request15211Handler=function(e){this.request15211()},n.request15211=function(){var e=new CCMD15211;e.siege_depot_allots=this.create15211List(),this.sendSocketData(15211,e),this._model.clearAssignData(),this.dispatchEvent(new ParamEvent(CityWarEvtName.REQUEST_15210))},n.create15211List=function(){var e,t=new Array,i=this._model.getStorageAssignDic();for(e in i){var n=i[e],s=new NodeSiege_depot_allots;s.role_id=n.roleID,s.siege_depot=new Array;for(var a=0;a<n.goodsList.length;a++){var o=new NodeSiege_depot;o.cfg_id=n.goodsList[a].asset_id,o.num=n.goodsList[a].value,s.siege_depot.push(o)}t.push(s)}return t},n.showAssignView=function(e){null==this._cwAssignView&&(this._cwAssignView=new CWAssignWindow,this._cwAssignView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeAssignWindow,this));var t=e.data.vo,i=e.data.id;this._cwAssignView.isPop=!0,this._cwAssignView.setData(t,i)},n.disposeAssignWindow=function(e){this._cwAssignView&&(this._cwAssignView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeAssignWindow,this),this._cwAssignView.dispose(),this._cwAssignView=null)},n.request15220Handler=function(e){this.request15220()},n.request15220=function(){this.sendSocketData(15220)},n.request15230Handler=function(e){this.request15230()},n.request15230=function(){this.sendSocketData(15230)},n.SCMD15230Response=function(e){this._model.setCityWarPoint(e.int32)},n.SCMD15231Response=function(e){this._model.setInnerRankInfo(e)},n.CCMD15240Request=function(){var e=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.GUILD);e&&e.open_level<=RoleModel.getInstance().getRoleCommon().level&&this.sendSocketData(15240)},n.SCMD15240Response=function(e){1==e.flag?(this._model.isOpenCityWar=!0,this.dispatchEvent(new ParamEvent(CityWarEvtName.ADD_CITYWAR_ICON))):this._model.isOpenCityWar=!1},n.showDailyRewardView=function(e){null==this._cwDailyRewardView&&(this._cwDailyRewardView=new CWGetRewardWindow,this._cwDailyRewardView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeDailyRewardView,this)),this._cwDailyRewardView.isPop=!this._cwDailyRewardView.isPop},n.disposeDailyRewardView=function(e){this._cwDailyRewardView&&(this._cwDailyRewardView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeDailyRewardView,this),this._cwDailyRewardView.dispose(),this._cwDailyRewardView=null)},n.SCMD15300Response=function(e){this.dispatchEvent(new ParamEvent(EventName.SHOW_BOSSBLOOD_VIEW)),e.boss_round_hits=e.boss_round_hits.reverse();var t=BossModel.getInstance().changeCWOutToBossDamageVo(e);BossModel.getInstance().setBossDamageInfo(t)},n.request15310Handler=function(e){this.request15310()},n.request15310=function(){this.sendSocketData(15310)},n.SCMD15310Response=function(e){this.dispatchEvent(new ParamEvent(EventName.ROLLPOINT_RESULT,{point:e.num}))},n.SCMD15311Response=function(e){this.dispatchEvent(new ParamEvent(EventName.ROLLPOINT_MAX,{name:e.name,value:e.num}))},n.SCMD15312Response=function(e){this.dispatchEvent(new ParamEvent(EventName.SHOW_ROLLPOINT))},n.request15400Handler=function(e){this.request15400()},n.request15400=function(){this.sendSocketData(15400)},n.SCMD15400Response=function(e){1==e.flag&&(this._randomRunSi>0&&clearTimeout(this._randomRunSi),this._model.fightType=AttackType.MONSTER,this._model.fightID=e.mon_id,this._model.setFighting(!0),this.dispatchEvent(new ParamEvent(EventName.SET_ROLES_FIGHT,{id:e.mon_id,type:AttackType.MONSTER})))},n.request15410Handler=function(e){this.request15410()},n.request15410=function(){this.sendSocketData(15410)},n.SCMD15410Response=function(e){var t=this._model.convertAttackPlayerList(e.att_roles);this._model.setCanAttackPlayerList(t)},n.request15411Handler=function(e){this.request15411()},n.request15411=function(){this.sendSocketData(15411)},n.request15412Handler=function(e){var t=e.data.id;this.request15412(t)},n.request15412=function(e){var t=new CCMD15412;t.role_id=e,this.sendSocketData(15412,t)},n.SCMD15412Response=function(e){if(1==e.flag){var t=PlayerBaseVO.makeUid(null,e.role_id);this.roleAttackPlayerInCityWar(t,!0)}},n.request15413Handler=function(e){this.request15413(e.data.type)},n.request15413=function(e){var t=new CCMD15413;t.type=e,this.sendSocketData(15413,t)},n.SCMD15413Response=function(e){1==e.flag&&(this.clearRoleAttackPlayerStatu(),this.dispatchEvent(new ParamEvent(EventName.SHOW_RELIVE_VIEW)))},n.SCMD15414Response=function(e){var t=PlayerBaseVO.makeUid(null,e.role_id);this.roleAttackPlayerInCityWar(t)},n.SCMD15430Response=function(e){this.clearRoleAttackPlayerStatu(),this.delayRandomRun()},n.request15420Handler=function(e){this.request15420()},n.request15420=function(){this.sendSocketData(15420)},n.addInnerView=function(){null==this._cwInnerView&&(this._cwInnerView=new CWInnerView),this._cwInnerView.onAdd()},n.removeInnerView=function(){this._cwInnerView&&this._cwInnerView.onRemove()},n.request15500Handler=function(e){this.request15500()},n.request15500=function(){this.sendSocketData(15500)},n.SCMD15500Response=function(e){var t=this._model.convertAttackPlayerList(e.att_roles);this._model.setCanAttackPlayerList(t)},n.request15501Handler=function(e){this.request15501()},n.request15501=function(){this.sendSocketData(15501)},n.request15502Handler=function(e){var t=e.data.id;this.request15502(t)},n.request15502=function(e){var t=new CCMD15502;t.role_id=e,this.sendSocketData(15502,t)},n.SCMD15502Response=function(e){if(1==e.flag){var t=PlayerBaseVO.makeUid(null,e.role_id);this.roleAttackPlayerInCityWar(t,!0)}},n.SCMD15503Response=function(e){var t=PlayerBaseVO.makeUid(null,e.role_id);this.roleAttackPlayerInCityWar(t)},n.SCMD15504Response=function(e){this.clearRoleAttackPlayerStatu(),this.delayRandomRun()},n.SCMD15510Response=function(e){1==e.flag&&(this.clearRoleAttackPlayerStatu(),this.dispatchEvent(new ParamEvent(EventName.SHOW_RELIVE_VIEW)))},n.request15510Handler=function(e){this.request15510(e.data.type)},n.request15510=function(e){var t=new CCMD15510;t.type=e,this.sendSocketData(15510,t)},n.request15520Handler=function(e){this.request15520()},n.request15520=function(){this.sendSocketData(15520)},n.request15521Handler=function(e){this.request15521()},n.request15521=function(){this.sendSocketData(15521)},n.request15600Handler=function(e){this.reqeust15600()},n.reqeust15600=function(){this.sendSocketData(15600)},n.SCMD15600Response=function(e){if(this._model.setFlagStatu(e),e.role_id==RoleModel.getInstance().getRoleCommon().role_id)if(0==e.last_time)this.removeCaiFlagEffect(),this.removeFlagProgress();else{var t=SingleModel.getInstance().getSingVO(SingleModel.KEY_15206);if(t){var i=parseInt(t.value);this._caiJiMax=i,this._currentCaiJiTime=i-e.last_time,this.setCaiJiProgress(this._currentCaiJiTime,i)}}e.role_id!=RoleModel.getInstance().getRoleCommon().role_id&&(this.removeCaiFlagEffect(),this.removeFlagProgress()),this._model.removeRoleFromAttackPlayerList(e.role_id)},n.request15601Handler=function(e){this.reqeust15601()},n.reqeust15601=function(){this.sendSocketData(15601)},n.SCMD15601Response=function(e){1==e.flag&&(this._randomRunSi>0&&clearTimeout(this._randomRunSi),this._model.isCaiQi=!0,this.dispatchEvent(new ParamEvent(EventName.SET_ROLES_FIGHT,{id:e.id,type:AttackType.MONSTER})))},n.request15602Handler=function(e){this.reqeust15602()},n.reqeust15602=function(){this.sendSocketData(15602)},n.SCMD15602Response=function(e){1==e.flag&&(this._randomRunSi>0&&clearTimeout(this._randomRunSi),this.addCaiFlagEffect(),this._model.isCaiQi=!0,this.dispatchEvent(new ParamEvent(CityWarEvtName.ROLES_GOTO_FLAG,{id:RoleModel.getInstance().getRoleCommon().role_id})))},n.addCaiFlagEffect=function(){if(null==this._caiFlagEffect){var e=UrlUtil.getCommonEffectURL("caiji");this._caiFlagEffect=EffectManager.getInstance().showEffect(e,350,290,GameContent.gameLayers.topLayer,70,!0)}},n.removeCaiFlagEffect=function(){this._caiFlagEffect&&(this._caiFlagEffect.dispose(),this._caiFlagEffect=null)},n.request15610Handler=function(e){this.reqeust15610()},n.reqeust15610=function(){this.sendSocketData(15610)},n.SCMD15610Response=function(e){var t=this._model.convertAttackPlayerList(e.att_roles);this._model.setCanAttackPlayerList(t)},n.request15611Handler=function(e){this.reqeust15611()},n.reqeust15611=function(){this.sendSocketData(15611)},n.request15612Handler=function(e){var t=e.data.id;this.reqeust15612(t)},n.reqeust15612=function(e){var t=new CCMD15612;t.role_id=e,this.sendSocketData(15612,t)},n.SCMD15612Response=function(e){if(1==e.flag){var t=PlayerBaseVO.makeUid(null,e.role_id);this.roleAttackPlayerInCityWar(t,!0)}},n.SCMD15613Response=function(e){var t=PlayerBaseVO.makeUid(null,e.role_id);this.roleAttackPlayerInCityWar(t)},n.SCMD15614Response=function(e){this.clearRoleAttackPlayerStatu()},n.delayRandomRun=function(){var e=this;this._randomRunSi>0&&clearTimeout(this._randomRunSi),this._randomRunSi=setTimeout2(function(){e.dispatchEvent(new ParamEvent(EventName.RANDOM_RUN))},1200)},n.request15620Handler=function(e){this.reqeust15620(e.data.type)},n.reqeust15620=function(e){var t=new CCMD15620;t.type=e,this.sendSocketData(15620,t)},n.SCMD15620Response=function(e){1==e.flag&&(this.clearRoleAttackPlayerStatu(),this.dispatchEvent(new ParamEvent(EventName.SHOW_RELIVE_VIEW)),this.removeCaiFlagEffect())},n.request15630Handler=function(e){this.reqeust15630()},n.reqeust15630=function(){this.sendSocketData(15630)},n.roleAttackPlayerInCityWar=function(e,t){void 0===t&&(t=!1),this._randomRunSi>0&&clearTimeout(this._randomRunSi);var i=this._sm.getRandomPosNearPoint(this._sm.getRolePos(),180);this._sm.isCityWarFrontPalace()||this._sm.isCityWarPalace()?this.addPartnersOfRoom(e,i):(i=this._sm.changeToTilePoint(i),this._sm.hasPlayerInScene(e)?this.dispatchEvent(new ParamEvent(CityWarEvtName.SET_ENERMY_POS,{id:e,pos:i})):this.addPartnersToScene(e,i,!0)),(!this._model.isFighting||t)&&(this._model.fightType=AttackType.PARTNER,this._model.fightID=e,this._model.isFighting||this.dispatchEvent(new ParamEvent(EventName.SET_ROLES_FIGHT,{id:e,type:AttackType.PARTNER})),this._model.setFighting(!0))},n.addPartnersToScene=function(e,t,i){void 0===i&&(i=!1),this._sm.addPartnersToScene(e,t,i)},n.addPartnersOfRoom=function(e,t){var i=this._model.findRoomVoByPlayerID(e);if(null==i)return t=this._sm.changeToTilePoint(t),void this.addPartnersToScene(e,t,!0);for(var n=i.fightList,s=0;s<n.length;s++){var a=n[s],o=null;o=a==e?t:this._sm.getRandomPosNearPoint(t,240),o=this._sm.changeToTilePoint(o),this.addPartnersToScene(a,o,a==e)}},n.clearRoleAttackPlayerStatu=function(){this._model.fightID=0,this._model.fightType=0,this._model.setFighting(!1),this._model.isCaiQi=!1},n.roleEnterHandler=function(e){this._sm.isCityWarInner()&&this.addCanAttackPlayer()},n.addCanAttackPlayer=function(){for(var e=this._model.attackPlayerList,t=this._sm.roleList,i=0;i<t.length&&e.length<3;i++){var n=t[i];if(n.guild_id>0&&n.guild_id!=RoleModel.getInstance().getRoleCommon().guild_id){if(this._model.checkRoleInAttackPlayerList(n.role_id))continue;var s=new CityWarFightVo;s.changeFromScmd(n),e.push(s)}}this._model.setCanAttackPlayerList(e)},n.roleExitHandler=function(e){if(this._sm.isCityWarInner()){for(var t=e.data.vo,i=0;i<t.role_ids.length;i++){var n=t.role_ids[i];this._model.removeRoleFromAttackPlayerList(n.role_id)}this.addCanAttackPlayer()}},n.showHelpView=function(e){null==this._cwHelpView&&(this._cwHelpView=new CityWarHelpWindow,this._cwHelpView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeCWHelpView,this)),this._cwHelpView.isPop=!this._cwHelpView.isPop},n.disposeCWHelpView=function(e){this._cwHelpView&&(this._cwHelpView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeCWHelpView,this),this._cwHelpView.dispose(),this._cwHelpView=null)},n.setCaiJiProgress=function(e,t){var i=this;null==i._flagProgress&&(i._flagProgress=new CustomProgressBar,i._flagProgress.skinName="CustomProgressBarSkin",i._flagProgress.maximum=this._caiJiMax,i._flagProgress.minimum=this._currentCaiJiTime,i._flagProgress.y=230,i._flagProgress.x=GameContent.stageWidth-450>>1),i._flagProgress.parent||GameContent.gameLayers.topLayer.addChild(i._flagProgress),i._flagProgress.value=e,t>e&&(TimerManager.getInstance().remove(1e3,this.caiJiStep,this),TimerManager.getInstance().add(1e3,this.caiJiStep,this))},n.caiJiStep=function(){this._currentCaiJiTime++,this._flagProgress.value=this._currentCaiJiTime,this._currentCaiJiTime==this._caiJiMax&&this.removeFlagProgress()},n.removeFlagProgress=function(){this._flagProgress&&this._flagProgress.parent&&this._flagProgress.parent.removeChild(this._flagProgress),TimerManager.getInstance().remove(1e3,this.caiJiStep,this)},n.SCMD15415Response=function(e){this.reliveHandler(e.flag,e.last_cd)},n.SCMD15511Response=function(e){this.reliveHandler(e.flag,e.last_cd)},n.SCMD15621Response=function(e){this.reliveHandler(e.flag,e.last_cd)},n.reliveHandler=function(e,t){1==e?(ReliveModel.getInstance().setReliveLeftTimeByServer(t),this.dispatchEvent(new ParamEvent(EventName.SHOW_RELIVE_VIEW))):ReliveModel.getInstance().setReliveLeftTimeByServer(0)},t}(BaseContol);egret.registerClass(CityWarControl,"CityWarControl");var CreateControl=function(e){function t(){e.call(this),this._connectTimes=0,this._isSocketIOError=!1,this.login_roleId=0,this._socketSi=0,this.ccmd10002=new CCMD10002,this.initCreate()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.initCreate=function(){this.registerEventHandler(),this.startSocket()},t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t);var i=RoleModel.getInstance().getRoleBaseInfo();i&&i.getLev()<=1&&(NoviceGuideManager.getInstance().setIsNovice(!0),this._welcomeView||(this._welcomeView=new WelcomeView,this._welcomeView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),GameContent.gameLayers.windowLayer.addChild(this._welcomeView))},n.disposeView=function(e){this._welcomeView&&(this._welcomeView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._welcomeView.dispose(),this._welcomeView=null)},n.registerEventHandler=function(){this._socket.addEventListener(CustomSocket.CONNECT,this.socketConnectHandler,this),this._socket.addEventListener(CustomSocket.ERROR,this.socketCloseHandler,this),this.addEventListener(EventName.CREATE_ROLE_ENTER,this.createRoleEnter,this),this.addEventListener(EventName.RECONNECT,this.reconnectHandler,this),this.addEventListener(EventName.SHOW_CREATEROLE,this.showCreateRoleHandler,this),this.addEventListener(EventName.GAMERESOURCE_LOADEND,this.loadGameResourceEndHandler,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(1e4,function(t){e.SCMD10000Response(t)},this),this.addCmdListener(10002,function(t){e.SCMD10002Response(t)},this),this.addCmdListener(10003,function(t){e.SCMD10003Response(t)},this)},n.socketConnectHandler=function(){this._socketSi>0&&clearTimeout(this._socketSi),this._connectTimes=0,this._isSocketIOError=!1,trace("socketConnectHandler _isSocketIOError = ",this._isSocketIOError),this.login(),this.dispatchEvent(new ParamEvent(EventName.REMOVE_RECONNECTING))},n.reconnectHandler=function(e){e=null,trace(StringUtil.substitute("----------- reconnectHandler time={0}",TimeUtil.formatTime((new Date).getTime()))),this._socket.isClosed&&!this._isSocketIOError&&this.startSocket()},n.socketCloseHandler=function(e){var t=e.data.code;switch(t){case 1:trace("----------- _isSocketIOError = ",this._isSocketIOError),GameStateManager.getInstance().state=GameStateManager.SOCKET_CLOSE,GameStateManager.getInstance().isServerNormal()&&!this._isSocketIOError&&(this.dispatchEvent(new ParamEvent(EventName.RECONNECT)),this.dispatchEvent(new ParamEvent(EventName.SHOW_RECONNECTING)));break;case 2:this._isSocketIOError=!0,trace("2222 _isSocketIOError = ",this._isSocketIOError),Alert.show("您已经断开连接，请刷新游戏",0,function(){Tools.GameRefresh()})}},n.SCMD10000Response=function(e){e.role_id>0?(LoginModel.getInstance().isNeedCreateRole=!1,SceneModel.getInstance().isFirstScene?(this.login_roleId=e.role_id,this.dispatchEvent(new ParamEvent(Main.LOAD_GAMERESOURCE)),QQManager.getInstance().QQLogin()):this.send10003(e.role_id)):(LoginModel.getInstance().isNeedCreateRole=!0,this.dispatchEvent(new ParamEvent(Main.LOAD_CREATEROLE_RESOURCE)))},n.startSocket=function(){var e=this;return this._connectTimes>5?void Alert.show("您已经断开连接，请刷新游戏",0,function(){Tools.GameRefresh()}):(this._connectTimes++,this._socket.start(ConfigManager.plat_ip,ConfigManager.plat_port),this._socketSi>0&&clearTimeout(this._socketSi),void(this._socketSi=setTimeout2(function(){e._socket.isClosed&&!e._isSocketIOError&&e.startSocket()},1e3)))},n.login=function(){var e=new CCMD10000;e.plat_id=ConfigManager.platform_id,e.unixtime=TimeUtil.getTimeNow(),e.plat_account=ConfigManager.plat_id,e.ticket=(new md5).hex_md5(e.plat_id.toString()+e.plat_account+e.unixtime.toString()+"TjRm8iclXyq5U9w"),e.channel="",e.via=ConfigManager.getVia(),e.svr_id=ConfigManager.server_id,this.sendSocketData(1e4,e)},n.createRoleEnter=function(e){return this.ccmd10002.svr_id=ConfigManager.server_id,this.ccmd10002.role_career=e.data.career,this.ccmd10002.role_sex=e.data.sex,this.ccmd10002.role_name=e.data.name,null==this.ccmd10002.role_name||0==this.ccmd10002.role_name.length?void Message.show("名字不能为空"):(this.ccmd10002.role_channel="",this.ccmd10002.role_via=ConfigManager.getVia(),void this.sendSocketData(10002,this.ccmd10002))},n.SCMD10002Response=function(e){e.role_id>0&&(this.scmd10002=e,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(Main.LOAD_GAMERESOURCE)),LoginModel.getInstance().isCreateRole=!0,LoginModel.getInstance().isCreateRoleThisTime=1)},n.loadGameResourceEndHandler=function(e){this.removeEventListener(EventName.GAMERESOURCE_LOADEND,this.loadGameResourceEndHandler,this),1==LoginModel.getInstance().isNeedCreateRole?(this.send10003(this.scmd10002.role_id),PhpHttpStatisticsManager.send(3),QQManager.getInstance().QQRegister()):this.send10003(this.login_roleId)},n.send10003=function(e){var t=new CCMD10003;t.role_id=e,t.unixtime=TimeUtil.getTimeNow(),t.tstamp=(new md5).hex_md5(t.unixtime.toString()+t.role_id.toString()+"7YnELt8MmA4jVED7"),this.sendSocketData(10003,t)},n.SCMD10003Response=function(e){this._createRole&&(this._createRole.dispose(),this._createRole=null,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CHANGEVISIBLE)))},n.showCreateRoleHandler=function(){this._createRole||(this._createRole=new CreateRole),GameContent.gameLayers.windowLayer.addChild(this._createRole),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(Main.REMOVE_LOADINGUI))},t}(BaseContol);egret.registerClass(CreateControl,"CreateControl");var DarkControl=function(e){function t(){e.call(this),this._bossDropSi=0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.addEventHandler=function(){this.addEventListener(DarkEvtName.OPEN_RANK_VIEW,this.openRankView,this),this.addEventListener(DarkEvtName.OPEN_LOG_VIEW,this.openLogView,this),this.addEventListener(DarkEvtName.OPEN_REWARD_VIEW,this.openRewardView,this),this.addEventListener(DarkEvtName.CCMD17100,this.CCMD17100Request,this),this.addEventListener(DarkEvtName.CCMD17100,this.CCMD17101Request,this),this.addEventListener(DarkEvtName.CCMD17110,this.CCMD17110Request,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(17100,function(t){e.SCMD17100Response(t)},this),this.addCmdListener(17101,function(t){e.SCMD17101Response(t)},this),this.addCmdListener(17110,function(t){e.SCMD17110Response(t)},this),this.addCmdListener(17111,function(t){e.SCMD17111Response(t)},this)},n.CCMD17100Request=function(){this.sendSocketData(17100)},n.CCMD17101Request=function(){this.sendSocketData(17101)},n.CCMD17110Request=function(e){var t=new CCMD17110;t.grid_id=e.data,this.sendSocketData(17110,t)},n.SCMD17100Response=function(e){DarkModel.getInstance().setData(e),this.dispatchEvent(new ParamEvent(DarkEvtName.CCMD17100_UPDATE,e))},n.SCMD17111Response=function(e){this.dispatchEvent(new ParamEvent(DarkEvtName.CCMD17111_UPDATE,e)),this.openTanView(e.grid_id)},n.SCMD17101Response=function(e){var t=e.dark_logs;t.sort(function(e,t){return e.ctime>t.ctime?-1:1}),this.dispatchEvent(new ParamEvent(DarkEvtName.CCMD17101_UPDATE,t))},n.openRankView=function(e){this._rank||(this._rank=new DarkRankWindow,this._rank.addEventListener(EventName.WINDOW_DISPOSE,this.disposeRankView,this)),this._rank.isPop2=!this._rank.isPop,this.dispatchEvent(new ParamEvent(RankEvtName.RANK_CCMD13500,RankModel.RANK_TYPE_13))},n.disposeRankView=function(e){this._rank&&(this._rank.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeRankView,this),this._rank.dispose(),this._rank=null)},n.openLogView=function(e){this._log||(this._log=new DarkLogWindow,this._log.addEventListener(EventName.WINDOW_DISPOSE,this.disposeLogView,this)),this._log.isPop2=!this._log.isPop,this.CCMD17101Request()},n.disposeLogView=function(e){this._log&&(this._log.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeLogView,this),this._log.dispose(),this._log=null)},n.openRewardView=function(e){this._reward||(this._reward=new DarkRewardWindow,this._reward.addEventListener(EventName.WINDOW_DISPOSE,this.disposeRewardView,this)),this._reward.isPop2=!this._reward.isPop},n.disposeRewardView=function(e){this._reward&&(this._reward.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeRewardView,this),this._reward.dispose(),this._reward=null)},n.openTanView=function(e){this._tan||(this._tan=new DarkTansuoWindow,this._tan.addEventListener(EventName.WINDOW_DISPOSE,this.disposeTanView,this)),this._tan.isPop2=!this._tan.isPop,this._tan.setData(e)},n.disposeTanView=function(e){this._tan&&(this._tan.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeTanView,this),this._tan.dispose(),this._tan=null)},n.SCMD17110Response=function(e){SceneModel.getInstance().showResult(e.flag,e.drop_list)},t}(BaseContol);egret.registerClass(DarkControl,"DarkControl");var DesktopControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.addEventHandler=function(){e.prototype.addEventHandler.call(this);var t=this;t.addEventListener(QQEvtName.REQEUST_20000,t.getKuaiJieReward,t),t.addEventListener(DailyEvtName.FIXED_DATA_CHANGE,t.fixedDataChange,t),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_UP,t.roleLvUp,t)},n.fixedDataChange=function(e){var t=FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE7);0==t&&this.addKuaiJieIcon()
},n.addKuaiJieIcon=function(){var e=this;null==e._kuaiJieIcon&&(e._kuaiJieIcon=TipsWordManager.getInstance().addWordIcon("btn_txzm"),e._kuaiJieIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,e.clickKuaiJie,e))},n.getKuaiJieReward=function(e){this.CCMD20000Request()},n.CCMD20000Request=function(){this.sendSocketData(2e4),this._kuaijieWindow&&(this._kuaijieWindow.isPop=!1),this._kuaiJieIcon&&(this._kuaiJieIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickKuaiJie,this),TipsWordManager.getInstance().removeIcon("btn_txzm"),this._kuaiJieIcon=null),RoleModel.getInstance().removeEventListener(RoleModel.ROLE_LV_UP,this.roleLvUp,this)},n.clickKuaiJie=function(e){ConfigManager.isb9cb()?this.showKuaiJieView():ConfigManager.isIOS()||5==ConfigManager.getVia()?this.showKuaiJieView():this.dispatchEvent(new ParamEvent(EventName.OPEN_DOWN_LOAD_CLIENT_VIEW))},n.showKuaiJieView=function(){null==this._kuaijieWindow&&(this._kuaijieWindow=new QQKuaiJieWindow,this._kuaijieWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeKuaiJieView,this)),this._kuaijieWindow.isPop=!this._kuaijieWindow.isPop,this._kuaijieWindow.isPop&&this._kuaiJieIcon&&(this._kuaiJieIcon.showRedDot=!1)},n.disposeKuaiJieView=function(){this._kuaijieWindow&&(this._kuaijieWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeKuaiJieView,this),this._kuaijieWindow.dispose(),this._kuaijieWindow=null)},n.roleLvUp=function(e){var t=RoleModel.getInstance().getRoleCommon().level;t>30?RoleModel.getInstance().removeEventListener(RoleModel.ROLE_LV_UP,this.roleLvUp,this):20==t?this._kuaiJieIcon&&(this._kuaiJieIcon.showRedDot=!0):30==t&&this._kuaiJieIcon&&this.showKuaiJieView()},t}(BaseContol);egret.registerClass(DesktopControl,"DesktopControl");var DominateControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){var e=this;this.addCmdListener(12400,function(t){e.SCMD12400Response(t)},this),this.addCmdListener(12401,function(t){e.SCMD12401Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(DominateEvtName.DOMINATE_OPEN_WINDOW,this.onOpenWindowHandler,this),this.addEventListener(DominateEvtName.CCMD12400,function(t){e.CCMD12400Request(t)},this),this.addEventListener(DominateEvtName.CCMD12401,function(t){e.CCMD12401Request(t)},this),this.addEventListener(DominateEvtName.CCMD12402,function(t){e.CCMD12402Request(t)},this),this.addEventListener(DominateEvtName.CCMD12403,function(t){e.CCMD12403Request(t)},this)},n.CCMD12400Request=function(e){if(FunctionOpenModel.getInstance().check(FunctionOpenModel.DOMINATE,!1)){var t=new CCMD12400;t.partner_id=e.data.id,this.sendSocketData(12400,t)}},n.SCMD12400Response=function(e){DominateModel.getInstance().updateDominateEquipInfo(e)},n.CCMD12401Request=function(e){if(FunctionOpenModel.getInstance().check(FunctionOpenModel.DOMINATE,!1)){var t=new CCMD12401;t.partner_id=e.data.id,t.type_id=e.data.type,this.sendSocketData(12401,t)}},n.SCMD12401Response=function(e){0==e.flag?EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("shibai"),293,345,this._dominateWindow,80,!1):EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("tisheng"),2,-22,this._dominateWindow,80,!1)},n.CCMD12402Request=function(e){var t=new CCMD12402;t.partner_id=e.data.id,t.type_id=e.data.type,this.sendSocketData(12402,t)},n.CCMD12403Request=function(e){var t=new CCMD12403;t.item_id=e.data.id,this.sendSocketData(12403,t)},n.onOpenWindowHandler=function(e){var t=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.DOMINATE);if(RoleModel.getInstance().getRoleCommon().round<t.open_round)return void Message.show("该功能"+t.open_round+"转开启");var i,n=0,s=0;e.data&&(n=e.data.index,i=e.data.state,s=e.data.type),this._dominateWindow||(this._dominateWindow=new DominateWindow,this._dominateWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeWindow,this)),this._dominateWindow.curType=s,this._dominateWindow.openView(n,i)},n.disposeWindow=function(e){this._dominateWindow&&(this._dominateWindow.dispose(),this._dominateWindow=null)},t}(BaseContol);egret.registerClass(DominateControl,"DominateControl");var FanLiControl=function(e){function t(){e.call(this),this._fanliDataList=[],this._model=FanLiModel.getInstance()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.gameStartCallBack=function(){e.prototype.gameStartCallBack.call(this);var t=FanLiModel.getInstance().checkHasFanliDataByType(FanLiModel.ZP);if(t){var i=FanLiModel.getInstance().getConfigZP()[t.template_id][1];FanLiModel.getInstance().getConfigZPWai()[i.template_id];this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD23400,i.type))}},n.addCmdHandler=function(){var e=this;this.addCmdListener(17300,function(t){e.SCMD17300Response(t)},this),this.addCmdListener(17301,function(t){e.SCMD17301Response(t)},this),this.addCmdListener(17400,function(t){e.SCMD17400Response(t)},this),this.addCmdListener(17800,function(t){e.SCMD17800Response(t)},this),this.addCmdListener(17600,function(t){e.SCMD17600Response(t)},this),this.addCmdListener(17700,function(t){e.SCMD17700Response(t)},this),this.addCmdListener(17701,function(t){e.SCMD17701Response(t)},this),this.addCmdListener(17500,function(t){e.SCMD17500Response(t)},this),this.addCmdListener(17510,function(t){e.SCMD17510Response(t)},this),this.addCmdListener(19600,function(t){e.SCMD19600Response(t)},this),this.addCmdListener(19602,function(t){e.SCMD19602Response(t)},this),this.addCmdListener(19700,function(t){e.SCMD19700Response(t)},this),this.addCmdListener(19701,function(t){e.SCMD19701Response(t)},this),this.addCmdListener(19710,function(t){e.SCMD19710Response(t)},this),this.addCmdListener(19711,function(t){e.SCMD19711Response(t)},this),this.addCmdListener(19900,function(t){e.SCMD19900Response(t)},this),this.addCmdListener(19901,function(t){e.SCMD19901Response(t)},this),this.addCmdListener(19903,function(t){e.SCMD19903Response(t)},this),this.addCmdListener(23700,function(t){e.SCMD23700Response(t)},this),this.addCmdListener(23701,function(t){e.SCMD23701Response(t)},this),this.addCmdListener(23703,function(t){e.SCMD23703Response(t)},this),this.addCmdListener(21700,function(t){e.SCMD21700Response(t)},this),this.addCmdListener(22e3,function(t){e.SCMD22000Response(t)},this),this.addCmdListener(23400,function(t){e.SCMD23400Response(t)},this),this.addCmdListener(23401,function(t){e.SCMD23401Response(t)},this),this.addCmdListener(23402,function(t){e.SCMD23402Response(t)},this),this.addCmdListener(23410,function(t){e.SCMD23410Response(t)},this),this.addCmdListener(24e3,function(t){e.SCMD24000Response(t)},this),this.addCmdListener(24010,function(t){e.SCMD24010Response(t)},this),this.addCmdListener(24040,function(t){e.SCMD24040Response(t)},this)},n.addEventHandler=function(){this.addEventListener(FanLiEvtName.BLESS_OPEN_WINDOW,this.openBlessWindow,this),this.addEventListener(FanLiEvtName.BUFF_OPEN_VIEW,this.openBuffView,this),this.addEventListener(t.TEST,this.onTest,this),this.addEventListener(FanLiEvtName.CCMD17300,this.request17300,this),this.addEventListener(FanLiEvtName.CCMD17400,this.request17400Handler,this),this.addEventListener(FanLiEvtName.CCMD17401,this.request17401Handler,this),this.addEventListener(FanLiEvtName.CCMD17800,this.request17800Handler,this),this.addEventListener(FanLiEvtName.CCMD17801,this.request17801Handler,this),this.addEventListener(FanLiEvtName.CCMD17600,this.request17600Handler,this),this.addEventListener(FanLiEvtName.CCMD17601,this.request17601Handler,this),this.addEventListener(FanLiEvtName.CCMD17700,this.request17700Handler,this),this.addEventListener(FanLiEvtName.CCMD17701,this.request17701Handler,this),this.addEventListener(FanLiEvtName.CCMD17500,this.request17500Handler,this),this.addEventListener(FanLiEvtName.CCMD17501,this.request17501Handler,this),this.addEventListener(FanLiEvtName.CCMD17502,this.request17502Handler,this),this.addEventListener(FanLiEvtName.CCMD17510,this.request17510Handler,this),this.addEventListener(FanLiEvtName.CCMD19600,this.request19600Handler,this),this.addEventListener(FanLiEvtName.CCMD19601,this.request19601Handler,this),this.addEventListener(FanLiEvtName.CCMD19602,this.request19602Handler,this),this.addEventListener(FanLiEvtName.CCMD19700,this.request19700Handler,this),this.addEventListener(FanLiEvtName.CCMD19710,this.request19710Handler,this),this.addEventListener(FanLiEvtName.CCMD19900,this.request19900Handler,this),this.addEventListener(FanLiEvtName.CCMD19901,this.request19901Handler,this),this.addEventListener(FanLiEvtName.CCMD19902,this.request19902Handler,this),this.addEventListener(FanLiEvtName.CCMD19903,this.request19903Handler,this),this.addEventListener(FanLiEvtName.CCMD21700,this.request21700Handler,this),this.addEventListener(FanLiEvtName.CCMD21701,this.request21701Handler,this),this.addEventListener(FanLiEvtName.CCMD21800,this.request21800Handler,this),this.addEventListener(FanLiEvtName.CCMD22000,this.request22000Handler,this),this.addEventListener(FanLiEvtName.OPEN_FANLI_WINDOW,this.showFanLiWindow,this),this.addEventListener(FanLiEvtName.CCMD23400,this.request23400Handler,this),this.addEventListener(FanLiEvtName.CCMD23401,this.request23401Handler,this),this.addEventListener(FanLiEvtName.CCMD23402,this.request23402Handler,this),this.addEventListener(FanLiEvtName.CCMD23410,this.request23410Handler,this),this.addEventListener(FanLiEvtName.CCMD23600,this.request23600Handler,this),this.addEventListener(FanLiEvtName.CCMD23700,this.request23700Handler,this),this.addEventListener(FanLiEvtName.CCMD23701,this.request23701Handler,this),this.addEventListener(FanLiEvtName.CCMD23702,this.request23702Handler,this),this.addEventListener(FanLiEvtName.CCMD23703,this.request23703Handler,this),this.addEventListener(FanLiEvtName.CCMD24000,this.request24000Handler,this),this.addEventListener(FanLiEvtName.CCMD24010,this.request24010Handler,this),this.addEventListener(FanLiEvtName.CCMD24020,this.request24020Handler,this),this.addEventListener(FanLiEvtName.CCMD24030,this.request24030Handler,this),this.addEventListener(FanLiEvtName.CCMD24040,this.request24040Handler,this),this.addEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.updateDailyChange,this),this.addEventListener(EventName.RED_DOTS+RedDotsModel.ID_2025,this.checkIconRedDot,this),this.addEventListener(FanLiEvtName.CCMD17310,this.request17310,this)},n.onTest=function(){var e=new SCMD17300;e.act_fl_list=[],this.SCMD17300Response(e)},n.requestAll=function(){if(this._fanliDataList.length>0){if(!FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_32,!1))return;var e,t;if(e=this._fanliDataList.shift(),t=this._model.getFanLiClientVO(e.act_id))switch(t.type){case FanLiModel.LOGIN_AWARD:this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD17400,{id:t.template_id}));break;case FanLiModel.XIANGGOU:this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD17800,{id:t.template_id}));break;case FanLiModel.LEICHANG:this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD17600,{id:t.template_id}));break;case FanLiModel.ZHUAN:this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD17700,{id:t.template_id}));break;case FanLiModel.EGG:this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD19900,{id:t.template_id}));break;case FanLiModel.XF:this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD21700,{id:t.template_id}));break;case FanLiModel.FISH:this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD23700,{id:t.template_id}))}}else TimerManager.getInstance().remove(200,this.requestAll,this)},n.request17300=function(e){var t=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_32);null==t||RoleModel.getInstance().getRoleCommon().level<t.open_level||this.sendSocketData(17300)},n.updateDailyChange=function(e){var t=e.data.data;(t.type==DailyModel.DAILY_TYPE_14||t.type==DailyModel.DAILY_TYPE_21801||t.type==DailyModel.DAILY_TYPE_22001||t.type==DailyModel.DAILY_TYPE_22002)&&this._fanLiIcon&&(this._fanLiIcon.showRedDot=this._model.checkIconRedDot())},n.SCMD17300Response=function(e){if(this._model.setServerData(e),this._model.reset(),this._fanliWindow&&(this._fanliWindow.isPop=!1),this._model.checkAddFanLiIcon()){this.addFanLiIcon(),this._fanliDataList=[];for(var t=0;t<e.act_fl_list.length;t++)this._fanliDataList.push(e.act_fl_list[t]);TimerManager.getInstance().add(200,this.requestAll,this)}this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD17300_UPDATE))},n.SCMD17301Response=function(e){this._model.deleteOneServerData(e.act_id),0==this._model.checkAddFanLiIcon()&&this.removeFanLiIcon(),this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD17300_UPDATE))},n.request17400Handler=function(e){var t=new CCMD17400;t.act_id=e.data.id,this.sendSocketData(17400,t)},n.SCMD17400Response=function(e){FanLiModel.getInstance().setFanLiLoginAwardData(e),this.checkIconRedDot()},n.request17401Handler=function(e){var t=new CCMD17401;t.act_id=e.data.id,this.sendSocketData(17401,t)},n.request17800Handler=function(e){var t=new CCMD17800;t.act_id=e.data.id,this.sendSocketData(17800,t)},n.SCMD17800Response=function(e){FanLiModel.getInstance().setFanLiXgData(e),this.checkIconRedDot()},n.request17801Handler=function(e){var t=new CCMD17801;t.act_id=e.data.id,t.gift_id=e.data.giftId,this.sendSocketData(17801,t)},n.request17600Handler=function(e){var t=new CCMD17600;t.act_id=e.data.id,this.sendSocketData(17600,t)},n.SCMD17600Response=function(e){FanLiModel.getInstance().setFanLiLcData(e),this.checkIconRedDot()},n.request17601Handler=function(e){var t=new CCMD17601;t.act_id=e.data.id,t.award_id=e.data.awardId,this.sendSocketData(17601,t)},n.request17700Handler=function(e){var t=new CCMD17700;t.act_id=e.data.id,this.sendSocketData(17700,t)},n.request17701Handler=function(e){var t=new CCMD17701;t.act_id=e.data.id,this.sendSocketData(17701,t)},n.request17500Handler=function(e){var t=new CCMD17500;t.act_id=e.data.id,this.sendSocketData(17500,t)},n.request17501Handler=function(e){var t=new CCMD17501;t.act_id=e.data.id,this.sendSocketData(17501,t)},n.request17502Handler=function(e){var t=new CCMD17502;t.act_id=e.data.id,t.type=e.data.type,this.sendSocketData(17502,t)},n.request17510Handler=function(e){var t=new CCMD17510;t.act_id=e.data.id,this.sendSocketData(17510,t)},n.SCMD17700Response=function(e){FanLiModel.getInstance().checkZhuanCanGet(e.awarded_id<e.award_id),this.checkIconRedDot(),this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD17700_UPDATE,e))},n.SCMD17701Response=function(e){this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD17701_UPDATE,e))},n.SCMD17500Response=function(e){this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD17500_UPDATE,e))},n.SCMD17510Response=function(e){this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD17510_UPDATE,e.act_flcj_list))},n.request19600Handler=function(e){var t=new CCMD19600;t.act_id=e.data.id,this.sendSocketData(19600,t)},n.SCMD19600Response=function(e){FanLiModel.getInstance().setFanLiLuckData(e)},n.request19601Handler=function(e){var t=new CCMD19601;t.act_id=this._model.fanLiLuckActId,t.good_id=e.data.cfg_id,this.sendSocketData(19601,t)},n.request19602Handler=function(e){var t=new CCMD19602;t.act_id=this._model.fanLiLuckActId,t.good_id=e.data.cfg_id,this.sendSocketData(19602,t)},n.SCMD19602Response=function(e){1==e.flag?(Message.show("捡钱成功"),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.PICK_MONEY_SUCCESS))):Message.show("捡钱失败")},n.request19700Handler=function(e){var t=new CCMD19700;t.tar_role_id=e.data.id,t.item_cfgid=e.data.cfg_id,this.sendSocketData(19700,t)},n.SCMD19700Response=function(e){1==e.flag?Message.show("赠送成功"):Message.show("赠送失败"),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.CCMD19700_UPDATE,{flag:e.flag}))},n.request19710Handler=function(e){this.sendSocketData(19710)},n.SCMD19701Response=function(e){this.dispatchEvent(new ParamEvent(FanLiEvtName.BLESS_OPEN_WINDOW,{role_id:e.role_id,role_name:e.role_name,item_id:e.item_id,bless_awards:e.bless_awards}))},n.SCMD19710Response=function(e){this._model.setBlessBuffList(e)},n.SCMD19711Response=function(e){this._model.deleteBlessBuff(e.buff_id)},n.request19900Handler=function(e){var t=new CCMD19900;t.act_id=e.data.id,this.sendSocketData(19900,t)},n.SCMD19900Response=function(e){this._model.setEggData(e)},n.request19901Handler=function(e){var t=new CCMD19901;t.act_id=e.data.id,t.slot=e.data.slot,this.sendSocketData(19901,t)},n.request19902Handler=function(e){var t=new CCMD19902;t.act_id=e.data.id,this.sendSocketData(19902,t)},n.request19903Handler=function(e){var t=new CCMD19903;t.act_id=e.data.id,this.sendSocketData(19903,t)},n.SCMD19901Response=function(e){this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD19901_UPDATE,{dataList:e.egg_drop_list}))},n.SCMD19903Response=function(e){this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD19903_UPDATE,{flag:e.flag}))},n.request21700Handler=function(e){var t=new CCMD21700;t.act_id=e.data.id,this.sendSocketData(21700,t)},n.request21701Handler=function(e){var t=new CCMD21701;t.act_id=e.data.id,t.award_id=e.data.awardId,this.sendSocketData(21701,t)},n.SCMD21700Response=function(e){this._model.setFanLiXfData(e)},n.request21800Handler=function(e){var t=new CCMD21800;t.act_id=e.data.act_id,this.sendSocketData(21800,t)},n.request22000Handler=function(e){this.sendSocketData(22e3)},n.request23400Handler=function(e){var t=new CCMD23400;t.act_id=e.data,this.sendSocketData(23400,t)},n.request23401Handler=function(e){var t=new CCMD23401;t.act_id=e.data.act_id,t.type_id=e.data.t_id,this.sendSocketData(23401,t)},n.request23402Handler=function(e){var t=new CCMD23402;t.act_id=e.data.act_id,t.type_id=e.data.t_id,this.sendSocketData(23402,t)},n.request23410Handler=function(e){var t=new CCMD23410;t.act_id=e.data,this.sendSocketData(23410,t)},n.request23600Handler=function(e){var t=new CCMD23600;t.act_id=e.data.id,t.shop_id=e.data.shop_id,this.sendSocketData(23600,t)},n.SCMD23400Response=function(e){FanLiModel.getInstance().zpData=e,this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD23400_UPDATE,e))},n.SCMD23401Response=function(e){this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD23401_UPDATE,e))},n.SCMD23402Response=function(e){this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD23402_UPDATE,e))},n.SCMD23410Response=function(e){this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD23410_UPDATE,e))},n.SCMD22000Response=function(e){this._shopQizhen||(this._shopQizhen=new ShopQizhenResultWindow,this._shopQizhen.addEventListener(EventName.WINDOW_DISPOSE,this.disposeShopQizhenView,this)),this._shopQizhen.setData(e.drop_list),this._shopQizhen.isPop2=!0},n.request23700Handler=function(e){var t=new CCMD23700;t.act_id=e.data.id,this.sendSocketData(23700,t)},n.SCMD23700Response=function(e){this._model.setFishData(e)},n.request23701Handler=function(e){var t=new CCMD23701;t.act_id=e.data.id,t.slot=e.data.slot,this.sendSocketData(23701,t)},n.SCMD23701Response=function(e){this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD23701_UPDATE,{dataList:e.fish_drop_list}))},n.request23702Handler=function(e){var t=new CCMD23702;t.act_id=e.data.id,this.sendSocketData(23702,t)},n.request23703Handler=function(e){var t=new CCMD23703;t.act_id=e.data.id,this.sendSocketData(23703,t)},n.addFanLiIcon=function(){null==this._fanLiIcon&&(this._fanLiIcon=TipsWordManager.getInstance().addWordIcon("btn_fanli"),this._fanLiIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickTipword,this))},n.SCMD23703Response=function(e){this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD23703_UPDATE,{flag:e.flag}))},n.request24000Handler=function(e){var t=new CCMD24000;t.cfg_id=e.data,this.sendSocketData(24e3,t)},n.request24010Handler=function(e){var t=new CCMD24010;t.cfg_id=e.data,this.sendSocketData(24010,t)},n.request24020Handler=function(e){var t=new CCMD24020;t.cfg_id=e.data,this.sendSocketData(24020,t)},n.request24030Handler=function(e){var t=new CCMD24030;t.cfg_id=e.data,this.sendSocketData(24030,t)},n.request24040Handler=function(e){var t=new CCMD24040;t.cfg_id=e.data,this.sendSocketData(24040,t)},n.SCMD24000Response=function(e){this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD24000_UPDATE,e.point))},n.SCMD24010Response=function(e){this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD24010_UPDATE,e.six))},n.SCMD24040Response=function(e){this.dispatchEvent(new ParamEvent(FanLiEvtName.CCMD24040_UPDATE,e))},n.removeFanLiIcon=function(){this._fanLiIcon&&(TipsWordManager.getInstance().removeIcon("btn_fanli"),this._fanLiIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickTipword,this),this._fanLiIcon=null)},n.clickTipword=function(){this.showFanLiWindow(null)},n.checkIconRedDot=function(){this._fanLiIcon&&(this._fanLiIcon.showRedDot=this._model.checkIconRedDot());TipsWordManager.getInstance().getTipsWord(TipsWord.FANLI);TipsWordManager.getInstance().showRedDots(TipsWord.FANLI,this._model.checkIconRedDot())},n.showFanLiWindow=function(e){null==this._fanliWindow&&(this._fanliWindow=new FanLiWindow,this._fanliWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeFanLiWindow,this)),this._fanliWindow.isPop=!this._fanliWindow.isPop},n.disposeFanLiWindow=function(e){this._fanliWindow&&(this._fanliWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeFanLiWindow,this),this._fanliWindow.dispose(),this._fanliWindow=null)},n.openBlessWindow=function(e){this._blessWindow||(this._blessWindow=new BlessWindow,this._blessWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeBlessWindow,this));var t=!this._blessWindow.isPop;this._blessWindow.isPop=t,this._blessWindow&&1==this._blessWindow.isPop&&this._blessWindow.setData(e.data.role_id,e.data.role_name,e.data.item_id,e.data.bless_awards)},n.disposeBlessWindow=function(e){this._blessWindow&&(this._blessWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeBlessWindow,this),this._blessWindow.dispose(),this._blessWindow=null)},n.openBuffView=function(e){this._blessBuffView||(this._blessBuffView=new BuffView,this._blessBuffView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeBuffView,this));var t=!this._blessBuffView.isPop;this._blessBuffView.isPop=t},n.disposeBuffView=function(e){this._blessBuffView&&(this._blessBuffView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeBuffView,this),this._blessBuffView.dispose(),this._blessBuffView=null)},n.disposeShopQizhenView=function(e){this._shopQizhen&&(this._shopQizhen.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeShopQizhenView,this),this._shopQizhen.dispose(),this._shopQizhen=null)},n.request17310=function(e){var t=new CCMD17310;t.act_id=FanLiModel.getInstance().fanliShareID,this.sendSocketData(17310,t),FanLiModel.getInstance().fanliShareID=0},t.TEST="TEST",t}(BaseContol);egret.registerClass(FanLiControl,"FanLiControl");var FashionControl=function(e){function t(){e.call(this),this._model=FashionModel.getInstance()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){var e=this;this.addCmdListener(13600,function(t){e.SCMD13600Response(t)},this),this.addCmdListener(13601,function(t){e.SCMD13601Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(FashionEvtName.OPEN_WINDOW,this.onOpenWindowHandler,this),this.addEventListener(FashionEvtName.CCMD13600,function(t){e.CCMD13600Request(t)},this),this.addEventListener(FashionEvtName.CCMD13601,function(t){e.CCMD13601Request(t)},this),this.addEventListener(FashionEvtName.CCMD13602,function(t){e.CCMD13602Request(t)},this),this.addEventListener(FashionEvtName.CCMD13603,function(t){e.CCMD13603Request(t)},this)},n.CCMD13600Request=function(e){var t=new CCMD13600;t.partner_id=e.data.id,this.sendSocketData(13600,t)},n.SCMD13600Response=function(e){this._model.updateFashionInfo(e)},n.CCMD13601Request=function(e){var t=new CCMD13601;t.partner_id=e.data.id,t.template_id=e.data.template_id,this.sendSocketData(13601,t)},n.SCMD13601Response=function(e){this._model.deleteFashion(e)},n.CCMD13602Request=function(e){var t=new CCMD13602;t.partner_id=e.data.id,t.template_id=e.data.template_id,this.sendSocketData(13602,t)},n.CCMD13603Request=function(e){var t=new CCMD13603;t.partner_id=e.data.id,t.template_id=e.data.template_id,this.sendSocketData(13603,t)},n.onOpenWindowHandler=function(e){var t,i=(FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_28),0);e.data&&(i=e.data.index,t=e.data.isOpen),this._fashionWindow||(this._fashionWindow=new FashionWindow,this._fashionWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._fashionWindow.openView(i,t)},n.disposeView=function(){this._fashionWindow&&(this._fashionWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._fashionWindow.dispose(),this._fashionWindow=null)},t}(BaseContol);egret.registerClass(FashionControl,"FashionControl");var FigureControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){var i=this;e.prototype.onGameStart.call(this,t),setTimeout2(function(){i.showPartnerIcon()},2e3*Math.random())},n.addCmdHandler=function(){var e=this;this.addCmdListener(11100,function(t){e.SCMD11100Response(t)},this),this.addCmdListener(23e3,function(t){e.SCMD23000Response(t)},this),this.addCmdListener(23010,function(t){e.SCMD23010Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(EventName.MAINUI_CLICK_FIGURE,this.onOpenFigureViewHandler,this),this.addEventListener(FigureEvtName.ORANGE_OPEN,this.onOpenOrangeWindowHandler,this),this.addEventListener(FigureEvtName.FIGURE_OPEN_SPECIALEQUIPWINDOW,this.onOpenSpecialEquipWindowHandler,this),this.addEventListener(FigureEvtName.FIGURE_OPEN_OPENPARTNERWINDOW,this.onOpenOpenpartnerWindowHandler,this),this.addEventListener(FigureEvtName.FIGURE_OPEN_PARTNERPROPERTYVIEW,this.onOpenPartnerPropertyWindowHandler,this),this.addEventListener(EventName.REQUEST_CHANGEEQUIP,function(t){e.CCMD10402Request(t)},this),this.addEventListener(FigureEvtName.CCMD11100,function(t){e.CCMD11100Request(t)},this),this.addEventListener(FigureEvtName.CCMD11101,function(t){e.CCMD11101Request(t)},this),this.addEventListener(FigureEvtName.CCMD10301,function(t){e.CCMD10301Request(t)},this),this.addEventListener(FigureEvtName.CCMD17200,function(t){e.CCMD17200Request(t)},this),this.addEventListener(FigureEvtName.CCMD17201,function(t){e.CCMD17201Request(t)},this),this.addEventListener(FigureEvtName.CCMD23000,function(t){e.CCMD23000Request(t)},this),this.addEventListener(FigureEvtName.CCMD23010,function(t){e.CCMD23010Request(t)},this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.showPartnerIcon,this)},n.CCMD10402Request=function(e){var t=new CCMD10402;t.partner_id=e.data.pId,this.sendSocketData(10402,t)},n.CCMD11100Request=function(e){var t=new CCMD11100;t.partner_id=e.data.id,this.sendSocketData(11100,t)},n.SCMD11100Response=function(e){FigureModel.getInstance().updateSpecialEquipInfo(e)},n.CCMD11101Request=function(e){var t=new CCMD11101;t.partner_id=e.data.id,t.type=e.data.type,this.sendSocketData(11101,t)},n.CCMD10301Request=function(e){var t=new CCMD10301;t.sex=e.data.sex,t.career=e.data.career,this.sendSocketData(10301,t)},n.CCMD17200Request=function(e){},n.SCMD17200Response=function(e){FigureModel.getInstance().setTastePartnerInfo(e)},n.CCMD17201Request=function(e){this.sendSocketData(17201)},n.CCMD23000Request=function(e){if(FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_51,!1)){var t=new CCMD23000;t.partner_id=e.data.id,this.sendSocketData(23e3,t)}},n.SCMD23000Response=function(e){FigureModel.getInstance().setShenlianInfo(e)},n.CCMD23010Request=function(e){var t=new CCMD23010;t.partner_id=e.data.id,this.sendSocketData(23010,t)},n.SCMD23010Response=function(e){1==e.flag?Message.show("神炼提升成功"):0==e.flag&&Message.show("神炼提升失败")},n.onOpenFigureViewHandler=function(e){var t,i=0;e.data&&(i=e.data.index,t=e.data.isOpen),this.figureView||(this.figureView=new FigureWindow,this.figureView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeFigureWindow,this)),this.figureView.openView(i,t)},n.disposeFigureWindow=function(e){this.figureView&&(this.figureView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeFigureWindow,this),this.figureView.dispose(),this.figureView=null)},n.onOpenSpecialEquipWindowHandler=function(e){var t=e.data.state,i=e.data.type;this.specialEquipWindow||(this.specialEquipWindow=new SpecialEquipWindow,this.specialEquipWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeSpecialEquipWindow,this)),this.specialEquipWindow.type=i,this.specialEquipWindow.isPop2=t},n.disposeSpecialEquipWindow=function(e){this.specialEquipWindow&&(this.specialEquipWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeSpecialEquipWindow,this),this.specialEquipWindow.dispose(),this.specialEquipWindow=null)},n.onOpenOpenpartnerWindowHandler=function(e){var t,i=0;e.data&&(i=e.data.index,t=e.data.isOpen),this.openpartnerWindow||(this.openpartnerWindow=new OpenpartnerWindow,this.openpartnerWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeOpenpartnerWindow,this)),this.openpartnerWindow.openView(i,t)},n.disposeOpenpartnerWindow=function(e){this.openpartnerWindow&&(this.openpartnerWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeOpenpartnerWindow,this),this.openpartnerWindow.dispose(),this.openpartnerWindow=null)},n.onOpenPartnerPropertyWindowHandler=function(e){this.partnerPropertyView||(this.partnerPropertyView=new PartnerPropertyView,this.partnerPropertyView.addEventListener(EventName.WINDOW_DISPOSE,this.disposePartnerPropertyrWindow,this)),this.partnerPropertyView._sIndex=e.data.index,this.partnerPropertyView._dataList=e.data.dataList,this.partnerPropertyView.isPop2=!0},n.disposePartnerPropertyrWindow=function(e){this.partnerPropertyView&&(this.partnerPropertyView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposePartnerPropertyrWindow,this),this.partnerPropertyView.dispose(),this.partnerPropertyView=null)},n.onOpenOrangeWindowHandler=function(e){var t=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.ORANGESUIT);if(!(t&&RoleModel.getInstance().getRoleCommon().level<t.open_level)){var i,n=0;e.data&&(n=e.data.index,i=e.data.isOpen),this._orangeWindow||(this._orangeWindow=new OrangeWindow,this._orangeWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeOrangeWindow,this)),this._orangeWindow.openView(n,i)}},n.disposeOrangeWindow=function(e){this._orangeWindow&&(this._orangeWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeOrangeWindow,this),this._orangeWindow.dispose(),this._orangeWindow=null)},n.showPartnerIcon=function(){},n.clickIconPartnerHandler=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_OPEN_OPENPARTNERWINDOW))},t}(BaseContol);egret.registerClass(FigureControl,"FigureControl");var FirstChargeControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){var i=this;e.prototype.onGameStart.call(this,t),setTimeout2(function(){i.CCMD12800Request()},70*Math.random())},n.addEventHandler=function(){this.addEventListener(FirstChargeEvtName.FIRST_CHARGE_CCMD12800,this.CCMD12800Request,this),this.addEventListener(FirstChargeEvtName.FIRST_CHARGE_CCMD12801,this.CCMD12801Request,this),this.addEventListener(FirstChargeEvtName.FIRST_CHARGE_CCMD21300,this.CCMD21300Request,this),this.addEventListener(FirstChargeEvtName.OPEN_FIRST_CHARGE_WINDOW,this.openView,this),this.addEventListener(FirstChargeEvtName.OPEN_FIRST_CHARGE_FIVE_WINDOW,this.openFirstChargeFiveWindow,this),this.addEventListener(DailyEvtName.DAILY_UPDATE,this.updateIconReDot,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_CHANGE,this.onLvUpHandler,this)},n.addCmdHandler=function(){var e=this;
this.addCmdListener(12800,function(t){e.SCMD12800Response(t)},this),this.addCmdListener(21300,function(t){e.SCMD21300Response(t)},this)},n.CCMD12800Request=function(){this.sendSocketData(12800)},n.CCMD21300Request=function(e){this.sendSocketData(21300)},n.CCMD12801Request=function(e){var t=new CCMD12801;t.award_id=e.data,this.sendSocketData(12801,t)},n.SCMD12800Response=function(e){FirstChargeModel.getInstance().firstChargeGetRewardTime=e.last_award_time,FirstChargeModel.getInstance().updateData(e.first_charge_awards),this.dispatchEvent(new ParamEvent(FirstChargeEvtName.FIRST_CHARGE_CCMD12800_UPDATE,e.first_charge_awards)),this.updateIconReDot()},n.SCMD21300Response=function(e){FirstChargeModel.getInstance().firstChargeFiveReward=e.flag,1==e.flag?(this.removeChargeFiveIcon(),this._chargeFiveView&&1==this._chargeFiveView.isPop&&(this._chargeFiveView.isPop=!1),this.addChargeIcon()):this.addChargeFiveIcon()},n.openView=function(e){this.dispatchEvent(new ParamEvent(HuoDongDailyEvtName.SHOW_DAILY_CHARGE_VIEW))},n.openFirstChargeFiveWindow=function(e){return ChargeModel.getInstance().isShowTest?void this.dispatchEvent(new ParamEvent(EventName.CHARGE_OPEN)):(null==this._chargeFiveView&&(this._chargeFiveView=new FirstChargeFiveWindow,this._chargeFiveView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeFirstChargeFiveWindow,this)),void(this._chargeFiveView.isPop=!0))},n.disposeFirstChargeFiveWindow=function(e){this._chargeFiveView&&(this._chargeFiveView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeFirstChargeFiveWindow,this),this._chargeFiveView.dispose(),this._chargeFiveView=null)},n.updateIconReDot=function(){if(this.updateIconState(),TipsWordManager.getInstance().isHasIcon("btn_firstcharge")){var e=!1;e=HuoDongDailyModel.getInstance().checkDailyChargeCanGetReward();TipsWordManager.getInstance().getTipsWord(TipsWord.FIRST_CHARGE);TipsWordManager.getInstance().showRedDots(TipsWord.FIRST_CHARGE,e)}},n.updateIconState=function(){var e=HuoDongDailyModel.getInstance().getDailyChargeGetRewardTimes();e>=2?this.removeIcon():this.addIcon()},n.onLvUpHandler=function(){21==RoleModel.getInstance().getRoleCommon().level&&(0==HuoDongDailyModel.getInstance().checkOneRmbFinished()?this.dispatchEvent(new ParamEvent(HuoDongDailyEvtName.SHOW_ONE_RMB_VIEW)):0==FirstChargeModel.getInstance().firstChargeFiveReward&&this.openFirstChargeFiveWindow(null))},n.removeIcon=function(){this._tw&&(this._tw.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openView,this),TipsWordManager.getInstance().removeIcon("btn_firstcharge"),this._tw.dispose(),this._tw=null)},n.addIcon=function(){null==this._tw&&(this._tw=TipsWordManager.getInstance().addWordIcon("btn_firstcharge"),this._tw.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openView,this))},n.removeChargeFiveIcon=function(){this._chargeFiveIcon&&(this._chargeFiveIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickChargeFiveIcon,this),TipsWordManager.getInstance().removeIcon("btn_five"),this._chargeFiveIcon.dispose(),this._chargeFiveIcon=null)},n.addChargeFiveIcon=function(){null==this._chargeFiveIcon&&(this._chargeFiveIcon=TipsWordManager.getInstance().addWordIcon("btn_five"),this._chargeFiveIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickChargeFiveIcon,this))},n.onClickChargeFiveIcon=function(e){this.openFirstChargeFiveWindow(null)},n.removeChargeIcon=function(){this._chargeIcon&&(this._chargeIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickChargeIcon,this),TipsWordManager.getInstance().removeIcon("btn_chongzhi"),this._chargeIcon.dispose(),this._chargeIcon=null)},n.addChargeIcon=function(){null==this._chargeIcon&&(this._chargeIcon=TipsWordManager.getInstance().addWordIcon("btn_chongzhi"),this._chargeIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickChargeIcon,this))},n.onClickChargeIcon=function(e){this.dispatchEvent(new ParamEvent(EventName.CHARGE_OPEN))},t}(BaseContol);egret.registerClass(FirstChargeControl,"FirstChargeControl");var ForgemindControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){var e=this;this.addCmdListener(12200,function(t){e.SCMD12200Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(ForgemindEvtName.FORGEMIND_OPEN_WINDOW,this.onOpenWindowHandler,this),this.addEventListener(ForgemindEvtName.CCMD12200,function(t){e.CCMD12200Request(t)},this),this.addEventListener(ForgemindEvtName.CCMD12201,function(t){e.CCMD12201Request(t)},this),this.addEventListener(ForgemindEvtName.CCMD12202,function(t){e.CCMD12202Request(t)},this)},n.CCMD12200Request=function(e){var t=new CCMD12200;t.partner_id=e.data.id,this.sendSocketData(12200,t)},n.SCMD12200Response=function(e){ForgemindModel.getInstance().updateForgemindInfo(e),RedDotsModel.getInstance().calMainFigureIconRedDot()},n.CCMD12201Request=function(e){var t=new CCMD12201;t.partner_id=e.data.id,t.slot=e.data.slot,this.sendSocketData(12201,t)},n.CCMD12202Request=function(e){this.sendSocketData(12202)},n.onOpenWindowHandler=function(e){var t=e.data.state;this._window||(this._window=new ForgemindWindow,this._window.addEventListener(EventName.WINDOW_DISPOSE,this.disposeWindow,this)),this._window.isPop=t},n.disposeWindow=function(e){this._window&&(this._window.dispose(),this._window=null)},t}(BaseContol);egret.registerClass(ForgemindControl,"ForgemindControl");var FriendControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t),this.CCMD11700Request(),this.CCMD11701Request()},n.addEventHandler=function(){this.addEventListener(EventName.MAINUI_CLICK_FRIEND,this.openView,this),this.addEventListener(FriendEvtName.FRIEND_OPEN_PRIVATE,this.openPrivateView,this),this.addEventListener(FriendEvtName.FRIEND_CCMD11700,this.CCMD11700Request,this),this.addEventListener(FriendEvtName.FRIEND_CCMD11701,this.CCMD11701Request,this),this.addEventListener(FriendEvtName.FRIEND_CCMD11702,this.CCMD11702Request,this),this.addEventListener(FriendEvtName.FRIEND_CCMD11703,this.CCMD11703Request,this),this.addEventListener(FriendEvtName.FRIEND_CCMD11704,this.CCMD11704Request,this),this.addEventListener(FriendEvtName.FRIEND_CCMD11705,this.CCMD11705Request,this),this.addEventListener(FriendEvtName.FRIEND_CCMD11706,this.CCMD11706Request,this),this.addEventListener(FriendEvtName.FRIEND_CCMD11707,this.CCMD11707Request,this),this.addEventListener(FriendEvtName.FRIEND_CCMD11708,this.CCMD11708Request,this),this.addEventListener(ChatEvtName.CHAT_SCMD11602_UPDATE,this.showRedDots,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(11700,function(t){e.SCMD11700Response(t)},this),this.addCmdListener(11701,function(t){e.SCMD11701Response(t)},this),this.addCmdListener(11702,function(t){e.SCMD11702Response(t)},this),this.addCmdListener(11708,function(t){e.SCMD11708Response(t)},this)},n.CCMD11700Request=function(){this.sendSocketData(11700)},n.CCMD11701Request=function(){this.sendSocketData(11701)},n.CCMD11702Request=function(e){var t=new CCMD11702;t.name=e.data,this.sendSocketData(11702,t)},n.CCMD11703Request=function(e){var t=new CCMD11703;t.role_id=e.data,this.sendSocketData(11703,t)},n.CCMD11704Request=function(){this.sendSocketData(11704)},n.CCMD11705Request=function(e){var t=new CCMD11705;t.type=e.data.type,t.role_id=e.data.id,this.sendSocketData(11705,t)},n.CCMD11706Request=function(e){var t=new CCMD11706;t.type=e.data,this.sendSocketData(11706,t)},n.CCMD11707Request=function(e){var t=new CCMD11707;t.role_id=e.data,this.sendSocketData(11707,t)},n.CCMD11708Request=function(e){var t=new CCMD11708;t.role_id=e.data,this.sendSocketData(11708,t)},n.SCMD11700Response=function(e){FriendModel.getInstance().updateFriendList(e.friend_list),this.dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11700_UPDATE,e))},n.SCMD11701Response=function(e){FriendModel.getInstance().updateBlackList(e.friend_list),this.dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11701_UPDATE,e))},n.SCMD11702Response=function(e){FriendModel.getInstance().updateCheckList(e.friend_list),this.dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11702_UPDATE)),this.showRedDots(1)},n.SCMD11708Response=function(e){FriendModel.getInstance().delList(e.role_ids,e.type),3==e.type&&this.showRedDots(1)},n.openView=function(){TipsWordManager.getInstance().showRedDots(TipsWord.FRIEND,!1),null==this._friendView&&(this._friendView=new FriendWindow,this._friendView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._friendView.isPop=!this._friendView.isPop,this._friendView.isPop&&this._friendView.setIndex()},n.disposeView=function(e){this._friendView&&(this._friendView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._friendView.dispose(),this._friendView=null)},n.openPrivateView=function(e){null==this._friendPrivateView&&(this._friendPrivateView=new FriendPrivateWindow,this._friendPrivateView.addEventListener(EventName.WINDOW_DISPOSE,this.disposePrivateView,this)),this._friendPrivateView.isPop=!this._friendPrivateView.isPop,this._friendPrivateView.isPop&&this._friendPrivateView.setFriend(e.data)},n.disposePrivateView=function(e){this._friendPrivateView&&(this._friendPrivateView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposePrivateView,this),this._friendPrivateView.dispose(),this._friendPrivateView=null)},n.showRedDots=function(e){void 0===e&&(e=0);var t=!1;t=e>0?FriendModel.getInstance().getCheckList().length>0:this._friendPrivateView&&0==this._friendPrivateView.isPop||null==this._friendPrivateView,this.dispatchEvent(new ParamEvent(EventName.RED_DOTS,{type:"friend",flag:t}))},t}(BaseContol);egret.registerClass(FriendControl,"FriendControl");var FubenControl=function(e){function t(){e.call(this),this._bossDropSi=0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t),this._tw_fuben=TipsWordManager.getInstance().addWordIcon(TipsWord.FUBEN),this._tw_fuben.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openView,this)},n.addEventHandler=function(){this.addEventListener(FubenEvtName.OPEN_FUBEN_VIEW,this.openView,this),this.addEventListener(FubenEvtName.CLOSE_FUBEN_VIEW,this.closeView,this),this.addEventListener(FubenEvtName.FUBEN_CCMD13200,this.CCMD13200Request,this),this.addEventListener(FubenEvtName.FUBEN_CCMD13201,this.CCMD13201Request,this),this.addEventListener(FubenEvtName.FUBEN_CCMD13202,this.CCMD13202Request,this),this.addEventListener(FubenEvtName.FUBEN_CCMD13203,this.CCMD13203Request,this),this.addEventListener(FubenEvtName.FUBEN_CCMD14500,this.CCMD14500Request,this),this.addEventListener(FubenEvtName.FUBEN_CCMD14501,this.CCMD14501Request,this),this.addEventListener(FubenEvtName.FUBEN_CCMD14502,this.CCMD14502Request,this),this.addEventListener(FubenEvtName.CMD21000,this.CCMD21000Request,this),this.addEventListener(FubenEvtName.CMD21001,this.CCMD21001Request,this),this.addEventListener(FubenEvtName.CMD21010,this.CCMD21010Request,this),this.addEventListener(DailyEvtName.DAILY_UPDATE,this.showRedDots,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(13200,function(t){e.SCMD13200Response(t)},this),this.addCmdListener(13201,function(t){e.SCMD13201Response(t)},this),this.addCmdListener(14500,function(t){e.SCMD14500Response(t)},this),this.addCmdListener(14501,function(t){e.SCMD14501Response(t)},this),this.addCmdListener(14502,function(t){e.SCMD14502Response(t)},this),this.addCmdListener(21e3,function(t){e.SCMD21000Response(t)},this),this.addCmdListener(21001,function(t){e.SCMD21001Response(t)},this)},n.CCMD13200Request=function(e){var t=new CCMD13200;t.template_id=e.data,this.sendSocketData(13200,t),FubenModel.getInstance().fuBenID=e.data,this._fubenView&&(this._fubenView.isPop=!1)},n.SCMD13200Response=function(e){var t=Tools.convertDropList(e.drop_list);SceneModel.getInstance().showResult(1,t)},n.CCMD13201Request=function(e){var t=new CCMD13201;t.template_id=e.data,this.sendSocketData(13201,t)},n.SCMD13201Response=function(e){this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_FAIL,{dropList:[]}))},n.CCMD13202Request=function(e){var t=new CCMD13202;t.template_id=e.data,this.sendSocketData(13202,t)},n.CCMD13203Request=function(e){var t=new CCMD13203;t.template_id=e.data,this.sendSocketData(13203,t)},n.CCMD14500Request=function(e){this.sendSocketData(14500)},n.CCMD14501Request=function(e){this.sendSocketData(14501),this._fubenView&&(this._fubenView.isPop=!1)},n.CCMD14502Request=function(e){this.sendSocketData(14502)},n.SCMD14500Response=function(e){this.dispatchEvent(new ParamEvent(FubenEvtName.FUBEN_CCMD14500_UPDATE,e.level))},n.SCMD14501Response=function(e){var t=Tools.convertDropList(e.drop_list);SceneModel.getInstance().showResult(1,t),FubenModel.getInstance().isContinue=!0},n.SCMD14502Response=function(e){0==e.flag&&(this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_FAIL,{dropList:[]})),FubenModel.getInstance().isContinue=!1)},n.openView=function(e){if(FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_50)&&(null==this._fubenView&&(this._fubenView=new FubenWindow,this._fubenView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._fubenView.isPop=!this._fubenView.isPop,this._fubenView&&this._fubenView.isPop)){var t=0;e.data&&(t=Number(e.data)),this._fubenView.setSelectIndex(t)}},n.disposeView=function(e){this._fubenView&&(this._fubenView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._fubenView.dispose(),this._fubenView=null)},n.closeView=function(){this._fubenView&&(this._fubenView.isPop=!1)},n.CCMD21000Request=function(e){var t=new CCMD21000;t.cfg_id=e.data,this.sendSocketData(21e3,t)},n.CCMD21001Request=function(e){var t=new CCMD21001;t.cfg_id=FubenModel.getInstance().fuBenID_equip,this.sendSocketData(21001,t)},n.CCMD21010Request=function(e){var t=new CCMD21010;t.cfg_id=e.data,this.sendSocketData(21010,t)},n.SCMD21000Response=function(e){SceneModel.getInstance().showResult(1,e.drop_list)},n.SCMD21001Response=function(e){SceneModel.getInstance().showResult(0,null)},n.showRedDots=function(){},t}(BaseContol);egret.registerClass(FubenControl,"FubenControl");var FuliControl=function(e){function t(){e.call(this),this.isInit=!0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){var i=this;e.prototype.onGameStart.call(this,t),this._fuliIcon=TipsWordManager.getInstance().addWordIcon("btn_fuli"),this._fuliIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openView,this),this.updateFixedNumHandler(),ConfigManager.is37()||(this._shareIcon=TipsWordManager.getInstance().addWordIcon("btn_fenxiang"),this._shareIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShareIcon,this)),setTimeout2(function(){i.addWeiduanIcon()},20*Math.random()+1500)},n.addEventHandler=function(){var e=this;this.addEventListener(FuLiEvtName.FULI_OPEN,this.openView,this),this.addEventListener(ShareEvtName.SHARE_WINDOW_OPEN,this.openShareWindow,this),this.addEventListener(ShareEvtName.CCMD15100,function(t){e.CCMD15100Request(t)},this),this.addEventListener(ShareEvtName.CCMD15101,function(t){e.CCMD15101Request(t)},this),this.addEventListener(ShareEvtName.CCMD15102,function(t){e.CCMD15102Request(t)},this),this.addEventListener(FuLiEvtName.CCMD15700,function(t){e.CCMD15700Request(t)},this),this.addEventListener(FuLiEvtName.CCMD15701,function(t){e.CCMD15701Request(t)},this),this.addEventListener(FuLiEvtName.CCMD16900,function(t){e.CCMD16900Request(t)},this),this.addEventListener(FuLiEvtName.CCMD16901,function(t){e.CCMD16901Request(t)},this),this.addEventListener(FuLiEvtName.CCMD_18400,this.CCMD18400Request,this),this.addEventListener(FuLiEvtName.CCMD_16910,this.CCMD16910Request,this),this.addEventListener(FuLiEvtName.CCMD22100,this.request22100Handler,this),this.addEventListener(FuLiEvtName.CCMD17900,function(t){e.CCMD17900Request(t)},this),this.addEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.updateFixedNumHandler,this),this.addEventListener(FuLiEvtName.UPDATE_ICON_REDDOT,this.updateFixedNumHandler,this),this.addEventListener(ShareEvtName.SHARE_REDDOT,this.updateShareRedDotHandler,this),this.addEventListener(FuLiEvtName.SHOW_SHARENEW_VIEW,this.showShareNewView,this),this.addEventListener(FuLiEvtName.CLOSE_SHAREVIEW,this.closeShareNewView,this),this.updateFixedNumHandler(),this.updateShareRedDotHandler()},n.addCmdHandler=function(){var e=this;this.addCmdListener(15100,function(t){e.SCMD15100Response(t)},this),this.addCmdListener(15700,function(t){e.SCMD15700Response(t)},this),this.addCmdListener(15701,function(t){e.SCMD15701Response(t)},this),this.addCmdListener(16900,function(t){e.SCMD16900Response(t)},this)},n.updateFixedNumHandler=function(){this._fuliIcon&&(this._fuliIcon.showRedDot=HuoDongDailyModel.getInstance().checkCanGetFunctionNoticeAwardAll())},n.updateShareRedDotHandler=function(){this._shareIcon&&(this._shareIcon.showRedDot=ShareModel.getInstance().showRedDot)},n.CCMD15100Request=function(e){this.sendSocketData(15100)},n.SCMD15100Response=function(e){ShareModel.getInstance().share_num=e.share_num,ShareModel.getInstance().last_time=e.last_time,ShareModel.getInstance().share_award=e.award,ShareModel.getInstance().isSHowRedDot(),this.dispatchEvent(new ParamEvent(ShareEvtName.SHARE_UPDATEINFO))},n.CCMD15101Request=function(e){this.sendSocketData(15101)},n.CCMD15102Request=function(e){this.sendSocketData(15102)},n.CCMD15700Request=function(e){this.sendSocketData(15700)},n.CCMD15701Request=function(e){var t=new CCMD15701;t.cfg_id=e.data,this.sendSocketData(15701,t)},n.CCMD16900Request=function(e){this.sendSocketData(16900)},n.CCMD16901Request=function(e){this.sendSocketData(16901)},n.SCMD15700Response=function(e){FuliModel.getInstance().setJijinData(e.fund_awards,e.flag),this.dispatchEvent(new ParamEvent(FuLiEvtName.CCMD15700_UPDATE))},n.SCMD15701Response=function(e){FuliModel.getInstance().setJijinData(e.fund_awards),this.dispatchEvent(new ParamEvent(FuLiEvtName.CCMD15700_UPDATE))},n.SCMD16900Response=function(e){this.dispatchEvent(new ParamEvent(FuLiEvtName.CCMD16900_UPDATE,e))},n.CCMD17900Request=function(e){var t=new CCMD17900;t.award_id=e.data.id,this.sendSocketData(17900,t)},n.onClickShareIcon=function(){this.dispatchEvent(new ParamEvent(ShareEvtName.SHARE_WINDOW_OPEN))},n.openView=function(e){this._fuliView||(this._fuliView=new FuliWindow,this._fuliView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._fuliView.isPop=!this._fuliView.isPop;var t=0;e.data&&(t=e.data.index)},n.disposeView=function(e){this._fuliView&&(this._fuliView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._fuliView.dispose(),this._fuliView=null)},n.openShareWindow=function(e){this._shareWindow||(this._shareWindow=new ShareWindow,this._shareWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeShareWindow,this)),this._shareWindow.isPop=!0},n.disposeShareWindow=function(e){this._shareWindow&&(this._shareWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeShareWindow,this),this._shareWindow.dispose(),this._shareWindow=null)},n.showShareNewView=function(e){if(ConfigManager.isTencent()){var t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_22101),i=ShareModel.getInstance().shareOrderID;0==i&&t>=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_22101).value)||(null==this._shareNewWindow&&(this._shareNewWindow=new ShareNewWindow,this._shareNewWindow.addEventListener(EventName.WINDOW_DISPOSE,this.shareNewDispose,this)),this._shareNewWindow.setData(e.data),this._shareNewWindow.isPop2=!0)}},n.closeShareNewView=function(e){this._shareNewWindow&&(this._shareNewWindow.isPop=!1)},n.shareNewDispose=function(e){this._shareNewWindow&&(this._shareNewWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.shareNewDispose,this),this._shareNewWindow.dispose(),this._shareNewWindow=null)},n.CCMD18400Request=function(e){var t=e.data.type,i=e.data.id,n=new CCMD18400;n.type=t,n.activity_id=i,this.sendSocketData(18400,n)},n.CCMD16910Request=function(e){this.sendSocketData(16910)},n.request22100Handler=function(e){this.sendSocketData(22100)},n.addWeiduanIcon=function(){ConfigManager.isWanZui()&&"0"==Tools.getPageParams("client")&&(this._weiduanIcon=TipsWordManager.getInstance().addWordIcon("btn_weiduan"),this._weiduanIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openWeiDuanAwardView,this))},n.openWeiDuanAwardView=function(){Alert.show("使用微端登入可领取豪华大礼包哦~",1,function(){window.open("https://itunes.apple.com/cn/app/id1279711794","_blank")},null,0,"下载微端","暂不领取")},t}(BaseContol);egret.registerClass(FuliControl,"FuliControl");var GameDispatcher=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.addEventListener=function(t,i,n,s,a){void 0===s&&(s=!1),void 0===a&&(a=1),e.prototype.addEventListener.call(this,t,i,n,s,a)},n.removeEventListener=function(t,i,n,s){void 0===s&&(s=!1),e.prototype.removeEventListener.call(this,t,i,n,s)},n.hasEventListener=function(t){return e.prototype.hasEventListener.call(this,t)},n.once=function(t,i,n,s){void 0===s&&(s=!1),e.prototype.once.call(this,t,i,n,s)},n.dispatchEvent=function(t){var i=getTimer(),n=e.prototype.dispatchEvent.call(this,t),s=getTimer()-i;return s>5&&trace(StringUtil.substitute("send Evt gap = {1} name = {0}",t.type,s)),n},n.willTrigger=function(t){return e.prototype.willTrigger.call(this,t)},t}(egret.EventDispatcher);egret.registerClass(GameDispatcher,"GameDispatcher");var GuildControl=function(e){function t(){e.call(this),this.delaySI=0}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.onGameStart=function(t){e.prototype.onGameStart.call(this,t);var i=this;i.delaySI>0&&clearTimeout(i.delaySI),i.delaySI=setTimeout2(function(){i.CCMD12522()},1530)},s.addEventHandler=function(){this.addEventListener(EventName.MAINUI_CLICK_GUILD,this.openGuildMap,this),this.addEventListener(GuildEvtName.GUILD_OPEN_VIEW,this.openView,this),this.addEventListener(GuildEvtName.GUILD_CLOSE_VIEW,this.disposeMapView,this),this.addEventListener(GuildEvtName.GUILD_CCMD12500,this.CCMD12500Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12501,this.CCMD12501Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12502,this.CCMD12502Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12503,this.CCMD12503Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12504,this.CCMD12504Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12505,this.CCMD12505Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12506,this.CCMD12506Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12507,this.CCMD12507Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12508,this.CCMD12508Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12509,this.CCMD12509Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12510,this.CCMD12510Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12511,this.CCMD12511Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12512,this.CCMD12512Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12513,this.CCMD12513Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12514,this.CCMD12514Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12515,this.CCMD12515Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12516,this.CCMD12516Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12517,this.CCMD12517Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12520,this.CCMD12520Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12521,this.CCMD12521Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12600,this.CCMD12600Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD12601,this.CCMD12601Request,this),this.addEventListener(GuildEvtName.CCMD13700,this.CCMD13700Request,this),this.addEventListener(GuildEvtName.CCMD13701,this.CCMD13701Request,this),this.addEventListener(GuildEvtName.CCMD13702,this.CCMD13702Request,this),this.addEventListener(GuildEvtName.CCMD13710,this.CCMD13710Request,this),this.addEventListener(EventName.RED_DOTS+RedDotsModel.ID_2012,this.showRedDot,this),this.addEventListener(EventName.RED_DOTS+RedDotsModel.ID_2015,this.showRedDot,this),this.addEventListener(EventName.RED_DOTS+RedDotsModel.ID_2017,this.showRedDot,this),this.addEventListener(EventName.SCENE_CHANGE,this.sceneChangeHandler,this),GameDispatcher.getInstance().addEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.updateFixNumChange,this)},s.addCmdHandler=function(){var e=this;this.addCmdListener(12500,function(t){e.SCMD12500Response(t)},this),this.addCmdListener(12502,function(t){e.SCMD12502Response(t)},this),this.addCmdListener(12503,function(t){e.SCMD12503Response(t)},this),this.addCmdListener(12504,function(t){e.SCMD12504Response(t)},this),this.addCmdListener(12505,function(t){e.SCMD12505Response(t)},this),this.addCmdListener(12507,function(t){e.SCMD12507Response(t)},this),this.addCmdListener(12509,function(t){e.SCMD12509Response(t)},this),this.addCmdListener(12513,function(t){e.SCMD12513Response(t)},this),this.addCmdListener(12515,function(t){e.SCMD12515Response(t)},this),this.addCmdListener(12516,function(t){e.SCMD12516Response(t)},this),this.addCmdListener(12519,function(t){e.SCMD12519Response(t)},this),this.addCmdListener(12600,function(t){e.SCMD12600Response(t)},this),this.addCmdListener(13700,function(t){e.SCMD13700Response(t)},this),this.addCmdListener(13701,function(t){e.SCMD13701Response(t)},this),this.addCmdListener(13710,function(t){e.SCMD13710Response(t)},this)},s.CCMD12522=function(){RoleModel.getInstance().getRoleCommon().guild_id>0&&FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE12500)<=0&&this.sendSocketData(12522)},s.CCMD12500Request=function(){this.sendSocketData(12500)},s.CCMD12501Request=function(e){var t=new CCMD12501;t.name=e.data.name,t.level=e.data.level,this.sendSocketData(12501,t)},s.CCMD12502Request=function(e){var t=new CCMD12502;t.name=e.data,this.sendSocketData(12502,t)},s.CCMD12503Request=function(e){var t=new CCMD12503;t.guild_id=e.data,this.sendSocketData(12503,t)},s.CCMD12504Request=function(){this.sendSocketData(12504)},s.CCMD12505Request=function(e){var t=new CCMD12505;t.type=e.data.type,t.role_id=e.data.id,this.sendSocketData(12505,t)},s.CCMD12506Request=function(e){var t=new CCMD12506;t.type=e.data,this.sendSocketData(12506,t)},s.CCMD12507Request=function(e){var t=new CCMD12507;t.role_id=e.data,this.sendSocketData(12507,t)},s.CCMD12508Request=function(){this.sendSocketData(12508)},s.CCMD12509Request=function(){this.sendSocketData(12509)},s.CCMD12510Request=function(e){var t=new CCMD12510;t.position=e.data.pos,t.role_id=e.data.id,this.sendSocketData(12510,t)},s.CCMD12511Request=function(e){var t=new CCMD12511;t.power=e.data,this.sendSocketData(12511,t),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12519_UPDATE,e))},s.CCMD12512Request=function(e){var t=new CCMD12512;t.flag=e.data,this.sendSocketData(12512,t)},s.CCMD12513Request=function(e){var t=new CCMD12513;t.name=e.data,this.sendSocketData(12513,t),this._guildManger&&(this._guildManger.isPop=!1)},s.CCMD12514Request=function(e){var t=new CCMD12514;t.notice=e.data,this.sendSocketData(12514,t),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12519_UPDATE,e))},s.CCMD12515Request=function(){this.sendSocketData(12515)},s.CCMD12516Request=function(e){this.sendSocketData(12516)},s.CCMD12517Request=function(e){var t=new CCMD12517;t.type=e.data,this.sendSocketData(12517,t)},s.CCMD12519Request=function(){this.sendSocketData(12519)},s.CCMD12520Request=function(){this.sendSocketData(12520)},s.CCMD12521Request=function(){this.sendSocketData(12521)},s.CCMD12600Request=function(e){var t=new CCMD12600;t.parter_id=e.data,this.sendSocketData(12600,t)},s.CCMD12601Request=function(e){var t=new CCMD12601;t.parter_id=e.data.id,t.skill_id=e.data.skill_id,this.sendSocketData(12601,t)},s.CCMD13700Request=function(){this.sendSocketData(13700)},s.CCMD13701Request=function(){this.sendSocketData(13701)},s.CCMD13702Request=function(){this.sendSocketData(13702)},s.CCMD13710Request=function(){this.sendSocketData(13710)},s.SCMD12500Response=function(e){GuildModel.getInstance().setGuildList(e.guild_list),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12500_UPDATE,e.guild_list))},s.SCMD12502Response=function(e){this.initData()},s.SCMD12503Response=function(e){e.guild_id>0?(RoleModel.getInstance().changeGuildID(e.guild_id),RoleModel.getInstance().changeGuildName(e.guild_name),RoleModel.getInstance().changeGuildPosition(e.position),this._guildList&&this._guildList.isPop&&(this._guildList.isPop=!1),this.openGuildMap(),RoleModel.getInstance().getRoleCommon().level<=TaskModel.getInstance().guildGuideLvl&&this.CCMD12522()):this.initData()},s.SCMD12504Response=function(e){GuildModel.getInstance().setApplysList(e.guild_applys),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12504_UPDATE))},s.SCMD12505Response=function(e){GuildModel.getInstance().delApplysList(e.role_id),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12504_UPDATE))},s.SCMD12507Response=function(e){e.role_id==RoleModel.getInstance().getRoleCommon().role_id?this.initData():(GuildModel.getInstance().delGuildMembers(e.role_id),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12509_UPDATE)))},s.SCMD12509Response=function(e){GuildModel.getInstance().setGuildMembers(e.guild_members),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12509_UPDATE))},s.SCMD12513Response=function(e){GuildModel.getInstance().setGuildName(e.guild_name),RoleModel.getInstance().changeGuildName(e.guild_name),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12513_UPDATE))},s.SCMD12515Response=function(e){this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12515_UPDATE,e.guild_logs))},s.SCMD12516Response=function(e){GuildModel.getInstance().updateGuildBuild(e),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12516_UPDATE,e))},s.SCMD12519Response=function(e){GuildModel.getInstance().setGuildInfo(e),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12519_UPDATE,e))},s.SCMD12600Response=function(e){GuildModel.getInstance().setGuildSkillData(e),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12600_UPDATE,e.guild_skillrooms))},s.SCMD13700Response=function(e){this.dispatchEvent(new ParamEvent(GuildEvtName.CCMD13700_UPDATE,e))},s.SCMD13701Response=function(e){this.dispatchEvent(new ParamEvent(GuildEvtName.CCMD13701_UPDATE,e))},s.SCMD13710Response=function(e){this.dispatchEvent(new ParamEvent(GuildEvtName.CCMD13710_UPDATE,e.guild_shop_logs))},s.openGuildMap=function(){FunctionOpenModel.getInstance().check(FunctionOpenModel.GUILD)&&(RoleModel.getInstance().getRoleCommon().guild_id>0?(this._guildMap||(this._guildMap=new GuildMapView,this._guildMap.addEventListener(EventName.WINDOW_DISPOSE,this.disposeMapView,this)),GuildModel.getInstance().isGuildMapShow=!0,this._guildMap.updateData(),GameContent.gameLayers.winMapLayer.addChild(this._guildMap),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_SHOW_RIGHTTOP,{state:!1})),this.dispatchEvent(new ParamEvent(EventName.CLOSE_NOVICE_OTHER_VIEW))):(this._guildList||(this._guildList=new GuildListWindow,this._guildList.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._guildList.isPop=!this._guildList.isPop,this._guildList.isPop&&(this.CCMD12500Request(),this._guildList.updateData())))},s.disposeMapView=function(e){this._guildMap&&(this._guildMap.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeMapView,this),this._guildMap.dispose(),this._guildMap=null)},i(s,"isOpenGuildMap",function(){return this._guildMap&&this._guildMap.parent?!0:!1}),s.openView=function(e){this.setIndex(e.data)},s.setIndex=function(e){switch(e){case 1:this._shop||(this._shop=new GuildShopWindow,this._shop.addEventListener(EventName.WINDOW_DISPOSE,this.disposeShopView,this)),this._shop.isPop=!this._shop.isPop;
break;case 2:this.dispatchEvent(new ParamEvent(CityWarEvtName.SHOW_CITYWAR_VIEW));break;case 3:this._guildManger||(this._guildManger=new GuildManagerWindow,this._guildManger.addEventListener(EventName.WINDOW_DISPOSE,this.disposeMangerView,this)),this._guildManger.isPop?this._guildManger.isPop=!1:(this._guildManger.setIndex(),this._guildManger.isPop=!0,this.CCMD12515Request(),this.CCMD12519Request());break;case 5:this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_DONATE));break;case 6:this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_FUBEN));break;case 7:this._skill||(this._skill=new GuildSkillWindow,this._skill.addEventListener(EventName.WINDOW_DISPOSE,this.disposeSkillView,this)),this._skill.isPop=!this._skill.isPop;break;case 8:this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_FARM));break;case 9:this._guildCreate||(this._guildCreate=new GuildCreateWindow,this._guildCreate.addEventListener(EventName.WINDOW_DISPOSE,this.disposeCreateView,this)),this._guildCreate.isPop2=!this._guildCreate.isPop;break;case 11:this._guildNameEdit||(this._guildNameEdit=new GuildNameEditWindow,this._guildNameEdit.addEventListener(EventName.WINDOW_DISPOSE,this.disposeNameView,this)),this._guildNameEdit.isPop2=!this._guildNameEdit.isPop,this._guildNameEdit.isPop&&this._guildNameEdit.updateData();break;case 12:this._guildFightEdit||(this._guildFightEdit=new GuildFightEditWindow,this._guildFightEdit.addEventListener(EventName.WINDOW_DISPOSE,this.disposeFightView,this)),this._guildFightEdit.isPop2=!this._guildFightEdit.isPop,this._guildFightEdit.isPop&&this.CCMD12504Request();break;case 13:this._guildGonggaoEdit||(this._guildGonggaoEdit=new GuildGonggaoEditWindow,this._guildGonggaoEdit.addEventListener(EventName.WINDOW_DISPOSE,this.disposeGonggaoView,this)),this._guildGonggaoEdit.isPop2=!this._guildGonggaoEdit.isPop,this._guildGonggaoEdit.isPop&&this._guildGonggaoEdit.updateData();break;case 14:this._guildOpt||(this._guildOpt=new GuildOptWindow,this._guildOpt.addEventListener(EventName.WINDOW_DISPOSE,this.disposeOptView,this)),this._guildOpt.isPop2=!this._guildOpt.isPop,this._guildOpt.isPop&&this._guildOpt.updateData();break;case 15:this._guildOut||(this._guildOut=new GuildOutWindow,this._guildOut.addEventListener(EventName.WINDOW_DISPOSE,this.disposeOutView,this)),this._guildOut.isPop2=!this._guildOut.isPop;break;case 16:this._guildEnd||(this._guildEnd=new GuildEndWindow,this._guildEnd.addEventListener(EventName.WINDOW_DISPOSE,this.disposeEndView,this)),this._guildEnd.isPop2=!this._guildEnd.isPop;break;case 17:this._shopLog||(this._shopLog=new GuildShopLogWindow,this._shopLog.addEventListener(EventName.WINDOW_DISPOSE,this.disposeShopLogView,this)),this._shopLog.isPop2=!this._shopLog.isPop}},s.sceneChangeHandler=function(e){!SceneModel.getInstance().isHookSmall()&&this._guildMap&&(this._guildMap.dispose(),this._guildMap=null)},s.showRedDot=function(e){var t=!1;(RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2012)||RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2015)||RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2017))&&(t=!0),TipsWordManager.getInstance().showRedDots(TipsWord.GUILD,t)},s.initData=function(){this._guildMap&&(this._guildMap.dispose(),this._guildMap=null),RoleModel.getInstance().changeGuildID(0),RoleModel.getInstance().changeGuildName(""),GuildModel.getInstance().dispose(),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12507_UPDATE)),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_SHOW_RIGHTTOP,{state:!0})),GuildModel.getInstance().delAllRed(),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_SHOW_RED_ICON,!1))},s.disposeView=function(e){this._guildList&&(this._guildList.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._guildList.dispose(),this._guildList=null)},s.disposeShopView=function(e){this._shop&&(this._shop.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeShopView,this),this._shop.dispose(),this._shop=null)},s.disposeMangerView=function(e){this._guildManger&&(this._guildManger.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeMangerView,this),this._guildManger.dispose(),this._guildManger=null)},s.disposeSkillView=function(e){this._skill&&(this._skill.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeSkillView,this),this._skill.dispose(),this._skill=null)},s.disposeCreateView=function(e){this._guildCreate&&(this._guildCreate.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeCreateView,this),this._guildCreate.dispose(),this._guildCreate=null)},s.disposeNameView=function(e){this._guildNameEdit&&(this._guildNameEdit.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeNameView,this),this._guildNameEdit.dispose(),this._guildNameEdit=null)},s.disposeFightView=function(e){this._guildFightEdit&&(this._guildFightEdit.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeFightView,this),this._guildFightEdit.dispose(),this._guildFightEdit=null)},s.disposeGonggaoView=function(e){this._guildGonggaoEdit&&(this._guildGonggaoEdit.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeGonggaoView,this),this._guildGonggaoEdit.dispose(),this._guildGonggaoEdit=null)},s.disposeOptView=function(e){this._guildOpt&&(this._guildOpt.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeOptView,this),this._guildOpt.dispose(),this._guildOpt=null)},s.disposeOutView=function(e){this._guildOut&&(this._guildOut.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeOutView,this),this._guildOut.dispose(),this._guildOut=null)},s.disposeEndView=function(e){this._guildEnd&&(this._guildEnd.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeEndView,this),this._guildEnd.dispose(),this._guildEnd=null)},s.disposeShopLogView=function(e){this._shopLog&&(this._shopLog.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeShopLogView,this),this._shopLog.dispose(),this._shopLog=null)},s.updateFixNumChange=function(e){var t=e.data.data;t.type==FixedNumModel.FIXED_NUM_TYPE12500&&1==t.value&&RoleModel.getInstance().getRoleCommon().level<=TaskModel.getInstance().guildGuideLvl&&(TaskModel.getInstance().isGuildGuide=!0,this.dispatchEvent(new ParamEvent(EventName.GUILD_GUIDE_START)))},t}(BaseContol);egret.registerClass(GuildControl,"GuildControl");var GuildDonateControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t),this.changeLv()},n.addEventHandler=function(){this.addEventListener(GuildEvtName.GUILD_OPEN_DONATE,this.openView,this),this.addEventListener(GuildEvtName.GUILD_OPEN_RED,this.openRedView,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_CHANGE,this.changeLv,this),this.addEventListener(GuildEvtName.GUILD_CCMD13400,this.CCMD13400Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD13401,this.CCMD13401Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD13410,this.CCMD13410Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD13411,this.CCMD13411Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD13420,this.CCMD13420Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD13421,this.CCMD13421Request,this),this.addEventListener(GuildEvtName.GUILD_CCMD13422,this.CCMD13422Request,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(13400,function(t){e.SCMD13400Response(t)},this),this.addCmdListener(13410,function(t){e.SCMD13410Response(t)},this),this.addCmdListener(13411,function(t){e.SCMD13411Response(t)},this),this.addCmdListener(13420,function(t){e.SCMD13420Response(t)},this),this.addCmdListener(13421,function(t){e.SCMD13421Response(t)},this),this.addCmdListener(13422,function(t){e.SCMD13422Response(t)},this),this.addCmdListener(13430,function(){e.SCMD13430Response()},this)},n.CCMD13400Request=function(){this.sendSocketData(13400)},n.CCMD13401Request=function(e){var t=new CCMD13401;t.type=e.data,this.sendSocketData(13401,t)},n.CCMD13410Request=function(){this.sendSocketData(13410)},n.CCMD13411Request=function(){this.sendSocketData(13411)},n.CCMD13420Request=function(){this.sendSocketData(13420)},n.CCMD13421Request=function(e){var t=new CCMD13421;t.red_id=e.data,this.sendSocketData(13421,t)},n.CCMD13422Request=function(e){var t=new CCMD13422;t.red_id=e.data,this.sendSocketData(13422,t)},n.SCMD13400Response=function(e){GuildModel.getInstance().donateData=e,this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD13400_UPDATE,e))},n.SCMD13410Response=function(e){this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD13410_UPDATE,e.guild_donate_logs))},n.SCMD13411Response=function(e){this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD13411_UPDATE,e.guild_donate_logs))},n.SCMD13420Response=function(e){GuildModel.getInstance().setRedArr(e.guild_reds),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_SHOW_RED_ICON,e.guild_reds.length>0)),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD13420_UPDATE))},n.SCMD13421Response=function(e){GuildModel.getInstance().delRed(e.red_id),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD13421_UPDATE,e.gain_count)),this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_SHOW_RED_ICON,GuildModel.getInstance().getRedArr().length>0))},n.SCMD13422Response=function(e){this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD13422_UPDATE,e.guild_red_gets))},n.SCMD13430Response=function(){this._particle||(this._particle=new Particle(5,["guild_donate_effect1","guild_donate_effect2","guild_donate_effect3","guild_donate_effect4","guild_donate_effect5","guild_donate_effect6","guild_donate_effect7"])),this._particle.start()},n.changeLv=function(){var e=RoleModel.getInstance().getRoleCommon().level;e>=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.GUILD).open_level&&(RoleModel.getInstance().removeEventListener(RoleModel.ROLE_LV_CHANGE,this.changeLv,this),this.CCMD13420Request())},n.openView=function(e){return 0==RoleModel.getInstance().getRoleCommon().guild_id?void Message.show("功能未开启"):(this._donateView||(this._donateView=new GuildDonateWindow,this._donateView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._donateView.isPop=!this._donateView.isPop,void(this._donateView.isPop&&this._donateView.setIndex()))},n.disposeView=function(e){this._donateView&&(this._donateView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._donateView.dispose(),this._donateView=null)},n.openRedView=function(e){this._redView||(this._redView=new GuildDonateRedWindow,this._redView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeRedView,this)),this._redView.isPop=!this._redView.isPop,this._redView.isPop&&this._redView.setIndex()},n.disposeRedView=function(e){this._redView&&(this._redView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeRedView,this),this._redView.dispose(),this._redView=null)},t}(BaseContol);egret.registerClass(GuildDonateControl,"GuildDonateControl");var GuildFarmControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t);TimerManager.getInstance().getTimerKey();TimerManager.getInstance().add(18e5,this.CCMD14920Request,this)},n.addEventHandler=function(){this.addEventListener(GuildEvtName.GUILD_OPEN_FARM,this.openView,this),this.addEventListener(EventName.OPEN_HELP_WINDOW,this.openHelpView,this),this.addEventListener(GuildEvtName.CCMD14900,this.CCMD14900Request,this),this.addEventListener(GuildEvtName.CCMD14901,this.CCMD14901Request,this),this.addEventListener(GuildEvtName.CCMD14902,this.CCMD14902Request,this),this.addEventListener(GuildEvtName.CCMD14903,this.CCMD14903Request,this),this.addEventListener(GuildEvtName.CCMD14904,this.CCMD14904Request,this),this.addEventListener(GuildEvtName.CCMD14905,this.CCMD14905Request,this),this.addEventListener(GuildEvtName.CCMD14910,this.CCMD14910Request,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(14900,function(t){e.SCMD14900Response(t)},this),this.addCmdListener(14910,function(t){e.SCMD14910Response(t)},this)},n.CCMD14900Request=function(){this.sendSocketData(14900)},n.CCMD14901Request=function(e){var t=new CCMD14901;t.role_id=e.data,this.sendSocketData(14901,t)},n.CCMD14902Request=function(){this.sendSocketData(14902)},n.CCMD14903Request=function(){this.sendSocketData(14903)},n.CCMD14904Request=function(e){var t=new CCMD14904;t.role_id=e.data,this.sendSocketData(14904,t)},n.CCMD14905Request=function(e){var t=new CCMD14905;t.role_id=e.data,this.sendSocketData(14905,t)},n.CCMD14910Request=function(){this.sendSocketData(14910)},n.CCMD14920Request=function(){RoleModel.getInstance().getRoleCommon().guild_id>0&&this.sendSocketData(14920)},n.SCMD14900Response=function(e){GuildModel.getInstance().setFarmData(e),this.dispatchEvent(new ParamEvent(GuildEvtName.CCMD14900_UPDATE,e))},n.SCMD14910Response=function(e){this.dispatchEvent(new ParamEvent(GuildEvtName.CCMD14910_UPDATE,e.guild_farm_logs))},n.openView=function(e){this._view||(this._view=new GuildFarmWindow,this._view.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._view.isPop=!this._view.isPop},n.disposeView=function(e){this._view&&(this._view.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._view.dispose(),this._view=null)},n.openHelpView=function(e){this._help||(this._help=new HelpWindow,this._help.addEventListener(EventName.WINDOW_DISPOSE,this.disposeHelpView,this)),this._help.isPop2=!this._help.isPop,this._help.isPop&&this._help.setType(e.data)},n.disposeHelpView=function(e){this._help&&(this._help.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeHelpView,this),this._help.dispose(),this._help=null)},t}(BaseContol);egret.registerClass(GuildFarmControl,"GuildFarmControl");var GuildFubenControl=function(e){function t(){e.call(this),this._bossDropSi=0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addEventHandler=function(){this.addEventListener(GuildEvtName.GUILD_OPEN_FUBEN,this.openView,this),this.addEventListener(GuildEvtName.GUILD_CLOSE_FUBEN,this.closeView,this),this.addEventListener(GuildEvtName.GUILD_OPEN_FUBEN_SAO,this.openSaoView,this),this.addEventListener(GuildEvtName.CCMD16300,this.CCMD16300Request,this),this.addEventListener(GuildEvtName.CCMD16301,this.CCMD16301Request,this),this.addEventListener(GuildEvtName.CCMD16302,this.CCMD16302Request,this),this.addEventListener(GuildEvtName.CCMD16303,this.CCMD16303Request,this),this.addEventListener(GuildEvtName.CCMD16304,this.CCMD16304Request,this),this.addEventListener(GuildEvtName.CCMD16310,this.CCMD16310Request,this),this.addEventListener(GuildEvtName.CCMD16311,this.CCMD16311Request,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(16300,function(t){e.SCMD16300Response(t)},this),this.addCmdListener(16301,function(t){e.SCMD16301Response(t)},this),this.addCmdListener(16302,function(t){e.SCMD16302Response(t)},this),this.addCmdListener(16304,function(t){e.SCMD16304Response(t)},this),this.addCmdListener(16310,function(t){e.SCMD16310Response(t)},this),this.addCmdListener(16311,function(t){e.SCMD16311Response(t)},this)},n.CCMD16300Request=function(){this.sendSocketData(16300)},n.CCMD16301Request=function(){this.sendSocketData(16301)},n.CCMD16302Request=function(){this.sendSocketData(16302)},n.CCMD16303Request=function(e){var t=new CCMD16303;t.flag=e.data,this.sendSocketData(16303,t)},n.CCMD16304Request=function(){this.sendSocketData(16304)},n.CCMD16310Request=function(){this.sendSocketData(16310)},n.CCMD16311Request=function(){this.sendSocketData(16311)},n.SCMD16300Response=function(e){GuildModel.getInstance().setFubenData(e),this.dispatchEvent(new ParamEvent(GuildEvtName.CCMD16300_UPDATE,e))},n.SCMD16301Response=function(e){this.dispatchEvent(new ParamEvent(GuildEvtName.CCMD16301_UPDATE,e))},n.SCMD16302Response=function(e){this.dispatchEvent(new ParamEvent(GuildEvtName.CCMD16302_UPDATE,e.guild_fuben_sorts))},n.SCMD16304Response=function(e){this.dispatchEvent(new ParamEvent(GuildEvtName.CCMD16304_UPDATE,e))},n.SCMD16310Response=function(e){var t=Tools.convertDropList(e.drop_list);SceneModel.getInstance().showResult(1,t),GuildModel.getInstance().isContinueFuben=!0;var i=GuildModel.getInstance().getFubenData();i.level++,GuildModel.getInstance().setFubenData(i)},n.SCMD16311Response=function(e){0==e.flag&&(GuildModel.getInstance().isContinueFuben=!1,this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_FAIL,{dropList:[]})))},n.closeView=function(e){this._fuben&&(this._fuben.isPop=!1)},n.openView=function(e){return HuoDongDailyModel.getInstance().kaiFuDay<2?void Message.show("开服第2天开启"):(this._fuben||(this._fuben=new GuildFubenWindow,this._fuben.addEventListener(EventName.WINDOW_DISPOSE,this.disposeFubenView,this)),this._fuben.isPop=!this._fuben.isPop,void(this._fuben&&this._fuben.isPop&&(this.CCMD16300Request(),this.CCMD16301Request(),this.CCMD16302Request())))},n.disposeFubenView=function(e){this._fuben&&(this._fuben.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeFubenView,this),this._fuben.dispose(),this._fuben=null)},n.openSaoView=function(e){this._sao||(this._sao=new GuildFubenSaoWindow,this._sao.addEventListener(EventName.WINDOW_DISPOSE,this.disposeFubenView,this)),this._sao.isPop2=!0,this.CCMD16304Request()},n.disposeSaoView=function(e){this._sao&&(this._sao.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeSaoView,this),this._sao.dispose(),this._sao=null)},t}(BaseContol);egret.registerClass(GuildFubenControl,"GuildFubenControl");var HeFuControl=function(e){function t(){e.call(this),this._model=HeFuModel.getInstance()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){var e=this;this.addCmdListener(18500,function(t){e.SCMD18500Response(t)},this),this.addCmdListener(18800,function(t){e.SCMD18800Response(t)},this),this.addCmdListener(18600,function(t){e.SCMD18600Response(t)},this),this.addCmdListener(18900,function(t){e.SCMD18900Response(t)},this),this.addCmdListener(19e3,function(t){e.SCMD19000Response(t)},this),this.addCmdListener(19100,function(t){e.SCMD19100Response(t)},this)},n.addEventHandler=function(){this.addEventListener(HeFuEvtName.CCMD18500,this.request18500Handler,this),this.addEventListener(HeFuEvtName.CCMD18501,this.request18501Handler,this),this.addEventListener(HeFuEvtName.CCMD18600,this.request18600Handler,this),this.addEventListener(HeFuEvtName.CCMD18601,this.request18601Handler,this),this.addEventListener(HeFuEvtName.CCMD18700,this.request18700Handler,this),this.addEventListener(HeFuEvtName.CCMD18701,this.request18701Handler,this),this.addEventListener(HeFuEvtName.CCMD18702,this.request18702Handler,this),this.addEventListener(HeFuEvtName.CCMD18800,this.request18800Handler,this),this.addEventListener(HeFuEvtName.CCMD18801,this.request18801Handler,this),this.addEventListener(HeFuEvtName.CCMD18900,this.request18900Handler,this),this.addEventListener(HeFuEvtName.CCMD19000,this.request19000Handler,this),this.addEventListener(HeFuEvtName.CCMD19001,this.request19001Handler,this),this.addEventListener(HeFuEvtName.CCMD19100,this.request19100Handler,this),this.addEventListener(HeFuEvtName.CCMD19101,this.request19101Handler,this),this.addEventListener(HeFuEvtName.INIT_MERGE_TIME,this.initMergeTimeHandler,this),this.addEventListener(EventName.RED_DOTS+RedDotsModel.ID_2023,this.updateRedDotData,this)},n.requestAll=function(){},n.request18500Handler=function(e){this.sendSocketData(18500)},n.SCMD18500Response=function(e){this._model.setHFLoginAwardData(e),this.checkIconRedDot()},n.request18501Handler=function(e){this.sendSocketData(18501)},n.request18600Handler=function(e){this.sendSocketData(18600)},n.SCMD18600Response=function(e){this._model.setHFBossPointData(e),this.checkIconRedDot()},n.request18601Handler=function(e){this.sendSocketData(18601)},n.request18800Handler=function(e){this.sendSocketData(18800)},n.SCMD18800Response=function(e){this._model.setHFXgData(e),this.checkIconRedDot()},n.request18801Handler=function(e){var t=new CCMD18801;t.gift_id=e.data.giftId,this.sendSocketData(18801,t)},n.request18700Handler=function(e){this.sendSocketData(18700)},n.request18701Handler=function(e){this.sendSocketData(18701)},n.request18702Handler=function(e){this.sendSocketData(18702)},n.request18900Handler=function(e){var t=new CCMD18900;t.type=e.data.type,this.sendSocketData(18900,t)},n.SCMD18900Response=function(e){this.dispatchEvent(new ParamEvent(HeFuEvtName.UPDATE_HF_TREASURE_INFO,{arr:e.drop_list}))},n.request19000Handler=function(e){this.sendSocketData(19e3)},n.SCMD19000Response=function(e){this._model.setHFExchangeData(e),this.checkIconRedDot()},n.request19001Handler=function(e){var t=new CCMD19001;t.cfg_id=e.data.id,this.sendSocketData(19001,t)},n.request19100Handler=function(e){this.sendSocketData(19100)},n.SCMD19100Response=function(e){this._model.setHFChargeData(e),this.checkIconRedDot()},n.request19101Handler=function(e){var t=new CCMD19101;t.cfg_id=e.data.id,this.sendSocketData(19101,t)},n.updateRedDotData=function(){this.checkIconRedDot()},n.addHeFuIcon=function(){null==this._hefuIcon&&(this._hefuIcon=TipsWordManager.getInstance().addWordIcon("btn_hefu"),this._hefuIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickTipword,this))},n.removeHeFuIcon=function(){this._hefuIcon&&(TipsWordManager.getInstance().removeIcon("btn_hefu"),this._hefuIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickTipword,this),this._hefuIcon=null)},n.clickTipword=function(){this.showHeFuWindow(null)},n.initMergeTimeHandler=function(){1==this._model.checkAddHFIcon()?this.addHeFuIcon():this.removeHeFuIcon()},n.checkIconRedDot=function(){TipsWordManager.getInstance().getTipsWord(TipsWord.HEFU);TipsWordManager.getInstance().showRedDots(TipsWord.HEFU,this._model.checkIconRedDot())},n.showHeFuWindow=function(e){null==this._hefuWindow&&(this._hefuWindow=new HeFuWindow,this._hefuWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeHeFuWindow,this)),this._hefuWindow.isPop=!this._hefuWindow.isPop},n.disposeHeFuWindow=function(e){this._hefuWindow&&(this._hefuWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeHeFuWindow,this),this._hefuWindow.dispose(),this._hefuWindow=null)},t}(BaseContol);egret.registerClass(HeFuControl,"HeFuControl");var HuoDongDailyControl=function(e){function t(){e.call(this),this._view=null,this._kfhdView=null,this._model=HuoDongDailyModel.getInstance()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t),this.request14300(),TimerManager.getInstance().add(200,this.requestAllInfo,this)},n.addEventHandler=function(){this.addEventListener(HuoDongDailyEvtName.SHOW_HDDAILY_VIEW,this.showKFHDView,this),this.addEventListener(HuoDongDailyEvtName.SHOW_ONE_RMB_VIEW,this.showOneRmbView,this),this.addEventListener(HuoDongDailyEvtName.SHOW_KFHD_TREASURE_AWARD_VIEW,this.showKfhdTreasureAwardView,this),this.addEventListener(HuoDongDailyEvtName.SHOW_KFHD_VIEW,this.showView,this),this.addEventListener(HuoDongDailyEvtName.SHOW_DAILY_CHARGE_VIEW,this.showDailyChargeView,this),this.addEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.dailyDataChange,this),this.addEventListener(PlayerBaseVO.CHANGE_FIGHTVALUE,this.fightChange,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_UP,this.onLevelupHandler,this),SceneModel.getInstance().addEventListener(SceneModel.UPDATE_SCENE_WAVE,this.waveChange,this),this.addEventListener(HuoDongDailyEvtName.REQUEST_14100,this.request14100Handler,this),this.addEventListener(HuoDongDailyEvtName.REQUEST_14101,this.request14101Handler,this),this.addEventListener(HuoDongDailyEvtName.REQUEST_14200,this.request14200Handler,this),this.addEventListener(HuoDongDailyEvtName.REQUEST_14201,this.request14201Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_14310,this.request14310Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_14311,this.request14311Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_14320,this.request14320Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_16600,this.request16600Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_16601,this.request16601Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_16100,this.request16100Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_16800,this.request16800Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_16801,this.request16801Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_17000,this.request17000Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_16400,this.request16400Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_18100,this.request18100Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_18101,this.request18101Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_18110,this.request18110Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_18200,this.request18200Handler,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_18201,this.request18201Handler,this),this.addEventListener(HuoDongDailyEvtName.OPEN_HUODONG_VIEW,this.showHuoDongView,this),this.addEventListener(HuoDongDailyEvtName.REQEUST_21500,this.request21500Handler,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(14100,function(t){e.SCMD14100Response(t)},this),this.addCmdListener(14200,function(t){e.SCMD14200Response(t)},this),this.addCmdListener(14300,function(t){e.SCMD14300Response(t)},this),this.addCmdListener(14310,function(t){e.SCMD14310Response(t)},this),this.addCmdListener(14311,function(t){e.SCMD14311Response(t)},this),this.addCmdListener(16600,function(t){e.SCMD16600Response(t)},this),this.addCmdListener(16100,function(t){e.SCMD16100Response(t)},this),this.addCmdListener(16400,function(t){e.SCMD16400Response(t)},this),this.addCmdListener(16800,function(t){e.SCMD16800Response(t)},this),this.addCmdListener(18100,function(t){e.SCMD18100Response(t)},this),this.addCmdListener(18110,function(t){e.SCMD18110Response(t)},this),this.addCmdListener(18200,function(t){e.SCMD18200Response(t)},this)},n.requestAllInfo=function(){if(null==this._requestList&&(this._requestList=this._model.getClientData(HuoDongDailyModel.DAILY).concat()),0==this._requestList.length)return void TimerManager.getInstance().remove(200,this.requestAllInfo,this);for(var e,t,i=this._requestList.shift(),n=0;n<i.activityList.length;n++){i.type==HuoDongDailyModel.CONSUME?(e=this._model.getHDDailyConsume(i.activityList[0]),this.request14100(e.type)):i.type==HuoDongDailyModel.TARGET&&(t=this._model.getHDDailyTarget(i.activityList[0]),this.request14200(t.type));break}},n.showKFHDView=function(e){null==this._kfhdView&&(this._kfhdView=new KaiFuHuoDongWindow,this._kfhdView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeKFHDView,this)),this._kfhdView.isPop=!this._kfhdView.isPop},n.disposeKFHDView=function(e){this._kfhdView&&(this._kfhdView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeKFHDView,this),this._kfhdView.dispose(),this._kfhdView=null)},n.showHuoDongView=function(e){var t=this;t.showView(null)},n.showView=function(e){var t=this;null==t._view&&(t._view=new HuoDongDailyWindow,t._view.addEventListener(EventName.WINDOW_DISPOSE,this.disposeHDView,this)),t._view.isPop=!t._view.isPop},n.disposeHDView=function(e){this._view&&(this._view.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeHDView,this),this._view.dispose(),this._view=null)},n.showDailyChargeView=function(e){var t=this;null==t._dailyChargeView&&(t._dailyChargeView=new DailyChargeView,t._dailyChargeView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeDailyChargeView,this)),t._dailyChargeView.isPop=!t._dailyChargeView.isPop},n.disposeDailyChargeView=function(e){this._dailyChargeView&&(this._dailyChargeView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeDailyChargeView,this),this._dailyChargeView.dispose(),this._dailyChargeView=null)},n.clickOneRmbIcon=function(){this.showOneRmbView(null)},n.showOneRmbView=function(e){var t=this;null==t._oneRmbView&&(t._oneRmbView=new OneRmbWindow,t._oneRmbView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeOneRmbView,this)),t._oneRmbView.isPop=!t._oneRmbView.isPop},n.disposeOneRmbView=function(){this._oneRmbView&&(this._oneRmbView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeOneRmbView,this),this._oneRmbView.dispose(),this._oneRmbView=null)},n.showKfhdTreasureAwardView=function(e){var t=this;null==t._kfhdTreasureAwardView&&(t._kfhdTreasureAwardView=new KFHDTreasureAwardView,t._kfhdTreasureAwardView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeKfhdTreasureAwardView,this)),t._kfhdTreasureAwardView.isPop2=!t._kfhdTreasureAwardView.isPop,1==t._kfhdTreasureAwardView.isPop&&t._kfhdTreasureAwardView.setData(e.data.node,e.data.content)},n.disposeKfhdTreasureAwardView=function(){this._kfhdTreasureAwardView&&(this._kfhdTreasureAwardView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeKfhdTreasureAwardView,this),this._kfhdTreasureAwardView.dispose(),this._kfhdTreasureAwardView=null)},n.SCMD14100Response=function(e){this._model.setDailyConsumeRewardStatu(e),this._model.setDailyReward(e),TipsWordManager.getInstance().showRedDots(TipsWord.FULI,this._model.checkDailyHuoDongOk())},n.request14100Handler=function(e){var t=e.data.type;this.request14100(t)},n.request14100=function(e){var t=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.HUODONGDAILY);if(!(null==t||RoleModel.getInstance().getRoleCommon().level<t.open_level)){var i=new CCMD14100;i.type=e,this.sendSocketData(14100,i)}},n.request14101Handler=function(e){var t=e.data.id,i=e.data.type;this.request14101(t,i)},n.request14101=function(e,t){var i=new CCMD14101;i.award_id=e,i.type=t,this.sendSocketData(14101,i)},n.request14200Handler=function(e){var t=e.data.type;this.request14200(t)},n.request14200=function(e){var t=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.HUODONGDAILY);if(!(null==t||RoleModel.getInstance().getRoleCommon().level<t.open_level)){var i=new CCMD14200;i.type=e,this.sendSocketData(14200,i)}},n.SCMD14200Response=function(e){this._model.setDailyTargetRewardStatu(e),TipsWordManager.getInstance().showRedDots(TipsWord.FULI,this._model.checkDailyHuoDongOk())},n.request14201Handler=function(e){var t=e.data.id,i=e.data.type;this.request14201(t,i)},n.request14201=function(e,t){var i=new CCMD14201;i.award_id=e,i.type=t,this.sendSocketData(14201,i)},n.request14300=function(){this.sendSocketData(14300)},n.SCMD14300Response=function(e){this._model.setServerTime(e),this._model.reset(),this._kfhdView&&(this._kfhdView.isPop=!1,this._kfhdView.dispose(),this._kfhdView=null),this._model.checkAddKFHDIcon()&&(this.addKaiFuIcon(),this.requestKFRewardInfo()),this.dispatchEvent(new ParamEvent(HeFuEvtName.INIT_MERGE_TIME))},n.requestKFRewardInfo=function(){null==this._kfAList&&(this._kfAList=this._model.getKaiFuIconList().concat()),TimerManager.getInstance().remove(200,this.requestKFOneReward,this),TimerManager.getInstance().add(200,this.requestKFOneReward,this)},n.requestKFOneReward=function(){if(0==this._kfAList.length)return void TimerManager.getInstance().remove(200,this.requestKFOneReward,this);var e,t,i,n=this._kfAList.shift();if(n.type==HuoDongDailyModel.KFSTANDARD)for(e=n.activityList,t=0;t<e.length;t++){switch(i=this._model.getKFHDStandardVo(e[t]),this._standardType=i.type,i.type){case HuoDongDailyModel.WINGSTANDARD:WingModel.getInstance().addEventListener(WingEvtName.WING_LEVELUP,this.standardDataChange,this);break;case HuoDongDailyModel.LONGSTANDARD:FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_UPDATE_ONE_SPECIALEQUIP,this.standardDataChange,this);break;case HuoDongDailyModel.STONESTANDARD:this.addEventListener(BuildEvtName.BUILD_CCMD11810_UPDATE,this.standardDataChange,this);
break;case HuoDongDailyModel.MPSTANDARD:MeetPlayerModel.getInstance().addEventListener(MeetPlayerModel.UPDATE_MPPK_INFO,this.standardDataChange,this);break;case HuoDongDailyModel.WAVESTANDARD:SceneModel.getInstance().addEventListener(SceneModel.UPDATE_SCENE_WAVE,this.standardDataChange,this);break;case HuoDongDailyModel.ROUNDSTANDARD:RoleModel.getInstance().addEventListener(RoleModel.ROLE_ROUND_CHANGE,this.standardDataChange,this);break;case HuoDongDailyModel.FIGHTSTANDARD:this.addEventListener(PlayerBaseVO.CHANGE_FIGHTVALUE,this.standardDataChange,this)}this.request14311(i.type)}},n.addKaiFuIcon=function(){null==this._kfIcon&&(this._kfIcon=TipsWordManager.getInstance().addWordIcon("btn_kaifu"),this._kfIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showKaiFuHuoDongView,this))},n.checkKFIconOK=function(){this._kfIcon&&(this._kfIcon.showRedDot=this._model.checkKFIconOK())},n.showKaiFuHuoDongView=function(e){this.showKFHDView(null),this.dispatchEvent(new ParamEvent(EventName.CLOSE_NOVICE_OTHER_VIEW))},n.request14310Handler=function(e){var t=e.data.id;this.request14310(t)},n.request14310=function(e){var t=new CCMD14310;t.template_id=e,this.sendSocketData(14310,t)},n.SCMD14310Response=function(e){this.dispatchEvent(new ParamEvent(HuoDongDailyEvtName.UPDATE_MY_STANDARD))},n.request14311Handler=function(e){var t=e.data.type;this.request14311(t)},n.request14311=function(e){var t=new CCMD14311;t.type=e,this.sendSocketData(14311,t)},n.SCMD14311Response=function(e){this._model.myValue=e.value,this.dispatchEvent(new ParamEvent(HuoDongDailyEvtName.UPDATE_MY_STANDARD)),this.checkKFIconOK()},n.request14320Handler=function(e){var t=e.data.id;this.request14320(t)},n.request14320=function(e){var t=new CCMD14320;t.template_id=e,this.sendSocketData(14320,t)},n.request16600Handler=function(e){var t=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.HUODONGDAILY);null==t||RoleModel.getInstance().getRoleCommon().level<t.open_level||this.sendSocketData(16600)},n.SCMD16600Response=function(e){this._model.setKFHDChargeInfo(e),this.checkKFIconOK()},n.request16601Handler=function(e){var t=new CCMD16601;t.open_day=e.data.day,this.sendSocketData(16601,t)},n.request16100Handler=function(e){this.sendSocketData(16100)},n.SCMD16100Response=function(e){FixedNumModel.getInstance().setFixedServerInfo(e)},n.request16800Handler=function(e){this.sendSocketData(16800)},n.request16801Handler=function(e){this.sendSocketData(16801)},n.request18100Handler=function(e){this.sendSocketData(18100)},n.request18101Handler=function(e){var t=new CCMD18101;t.rmb=e.data.id,this.sendSocketData(18101,t)},n.SCMD18100Response=function(e){this._model.updateNodeRmbInfo(e),0==this._model.checkAddNodeRmbIcon()?this.removeOneRmbIcon():this.addOneRmbIcon(),this.checkKFIconOK()},n.addOneRmbIcon=function(){null==this._oneRmbIcon&&(this._oneRmbIcon=TipsWordManager.getInstance().addWordIcon("btn_yiyuan"),this._oneRmbIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickOneRmbIcon,this))},n.removeOneRmbIcon=function(){this._oneRmbIcon&&(TipsWordManager.getInstance().removeIcon("btn_yiyuan"),this._oneRmbIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickOneRmbIcon,this),this._oneRmbIcon=null)},n.request18110Handler=function(e){this.sendSocketData(18110)},n.SCMD18110Response=function(e){this._model.setNodeRmbCanBuy(e.flag)},n.request17000Handler=function(e){var t=new CCMD17000;t.cfg_id=e.data.id,this.sendSocketData(17e3,t)},n.SCMD16800Response=function(e){this._model.updateOneRmbInfo(e),1==e.flag&&e.rand_gold>0?this._oneRmbIcon&&(TipsWordManager.getInstance().removeIcon("btn_yiyuan"),this._oneRmbIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickOneRmbIcon,this),this._oneRmbIcon=null):null==this._oneRmbIcon&&(this._oneRmbIcon=TipsWordManager.getInstance().addWordIcon("btn_yiyuan"),this._oneRmbIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickOneRmbIcon,this))},n.request18200Handler=function(e){this.sendSocketData(18200)},n.request18201Handler=function(e){var t=new CCMD18201;t.cfg_id=e.data.day,this.sendSocketData(18201,t)},n.SCMD18200Response=function(e){this._model.setKFHDReChargeInfo(e)},n.request21500Handler=function(e){var t=new CCMD21500;t.template_id=e.data.id,this.sendSocketData(21500,t)},n.dailyDataChange=function(e){var t=e.data.data;this._model.dailyTypeList.indexOf(t.type)>-1&&TipsWordManager.getInstance().showRedDots(TipsWord.FULI,this._model.checkDailyHuoDongOk()),(t.type==DailyModel.DAILY_TYPE_19||t.type==DailyModel.DAILY_TYPE_18||t.type==DailyModel.DAILY_TYPE_14||t.type==DailyModel.DAILY_TYPE_34||t.type==DailyModel.DAILY_TYPE_56||t.type==DailyModel.DAILY_TYPE_57)&&this.checkKFIconOK(),t.type==DailyModel.DAILY_TYPE_12&&null!=this._kfIcon&&this._standardType==HuoDongDailyModel.CONSUMESTANDARD&&this.request14311(this._standardType)},n.fightChange=function(e){if(TipsWordManager.getInstance().showRedDots(TipsWord.FULI,this._model.checkDailyHuoDongOk()),this._kfIcon){var t=this._model.getIconVo(HuoDongDailyModel.KFSTANDARD);t&&t.activityList.indexOf(8001)>-1&&(this._model.myValue=RoleModel.getInstance().getAllPartnerFight()),this._kfIcon.showRedDot=this._model.checkKFIconOK()}},n.waveChange=function(e){TipsWordManager.getInstance().showRedDots(TipsWord.FULI,this._model.checkDailyHuoDongOk())},n.standardDataChange=function(e){this._standardType==HuoDongDailyModel.LONGSTANDARD?e.data.type==GoodsType.SPECIAL_EQUIP_3&&this.request14311(this._standardType):this.request14311(this._standardType)},n.request16400Handler=function(e){var t=new CCMD16400;t.open_day=e.data,this.sendSocketData(16400,t)},n.SCMD16400Response=function(e){this.dispatchEvent(new ParamEvent(HuoDongDailyEvtName.UPDATE_16400,e))},n.openKFShopEquipView=function(){null==this._kfShopEquip&&(this._kfShopEquip=new KFShopEquipWindow,this._kfShopEquip.addEventListener(EventName.WINDOW_DISPOSE,this.disposeKFShopEquipView,this)),this._kfShopEquip.isPop=!this._kfShopEquip.isPop},n.disposeKFShopEquipView=function(e){this._kfShopEquip&&(this._kfShopEquip.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeKFShopEquipView,this),this._kfShopEquip.dispose(),this._kfShopEquip=null)},n.onLevelupHandler=function(){null==this._oneRmbIcon&&this.addOneRmbIcon()},t}(BaseContol);egret.registerClass(HuoDongDailyControl,"HuoDongDailyControl");var JinbangControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t),PhpHttpStatisticsManager.getJBYXPayAttentionInfo()},n.addEventHandler=function(){this.addEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.dailyDataChange,this),this.addEventListener(EventName.JBYX_ATTENTION,this.onFollowData,this),this.addEventListener(JinBangYXManager.GET_JBYXREWARD,this.getReward,this)},n.onFollowData=function(e){JinbangModel.getInstance().isFollow=e.data.result,this.checkFollowRewardIcon(),this._followRewardWindow&&this._followRewardWindow.isPop&&this._followRewardWindow.update()},n.dailyDataChange=function(e){this.checkFollowRewardIcon()},n.checkFollowRewardIcon=function(){var e=FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE7);0==e?this.addGuanzhuIcon():this.removeGuanzhuIcon()},n.addGuanzhuIcon=function(){null==this._followRewardIcon&&(this._followRewardIcon=TipsWordManager.getInstance().addWordIcon("btn_guanzhu"),this._followRewardIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openFollowRewardWindowHandler,this))},n.removeGuanzhuIcon=function(){this._followRewardIcon&&(this._followRewardIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openFollowRewardWindowHandler,this),TipsWordManager.getInstance().removeIcon("btn_guanzhu"))},n.openFollowRewardWindowHandler=function(){var e=this;if(ConfigManager.isb7724()){var t=B7724Manager.getInstance().b7724Sdk;t.isSubscribe(function(i){return 1==i?(e.openFollowRewardWindow(),!1):void t.follow()})}else ConfigManager.isB9g()?window.isSubscribe(function(t){0==t?window.showSubscribe():e.openFollowRewardWindow()}):ConfigManager.isyxjinbang()&&this.openFollowRewardWindow()},n.openFollowRewardWindow=function(){this._followRewardWindow||(this._followRewardWindow=new FollowRewardWindow,this._followRewardWindow.addEventListener(EventName.WINDOW_DISPOSE,this.onFollowRewardDispose,this)),this._followRewardWindow.isPop=!0},n.onFollowRewardDispose=function(){this._followRewardWindow&&(this._followRewardWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.onFollowRewardDispose,this),this._followRewardWindow.dispose(),this._followRewardWindow=null)},n.getReward=function(e){this.sendSocketData(2e4)},t}(BaseContol);egret.registerClass(JinbangControl,"JinbangControl");var KFBossControl=function(e){function t(){e.call(this),this._bossDropSi=0,this._kfBossSi=0,this._guildBossID=0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.addCmdHandler=function(){var t=this;e.prototype.addCmdHandler.call(this),this.addCmdListener(20100,function(e){t.SCMD20100Response(e)},this),this.addCmdListener(20101,function(e){t.SCMD20101Response(e)},this),this.addCmdListener(20110,function(e){t.SCMD20110Response(e)},this),this.addCmdListener(20111,function(e){t.SCMD20111Response(e)},this),this.addCmdListener(20112,function(e){t.SCMD20112Response(e)},this),this.addCmdListener(20113,function(e){t.SCMD20113Response(e)},this),this.addCmdListener(20120,function(e){t.SCMD20120Response(e)},this)},n.addEventHandler=function(){e.prototype.addEventHandler.call(this),this.addEventListener(BossEvtName.CMD20110,this.request20110,this),this.addEventListener(BossEvtName.CMD20120,this.request20120,this),this.addEventListener(BossEvtName.OPEN_KUAFU_BOSS_VIEW,this.openView,this),this.addEventListener(BossEvtName.CLOSE_KUAFU_BOSS_VIEW,this.closeView,this),this.addEventListener(EventName.SCENE_CHANGE,this.sceneChangeHandler,this)},n.sceneChangeHandler=function(e){this._kfBossSi>0&&clearTimeout(this._kfBossSi),SceneModel.getInstance().isKFBossScene()?TimerManager.getInstance().add(3e3,this.checkAttackBoss,this):TimerManager.getInstance().remove(3e3,this.checkAttackBoss,this)},n.checkAttackBoss=function(){if(SceneModel.getInstance().isKFBossScene()&&RoleModel.getInstance().getAllHP()>0)if(""==RoleModel.getInstance().hunZhanTargetID){var e=SceneModel.getInstance().getOther();if(e){var t=RoleModel.getInstance().getRoleCommon().guild_id;(0==t||0==e.getBangID()||t!=e.getBangID())&&RoleModel.getInstance().setAllPartnerChangeTarget(e.pid)}}else SceneModel.getInstance().dispatchEvent(new ParamEvent(SceneModel.CREATE_MONSTER_LIST_FINISH))},n.SCMD20100Response=function(e){this.dispatchEvent(new ParamEvent(BossEvtName.CMD20100_UPDATE,e))},n.SCMD20101Response=function(e){BossModel.getInstance().setBossAwakeData(e.kfboss_awakes),this.dispatchEvent(new ParamEvent(BossEvtName.CMD20101_UPDATE,e))},n.SCMD20110Response=function(e){SceneModel.getInstance().showResult(e.is_top,e.drop_list)},n.SCMD20111Response=function(e){var t=this;1==e.flag&&(ReliveModel.getInstance().isAuto&&RoleModel.getInstance().getRoleInfo().getGold()>=ReliveModel.getInstance().getReliveYuanBao()?(this._kfBossSi>0&&clearTimeout(this._kfBossSi),this._kfBossSi=setTimeout2(function(){t.dispatchEvent(new ParamEvent(BossEvtName.CMD20120,{type:1}))},1e3)):this.dispatchEvent(new ParamEvent(EventName.SHOW_RELIVE_VIEW)))},n.request20100=function(){this.sendSocketData(20100)},n.request20101=function(){this.sendSocketData(20101)},n.request20110=function(e){var t=new CCMD20110;t.template_id=e.data,this.sendSocketData(20110,t)},n.request20120=function(e){var t=new CCMD20120,i=e.data.type;t.template_id=BossModel.getInstance().kfBossID,t.type=i,this.sendSocketData(20120,t)},n.SCMD20112Response=function(e){if(SceneModel.getInstance().isKFBossScene()){this._guildBossID=e.boss_id,this.dispatchEvent(new ParamEvent(EventName.SHOW_BOSSBLOOD_VIEW));var t=BossModel.getInstance().changeKFBossToBossDamageVo(e);BossModel.getInstance().setBossDamageInfo(t)}},n.SCMD20113Response=function(e){this.dispatchEvent(new ParamEvent(BossEvtName.BOSS_SHOW_FIGHT_RESULT,e))},n.SCMD20120Response=function(e){1==e.flag?(ReliveModel.getInstance().setReliveLeftTimeByServer(e.last_cd),this.dispatchEvent(new ParamEvent(EventName.SHOW_RELIVE_VIEW))):ReliveModel.getInstance().setReliveLeftTimeByServer(0)},n.openView=function(){if(FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_49,!0)){if(0==RoleModel.getInstance().getRoleCommon().guild_id)return Message.show("请加入公会"),void this.dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_GUILD));this._boss||(this._boss=new KuaFuBossWindow,this._boss.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._boss.isPop=!this._boss.isPop,this.request20100(),this.request20101()}},n.disposeView=function(){this._boss&&(this._boss.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._boss.dispose(),this._boss=null)},n.closeView=function(){this._boss&&(this._boss.isPop=!1)},t}(BaseContol);egret.registerClass(KFBossControl,"KFBossControl");var KfKillerControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){},n.addEventHandler=function(){this.addEventListener(KfKillerEvtName.OPEN_KFKILLER_WINDOW,this.onOpenWindowHandler,this),this.addEventListener(KfKillerEvtName.SHOW_KFKILLER_SCENE_UI,this.onShowSceneUIHandler,this)},n.CCMD12900Request=function(e){RoleModel.getInstance().getRoleCommon().level<FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.ARTIFACT).open_level||this.sendSocketData(12900)},n.SCMD12900Response=function(e){ArtifactModel.getInstance().setServerData(e),RedDotsModel.getInstance().calMainArtifactSingleIconRedDot()},n.CCMD12901Request=function(e){var t=new CCMD12901;t.type=e.data.type,this.sendSocketData(12901,t)},n.onOpenWindowHandler=function(e){var t=this,i=0,n=!0;e.data&&(i=e.data.index,n=e.data.isOpen),t._window||(t._window=new KfKillerWindow,t._window.addEventListener(EventName.WINDOW_DISPOSE,t.disposeKfKillerWindow,t)),t._window.openView(i,n)},n.disposeKfKillerWindow=function(e){var t=this;t._window&&(t._window.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeKfKillerWindow,this),t._window.dispose(),t._window=null)},n.onShowSceneUIHandler=function(e){var t=this,i=e.data.show;i?(null==t._leftInfo&&(t._leftInfo=new KfKillerSceneLeftInfo,t._leftInfo.x=1,t._leftInfo.y=140),GameContent.gameLayers.mainUILayer.addChild(t._leftInfo),null==t._rightInfo&&(t._rightInfo=new KfKillerSceneRightInfo,t._rightInfo.x=GameContent.stageWidth-181,t._rightInfo.y=140),GameContent.gameLayers.mainUILayer.addChild(t._rightInfo),null==t._bottomInfo&&(t._bottomInfo=new KfKillerSceneBottomInfo,t._bottomInfo.horizontalCenter=0,t._bottomInfo.y=881),GameContent.gameLayers.mainUILayer.addChild(t._bottomInfo)):(t._leftInfo&&(t._leftInfo.dispose(),t._leftInfo=null),t._rightInfo&&(t._rightInfo.dispose(),t._rightInfo=null),t._bottomInfo&&(t._bottomInfo.dispose(),t._bottomInfo=null))},t}(BaseContol);egret.registerClass(KfKillerControl,"KfKillerControl");var KingControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addEventHandler=function(){this.addEventListener(KingEvtName.OPEN_VIEW_SELECT,this.openView,this),this.addEventListener(KingEvtName.CCMD18300,this.CCMD18300Request,this),this.addEventListener(KingEvtName.CCMD18301,this.CCMD18301Request,this),this.addEventListener(KingEvtName.CCMD18310,this.CCMD18310Request,this),this.addEventListener(KingEvtName.CCMD18311,this.CCMD18311Request,this),this.addEventListener(KingEvtName.CCMD18320,this.CCMD18320Request,this),this.addEventListener(KingEvtName.CCMD18330,this.CCMD18330Request,this),this.addEventListener(KingEvtName.CCMD18331,this.CCMD18331Request,this),this.addEventListener(KingEvtName.CCMD18332,this.CCMD18332Request,this),this.addEventListener(EventName.RED_DOTS+RedDotsModel.ID_2021,this.onRedDot,this),this.addEventListener(EventName.RED_DOTS+RedDotsModel.ID_2022,this.onRedDot,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(18300,function(t){e.SCMD18300Response(t)},this),this.addCmdListener(18310,function(t){e.SCMD18310Response(t)},this),this.addCmdListener(18311,function(t){e.SCMD18311Response(t)},this),this.addCmdListener(18320,function(t){e.SCMD18320Response(t)},this),this.addCmdListener(18330,function(t){e.SCMD18330Response(t)},this)},n.CCMD18300Request=function(){this.sendSocketData(18300)},n.CCMD18301Request=function(){this.sendSocketData(18301)},n.CCMD18310Request=function(){this.sendSocketData(18310)},n.CCMD18320Request=function(){this.sendSocketData(18320)},n.CCMD18311Request=function(){this.sendSocketData(18311),this._kingView&&(this._kingView.isPop=!1),this.dispatchEvent(new ParamEvent(EventName.CLOSE_CITY_VIEW))},n.CCMD18330Request=function(){this.sendSocketData(18330)},n.CCMD18331Request=function(){this.sendSocketData(18331)},n.CCMD18332Request=function(e){var t=new CCMD18332;t.rank=e.data,this.sendSocketData(18332,t)},n.SCMD18300Response=function(e){KingModel.getInstance().setData(e),this.dispatchEvent(new ParamEvent(KingEvtName.CCMD18300_UPDATE,e))},n.SCMD18310Response=function(e){KingModel.getInstance().goToPK=!0,this.openSelectView(e)},n.SCMD18311Response=function(e){0==e.flag?this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_FAIL,{dropList:e.drop_list})):this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_SUCCESS,{list:e.drop_list})),this.dispatchEvent(new ParamEvent(KingEvtName.CCMD18311_UPDATE,e)),e.level<e.new_level&&this.dispatchEvent(new ParamEvent(FuLiEvtName.SHOW_SHARENEW_VIEW,2)),this.showEffect(e)},n.SCMD18320Response=function(e){this.dispatchEvent(new ParamEvent(KingEvtName.CCMD18320_UPDATE,e))},n.SCMD18330Response=function(e){this.dispatchEvent(new ParamEvent(KingEvtName.CCMD18330_UPDATE,e))},n.openView=function(){FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_46)&&(this._kingView||(this._kingView=new KingWindow,this._kingView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._kingView.isPop=!0)},n.disposeView=function(e){this._kingView&&(this._kingView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._kingView.dispose(),this._kingView=null)},n.openSelectView=function(e){this._selectView||(this._selectView=new KingSelectWindow,this._selectView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeSelectView,this)),this._selectView.isPop=!0,this._selectView.setData(e)},n.disposeSelectView=function(e){this._selectView&&(this._selectView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeSelectView,this),this._selectView.dispose(),this._selectView=null)},n.onRedDot=function(){if(FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_46,!1)){var e=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2021),t=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2022);TipsWordManager.getInstance().showRedDots(TipsWord.KING,e||t?!0:!1)}},n.showEffect=function(e){this._starView||(this._starView=new KingStarView,this._starView.x=GameContent.stageWidth-this._starView.width>>1,this._starView.y=GameContent.stageHeight-this._starView.height>>1),GameContent.gameLayers.topLayer.addChild(this._starView),this._starView.showEffect(e)},t}(BaseContol);egret.registerClass(KingControl,"KingControl");var KuaFuControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){var i=this;e.prototype.onGameStart.call(this,t),setTimeout2(function(){i.request10040()},5e3*Math.random())},n.addCmdHandler=function(){var t=this;e.prototype.addCmdHandler.call(this),this.addCmdListener(10040,function(e){t.SCMD10040Response(e)},this)},n.addEventHandler=function(){e.prototype.addEventHandler.call(this),this.addEventListener(KuaFuEvtName.KUAFU_OPEN_VIEW,this.openView,this),this.addEventListener(KuaFuEvtName.KUAFU_OPEN_MAP,this.openMapView,this),this.addEventListener(KuaFuEvtName.KUAFU_CLOSE_MAP,this.disposeMapView,this)},n.request10040=function(){this.sendSocketData(10040)},n.SCMD10040Response=function(e){e.flag>0?KuaFuModel.getInstance().isKuaFu=!0:TipsWordManager.getInstance().isHasIcon(TipsWord.KUAFU)&&TipsWordManager.getInstance().removeIcon(TipsWord.KUAFU)},n.openMapView=function(){this._map||(this._map=new KuaFuMapView,this._map.addEventListener(EventName.WINDOW_DISPOSE,this.disposeMapView,this)),KuaFuModel.getInstance().isKuaFuShow=!0,GameContent.gameLayers.winMapLayer.addChild(this._map),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_SHOW_RIGHTTOP,{state:!1}))},n.disposeMapView=function(){this._map&&(this._map.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeMapView,this),this._map.dispose(),this._map=null)},n.openView=function(e){this.setIndex(e.data)},n.setIndex=function(e){switch(e){case 3:this._shop||(this._shop=new KuaFuShopWindow,this._shop.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._shop.isPop=!0;break;case 4:if(!FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_49,!0))return;0==RoleModel.getInstance().getRoleCommon().guild_id&&this._map.onReturn(),this.dispatchEvent(new ParamEvent(BossEvtName.OPEN_KUAFU_BOSS_VIEW));break;case 6:this.dispatchEvent(new ParamEvent(ShopEvtName.OPEN_SHOP_VIEW));break;default:Message.show("敬请期待")}},n.disposeView=function(){this._shop&&(this._shop.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._shop.dispose(),this._shop=null)},t}(BaseContol);egret.registerClass(KuaFuControl,"KuaFuControl");var LegendSuitControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){var e=this;this.addCmdListener(14e3,function(t){e.SCMD14000Response(t)},this),this.addCmdListener(14001,function(t){e.SCMD14001Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(LegendSuitEvtName.CCMD14000,function(t){e.CCMD14000Request(t)},this),this.addEventListener(LegendSuitEvtName.CCMD14001,function(t){e.CCMD14001Request(t)},this)},n.CCMD14000Request=function(e){var t=new CCMD14000;t.partner_id=e.data.id,t.slot=e.data.slot,this.sendSocketData(14e3,t)},n.SCMD14000Response=function(e){0==e.flag?Message.show("提升失败"):Message.show("提升成功")},n.CCMD14001Request=function(e){var t=new CCMD14001;t.item_id=e.data.id,this.sendSocketData(14001,t)},n.SCMD14001Response=function(e){0==e.flag?Message.show("分解失败"):Message.show("分解成功")},t}(BaseContol);egret.registerClass(LegendSuitControl,"LegendSuitControl");var LoginControl=function(e){function t(){e.call(this),this._isFirst=!0,this._hasSendEvt=!1,this._10020Si=0}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addEventHandler=function(){this.addEventListener(EventName.SHOW_SERVER_LIST,this.showGameServerListViewHandler,this),this.addEventListener(EventName.SHOW_GAMESTART_VIEW,this.showGameStartViewHandler,this),this.addEventListener(EventName.SHOW_LOGIN_VIEW,this.showLoginViewHandler,this),this.addEventListener(EventName.START_LOADGAME_RESOURCE,this.closeGameStartAndServerListHandler,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(10200,function(t){e.SCMD10200Response(t)},this),this.addCmdListener(10300,function(t){e.SCMD10300Response(t)},this),this.addCmdListener(10010,function(t){e.SCMD10010Response(t)},this),this.addCmdListener(10020,function(t){e.SCMD10020Response(t)},this)},n.CCMD10300Request=function(){this.sendSocketData(10300)},n.SCMD10200Response=function(e){RoleModel.getInstance().readLoginInfo(e),this.CCMD10300Request()},n.SCMD10300Response=function(e){RoleModel.getInstance().setRoleList(e),this._isFirst?(this.request10030(),this.CCMD16100Request(),this.dispatchEvent(new ParamEvent(EventName.REQUEST_WAVE)),this._isFirst=!1):GameStateManager.getInstance().isReConnect()&&(this.request10030(),this.dispatchEvent(new ParamEvent(EventName.REQUEST_WAVE)))},n.SCMD10010Response=function(e){GameStateManager.getInstance().serverState=e.reason;var t,i=!1;switch(e.reason){case GameStateManager.REPEAT_LOGIN:t="你的账号在其他地方登录了";break;case GameStateManager.SERVER_STOP:t="服务器暂时关闭",i=!0;break;case GameStateManager.BAN:t="您已经被禁号";break;case GameStateManager.BAN_IP:t="您的IP已经被禁";break;case GameStateManager.ROUTING_FAST:t="请求过于频繁，请刷新游戏",i=!0;break;case GameStateManager.HEART_BROKEN:t="网络不稳定，请刷新游戏",i=!0;break;case GameStateManager.WEBSOCKET_NOT_MATCH:t="网络连接格式不对",i=!0;break;case GameStateManager.WEBSOCKET_TERMINATE:t="网络不稳定，请刷新游戏",i=!0;break;default:t="服务器断开连接"}i?Alert.show(t,0,function(){Tools.GameRefresh()}):Alert.show(t)},n.request10030=function(){this.sendSocketData(10030)},n.request10020=function(){this.sendSocketData(10020)},n.SCMD10020Response=function(e){var t=this;if(RoleModel.getInstance().serverTime=e.unixtime,TimerManager.getInstance().currentServerTime=e.unixtime,!this._hasSendEvt){this.dispatchEvent(new ParamEvent(EventName.GOT_TIME));var i=!1;if(LoginModel.getInstance().isCreateRole){var n=Tools.getPageParams("inviter");null!=n&&void 0!=n&&""!=n&&(i=!0),ConfigManager.isb7724()?window.sendCreateRole():ConfigManager.isB9g()&&window.sendCreateRole()}PhpHttpStatisticsManager.updateLoad(RoleModel.getInstance().getRoleCommon(),i),this._hasSendEvt=!0,LoginModel.getInstance().isCreateRole=!1}this._10020Si>0&&clearTimeout(this._10020Si),this._10020Si=setTimeout2(function(){t.request10020()},50)},n.CCMD16100Request=function(){this.sendSocketData(16100)},n.showGameStartViewHandler=function(e){null==this._gameStartView&&(this._gameStartView=new GameStartView,GameContent.root.addChild(this._gameStartView))},n.showGameServerListViewHandler=function(e){null==this._gameServerListView&&(this._gameServerListView=new SelectServerView,this._gameServerListView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeGameServerListView,this)),this._gameServerListView.isPop=!0},n.disposeGameServerListView=function(e){this._gameServerListView&&(this._gameServerListView.dispose(),this._gameServerListView=null)},n.showLoginViewHandler=function(){null==this._loginView&&(this._loginView=new LoginView,GameContent.root.addChild(this._loginView))},n.closeGameStartAndServerListHandler=function(){this._gameStartView&&(this._gameStartView.parent&&this._gameStartView.parent.removeChild(this._gameStartView),this._gameStartView.onCloseHandler(),this._gameStartView=null),this._gameServerListView&&(this._gameServerListView.isPop=!1,this._gameStartView=null),this._loginView&&(this._loginView.parent&&this._loginView.parent.removeChild(this._loginView),this._loginView.onCloseHandler(),this._loginView=null)},t}(BaseContol);egret.registerClass(LoginControl,"LoginControl");var LoginRewardControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addEventHandler=function(){this.addEventListener(LoginRewardEvtName.LOGIN_REWARD_CCMD12700,this.CCMD12700Request,this),this.addEventListener(LoginRewardEvtName.LOGIN_REWARD_CCMD12701,this.CCMD12701Request,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(12700,function(t){e.SCMD12700Response(t)},this)},n.CCMD12700Request=function(){this.sendSocketData(12700)},n.CCMD12701Request=function(){this.sendSocketData(12701)},n.SCMD12700Response=function(e){this.dispatchEvent(new ParamEvent(LoginRewardEvtName.LOGIN_REWARD_CCMD12700_UPDATE,e))},n.openView=function(e){this._loginView||(this._loginView=new LoginRewardWindow,this._loginView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._loginView.isPop=!this._loginView.isPop,this._loginView.isPop&&this.CCMD12700Request()},n.disposeView=function(e){this._loginView&&(this._loginView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._loginView.dispose(),this._loginView=null)},n.changeLv=function(){var e=this,t=RoleModel.getInstance().getRoleCommon().level;t>=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.LOGIN_REWARD).open_level&&setTimeout2(function(){e.CCMD12700Request()},2e3*Math.random())},t}(BaseContol);egret.registerClass(LoginRewardControl,"LoginRewardControl");var MagicPetControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.addCmdHandler=function(){var e=this;this.addCmdListener(23200,function(t){e.onPetInfo(t)},this),this.addCmdListener(23210,function(t){e.onPetActive(t)},this),this.addCmdListener(23220,function(t){e.onPetLevel(t)},this),this.addCmdListener(23230,function(t){e.onPetGrade(t)},this),this.addCmdListener(23320,function(t){e.onLogInfo(t)},this),this.addCmdListener(24100,function(t){e.onWeaponInfo(t)},this),this.addCmdListener(24101,function(t){e.onUpLevel(t)},this),this.addCmdListener(24102,function(t){e.onUpGrade(t)},this),this.addCmdListener(24103,function(t){e.onWeaponShow(t)},this),this.addCmdListener(24104,function(t){e.onWeaponActive(t)},this)},n.addEventHandler=function(){this.addEventListener(EventName.GAME_START,this.gameStartCheck,this),this.addEventListener(EventName.PET_OPEN_WINDOW,this.openView,this),this.addEventListener(EventName.PET_ACTIVE,this.toPetActive,this),this.addEventListener(EventName.PET_GRADE,this.toPetGrade,this),this.addEventListener(EventName.PET_LEVEL,this.toPetLevel,this),this.addEventListener(EventName.PET_INTERACT,this.toInteract,this),this.addEventListener(EventName.PET_SHOW_OR_HIDE,this.toShowOrHide,this),this.addEventListener(EventName.PET_FRIENDS_SEND_CHANCE,this.toSendChance,this),this.addEventListener(DailyEvtName.DAILY_UPDATE,this.updateChance,this),this.addEventListener(EventName.UPDATE_GOODSITEM,this.updateView,this),this.addEventListener(EventName.PET_WEAPON_INFO,this.toWeaponInfo,this),this.addEventListener(EventName.PET_WEAPON_SHOW,this.toWeaponShow,this),this.addEventListener(EventName.PET_WEAPON_ACTIVE,this.toWeaponActive,this),this.addEventListener(EventName.PET_WEAPON_UP,this.toWeaponLevel,this),this.addEventListener(EventName.PET_WEAPON_GRADE,this.toWeaponGrade,this)},n.toPetInfo=function(){this.sendSocketData(23200)},n.onPetInfo=function(e){MagicPetModel.getInstance().setPetInfo(e.pet_list),this.mainView&&this.mainView.update()},n.toPetActive=function(){var e=new CCMD23210;e.pet_id=MagicPetModel.getInstance().curPetId,this.sendSocketData(23210,e)},n.onPetActive=function(e){1==e.activation&&this.mainView.playEffect(1)},n.toPetLevel=function(){var e=new CCMD23220;e.pet_id=MagicPetModel.getInstance().curPetId,this.sendSocketData(23220,e)},n.onPetLevel=function(e){1==e.up_lv&&this.mainView.playEffect(2)},n.toPetGrade=function(){var e=new CCMD23230;e.pet_id=MagicPetModel.getInstance().curPetId,this.sendSocketData(23230,e)},n.onPetGrade=function(e){1==e.up_stairs&&this.mainView.playEffect(2)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t),this.showIcon()},n.showIcon=function(){},n.clickIcon=function(){FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_52)&&this.openView()},n.openView=function(e){void 0===e&&(e=null),this.mainView||(this.mainView=new MagicPetWindow,this.mainView.addEventListener(EventName.WINDOW_DISPOSE,this.closeMainView,this)),this.mainView.isPop=!0,this.mainView.setIndex(e?Number(e.data):0),this.toPetInfo(),this.toWeaponInfo(),this.toLogInfo()},n.updateView=function(){this.mainView&&this.mainView.isPop&&this.mainView.update()},n.updateChance=function(){this.mainView&&this.mainView.updateChance()},n.closeMainView=function(){MagicPetModel.getInstance().weaponUpAuto=!1,this.mainView&&(this.mainView.removeEventListener(EventName.WINDOW_DISPOSE,this.closeMainView,this),this.mainView.dispose(),this.mainView=null)},n.toLogInfo=function(){this.sendSocketData(23320)},n.onLogInfo=function(e){MagicPetModel.getInstance().petLogList=e.pet_get_logs
},n.toSendChance=function(e){var t=new CCMD23300;t.role_id=Number(e.data),this.sendSocketData(23300,t)},n.toInteract=function(e){this.mainView.playFeedEffect();var t=new CCMD23310;t.pet_id=MagicPetModel.getInstance().curPetId,this.sendSocketData(23310,t)},n.toShowOrHide=function(e){var t=new CCMD23240;t.pet_id=MagicPetModel.getInstance().curPetId,this.sendSocketData(23240,t)},n.checkRedDot=function(){this.icon&&(this.icon.showRedDot=MagicPetModel.getInstance().checkWeaponUpable())},n.gameStartCheck=function(){FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_52,!1)&&this.toWeaponInfo()},n.toWeaponInfo=function(){this.sendSocketData(24100)},n.onWeaponInfo=function(e){var t=this;MagicPetModel.getInstance().chargeData(e.pet_weapon_list),setTimeout2(function(){t.checkRedDot()},1500),this.mainView&&this.mainView.isPop&&this.mainView.update()},n.toWeaponLevel=function(e){var t=new CCMD24101;t.weapon_type=e.data,this.sendSocketData(24101,t)},n.onUpLevel=function(e){1==e.result?MagicPetModel.getInstance().weaponUpAuto&&this.mainView&&this.mainView.isPop&&this.mainView.playWeaponBtnEnable():(MagicPetModel.getInstance().weaponUpAuto=!1,this.mainView&&this.mainView.isPop&&this.mainView.update())},n.toWeaponGrade=function(e){var t=new CCMD24102;t.weapon_type=e.data,this.sendSocketData(24102,t)},n.onUpGrade=function(e){1==e.result&&(MagicPetModel.getInstance().weaponUpAuto=!1,this.mainView.update(),this.checkRedDot())},n.toWeaponShow=function(e){var t=new CCMD24103;t.weapon_type=e.data,this.sendSocketData(24103,t)},n.onWeaponShow=function(e){1==e.result&&(MagicPetModel.getInstance().onWeaponShow(e.weapon_type),this.mainView.update())},n.toWeaponActive=function(e){var t=new CCMD24104;t.weapon_type=e.data,this.sendSocketData(24104,t)},n.onWeaponActive=function(e){1==e.result&&(MagicPetModel.getInstance().onWeaponActive(e.weapon_type),this.mainView.update())},t}(BaseContol);egret.registerClass(MagicPetControl,"MagicPetControl");var MailControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addEventHandler=function(){this.addEventListener(EventName.MAINUI_CLICK_MAIL,this.openView,this),this.addEventListener(MAILEvtName.MAIL_CCMD11501,this.CCMD11501Request,this),this.addEventListener(MAILEvtName.MAIL_CCMD11502,this.CCMD11502Request,this),this.addEventListener(MAILEvtName.MAIL_CCMD11503,this.CCMD11503Request,this),this.addEventListener(MAILEvtName.MAIL_OPEN_CONTENT,this.openContentView,this),this.addEventListener(EventName.RED_DOTS+RedDotsModel.ID_2002,this.onMailRedDotsHandler,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(11500,function(t){e.SCMD11500Response(t)},this)},n.CCMD11501Request=function(e){var t=new CCMD11501;t.mail_id=e.data,this.sendSocketData(11501,t)},n.CCMD11502Request=function(e){var t=new CCMD11502;t.mail_id=e.data,this.sendSocketData(11502,t)},n.CCMD11503Request=function(e){this.sendSocketData(11503)},n.SCMD11500Response=function(e){MailModel.getInstance().updateData(e.mail_list),this.dispatchEvent(new ParamEvent(MAILEvtName.MAIL_CCMD11500_UPDATE,e))},n.openView=function(){this._mailView||(this._mailView=new MailWindow,this._mailView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._mailView.isPop?this._mailView.isPop=!1:(this._mailView.isPop=!0,this.sendSocketData(11500))},n.disposeView=function(e){this._mailView&&(this._mailView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._mailView.dispose(),this._mailView=null)},n.openContentView=function(e){this._mailContentView||(this._mailContentView=new MailContentWindow,this._mailContentView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeContentView,this)),this._mailContentView.isPop?this._mailContentView.isPop2=!1:(this._mailContentView.isPop2=!0,this._mailContentView.updateData(e.data))},n.disposeContentView=function(e){this._mailContentView&&(this._mailContentView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeContentView,this),this._mailContentView.dispose(),this._mailContentView=null)},n.onMailRedDotsHandler=function(e){TipsWordManager.getInstance().showRedDots(TipsWord.MAIL,e.data)},t}(BaseContol);egret.registerClass(MailControl,"MailControl");var MainUIControl=function(e){function t(){e.call(this),this._timeIndex=0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addEventHandler=function(){this.addEventListener(EventName.MAINUI_OPEN,this.onOpenMainUIHandler,this),this.addEventListener(EventName.MAINUI_INIT,this.onMainUIInitDataHandler,this),this.addEventListener(EventName.MAINUI_CHANGEVISIBLE,this.onMainUIChangeVisibleHandler,this),this.addEventListener(EventName.SHOW_RECONNECTING,this.showReconnectHandler,this),this.addEventListener(EventName.REMOVE_RECONNECTING,this.removeReconnectEffHandler,this),this.addEventListener(SceneEvtName.SCREEN_ROTATE,this.screenRotate,this),this.addEventListener(EventName.OPEN_SIDEUI_FUN,this.openSideUIFunView,this),this.addEventListener(EventName.CLOSE_SIDEUI_FUN,this.closeSideUIFunView,this)},n.screenRotate=function(e){var t=e.data.type;0==t?this.showRotateTips():1==t&&this.removeRotateTips()},n.showRotateTips=function(){var e=this;null==e._rotateContainer&&(e._rotateContainer=new egret.Sprite,e._rotateContainer.x=0,e._rotateContainer.y=0,e._rotateContainer.graphics.beginFill(0),e._rotateContainer.graphics.drawRect(0,0,GameContent.stageWidth,GameContent.stageHeight),e._rotateContainer.graphics.endFill(),e._rotateTips=new CustomLabel,e._rotateTips.size=40,e._rotateTips.text="保持竖屏，会有更好的游戏体验",e._rotateTips.x=GameContent.stageWidth-e._rotateTips.textWidth>>1,e._rotateTips.y=GameContent.stageHeight-e._rotateTips.textHeight>>1,e._rotateContainer.addChild(e._rotateTips)),GameContent.gameLayers.topLayer.addChild(e._rotateContainer)},n.removeRotateTips=function(){var e=this;e._rotateTips&&(e._rotateTips.dispose(),e._rotateTips=null),e._rotateContainer&&(e._rotateContainer.graphics.clear(),e._rotateContainer.parent&&e._rotateContainer.parent.removeChild(e._rotateContainer),e._rotateContainer=null)},n.onOpenMainUIHandler=function(e){var t;t=null==e.data?!0:e.data.state,this.mainUI||(this.mainUI=new mainUI),this.mainUI.visible=e.data.visible,t?GameContent.gameLayers.mainUILayer.addChild(this.mainUI):GameContent.gameLayers.mainUILayer.contains(this.mainUI)&&GameContent.gameLayers.mainUILayer.removeChild(this.mainUI),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(Main.REMOVE_LOADINGUI)),MainUIModel.getInstance().isMainUIInited=!0,GameStateManager.getInstance().isResLoaded&&GameStateManager.getInstance().isSceneLoaded&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.GAME_START)),RoleModel.getInstance().offlineRewardData&&this.dispatchEvent(new ParamEvent(EventName.SHOW_OFFLINEVIEW))},n.onMainUIInitDataHandler=function(e){null==this.mainUI&&this.onOpenMainUIHandler(new ParamEvent(EventName.MAINUI_OPEN,{state:!0,visible:!0})),0==this.mainUI.visible&&(this.mainUI.visible=!0),this.mainUI.initData()},n.onMainUIChangeVisibleHandler=function(){this.mainUI&&0==this.mainUI.visible&&(this.mainUI.visible=!0)},n.showReconnectHandler=function(e){this.showReconnectEffect()},n.showReconnectEffect=function(){null==this._txtConnect&&(this._txtConnect=new egret.TextField,this._txtConnect.text="正在连接中",this._txtConnect.x=390,this._txtConnect.y=680,this._txtConnect.width=240,this._txtConnect.stroke=1,this._txtConnect.strokeColor=0),this._txtConnect.parent||(this._timeIndex=0,GameContent.gameLayers.topLayer.addChild(this._txtConnect),TimerManager.getInstance().remove(1e3,this.reconnectTimer,this),TimerManager.getInstance().add(1e3,this.reconnectTimer,this))},n.reconnectTimer=function(){for(var e=this._timeIndex%6,t="",i=0;e>i;i++)t+="·";this._txtConnect.text="正在连接中"+t,this._timeIndex++},n.removeReconnectEffHandler=function(e){this.removeReconnectEff()},n.removeReconnectEff=function(){TimerManager.getInstance().remove(1e3,this.reconnectTimer,this),this._txtConnect&&this._txtConnect.parent&&this._txtConnect.parent.removeChild(this._txtConnect)},n.openSideUIFunView=function(e){var t=this;null==t._sideUIFunView&&(t._sideUIFunView=new SideUIFunView(e.data.type),t._sideUIFunView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeSideUiFunWindow,this)),t._sideUIFunView.isPop=!0},n.closeSideUIFunView=function(e){var t=this;t._sideUIFunView&&(t._sideUIFunView.isPop=!1)},n.disposeSideUiFunWindow=function(){var e=this;e._sideUIFunView&&(e._sideUIFunView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeSideUiFunWindow,this),e._sideUIFunView.dispose(),e._sideUIFunView=null)},t}(BaseContol);egret.registerClass(MainUIControl,"MainUIControl");var MallControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t),this._tw=TipsWordManager.getInstance().addWordIcon("btn_shopch"),this._tw.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openShopCheapView,this),this._shopIcon=TipsWordManager.getInstance().addWordIcon("btn_mall"),this._shopIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openView,this),0==MallModel.getInstance().checkCanRemoveShopLevelIcon()&&(this._shopLevelIcon=TipsWordManager.getInstance().addWordIcon("btn_lvshop"),this._shopLevelIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShopLevelIcon,this)),this.showRedDots()},n.addEventHandler=function(){this.addEventListener(EventName.MAINUI_CLICK_MALL,this.openView,this),this.addEventListener(EventName.OPEN_BUY_WINDOW,this.openBuyView,this),this.addEventListener(EventName.OPEN_LEVEL_SELL_VIEW,this.openLevelSellView,this),this.addEventListener(MallEvtName.OPEN_SHOPCHEAP,this.openShopCheapView,this),this.addEventListener(MallEvtName.MALL_REQUEST,this.CCMDRequest,this),this.addEventListener(MallEvtName.MALL_CCMD11001,this.CCMD11001Request,this),this.addEventListener(MallEvtName.MALL_CCMD11004,this.CCMD11004Request,this),this.addEventListener(DailyEvtName.DAILY_UPDATE,this.showRedDots,this),this.addEventListener(MallEvtName.CCMD19500,this.CCMD19500Request,this),this.addEventListener(MallEvtName.CCMD21200,this.CCMD21200Request,this),this.addEventListener(MallEvtName.CCMD22700,this.CCMD22700Request,this),this.addEventListener(MallEvtName.CCMD22710,this.CCMD22710Request,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_UP,this.onLvlUp,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_ROUND_CHANGE,this.onRoundChange,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(11e3,function(t){e.SCMD11000Response(t)},this),this.addCmdListener(22700,function(t){e.SCMD22700Response(t)},this),this.addCmdListener(22710,function(t){e.SCMD22710Response(t)},this)},n.CCMDRequest=function(e){this.sendSocketData(e.data)},n.SCMD11000Response=function(e){this.dispatchEvent(new ParamEvent(MallEvtName.MALL_CCMD11000_UPDATE,e))},n.CCMD11001Request=function(e){var t=new CCMD11001;t.template_id=e.data,this.sendSocketData(11001,t)},n.CCMD11004Request=function(e){var t=new CCMD11004;t.template_id=e.data.id,t.num=e.data.num,this.sendSocketData(11004,t)},n.CCMD19500Request=function(e){this.sendSocketData(19500)},n.CCMD21200Request=function(e){this.sendSocketData(21200)},n.CCMD22700Request=function(e){this.sendSocketData(22700)},n.SCMD22700Response=function(e){MallModel.getInstance().setShopLevelData(e),1==MallModel.getInstance().checkCanRemoveShopLevelIcon()&&this._shopLevelIcon&&(this._shopLevelIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShopLevelIcon,this),TipsWordManager.getInstance().removeIcon("btn_lvshop"),this._shopLevelIcon.dispose(),this._shopLevelIcon=null)},n.CCMD22710Request=function(e){var t=new CCMD22710;t.shop_id=e.data.shop_id,this.sendSocketData(22710,t)},n.SCMD22710Response=function(e){1==e.flag?Message.show("购买成功"):0==e.flag&&Message.show("购买失败")},n.openView=function(e){null==this._mallView&&(this._mallView=new MallWindow,this._mallView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._mallView.isPop=!this._mallView.isPop,this._mallView&&this._mallView.isPop&&this._mallView.showIndex(e.data?e.data:0)},n.disposeView=function(e){this._mallView&&(this._mallView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._mallView.dispose(),this._mallView=null)},n.openBuyView=function(e){null==this._buyView&&(this._buyView=new BuyWindow,this._buyView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeBuyView,this)),this._buyView.isPop2=!this._buyView.isPop,this._buyView.setData(e.data)},n.disposeBuyView=function(e){this._buyView&&(this._buyView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeBuyView,this),this._buyView.dispose(),this._buyView=null)},n.onClickShopLevelIcon=function(e){this.openLevelSellView(null)},n.openLevelSellView=function(e){null==this._levelSellView&&(e?this._levelSellView=new LevelSellWindow(e.data.id):this._levelSellView=new LevelSellWindow,this._levelSellView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeLevelSellView,this)),this._levelSellView.isPop=!0},n.disposeLevelSellView=function(){this._levelSellView&&(this._levelSellView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeLevelSellView,this),this._levelSellView.dispose(),this._levelSellView=null)},n.openShopCheapView=function(){null==this._shopCheap&&(this._shopCheap=new ShopCheapWindow,this._shopCheap.addEventListener(EventName.WINDOW_DISPOSE,this.disposeShopCheapView,this)),this._shopCheap.isPop=!0},n.disposeShopCheapView=function(e){this._shopCheap&&(this._shopCheap.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeBuyView,this),this._shopCheap.dispose(),this._shopCheap=null)},n.showRedDots=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_46);this._tw&&(this._tw.showRedDot=0==e)},n.onLvlUp=function(){var e=RoleModel.getInstance().getRoleCommon().level;if(!(0>=e)){var t=MallModel.getInstance().getShopLevelVOByLv(e);if(t){var i=MallModel.getInstance().getShopLevelData(t.template_id);i&&0==i.flag&&i.last_time>0&&this.dispatchEvent(new ParamEvent(EventName.OPEN_LEVEL_SELL_VIEW,{id:t.template_id}))}}},n.onRoundChange=function(){var e=RoleModel.getInstance().getRoleCommon().round;if(!(0>=e)){var t=MallModel.getInstance().getShopLevelVOByRound(e);if(t){var i=MallModel.getInstance().getShopLevelData(t.template_id);i&&0==i.flag&&i.last_time>0&&this.dispatchEvent(new ParamEvent(EventName.OPEN_LEVEL_SELL_VIEW,{id:t.template_id}))}}},t}(BaseContol);egret.registerClass(MallControl,"MallControl");var MeetPlayerControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this),this._model=MeetPlayerModel.getInstance()},n.onGameStart=function(e){var t=this;void 0===e&&(e=null),setTimeout2(function(){t.checkRequest13300()},3124)},n.checkRequest13300=function(e){void 0===e&&(e=!1);var t=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.MEETPLAYER);SceneModel.getInstance().getSceneWave().total_wave_id>=t.open_hook?this.dispatchEvent(new ParamEvent(MeetPlayerEvtName.REQUEST_13300)):e&&Message.show(StringUtil.substitute("遭遇pk功能在20关开启"))},n.addEventHandler=function(){this.addEventListener(MeetPlayerEvtName.SHOW_MEETPLAYER_VIEW,this.showMPView,this),this.addEventListener(EventName.ALL_PARTNER_DEAD,this.allPartnerDeadHandler,this),this.addEventListener(MeetPlayerEvtName.SHOW_MEETPLAYER_RECORDVIEW,this.showMPRecordView,this),this.addEventListener(MeetPlayerEvtName.CLOSE_MEETPLAYER_RECORDVIEW,this.closeMPRecordViewHandler,this),this.addEventListener(MeetPlayerEvtName.REQUEST_13300,this.request13300,this),this.addEventListener(MeetPlayerEvtName.REQUEST_13301,this.request13301Handler,this),this.addEventListener(MeetPlayerEvtName.REQUEST_13302,this.request13302Handler,this),this.addEventListener(MeetPlayerEvtName.REQUEST_13303,this.request13303,this),this.addEventListener(MeetPlayerEvtName.REQUEST_13304,this.request13304,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(13300,function(t){e.SCMD13300Response(t)},this),this.addCmdListener(13301,function(t){e.SCMD13301Response(t)},this),this.addCmdListener(13302,function(t){e.SCMD13302Response(t)},this),this.addCmdListener(13303,function(t){e.SCMD13303Response(t)},this),this.addCmdListener(13304,function(t){e.SCMD13304Response(t)},this)},n.showMPView=function(e){var t=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.MEETPLAYER);if(SceneModel.getInstance().getSceneWave().total_wave_id<t.open_hook)return void Message.show(StringUtil.substitute("遭遇pk功能在20关开启"));if(e.data&&e.data.hasOwnProperty("isShow")){var i=e.data.isShow;return void(i||(this._meetPlayerView&&this._meetPlayerView.isPop&&(this._meetPlayerView.isPop=!1),this.closeMpRecordView()))}null==this._meetPlayerView&&(this._meetPlayerView=new MeetPlayerWindow,this._meetPlayerView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeWindow,this)),this._meetPlayerView.isPop=!this._meetPlayerView.isPop;var n=0;e.data&&(n=e.data.index,this._meetPlayerView.setIndex(n)),this.closeMpRecordView()},n.disposeWindow=function(e){this._meetPlayerView&&(this._meetPlayerView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeWindow,this),this._meetPlayerView.dispose(),this._meetPlayerView=null)},n.closeMpRecordView=function(){this._mpRecordView&&(this._mpRecordView.isPop=!1)},n.request13300=function(e){void 0===e&&(e=null),this.sendSocketData(13300)},n.SCMD13300Response=function(e){for(var t=0;t<e.meet_roles.length;t++)for(var i=e.meet_roles[t],n=0;n<i.partner_list.length;n++){var s=i.partner_list[n],a=PlayerBaseVO.makeUid(null,s.partner_id);RoleModel.getInstance().isMyPartner(a)&&(s.partner_id=s.partner_id+MeetPlayerModel.ROBOT_INDEX)}this._model.setPKInfo(e),e.meet_roles.length>0&&SceneModel.getInstance().isHookSmall()&&this.dispatchEvent(new ParamEvent(EventName.ADD_VIRTUAL_PLAYER))},n.request13303=function(e){this.sendSocketData(13303)},n.SCMD13303Response=function(e){this._model.setPKLog(e)},n.request13304=function(e){this.sendSocketData(13304)},n.SCMD13304Response=function(e){var t=this._model.getPkInfo();t.reflash_time=e.flash_time;var i=new NodeMeet_roles;i.role_id=e.role_id,i.icon=e.icon,i.level=e.level,i.name=e.name,i.partner_list=e.partner_list,i.round=e.round,t.meet_roles.push(i),this._model.setPKInfo(t)},n.allPartnerDeadHandler=function(e){SceneModel.getInstance().isHookSmall()&&this.dispatchEvent(new ParamEvent(MeetPlayerEvtName.REQUEST_13301,{result:0}))},n.request13301Handler=function(e){var t=e.data.result;this.request13301(t)},n.request13301=function(e){var t=new CCMD13301;t.role_id=this._model.fightMPID,t.flag=e,this.sendSocketData(13301,t),this._model.meetPlayerReward=this._model.gotoFightMeetPlayerID,this.dispatchEvent(new ParamEvent(MeetPlayerEvtName.REQUEST_13302))},n.SCMD13301Response=function(e){e.result>0?this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_SUCCESS,{list:e.drop_list})):this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_FAIL,{dropList:e.drop_list})),this.dispatchEvent(new ParamEvent(MeetPlayerEvtName.MP_FIGHT_FINISH))},n.request13302Handler=function(e){var t=new CCMD13302;t.role_id=this._model.meetPlayerReward,this.sendSocketData(13302,t),this._model.gotoFightMeetPlayerID=0,this._model.fightMPID=0},n.SCMD13302Response=function(e){this._model.deletePkInfoByID(e.role_id)},n.showMPRecordView=function(e){null==this._mpRecordView&&(this._mpRecordView=new MPRecordWindow),this._mpRecordView.isPop=!this._mpRecordView.isPop},n.closeMPRecordViewHandler=function(e){this.closeMpRecordView()},t}(BaseContol);egret.registerClass(MeetPlayerControl,"MeetPlayerControl");var MeridianControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){var e=this;this.addCmdListener(12e3,function(t){e.SCMD12000Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(MeridianEvtName.CCMD12000,function(t){e.CCMD12000Request(t)},this),this.addEventListener(MeridianEvtName.CCMD12001,function(t){e.CCMD12001Request(t)},this),this.addEventListener(MeridianEvtName.CCMD12002,function(t){e.CCMD12002Request(t)},this)},n.CCMD12000Request=function(e){if(!(RoleModel.getInstance().getRoleCommon().level<FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.MERIDIAN).open_level)){var t=new CCMD12000;t.partner_id=e.data.id,this.sendSocketData(12e3,t)}},n.SCMD12000Response=function(e){MeridianModel.getInstance().updateServerData(e),this.dispatchEvent(new ParamEvent(MeridianEvtName.MERIDIAN_UPDATE_INFO)),RedDotsModel.getInstance().calMainFigureIconRedDot()},n.CCMD12001Request=function(e){var t=new CCMD12001;t.partner_id=e.data.id,this.sendSocketData(12001,t)},n.CCMD12002Request=function(e){var t=new CCMD12002;t.partner_id=e.data.id,this.sendSocketData(12002,t)},t}(BaseContol);egret.registerClass(MeridianControl,"MeridianControl");var MessageControl=function(e){function t(){e.call(this),this._exp=0,this._coin=0,this._gold=0,this._level=0,this._gx=0,this._awake=0,this._feat=0,this._cdSi=0,this.delaySI=0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.addEventHandler=function(){var e=this;this.addCmdListener(10100,function(t){e.SCMD10100Response(t)},this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_EXP_CHANGE,this.updateExpAndLvHandler,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEGOLD,this.updateGoldHandler,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGECOIN,this.updateCoinHandler,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEGX,this.updateGxHandler,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGAWAKE,this.updateAwakeHandler,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEFEAT,this.updateFeatHandler,this),GameDispatcher.getInstance().addEventListener(EventName.SHOW_GET_GOODS,this.updateShowGetGoodsHandler,this)},n.SCMD10100Response=function(e){var t=this,i=MsgModel.getInstance().getCodeContent(e.code);if(10701==e.code)return this._cdSi>0&&clearTimeout(this._cdSi),void(this._cdSi=setTimeout2(function(){SceneModel.getInstance().isCityWarFrontPalace()||SceneModel.getInstance().isCityWarPalace()?t.dispatchEvent(new ParamEvent(EventName.CONTINUEFIGHT_REALPLAYER)):t.dispatchEvent(new ParamEvent(EventName.CONTINUEFIGHT))},1e3));if(10203==e.code)this.dispatchEvent(new ParamEvent(EventName.CHARGE_OPEN));else if(10703==e.code&&SceneModel.getInstance().isCityWarInner())return;""!=e.fields&&null!=e.fields&&(i=StringUtil.substitute(i,e.fields)),trace("MessageControl消息："+i),Message.show(i)},n.updateExpAndLvHandler=function(){if(this._exp>0){var e=RoleModel.getInstance().getRoleCommon().exp-this._exp;e>0&&Message.show("获得  经验  +"+e)}if(this._exp=RoleModel.getInstance().getRoleCommon().exp,this._level>0){var e=RoleModel.getInstance().getRoleCommon().level-this._level;e>0?PhpHttpStatisticsManager.updateLoad(RoleModel.getInstance().getRoleCommon()):0>e&&PhpHttpStatisticsManager.updateLoad(RoleModel.getInstance().getRoleCommon())}this._level=RoleModel.getInstance().getRoleCommon().level},n.updateGoldHandler=function(){var e=this;if(this._gold>0){var t=RoleModel.getInstance().getRoleInfo().getGold()-this._gold;t>0&&(Message.show("获得  元宝  +"+t),ScreenImageEffect.getInstance().playEffect((GameContent.stageWidth-259>>1)-380,(GameContent.stageHeight-49>>1)+60,240,110,rURL("resource/assets/icon/other/gold.png"),6.5),null==this._numberFloat&&(this._numberFloat=new NumberFloat("","number_6_fnt",0,0,!1),this._numberFloat.addEventListener(NumberFloat.CLOSE,this.disposeNumberFloat,this)),this.delaySI>0&&clearTimeout(this.delaySI),this.delaySI=setTimeout2(function(){e._numberFloat&&e._numberFloat.showNumber(t,t,(GameContent.stageWidth-255>>1)+113,(GameContent.stageHeight-65>>1)+260,1500,!0)},500))}this._gold=RoleModel.getInstance().getRoleInfo().getGold()},n.disposeNumberFloat=function(){var e=this;e._numberFloat.removeEventListener(NumberFloat.CLOSE,e.disposeNumberFloat,e),e._numberFloat&&(e._numberFloat.dispose(),e._numberFloat=null)},n.updateCoinHandler=function(){if(this._coin>0){var e=RoleModel.getInstance().getRoleInfo().getCoin()-this._coin;e>0&&Message.show("获得  金币  +"+e)}this._coin=RoleModel.getInstance().getRoleInfo().getCoin()},n.updateGxHandler=function(){if(this._gx>0){var e=RoleModel.getInstance().getRoleInfo().getGx()-this._gx;e>0&&Message.show("获得  贡献  +"+e)}this._gx=RoleModel.getInstance().getRoleInfo().getGx()},n.updateShowGetGoodsHandler=function(e){Message.show("获得  "+e.data.name+"  +"+e.data.count+"个")},n.updateAwakeHandler=function(){if(this._awake>0){var e=RoleModel.getInstance().getRoleInfo().getAwake()-this._awake;e>0&&Message.show("获得  真气  +"+e)}this._awake=RoleModel.getInstance().getRoleInfo().getAwake()},n.updateFeatHandler=function(e){if(this._feat>0){var t=RoleModel.getInstance().getRoleInfo().getFeat()-this._feat;t>0&&Message.show("获得  功勋  +"+t)}this._feat=RoleModel.getInstance().getRoleInfo().getFeat()},t}(BaseContol);egret.registerClass(MessageControl,"MessageControl");var MinesControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.addEventHandler=function(){this.addEventListener(MinesEvtName.OPEN_MINE_VIEW,this.openView,this),this.addEventListener(MinesEvtName.OPEN_MINE_LOG_VIEW,this.openLogView,this),this.addEventListener(MinesEvtName.OPEN_MINE_FUCHOU_VIEW,this.openFuchouView,this),this.addEventListener(MinesEvtName.CCMD16200,this.CCMD16200Request,this),this.addEventListener(MinesEvtName.CCMD16201,this.CCMD16201Request,this),this.addEventListener(MinesEvtName.CCMD16202,this.CCMD16202Request,this),this.addEventListener(MinesEvtName.CCMD16203,this.CCMD16203Request,this),this.addEventListener(MinesEvtName.CCMD16204,this.CCMD16204Request,this),this.addEventListener(MinesEvtName.CCMD16205,this.CCMD16205Request,this),this.addEventListener(MinesEvtName.CCMD16206,this.CCMD16206Request,this),this.addEventListener(MinesEvtName.CCMD16210,this.CCMD16210Request,this),this.addEventListener(MinesEvtName.CCMD16211,this.CCMD16211Request,this),this.addEventListener(MinesEvtName.CCMD16220,this.CCMD16220Request,this),this.addEventListener(MinesEvtName.CCMD16221,this.CCMD16221Request,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(16200,function(t){e.SCMD16200Response(t)},this),this.addCmdListener(16201,function(t){e.SCMD16201Response(t)},this),this.addCmdListener(16202,function(t){e.SCMD16202Response(t)},this),this.addCmdListener(16205,function(t){e.SCMD16205Response(t)},this),this.addCmdListener(16210,function(t){e.SCMD16210Response(t)},this),this.addCmdListener(16211,function(t){e.SCMD16211Response(t)},this),this.addCmdListener(16220,function(t){e.SCMD16220Response(t)},this)},n.CCMD16200Request=function(){this.sendSocketData(16200)},n.CCMD16201Request=function(){this.sendSocketData(16201)},n.CCMD16202Request=function(){this.sendSocketData(16202)},n.CCMD16203Request=function(){this.sendSocketData(16203)},n.CCMD16204Request=function(){this.sendSocketData(16204)},n.CCMD16205Request=function(){this.sendSocketData(16205)},n.CCMD16206Request=function(){this.sendSocketData(16206)},n.CCMD16210Request=function(e){var t=new CCMD16210;t.role_id=e.data,this.sendSocketData(16210,t)},n.CCMD16211Request=function(e){var t=new CCMD16211;t.role_id=e.data,this.sendSocketData(16211,t)},n.CCMD16220Request=function(){this.sendSocketData(16220)},n.CCMD16221Request=function(e){var t=new CCMD16221;t.log_id=e.data,this.sendSocketData(16221,t)},n.SCMD16200Response=function(e){MineModel.getInstance().setList(e.mines),this.dispatchEvent(new ParamEvent(MinesEvtName.CCMD16200_UPDATE,e.mines))},n.SCMD16201Response=function(e){this.openRewardView(e)},n.SCMD16202Response=function(e){this.dispatchEvent(new ParamEvent(MinesEvtName.CCMD16202_UPDATE,e))},n.SCMD16205Response=function(e){e.flag>0&&(MineModel.getInstance().setList(null),this.CCMD16200Request())},n.SCMD16210Response=function(e){this.openDuoView(e)},n.SCMD16220Response=function(e){this.dispatchEvent(new ParamEvent(MinesEvtName.CCMD16220_UPDATE,e.mine_logs))},n.openView=function(e){null==this._mine&&(this._mine=new MineWindow,this._mine.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._mine.isPop2=!this._mine.isPop,this._mine&&this._mine.isPop&&this.CCMD16202Request()},n.disposeView=function(e){this._mine&&(this._mine.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._mine.dispose(),this._mine=null)},n.openLogView=function(e){null==this._log&&(this._log=new MineLogWindow,this._log.addEventListener(EventName.WINDOW_DISPOSE,this.disposeLogView,this)),this._log.isPop2=!this._log.isPop,this._log&&this._log.isPop&&this.CCMD16220Request()},n.disposeLogView=function(e){this._log&&(this._log.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeLogView,this),this._log.dispose(),this._log=null)},n.openFuchouView=function(e){this._log&&(this._log.isPop=!1),null==this._fuchou&&(this._fuchou=new MineFuchouWindow,this._fuchou.addEventListener(EventName.WINDOW_DISPOSE,this.disposeFucouView,this)),this._fuchou.isPop2=!this._fuchou.isPop,this._fuchou.isPop&&this._fuchou.updateData(e.data)},n.disposeFucouView=function(e){this._fuchou&&(this._fuchou.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeFucouView,this),this._fuchou.dispose(),this._fuchou=null)},n.openDuoView=function(e){null==this._duo&&(this._duo=new MineDuoWindow,this._duo.addEventListener(EventName.WINDOW_DISPOSE,this.disposeDuoView,this)),this._duo.isPop2=!this._duo.isPop,this._duo.isPop&&this._duo.updateData(e)},n.disposeDuoView=function(e){this._duo&&(this._duo.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeDuoView,this),this._duo.dispose(),this._duo=null)},n.openRewardView=function(e){null==this._reward&&(this._reward=new MineRewardWindow,this._reward.addEventListener(EventName.WINDOW_DISPOSE,this.disposeRewardView,this)),this._reward.isPop2=!this._reward.isPop,this._reward.isPop&&this._reward.updateData(e)},n.disposeRewardView=function(e){this._reward&&(this._reward.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeRewardView,this),this._reward.dispose(),this._reward=null)},n.SCMD16211Response=function(e){0==e.flag?this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_FAIL,{dropList:e.drop_list})):this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_SUCCESS,{list:e.drop_list}))},t}(BaseContol);egret.registerClass(MinesControl,"MinesControl");var OnlineRewardControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t),this.checkIcon()},n.addCmdHandler=function(){var e=this;this.addCmdListener(23100,function(t){e.SCMD23100Response(t)},this),this.addCmdListener(23110,function(t){e.SCMD23110Response(t)},this)},n.addEventHandler=function(){this.addEventListener(EventName.ONLINE_REWARD_OPEN_HELP,this.openHelp,this),this.addEventListener(EventName.ONLINE_REWARD_GET,this.toGet,this),this.addEventListener(EventName.SCENE_CHANGE,this.checkIcon,this)},n.checkIcon=function(){OnlineRewardModel.getInstance().checkOpen()?null==this._fanLiIcon&&(this._fanLiIcon=TipsWordManager.getInstance().addWordIcon("btn_online"),this._fanLiIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickTipword,this)):(TipsWordManager.getInstance().removeIcon("btn_online"),this._fanLiIcon&&(this._fanLiIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickTipword,this),this._fanLiIcon.dispose(),this._fanLiIcon=null))},n.clickTipword=function(){this.openMainView()},n.openMainView=function(){this.onlineRewardWindow||(this.onlineRewardWindow=new OnlineRewardWindow,this.onlineRewardWindow.addEventListener(EventName.WINDOW_DISPOSE,this.closeMainView,this)),this.onlineRewardWindow.isPop=!0,this.to23100Request()
},n.updateMainView=function(){this.onlineRewardWindow&&this.onlineRewardWindow.isPop&&this.onlineRewardWindow.update()},n.closeMainView=function(e){this.onlineRewardWindow&&(this.onlineRewardWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.closeMainView,this),this.onlineRewardWindow.dispose(),this.onlineRewardWindow=null)},n.to23100Request=function(){this.sendSocketData(23100)},n.openHelp=function(){this.helpWindow||(this.helpWindow=new OnlineRewardHelpWindow,this.helpWindow.addEventListener(EventName.WINDOW_DISPOSE,this.closeHelpView,this)),this.helpWindow.isPop=!0},n.closeHelpView=function(e){this.helpWindow&&(this.helpWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.closeHelpView,this),this.helpWindow.dispose(),this.helpWindow=null)},n.toGet=function(){var e=new CCMD23110;e.type_id=OnlineRewardModel.getInstance().actType,this.sendSocketData(23110,e)},n.SCMD23100Response=function(e){OnlineRewardModel.getInstance().onlineTime=e.online_time,this.updateMainView()},n.SCMD23110Response=function(e){1==e.flag&&this.updateMainView()},t}(BaseContol);egret.registerClass(OnlineRewardControl,"OnlineRewardControl");var OrangesuitControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){var e=this;this.addCmdListener(13900,function(t){e.SCMD13900Response(t)},this),this.addCmdListener(13901,function(t){e.SCMD13901Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(OrangeSuitEvtName.ORANGESUIT_OPEN_DECOMPOSITION_VIEW,this.onOpenDecompositionViewHandler,this),this.addEventListener(OrangeSuitEvtName.CCMD13900,function(t){e.CCMD13900Request(t)},this),this.addEventListener(OrangeSuitEvtName.CCMD13901,function(t){e.CCMD13901Request(t)},this)},n.CCMD13900Request=function(e){var t=new CCMD13900;t.partner_id=e.data.id,t.slot=e.data.slot,this.sendSocketData(13900,t)},n.SCMD13900Response=function(e){0==e.flag?Message.show("提升失败"):Message.show("提升成功")},n.CCMD13901Request=function(e){var t=new CCMD13901;t.item_id=e.data.id,this.sendSocketData(13901,t)},n.SCMD13901Response=function(e){0==e.flag?Message.show("分解失败"):Message.show("分解成功")},n.onOpenDecompositionViewHandler=function(e){null==this._decompositionView&&(this._decompositionView=new DecompositionView,this._decompositionView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeDecompositionView,this)),this._decompositionView.type=e.data.type,this._decompositionView.setData(e.data.linkStrArr),this._decompositionView.isPop2=!0},n.disposeDecompositionView=function(e){this._decompositionView&&(this._decompositionView.dispose(),this._decompositionView=null)},t}(BaseContol);egret.registerClass(OrangesuitControl,"OrangesuitControl");var OrderGiftControl=function(e){function t(){e.call(this),this._init=!0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){var i=this;e.prototype.onGameStart.call(this,t),setTimeout2(function(){i.request22810()},6301)},n.addCmdHandler=function(){var t=this;e.prototype.addCmdHandler.call(this),this.addCmdListener(22800,function(e){t.response22800(e)},this),this.addCmdListener(22801,function(e){t.response22801(e)},this),this.addCmdListener(22810,function(e){t.response22810(e)},this)},n.addEventHandler=function(){e.prototype.addEventHandler.call(this);var t=this;t.addEventListener(EventName.REQUEST_22801,t.request22801Handler,t)},n.request22800=function(){this.sendSocketData(22800)},n.response22800=function(e){var t=e.order_gifts;if(OrderGiftModel.getInstance().myGiftList=t,this._init){for(var i=OrderGiftModel.getInstance().openGiftList,n=i.length,s=0;n>s;s++){var a=i[s],o=OrderGiftModel.getInstance().getRewardListByAid(a.act_id),r=o.length,h=OrderGiftModel.getInstance().getVo(a.act_id);if(null!=h&&!(h.platformList.indexOf(AllParamObj.platform)<0))for(var l=0;r>l;l++){var d=o[l];if(!OrderGiftModel.getInstance().hasGot(d.template_id))if("1"!=Tools.getPageParams("client")||11001!=d.template_id){if(ConfigManager.isTencent()){var _=Number(Tools.getPageParams("GIFT"));if(0==_||QQManager.getInstance().isWanbaJiFenGift(_)){console.log("orderGift continue id = "+_);continue}d.template_id==QQManager.getInstance().weiduanRewardID?window.OPEN_DATA&&"H5.APP.HDB_D"==window.OPEN_DATA.via&&this.request22801(d.template_id):(11004==a.act_id&&_==QQManager.CHUANSHI_GIFT||d.goods_id==_)&&this.request22801(d.template_id)}}else this.request22801(11001)}}this._init=!1,this.dispatchEvent(new ParamEvent(EventName.ORDER_GIFT_BACK))}},n.request22801=function(e){var t=new CCMD22801;t.tem_id=e,this.sendSocketData(22801,t)},n.response22801=function(e){if(e.flag>0){var t=OrderGiftModel.getInstance().getOrderGiftRewardVo(e.tem_id);if(t){for(var i=t.goods_id,n="恭喜您获得丰厚奖励：\n",s=[i],a=0;a<s.length;a++){var o=s[a],r=GoodsListProxy.getInstance().getGoodsInfoByType(o);r&&(n+=StringUtil.substitute("{0}x{1}",r.name,1),n+=a<s.length-1?"、":"\n")}GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"领取礼包成功",content:n}))}}else Message.show("定制礼包领取失败")},n.request22810=function(){this.sendSocketData(22810)},n.response22810=function(e){OrderGiftModel.getInstance().openGiftList=e.act_order_gifts,this.request22800()},n.request22801Handler=function(e){var t=e.data.id;this.request22801(t)},t}(BaseContol);egret.registerClass(OrderGiftControl,"OrderGiftControl");var PKControl=function(e){function t(){e.call(this),this._model=PKModel.getInstance()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.scmd=function(){var e=1;this._model.statu=e},t}(BaseContol);egret.registerClass(PKControl,"PKControl");var PKSkillControl=function(e){function t(){e.call(this),this._firstEffSi=0,this._secondEffSi=0,this._showBtnSi=0}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.gameStartCallBack=function(){e.prototype.gameStartCallBack.call(this);var t=this;FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_53,!1)&&(t.CCMD23800Request(),t.CCMD23900())},s.addEventHandler=function(){this.addEventListener(PKSkillEvtName.CCMD23800,this.CCMD23800Request,this),this.addEventListener(PKSkillEvtName.CCMD23801,this.CCMD23801Request,this),this.addEventListener(PKSkillEvtName.CCMD23910,this.CCMD23910Request,this),this.addEventListener(SceneEvtName.MAIN_CITY_CHANGE,this.cityMapChange,this),this.addEventListener(EventName.SCENE_CHANGE,this.sceneChange,this),this.addEventListener(PKSkillEvtName.CLOSE_PKSKILL_VIEW,this.closeView,this),this.addEventListener(EventName.RED_DOTS+RedDotsModel.ID_2024,this.showRedDot,this),this.addEventListener(PlayerBaseVO.CHANGE_FIGHTVALUE,this.showRedDot,this),this.addEventListener(BuildEvtName.BUILD_CCMD11800_UPDATE,this.showRedDot,this),this.addEventListener(BuildEvtName.BUILD_CCMD11810_UPDATE,this.showRedDot,this),WingModel.getInstance().addEventListener(WingEvtName.WING_LEVELUP,this.showRedDot,this),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_UPDATE_SPECIALEQUIP,this.showRedDot,this),this.addEventListener(MeridianEvtName.MERIDIAN_UPDATE_INFO,this.showRedDot,this)},s.addCmdHandler=function(){var e=this;this.addCmdListener(23800,function(t){e.SCMD23800Response(t)},this),this.addCmdListener(23801,function(t){e.SCMD23801Response(t)},this),this.addCmdListener(23900,function(t){e.SCMD23900Response(t)},this),this.addCmdListener(23910,function(t){e.SCMD23910Response(t)},this)},s.CCMD23800Request=function(){this.sendSocketData(23800)},s.CCMD23801Request=function(e){var t=new CCMD23801;t.template_id=e.data,this.sendSocketData(23801,t)},s.SCMD23800Response=function(e){PKSkillModel.getInstance().projectData=e,this.dispatchEvent(new ParamEvent(PKSkillEvtName.CCMD23800_UPDATE,e)),this.showRedDot()},s.SCMD23801Response=function(e){if(PKSkillModel.getInstance().projectData){if(e.level>PKSkillModel.getInstance().projectData.level){var t=GameContent.gameLayers.windowLayer,i=UrlUtil.getCommonEffectURL("jihuo");EffectManager.getInstance().showEffect(i,-28,158,t,110)}PKSkillModel.getInstance().projectData.level=e.level,PKSkillModel.getInstance().projectData.point=e.point;for(var n,s=PKSkillModel.getInstance().projectData.target_list,a=0;a<s.length;a++)if(n=s[a],n.template_id==e.target_id){s.splice(a,1);break}for(var o=0;o<e.target_list.length;o++)s.push(e.target_list[o]);PKSkillModel.getInstance().projectData.target_list=s}this.dispatchEvent(new ParamEvent(PKSkillEvtName.CCMD23800_UPDATE,PKSkillModel.getInstance().projectData)),this.showRedDot()},s.CCMD23910Request=function(e){var t=e.data.platform,i=e.data.id,n=new CCMD23910;n.plat_name=t,n.tar_role_id=i,this.sendSocketData(23910,n)},s.SCMD23910Response=function(e){if(e.flag>0){var t=this;t.clearFirstEffSi(),t.clearSecondEffSi();var i=GameContent.gameLayers.windowLayer;t._firstEffSi=setTimeout2(function(){var e=UrlUtil.getCommonEffectURL("jueji1");EffectManager.getInstance().showEffect(e,210,330,i)},1e3),t._secondEffSi=setTimeout2(function(){var e=UrlUtil.getCommonEffectURL("jueji2");EffectManager.getInstance().showEffect(e,350,580,i)},2e3)}},s.clearFirstEffSi=function(){var e=this;e._firstEffSi>0&&clearTimeout(e._firstEffSi)},s.clearSecondEffSi=function(){var e=this;e._secondEffSi>0&&clearTimeout(e._secondEffSi)},s.cityMapChange=function(e){var t=this;TipsWordManager.getInstance().isCity?t.skillBtn.visible=!0:t._skillBtn&&(t.skillBtn.visible=!1)},s.sceneChange=function(e){var t=this;SceneModel.getInstance().isHookSmall()?t.disposeSkillBtn():t.setBtnSkillStatu(),t.clearShowBtnSi()},s.CCMD23900=function(){this.sendSocketData(23900)},s.SCMD23900Response=function(e){var t=this;t._skillData=e,t.setBtnSkillStatu(),PKSkillModel.getInstance().isShowSkillBtnScene()&&(t.clearShowBtnSi(),e.cd>0&&(t._showBtnSi=setTimeout2(function(){t.setBtnSkillStatu()},1e3*e.cd+1e3)))},s.clearShowBtnSi=function(){var e=this;e._showBtnSi>0&&clearTimeout(e._showBtnSi)},s.setBtnSkillStatu=function(){},i(s,"skillBtn",function(){var e=this;if(null==e._skillBtn){e._skillBtn=new PicLoader(PicLoader.MAPTILE);var t=UrlUtil.getOtherIcon("pkSkillBtn");e._skillBtn.load(t,!0),e._skillBtn.y=GameContent.stageHeight-340,e._skillBtn.x=GameContent.stageWidth-200>>1,e._skillBtn.touchEnabled=!0,e._skillBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.clickSkillBtn,e)}return e._skillBtn}),s.clickSkillBtn=function(e){var t=RoleModel.getInstance().hunZhanTargetID;if(""!=t){var i=t.split("_"),n=i[0],s=parseInt(i[1]);this.dispatchEvent(new ParamEvent(PKSkillEvtName.CCMD23910,{platform:n,id:s}))}},s.disposeSkillBtn=function(){var e=this;e._skillBtn&&(e._skillBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.clickSkillBtn,e),e._skillBtn.dispose(),e._skillBtn=null)},s.openView=function(e){null==this._pkskillView&&(this._pkskillView=new PKSkillWindow,this._pkskillView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._pkskillView.isPop=!this._pkskillView.isPop},s.closeView=function(e){this._pkskillView&&(this._pkskillView.isPop=!1)},s.disposeView=function(e){this._pkskillView&&(this._pkskillView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._pkskillView.dispose(),this._pkskillView=null)},s.showRedDot=function(){RedDotsModel.getInstance().calMainArtifactIconRedDot()},t}(BaseContol);egret.registerClass(PKSkillControl,"PKSkillControl");var QQControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){var i=this;e.prototype.onGameStart.call(this,t),QQManager.getInstance().requestWanBaVipLv(),setTimeout2(function(){i.addFriendInviteIconIcon(),i.getWanBaGift(),i.initWeixinShare(),i.addHaoLiIcon(),i.fixedDataChange(null)},4402),setTimeout2(function(){QQManager.getInstance().getFriendList()},Math.floor(3400*Math.random()+3120))},n.addKuaiJieIcon=function(){null==this._kuaiJieIcon&&(this._kuaiJieIcon=TipsWordManager.getInstance().addWordIcon("btn_txzm"),this._kuaiJieIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickKuaiJie,this))},n.initWeixinShare=function(){QQManager.getInstance().isWeiXin()&&(QQManager.getInstance().setAllTypeShare(),this.dispatchEvent(new ParamEvent(ShareEvtName.CCMD15100)))},n.addCmdHandler=function(){var t=this;e.prototype.addCmdHandler.call(this),this.addCmdListener(20900,function(e){t.SCMD20900Response(e)},this),this.addCmdListener(21400,function(e){t.SCMD21400Response(e)},this)},n.addEventHandler=function(){var e=this;e.addEventListener(EventName.QQFRIEND_WINDOW,e.showFriendWindow,e),e.addEventListener(EventName.QQWEEKGIFT_WINDOW,e.showWeekGiftWindow,e),e.addEventListener(QQEvtName.QQFRIEND_RANK_SHOW,e.showFriendRankShowWindow,e),e.addEventListener(QQEvtName.REQEUST_20000,e.getKuaiJieReward,e),e.addEventListener(QQEvtName.REQEUST_20800,e.request20800,e),e.addEventListener(QQEvtName.REQEUST_20900,e.request20900,e),e.addEventListener(QQEvtName.REQEUST_20901,e.request20901,e),e.addEventListener(DailyEvtName.FIXED_DATA_CHANGE,e.fixedDataChange,e),e.addEventListener(QQEvtName.SHOW_QQ_HAOLI,e.showQQHaoLi,e),e.addEventListener(QQEvtName.SHOW_QQ_COVER,e.showQQCover,e),e.addEventListener(QQEvtName.ADD_COVER_ICON,e.addCoverIconHandler,e),e.addEventListener(EventName.OPEN_DOWN_LOAD_CLIENT_VIEW,e.openDownLoadView,e),e.addEventListener(EventName.ORDER_GIFT_BACK,e.orderGiftBackHander,e),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_UP,e.roleLvUp,e)},n.orderGiftBackHander=function(e){var t=QQManager.getInstance().coverRewardID,i=this;OrderGiftModel.getInstance().hasGot(t)||i.addCoverIcon()},n.openDownLoadView=function(){null==this._downLoad&&(this._downLoad=new DownloadClientWindow,this._downLoad.addEventListener(EventName.WINDOW_DISPOSE,this.disposeDownLoadView,this)),this._downLoad.isPop=!this._downLoad.isPop},n.disposeDownLoadView=function(e){this._downLoad&&(this._downLoad.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeDownLoadView,this),this._downLoad.dispose(),this._downLoad=null)},n.showQQCover=function(e){var t=this;null==t._qqCoverView&&(t._qqCoverView=new QQCoverWindow,t._qqCoverView.addEventListener(EventName.WINDOW_DISPOSE,t.disposeCoverView,t)),t._qqCoverView.isPop=!t._qqCoverView.isPop},n.disposeCoverView=function(e){var t=this;t._qqCoverView&&(t._qqCoverView.removeEventListener(EventName.WINDOW_DISPOSE,t.disposeCoverView,t),t._qqCoverView.dispose(),t._qqCoverView=null)},n.addCoverIconHandler=function(e){this.addCoverIcon()},n.addCoverIcon=function(){var e=this;null==e._qqCoverIcon&&(e._qqCoverIcon=TipsWordManager.getInstance().addWordIcon(TipsWord.QQ_COVER),e._qqCoverIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,e.clickCover,e))},n.clickCover=function(e){this.dispatchEvent(new ParamEvent(QQEvtName.SHOW_QQ_COVER))},n.showQQHaoLi=function(e){var t=this;null==t._qqHaoLi&&(t._qqHaoLi=new QQHaoLiWindow,t._qqHaoLi.addEventListener(EventName.WINDOW_DISPOSE,t.disposeHaoLi,t)),t._qqHaoLi.isPop=!t._qqHaoLi.isPop},n.disposeHaoLi=function(e){var t=this;t._qqHaoLi&&(t._qqHaoLi.addEventListener(EventName.WINDOW_DISPOSE,t.disposeHaoLi,t),t._qqHaoLi.dispose(),t._qqHaoLi=null)},n.addHaoLiIcon=function(){},n.clickHaoLi=function(e){this.dispatchEvent(new ParamEvent(QQEvtName.SHOW_QQ_HAOLI))},n.roleLvUp=function(e){var t=RoleModel.getInstance().getRoleCommon().level;t>30?RoleModel.getInstance().removeEventListener(RoleModel.ROLE_LV_UP,this.roleLvUp,this):20==t?this._kuaiJieIcon&&(this._kuaiJieIcon.showRedDot=!0):30==t&&this._kuaiJieIcon&&this.showKuaiJieView()},n.fixedDataChange=function(e){var t=FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE7);0==t&&(QQManager.getInstance().isWeiXin()||this.addKuaiJieIcon())},n.clickKuaiJie=function(e){ConfigManager.isIOS()||5==ConfigManager.getVia()?this.showKuaiJieView():this.dispatchEvent(new ParamEvent(EventName.OPEN_DOWN_LOAD_CLIENT_VIEW))},n.addFriendInviteIconIcon=function(){null==this._friendInviteIcon&&(this._friendInviteIcon=TipsWordManager.getInstance().addWordIcon("btn_txhy"),this._friendInviteIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickFriendInvite,this))},n.addWeekGiftIconIcon=function(){null==this._weekGiftIcon&&(this._weekGiftIcon=TipsWordManager.getInstance().addWordIcon("btn_txhl"),this._weekGiftIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickWeekGift,this))},n.clickFriendInvite=function(e){this.showFriendWindow(null)},n.clickWeekGift=function(e){this.showWeekGiftWindow(null)},n.showFriendWindow=function(e){null==this._friendWindow&&(this._friendWindow=new QQFriendWindow,this._friendWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeFriendWindow,this)),this._friendWindow.isPop=!this._friendWindow.isPop},n.disposeFriendWindow=function(e){this._friendWindow&&(this._friendWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeFriendWindow,this),this._friendWindow.dispose(),this._friendWindow=null)},n.showWeekGiftWindow=function(e){null==this._weekGiftWindow&&(this._weekGiftWindow=new QQWeekGiftWindow,this._weekGiftWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeWeekGiftWindow,this)),this._weekGiftWindow.isPop=!this._weekGiftWindow.isPop},n.disposeWeekGiftWindow=function(e){this._weekGiftWindow&&(this._weekGiftWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeWeekGiftWindow,this),this._weekGiftWindow.dispose(),this._weekGiftWindow=null)},n.showKuaiJieView=function(){null==this._kuaijieWindow&&(this._kuaijieWindow=new QQKuaiJieWindow,this._kuaijieWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeKuaiJieView,this)),this._kuaijieWindow.isPop=!this._kuaijieWindow.isPop,this._kuaijieWindow.isPop&&this._kuaiJieIcon&&(this._kuaiJieIcon.showRedDot=!1)},n.disposeKuaiJieView=function(){this._kuaijieWindow&&(this._kuaijieWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeKuaiJieView,this),this._kuaijieWindow.dispose(),this._kuaijieWindow=null)},n.showFriendRankShowWindow=function(e){null==this._friendRankShowWindow&&(this._friendRankShowWindow=new QQFriendRankShowWindow,this._friendRankShowWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeFriendRankShowWindow,this)),this._friendRankShowWindow.setData(e.data),this._friendRankShowWindow.isPop=!this._friendRankShowWindow.isPop},n.disposeFriendRankShowWindow=function(e){this._friendRankShowWindow&&(this._friendRankShowWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeFriendRankShowWindow,this),this._friendRankShowWindow.dispose(),this._friendRankShowWindow=null)},n.getKuaiJieReward=function(e){this.CCMD20000Request()},n.CCMD20000Request=function(){this.sendSocketData(2e4),this._kuaijieWindow&&(this._kuaijieWindow.isPop=!1),this._kuaiJieIcon&&(this._kuaiJieIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickKuaiJie,this),TipsWordManager.getInstance().removeIcon("btn_txzm"),this._kuaiJieIcon=null),RoleModel.getInstance().removeEventListener(RoleModel.ROLE_LV_UP,this.roleLvUp,this)},n.request20800=function(e){this.sendSocketData(20800)},n.request20900=function(e){this.sendSocketData(20800)},n.SCMD20900Response=function(e){QQManager.getInstance().sendGoldCD=e.last_time,this.dispatchEvent(new ParamEvent(QQEvtName.UPDATE_SENDGOLD_CD))},n.request20901=function(e){var t=new CCMD20901,i=e.data.list;t.friend_exs=new Array;for(var n=0;n<i.length;n++)t.friend_exs.push(i[n]);this.sendSocketData(20901,t)},n.getWanBaGift=function(){var e=Number(Tools.getPageParams("GIFT"));if(e>0){if(this.checkWanBaNew(e))return;if(QQManager.getInstance().checkWanBaVipGiftExchange(e))return;if(this.checkWanBaWeek(e))return;if(OrderGiftModel.getInstance().orderGiftList.indexOf(e)>=0)return;this.CCMD21400Request()}},n.checkWanBaNew=function(e){var t=0,i=SingleModel.getInstance().getSingVO(SingleModel.KEY_20403);if(i){var n=i.value.match(/\d+/g);if(t=parseInt(n[0]),t==e){var s=FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE9);return 0==s&&this.CCMD20410Request(),!0}}return!1},n.checkWanBaWeek=function(e){var t=0,i=SingleModel.getInstance().getSingVO(SingleModel.KEY_20404);if(i){var n=i.value.match(/\d+/g);if(t=parseInt(n[0]),t==e){var s=FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE10),a=Math.floor(TimeUtil.getWeekStartDate(1).getTime()/1e3),o=Math.floor(TimeUtil.getWeekEndDate(1).getTime()/1e3);return s>a&&o>s?(Message.show("每周签到礼包已经领取过了"),!0):(this.CCMD21410Request(),!0)}}return!1},n.CCMD21400Request=function(){this.sendSocketData(21400)},n.SCMD21400Response=function(e){for(var t="恭喜您获得丰厚奖励：\n",i=e.drop_list,n=0;n<i.length;n++){var s=i[n],a=GoodsListProxy.getInstance().getGoodsInfoByType(s.asset_id);a&&(t+=StringUtil.substitute("{0}x{1}",a.name,s.value),t+=n<i.length-1?"、":"\n")}t+="\n记得明天继续到玩吧礼包中心领取新的礼包哦！",GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"领取玩吧礼包成功",content:t}))},n.CCMD20410Request=function(){this.sendSocketData(20410)},n.CCMD21410Request=function(){this.sendSocketData(21410)},t}(BaseContol);egret.registerClass(QQControl,"QQControl");var RankControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.gameStartCallBack=function(){e.prototype.gameStartCallBack.call(this),this._rankIcon=TipsWordManager.getInstance().addWordIcon(TipsWord.RANK),this._rankIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openRankView,this),this._kuafuIcon=TipsWordManager.getInstance().addWordIcon(TipsWord.KUAFU),this._kuafuIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openKuafu,this)},n.openRankView=function(e){this.dispatchEvent(new ParamEvent(RankEvtName.RANK_OPEN_VIEW))},n.onOpenGuild=function(e){this.dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_GUILD))},n.openKuafu=function(e){this.dispatchEvent(new ParamEvent(KuaFuEvtName.KUAFU_OPEN_MAP))},n.openKing=function(e){this.dispatchEvent(new ParamEvent(KingEvtName.OPEN_VIEW_SELECT))},n.addEventHandler=function(){this.addEventListener(RankEvtName.RANK_OPEN_VIEW,this.openView,this),this.addEventListener(RankEvtName.RANK_OPEN_COMMON,this.openCommonView,this),this.addEventListener(RankEvtName.RANK_CCMD13500,this.CCMD13500Request,this),this.addEventListener(RankEvtName.RANK_CCMD13501,this.CCMD13501Request,this),this.addEventListener(RankEvtName.RANK_CCMD13502,this.CCMD13502Request,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(13500,function(t){e.SCMD13500Response(t)},this),this.addCmdListener(13501,function(t){e.SCMD13501Response(t)},this)},n.CCMD13500Request=function(e){var t=new CCMD13500;t.type=e.data,this.sendSocketData(13500,t)},n.CCMD13501Request=function(e){this._isShowOther=e.data.isShow;var t=new CCMD13501;t.role_id=e.data.id,this.sendSocketData(13501,t)},n.CCMD13502Request=function(e){var t=new CCMD13502;t.type=e.data,this.sendSocketData(13502,t)},n.SCMD13500Response=function(e){e.rank_list.sort(function(e,t){return e.rank>t.rank?1:-1}),this.dispatchEvent(new ParamEvent(RankEvtName.RANK_CCMD13500_UPDATE,e))},n.SCMD13501Response=function(e){this._isShowOther?(RankModel.getInstance().setOtherRoleData(e),RankModel.getInstance().isOtherRole=!0,this._otherView||(this._otherView=new FigureOtherWindow,this._otherView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeOtherView,this)),this._otherView.isPop=!0):this.dispatchEvent(new ParamEvent(RankEvtName.RANK_CCMD13501_UPDATE,e))},n.openView=function(e){if(FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_33)&&(this._rankView||(this._rankView=new RankWindow,this._rankView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._rankView.isPop=!this._rankView.isPop,this._rankView.isPop)){var t=Number(e.data);0>=t&&(t=1),this._rankView.selectIndex(t)}},n.disposeView=function(e){this._rankView&&(this._rankView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._rankView.dispose(),this._rankView=null)},n.openCommonView=function(e){this._commonView||(this._commonView=new RankCommonWindow,this._commonView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeCommonView,this)),this._commonView.isPop=!this._commonView.isPop,this._commonView.isPop&&(this._commonView.setType(e.data),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(RankEvtName.RANK_CCMD13500,e.data)))},n.disposeCommonView=function(e){this._commonView&&(this._commonView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeCommonView,this),this._commonView.dispose(),this._commonView=null)},n.disposeOtherView=function(e){this._otherView&&(RankModel.getInstance().isOtherRole=!1,this._otherView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeOtherView,this),this._otherView.dispose(),this._otherView=null)},t}(BaseContol);egret.registerClass(RankControl,"RankControl");var RedDotsControl=function(e){function t(){e.call(this),this.initRequestEvtsList=[{evtName:EventName.REQUEST_GOODSINFO,isPartner:!1,isRedDot:!0},{evtName:EventName.REQUEST_ECONOMY,isPartner:!1,isRedDot:!0},{evtName:EventName.REQUEST_BAGGRIDNUM,isPartner:!1,isRedDot:!0},{evtName:ShareEvtName.CCMD15100,isPartner:!1,isRedDot:!0},{evtName:FirstChargeEvtName.FIRST_CHARGE_CCMD21300,isPartner:!1,isRedDot:!0},{evtName:FigureEvtName.CCMD17200,isPartner:!1,isRedDot:!0},{evtName:FigureEvtName.CCMD23000,isPartner:!0,isRedDot:!0},{evtName:ChenghaoEvtName.CCMD12300,isPartner:!0,isRedDot:!0},{evtName:FigureEvtName.CCMD11100,isPartner:!0,isRedDot:!0},{evtName:WingEvtName.CCMD12100,isPartner:!0,isRedDot:!0},{evtName:MeridianEvtName.CCMD12000,isPartner:!0,isRedDot:!0},{evtName:ForgemindEvtName.CCMD12200,isPartner:!0,isRedDot:!0},{evtName:BuildEvtName.BUILD_CCMD11800,isPartner:!0,isRedDot:!0},{evtName:BuildEvtName.BUILD_CCMD11810,isPartner:!0,isRedDot:!0},{evtName:BuildEvtName.BUILD_CCMD11820,isPartner:!0,isRedDot:!0},{evtName:BuildEvtName.BUILD_CCMD11830,isPartner:!0,isRedDot:!0},{evtName:ArtifactEvtName.CCMD12900,isPartner:!1,isRedDot:!0},{evtName:FriendEvtName.FRIEND_CCMD11704,isPartner:!1,isRedDot:!0},{evtName:DominateEvtName.CCMD12400,isPartner:!0,isRedDot:!0},{evtName:SkillEvtName.CCMD14700,isPartner:!0,isRedDot:!0},{evtName:ArtifactEvtName.CCMD15900,isPartner:!1,isRedDot:!0},{evtName:ArtifactEvtName.CCMD16000,isPartner:!1,isRedDot:!0},{evtName:HuoDongDailyEvtName.REQEUST_16100,isPartner:!1,isRedDot:!0},{evtName:HuoDongDailyEvtName.REQEUST_16600,isPartner:!1,isRedDot:!0},{evtName:HuoDongDailyEvtName.REQEUST_18100,isPartner:!1,isRedDot:!0},{evtName:VipEvtName.CCMD16700,isPartner:!1,isRedDot:!0},{evtName:FanLiEvtName.CCMD17300,isPartner:!1,isRedDot:!0},{evtName:FanLiEvtName.CCMD19710,isPartner:!1,isRedDot:!0},{evtName:HuoDongDailyEvtName.REQEUST_18200,isPartner:!1,isRedDot:!0},{evtName:FashionEvtName.CCMD13600,isPartner:!0,isRedDot:!0},{evtName:HeFuEvtName.CCMD18500,isPartner:!1,isRedDot:!0},{evtName:HeFuEvtName.CCMD18600,isPartner:!1,isRedDot:!0},{evtName:HeFuEvtName.CCMD18800,isPartner:!1,isRedDot:!0},{evtName:HeFuEvtName.CCMD19000,isPartner:!1,isRedDot:!0},{evtName:HeFuEvtName.CCMD19100,isPartner:!1,isRedDot:!0},{evtName:AchievementEvtName.CCMD21100,isPartner:!1,isRedDot:!0},{evtName:AwakeEquipEvtName.CCMD21600,isPartner:!0,isRedDot:!0},{evtName:BuildEvtName.BUILD_CCMD21900,isPartner:!0,isRedDot:!0},{evtName:MallEvtName.CCMD22700,isPartner:!1,isRedDot:!0}],this._consDelay=90}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t),this.CCMD14600Request(),this.initRequestCCMD()},n.addEventHandler=function(){},n.addCmdHandler=function(){var e=this;this.addCmdListener(14600,function(t){e.SCMD14600Response(t)},this)},n.CCMD14600Request=function(){this.sendSocketData(14600)},n.SCMD14600Response=function(e){RedDotsModel.getInstance().setRedDotsData(e)},n.initRequestCCMD=function(){TimerManager.getInstance().add(this._consDelay,this.onTimer,this)},n.onTimer=function(){if(this.initRequestEvtsList.length<=0)return void TimerManager.getInstance().remove(this._consDelay,this.onTimer,this);var e,t,i,n,s=RoleModel.getInstance().getPartnerList(),a=this.initRequestEvtsList.shift();if(e=a.isPartner,t=a.evtName,e)for(var o=0;o<s.length;o++)i=new ParamEvent(t),n=s[o],i.data={id:n.parnerID},GameDispatcher.getInstance().dispatchEvent(i);else GameDispatcher.getInstance().dispatchEvent(new ParamEvent(t))},t}(BaseContol);egret.registerClass(RedDotsControl,"RedDotsControl");var ReliveControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.addEventHandler=function(){e.prototype.addEventHandler.call(this),this.addEventListener(EventName.SHOW_RELIVE_VIEW,this.showReliveViewHandler,this),this.addEventListener(EventName.CLOSE_RELIVE_VIEW,this.closeReliveViewHandler,this),this.addEventListener(SceneEvtName.SERVER_REMOVE_MON,this.serverRemoveMon,this)},n.showReliveViewHandler=function(e){this.showReliveView()},n.showReliveView=function(){null==this._reliveView&&(this._reliveView=new ReliveView),this._reliveView.showView()},n.closeReliveViewHandler=function(e){this._reliveView&&this._reliveView.onRemove()},n.serverRemoveMon=function(e){SceneModel.getInstance().isKFBossScene()&&this._reliveView&&this._reliveView.parent&&this.dispatchEvent(new ParamEvent(EventName.EXIT_SCENE))},t}(BaseContol);egret.registerClass(ReliveControl,"ReliveControl");var RobotControl=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(RobotControl,"RobotControl");var RoleControl=function(e){function t(){e.call(this),this._timeGap=5e3}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t);var i=this;i.sendSocketData(11300),TimerManager.getInstance().add(i._timeGap,i.waiGua,i)},n.waiGua=function(){this.sendSocketData(10021)},n.addEventHandler=function(){this.addEventListener(EventName.MAINUI_SPEED_PK,this.openSpeedPK,this),this.addEventListener(EventName.REQUEST_SPEED_PK,this.CCMD13000Request,this),this.addEventListener(EventName.SHOW_OFFLINEVIEW,this.showOfflineView,this),this.addEventListener(EventName.MAINUI_CLICK_NAME,this.showEditNameView,this),this.addEventListener(EventName.MAINUI_CLICK_HEAD,this.showEditHeadView,this),this.addEventListener(EventName.OPEN_FIGHT_UP_WINDOW,this.showFightUpView,this),this.addEventListener(EventName.CCMD_10210,this.CCMD10210Request,this),this.addEventListener(EventName.CCMD_10202,this.CCMD10202Request,this),this.addEventListener(EventName.CCMD_13010,this.CCMD13010Request,this),this.addEventListener(EventName.CCMD13020,this.CCMD13020Request,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(10201,function(t){e.SCMD10201Response(t)},this),this.addCmdListener(11300,function(t){e.SCMD11300Response(t)},this),this.addCmdListener(11301,function(t){e.SCMD11301Response(t)},this),this.addCmdListener(10203,function(t){e.SCMD10203Response(t)},this),this.addCmdListener(13e3,function(t){e.SCMD13000Response(t)},this),this.addCmdListener(10310,function(t){e.SCMD10310Response(t)},this),this.addCmdListener(10210,function(t){e.SCMD10210Response(t)},this),this.addCmdListener(10202,function(t){e.SCMD10202Response(t)},this)},n.CCMD10210Request=function(e){var t=new CCMD10210;t.new_name=e.data,this.sendSocketData(10210,t)},n.CCMD10202Request=function(e){var t=new CCMD10202;t.icon=e.data,this.sendSocketData(10202,t)},n.SCMD10201Response=function(e){RoleModel.getInstance().setRoleLevAndExp(e.role_level,e.role_exp)},n.SCMD10202Response=function(e){RoleModel.getInstance().setHead(e.icon)},n.SCMD10203Response=function(e){RoleModel.getInstance().offlineRewardData=e,MainUIModel.getInstance().isMainUIInited&&this.dispatchEvent(new ParamEvent(EventName.SHOW_OFFLINEVIEW))},n.showOfflineView=function(e){this._offlineView||(this._offlineView=new OfflineRewardWindow,this._offlineView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeOffView,this)),this._offlineView.updateData(RoleModel.getInstance().offlineRewardData),this._offlineView.isPop=!0},n.disposeOffView=function(e){this._offlineView&&(this._offlineView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeOffView,this),this._offlineView.dispose(),this._offlineView=null)},n.SCMD11300Response=function(e){DailyModel.getInstance().updateData(e)
},n.SCMD11301Response=function(e){DailyModel.getInstance().dispose()},n.CCMD13000Request=function(){this.sendSocketData(13e3)},n.SCMD13000Response=function(e){this._speedPKView&&this._speedPKView.updateData(e)},n.openSpeedPK=function(){this._speedPKView||(this._speedPKView=new SpeedPKWindow,this._speedPKView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._speedPKView.isPop=!this._speedPKView.isPop,this._speedPKView.isPop&&this._speedPKView.updateData()},n.disposeView=function(e){this._speedPKView&&(this._speedPKView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._speedPKView.dispose(),this._speedPKView=null)},n.showEditNameView=function(){this._nameEditView||(this._nameEditView=new RoleNameEditWindow,this._nameEditView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeEditNameView,this)),this._nameEditView.isPop=!this._nameEditView.isPop,this._nameEditView.isPop&&this._nameEditView.updateData()},n.disposeEditNameView=function(e){this._nameEditView&&(this._nameEditView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeEditNameView,this),this._nameEditView.dispose(),this._nameEditView=null)},n.showEditHeadView=function(){this._head||(this._head=new RoleEditHeadWindow,this._head.addEventListener(EventName.WINDOW_DISPOSE,this.disposeEditHeadView,this)),this._head.isPop=!this._head.isPop},n.disposeEditHeadView=function(e){this._head&&(this._head.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeEditHeadView,this),this._head.dispose(),this._head=null)},n.showFightUpView=function(){this._fightUp||(this._fightUp=new FightUpWindow,this._fightUp.addEventListener(EventName.WINDOW_DISPOSE,this.disposeFightUpView,this)),this._fightUp.isPop=!this._fightUp.isPop},n.disposeFightUpView=function(e){this._fightUp&&(this._fightUp.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeFightUpView,this),this._fightUp.dispose(),this._fightUp=null)},n.SCMD10310Response=function(e){var t=PlayerBaseVO.makeUid(null,e.partner_id),i=RoleModel.getInstance().getPartnerInfo(t),n=AppearanceUtil.changeAppListToVo(e.appearance);i&&i.setAppVo(n)},n.SCMD10210Response=function(e){e.flag>0&&RoleModel.getInstance().setName(e.new_name)},n.CCMD13010Request=function(e){this.sendSocketData(13010)},n.CCMD13020Request=function(e){this.sendSocketData(13020)},t}(BaseContol);egret.registerClass(RoleControl,"RoleControl");var RongLianControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){var e=this;this.addCmdListener(10900,function(t){e.SCMD10900Response(t)},this),this.addCmdListener(10901,function(t){e.SCMD10901Response(t)},this),this.addCmdListener(10902,function(t){e.SCMD10902Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(RongLianEvtName.RONGLIAN_OPEN_VIEW,this.onOpenRongLianView,this),this.addEventListener(RongLianEvtName.RONGLIAN_OPEN_SELECT_VIEW,this.onOpenRongLianSelectView,this),this.addEventListener(RongLianEvtName.CCMD10900,function(t){e.CCMD10900Request(t)},this),this.addEventListener(RongLianEvtName.CCMD10901,function(t){e.CCMD10901Request(t)},this),this.addEventListener(RongLianEvtName.CCMD10902,function(t){e.CCMD10902Request(t)},this)},n.CCMD10900Request=function(e){this.sendSocketData(10900)},n.SCMD10900Response=function(e){RongLianProxy.getInstance().exp=e.exp,RongLianProxy.getInstance().lv=e.level,this.dispatchEvent(new ParamEvent(RongLianEvtName.RONGLIAN_UPDATE_INFO))},n.CCMD10901Request=function(e){var t=new CCMD10901;t.item_ids=e.data.item_ids,this.sendSocketData(10901,t)},n.SCMD10901Response=function(e){switch(e.type){case 0:Message.show("回收失败");break;case 1:EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("ronglian"),-28,158,GameContent.gameLayers.noticeLayer,110,!1),this.dispatchEvent(new ParamEvent(RongLianEvtName.RONGLIAN_HUISHOU_SUCESS))}},n.CCMD10902Request=function(e){var t=new CCMD10902;t.item_ids=e.data.item_ids,this.sendSocketData(10902,t)},n.SCMD10902Response=function(e){switch(e.type){case 0:Message.show("熔炼失败");break;case 1:this.dispatchEvent(new ParamEvent(RongLianEvtName.RONGLU_HUISHOU_SUCESS))}},n.onOpenRongLianView=function(e){var t=!0,i=0;e.data&&(t=e.data.state,i=e.data.index),this._rongliangView||(this._rongliangView=new RongLianWindow),this._rongliangView.openView(i,t)},n.onOpenRongLianSelectView=function(e){var t=!0,i=1;e.data&&(i=e.data.type),this._rongLianSelectView||(this._rongLianSelectView=new RongLianSelectView,this._rongLianSelectView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeRongLianSelectWindow,this)),this._rongLianSelectView.type=i,this._rongLianSelectView.isPop2=t},n.disposeRongLianSelectWindow=function(e){this._rongLianSelectView&&(this._rongLianSelectView.dispose(),this._rongLianSelectView=null)},t}(BaseContol);egret.registerClass(RongLianControl,"RongLianControl");var SceneControl=function(e){function t(){e.call(this),this._autoSi=0,this._continueSi=0,this._skillTimerDic=new Object,this._firstTime=!0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this),this.startSocketListener(),this._model=SceneModel.getInstance(),this.createScene(),GameContent.gameLayers.sceneRootLayer.addChild(this._scene)},n.addEventHandler=function(){this.addEventListener(EventName.REQUEST_WAVE,this.request10600,this),this.addEventListener(EventName.WAVE_MONSTER_END,this.waveMonsterEnd,this),this.addEventListener(EventName.EXIT_SCENE,this.waveBossFinish,this),this.addEventListener(EventName.SHOW_FR_SUCCESS,this.showFrSuccessHandler,this),this.addEventListener(EventName.SHOW_FR_FAIL,this.showFrFailHandler,this),this.addEventListener(EventName.REQUEST_NEXT_WAVE,this.requestNextWave,this),this.addEventListener(MeetPlayerEvtName.FIGHT_MEET_PLAYER,this.fightMeetPlayerHandler,this),this.addEventListener(MeetPlayerEvtName.MP_FIGHT_FINISH,this.mpFightFinishHandler,this),this.addEventListener(EventName.REQUEST_LUNHUI,this.request10610,this),this.addEventListener(CheckPointBossEvtName.CHECKPOINTBOSS_ENTER,this.enterCheckPointBossHandler,this),this.addEventListener(EventName.ALL_PARTNER_DEAD,this.allPartnerDeadHandler,this),this.addEventListener(EventName.SCENE_CHANGE,this.sceneChangeHandler,this),this.addEventListener(DailyEvtName.DAILY_UPDATE,this.showRedDots,this),this.addEventListener(VipEvtName.VIP_LEVEL_CHANGE,this.showRedDots,this),this.addEventListener(EventName.CLOSE_WINDOW,this.closeLunhui,this),this.addEventListener(EventName.GET_WAVE_REWARD,this.getWaveReward,this),this.addEventListener(EventName.CLIENT_RELIVE,this.clientRelive,this),this.addEventListener(EventName.SHOW_BOSS_COMING,this.showBossEnter,this),this.addEventListener(EventName.LUNHUI_ONEKEY,this.oneKeyLunHui,this),this.addEventListener(EventName.SHOW_TIPS,this.showCommonTips,this),this.addEventListener(EventName.CLOSE_TIPS_WINDOW,this.closeTipsWindow,this),this.addEventListener(EventName.OPEN_LUNHUI_WINDOW,this.openLunhui,this),this.addEventListener(EventName.REQUEST_10604,this.request10604Handler,this),this.addEventListener(EventName.ENTER_MAINCITY,this.request24200Handler,this),this.addEventListener(EventName.EXIT_MAINCITY,this.request24201Handler,this),this._model.addEventListener(SceneEvtName.WALK_START,this.roleWalkStartHandler,this),SceneModel.getInstance().addEventListener(SceneModel.UPDATE_SCENE_WAVE,this.showRedDots,this)},n.onGameStart=function(t){var i=this;e.prototype.onGameStart.call(this,t),setTimeout2(function(){i._tw_lunhui=TipsWordManager.getInstance().addWordIcon(TipsWord.LUNHUI),i._tw_lunhui.addEventListener(egret.TouchEvent.TOUCH_TAP,i.openLunhui,i)},987)},n.createScene=function(){this._scene=new Scene,this._model.addEventListener(FightEvent.ATTACKMONSTER,this.attackMonster,this),this._model.addEventListener(FightEvent.ATTACKPLAYER,this.attackPlayer,this)},n.startSocketListener=function(){var e=this;this.addCmdListener(10600,function(t){e.response10600(t)},this),this.addCmdListener(10605,function(t){e.response10605(t)},this),this.addCmdListener(10610,function(t){e.response10610(t)},this),this.addCmdListener(10620,function(t){e.response10620(t)},this),this.addCmdListener(10800,function(t){e.response10800(t)},this),this.addCmdListener(10801,function(t){e.response10801(t)},this),this.addCmdListener(10802,function(t){e.response10802(t)},this),this.addCmdListener(10803,function(t){e.response10803(t)},this),this.addCmdListener(10805,function(t){e.response10805(t)},this),this.addCmdListener(10804,function(t){e.response10804(t)},this),this.addCmdListener(10806,function(t){e.response10806(t)},this),this.addCmdListener(10810,function(t){e.response10810(t)},this),this.addCmdListener(10700,function(t){e.response10700(t)},this),this.addCmdListener(10701,function(t){e.response10701(t)},this),this.addCmdListener(10702,function(t){e.response10702(t)},this),this.addCmdListener(10703,function(t){e.response10703(t)},this),this.addCmdListener(10820,function(t){e.response10820(t)},this)},n.attackMonster=function(e){var t=(this._model.getCurrentSceneType(),e.data.monsterId),i=e.data.parnerID,n=SkillModel.getInstance().getPartnerSkillCanUse(i);0!=n&&(103005!=n&&103010!=n||!this._model.hasPetMonster||(n=SkillModel.getInstance().getPartnerSkillCanUse(i,n)),RoleModel.getInstance().isMyPartner(i)?this._model.isHookSmall()||this._model.isNoviceScene()?(this._scene.playFight(i,t,n),SkillModel.getInstance().cdSkill(i,n)):this.request10700(i,n,AttackType.MONSTER,t):this._model.isGuildFuben()?this.request10700(i,n,AttackType.MONSTER,t):this._model.isHookSmall()&&(this._scene.playFight(i,t,n),SkillModel.getInstance().cdSkill(i,n)))},n.attackPlayer=function(e){var t=e.data.partnerID,i=e.data.target,n=(this._model.getCurrentSceneType(),0),s=this._model.getPlayer(t);null==s&&trace("attackPlayer  ----- null attackID = ",t),n=SkillModel.getInstance().getPartnerSkillCanUse(t),this._model.isHookSmall()?(this._scene.playFightPlayer(t,i,n),SkillModel.getInstance().cdSkill(t,n)):this.request10700(t,n,AttackType.PARTNER,i)},n.request10600=function(e){this.sendSocketData(10600)},n.response10600=function(e){var t=this,i=this._model.getWaveConfig(e.wave_id);if(this._model.setSceneWave(e),this._model.checkCanKillWaveBoss()&&this._model.isAutoKillBoss)return void this.request10603();TaskModel.getInstance().isNovicePlayer()&&0==TaskModel.getInstance().isNoviceTaskFinished()?this.buildScene(SceneInfoVo.NOVICE_PALACE):this.buildScene(i.sceneID),(MeetPlayerModel.getInstance().fightMPID>0||MeetPlayerModel.getInstance().gotoFightMeetPlayerID>0)&&this.clearFightMP(),TaskModel.getInstance().isNovicePlayer()&&0==TaskModel.getInstance().isNoviceTaskFinished()||this._model.createWaveMonster(),this._model.isStart=!0,this._model.isFirstScene&&(GameStateManager.getInstance().isSceneLoaded=!0,GameStateManager.getInstance().isResLoaded&&MainUIModel.getInstance().isMainUIInited&&this.dispatchEvent(new ParamEvent(EventName.GAME_START)),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(Main.SHOW_MAINUI)),this._model.isFirstScene=!1),GameStateManager.getInstance().state=GameStateManager.NORMAL,this._autoSi>0&&clearTimeout(this._autoSi);var n=3e4;RoleModel.getInstance().getAllPartnerFight()>3e7&&(n=18e4),this._autoSi=setTimeout2(function(){t["continue"]()},n)},n["continue"]=function(){this._model.isHookSmall()&&(0==this._model.getCurrentWaveLeft()?this.dispatchEvent(new ParamEvent(EventName.REQUEST_NEXT_WAVE)):this._scene.rolesToFight())},n.waveMonsterEnd=function(e){var t=this._model.getCurrentWaveID();this.request10602(t),this._model.toFightBossMeet||MeetPlayerModel.getInstance().gotoFightMeetPlayerID>0||this.dispatchEvent(new ParamEvent(EventName.REQUEST_NEXT_WAVE))},n.request10603=function(){var e=new CCMD10603;e.level_id=this._model.getSceneWave().wave_id,this.sendSocketData(10603,e)},n.request10601=function(){this.sendSocketData(10601)},n.request10602=function(e){var t=new CCMD10602;t.wave_id=e,this.sendSocketData(10602,t)},n.response10605=function(e){var t=Tools.convertDropList(e.drop_list);this._model.showResult(1,t)},n.response10610=function(e){if(1==e.flag){var t=SceneModel.getInstance().getSceneWave();t&&(t.wave_id=1),SceneModel.getInstance().lunHuiBack(!0)}},n.response10620=function(e){for(var t=StringUtil.substitute("恭喜！从第【{0}】关回归第【{1}】关",e.curr_wave_id,e.total_wave_id),i="获得以下奖励：\n",n=e.drop_list,s=0;s<n.length;s++){var a=n[s];i+=ColorUtil.getGoodsHtmlName(a.asset_id,a.value),s<n.length-1&&(i+="、")}this.dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:t,content:i})),this._lunhuiView&&(this._lunhuiView.isPop=!1)},n.response10800=function(e){this.buildScene(e.scene_id,new Point(e.pos_x,e.pos_y),!0,!0)},n.buildScene=function(e,t,i,n){void 0===t&&(t=null),void 0===i&&(i=!1),void 0===n&&(n=!1),i&&(this._model.isStart=!1),this._model.setCurrentSceneInfo(e,t);var s=!1;(this._model.rebuildScene||n)&&(this._model.clearElement(),this._model.buildScene(e),s=!0),this._model.isStart=!0,s&&this.dispatchEvent(new ParamEvent(EventName.SCENE_CHANGE)),n||(ReliveModel.getInstance().isAuto=!1)},n.response10804=function(e){for(var t=0;t<e.mon_ids.length;t++){var i=e.mon_ids[t];this._model.removeMonster(i.mon_id)}this.dispatchEvent(new ParamEvent(SceneEvtName.SERVER_REMOVE_MON))},n.response10805=function(e){var t=this;if(this._model.isStart){var i=this._model.isMaterialFuBen();this._model.addMonsterByList(e.scene_mon,i)}(this._model.isBossScene()||this._model.isChanllengeFuBen())&&(this._continueSi>0&&clearTimeout(this._continueSi),this._continueSi=setTimeout2(function(){t._scene.rolesToFight()},1100))},n.response10806=function(e){var t=this,i=this._model.isMaterialFuBen();this._model.addMonsterByList(e.scene_mon,i);var n=e.scene_partner;if(n.length>0){var s=new SCMD10803;s.scene_partner=e.scene_partner,this.response10803(s,!1)}(this._model.isBossScene()||this._model.isChanllengeFuBen())&&(this._continueSi>0&&clearTimeout(this._continueSi),this._continueSi=setTimeout2(function(){t._scene.rolesToFight()},1100))},n.response10810=function(e){this._model.addRole(e),this.dispatchEvent(new ParamEvent(SceneEvtName.ROLE_ENTER,{vo:e}))},n.request10700=function(e,t,i,n){var s=new CCMD10700,a=this._model.getPlayer(e);if(null!=a){if(RoleModel.getInstance().isMyPartner(e)){var o=0;this._skillTimerDic[t]&&(o=this._skillTimerDic[t]);var r=getTimer(),h=r-o,l=SkillModel.getInstance().getSkill(t);l&&h<l.cd&&(t=SkillModel.getInstance().getPartnerBaseSkill(a.uid)),this._skillTimerDic[t]=r}if(s.partner_id=a.parnerID,s.skill_id=t,s.type=i,s.pos_x=0,s.pos_y=0,i==AttackType.MONSTER)s.plat_name="",s.mon_id=n;else{var d=this._model.getPlayer(n);d&&(s.plat_name=d.platform,s.mon_id=d.parnerID)}SkillModel.getInstance().cdSkill(e,t),this.sendSocketData(10700,s)}},n.response10700=function(e){if(this._model.isKFBossScene()&&e.type==AttackType.PARTNER){var t=PlayerBaseVO.makeUid(e.plat_name,e.att_id);if(RoleModel.getInstance().isMyPartner(t)){var i=getTimer();this._skillTimerDic[e.skill_id]=i,0==e.skill_id&&Message.show("战斗技能id等于0")}}if(CityWarModel.getInstance().parse10700(e),this._scene.playRealFight(e),e.type==AttackType.PARTNER){var t=PlayerBaseVO.makeUid(e.plat_name,e.att_id);if((RoleModel.getInstance().isMyPartner(t)||this._model.isGuildFuben())&&SkillModel.getInstance().cdSkill(t,e.skill_id),this._model.isClientMakeBossBloodScene()){var n=BossModel.getInstance().change10700ToBssDamageVo(e);n.bossID>0&&BossModel.getInstance().setBossDamageInfo(n),this.dispatchEvent(new ParamEvent(EventName.SHOW_BOSSBLOOD_VIEW))}if(this._model.isClientHunZhan()){var t=PlayerBaseVO.makeUid(e.plat_name,e.att_id),s=this._model.getPartnerInScene(t);if(s){var a=RoleModel.getInstance().getRoleCommon().guild_id;if(s.getBangID()!=a||0==s.getBangID()||0==a){var o=RoleModel.getInstance().setAllPartnerChangeTarget(s.pid);if(o){var r=this.getOthersBirthPoint(!1);this._model.addPartnersToScene(s.pid,r,!0)}}}}}for(var h=e.battle_result,l=0;l<h.length;l++){var d=h[l];if(2==d.type){var _=new SCMD10701;_.buff_id=BuffVo.HUSHEN,_.type=d.obj_type,_.def_id=d.obj_id,_.plat_name=d.plat_name,this.response10701(_)}}},n.response10701=function(e){this.dispatchEvent(new ParamEvent(EventName.SHOW_BUFF,{data:e}))},n.response10702=function(e){this.dispatchEvent(new ParamEvent(EventName.REMOVE_BUFF,{data:e}))},n.waveBossFinish=function(e){void 0===e&&(e=null),this.request10801()},n.request10801=function(){this.sendSocketData(10801)},n.response10801=function(e){for(var t=0;t<e.role_ids.length;t++){var i=e.role_ids[t],n=PlayerBaseVO.makeUid(i.plat_name,i.role_id);this._model.removeRole(n),this._model.removePlayerInHunZhan(n),CityWarModel.getInstance().removeRoomInfo(n);var s=RoleModel.getInstance().checkHunZhanReset(n);this._model.isClientHunZhan()&&s&&this.dispatchEvent(new ParamEvent(EventName.CHECK_HUNZHAN_FIGHT))}this.dispatchEvent(new ParamEvent(SceneEvtName.ROLE_EXIT,{vo:e}))},n.response10802=function(e){for(var t,i=e.partner_ids,n=0;n<i.length;n++){t=i[n];var s=PlayerBaseVO.makeUid(t.plat_name,t.partner_id);RoleModel.getInstance().isMyPartner(s)||this._model.removePartnerInHunZhan(s),this._model.removePlayer(s)}},n.response10803=function(e,t){void 0===t&&(t=!0);for(var i=e.scene_partner,n=this.getOthersBirthPoint(t),s="",a=0;a<i.length;a++){var o=i[a],r=PlayerBaseVO.makeUid(o.plat_name,o.partner_id);if(!(RoleModel.getInstance().isMyPartner(r)||s==r&&SceneModel.getInstance().isMainCity())){var h=SceneModel.getInstance().getPlayerNum(),l=RoleModel.getInstance().changeScenePartnerToVo(o);this._model.getCurrentRealFigureNum()>=SceneModel.MAX_REALFIGURE&&!this._model.isMainCity()?l.isRealFigure=!1:(l.isRealFigure=!0,this._model.addOneRealFigure()),this._model.storePartner(l),h>=this._model.getSceneMaxPlayerNum()&&s!=r||(SceneModel.getInstance().isMainCity()?(l.x=o.pos_x,l.y=o.pox_y):(l.x=n.x,l.y=n.y),this._model.isCityWarInner()?l.useType=PlayerBaseVO.REAL:this._model.isGuildFuben()?l.useType=PlayerBaseVO.HELP_FIGHTER:l.useType=PlayerBaseVO.FIGHTER,this._model.addPlayerByTimer(l),s=l.uid)}}},n.getOthersBirthPoint=function(e){if(void 0===e&&(e=!0),this._model.isGuildBoss()||this._model.isKFBossScene()||this._model.isRoundBoss()){var t;if(this._model.isGuildBoss())t=BossModel.getInstance().getCurrentGuildBoss();else if(this._model.isKFBossScene())t=BossModel.getInstance().getBossAwakeVo(BossModel.getInstance().kfBossID);else if(this._model.isRoundBoss()){var i=BossModel.getInstance().getCurrentRoundBossVo();t=BossModel.getInstance().changeRoundBossToCommon(i)}else this._model.isBossHome()?t=BossModel.getInstance().getBossHomeVo(BossModel.getInstance().BossID_home):this._model.isWildBoss()?t=BossModel.getInstance().getBossFieldVo(BossModel.getInstance().BossID_field):this._model.isEliteBoss()&&(t=BossModel.getInstance().getBossEliteVo(BossModel.getInstance().BossID_elite));if(e)var n=t.randomPath.length,s=Math.ceil(Math.random()*(n-1)),a=t.randomPath[s];else{var a=t.boss_pos;a=this._model.changeToPixsPoint(a),a=this._model.getRandomPosNearPoint(a,150,360),a=this._model.changeToTilePoint(a)}}else if(this._model.isCityWar())var o=CityWarModel.getInstance().getCityWarSceneConfig(this._model.id),n=o.randomPath.length,s=Math.ceil(Math.random()*(n-1)),a=o.randomPath[s];else{var r=this._model.getCurrentSceneInfo();if(r){var h=Tools.makeCustomRandom(5),l=Tools.makeCustomRandom(5);a=new Point(r.x+h,r.y+l)}else a=this._model.getSceneCenter(),a=this._model.changeToTilePoint(a)}return a},n.request10604Handler=function(e){var t=e.data.id;this.request10604(t)},n.request10604=function(e){var t=new CCMD10604;t.level_id=e,this.sendSocketData(10604,t)},n.request24200Handler=function(e){this.sendSocketData(24200)},n.request24201Handler=function(e){this.sendSocketData(24201)},n.roleWalkStartHandler=function(e){var t=e.data.path[0],i=new CCMD10820;i.pos_x=t.x,i.pox_y=t.y,this.sendSocketData(10820,i)},n.showFrSuccessHandler=function(e){if(null==this._frSuccessView&&(this._frSuccessView=new FightSuccessWindow,this._frSuccessView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeFrSuccess,this)),e.data&&e.data.type)this._frSuccessView.showEffect(e.data.id,e.data.type);else{var t=e.data.list;this._frSuccessView.setData(t)}this._frSuccessView.isPop=!0},n.disposeFrSuccess=function(){this._frSuccessView&&(this._frSuccessView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeFrSuccess,this),this._frSuccessView.dispose(),this._frSuccessView=null)},n.showFrFailHandler=function(e){null==this._frFailView&&(this._frFailView=new FightFailWindow,this._frFailView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeFrFailView,this));var t=e.data.dropList;this._frFailView.setData(t),this._frFailView.isPop=!0,this._model.isHookWaveBoss()&&(this._model.isAutoKillBoss=!1)},n.disposeFrFailView=function(){this._frFailView&&(this._frFailView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeFrFailView,this),this._frFailView.dispose(),this._frFailView=null)},n.requestNextWave=function(e){this.request10601()},n.fightMeetPlayerHandler=function(e){var t=e.data.vo,i=(e.data.id,MeetPlayerModel.getInstance().getMpPos(t.role_id));MeetPlayerModel.getInstance().gotoFightMeetPlayerID=t.role_id,MeetPlayerModel.getInstance().fightMPID=t.role_id,SceneModel.getInstance().clearMPUsePoint(i),this._model.removeTypeMon(MonsterVO.COMMON),this._model.removeTypeMon(MonsterVO.VIRTUAL),this._model.removeTypePlayer(PlayerBaseVO.VIRTUAL);for(var n,s=t.partner_list,a=0;a<s.length;a++)n=RoleModel.getInstance().changeOtherNodePartnerToVo(s[a],t),n.setName(t.name),n.useType=PlayerBaseVO.MEET,n.x=i.x+Math.ceil(a/2),n.y=i.y+Math.pow(-1,a),this._model.addPlayer(n);this._scene.rolesToFight(),this._scene.meetPlayerFightRoles()},n.request10610=function(e){this.sendSocketData(10610)},n.closeLunhui=function(){this._lunhuiView&&this._lunhuiView.isPop&&(this._lunhuiView.isPop=!1)},n.openLunhui=function(){return HuoDongDailyModel.getInstance().kaiFuDay<Number(FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_37).open_day)?void Message.show("开服第2天开启"):(null==this._lunhuiView&&(this._lunhuiView=new LunhuiWindow,this._lunhuiView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._lunhuiView.isPop=!this._lunhuiView.isPop,void(this._lunhuiView.isPop&&this._lunhuiView.updateData()))},n.disposeView=function(e){this._lunhuiView&&(this._lunhuiView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._lunhuiView.dispose(),this._lunhuiView=null)},n.allPartnerDeadHandler=function(e){this._model.isHookWaveBoss()?this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_FAIL,{dropList:[]})):this._model.isHookSmall()&&MeetPlayerModel.getInstance().gotoFightMeetPlayerID>0},n.mpFightFinishHandler=function(e){this.clearFightMP(),this.dispatchEvent(new ParamEvent(EventName.REQUEST_NEXT_WAVE))},n.clearFightMP=function(){var e=this;e._model.removeTypePlayer(PlayerBaseVO.MEET),e._scene.clearMeetPlayer(),e._scene.removeAllPartner(),e._scene.addAllPartner(),MeetPlayerModel.getInstance().fightMPID=0,MeetPlayerModel.getInstance().gotoFightMeetPlayerID=0},n.enterCheckPointBossHandler=function(e){this.request10603()},n.removeExitIcon=function(){this._exitIcon&&(this._exitIcon.parent&&this._exitIcon.parent.removeChild(this._exitIcon),this._exitIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickExitIconHandler,this),this._exitIcon.dispose(),this._exitIcon=null)},n.addExitIcon=function(){if(null==this._exitIcon){this._exitIcon=new PicLoader;var e=UrlUtil.getOtherIcon("exitIcon");this._exitIcon.load(e),this._exitIcon.x=12,this._exitIcon.y=762,this._exitIcon.touchEnabled=!0,this._exitIcon.setPicCanGC(!1),this._exitIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickExitIconHandler,this)}GameContent.gameLayers.winMapLayer.addChild(this._exitIcon)},n.sceneChangeHandler=function(e){this._continueSi>0&&clearTimeout(this._continueSi),this._model.isHookSmall()||this._model.isMainCity()||this._model.isNoviceScene()?this.removeExitIcon():this.addExitIcon(),this._model.roleList=new Array,MeetPlayerModel.getInstance().fightMPID=0,MeetPlayerModel.getInstance().gotoFightMeetPlayerID=0,RoleModel.getInstance().setAllPartnerChangeTarget(""),this._model.isHookSmall()&&!this._firstTime&&this.dispatchEvent(new ParamEvent(EventName.REQUEST_NEXT_WAVE)),0==this._model.isMainCity()&&(TipsWordManager.getInstance().isCity=!1),this._model.isMaterialFuBen()||this._model.isChanllengeFuBen()||this._model.isCityWar()||this._model.isBossScene()||this._model.isGuildFuben()||this._model.isMineFuBen()||this._model.isUnKnowPalace()||this._model.isShadowFuben()||this._model.isWZZB()?this.dispatchEvent(new ParamEvent(EventName.MAINUI_SHOW_RIGHTTOP,{state:!1})):this.dispatchEvent(new ParamEvent(EventName.MAINUI_SHOW_RIGHTTOP,{state:!0}));var t=this._model.getSceneInfo(this._model.lastSceneID);if(t&&(t.type==SceneInfoVo.CHANLLENGE?FubenModel.getInstance().isContinue&&this.dispatchEvent(new ParamEvent(FubenEvtName.FUBEN_CCMD14501)):t.type==SceneInfoVo.GUILD_FUBEN?GuildModel.getInstance().isContinueFuben&&this.dispatchEvent(new ParamEvent(GuildEvtName.CCMD16310)):t.type==SceneInfoVo.UNKNOW_PALACE&&this.dispatchEvent(new ParamEvent(MeetPlayerEvtName.SHOW_MEETPLAYER_VIEW,{index:2}))),(this._model.isBossScene()||this._model.isChanllengeFuBen())&&this.dispatchEvent(new ParamEvent(EventName.SHOW_BOSS_COMING)),this._model.isGuildFuben()){this.dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CLOSE_FUBEN));var i=GuildModel.getInstance().getFubenLv()+1,n=29,s=GuildModel.getInstance().getFubenVo(i);s&&(n=s.limit_time),this.showDaoJiShiInScene(n)}else this._model.isEquipFuBen()?this.dispatchEvent(new ParamEvent(FubenEvtName.CLOSE_FUBEN_VIEW)):this.disposeDjsView();(this._model.isMineFuBen()||this._model.isUnKnowPalace())&&this.dispatchEvent(new ParamEvent(MeetPlayerEvtName.SHOW_MEETPLAYER_VIEW,{isShow:!1})),this._model.isHookSmall()||(this.dispatchEvent(new ParamEvent(KuaFuEvtName.KUAFU_CLOSE_MAP)),this.dispatchEvent(new ParamEvent(BossEvtName.CLOSE_KUAFU_BOSS_VIEW))),this._firstTime=!1,CityWarModel.getInstance().clearFightRommList(),KingModel.getInstance().goToPK=!1,this._model.resetRealFigureNum(),this._model.isHookSmall()||this.dispatchEvent(new ParamEvent(EventName.CLOSE_CITY_VIEW)),this._model.clearRewardSi(),this._skillTimerDic=new Object},n.clickExitIconHandler=function(e){this._model.isHookWaveBoss()?this._model.isAutoKillBoss=!1:this._model.isGuildFuben()?GuildModel.getInstance().isContinueFuben=!1:this._model.isChanllengeFuBen()&&(FubenModel.getInstance().isContinue=!1),this.dispatchEvent(new ParamEvent(EventName.EXIT_SCENE))},n.showRedDots=function(){},n.getWaveReward=function(e){var t=this._model.getCurrentWaveID();this.request10602(t)},n.showBossEnter=function(e){void 0===e&&(e=null),null==this._bossEnterView&&(this._bossEnterView=new BossEnterView,this._bossEnterView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeBossEnterView,this)),this._bossEnterView.show()},n.disposeBossEnterView=function(){this._bossEnterView&&(this._bossEnterView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeBossEnterView,this),this._bossEnterView.dispose(),this._bossEnterView=null)},n.clientRelive=function(e){this._scene.removeAllPartner(),this._scene.addAllPartner()},n.showDaoJiShiInScene=function(e){null==this._djsView&&(this._djsView=new DaoJiShiInScene,this._djsView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeDjsView,this)),this._djsView.show(),this._djsView.addTimes(e)},n.disposeDjsView=function(e){void 0===e&&(e=null),this._djsView&&(this._djsView.dispose(),this._djsView=null)},n.oneKeyLunHui=function(e){this.CCMD10620Request()},n.CCMD10620Request=function(){this.sendSocketData(10620)},n.showCommonTips=function(e){null==this._tipsWindow&&(this._tipsWindow=new TipsWindow,this._tipsWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeTipsWindow,this)),this._tipsWindow.isPop2=!0;var t=e.data.title,i=e.data.content,n=e.data.func,s=e.data.type,a=!0;void 0!=e.data.autoCloseView&&(a=e.data.autoCloseView),this._tipsWindow.setData(t,i,n,a,s)},n.disposeTipsWindow=function(e){this._tipsWindow&&(this._tipsWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeTipsWindow,this),this._tipsWindow.dispose(),this._tipsWindow=null)},n.closeTipsWindow=function(e){this._tipsWindow&&(this._tipsWindow.isPop=!1)},n.response10703=function(e){for(var t=e.obj_hp_change,i=t.length,n=0;i>n;n++){var s=t[n];if(s.obj_type==AttackType.PARTNER){var a=PlayerBaseVO.makeUid(s.plat_name,s.obj_id),o=this._model.getPlayer(a);o&&(o.setMaxHp(s.max_hp),o.setHp(s.hp))}}},n.response10820=function(e){var t=this,i=TileUtil.changeXToPixs(e.pos_x),n=TileUtil.changeYToPixs(e.pox_y);t.dispatchEvent(new ParamEvent(EventName.PLAYER_MOVE,{platform:e.plat_name,eId:e.obj_id,eType:e.obj_type,path:[new Point(i,n)]}))},t}(BaseContol);egret.registerClass(SceneControl,"SceneControl");var ShadowControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){var i=this;e.prototype.onGameStart.call(this,t),setTimeout2(function(){i.requestStarGame()},5e3*Math.random())},n.addEventHandler=function(){this.addEventListener(ShadowEvtName.OPEN_SHADOW,this.openWindow,this),this.addEventListener(ShadowEvtName.OPEN_SHADOW_TIPS,this.openTipView,this),this.addEventListener(ShadowEvtName.CCMD18000,this.CCMD18000Request,this),this.addEventListener(ShadowEvtName.CCMD18001,this.CCMD18001Request,this),this.addEventListener(ShadowEvtName.CCMD18010,this.CCMD18010Request,this),this.addEventListener(ShadowEvtName.CCMD18011,this.CCMD18011Request,this),this.addEventListener(ShadowEvtName.CCMD18012,this.CCMD18012Request,this),this.addEventListener(ShadowEvtName.CCMD18013,this.CCMD18013Request,this),this.addEventListener(ShadowEvtName.CCMD18020,this.CCMD18020Request,this),this.addEventListener(ShadowEvtName.CCMD18030,this.CCMD18030Request,this),this.addEventListener(ShadowEvtName.CCMD18031,this.CCMD18031Request,this),this.addEventListener(EventName.RED_DOTS+RedDotsModel.ID_2020,this.showRedDot,this),this.addEventListener(EventName.UPDATE_GOODSITEM,this.updatePack,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_ROUND_CHANGE,this.requestStarGame,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.requestStarGame,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(18e3,function(t){e.SCMD18000Response(t)},this),this.addCmdListener(18001,function(t){e.SCMD18001Response(t)},this),this.addCmdListener(18010,function(t){e.SCMD18010Response(t)},this),this.addCmdListener(18013,function(t){e.SCMD18013Response(t)},this),this.addCmdListener(18020,function(t){e.SCMD18020Response(t)},this),this.addCmdListener(18030,function(t){e.SCMD18030Response(t)},this)},n.requestStarGame=function(){if(FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_45,!1))for(var e,t=RoleModel.getInstance().getPartnerList(),i=0;i<t.length;i++)e=t[i],this.dispatchEvent(new ParamEvent(ShadowEvtName.CCMD18010,e.parnerID)),this.dispatchEvent(new ParamEvent(ShadowEvtName.CCMD18030,e.parnerID))},n.CCMD18000Request=function(e){var t=new CCMD18000;t.partner_id=e.data,this.sendSocketData(18e3,t)},n.CCMD18001Request=function(e){var t=new CCMD18001;t.partner_id=e.data,this.sendSocketData(18001,t)},n.CCMD18010Request=function(e){var t=new CCMD18010;t.partner_id=e.data,this.sendSocketData(18010,t)},n.CCMD18011Request=function(e){var t=new CCMD18011;t.partner_id=e.data,this.sendSocketData(18011,t)},n.CCMD18012Request=function(e){var t=new CCMD18012;t.partner_id=e.data,this.sendSocketData(18012,t)},n.CCMD18013Request=function(e){var t=new CCMD18013;t.partner_id=e.data,this.sendSocketData(18013,t),this._shadowView&&(this._shadowView.isPop=!1)},n.CCMD18020Request=function(e){this.sendSocketData(18020)},n.CCMD18030Request=function(e){var t=new CCMD18030;t.partner_id=e.data,this.sendSocketData(18030,t)},n.CCMD18031Request=function(e){var t=new CCMD18031;t.partner_id=e.data.id,t.type=e.data.type,this.sendSocketData(18031,t)},n.SCMD18000Response=function(e){ShadowModel.getInstance().setDataLv(e),this.dispatchEvent(new ParamEvent(ShadowEvtName.CCMD18000_UPDATE,e))
},n.SCMD18001Response=function(e){this.dispatchEvent(new ParamEvent(ShadowEvtName.CCMD18001_UPDATE,e))},n.SCMD18010Response=function(e){ShadowModel.getInstance().setDataJie(e),this.dispatchEvent(new ParamEvent(ShadowEvtName.CCMD18010_UPDATE,e))},n.SCMD18013Response=function(e){0==e.flag?this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_FAIL,{dropList:[]})):this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_SUCCESS,{id:e.adv_lv,type:FightSuccessWindow.SHADOW}))},n.SCMD18020Response=function(e){this.dispatchEvent(new ParamEvent(ShadowEvtName.CCMD18020_UPDATE,e))},n.SCMD18030Response=function(e){ShadowModel.getInstance().setDataEquip(e),this.dispatchEvent(new ParamEvent(ShadowEvtName.CCMD18030_UPDATE,e))},n.onBtnClick=function(){this.openView()},n.openWindow=function(e){var t=e.data;this.openView(t)},n.openView=function(e){void 0===e&&(e=0),FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_45)&&(this._shadowView||(this._shadowView=new ShadowWindow,this._shadowView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._shadowView.isPop=!0,this._shadowView.setSelectIndex(e))},n.disposeView=function(e){this._shadowView&&(this._shadowView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._shadowView.dispose(),this._shadowView=null)},n.openTipView=function(e){this._tips||(this._tips=new ShadowTipWindow,this._tips.addEventListener(EventName.WINDOW_DISPOSE,this.disposeTipView,this)),this._tips.isPop2=!this._tips.isPop,this._tips.setData(e.data)},n.disposeTipView=function(e){this._tips&&(this._tips.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeTipView,this),this._tips.dispose(),this._tips=null)},n.showRedDot=function(e){this.onRedDot()},n.updatePack=function(){this.onRedDot()},n.onRedDot=function(){if(FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_45,!1)){var e=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2020);TipsWordManager.getInstance().showRedDots(TipsWord.SHADOW,e||ShadowModel.getInstance().isEquipUpgradeAll||ShadowModel.getInstance().isJieUpgradeAll)}},t}(BaseContol);egret.registerClass(ShadowControl,"ShadowControl");var ShopControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addEventHandler=function(){this.addEventListener(ShopEvtName.OPEN_SHOP_VIEW,this.openView,this),this.addEventListener(ShopEvtName.OPEN_SHOP_SELL_VIEW,this.openSellView,this),this.addEventListener(ShopEvtName.CCMD22500,this.CCMD22500Request,this),this.addEventListener(ShopEvtName.CCMD22501,this.CCMD22501Request,this),this.addEventListener(ShopEvtName.CCMD22510,this.CCMD22510Request,this),this.addEventListener(ShopEvtName.CCMD22511,this.CCMD22511Request,this),this.addEventListener(ShopEvtName.CCMD22520,this.CCMD22520Request,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(22500,function(t){e.SCMD22500Response(t)},this),this.addCmdListener(22501,function(t){e.SCMD22501Response(t)},this),this.addCmdListener(22520,function(t){e.SCMD22520Response(t)},this)},n.CCMD22500Request=function(e){var t=new CCMD22500;t.type=e.data.type,t.sub_type=e.data.sub_type,this.sendSocketData(22500,t)},n.CCMD22501Request=function(e){this.sendSocketData(22501)},n.CCMD22510Request=function(e){var t=new CCMD22510;t.item_id=e.data,this.sendSocketData(22510,t)},n.CCMD22511Request=function(e){var t=new CCMD22511;t.shop_id=e.data,this.sendSocketData(22511,t)},n.CCMD22520Request=function(e){var t=new CCMD22520;t.shop_id=e.data,this.sendSocketData(22520,t)},n.SCMD22500Response=function(e){this.dispatchEvent(new ParamEvent(ShopEvtName.CCMD22500_UPDATE,e.market_items))},n.SCMD22501Response=function(e){this.dispatchEvent(new ParamEvent(ShopEvtName.CCMD22501_UPDATE,e.market_items))},n.SCMD22520Response=function(e){this.dispatchEvent(new ParamEvent(ShopEvtName.CCMD22520_UPDATE,e.shop_id))},n.openView=function(e){FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_49)&&(null==this._shop&&(this._shop=new ShopWindow,this._shop.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._shop.isPop=!0)},n.disposeView=function(e){this._shop&&(this._shop.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._shop.dispose(),this._shop=null)},n.openSellView=function(e){null==this._sell&&(this._sell=new ShopSellWindow,this._sell.addEventListener(EventName.WINDOW_DISPOSE,this.disposeSellView,this)),this._sell.isPop2=!0},n.disposeSellView=function(e){this._sell&&(this._sell.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeSellView,this),this._sell.dispose(),this._sell=null)},t}(BaseContol);egret.registerClass(ShopControl,"ShopControl");var SkillControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t),this.showRedDots()},n.addEventHandler=function(){this.addEventListener(EventName.MAINUI_CLICK_SKILL,this.openView,this),this.addEventListener(SkillEvtName.OPEN_SKILL_FEAT_PACK,this.openPackView,this),this.addEventListener(SkillEvtName.OPEN_SKILL_FEAT_BOOK,this.openBookView,this),this.addEventListener(SkillEvtName.SKILL_CCMD10500,this.CCMD10500Request,this),this.addEventListener(SkillEvtName.SKILL_CCMD10501,this.CCMD10501Request,this),this.addEventListener(SkillEvtName.CCMD14700,this.CCMD14700Request,this),this.addEventListener(SkillEvtName.CCMD14701,this.CCMD14701Request,this),this.addEventListener(SkillEvtName.CCMD14702,this.CCMD14702Request,this),this.addEventListener(SkillEvtName.CCMD14703,this.CCMD14703Request,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.showRedDots,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGECOIN,this.showRedDots,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_CHANGE,this.showRedDots,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.showRedDots,this),this.addEventListener(EventName.SKILL_INFO_CHANGE,this.showRedDots,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(14700,function(t){e.SCMD14700Response(t)},this),this.addCmdListener(14702,function(t){e.SCMD14702Response(t)},this)},n.CCMD10500Request=function(e){var t=new CCMD10500;t.skill_id=e.data.sid,t.parter_id=e.data.pid,this.sendSocketData(10500,t)},n.CCMD10501Request=function(e){var t=new CCMD10501;t.parter_id=e.data,this.sendSocketData(10501,t)},n.CCMD14700Request=function(e){var t=new CCMD14700;t.parter_id=e.data.id,this.sendSocketData(14700,t)},n.CCMD14701Request=function(e){var t=new CCMD14701;t.parter_id=e.data.pid,t.item_id=e.data.tid,t.slot=e.data.idx,this.sendSocketData(14701,t)},n.CCMD14702Request=function(e){var t=new CCMD14702;t.parter_id=e.data.pid,t.slot=e.data.idx,this.sendSocketData(14702,t)},n.CCMD14703Request=function(e){var t=new CCMD14703;t.parter_id=e.data.pid,t.slot=e.data.idx,this.sendSocketData(14703,t)},n.SCMD14700Response=function(e){SkillModel.getInstance().setFeatData(e),this.dispatchEvent(new ParamEvent(SkillEvtName.CCMD14700_UPDATE,e)),this.showRedDots()},n.SCMD14702Response=function(e){this.dispatchEvent(new ParamEvent(SkillEvtName.CCMD14702_UPDATE,e.flag))},n.openView=function(){null==this._skillView&&(this._skillView=new SkillWindow,this._skillView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._skillView.isPop=!this._skillView.isPop,this._skillView&&this._skillView.isPop&&this._skillView.setIndex()},n.disposeView=function(e){this._skillView&&(this._skillView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._skillView.dispose(),this._skillView=null)},n.openPackView=function(e){null==this._pack&&(this._pack=new SkillFeatPackWindow,this._pack.addEventListener(EventName.WINDOW_DISPOSE,this.disposePackView,this)),this._pack.isPop2=!this._pack.isPop,this._pack.isPop&&this._pack.setIdx(e.data.idx,e.data.pid)},n.disposePackView=function(e){this._pack&&(this._pack.removeEventListener(EventName.WINDOW_DISPOSE,this.disposePackView,this),this._pack.dispose(),this._pack=null)},n.openBookView=function(e){null==this._book&&(this._book=new SkillFeatBookWindow,this._book.addEventListener(EventName.WINDOW_DISPOSE,this.disposeBookView,this)),this._book.isPop2=!this._book.isPop},n.disposeBookView=function(e){this._book&&(this._book.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeBookView,this),this._book.dispose(),this._book=null)},n.showRedDots=function(){this.dispatchEvent(new ParamEvent(EventName.RED_DOTS,{type:"skill",flag:SkillModel.getInstance().isUpgrade}))},t}(BaseContol);egret.registerClass(SkillControl,"SkillControl");var TaskControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t),this.sendSocketData(11400)},n.addEventHandler=function(){this.addEventListener(TaskEvtName.TASK_CCMD11401,this.CCMDRequest,this),this.addEventListener(EventName.TRIGGER_NPC,this.triggerNpc,this),this.addEventListener(EventName.SHOW_NPC_DIALOG,this.showDialog,this),this.addEventListener(EventName.NOVICE_TASK_FINISH,this.CCMD24300Request,this),this.addEventListener(EventName.SHOW_WELCOME2,this.showWelcomwView2,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(11400,function(t){e.SCMD11400Response(t)},this)},n.CCMDRequest=function(e){this.sendSocketData(11401)},n.CCMD24300Request=function(e){this.sendSocketData(24300)},n.SCMD11400Response=function(e){TaskModel.getInstance().setCurTaskInfo(e),this.dispatchEvent(new ParamEvent(TaskEvtName.TASK_CCMD11400_UPDATE,e))},n.triggerNpc=function(e){var t=e.data.npcVO,i=(e.data.type,e.data.extralParam,TaskModel.getInstance().getCurNoviceTask()),n=TaskModel.getInstance().getCurNoviceTask();if(1==TaskModel.getInstance().isNovicePlayer())if(n)if(t.template_id==n.end_npc)this.dispatchEvent(new ParamEvent(EventName.SHOW_NPC_DIALOG,{vo:i}));else{var s=t.funName.split(",");TaskModel.getInstance().getTaskOpen(s[0],Number(s[1]))}else{var s=t.funName.split(",");TaskModel.getInstance().getTaskOpen(s[0],Number(s[1]))}else{var s=t.funName.split(",");TaskModel.getInstance().getTaskOpen(s[0],Number(s[1]))}},n.showDialog=function(e){var t=this;t._dialogView||(t._dialogView=new NoviceDialogView(e.data.vo),t._dialogView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeDialogView,this)),t._dialogView.isPop=!0},n.disposeDialogView=function(e){var t=this;t._dialogView&&(t._dialogView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeDialogView,this),t._dialogView.dispose(),t._dialogView=null)},n.showWelcomwView2=function(e){var t=this,i=1;e.data&&(i=e.data.type),t._welcomeView2||(t._welcomeView2=new WelcomeView2(i),t._welcomeView2.addEventListener(EventName.WINDOW_DISPOSE,this.disposeWelcomwView2,this)),t._welcomeView2.isPop2=!0},n.disposeWelcomwView2=function(e){var t=this;t._welcomeView2&&(t._welcomeView2.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeWelcomwView2,this),t._welcomeView2.dispose(),t._welcomeView2=null)},t}(BaseContol);egret.registerClass(TaskControl,"TaskControl");var TreasureControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t);var i=TipsWordManager.getInstance().addWordIcon("btn_tanbao");i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOpenWindowHandler,this),this.updateIconRedDotHandler()},n.addCmdHandler=function(){var e=this;this.addCmdListener(13800,function(t){e.SCMD13800Response(t)},this),this.addCmdListener(13801,function(t){e.SCMD13801Response(t)},this),this.addCmdListener(13810,function(t){e.SCMD13810Response(t)},this),this.addCmdListener(13811,function(t){e.SCMD13811Response(t)},this),this.addCmdListener(13820,function(t){e.SCMD13820Response(t)},this),this.addCmdListener(16500,function(t){e.SCMD16500Response(t)},this),this.addCmdListener(24500,function(t){e.SCMD24500Request(t)},this)},n.addEventHandler=function(){this.addEventListener(TreasureEvtName.TREASURE_OPEN_WINDOW,this.onOpenWindowHandler,this),this.addEventListener(TreasureEvtName.TREASURE__CCMD13800,this.CCMD13800Request,this),this.addEventListener(TreasureEvtName.TREASURE__CCMD13801,this.CCMD13801Request,this),this.addEventListener(TreasureEvtName.TREASURE__CCMD13810,this.CCMD13810Request,this),this.addEventListener(TreasureEvtName.TREASURE__CCMD13811,this.CCMD13811Request,this),this.addEventListener(TreasureEvtName.TREASURE__CCMD13812,this.CCMD13812Request,this),this.addEventListener(TreasureEvtName.TREASURE__CCMD13820,this.CCMD13820Request,this),this.addEventListener(TreasureEvtName.TREASURE__CCMD13821,this.CCMD13821Request,this),this.addEventListener(TreasureEvtName.TREASURE__CCMD16500,this.CCMD16500Request,this),this.addEventListener(TreasureEvtName.TREASURE__CCMD24500,this.CCMD24500Request,this),RedDotsModel.getInstance().addEventListener(RedDotsModel.MAIN_TREASURE_ICON_REDDOT,this.updateIconRedDotHandler,this),this.addEventListener(EventName.RED_DOTS+RedDotsModel.ID_2004,this.updatePackData,this),this.addEventListener(EventName.RED_DOTS+RedDotsModel.ID_2014,this.updatePackData,this)},n.CCMD13800Request=function(){this.sendSocketData(13800)},n.CCMD13801Request=function(e){var t=new CCMD13801;t.type=e.data,this.sendSocketData(13801,t)},n.CCMD13810Request=function(){this.sendSocketData(13810)},n.CCMD13811Request=function(e){var t=new CCMD13811;t.treasure_item=e.data,this.sendSocketData(13811,t)},n.CCMD13812Request=function(){this.sendSocketData(13812)},n.CCMD13820Request=function(){this.sendSocketData(13820)},n.CCMD13821Request=function(){this.sendSocketData(13821)},n.SCMD13800Response=function(e){this.dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD13800_UPDATE,e.treasure_log))},n.SCMD13801Response=function(e){this.dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD13801_UPDATE,e.treasure_item))},n.SCMD13810Response=function(e){TreasureModel.getInstance().setPackData(e.treasure_item),this.dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD13810_UPDATE))},n.SCMD13811Response=function(e){TreasureModel.getInstance().delPackData(e.treasure_item),this.dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD13811_UPDATE))},n.SCMD13820Response=function(e){this.dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD13820_UPDATE,e))},n.CCMD16500Request=function(e){var t=new CCMD16500;t.type=e.data.type,this.sendSocketData(16500,t)},n.SCMD16500Response=function(e){this.dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD16500_UPDATE,{arr:e.drop_list}))},n.CCMD24500Request=function(e){var t=new CCMD24500;t.type=e.data.type,t.number=e.data.num,this.sendSocketData(24500,t)},n.SCMD24500Request=function(e){this.dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD24500_UPDATE,{arr:e.drop_list}))},n.onOpenWindowHandler=function(e){if(!(RoleModel.getInstance().getRoleCommon().level<FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_28).open_level)){var t,i=0;e.data&&(i=e.data.index,t=e.data.isOpen),this._treasureWindow||(this._treasureWindow=new TreasureWindow,this._treasureWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._treasureWindow.openView(i,t)}},n.disposeView=function(e){this._treasureWindow&&(this._treasureWindow.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._treasureWindow.dispose(),this._treasureWindow=null)},n.updatePackData=function(){RedDotsModel.getInstance().calMainTreasureIconRedDot()},n.updateIconRedDotHandler=function(){var e=TipsWordManager.getInstance().getTipsWord("btn_tanbao");e&&(e.showRedDot=RedDotsModel.getInstance().main_treasureIconRedDot)},t}(BaseContol);egret.registerClass(TreasureControl,"TreasureControl");var VipControl=function(e){function t(){e.call(this),this._isFirst=!0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onGameStart=function(t){e.prototype.onGameStart.call(this,t),this.CCMD11900Request(),this.CCMD11910Request()},n.addEventHandler=function(){this.addEventListener(EventName.MAINUI_CLICK_VIP,this.openView,this),this.addEventListener(VipEvtName.OPEN_VIP_MONTH,this.onOpenGuizu,this),this.addEventListener(VipEvtName.VIP_CCMD11900,this.CCMD11900Request,this),this.addEventListener(VipEvtName.VIP_CCMD11901,this.CCMD11901Request,this),this.addEventListener(VipEvtName.VIP_CCMD11910,this.CCMD11910Request,this),this.addEventListener(VipEvtName.CCMD16700,this.CCMD16700Request,this),this.addEventListener(VipEvtName.CCMD16701,this.CCMD16701Request,this)},n.addCmdHandler=function(){var e=this;this.addCmdListener(11900,function(t){e.SCMD11900Response(t)},this),this.addCmdListener(11910,function(t){e.SCMD11910Response(t)},this),this.addCmdListener(16700,function(t){e.SCMD16700Response(t)},this)},n.CCMD11900Request=function(){this.sendSocketData(11900)},n.CCMD11901Request=function(e){var t=new CCMD11901;t.vip_level=e.data,this.sendSocketData(11901,t)},n.CCMD11910Request=function(){this.sendSocketData(11910)},n.CCMD16700Request=function(){this.sendSocketData(16700)},n.CCMD16701Request=function(){this.sendSocketData(16701)},n.SCMD11900Response=function(e){if(VipModel.getInstance().setVIPData(e),this.dispatchEvent(new ParamEvent(VipEvtName.VIP_UPDATE,e)),this._isFirst)if(this._isFirst=!1,ConfigManager.isb7724())window.sendLogin();else if(ConfigManager.isQingFeng()){var t=new Object;t.game_appid=Tools.getPageParams("cur_channel"),t.sdkloginmodel=Tools.getPageParams("sdkloginmodel"),window.sendLogin(t)}else ConfigManager.isGuoZi()&&PhpHttpStatisticsManager.sendEnterGame()},n.SCMD11910Response=function(e){VipModel.getInstance().month_time=e.last_time,this.dispatchEvent(new ParamEvent(VipEvtName.VIP_CCMD11910_UPDATE,e.last_time)),this.showCardMonthIcon()},n.SCMD16700Response=function(e){VipModel.getInstance().isLife=e.flag>0,VipModel.getInstance().isLifeReward=e.flag>0&&0==e.award_flag,TipsWordManager.getInstance().showRedDots(TipsWord.GUIZU,VipModel.getInstance().isLifeReward),this.dispatchEvent(new ParamEvent(VipEvtName.CCMD16700_UPDATE,e))},n.openView=function(){this._vipView||(this._vipView=new VipWindow,this._vipView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._vipView.isPop=!this._vipView.isPop,this._vipView.isPop&&this._vipView.updateData()},n.disposeView=function(e){this._vipView&&(this._vipView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._vipView.dispose(),this._vipView=null)},n.showCardMonthIcon=function(){TipsWordManager.getInstance().isHasIcon(TipsWord.GUIZU)||(TipsWordManager.getInstance().addWordIcon(TipsWord.GUIZU),null==this._cardMonthIcon&&(this._cardMonthIcon=TipsWordManager.getInstance().getTipsWord(TipsWord.GUIZU),this._cardMonthIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOpenGuizu2,this)))},n.onOpenGuizu=function(e){var t=0;e.data&&(t=e.data),this.openCardMonthView(t)},n.onOpenGuizu2=function(){this.openCardMonthView()},n.openCardMonthView=function(e){void 0===e&&(e=0),this._guizuView||(this._guizuView=new VipGuizuWindow,this._guizuView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeGzView,this)),this._guizuView.setIndex(e),this._guizuView.isPop=!this._guizuView.isPop},n.disposeGzView=function(e){this._guizuView&&(this._guizuView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeGzView,this),this._guizuView.dispose(),this._guizuView=null)},t}(BaseContol);egret.registerClass(VipControl,"VipControl");var WingControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){var e=this;this.addCmdListener(12100,function(t){e.SCMD12100Response(t)},this),this.addCmdListener(12105,function(t){e.SCMD12105Response(t)},this),this.addCmdListener(12106,function(t){e.SCMD12106Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(WingEvtName.WING_OPEN_WEARWINDOW,this.onOpenWearWindowHandler,this),this.addEventListener(WingEvtName.CCMD12100,function(t){e.CCMD12100Request(t)},this),this.addEventListener(WingEvtName.CCMD12101,function(t){e.CCMD12101Request(t)},this),this.addEventListener(WingEvtName.CCMD12102,function(t){e.CCMD12102Request(t)},this),this.addEventListener(WingEvtName.CCMD12103,function(t){e.CCMD12103Request(t)},this),this.addEventListener(WingEvtName.CCMD12104,function(t){e.CCMD12104Request(t)},this),this.addEventListener(WingEvtName.CCMD12105,function(t){e.CCMD12105Request(t)},this),this.addEventListener(WingEvtName.CCMD12106,function(t){e.CCMD12106Request(t)},this),this.addEventListener(WingEvtName.SHOW_WING_LEVEL_EFFECT,this.showWingTips,this)},n.CCMD12100Request=function(e){if(!(RoleModel.getInstance().getRoleCommon().level<FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.WING).open_level)){var t=new CCMD12100;t.partner_id=e.data.id,this.sendSocketData(12100,t)}},n.SCMD12100Response=function(e){WingModel.getInstance().updateServerData(e),this.dispatchEvent(new ParamEvent(WingEvtName.WING_UPDATE_INFO))},n.SCMD12105Response=function(e){1==e.flag?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_FR_SUCCESS,{id:1,type:FightSuccessWindow.WING})):Message.show("激活失败")},n.SCMD12106Response=function(e){1==e.flag?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_FR_SUCCESS,{id:e.level,type:FightSuccessWindow.WING})):Message.show("升阶失败")},n.CCMD12101Request=function(e){var t=new CCMD12101;t.partner_id=e.data.id,this.sendSocketData(12101,t)},n.CCMD12102Request=function(e){var t=new CCMD12102;t.partner_id=e.data.id,this.sendSocketData(12102,t)},n.CCMD12103Request=function(e){var t=new CCMD12103;t.partner_id=e.data.id,this.sendSocketData(12103,t)},n.CCMD12104Request=function(e){var t=new CCMD12104;t.partner_id=e.data.id,this.sendSocketData(12104,t)},n.CCMD12105Request=function(e){var t=new CCMD12105;t.partner_id=e.data.id,this.sendSocketData(12105,t)},n.CCMD12106Request=function(e){var t=new CCMD12106;t.partner_id=e.data.id,this.sendSocketData(12106,t)},n.onOpenWearWindowHandler=function(e){this._wearWindow||(this._wearWindow=new WingWearWindow,this._wearWindow.addEventListener(EventName.WINDOW_DISPOSE,this.disposeWearWindow,this)),this._wearWindow.isPop=!0},n.disposeWearWindow=function(e){this._wearWindow&&(this._wearWindow.dispose(),this._wearWindow=null)},n.showWingTips=function(e){var t=e.data.id;this.dispatchEvent(new ParamEvent(EventName.SHOW_FR_SUCCESS,{id:t,type:FightSuccessWindow.WING}))},t}(BaseContol);egret.registerClass(WingControl,"WingControl");var ZhuanControl=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.onGameStart=function(t){e.prototype.onGameStart.call(this,t)},n.addCmdHandler=function(){var e=this;this.addCmdListener(11200,function(t){e.SCMD11200Response(t)},this)},n.addEventHandler=function(){var e=this;this.addEventListener(ZhuanShengEvtName.ZHUANSHENG_OPEN_BUY,function(t){e.onOpenBuyViewHandler(t)},this),this.addEventListener(ZhuanShengEvtName.ZHUANSHENG_CLOSE_BUY,function(t){e.onCloseBuyViewHandler(t)},this),this.addEventListener(ZhuanShengEvtName.CCMD_11200,this.CCMD11200Request,this),this.addEventListener(ZhuanShengEvtName.CCMD_11201,this.CCMD11201Request,this),this.addEventListener(ZhuanShengEvtName.CCMD_11202,this.CCMD11202Request,this)},n.CCMD11200Request=function(e){this.sendSocketData(11200)},n.SCMD11200Response=function(e){var t=RoleModel.getInstance().getRoleCommon().round;t!=e.round&&(RoleModel.getInstance().getRoleCommon().round=e.round,RoleModel.getInstance().dispatchEvent(new ParamEvent(RoleModel.ROLE_ROUND_CHANGE)),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FuLiEvtName.SHOW_SHARENEW_VIEW,5)),PhpHttpStatisticsManager.updateLoad(RoleModel.getInstance().getRoleCommon()),EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("zhuansheng"),1,63,GameContent.gameLayers.noticeLayer,80,!1))},n.CCMD11201Request=function(e){this.sendSocketData(11201)},n.CCMD11202Request=function(e){var t=new CCMD11202;t.item_id=e.data.id,this.sendSocketData(11202,t)},n.onOpenBuyViewHandler=function(e){var t=!0;e.data&&(t=e.data.state),this._zhuanShengBuyView||(this._zhuanShengBuyView=new ZhuanShengBuyView,this._zhuanShengBuyView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeZhuanShengBuyWindow,this)),this._zhuanShengBuyView.isPop2=t},n.disposeZhuanShengBuyWindow=function(e){this._zhuanShengBuyView&&(this._zhuanShengBuyView.dispose(),this._zhuanShengBuyView=null)},n.onCloseBuyViewHandler=function(e){this._zhuanShengBuyView&&(this._zhuanShengBuyView.isPop=!1)},t}(BaseContol);egret.registerClass(ZhuanControl,"ZhuanControl");var BaseProxy=function(){function e(){this.dispatcher=GameDispatcher.getInstance()}var t=(__define,e),i=t.prototype;return i.addEventListener=function(e,t,i,n,s,a){void 0===n&&(n=!1),void 0===s&&(s=0),void 0===a&&(a=!1),this.dispatcher.addEventListener(e,t,i,n,s)},i.removeEventListener=function(e,t,i){void 0===i&&(i=!1),this.dispatcher.removeEventListener(e,t,i)},i.hasEventListener=function(e){return this.dispatcher.hasEventListener(e)},i.dispatchEvent=function(e){return this.dispatcher.dispatchEvent(e)},e}();egret.registerClass(BaseProxy,"BaseProxy");var GoodsListProxy=function(e){function t(){e.call(this),this._goodsList=new Object,this._equipInPartnerList=new Array,this._goodsArray=new Array,this._goodsBasicArray=[],this.equipWearSlotList=[]}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.createEquipBasics=function(){for(var e,t,i=DataManager.getInstance().getObj("data_equipment"),n=i.data_equipment,s=new Object,a=0;a<n.length;a++)e=n[a],t=new EquipBasic,t.template_id=e.template_id,t.min_rate=Number(e.min_rate),t.max_rate=Number(e.max_rate),t.hp=Number(e.hp),t.mp=Number(e.mp),t.attack=Number(e.att),t.att_def=Number(e.att_def),t.magic_def=Number(e.magic_def),t.crit=Number(e.crit),t.crit_hurt=Number(e.crit_hurt),t.crit_def=Number(e.crit_def),t.palsy_rate=Number(e.palsy_rate),t.palsy_def=Number(e.palsy_def),t.hurt_up=Number(e.hurt_up),t.hurt_def=Number(e.hurt_def),t.hp_up=Number(e.hp_up),s[t.template_id]=t;return s},n.createGoodsBasics=function(){for(var e,t,i=DataManager.getInstance().getObj("data_item"),n=i.data_item,s=new Object,a=0;a<n.length;a++)e=n[a],t=new GoodsBasic,t.template_id=e.template_id,t.name=e.name,t.desc=e.desc,t.type=e.type,t.sub_type=e.sub_type,t.pic=e.pic,t.req_career=e.req_career,t.req_sex=e.req_sex,t.req_lv=e.req_lv,t.req_round=e.req_round,t.overlay=e.overlay,t.quality=e.quality,t.limit_time=e.limit_time,t.show_bag=e.show_bag,t.is_use=e.is_use,t.event_id=e.event_id,s[t.template_id]=t,this._goodsBasicArray.push(t);return s},n.createEquipRecList=function(){for(var e,t,i=DataManager.getInstance().getObj("data_smelter_rec"),n=i.data_smelter_rec,s=new Object,a=0;a<n.length;a++)e=n[a],t=new EquipRecVO,t.item_id=e.item_id,t.name=e.name,t.type=e.type,t.add_coin=e.add_coin,t.exp=e.exp,s[t.item_id]=t;return s},n.createEquipRongLuList=function(){for(var e,t,i=DataManager.getInstance().getObj("data_smelter_att"),n=i.data_smelter_att,s=new Object,a=0;a<n.length;a++)e=n[a],t=new RongLuVO,t.lv=e.template_id,t.hp=e.hp,t.mp=e.mp,t.attack=e.att,t.att_def=e.att_def,t.magic_def=e.magic_def,t.crit=e.crit,t.crit_hurt=e.crit_hurt,t.crit_def=e.crit_def,t.palsy_rate=e.palsy_rate,t.palsy_def=e.palsy_def,t.hurt_up=e.hurt_up,t.hurt_def=e.hurt_def,t.hp_up=e.hp_up,t.mp_grow=e.mp_grow,t.exp=e.exp,s[t.lv]=t;return s},n.getBasicGood=function(e){return(null==this._goodsBasic||void 0==this._goodsBasic)&&(this._goodsBasic=this.createGoodsBasics()),this._goodsBasic[e]},n.getEquipBasicGood=function(e){return(null==this._equipBasic||void 0==this._equipBasic)&&(this._equipBasic=this.createEquipBasics()),this._equipBasic[e]},n.getGoodsInfoById=function(e){return this._goodsList[e]},n.checkCanRec=function(e,t){void 0===t&&(t=1),e.fightValue=this.getEquipFightValue(e);var i,n=!1,s=!1,a=e.req_career,o=(this.getEquipFightValue(e),this.getEquipInfoByCareerAndSubtype(a,e.sub_type));for(var r in o)i=o[r],i.fightValue=this.getEquipFightValue(i),n=!0,this.getEquipFightValue(e)>this.getEquipFightValue(i)&&(s=!0);0==n||1==s?(null==RongLianProxy.getInstance().ronglianTempList[a][e.sub_type]&&(RongLianProxy.getInstance().ronglianTempList[a][e.sub_type]=[]),RongLianProxy.getInstance().ronglianTempList[a][e.sub_type].push(e)):RongLianProxy.getInstance().ronglianCanRecList.push(e)},n.getEquipRongLuVOByLv=function(e){null==this._equipRongluList&&(this._equipRongluList=this.createEquipRongLuList());var t;for(var i in this._equipRongluList)if(t=this._equipRongluList[i],t.lv==e)return t;return null},n.getEquipRongLuList=function(){return null==this._equipRongluList&&(this._equipRongluList=this.createEquipRongLuList()),this._equipRongluList},n.getGoodsInfoByType=function(e){var t=this.getBasicGood(e),i=new GoodsInfo;return null==t?(i.template_id=0,i.name="神秘物品:\n"+e,i):(i.template_id=e,i.type=t.type,i.req_career=t.req_career,i.name=t.name,i.quality=t.quality,i.req_lv=t.req_lv,i.pic=t.pic,i.sub_type=t.sub_type,i.show_bag=t.show_bag,i.is_use=t.is_use,i.event_id=t.event_id,i.overlay=t.overlay,i.limit_time=t.limit_time,i.desc=t.desc,i.req_round=t.req_round,(t.quality==GoodsType.QUALITY_5||t.quality==GoodsType.QUALITY_6)&&(i.rand_attr=15,i.rate=100),i)},n.getEquipInfoByType=function(e){var t=this.getBasicGood(e),i=new EquipInfo;return null==t?(i.template_id=0,i.name="神秘物品:\n"+e,i):(i.template_id=e,i.type=t.type,i.req_career=t.req_career,i.name=t.name,i.quality=t.quality,i.req_lv=t.req_lv,i.pic=t.pic,i.sub_type=t.sub_type,i.show_bag=t.show_bag,i.desc=t.desc,i.is_use=t.is_use,i.overlay=t.overlay,i.limit_time=t.limit_time,i.req_round=t.req_round,i)},n.deleteGoods=function(e){this._goodsList[e.item_id]&&(this._goodsList[e.item_id]=null,delete this._goodsList[e.item_id]);for(var t,i=this._goodsArray.length,n=0;i>n;n++)if(t=this._goodsArray[n],t.item_id==e.item_id){this._goodsArray.splice(n,1);break}for(n=0;n<this._equipInPartnerList.length;n++)if(t=this._equipInPartnerList[n],t.item_id==e.item_id){this._equipInPartnerList.splice(n,1),this.dispatchEvent(new ParamEvent(EventName.EQUIP_LIST_CHANGE));break}this.updateBagGridNum()},n.createList=function(e,t){void 0===t&&(t=!0);for(var i,n,s=e.length,a=0,o=0,r=0;s>r;r++)if(i=e[r],2!=i.location){n=!1;var h=this.getBasicGood(i.template_id);if(null!=h){if(this._goodsList[i.item_id]&&(a=i.num-this._goodsList[i.item_id].num,this._goodsList[i.item_id].item_id=i.item_id,this._goodsList[i.item_id].partner_id=i.partner_id,this._goodsList[i.item_id].template_id=i.template_id,this._goodsList[i.item_id].location=i.location,this._goodsList[i.item_id].num=i.num,this._goodsList[i.item_id].rand_attr=i.rand_attr,this._goodsList[i.item_id].rand_awake=i.rand_awake,this._goodsList[i.item_id].last_sec=i.last_sec,this._goodsList[i.item_id].slot=i.slot,this.checkGoodsArray(this._goodsList[i.item_id]),n=!0),!n){var l=this.createGoodInfo(i,h);this._goodsList[l.item_id]=l,a=l.num,this.checkGoodsArray(l)}a>0&&t&&(14>=o&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_GET_GOODS,{name:h.name,count:a})),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.GET_GOODS,{vo:this._goodsList[i.item_id]})),o++)}}this.dispatchEvent(new ParamEvent(EventName.UPDATE_GOODSITEM)),this.updateBagGridNum(),this.updateEquipInPartner(e)},n.updateEquipInPartner=function(e){for(var t,i,n,s,a=e.length,o=0;a>o;o++)t=e[o],1!=t.location&&(i=this.getBasicGood(t.template_id),null!=i?i.type==GoodsType.ITEM_EQUIP&&(n=!0,this.checkHasEquip(t.item_id)?this.updateEquipPartnerData(t):(s=this.createGoodInfo(t,i),this._equipInPartnerList.push(s))):Alert.show(StringUtil.substitute("node.template_id = {0}",t.template_id)));n&&this.dispatchEvent(new ParamEvent(EventName.EQUIP_LIST_CHANGE))},n.updateEquipPartnerData=function(e){for(var t,i=this._equipInPartnerList.length,n=0;i>n;n++)if(t=this._equipInPartnerList[n],t.item_id==e.item_id){t.item_id=e.item_id,t.partner_id=e.partner_id,t.template_id=e.template_id,t.location=e.location,t.num=e.num,t.rand_attr=e.rand_attr,t.rand_awake=e.rand_awake,t.last_sec=e.last_sec,t.slot=e.slot;
break}},n.getEquipPartnerByPartnerId=function(e){for(var t,i=new EquipmentVO,n=this._equipInPartnerList.length,s=0;n>s;s++)t=this._equipInPartnerList[s],t.partner_id==e&&(i["the_"+t.slot+"_Grid"]=t);return i},n.getEquipInfo=function(e,t){for(var i,n=this._equipInPartnerList.length,s=0;n>s;s++)if(i=this._equipInPartnerList[s],i.partner_id==e&&i.item_id==t)return i;return null},n.getEquipInfoBySlot=function(e,t,i){void 0===i&&(i=1);for(var n,s=this._equipInPartnerList.length,a=0;s>a;a++)if(n=this._equipInPartnerList[a],n.partner_id==e&&n.slot==t&&n.quality==i)return n;return null},n.getEquipInfoByItemId=function(e){for(var t,i=this._equipInPartnerList.length,n=0;i>n;n++)if(t=this._equipInPartnerList[n],t.item_id==e)return t;return null},n.getEquipInfoByCareerAndSubtype=function(e,t,i){void 0===i&&(i=!1);for(var n,s=[],a=this._equipInPartnerList.length,o=0;a>o;o++)n=this._equipInPartnerList[o],i?n.sub_type==t&&s.push(n):(n.req_career==e&&n.sub_type==t&&s.push(n),0==n.req_career&&n.sub_type==t&&s.push(n));return s},n.getEquipInfoByPartnerAndSubtype=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);for(var s,a=[],o=this._equipInPartnerList.length,r=0;o>r;r++)s=this._equipInPartnerList[r],s.sub_type==t&&s.partner_id==e.parnerID&&(n&&-1!=EquipmentVO.AWAKELEQUIP_GRID.indexOf(Number(s.sub_type))?a.push(s):n||-1!=EquipmentVO.AWAKELEQUIP_GRID.indexOf(Number(s.sub_type))||a.push(s));return a},n.getEquipInfoByPartnerAndSlot=function(e,t,i){void 0===i&&(i=!1);for(var n,s=this._equipInPartnerList.length,a=0;s>a;a++)if(n=this._equipInPartnerList[a],n.slot==t&&n.partner_id==e.parnerID)return n;return null},n.getEquipListByPartner=function(e,t){for(var i,n=[],s=this._equipInPartnerList.length,a=0;s>a;a++)i=this._equipInPartnerList[a],t?-1!=EquipmentVO.WINGLEQUIP_GRID.indexOf(Number(i.sub_type))&&e.parnerID==i.partner_id&&n.push(i):-1==EquipmentVO.WINGLEQUIP_GRID.indexOf(Number(i.sub_type))&&e.parnerID==i.partner_id&&n.push(i);return n},n.getDecompositionEquipInfoList=function(e){void 0===e&&(e=GoodsType.QUALITY_5);for(var t,i=[],n=this._goodsArray.length,s=0;n>s;s++)t=this._goodsArray[s],t.type==GoodsType.ITEM_EQUIP&&-1!=GoodsType.EQUIP_NORMAL_TYPE_LIST.indexOf(Number(t.sub_type))&&t.quality==e&&i.push(t);return i},n.compareOrangesuitFightValue=function(e,t){void 0===t&&(t=GoodsType.QUALITY_5);var i,n=!1;for(var s in this._equipInPartnerList)if(i=this._equipInPartnerList[s],i.quality==t&&this.getEquipFightValue(e)>=this.getEquipFightValue(i)){n=!0;break}return n},n.getPartnerEquipList=function(){return this._equipInPartnerList},n.getGoodsList=function(e){void 0===e&&(e=10);for(var t,i=[],n=this._goodsArray.length,s=0;n>s;s++)t=this._goodsArray[s],0!=t.show_bag&&1==t.location&&(e==GoodsType.ITEM_EQUIP?t.type==e&&i.push(t):t.type!=GoodsType.ITEM_EQUIP&&i.push(t));return i},n.getEquipsListByCareer=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);for(var n,s=[],a=this._goodsArray.length,o=0;a>o;o++)n=this._goodsArray[o],1==n.show_bag&&1==n.location&&n.type==GoodsType.ITEM_EQUIP&&(t?-1!=EquipmentVO.WINGLEQUIP_GRID.indexOf(Number(n.sub_type))&&s.push(n):i?-1!=EquipmentVO.AWAKELEQUIP_GRID.indexOf(Number(n.sub_type))&&s.push(n):-1==EquipmentVO.WINGLEQUIP_GRID.indexOf(Number(n.sub_type))&&-1==EquipmentVO.AWAKELEQUIP_GRID.indexOf(Number(n.sub_type))&&(n.req_career==e||0==n.req_career)&&s.push(n));return s},n.getEquipsListBySubtype=function(e){for(var t,i=[],n=this._goodsArray.length,s=0;n>s;s++)t=this._goodsArray[s],1==t.show_bag&&1==t.location&&t.type==GoodsType.ITEM_EQUIP&&e==t.sub_type&&i.push(t);return i},n.getEquipsListBySubtypeList=function(e){for(var t,i=[],n=this._goodsArray.length,s=0;n>s;s++)t=this._goodsArray[s],1==t.show_bag&&1==t.location&&t.type==GoodsType.ITEM_EQUIP&&-1!=e.indexOf(Number(t.sub_type))&&i.push(t);return i},n.checkCanWearEquip=function(e,t,i,n){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=!1),this.equipWearSlotList=[];for(var s,a=e.getCareer(),o=this.getEquipsListByCareer(a,t,n),r=o.length,h=0;r>h;h++)s=o[h],0==t&&this.getCanWearEquip(s,i,n,e);for(var l=0;r>l;l++)if(s=o[l],t){if(this.isCanWearWingEquip(s,i,e))return!0}else if(this.isCanWear(s,i,n,e))return!0;return!1},n.isCanWearWingEquip=function(e,t,i){void 0===t&&(t=!1);var n,s=this.getEquipInfoByPartnerAndSubtype(i,e.sub_type,!0),a=WingModel.getInstance().getWingServerVO(i.parnerID);if(null==a)return!1;var o,r,h=s.length;if(0>=h)return a.jie>=e.req_lv?!0:!1;for(var l=0;h>l;l++)if(n=s[l],n.sub_type==e.sub_type&&a.jie>=e.req_lv&&(o=this.getEquipFightValue(n),r=this.getEquipFightValue(e),r>o))return!0;return!1},n.isCanWear=function(e,t,i,n){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=null);var s,a,o,r=this.getEquipInfoByPartnerAndSubtype(n,e.sub_type,!1,i),h=r.length,l=RoleModel.getInstance().getRoleCommon().round,d=RoleModel.getInstance().getRoleCommon().level;if(0>=h&&0==t)if(e.req_round>0){if(l>=e.req_round)return!0}else{if(!(e.req_lv>0))return!0;if(d>=e.req_lv)return!0}for(var _=0;h>_;_++)if(s=r[_],s.sub_type==e.sub_type){if((s.sub_type==GoodsType.EQUIP_WRISTER||s.sub_type==GoodsType.EQUIP_RING)&&2>h)if(e.req_round>0){if(l>=e.req_round)return!0}else{if(!(e.req_lv>0))return!0;if(d>=e.req_lv)return!0}if(e.req_round>0){if(l>=e.req_round&&(a=this.getEquipFightValue(s),o=this.getEquipFightValue(e),o>a))return!0}else if(e.req_lv>0){if(d>=e.req_lv&&(a=this.getEquipFightValue(s),o=this.getEquipFightValue(e),o>a))return!0}else if(a=this.getEquipFightValue(s),o=this.getEquipFightValue(e),o>a)return!0}return!1},n.getCanWearEquip=function(e,t,i,n){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=null);var s,a,o,r=this.getEquipInfoByPartnerAndSubtype(n,e.sub_type,!1,i),h=r.length,l=RoleModel.getInstance().getRoleCommon().round,d=RoleModel.getInstance().getRoleCommon().level;if(0>=h&&0==t)if(e.req_round>0){if(l>=e.req_round)return this.checkWristerAndRing(e.sub_type),!0}else{if(!(e.req_lv>0))return this.checkWristerAndRing(e.sub_type),!0;if(d>=e.req_lv)return this.checkWristerAndRing(e.sub_type),!0}for(var _=0;h>_;_++)if(s=r[_],s.sub_type==e.sub_type){if((s.sub_type==GoodsType.EQUIP_WRISTER||s.sub_type==GoodsType.EQUIP_RING)&&2>h)if(e.req_round>0){if(l>=e.req_round)return this.checkWristerAndRing(s.sub_type,s.slot,1),!0}else{if(!(e.req_lv>0))return this.checkWristerAndRing(s.sub_type,s.slot,1),!0;if(d>=e.req_lv)return this.checkWristerAndRing(s.sub_type,s.slot,1),!0}if(e.req_round>0){if(l>=e.req_round&&(a=this.getEquipFightValue(s),o=this.getEquipFightValue(e),o>a))return this.setEquipWearObj(s.sub_type,s.slot),!0}else if(e.req_lv>0){if(d>=e.req_lv&&(a=this.getEquipFightValue(s),o=this.getEquipFightValue(e),o>a))return this.setEquipWearObj(s.sub_type,s.slot),!0}else if(a=this.getEquipFightValue(s),o=this.getEquipFightValue(e),o>a)return this.setEquipWearObj(s.sub_type,s.slot),!0}return!1},n.checkWristerAndRing=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var n=0;e==GoodsType.EQUIP_WRISTER||e==GoodsType.EQUIP_RING?(n=e==GoodsType.EQUIP_WRISTER?0==i?5:5==t?6:5:0==i?7:7==t?8:7,this.setEquipWearObj(e,n)):this.setEquipWearObj(e,e)},n.setEquipWearObj=function(e,t){var i,n;for(var s in this.equipWearSlotList)if(n=this.equipWearSlotList[s],e==n.subType&&t==n.slot){i=n;break}null==i&&this.equipWearSlotList.push({subType:e,slot:t})},n.checkGoodsArray=function(e){for(var t,i,n=this._goodsArray.length,s=0;n>s;s++)if(t=this._goodsArray[s],t.item_id==e.item_id){t.item_id=e.item_id,t.partner_id=e.partner_id,t.template_id=e.template_id,t.location=e.location,t.num=e.num,t.rand_attr=e.rand_attr,t.last_sec=e.last_sec,t.slot=e.slot,i=!0;break}i||this._goodsArray.push(e)},n.checkHasEquip=function(e){for(var t,i=this._equipInPartnerList.length,n=0;i>n;n++)if(t=this._equipInPartnerList[n],t.item_id==e)return!0;return!1},n.createGoodInfo=function(e,t){var i=new GoodsInfo;return i.item_id=e.item_id,i.partner_id=e.partner_id,i.template_id=e.template_id,i.location=e.location,i.num=e.num,i.rand_attr=e.rand_attr,i.rand_awake=e.rand_awake,i.last_sec=e.last_sec,i.slot=e.slot,i.type=t.type,i.req_career=t.req_career,i.name=t.name,i.quality=t.quality,i.req_lv=t.req_lv,i.pic=t.pic,i.sub_type=t.sub_type,i.show_bag=t.show_bag,i.is_use=t.is_use,i.event_id=t.event_id,i.overlay=t.overlay,i.limit_time=t.limit_time,i.req_round=t.req_round,i},n.findGoodNumber=function(e){for(var t,i=0,n=this._goodsArray.length,s=0;n>s;s++)t=this._goodsArray[s],t.template_id==e&&(i+=t.num);return i},n.setBaseGrid=function(e){this._baseGrid!=e&&(this._baseGrid=e,this.dispatchEvent(new egret.Event(t.CHANGE_BASEGRID)),this.updateBagGridNum(),this.showBagGuildAlert())},n.getBaseGrid=function(){return this._baseGrid},n.showBagGuildAlert=function(){t.getInstance().getResGridNum()<=20&&t.getInstance().getResGridNum()>0?GuildAertManager.getInstance().add("bag_guildAlert","<font color='#ff0000'>背包将满 ，请回收装备</font>",GameContent.gameLayers.topLayer,MainUIModel.getInstance().bagRect.x-87,MainUIModel.getInstance().bagRect.y-75):t.getInstance().getResGridNum()<=0?GuildAertManager.getInstance().add("bag_guildAlert","<font color='#ff0000'>背包已满 ，请回收装备</font>",GameContent.gameLayers.topLayer,MainUIModel.getInstance().bagRect.x-87,MainUIModel.getInstance().bagRect.y-75):GuildAertManager.getInstance().remove("bag_guildAlert")},n.setOtherGrid=function(e){this._otherGrid!=e&&(this._otherGrid=e,this.dispatchEvent(new egret.Event(t.CHANGE_OTHERGRID)),this.updateBagGridNum(),this.showBagGuildAlert())},n.getOtherGrid=function(){return this._otherGrid},n.updateBagGridNum=function(){for(var e,t=0,i=this._goodsArray.length,n=0;i>n;n++)e=this._goodsArray[n],e.type==GoodsType.ITEM_EQUIP&&(t+=1);this.setGrid(t),this.showBagGuildAlert()},n.setGrid=function(e){this._grid!=e&&(this._grid=e,this.dispatchEvent(new egret.Event(t.CHANGE_GRID)))},n.getGrid=function(){return this._grid},n.getResGridNum=function(){return this._baseGrid+this._otherGrid-this._grid},n.getRongLianGoods=function(e){function t(e,t){return Number(e.fightValue)-Number(t.fightValue)}void 0===e&&(e=1);var i,n,s=this._goodsArray.length,a=[];RongLianProxy.getInstance().resetRongLianTempList(),null==this._equipRecList&&(this._equipRecList=this.createEquipRecList());for(var o=0;s>o;o++)i=this._goodsArray[o],n=this._equipRecList[i.template_id],null!=n&&void 0!=n&&n.type==e&&(1!=e||-1==EquipmentVO.AWAKELEQUIP_GRID.indexOf(Number(i.sub_type)))&&i.type==GoodsType.ITEM_EQUIP&&this.checkCanRec(i,e);var r,h,l=(RongLianProxy.getInstance().ronglianCanRecList,0),d=[];for(o=0;4>o;o++){h=RongLianProxy.getInstance().ronglianTempList[o];for(var _=0;_<GoodsType.EQUIP_TYPE_LIST.length;_++)l=GoodsType.EQUIP_TYPE_LIST[_],r=h[l],null==r||void 0==r||r.length<=0||(r.sort(t),1==e?l==GoodsType.EQUIP_WRISTER||l==GoodsType.EQUIP_RING?(null!=r[r.length-2]||void 0!=r[r.length-2])&&(d=r.slice(0,r.length-2),a=a.concat(d)):(d=r.slice(0,r.length-1),a=a.concat(d)):2==e&&(null!=r[r.length-3]||void 0!=r[r.length-3])&&(d=r.slice(0,r.length-3),a=a.concat(d)))}return a=a.concat(RongLianProxy.getInstance().ronglianCanRecList)},n.getRonglianCanSelectList=function(e){void 0===e&&(e=1);for(var t,i,n=this._goodsArray.length,s=[],a=0;n>a;a++)t=this._goodsArray[a],i=this._equipRecList[t.template_id],null!=i&&void 0!=i&&i.type==e&&s.push(t);return s},n.getBasicProp=function(e,t,i,n,s,a,o,r,h,l,d,_,c,u){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===a&&(a=-1),void 0===o&&(o=!1),void 0===r&&(r=-1),void 0===h&&(h=!1),void 0===l&&(l=!1),void 0===d&&(d=0),void 0===_&&(_=!1),void 0===c&&(c=!1),void 0===u&&(u=!0);var p,g=_?1:0,m=c?1:0,v=u?1:0;switch(n){case 1:p=this._goodsList[s];break;case 2:break;case 3:}var C=this.getBasicGood(e);return null==C?"":e+"|"+t+"|"+i+"|"+o+"|"+d+"|"+a+"|"+h+"|"+l+"|"+s+"|"+g+"|"+m+"|"+v},n.checkBagGridResNum=function(e,t){return void 0===t&&(t=0),this.getBaseGrid()+this.getOtherGrid()-this.getGrid()<e?(0==t&&(t=e),Message.show("背包空间小于"+t+"不能打BOSS"),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_PACK,{index:0,isOpen:!0})),!1):!0},n.changeEquipPos=function(e){for(var t,i,n=0;n<e.length;n++){t=e[n];for(var s=0;s<this._equipInPartnerList.length;s++)i=this._equipInPartnerList[s],i.item_id==t.item_id&&this._equipInPartnerList.splice(s,1)}this.createList(e,!1)},n.getEquipFightValue=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=1e4);var s=t.getInstance().getEquipBasicGood(e.template_id),a=EquipBasic.PROPERTY_INDEX,o=new EquipBasic,r="",h=0,l=0,d=0,_=AwakeModel.getInstance().getAwakeSkillVO(e.rand_awake);i>0&&(e.rand_attr=i);for(var c=0;c<a.length;c++)r=a[c],h=s[r],l=null==e?0:Math.floor(e.rand_attr/n*h),0>=l&&(l=1),d=Number(h)+Number(l),0>=h||(o[r]=d);if(_){var u=EquipBasic.PROPERTY_INDEX[_.proList[0].key-1];o[u]+=_.proList[0].value}return PropertyUtil.calculateProFight(o)},n.getProVOFightValue=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=1e4);for(var n=EquipBasic.PROPERTY_INDEX,s=new PropertyVO,a="",o=0,r=0,h=0;h<n.length;h++)a=n[h],o=e[a],0>=o||(5>h?r=Number(o):h>=5&&(r=o/1e4),s[a]=r);return PropertyUtil.calculateProFight(s)},n.hasGiftGoodsInBag=function(){for(var e,t=this._goodsArray.length,i=0;t>i;i++)if(e=this._goodsArray[i],e.type==GoodsType.ITEM_GIFT)return!0;return!1},n.getGoodsArr=function(){return this._goodsArray},n.getGoodsByTypeAndSubType=function(e,t){var i,n,s=new Array;for(i in this._goodsList)n=this._goodsList[i],n.type==e&&n.sub_type==t&&s.push(n);return s},n.getGoodsEvtVo=function(e){if(null==this._goodsEvtDic){this._goodsEvtDic=new Object;for(var t=DataManager.getInstance().getObj("data_item_event"),i=t.data_item_event,n=0;n<i.length;n++){var s=i[n],a=new GoodsEvtVo;a.template_id=s.template_id,a.type=s.type,a.describe=s.describe,a.value1=s.value1,this._goodsEvtDic[a.template_id]=a}}return this._goodsEvtDic[e]},n.getNewEquipPropetyVO=function(e,t){for(var i=EquipBasic.PROPERTY_INDEX,n=new EquipBasic,s="",a=0,o=0,r=0,h=0;h<i.length;h++)s=i[h],a=e[s],o=null==t?0:Math.floor(t.rand_attr/1e4*a),0>=o&&(o=1),r=Number(a)+Number(o),0>=a||(n[s]=r);var l=AwakeModel.getInstance().getAwakeSkillVO(t.rand_awake);if(l){var d=EquipBasic.PROPERTY_INDEX[l.proList[0].key-1];n[d]+=l.proList[0].value}return n},n.getAwakeEquipVOByLevelAndRoundAndSubtype=function(e,t,i){this._goodsBasicArray.length<=0&&this.createGoodsBasics();for(var n,s,a=this._goodsBasicArray.length,o=0;a>o;o++)if(n=this._goodsBasicArray[o],i==n.sub_type){if(e>0&&n.req_lv==e){s=this.getGoodsInfoByType(n.template_id);break}if(t>0&&n.req_round==t){s=this.getGoodsInfoByType(n.template_id);break}}return s},n.getAwakeEquipByLevelAndRound=function(e,t){for(var i,n=this._goodsArray.length,s=[],a=0;n>a;a++)i=this._goodsArray[a],-1!=EquipmentVO.AWAKELEQUIP_GRID.indexOf(Number(i.sub_type))&&(e>0&&i.req_lv==e?s.push(i):t>0&&i.req_round==t&&s.push(i));return s},t.CHANGE_BASEGRID="CHANGE_BASEGRID",t.CHANGE_OTHERGRID="CHANGE_OTHERGRID",t.CHANGE_GRID="CHANGE_GRID",t}(BaseProxy);egret.registerClass(GoodsListProxy,"GoodsListProxy");var GoodsType=function(){function e(){}var t=(__define,e);t.prototype;return e.ITEM_EQUIP=10,e.ITEM_GIFT=16,e.ITEM_OTHER=90,e.EQUIP_PARTNAME={1:"武器",2:"衣服",3:"头盔",4:"项链",5:"护腕",6:"戒指",9:"天珠",30:"仙翎",31:"仙喙",32:"仙骨",33:"仙晶",34:"光粉",35:"光滴",36:"光石",37:"光魂",40:"觉醒武器",41:"觉醒衣服",42:"觉醒帽子",43:"觉醒鞋子",44:"觉醒护腕",45:"觉醒腰带",46:"觉醒项链",47:"觉醒戒指"},e.EQUIP_WEAPON=1,e.EQUIP_ARMOR=2,e.EQUIP_HEAD=3,e.EQUIP_NECKLACE=4,e.EQUIP_WRISTER=5,e.EQUIP_RING=6,e.SPECIAL_EQUIP_1=1,e.SPECIAL_EQUIP_2=2,e.SPECIAL_EQUIP_3=3,e.SPECIAL_EQUIP_4=4,e.EQUIP_TYPE_LIST=[1,2,3,4,5,6,30,31,32,33],e.EQUIP_NORMAL_TYPE_LIST=[1,2,3,4,5,6],e.COLOR_WHITE=0,e.COLOR_GREEN=1,e.COLOR_BLUE=2,e.COLOR_PURPLE=3,e.COLOR_ORANGE=4,e.COLOR_RED=5,e.COLOR_GOLD=6,e.QUALITY_1=1,e.QUALITY_2=2,e.QUALITY_3=3,e.QUALITY_4=4,e.QUALITY_5=5,e.QUALITY_6=6,e.QUALITY_7=7,e}();egret.registerClass(GoodsType,"GoodsType");var PropertyVO=function(){function e(){this.hp=0,this.mp=0,this.attack=0,this.att_def=0,this.magic_def=0,this.crit=0,this.crit_hurt=0,this.crit_def=0,this.palsy_rate=0,this.palsy_def=0,this.hurt_up=0,this.hurt_def=0,this.hp_up=0}var t=(__define,e),i=t.prototype;return i.setValue=function(t,i){switch(t){case e.HP:this.hp=i;break;case e.MP:this.mp=i;break;case e.ATTACK:this.attack=i;break;case e.ATTACK_DEF:this.att_def=i;break;case e.MAGIC_DEF:this.magic_def=i;break;case e.CRIT:this.crit=i;break;case e.CRIT_HURT:this.crit_hurt=i;break;case e.CRIT_DEF:this.crit_def=i;break;case e.PALSY_RATE:this.palsy_rate=i;break;case e.PALSY_DEF:this.palsy_def=i;break;case e.HURT_UP:this.hurt_up=i;break;case e.HURT_DEF:this.hurt_def=i;break;case e.HP_UP:this.hp_up=i}},i.getValue=function(t){switch(t){case e.HP:return this.hp;case e.MP:return this.mp;case e.ATTACK:return this.attack;case e.ATTACK_DEF:return this.att_def;case e.MAGIC_DEF:return this.magic_def;case e.CRIT:return this.crit;case e.CRIT_HURT:return this.crit_hurt;case e.CRIT_DEF:return this.crit_def;case e.PALSY_RATE:return this.palsy_rate;case e.PALSY_DEF:return this.palsy_def;case e.HURT_UP:return this.hurt_up;case e.HURT_DEF:return this.hurt_def;case e.HP_UP:return this.hp_up}return 0},i.clone=function(){var t=new e;return t.hp=this.hp,t.mp=this.mp,t.att_def=this.att_def,t.attack=this.attack,t.magic_def=this.magic_def,t.crit=this.crit,t.crit_hurt=this.crit_hurt,t.crit_def=this.crit_def,t.palsy_def=this.palsy_def,t.palsy_rate=this.palsy_rate,t.hurt_up=this.hurt_up,t.hurt_def=this.hurt_def,t.hp_up=this.hp_up,t},i.add=function(e){this.hp+=e.hp,this.mp+=e.mp,this.att_def+=e.att_def,this.attack+=e.attack,this.magic_def+=e.magic_def,this.crit+=e.crit,this.crit_hurt+=e.crit_hurt,this.crit_def+=e.crit_def,this.palsy_def+=e.palsy_def,this.palsy_rate+=e.palsy_rate,this.hurt_up+=e.hurt_up,this.hurt_def+=e.hurt_def,this.hp_up+=e.hp_up},i.up=function(e){this.hp+=Math.floor(this.hp*e),this.mp+=Math.floor(this.mp*e),this.att_def+=Math.floor(this.att_def*e),this.attack+=Math.floor(this.attack*e),this.magic_def+=Math.floor(this.magic_def*e),this.crit+=Math.floor(this.crit*e),this.crit_hurt+=Math.floor(this.crit_hurt*e),this.crit_def+=Math.floor(this.crit_def*e),this.palsy_def+=Math.floor(this.palsy_def*e),this.palsy_rate+=Math.floor(this.palsy_rate*e),this.hurt_up+=Math.floor(this.hurt_up*e),this.hurt_def+=Math.floor(this.hurt_def*e),this.hp_up+=Math.floor(this.hp_up*e)},e.HP=1,e.MP=2,e.ATTACK=3,e.ATTACK_DEF=4,e.MAGIC_DEF=5,e.CRIT=6,e.CRIT_HURT=7,e.CRIT_DEF=8,e.PALSY_RATE=9,e.PALSY_DEF=10,e.HURT_UP=11,e.HURT_DEF=12,e.HP_UP=13,e}();egret.registerClass(PropertyVO,"PropertyVO");var EquipBasic=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t.getProStr=function(e){return t.PROPERTY_NAME[t.PROPERTY_INDEX[e-1]]},t.PROPERTY_NAME={hp:"生命",mp:"魔法",attack:"攻击",att_def:"物防",magic_def:"法防",crit:"暴击",crit_hurt:"暴击伤害",crit_def:"抗暴",palsy_rate:"麻痹几率",palsy_def:"麻痹抵抗",hurt_up:"伤害加成",hurt_def:"伤害减免",hp_up:"生命加成"},t.PROPERTY_INDEX=["hp","mp","attack","att_def","magic_def","crit","crit_hurt","crit_def","palsy_rate","palsy_def","hurt_up","hurt_def","hp_up"],t}(PropertyVO);egret.registerClass(EquipBasic,"EquipBasic");var GoodsInfo=function(){function e(){this.num=1,this.rand_attr=0,this.rand_awake=0,this.fightValue=0,this.rate=1e4}var t=__define,i=e,n=i.prototype;return t(n,"name",function(){return 16010122==this.template_id?"父亲节礼包":this._name},function(e){this._name=e}),e}();egret.registerClass(GoodsInfo,"GoodsInfo");var EquipInfo=function(e){function t(){e.call(this),this.type=0,this.level=0}__extends(t,e);var i=(__define,t);i.prototype;return t}(GoodsInfo);egret.registerClass(EquipInfo,"EquipInfo");var EquipRecVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(EquipRecVO,"EquipRecVO");var EquipmentVO=function(){function e(){this.the_1_Grid=null,this.the_2_Grid=null,this.the_3_Grid=null,this.the_4_Grid=null,this.the_5_Grid=null,this.the_6_Grid=null,this.the_7_Grid=null,this.the_8_Grid=null,this.the_9_Grid=null,this.the_101_Grid=null,this.the_102_Grid=null,this.the_103_Grid=null,this.the_104_Grid=null,this.the_30_Grid=null,this.the_31_Grid=null,this.the_32_Grid=null,this.the_33_Grid=null,this.the_40_Grid=null,this.the_41_Grid=null,this.the_42_Grid=null,this.the_43_Grid=null,this.the_44_Grid=null,this.the_45_Grid=null,this.the_46_Grid=null,this.the_47_Grid=null}var t=(__define,e);t.prototype;return e.SPECIALEQUIP_GRID=[101,102,103,104],e.DOMINATEEQUIP_GRID=[111,112,113,114],e.WINGLEQUIP_GRID=[30,31,32,33],e.AWAKELEQUIP_GRID=[40,41,42,43,44,45,46,47],e.ORANGEEQUIP_GRID=[1,2,3,4,5,6,7,8],e.LEGENDEQUIP_GRID=[1,2,7,8],e.EQUIP_PART1=1,e.EQUIP_PART2=2,e.EQUIP_PART3=3,e.EQUIP_PART4=4,e.EQUIP_PART5=5,e.EQUIP_PART6=6,e.EQUIP_PART7=7,e.EQUIP_PART8=8,e.EQUIP_PART9=9,e}();egret.registerClass(EquipmentVO,"EquipmentVO");var GoodsBasic=function(){function e(){}var t=__define,i=e,n=i.prototype;return t(n,"name",function(){return 16010122==this.template_id?"父亲节礼包":this._name},function(e){this._name=e}),e}();egret.registerClass(GoodsBasic,"GoodsBasic");var GoodsDynamic=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(GoodsDynamic,"GoodsDynamic");var GoodsEvtVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(GoodsEvtVo,"GoodsEvtVo");var RongLianProxy=function(e){function t(){e.call(this),this.ronglianTempList=new Object,this.ronglianCanRecList=[],this.ronglianSelectdList=[]}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},n.checkSelected=function(e){for(var t,i=0;i<this.ronglianSelectdList.length;i++)if(t=this.ronglianSelectdList[i],t.item_id==e)return!0;return!1},n.resetRongLianTempList=function(){this.ronglianCanRecList=[],this.ronglianTempList[0]=new Object,this.ronglianTempList[1]=new Object,this.ronglianTempList[2]=new Object,this.ronglianTempList[3]=new Object},n.deleteSelectedInfo=function(e){for(var t,i=0;i<this.ronglianSelectdList.length;i++)if(t=this.ronglianSelectdList[i],t.item_id==e){this.ronglianSelectdList.splice(i,1);break}},n.getRongLuMaxExp=function(e){var t,i=GoodsListProxy.getInstance().getEquipRongLuList();for(var n in i)if(t=i[n],e<t.lv)return t.exp;return 0},t}(BaseProxy);egret.registerClass(RongLianProxy,"RongLianProxy");var RongLuVO=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(PropertyVO);egret.registerClass(RongLuVO,"RongLuVO");var Csprite=function(e){function t(t){void 0===t&&(t="Csprite"),e.call(this),this._showRedDot=!1,this.dispatcher=GameDispatcher.getInstance()}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.addGlobalEventListener=function(e,t,i,n,s,a){void 0===n&&(n=!1),void 0===s&&(s=0),void 0===a&&(a=!1),this.dispatcher.addEventListener(e,t,i,n,s)},s.removeGlobalEventListener=function(e,t,i,n){void 0===n&&(n=!1),this.dispatcher.removeEventListener(e,t,i,n)},s.dispatchGlobalEvent=function(e){return this.dispatcher.dispatchEvent(e)},s.hasGlobalEventListener=function(e){return this.dispatcher.hasEventListener(e)},s.setRedDotPoint=function(e,t){this._imageRed&&(this._imageRed.top=e,this._imageRed.left=t)},i(s,"showRedDot",function(){return this._showRedDot},function(e){return this._showRedDot!=e?(this._showRedDot=e,1==this._showRedDot?void(null==this._imageRed&&(this._imageRed=new CustomImage,this._imageRed.source=RES.getRes("share_json.share_alert"),this.addChild(this._imageRed),this._imageRed.top=1,this._imageRed.left=1)):void(this._imageRed&&(this._imageRed.parent&&this._imageRed.parent.removeChild(this._imageRed),this._imageRed.dispose(),this._imageRed=null))):void 0}),s.onAdd=function(){},s.onRemove=function(){},s.dispose=function(){this.showRedDot=!1,this.parent&&this.parent.removeChild(this),this._isInit=!1},t}(eui.Component);egret.registerClass(Csprite,"Csprite");var BaseWindow=function(e){function t(t){void 0===t&&(t="BaseWindow"),e.call(this,t),this._isPop=!1}__extends(t,e);var i=__define,n=t,s=n.prototype;return i(s,"isPop",function(){return this._isPop},function(e){return this._isPop==e?void(1==e&&this.parent.setChildIndex(this,this.parent.numChildren-1)):(this._isPop=e,void(1==e?(PopManager.getInstance().popUp(this),this.onOpenHandler(),this.setCenter()):(PopManager.getInstance().popBack(this),this.onCloseHandler())))}),i(s,"isPop2",void 0,function(e){this._isPop!=e&&(this._isPop=e,1==e?(PopManager.getInstance().popUp(this,!0),this.onOpenHandler(),this.setCenter()):(PopManager.getInstance().popBack(this),this.onCloseHandler()))}),s.onOpenHandler=function(){},s.onCloseHandler=function(){this.dispatchEvent(new ParamEvent(EventName.WINDOW_DISPOSE))},s.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=45},s.dispose=function(){e.prototype.dispose.call(this)},t}(Csprite);egret.registerClass(BaseWindow,"BaseWindow",["IBaseWindow"]);var LayeroutWindow=function(e){function t(t){void 0===t&&(t="LayeroutWindow"),e.call(this,t),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiCompHandler=function(){this.panelSkin&&this.panelSkin.addEventListener(EventName.WIN_CLOSE,this.onCloseBtnClick,this)},s.onCloseBtnClick=function(e){this.isPop=!1},s.onOpenHandler=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickThisHandler,this)},s.onCloseHandler=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickThisHandler,this),this.panelSkin&&this.panelSkin.removeEventListener(EventName.WIN_CLOSE,this.onCloseBtnClick,this),this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onReGroupLoadComplete,this),e.prototype.onCloseHandler.call(this)},s.setImageTitle=function(e){-1!=e.indexOf("_json")?this.panelSkin&&(this.panelSkin.imageTitle.source=RES.getRes(e+"")):this.panelSkin&&(this.panelSkin.imageTitle.source=RES.getRes(this._resGroupName+"_json."+e))},s.setImageWindowTitle=function(e){this.panelSkin&&(this.panelSkin.imageTitle.source=UrlUtil.getWindowTitlePicURL(e))},i(s,"resGroupName",void 0,function(e){this._resGroupName=e,RES.isGroupLoaded(this._resGroupName)?this.onReGroupLoadComplete():(RES.loadGroup(this._resGroupName),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onReGroupLoadComplete,this))}),s.onReGroupLoadComplete=function(){},s.onReturnButtonClick=function(){this.panelSkin&&this.panelSkin.dispatchEvent(new ParamEvent(EventName.WIN_CLOSE))},s.getBtnReturn=function(){return this.panelSkin?this.panelSkin.getBtnReturn():null},s.onBtnReturnSetIndex=function(){this.panelSkin.onBtnReturnSetIndex()},i(s,"windowBgBottom",void 0,function(e){this.panelSkin&&this.panelSkin.setWindowBgBottom(e)}),i(s,"windowBgSource",void 0,function(e){this.panelSkin&&this.panelSkin.setWindowBgSource(e)}),i(s,"imageTitleTop",void 0,function(e){this.panelSkin&&this.panelSkin.setImageTitleTop(e)}),s.onClickThisHandler=function(e){if(null!=this.getBtnReturn()&&void 0!=this.getBtnReturn()){var t;this.getBtnReturn()&&(t=this.getBtnReturn().globalToLocal(e.stageX,e.stageY),t.x>0&&t.x<this.getBtnReturn().width&&t.y>0&&t.y<this.getBtnReturn().height&&this.onCloseBtnClick(new ParamEvent(EventName.WIN_CLOSE,{type:1})))}},s.dispose=function(){e.prototype.dispose.call(this)},t}(BaseWindow);egret.registerClass(LayeroutWindow,"LayeroutWindow");var DebugView=function(e){function t(){e.call(this),this.skinName="resource/game_skins/test/testWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this._isInit=!0,this._tmpStr&&this.setData(this._tmpStr),this._btnScene.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSceneBtn,this),this._btnDeleteEffect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEffectBtn,this),this._btn10602.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick10602,this)},n.onClick10602=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.GET_WAVE_REWARD))},n.setData=function(e){return this._isInit?void(this._txtContent.text=e):void(this._tmpStr=e)},n.onClickSceneBtn=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ChatEvtName.CHAT_CCMD11600,"bzsc110"))},n.onClickEffectBtn=function(e){UIEffect.disposeAll()},t}(LayeroutWindow);egret.registerClass(DebugView,"DebugView");var AchievementEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.ACHIEVEMENT_WINDOW_OPEN="ACHIEVEMENT_WINDOW_OPEN",e.CCMD21100="CCMD21100",e.CCMD21101="CCMD21101",e.CCMD21100_UPDATE="CCMD21100_UPDATE",e.ACHIEVEMENT_REWARD_AUTO="ACHIEVEMENT_REWARD_AUTO",e}();egret.registerClass(AchievementEvtName,"AchievementEvtName");var ActivityEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CCMD22200="CCMD22200",e.CCMD22200_UPDATE="CCMD22200_UPDATE",e.CCMD22210="CCMD22210",e.CCMD22310="CCMD22310",e.CCMD22311="CCMD22311",e.CCMD22300_UPDATE="CCMD22300_UPDATE",e.CCMD22410="CCMD22410",e.CCMD22400_UPDATE="CCMD22400_UPDATE",e.CCMD22600="CCMD22600",e.CCMD22600_UPDATE="CCMD22600_UPDATE",e.SUPER_VIP_CLOSE_VIEW="SUPER_VIP_CLOSE_VIEW",e.CCMD22900_UPDATE="CCMD22900_UPDATE",e.CCMD22910="CCMD22910",e.CCMD22920="CCMD22920",e.CCMD24700="CCMD24700",e.CCMD24700_UPDATE="CCMD24700_UPDATE",e.CCMD24710="CCMD24710",e}();egret.registerClass(ActivityEvtName,"ActivityEvtName");var ArtifactEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.ARTIFACT_OPEN_WINDOW="ARTIFACT_OPEN_WINDOW",e.ARTIFACT_CLOSE_WINDOW="ARTIFACT_CLOSE_WINDOW",e.ARTIFACT_OPEN_SINGLE_WINDOW="ARTIFACT_OPEN_SINGLE_WINDOW",e.ARTIFACT_UPDATE_INFO="ARTIFACT_UPDATE_INFO",e.SHENGONG_UPDATE_INFO="SHENGONG_UPDATE_INFO",e.EXNOBILITY_UPDATE_INFO="EXNOBILITY_UPDATE_INFO",e.CCMD12900="CCMD12900",e.CCMD12901="CCMD12901",e.CCMD15900="CCMD15900",e.CCMD15901="CCMD15901",e.CCMD16000="CCMD16000",e.CCMD16001="CCMD16001",e}();egret.registerClass(ArtifactEvtName,"ArtifactEvtName");var AwakeEquipEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.AWAKEEQUIPMENU_OPEN="AWAKEEQUIPMENU_OPEN",e.AWAKEEQUIPMENU_CLOSE="AWAKEEQUIPMENU_CLOSE",e.AWAKEEQUIPWEAR_OPEN="AWAKEEQUIPWEAR_OPEN",e.AWAKEEQUIPCOMPOSE_OPEN="AWAKEEQUIPCOMPOSE_OPEN",e.AWAKEEQUIPCOMPOSE_MATERIAL_OPEN="AWAKEEQUIPCOMPOSE_MATERIAL_OPEN",e.AWAKEEQUIPCOMPOSE_SUCCESS="AWAKEEQUIPCOMPOSE_SUCCESS",e.CCMD20300="CCMD20300",e.CCMD20301="CCMD20301",e.CCMD20302="CCMD20302",e.CCMD20310="CCMD20310",e.CCMD21600="CCMD21600",e.CCMD21601="CCMD21601",e.CCMD21600_UPDATE="CCMD21600_UPDATE",e.AWAKEEQUIP_SOUL_VIEW_OPEN="AWAKEEQUIP_SOUL_VIEW_OPEN",e}();egret.registerClass(AwakeEquipEvtName,"AwakeEquipEvtName");var AwakeEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CCMD_19800="CCMD_19800",e.CCMD_23500="CCMD_23500",e.CCMD_19800_UPDATE="CCMD_19800_UPDATE",e.CCMD_19801="CCMD_19801",e.CCMD_19802="CCMD_19802",e.OPEN_AWAKE="OPEN_AWAKE",e.OPEN_AWAKE_SKILL="OPEN_AWAKE_SKILL",e.OPEN_AWAKE_BUY="OPEN_AWAKE_BUY",e.OPEN_AWAKE_SCORE="OPEN_AWAKE_SCORE",e}();egret.registerClass(AwakeEvtName,"AwakeEvtName");var BossEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.OPEN_BOSS_WINDOW="OPEN_BOSS_WINDOW",e.OPEN_MEET_BOSS_WINDOW="OPEN_MEET_BOSS_WINDOW",e.ADD_BOSS_OF_MEET="ADD_BOSS_OF_MEET",e.CHALLENGE_MEET_BOSS="CHALLENGE_MEET_BOSS",e.OPEN_BOSS_ALL_SETTING="OPEN_BOSS_ALL_SETTING",e.OPEN_BOSS_ALL_HIT="OPEN_BOSS_ALL_HIT",e.OPEN_BOSS_ALL_KILL="OPEN_BOSS_ALL_KILL",e.OPEN_BOSS_MAINUI="OPEN_BOSS_MAINUI",e.OPEN_BOSS_ROUND_HIT="OPEN_BOSS_ROUND_HIT",e.OPEN_BOSS_ROUND_REWARD="OPEN_BOSS_ROUND_REWARD",e.BOSS_CCMD13110="BOSS_CCMD13110",e.BOSS_CCMD13110_UPDATE="BOSS_CCMD13110_UPDATE",e.BOSS_CCMD13111="BOSS_CCMD13111",e.BOSS_CCMD13111_UPDATE="BOSS_CCMD13111_UPDATE",e.BOSS_CCMD13112="BOSS_CCMD13112",e.BOSS_CCMD14400="BOSS_CCMD14400",e.BOSS_CCMD14400_UPDATE="BOSS_CCMD14400_UPDATE",e.BOSS_CCMD14401="BOSS_CCMD14401",e.BOSS_CCMD14401_UPDATE="BOSS_CCMD14401_UPDATE",e.BOSS_CCMD14402="BOSS_CCMD14402",e.BOSS_CCMD14410="BOSS_CCMD14410",e.BOSS_CCMD14410_UPDATE="BOSS_CCMD14410_UPDATE",e.BOSS_CCMD14800="BOSS_CCMD14800",e.BOSS_CCMD14800_UPDATE="BOSS_CCMD14800_UPDATE",e.BOSS_CCMD14810="BOSS_CCMD14810",e.BOSS_CCMD14810_UPDATE="BOSS_CCMD14810_UPDATE",e.BOSS_CCMD14811="BOSS_CCMD14811",e.BOSS_CCMD14820="BOSS_CCMD14820",e.BOSS_CCMD14811_UPDATE="BOSS_CCMD14811_UPDATE",e.CCMD20730="CCMD20730",e.CCMD20530="CCMD20530",e.CMD19400="CMD19400",e.CMD19400_UPDATE="CMD19400_UPDATE",e.CMD19410="CMD19410",e.CMD19410_UPDATE="CMD19410_UPDATE",e.CMD19411_UPDATE="CMD19411_UPDATE",e.CMD19412_UPDATE="CMD19412_UPDATE",e.CMD19420="CMD19420",e.CMD19430="CMD19430",e.CMD19430_UPDATE="CMD19430_UPDATE",e.CMD19431="CMD19431",e.OPEN_KUAFU_BOSS_VIEW="OPEN_KUAFU_BOSS_VIEW",e.CLOSE_KUAFU_BOSS_VIEW="CLOSE_KUAFU_BOSS_VIEW",e.CMD20110="CMD20110",e.CMD20120="CMD20120",e.CMD20100_UPDATE="CMD20100_UPDATE",e.CMD20101_UPDATE="CMD20101_UPDATE",e.BOSS_SHOW_FIGHT_RESULT="BOSS_SHOW_FIGHT_RESULT",e.OPEN_BOSS_LIST="OPEN_BOSS_LIST",e.BOSS_HOME_ITEM_CLICK="BOSS_HOME_ITEM_CLICK",e.CMD20500="CMD20500",e.CMD20500_UPDATE="CMD20500_UPDATE",e.CMD20501_UPDATE="CMD20501_UPDATE",e.CMD20510="CMD20510",e.CMD20520="CMD20520",e.CMD20600="CMD20600",e.CMD20600_UPDATE="CMD20600_UPDATE",e.CMD20610="CMD20610",e.BOSS_FIELD_ITEM_CLICK="BOSS_FIELD_ITEM_CLICK",e.CMD20700="CMD20700",e.CMD20700_UPDATE="CMD20700_UPDATE",e.CMD20701_UPDATE="CMD20701_UPDATE",e.CMD20710="CMD20710",e.CMD20720="CMD20720",e
}();egret.registerClass(BossEvtName,"BossEvtName");var BuildEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.BUILD_CCMD11800="BUILD_CCMD11800",e.BUILD_CCMD11800_UPDATE="BUILD_CCMD11800_UPDATE",e.BUILD_CCMD11801="BUILD_CCMD11801",e.BUILD_CCMD11810="BUILD_CCMD11810",e.BUILD_CCMD11810_UPDATE="BUILD_CCMD11810_UPDATE",e.BUILD_CCMD11811="BUILD_CCMD11811",e.BUILD_CCMD11820="BUILD_CCMD11820",e.BUILD_CCMD11820_UPDATE="BUILD_CCMD11820_UPDATE",e.BUILD_CCMD11821="BUILD_CCMD11821",e.BUILD_CCMD11830="BUILD_CCMD11830",e.BUILD_CCMD11831="BUILD_CCMD11831",e.BUILD_CCMD11830_UPDATE="BUILD_CCMD11830_UPDATE",e.BUILD_CCMD21900="CCMD21900",e.BUILD_CCMD21900_UPDATE="CCMD21900_UPDATE",e.BUILD_CCMD21901="CCMD21901",e}();egret.registerClass(BuildEvtName,"BuildEvtName");var ChatEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CHAT_CCMD11600="CHAT_CCMD11600",e.CHAT_SCMD11600_UPDATE="CHAT_SCMD11600_UPDATE",e.CHAT_CCMD11601="CHAT_CCMD11601",e.CHAT_SCMD11601_UPDATE="CHAT_SCMD11601_UPDATE",e.CHAT_CCMD11602="CHAT_CCMD11602",e.CHAT_SCMD11602_UPDATE="CHAT_SCMD11602_UPDATE",e.CHAT_SCMD11603_UPDATE="CHAT_SCMD11603_UPDATE",e.CHAT_CCMD11620="CHAT_CCMD11620",e.CHAT_SHOW_TOP="CHAT_SHOW_TOP",e.CHAT_SHOW_LABA="CHAT_SHOW_LABA",e}();egret.registerClass(ChatEvtName,"ChatEvtName");var CheckPointBossEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CHECKPOINTBOSS_OPEN_WINDOW="CHECKPOINTBOSS_OPEN_WINDOW",e.CHECKPOINTBOSS_ENTER="CHECKPOINTBOSS_ENTER",e.NOVICECG_OPEN_WINDOW="NOVICECG_OPEN_WINDOW",e.NOVICECG_CLOSE_WINDOW="NOVICECG_CLOSE_WINDOW",e.NOVICECG_TASK_GIFT_OPEN_WINDOW="NOVICECG_TASK_GIFT_OPEN_WINDOW",e.LEVELUP_ALERT_OPEN_WINDOW="LEVELUP_ALERT_OPEN_WINDOW",e.CCMD10605="CCMD10605",e.CCMD20400="CCMD20400",e}();egret.registerClass(CheckPointBossEvtName,"CheckPointBossEvtName");var ChenghaoEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CHENGHAO_OPEN_WINDOW="CHENGHAO_OPEN_WINDOW",e.CHENGHAO_OPEN_GETVIEW="CHENGHAO_OPEN_GETVIEW",e.CHENGHAO_UPDATE_INFO="CHENGHAO_UPDATE_INFO",e.CCMD12300="CCMD12300",e.CCMD12301="CCMD12301",e.CCMD12302="CCMD12302",e}();egret.registerClass(ChenghaoEvtName,"ChenghaoEvtName");var CityWarEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.SHOW_CITYWAR_VIEW="SHOW_CITYWAR_VIEW",e.SHOW_REWARDCONFIG_VIEW="SHOW_REWARDCONFIG_VIEW",e.SHOW_CWASSIGNVIEW="SHOW_CWASSIGNVIEW",e.SHOW_DAILYREWARDVIEW="SHOW_DAILYREWARDVIEW",e.ASSIGN_GOODS="ASSIGN_GOODS",e.ADD_CITYWAR_ICON="ADD_CITYWAR_ICON",e.ROLES_GOTO_FLAG="ROLES_GOTO_FLAG",e.CLEAR_INNER_RANK_DATA="CLEAR_INNER_RANK_DATA",e.SET_ENERMY_POS="GOTO_FIGHT_PLAYER",e.ATTACK_FLAG="ATTACK_FLAG",e.CLEAR_ASSIGN_DATA="CLEAR_ASSIGN_DATA",e.SHOW_HELP_VIEW="SHOW_HELP_VIEW",e.REQUEST_15200="REQUEST_15200",e.REQUEST_15201="REQUEST_15201",e.REQUEST_15202="REQUEST_15202",e.REQUEST_15203="REQUEST_15203",e.REQUEST_15210="REQUEST_15210",e.REQUEST_15211="REQUEST_15211",e.REQUEST_15220="REQUEST_15220",e.REQUEST_15230="REQUEST_15230",e.REQUEST_15310="REQUEST_15310",e.REQUEST_15400="REQUEST_15400",e.REQUEST_15410="REQUEST_15410",e.REQUEST_15411="REQUEST_15411",e.REQUEST_15412="REQUEST_15412",e.REQUEST_15413="REQUEST_15413",e.REQUEST_15420="REQUEST_15420",e.REQUEST_15500="REQUEST_15500",e.REQUEST_15501="REQUEST_15501",e.REQUEST_15502="REQUEST_15502",e.REQUEST_15510="REQUEST_15510",e.REQUEST_15520="REQUEST_15520",e.REQUEST_15521="REQUEST_15521",e.REQUEST_15600="REQUEST_15600",e.REQUEST_15601="REQUEST_15601",e.REQUEST_15602="REQUEST_15602",e.REQUEST_15610="REQUEST_15610",e.REQUEST_15611="REQUEST_15611",e.REQUEST_15612="REQUEST_15612",e.REQUEST_15620="REQUEST_15620",e.REQUEST_15630="REQUEST_15630",e}();egret.registerClass(CityWarEvtName,"CityWarEvtName");var DailyEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.DAILY_UPDATE="DAILY_UPDATE",e.DAILY_DATA_CHANGE="DAILY_DATA_CHANGE",e.FIXED_DATA_CHANGE="FIXED_DATA_CHANGE",e.FIXED_DATA_UPDATE="FIXED_DATA_UPDATE",e}();egret.registerClass(DailyEvtName,"DailyEvtName");var DarkEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.OPEN_RANK_VIEW="OPEN_RANK_VIEW",e.OPEN_LOG_VIEW="OPEN_LOG_VIEW",e.OPEN_REWARD_VIEW="OPEN_REWARD_VIEW",e.CCMD17100="CCMD17100",e.CCMD17100_UPDATE="CCMD17100_UPDATE",e.CCMD17101="CCMD17101",e.CCMD17101_UPDATE="CCMD17101_UPDATE",e.CCMD17110="CCMD17110",e.CCMD17111_UPDATE="CCMD17111_UPDATE",e}();egret.registerClass(DarkEvtName,"DarkEvtName");var DominateEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.DOMINATE_OPEN_WINDOW="DOMINATE_OPEN_WINDOW",e.DOMINATE_UPDATE_INFO="DOMINATE_UPDATE_INFO",e.DOMINATE_UPDATE_ONE_INFO="DOMINATE_UPDATE_ONE_INFO",e.CCMD12400="CCMD12400",e.CCMD12401="CCMD12401",e.CCMD12402="CCMD12402",e.CCMD12403="CCMD12403",e}();egret.registerClass(DominateEvtName,"DominateEvtName");var EventName=function(){function e(){}var t=(__define,e);t.prototype;return e.GAME_START="GAME_START",e.SCENE_BUILD="SCENE_BUILD",e.STOPAUTOFIGHT="STOPAUTOFIGHT",e.LOGIN="Login",e.REQUEST_WAVE="REQUEST_WAVE",e.REQUEST_NEXT_WAVE="REQUEST_NEXT_WAVE",e.WAVE_MONSTER_END="WAVE_MONSTER_END",e.WAVE_MONSTER_DROP_END="WAVE_MONSTER_DROP_END",e.MATERIAL_WAVE_END="MATERIAL_WAVE_END",e.EXIT_SCENE="EXIT_SCENE",e.SHOW_FR_SUCCESS="SHOW_FR_SUCCESS",e.CLOSE_FR_SUCCESS="CLOSE_FR_SUCCESS",e.SHOW_FR_FAIL="SHOW_FR_FAIL",e.WIN_CLOSE="WIN_CLOSE",e.AUTOBOSSCHANGE="AUTOBOSSCHANGE",e.MONSTERATTACK="MONSTERATTACK",e.MONSTERMOVEBACK="MONSTERMOVEBACK",e.GET_BOSS_MEET_INFO="GET_BOSS_MEET_INFO",e.ADD_BOSS_MEET="ADD_BOSS_MEET",e.MEET_BOSS_FINISH="MEET_BOSS_FINISH",e.CHANGE_GUILD_ID="CHANGE_GUILD_ID",e.CHANGE_GUILD_NAME="CHANGE_GUILD_NAME",e.CHANGE_GUILD_POSITION="CHANGE_GUILD_POSITION",e.CHANGE_ROLE_HP="CHANGE_ROLE_HP",e.CHANGE_ROLE_MP="CHANGE_ROLE_MP",e.CHANGE_TITLE="CHANGE_TITLE",e.ADD_VIRTUAL_PLAYER="ADD_VIRTUAL_PLAYER",e.ALL_PARTNER_DEAD="ALL_PARTNER_DEAD",e.ALL_PARTNER_HP0="ALL_PARTNER_HP0",e.SHOW_ALL_OBJ="SHOW_ALL_OBJ",e.SHOW_DEBUG_CONTENT="SHOW_DEBUG_CONTENT",e.GAME_STATE_CHANGE="GAME_STATE_CHANGE",e.RECONNECT="RECONNECT",e.SCENE_CHANGE="SCENE_CHANGE",e.RELIVE_IN_ROUNDBOSS="RELIVE_IN_ROUNDBOSS",e.ROLLPOINT_RESULT="ROLLPOINT_RESULT",e.ROLLPOINT_MAX="ROLLPOINT_MAX",e.SHOW_ROLLPOINT="SHOW_ROLLPOINT",e.CLOSE_RELIVE_VIEW="CLOSE_RELIVE_VIEW",e.ZSCZ_FINISH="ZSCZ_FINISH",e.ROLE_POS_CHANGE="ROLE_POS_CHANGE",e.SHOW_BOSSBLOOD_VIEW="SHOW_BOSSBLOOD_VIEW",e.SET_ROLES_FIGHT="SET_ROLES_FIGHT",e.GOT_TIME="GOT_TIME",e.RANDOM_RUN="RANDOM_RUN",e.CONTINUEFIGHT="CONTINUEFIGHT",e.CONTINUEFIGHT_REALPLAYER="CONTINUEFIGHT_REALPLAYER",e.WINDOW_DISPOSE="WINDOW_DISPOSE",e.GET_WAVE_REWARD="GET_WAVE_REWARD",e.CLIENT_RELIVE="CLIENT_RELIVE",e.SHOW_BOSS_COMING="SHOW_BOSS_COMING",e.AUTO_FLY_GOODS="AUTO_FLY_GOODS",e.SHOW_BUFF="SHOW_BUFF",e.REMOVE_BUFF="REMOVE_BUFF",e.CHANGE_RING="CHANGE_RING",e.CHANGE_PET_WEAPON="CHANGE_PET_WEAPON",e.LUNHUI_ONEKEY="LUNHUI_ONEKEY",e.SHOW_TIPS="SHOW_TIPS",e.CLOSE_TIPS_WINDOW="CLOSE_TIPS_WINDOW",e.CHECK_HUNZHAN_FIGHT="CHECK_HUNZHAN_FIGHT",e.REQUEST_10604="REQUEST_10604",e.JBYX_ATTENTION="JBYX_ATTENTION",e.MAINUI_OPEN="MAINUI_OPEN",e.MAINUI_CLICK_PACK="MAINUI_CLICK_PACK",e.MAINUI_CLICK_FIGURE="MIANUI_CLICK_FIGURE",e.MAINUI_CLICK_SKILL="MAINUI_CLICK_SKILL",e.MAINUI_CLICK_MALL="MAINUI_CLICK_MALL",e.MAINUI_CLICK_MAIL="MAINUI_CLICK_MAIL",e.MAINUI_CLICK_FRIEND="MAINUI_CLICK_FRIEND",e.MAINUI_CLICK_CHAT="MAINUI_CLICK_CHAT",e.MAINUI_CLICK_BUILD="MAINUI_CLICK_BUILD",e.MAINUI_CLICK_VIP="MAINUI_CLICK_VIP",e.MAINUI_CLICK_GUILD="MAINUI_CLICK_GUILD",e.MAINUI_SPEED_PK="MAINUI_SPEED_PK",e.MAINUI_SHOW_RIGHTTOP="MAINUI_SHOW_RIGHTTOP",e.MAINUI_CLICK_NAME="MAINUI_CLICK_NAME",e.MAINUI_CLICK_HEAD="MAINUI_CLICK_HEAD",e.WINDOW_CHANGE="WINDOW_CHANGE",e.SHOW_MAINUI_TOPBAR="SHOW_MAINUI_TOPBAR",e.CREATE_ROLE_ENTER="CREATE_ROLE_ENTER",e.REQUEST_CHECKNAME="REQUEST_CHECKNAME",e.REQUEST_GOODSINFO="REQUEST_GOODSINFO",e.REQUEST_USEITEM="REQUEST_USEITEM",e.REQUEST_CHANGEEQUIP="REQUEST_CHANGEEQUIP",e.REQUEST_ECONOMY="REQUEST_ECONOMY",e.REQUEST_BAGGRIDNUM="REQUEST_BAGGRIDNUM",e.REQUEST_BAG_STARTGRID="REQUEST_BAG_STARTGRID",e.UPDATE_GOODSITEM="UPDATE_GOODSITEM",e.SHOW_GET_GOODS="SHOW_GET_GOODS",e.GET_GOODS="GET_GOODS",e.EQUIP_LIST_CHANGE="EQUIP_LIST_CHANGE",e.PRO_LIST_CHANGE="PRO_LIST_CHANGE",e.SKILL_INFO_CHANGE="SKILL_INFO_CHANGE",e.OPEN_GETMATERIAL_WINDOW="OPEN_GETMATERIAL_WINDOW",e.OPEN_GETMATERIAL_BUY_WINDOW="OPEN_GETMATERIAL_BUY_WINDOW",e.OPEN_OPENGRID_VIEW="OPEN_OPENGRID_VIEW",e.REQUEST_LUNHUI="REQUEST_LUNHUI",e.REQUEST_SPEED_PK="REQUEST_SPEED_PK",e.GUILE_START="GUILE_START",e.GUILE_END="GUILE_END",e.GUILE_NEXT_FIGURE_EQUIP="GUILE_NEXT_FIGURE_EQUIP",e.GUILE_NEXT_BUILD_STRENGTHEN="GUILE_NEXT_BUILD_STRENGTHEN",e.OPEN_BUY_WINDOW="OPEN_BUY_WINDOW",e.RED_DOTS="RED_DOTS",e.SHOW_RELIVE_VIEW="SHOW_RELIVE_VIEW",e.PETFIGURE_CHANGE="PETFIGURE_CHANGE",e.REQUEST_22801="REQUEST_22801",e.SHOW_GAMESTART_VIEW="SHOW_GAMESTART_VIEW",e.SHOW_SERVER_LIST="SHOW_SERVER_LIST",e.SHOW_LOGIN_VIEW="SHOW_LOGIN_VIEW",e.UPDATE_SERVER_LIST="UPDATE_SERVER_LIST",e.LOGIN_RETURN="LOGIN_RETURN",e.START_LOADGAME_RESOURCE="START_LOADGAME_RESOURCE",e.REQUEST_CHARGET_DOUBLE="REQUEST_CHARGET_DOUBLE",e.UPDATE_CHARGET_DOUBLE_INFO="UPDATE_CHARGET_DOUBLE_INFO",e.CHARGE_OPEN="CHARGE_OPEN",e.MAINUI_INIT="MAINUI_INIT",e.MAINUI_CHANGEVISIBLE="MAINUI_CHANGEVISIBLE",e.SHOW_RECONNECTING="SHOW_RECONNECTING",e.REMOVE_RECONNECTING="REMOVE_RECONNECTING",e.CLOSE_WINDOW="CLOSE_WINDOW",e.OPEN_HELP_WINDOW="OPEN_HELP_WINDOW",e.SHOW_CREATEROLE="SHOW_CREATEROLE",e.GAMERESOURCE_LOADEND="GAMERESOURCE_LOADEND",e.SHOW_OFFLINEVIEW="SHOW_OFFLINEVIEW",e.TIPSWORD_UPDATE="TIPSWORD_UPDATE",e.CCMD_10202="CCMD_10202",e.CCMD_10210="CCMD_10210",e.ONLINE_REWARD_CLOSE_WINDOW="ONLINE_REWARD_CLOSE_WINDOW",e.ONLINE_REWARD_OPEN_HELP="ONLINE_REWARD_OPEN_HELP",e.ONLINE_REWARD_GET="ONLINE_REWARD_GET",e.PET_OPEN_WINDOW="PET_OPEN_WINDOW",e.PET_ACTIVE="PET_ACTIVE",e.PET_GRADE="PET_GRADE",e.PET_LEVEL="PET_LEVEL",e.PET_INTERACT="PET_INTERACT",e.PET_SHOW_OR_HIDE="PET_SHOW_OR_HIDE",e.PET_FRIENDS_SEND_CHANCE="PET_FRIENDS_SEND_CHANCE",e.PET_WEAPON_INFO="PET_WEAPON_INFO",e.PET_WEAPON_SET_TARGET="PET_WEAPON_SET_TARGET",e.PET_WEAPON_SHOW="PET_WEAPON_SHOW",e.PET_WEAPON_ACTIVE="PET_WEAPON_ACTIVE",e.PET_WEAPON_UP="PET_WEAPON_UP",e.PET_WEAPON_UP_AUTO="PET_WEAPON_UP_AUTO",e.PET_WEAPON_GRADE="PET_WEAPON_GRADE",e.QQFRIEND_WINDOW="QQFRIEND_WINDOW",e.QQWEEKGIFT_WINDOW="QQWEEKGIFT_WINDOW",e.SHOW_ITEM_TIPS="SHOW_ITEM_TIPS",e.OPEN_LUNHUI_WINDOW="OPEN_LUNHUI_WINDOW",e.OPEN_FIGHT_UP_WINDOW="OPEN_FIGHT_UP_WINDOW",e.CCMD_13010="CCMD_13010",e.CLOSE_CITY_VIEW="CLOSE_CITY_VIEW",e.OPEN_LEVEL_SELL_VIEW="OPEN_LEVEL_SELL_VIEW",e.OPEN_DOWN_LOAD_CLIENT_VIEW="OPEN_DOWN_LOAD_CLIENT_VIEW",e.ENTER_MAINCITY="ENTER_MAINCITY",e.EXIT_MAINCITY="EXIT_MAINCITY",e.PLAYER_MOVE="PLAYER_MOVE",e.TRIGGER_NPC="TRIGGER_NPC",e.ORDER_GIFT_BACK="ORDER_GIFT_BACK",e.CCMD13020="CCMD13020",e.SHOW_NPC_DIALOG="SHOW_NPC_DIALOG",e.NOVICE_TASK_FINISH="NOVICE_TASK_FINISH",e.WALK_TO_NPC="WALK_TO_NPC",e.GM_SHOW_MAINUI="GM_SHOW_MAINUI",e.OPEN_SIDEUI_FUN="OPEN_SIDEUI_FUN",e.CLOSE_SIDEUI_FUN="CLOSE_SIDEUI_FUN",e.SHOW_WELCOME2="SHOW_WELCOME2",e.RANDOM_NAME="RANDOM_NAME",e.OPEN_NOVICE_OTHER_VIEW="OPEN_NOVICE_OTHER_VIEW",e.CLOSE_NOVICE_OTHER_VIEW="CLOSE_NOVICE_OTHER_VIEW",e.GUILD_GUIDE_START="GUILD_GUIDE_START",e}();egret.registerClass(EventName,"EventName");var FanLiEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.OPEN_FANLI_WINDOW="OPEN_FANLI_WINDOW",e.CCMD17400="CCMD17400",e.CCMD17401="CCMD17401",e.CCMD17310="CCMD17310",e.CCMD17800="CCMD17800",e.CCMD17801="CCMD17801",e.CCMD17600="CCMD17600",e.CCMD17601="CCMD17601",e.SCMD17601="SCMD17601",e.CCMD21700="CCMD21700",e.CCMD21701="CCMD21701",e.CCMD21700_UPDATE="CCMD21700_UPDATE",e.CCMD17300="CCMD17300",e.CCMD17300_UPDATE="CCMD17300_UPDATE",e.CCMD17700="CCMD17700",e.CCMD17700_UPDATE="CCMD17700_UPDATE",e.CCMD17701="CCMD17701",e.CCMD17701_UPDATE="CCMD17701_UPDATE",e.UPDATE_LOGIN_INFO="UPDATE_LOGIN_INFO",e.UPDATE_XG_INFO="UPDATE_XG_INFO",e.UPDATE_LC_INFO="UPDATE_LC_INFO",e.CCMD17500="CCMD17500",e.CCMD17500_UPDATE="CCMD17500_UPDATE",e.CCMD17501="CCMD17501",e.CCMD17502="CCMD17502",e.CCMD17510="CCMD17510",e.CCMD17510_UPDATE="CCMD17510_UPDATE",e.CCMD19600="CCMD19600",e.CCMD19601="CCMD19601",e.CCMD19602="CCMD19602",e.UPDATE_LUCK_INFO="UPDATE_LUCK_INFO",e.CCMD19602_UPDATE="CCMD19602_UPDATE",e.PICK_MONEY_SUCCESS="PICK_MONEY_SUCCESS",e.CCMD19700="CCMD19700",e.CCMD19710="CCMD19710",e.CCMD19700_UPDATE="CCMD19700_UPDATE",e.CCMD19701_UPDATE="CCMD19701_UPDATE",e.CCMD19710_UPDATE="CCMD19710_UPDATE",e.CCMD19711_UPDATE="CCMD19711_UPDATE",e.BLESS_OPEN_WINDOW="BLESS_OPEN_WINDOW",e.BUFF_OPEN_VIEW="BUFF_OPEN_VIEW",e.CCMD19900="CCMD19900",e.CCMD19901="CCMD19901",e.CCMD19902="CCMD19902",e.CCMD19903="CCMD19903",e.CCMD19900_UPDATE="CCMD19900_UPDATE",e.CCMD19901_UPDATE="CCMD19901_UPDATE",e.CCMD19903_UPDATE="CCMD19903_UPDATE",e.EGG_NUM_CHANGE="EGG_NUM_CHANGE",e.EGG_TIMES_CHANGE="EGG_TIMES_CHANGE",e.CCMD21800="CCMD21800",e.CCMD22000="CCMD22000",e.CCMD22001_UPDATE="CCMD22001_UPDATE",e.CCMD23400="CCMD23400",e.CCMD23400_UPDATE="CCMD23400_UPDATE",e.CCMD23401="CCMD23401",e.CCMD23401_UPDATE="CCMD23401_UPDATE",e.CCMD23402="CCMD23402",e.CCMD23402_UPDATE="CCMD23402_UPDATE",e.CCMD23410="CCMD23410",e.CCMD23410_UPDATE="CCMD23410_UPDATE",e.CCMD23700="CCMD23700",e.CCMD23701="CCMD23701",e.CCMD23702="CCMD23702",e.CCMD23703="CCMD23703",e.CCMD23700_UPDATE="CCMD23700_UPDATE",e.CCMD23701_UPDATE="CCMD23701_UPDATE",e.CCMD23703_UPDATE="CCMD23703_UPDATE",e.FISH_NUM_CHANGE="FISH_NUM_CHANGE",e.FISH_TIMES_CHANGE="FISH_TIMES_CHANGE",e.CCMD23600="CCMD23600",e.CCMD24000="CCMD24000",e.CCMD24000_UPDATE="CCMD24000_UPDATE",e.CCMD24010="CCMD24010",e.CCMD24010_UPDATE="CCMD24010_UPDATE",e.CCMD24020="CCMD24020",e.CCMD24030="CCMD24030",e.CCMD24040="CCMD24040",e.CCMD24040_UPDATE="CCMD24040_UPDATE",e}();egret.registerClass(FanLiEvtName,"FanLiEvtName");var FashionEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CCMD13600="CCMD13600",e.CCMD13601="CCMD13601",e.CCMD13602="CCMD13602",e.CCMD13603="CCMD13603",e.OPEN_WINDOW="OPEN_WINDOW",e.FASHION_UPDATE_INFO="FASHION_UPDATE_INFO",e.FASHION_UPDATE_ONE_INFO="FASHION_UPDATE_ONE_INFO",e}();egret.registerClass(FashionEvtName,"FashionEvtName");var ParamEvent=function(e){function t(t,i){void 0===i&&(i=null),e.call(this,t),this.data=i}__extends(t,e);var i=(__define,t);i.prototype;return t}(egret.Event);egret.registerClass(ParamEvent,"ParamEvent");var FightEvent=function(e){function t(t,i){e.call(this,t,i)}__extends(t,e);var i=(__define,t);i.prototype;return t.ATTACKPLAYER="attack_player",t.ATTACKMONSTER="attackMoster",t.ATTACKRANGE="ATTACKRANGE",t}(ParamEvent);egret.registerClass(FightEvent,"FightEvent");var FigureEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CCMD10402="CCMD10402",e.CCMD11100="CCMD11100",e.CCMD11101="CCMD11101",e.CCMD10301="CCMD10301",e.CCMD17200="CCMD17200",e.CCMD17201="CCMD17201",e.CCMD23000="CCMD23000",e.CCMD23010="CCMD23010",e.CCMD23000_UPDATE="CCMD23000_UPDATE",e.CCMD23010_UPDATE="CCMD23010_UPDATE",e.FIGURE_SELECTED_PARTNER="FIGURE_SELECTED_PARTNER",e.FIGURE_OPEN_OPENPARTNERWINDOW="FIGURE_OPEN_OPENPARTNERWINDOW",e.FIGURE_OPEN_SPECIALEQUIPWINDOW="FIGURE_OPEN_SPECIALEQUIPWINDOW",e.FIGURE_OPEN_PARTNERPROPERTYVIEW="FIGURE_OPEN_PARTNERPROPERTYVIEW",e.FIGURE_UPDATE_ONE_SPECIALEQUIP="FIGURE_UPDATE_ONE_SPECIALEQUIP",e.FIGURE_UPDATE_SPECIALEQUIP="FIGURE_UPDATE_SPECIALEQUIP",e.FIGURE_REMOVE_PARTINER_ICON="FIGURE_REMOVE_PARTINER_ICON",e.FIGURE_SELECTED_PARTNER_IN_DOMINATE="FIGURE_SELECTED_PARTNER_IN_DOMINATE",e.FIGURE_SELECTED_PARTNER_IN_FASHION="FIGURE_SELECTED_PARTNER_IN_FASHION",e.TASTE_UPDATE_INFO="TASTE_UPDATE_INFO",e.ORANGE_OPEN="ORANGE_OPEN",e}();egret.registerClass(FigureEvtName,"FigureEvtName");var FirstChargeEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.FIRST_CHARGE_CCMD12800="FIRST_CHARGE_CCMD12800",e.FIRST_CHARGE_CCMD12800_UPDATE="FIRST_CHARGE_CCMD12800_UPDATE",e.FIRST_CHARGE_CCMD12801="FIRST_CHARGE_CCMD12801",e.FIRST_CHARGE_CCMD21300="FIRST_CHARGE_CCMD21300",e.OPEN_FIRST_CHARGE_WINDOW="OPEN_FIRST_CHARGE_WINDOW",e.OPEN_FIRST_CHARGE_FIVE_WINDOW="OPEN_FIRST_CHARGE_FIVE_WINDOW",e}();egret.registerClass(FirstChargeEvtName,"FirstChargeEvtName");var ForgemindEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.FORGEMIND_OPEN_WINDOW="FORGEMIND_OPEN_WINDOW",e.FORGEMIND_UPDATE_INFO="FORGEMIND_UPDATE_INFO",e.CCMD12200="CCMD12200",e.CCMD12201="CCMD12201",e.CCMD12202="CCMD12202",e}();egret.registerClass(ForgemindEvtName,"ForgemindEvtName");var FriendEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.FRIEND_CCMD11700="FRIEND_CCMD11700",e.FRIEND_CCMD11700_UPDATE="FRIEND_CCMD11700_UPDATE",e.FRIEND_CCMD11701="FRIEND_CCMD11701",e.FRIEND_CCMD11701_UPDATE="FRIEND_CCMD11701_UPDATE",e.FRIEND_CCMD11702="FRIEND_CCMD11702",e.FRIEND_CCMD11702_UPDATE="FRIEND_CCMD11702_UPDATE",e.FRIEND_CCMD11703="FRIEND_CCMD11703",e.FRIEND_CCMD11704="FRIEND_CCMD11704",e.FRIEND_CCMD11705="FRIEND_CCMD11705",e.FRIEND_CCMD11706="FRIEND_CCMD11706",e.FRIEND_CCMD11707="FRIEND_CCMD11707",e.FRIEND_CCMD11708="FRIEND_CCMD11708",e.FRIEND_OPEN_PRIVATE="FRIEND_OPEN_PRIVATE",e.FRIEND_MENU_CLOSE="FRIEND_MENU_CLOSE",e}();egret.registerClass(FriendEvtName,"FriendEvtName");var FuLiEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.FULI_OPEN="FULI_OPEN",e.CCMD15700="CCMD15700",e.CCMD15700_UPDATE="CCMD15700_UPDATE",e.CCMD15701="CCMD15701",e.CCMD16900="CCMD16900",e.CCMD16900_UPDATE="CCMD16900_UPDATE",e.CCMD16901="CCMD16901",e.CCMD17900="CCMD17900",e.CCMD_18400="CCMD_18400",e.UPDATE_ICON_REDDOT="UPDATE_ICON_REDDOT",e.SHOW_SHARENEW_VIEW="SHOW_SHARENEW_VIEW",e.CLOSE_SHAREVIEW="CLOSE_SHAREVIEW",e.CCMD_16910="CCMD_16910",e.CCMD22100="CCMD22100",e}();egret.registerClass(FuLiEvtName,"FuLiEvtName");var FubenEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.OPEN_FUBEN_VIEW="OPEN_FUBEN_VIEW",e.CLOSE_FUBEN_VIEW="CLOSE_FUBEN_VIEW",e.FUBEN_CCMD13200="FUBEN_CCMD13200",e.FUBEN_CCMD13200_UPDATE="FUBEN_CCMD13200_UPDATE",e.FUBEN_CCMD13201="FUBEN_CCMD13201",e.FUBEN_CCMD13201_UPDATE="FUBEN_CCMD13201_UPDATE",e.FUBEN_CCMD13202="FUBEN_CCMD13202",e.FUBEN_CCMD13203="FUBEN_CCMD13203",e.FUBEN_CCMD14500="FUBEN_CCMD14500",e.FUBEN_CCMD14500_UPDATE="FUBEN_CCMD14500_UPDATE",e.FUBEN_CCMD14501="FUBEN_CCMD14501",e.FUBEN_CCMD14502="FUBEN_CCMD14502",e.CMD21000="CMD21000",e.CMD21001="CMD21001",e.CMD21010="CMD21010",e}();egret.registerClass(FubenEvtName,"FubenEvtName");var GuildEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.GUILD_CCMD12500="GUILD_CCMD12500",e.GUILD_CCMD12500_UPDATE="GUILD_CCMD12500_UPDATE",e.GUILD_CCMD12501="GUILD_CCMD12501",e.GUILD_CCMD12502="GUILD_CCMD12502",e.GUILD_CCMD12502_UPDATE="GUILD_CCMD12502_UPDATE",e.GUILD_CCMD12503="GUILD_CCMD12503",e.GUILD_CCMD12504="GUILD_CCMD12504",e.GUILD_CCMD12504_UPDATE="GUILD_CCMD12504_UPDATE",e.GUILD_CCMD12505="GUILD_CCMD12505",e.GUILD_CCMD12506="GUILD_CCMD12506",e.GUILD_CCMD12507="GUILD_CCMD12507",e.GUILD_CCMD12507_UPDATE="GUILD_CCMD12507_UPDATE",e.GUILD_CCMD12508="GUILD_CCMD12508",e.GUILD_CCMD12509="GUILD_CCMD12509",e.GUILD_CCMD12509_UPDATE="GUILD_CCMD12509_UPDATE",e.GUILD_CCMD12510="GUILD_CCMD12510",e.GUILD_CCMD12511="GUILD_CCMD12511",e.GUILD_CCMD12512="GUILD_CCMD12512",e.GUILD_CCMD12513="GUILD_CCMD12513",e.GUILD_CCMD12513_UPDATE="GUILD_CCMD12513_UPDATE",e.GUILD_CCMD12514="GUILD_CCMD12514",e.GUILD_CCMD12515="GUILD_CCMD12515",e.GUILD_CCMD12515_UPDATE="GUILD_CCMD12515_UPDATE",e.GUILD_CCMD12516="GUILD_CCMD12516",e.GUILD_CCMD12516_UPDATE="GUILD_CCMD12516_UPDATE",e.GUILD_CCMD12517="GUILD_CCMD12517",e.GUILD_CCMD12519_UPDATE="GUILD_CCMD12519_UPDATE",e.GUILD_CCMD12520="GUILD_CCMD12520",e.GUILD_CCMD12521="GUILD_CCMD12521",e.GUILD_CCMD12600="GUILD_CCMD12600",e.GUILD_CCMD12600_UPDATE="GUILD_CCMD12600_UPDATE",e.GUILD_CCMD12601="GUILD_CCMD12601",e.GUILD_CCMD13400="GUILD_CCMD13400",e.GUILD_CCMD13400_UPDATE="GUILD_CCMD13400_UPDATE",e.GUILD_CCMD13401="GUILD_CCMD13401",e.GUILD_CCMD13410="GUILD_CCMD13410",e.GUILD_CCMD13410_UPDATE="GUILD_CCMD13410_UPDATE",e.GUILD_CCMD13411="GUILD_CCMD13411",e.GUILD_CCMD13411_UPDATE="GUILD_CCMD13411_UPDATE",e.GUILD_CCMD13420="GUILD_CCMD13420",e.GUILD_CCMD13420_UPDATE="GUILD_CCMD13420_UPDATE",e.GUILD_CCMD13421="GUILD_CCMD13421",e.GUILD_CCMD13421_UPDATE="GUILD_CCMD13421_UPDATE",e.GUILD_CCMD13422="GUILD_CCMD13422",e.GUILD_CCMD13422_UPDATE="GUILD_CCMD13422_UPDATE",e.GUILD_OPEN_VIEW="GUILD_OPEN_VIEW",e.GUILD_OPEN_DONATE="GUILD_OPEN_DONATE",e.GUILD_OPEN_RED="GUILD_OPEN_RED",e.GUILD_SHOW_RED_ICON="GUILD_SHOW_RED_ICON",e.GUILD_CLOSE_VIEW="GUILD_CLOSE_VIEW",e.GUILD_OPEN_FARM="GUILD_OPEN_FARM",e.CCMD14900="CCMD14900",e.CCMD14900_UPDATE="CCMD14900_UPDATE",e.CCMD14901="CCMD14901",e.CCMD14902="CCMD14902",e.CCMD14903="CCMD14903",e.CCMD14904="CCMD14904",e.CCMD14905="CCMD14905",e.CCMD14910="CCMD14910",e.CCMD14910_UPDATE="CCMD14910_UPDATE",e.CCMD13700="CCMD13700",e.CCMD13700_UPDATE="CCMD13700_UPDATE",e.CCMD13701="CCMD13701",e.CCMD13701_UPDATE="CCMD13701_UPDATE",e.CCMD13702="CCMD13702",e.CCMD13710="CCMD13710",e.CCMD13710_UPDATE="CCMD13710_UPDATE",e.GUILD_OPEN_FUBEN="GUILD_OPEN_FUBEN",e.GUILD_CLOSE_FUBEN="GUILD_CLOSE_FUBEN",e.GUILD_OPEN_FUBEN_SAO="GUILD_OPEN_FUBEN_SAO",e.CCMD16300="CCMD16300",e.CCMD16300_UPDATE="CCMD16300_UPDATE",e.CCMD16301="CCMD16301",e.CCMD16301_UPDATE="CCMD16301_UPDATE",e.CCMD16302="CCMD16302",e.CCMD16302_UPDATE="CCMD16302_UPDATE",e.CCMD16303="CCMD16303",e.CCMD16304="CCMD16304",e.CCMD16304_UPDATE="CCMD16304_UPDATE",e.CCMD16310="CCMD16310",e.CCMD16310_UPDATE="CCMD16310_UPDATE",e.CCMD16311="CCMD16311",e.CCMD16311_UPDATE="CCMD16311_UPDATE",e}();egret.registerClass(GuildEvtName,"GuildEvtName");var HeFuEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CCMD18500="CCMD18500",e.CCMD18501="CCMD18501",e.CCMD18600="CCMD18600",e.CCMD18601="CCMD18601",e.CCMD18800="CCMD18800",e.CCMD18801="CCMD18801",e.CCMD18700="CCMD18700",e.CCMD18701="CCMD18701",e.CCMD18702="CCMD18702",e.CCMD18900="CCMD18900",e.CCMD19000="CCMD19000",e.CCMD19001="CCMD19001",e.CCMD19100="CCMD19100",e.CCMD19101="CCMD19101",e.UPDATE_HF_LOGIN_INFO="UPDATE_HF_LOGIN_INFO",e.UPDATE_BOSSPOINT_INFO="UPDATE_BOSSPOINT_INFO",e.UPDATE_HF_LC_INFO="UPDATE_HF_LC_INFO",e.UPDATE_HF_XG_INFO="UPDATE_HF_XG_INFO",e.UPDATE_HF_EXCHANGE_INFO="UPDATE_HF_EXCHANGE_INFO",e.UPDATE_HF_TREASURE_INFO="UPDATE_HF_TREASURE_INFO",e.UPDATE_HF_CHARGE_INFO="UPDATE_HF_CHARGE_INFO",e.INIT_MERGE_TIME="INIT_MERGE_TIME",e.SHOW_HF_RANKVIEW="SHOW_HF_RANKVIEW",e}();egret.registerClass(HeFuEvtName,"HeFuEvtName");var HuoDongDailyEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.SHOW_HDDAILY_VIEW="SHOW_HDDAILY_VIEW",e.SHOW_KFHD_VIEW="SHOW_KFHD_VIEW",e.SHOW_ONE_RMB_VIEW="SHOW_ONE_RMB_VIEW",e.SHOW_KFHD_TREASURE_AWARD_VIEW="SHOW_KFHD_TREASURE_AWARD_VIEW",e.SHOW_DAILY_CHARGE_VIEW="SHOW_DAILY_CHARGE_VIEW",e.REQUEST_14100="REQUEST_14100",e.REQUEST_14101="REQUEST_14101",e.REQUEST_14200="REQUEST_14200",e.REQUEST_14201="REQUEST_14201",e.REQEUST_14310="REQEUST_14310",e.REQEUST_14311="REQEUST_14311",e.REQEUST_14320="REQEUST_14320",e.REQEUST_16600="REQEUST_16600",e.REQEUST_16601="REQEUST_16601",e.REQEUST_16100="REQEUST_16100",e.REQEUST_16800="REQEUST_16800",e.REQEUST_16801="REQEUST_16801",e.REQEUST_17000="REQEUST_17000",e.UPDATE_16600="UPDATE_16600",e.UPDATE_16800="UPDATE_16800",e.UPDATE_MY_STANDARD="UPDATE_14311",e.SHOW_KFHD_RANKVIEW="SHOW_KFHD_RANKVIEW",e.REMOVE_KFHD_RANKVIEW="REMOVE_KFHD_RANKVIEW",e.SHOW_KFHD_MRT_RANKVIEW="SHOW_KFHD_MRT_RANKVIEW",e.REMOVE_KFHD_MRT_RANKVIEW="REMOVE_KFHD_MRT_RANKVIEW",e.REQEUST_16400="REQEUST_16400",e.UPDATE_16400="UPDATE_16400",e.REQEUST_18100="REQEUST_18100",e.REQEUST_18101="REQEUST_18101",e.REQEUST_18110="REQEUST_18110",e.UPDATE_18100="UPDATE_18100",e.UPDATE_18110="UPDATE_18110",e.REQEUST_18200="REQEUST_18200",e.REQEUST_18201="REQEUST_18201",e.UPDATE_18200="UPDATE_18100",e.OPEN_HUODONG_VIEW="OPEN_HUODONG_VIEW",e.REQEUST_21500="REQEUST_21500",e}();egret.registerClass(HuoDongDailyEvtName,"HuoDongDailyEvtName");var KfKillerEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.OPEN_KFKILLER_WINDOW="OPEN_KFKILLER_WINDOW",e.SHOW_KFKILLER_SCENE_UI="SHOW_KFKILLER_SCENE_UI",e}();egret.registerClass(KfKillerEvtName,"KfKillerEvtName");var KingEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.OPEN_VIEW_SELECT="OPEN_VIEW_SELECT",e.CCMD18300="CCMD18300",e.CCMD18300_UPDATE="CCMD18300_UPDATE",e.CCMD18301="CCMD18301",e.CCMD18310="CCMD18310",e.CCMD18310_UPDATE="CCMD18310_UPDATE",e.CCMD18311="CCMD18311",e.CCMD18311_UPDATE="CCMD18311_UPDATE",e.CCMD18320="CCMD18320",e.CCMD18320_UPDATE="CCMD18320_UPDATE",e.CCMD18330="CCMD18330",e.CCMD18330_UPDATE="CCMD18330_UPDATE",e.CCMD18331="CCMD18331",e.CCMD18332="CCMD18332",e}();egret.registerClass(KingEvtName,"KingEvtName");var KuaFuEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.KUAFU_OPEN_VIEW="KUAFU_OPEN_VIEW",e.KUAFU_OPEN_MAP="KUAFU_OPEN_MAP",e.KUAFU_CLOSE_MAP="KUAFU_CLOSE_MAP",e}();egret.registerClass(KuaFuEvtName,"KuaFuEvtName");var LegendSuitEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CCMD14000="CCMD14000",e.CCMD14001="CCMD14001",e}();egret.registerClass(LegendSuitEvtName,"LegendSuitEvtName");var LoginRewardEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.LOGIN_REWARD_CCMD12700="LOGIN_REWARD_CCMD12700",e.LOGIN_REWARD_CCMD12700_UPDATE="LOGIN_REWARD_CCMD12700_UPDATE",e.LOGIN_REWARD_CCMD12701="LOGIN_REWARD_CCMD12701",e}();egret.registerClass(LoginRewardEvtName,"LoginRewardEvtName");var MAILEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.MAIL_CCMD11500="MAIL_CCMD11500",e.MAIL_CCMD11500_UPDATE="MAIL_CCMD11500_UPDATE",e.MAIL_CCMD11501="MAIL_CCMD11501",e.MAIL_CCMD11502="MAIL_CCMD11502",e.MAIL_CCMD11503="MAIL_CCMD11503",e.MAIL_OPEN_CONTENT="MAIL_OPEN_CONTENT",e}();egret.registerClass(MAILEvtName,"MAILEvtName");var MallEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.MALL_REQUEST="MALL_REQUEST",e.MALL_CCMD11000_UPDATE="MALL_CCMD11000_UPDATE",e.MALL_CCMD11001="MALL_CCMD11001",e.MALL_CCMD11004="MALL_CCMD11004",e.CCMD19500="CCMD19500",e.OPEN_SHOPCHEAP="OPEN_SHOPCHEAP",e.CCMD21200="CCMD21200",e.CCMD22700="CCMD22700",e.CCMD22710="CCMD22710",e.CCMD22700_UPDATE="CCMD22700_UPDATE",e.CCMD22710_UPDATE="CCMD22710_UPDATE",e}();egret.registerClass(MallEvtName,"MallEvtName");var MeetPlayerEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.SHOW_MEETPLAYER_VIEW="SHOW_MEETPLAYER_VIEW",e.SHOW_MEETPLAYER_RECORDVIEW="SHOW_MEETPLAYER_RECORDVIEW",e.REQUEST_13300="REQUEST_13300",e.REQUEST_13301="REQUEST_13301",e.REQUEST_13302="REQUEST_13302",e.REQUEST_13303="REQUEST_13303",e.REQUEST_13304="REQUEST_13304",e.UPDATE_MP_RECORD="UPDATE_MP_RECORD",e.FIGHT_MEET_PLAYER="FIGHT_MEET_PLAYER",e.MP_FIGHT_FINISH="MP_FIGHT_FINISH",e.CLOSE_MEETPLAYER_RECORDVIEW="CLOSE_MEETPLAYER_RECORDVIEW",e}();egret.registerClass(MeetPlayerEvtName,"MeetPlayerEvtName");var MeridianEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CCMD12000="CCMD12000",e.CCMD12001="CCMD12001",e.CCMD12002="CCMD12002",e.MERIDIAN_UPDATE_INFO="MERIDIAN_UPDATE_INFO",e.MERIDIAN_SELECTED_PARTNER="MERIDIAN_SELECTED_PARTNER",e.MERIDIAN_SUCCESS="MERIDIAN_SUCCESS",e}();egret.registerClass(MeridianEvtName,"MeridianEvtName");var MinesEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.OPEN_MINE_VIEW="OPEN_MINE_VIEW",e.OPEN_MINE_LOG_VIEW="OPEN_MINE_LOG_VIEW",e.OPEN_MINE_FUCHOU_VIEW="OPEN_MINE_FUCHOU_VIEW",e.OPEN_MINE_REWARD_VIEW="OPEN_MINE_REWARD_VIEW",e.CCMD16200="CCMD16200",e.CCMD16200_UPDATE="CCMD16200_UPDATE",e.CCMD16201="CCMD16201",e.CCMD16201_UPDATE="CCMD16201_UPDATE",e.CCMD16202="CCMD16202",e.CCMD16202_UPDATE="CCMD16202_UPDATE",e.CCMD16203="CCMD16203",e.CCMD16204="CCMD16204",e.CCMD16205="CCMD16205",e.CCMD16206="CCMD16206",e.CCMD16210="CCMD16210",e.CCMD16210_UPDATE="CCMD16210_UPDATE",e.CCMD16211="CCMD16211",e.CCMD16220="CCMD16220",e.CCMD16220_UPDATE="CCMD16220_UPDATE",e.CCMD16221="CCMD16221",e}();egret.registerClass(MinesEvtName,"MinesEvtName");var OrangeSuitEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CCMD13900="CCMD13900",e.CCMD13901="CCMD13901",e.ORANGESUIT_UPDATE_INFO="ORANGESUIT_UPDATE_INFO",e.ORANGESUIT_OPEN_DECOMPOSITION_VIEW="ORANGESUIT_OPEN_DECOMPOSITION_VIEW",e}();egret.registerClass(OrangeSuitEvtName,"OrangeSuitEvtName");var PKSkillEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CCMD23800="CCMD23800",e.CCMD23910="CCMD23910",e.CCMD23800_UPDATE="CCMD23800_UPDATE",e.CCMD23801="CCMD23801",e.CCMD23801_UPDATE="CCMD23801_UPDATE",e.CLOSE_PKSKILL_VIEW="CLOSE_PKSKILL_VIEW",e}();egret.registerClass(PKSkillEvtName,"PKSkillEvtName");var QQEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.QQFRIEND_RANK_SHOW="QQFRIEND_RANK_SHOW",e.QQFRIEND_RANK_LIST="QQFRIEND_RANK_LIST",e.QQFRIEND_RANK_ITEM_TAP="QQFRIEND_RANK_ITEM_TAP",e.REQEUST_20000="REQEUST_20000",e.REQEUST_20800="REQEUST_20800",e.REQEUST_20900="REQEUST_20900",e.REQEUST_20901="REQEUST_20901",e.UPDATE_SENDGOLD_CD="UPDATE_SENDGOLD_CD",e.QQFRIEND_INVITELIST_UPDATE="QQFRIEND_INVITELIST_UPDATE",e.QQFRIEND_INVITE_GETAWARD_SUCCESS="QQFRIEND_INVITE_GETAWARD_SUCCESS",e.UPDATE_GOODFRIEND_LIST="UPDATE_GOODFRIEND_LIST",e.UPDATE_SMS_CODE="UPDATE_SMS_CODE",e.UPDATE_VERIFY_STATU="UPDATE_VERIFY_STATU",e.WANBA_GIFT_EXCHANGE="WANBA_GIFT_EXCHANGE",e.SHOW_QQ_HAOLI="SHOW_QQ_HAOLI",e.SHOW_QQ_COVER="SHOW_QQ_COVER",e.ADD_COVER_ICON="ADD_COVER_ICON",e.UPDATE_COVER_STATU="UPDATE_COVER_STATU",e}();egret.registerClass(QQEvtName,"QQEvtName");var RankEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.RANK_OPEN_VIEW="RANK_OPEN_VIEW",e.RANK_OPEN_COMMON="RANK_OPEN_COMMON",e.RANK_CCMD13500="RANK_CCMD13500",e.RANK_CCMD13500_UPDATE="RANK_CCMD13500_UPDATE",e.RANK_CCMD13501="RANK_CCMD13501",e.RANK_CCMD13501_UPDATE="RANK_CCMD13501_UPDATE",e.RANK_CCMD13502="RANK_CCMD13502",e}();egret.registerClass(RankEvtName,"RankEvtName");var RongLianEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.RONGLIAN_OPEN_VIEW="RONGLIAN_OPEN_VIEW",e.RONGLIAN_OPEN_SELECT_VIEW="RONGLIAN_OPEN_SELECT_VIEW",e.RONGLIAN_HUISHOU_SUCESS="RONGLIAN_HUISHOU_SUCESS",e.RONGLU_HUISHOU_SUCESS="RONGLU_HUISHOU_SUCESS",e.RONGLIAN_SELECTED="RONGLIAN_SELECTED",e.RONGLIAN_UPDATE_INFO="RONGLIAN_UPDATE_INFO",e.RONGLIAN_SELECTED_CHECKBOX="RONGLIAN_SELECTED_CHECKBOX",e.CCMD10900="CCMD10900",e.CCMD10901="CCMD10901",e.CCMD10902="CCMD10902",e}();egret.registerClass(RongLianEvtName,"RongLianEvtName");var SceneEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.WALK_COMPLETE="walkComplete",e.WALK_COMPLETE_NODE="walkCompleteNode",e.WALK_START_NODE="walkStartNode",e.WALK_START="walkStart",e.DEAD="dead",e.RELIVE="relive",e.REMOVEDEADBODY="removeDeadBody",e.PLAYER_DEAD="PLAYER_DEAD",e.ROLE_ENTER="SCENE_ROLE_ENTER",e.ROLE_EXIT="SCENE_ROLE_EXIT",e.SERVER_REMOVE_MON="SERVER_REMOVE_MON",e.MAIN_CITY_CHANGE="MAIN_CITY_CHANGE",e.SCREEN_ROTATE="SCREEN_ROTATE",e}();egret.registerClass(SceneEvtName,"SceneEvtName");var ShadowEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.OPEN_SHADOW="OPEN_SHADOW",e.OPEN_SHADOW_EQUIP_VIEW="OPEN_SHADOW_EQUIP_VIEW",e.OPEN_SHADOW_TIPS="OPEN_SHADOW_TIPS",e.CCMD18000="CCMD18000",e.CCMD18000_UPDATE="CCMD18000_UPDATE",e.CCMD18001="CCMD18001",e.CCMD18001_UPDATE="CCMD18001_UPDATE",e.CCMD18010="CCMD18010",e.CCMD18010_UPDATE="CCMD18010_UPDATE",e.CCMD18011="CCMD18011",e.CCMD18012="CCMD18012",e.CCMD18013="CCMD18013",e.CCMD18013_UPDATE="CCMD18013_UPDATE",e.CCMD18020="CCMD18020",e.CCMD18020_UPDATE="CCMD18020_UPDATE",e.CCMD18030="CCMD18030",e.CCMD18030_UPDATE="CCMD18030_UPDATE",e.CCMD18031="CCMD18031",e}();egret.registerClass(ShadowEvtName,"ShadowEvtName");var ShareEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CCMD15100="CCMD15100",e.CCMD15101="CCMD15101",e.CCMD15102="CCMD15102",e.SHARE_UPDATEINFO="SHARE_UPDATEINFO",e.SHARE_REDDOT="SHARE_REDDOT",e.SHARE_WINDOW_OPEN="SHARE_WINDOW_OPEN",e
}();egret.registerClass(ShareEvtName,"ShareEvtName");var ShopEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.OPEN_SHOP_VIEW="OPEN_SHOP_VIEW",e.OPEN_SHOP_SELL_VIEW="OPEN_SHOP_SELL_VIEW",e.SHOP_SELL_ITEM_CLICK="SHOP_SELL_ITEM_CLICK",e.CCMD22500="CCMD22500",e.CCMD22500_UPDATE="CCMD22500_UPDATE",e.CCMD22501="CCMD22501",e.CCMD22501_UPDATE="CCMD22501_UPDATE",e.CCMD22510="CCMD22510",e.CCMD22511="CCMD22511",e.CCMD22520="CCMD22520",e.CCMD22520_UPDATE="CCMD22520_UPDATE",e}();egret.registerClass(ShopEvtName,"ShopEvtName");var SkillEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.SKILL_CCMD10500="SKILL_CCMD10500",e.SKILL_CCMD10500_UPDATE="SKILL_CCMD10500_UPDATE",e.SKILL_CCMD10501="SKILL_CCMD10501",e.CCMD14700="CCMD14700",e.CCMD14700_UPDATE="CCMD14700_UPDATE",e.CCMD14701="CCMD14701",e.CCMD14702="CCMD14702",e.CCMD14702_UPDATE="CCMD14702_UPDATE",e.CCMD14703="CCMD14703",e.OPEN_SKILL_FEAT_PACK="OPEN_SKILL_FEAT_PACK",e.OPEN_SKILL_FEAT_BOOK="OPEN_SKILL_FEAT_BOOK",e}();egret.registerClass(SkillEvtName,"SkillEvtName");var TaskEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.TASK_CCMD11401="TASK_CCMD11401",e.TASK_CCMD11400_UPDATE="TASK_CCMD11400_UPDATE",e.TASK_COMPLETE="TASK_COMPLETE",e.NOVICE_TASK_KILLNUM_UPDATE="NOVICE_TASK_KILLNUM_UPDATE",e}();egret.registerClass(TaskEvtName,"TaskEvtName");var TreasureEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.TREASURE_OPEN_WINDOW="TREASURE_OPEN_WINDOW",e.TREASURE__CCMD13800="TREASURE__CCMD13800",e.TREASURE__CCMD13800_UPDATE="TREASURE__CCMD13800_UPDATE",e.TREASURE__CCMD13801="TREASURE__CCMD13801",e.TREASURE__CCMD13801_UPDATE="TREASURE__CCMD13801_UPDATE",e.TREASURE__CCMD13810="TREASURE__CCMD13810",e.TREASURE__CCMD13810_UPDATE="TREASURE__CCMD13810_UPDATE",e.TREASURE__CCMD13811="TREASURE__CCMD13811",e.TREASURE__CCMD13811_UPDATE="TREASURE__CCMD13811_UPDATE",e.TREASURE__CCMD13812="TREASURE__CCMD13812",e.TREASURE__CCMD13820="TREASURE__CCMD13820",e.TREASURE__CCMD13820_UPDATE="TREASURE__CCMD13820_UPDATE",e.TREASURE__CCMD13821="TREASURE__CCMD13821",e.TREASURE__CCMD16500="TREASURE__CCMD16500",e.TREASURE__CCMD16500_UPDATE="TREASURE__CCMD16500_UPDATE",e.TREASURE__CCMD24500="TREASURE__CCMD24501",e.TREASURE__CCMD24500_UPDATE="TREASURE__CCMD24501_UPDATE",e}();egret.registerClass(TreasureEvtName,"TreasureEvtName");var VipEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.OPEN_VIP_MONTH="OPEN_VIP_MONTH",e.VIP_CCMD11900="VIP_CCMD11900",e.VIP_CCMD11901="VIP_CCMD11901",e.VIP_UPDATE="VIP_UPDATE",e.VIP_CCMD11910="VIP_CCMD11910",e.VIP_CCMD11910_UPDATE="VIP_CCMD11910_UPDATE",e.VIP_LEVEL_CHANGE="VIP_LEVEL_CHANGE",e.CCMD16700="CCMD16700",e.CCMD16700_UPDATE="CCMD16700_UPDATE",e.CCMD16701="CCMD16701",e}();egret.registerClass(VipEvtName,"VipEvtName");var WingEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CCMD12100="CCMD12100",e.CCMD12101="CCMD12101",e.CCMD12102="CCMD12102",e.CCMD12103="CCMD12103",e.CCMD12104="CCMD12104",e.CCMD12105="CCMD12105",e.CCMD12106="CCMD12106",e.WING_UPDATE_INFO="WING_UPDATE_INFO",e.WING_LEVELUP="WING_LEVELUP",e.WING_OPEN_WEARWINDOW="WING_OPEN_WEARWINDOW",e.SHOW_WING_LEVEL_EFFECT="SHOW_WING_LEVEL_EFFECT",e}();egret.registerClass(WingEvtName,"WingEvtName");var ZhuanShengEvtName=function(){function e(){}var t=(__define,e);t.prototype;return e.CCMD_11200="CCMD_11200",e.CCMD_11201="CCMD_11201",e.CCMD_11202="CCMD_11202",e.ZHUANSHENG_OPEN_BUY="ZHUANSHENG_OPEN_BUY",e.ZHUANSHENG_CLOSE_BUY="ZHUANSHENG_CLOSE_BUY",e}();egret.registerClass(ZhuanShengEvtName,"ZhuanShengEvtName");var GModuleResGroupName=function(){function e(){}var t=(__define,e);t.prototype;return e.BAG="bag",e.MAINUI="mainUI",e.FIGURE="figure",e.SKILL="skill",e.MAIL="mail",e.FRIEND="friend",e.CHAT="chat",e.RONGLIAN="ronglian",e.FIGHTRESULT="fightResult",e.BUILD="build",e.VIP="vip",e.MERIDIANS="meridians",e.WING="wing",e.SPECIAL="special",e.FORGEMIND="forgemind",e.GUILD="guild",e.GUILD_DONATE="guild_donate",e.GUILD_FARM="guild_farm",e.GUILD_SKILL="guild_skill",e.OPEN_PARTNER="openpartner",e.GET_MATERIAL="getmaterial",e.CHENGHAO="chenghao",e.BOSS="boss",e.MEETPLAYER="meetPlayer",e.FULI="fuli",e.LOGIN_REWARD="loginReward",e.FIRST_CHARGE="firstCharge",e.ARTIFACT="artifact",e.FUBEN="fuben",e.LUNHUI="lunhui",e.CHECKPOINTBOSS="checkpointboss",e.RANK="rank",e.PARTNERPROPERTY="partnerProperty",e.HUODONGDAILY="huodongDaily",e.KAIFUHUODONG="kaiFuHuoDong",e.TREASURE="treasure",e.DOMINATE="dominate",e.CITYWAR="cityWar",e.CREATE_ROLE="createRole",e}();egret.registerClass(GModuleResGroupName,"GModuleResGroupName");var GameContent=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(GameContent,"GameContent");var GameLayers=function(){function e(e){this.sceneRootLayer=new CommonSprite,e.addChild(this.sceneRootLayer),this.sceneRootLayer.touchEnabled=!1,this.sceneLayer=new CommonSprite,e.addChild(this.sceneLayer),this.sceneLayer.touchEnabled=!1,this.winMapLayer=new CommonSprite,e.addChild(this.winMapLayer),this.mainUILayer=new CommonSprite,e.addChild(this.mainUILayer),this.iconLayer=new CommonSprite,e.addChild(this.iconLayer),this.windowLayer=new CommonSprite,e.addChild(this.windowLayer),this.noticeLayer=new CommonSprite,e.addChild(this.noticeLayer),this.topLayer=new CommonSprite,e.addChild(this.topLayer),this.tipsLayer=new CommonSprite,e.addChild(this.tipsLayer),this.guideLayer=new CommonSprite,e.addChild(this.guideLayer)}var t=(__define,e),i=t.prototype;return i.getSceneRootLayerNum=function(){var e=0;this.sceneRootLayer.numChildren;return e},i.getContainerChildNum=function(e){for(var t,i=0,n=e.numChildren,s=0;n>s;s++)t=e.getChildAt(s),i+=is(t,"egret.DisplayObjectContainer")?this.getContainerChildNum(t):1;return i},e}();egret.registerClass(GameLayers,"GameLayers");var AllParamObj={},isFilterTxt=!1,debugCmd=!0,isTestSkill=!1,browserVsn,vsnFileCode,bigResCode,isDebug,QQApiID=1101255595,QQManager=function(e){function t(){e.call(this),this._buyGoodsUrl="/Order/tencent",this._showOffUrl="/Client/send_gamebar_msg",this._getInfoUrl="/Client/get_info",this._getFriendsUrl="/Client/get_gamebar_ranklist",this._smsUrl="/Client/sms",this._superVipUrl="/Client/super_vip_commit",this._isVerifyVipUrl="/Client/super_vip_verify",this._wanbaVipLvUrl="/Client/get_vip_level",this._wanbaVipExchange="/Client/gift_exchange",this._coverUrl="/Client/judge_cover_type",this._weiduanDownloadTimes="/Client/click_download",this.sendGoldCD=0,this.myQQInfo=null,this.verifyVipStatu=0,this.isSetCover=!1,this.coverRewardID=11005,this.weiduanRewardID=11006,this._hasClickDownload=!1,this._wanBaJiFenGiftList=[1601,1602],this._buyID=0,this._shopID=0}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},s.initQQInterface=function(){null==this._openkey&&(this._openkey=Tools.getPageParams("open_key")),null==this._apiUrl&&(this._apiUrl=AllParamObj.center_url),null==this._channel&&(this._channel=Tools.getPageParams("cur_channel"))},i(s,"pf",function(){return window.OPEN_DATA?window.OPEN_DATA.pf:""}),s.isWeiXin=function(){return"weixin"==this.pf},s.QQBuyGoods=function(e,t){if(void 0===t&&(t=0),ConfigManager.isTencent()){this.initQQInterface(),this._buyID=e,this._shopID=t;var i=this.getQQGoodsVo(e);(10822==e||10878==e)&&(i.type=6,i.rmb=1);var n=new Array,s=PhpHttpStatisticsManager.createDataObj("server_id",ConfigManager.server_id);n.push(s),s=PhpHttpStatisticsManager.createDataObj("player_id",RoleModel.getInstance().getRoleCommon().role_id),n.push(s),s=PhpHttpStatisticsManager.createDataObj("username",ConfigManager.plat_id),n.push(s),s=PhpHttpStatisticsManager.createDataObj("money_type",1),n.push(s),s=PhpHttpStatisticsManager.createDataObj("money_num",i.rmb),n.push(s),s=PhpHttpStatisticsManager.createDataObj("product_name",i.template_id),n.push(s),s=PhpHttpStatisticsManager.createDataObj("product_num",1),n.push(s),s=PhpHttpStatisticsManager.createDataObj("product_type",i.type),n.push(s),s=PhpHttpStatisticsManager.createDataObj("open_key",this._openkey),n.push(s),s=PhpHttpStatisticsManager.createDataObj("channel",this._channel),n.push(s),s=PhpHttpStatisticsManager.createDataObj("pf",this.pf),n.push(s),s=PhpHttpStatisticsManager.createDataObj("via",ConfigManager.getVia()),n.push(s),t>0&&(s=PhpHttpStatisticsManager.createDataObj("shop_id",t),n.push(s));var a=this._apiUrl+this._buyGoodsUrl,o=new egret.URLRequest(a),r=new egret.URLLoader;r.addEventListener(egret.Event.COMPLETE,this.QQChargeComplete,this);var h=PhpHttpStatisticsManager.getPraseVariable(n,!0);o.data=h,o.method=egret.URLRequestMethod.POST,r.dataFormat=egret.URLLoaderDataFormat.BINARY,r.load(o)}},s.QQChargeComplete=function(e){var t=e.target;t.removeEventListener(egret.Event.COMPLETE,this.QQChargeComplete,this);var i=PhpHttpStatisticsManager.parsePhpBack(t.data),n=parseInt(i.code);if(1e3==n)Message.show("购买成功"),this.reset();else if(1002==n){Message.show("星币不足，调起充值界面");var s=parseInt(i.data);this.showQQCharge(s)}else Message.show("购买失败 error = "+n)},s.showQQCharge=function(e){void 0===e&&(e=80),ConfigManager.isTencent()&&window.QQCharge(e)},s.QQRegister=function(){ConfigManager.isTencent()&&window.reportRegisterQQ()},s.QQLogin=function(){ConfigManager.isTencent()&&window.reportLoginQQ()},s.addShortCut=function(){if(ConfigManager.isTencent()){var e=new Object;e.action="web",e.title="传世英雄",e.url=window.OPEN_DATA.jumpurl,e.icon=window.OPEN_DATA.appicon,window.addShortCut(e)}},s.showShareView=function(e){void 0===e&&(e=null)},s.shareToQQZone=function(){window.shareToQQZone()},s.shareNewGift=function(){window.shareNewGift()},s.shareForSpeed=function(){window.shareForSpeed()},s.getShareTxtObj=function(){null==this._shareTxtList&&(this._shareTxtList=new Array,this._shareTxtList.push({title:"我，传奇，不充钱！",des:"无限轮回还送元宝，感觉以前错过了几个亿！"}),this._shareTxtList.push({title:"无兄弟，不传奇！",des:"装备靠打，元宝靠送，一款游戏顶过去5款！"}),this._shareTxtList.push({title:"兄弟，你的屠龙掉了！",des:"只因刷到这把武器，充值3万的土豪也打不过我这个0元党！"}),this._shareTxtList.push({title:"开局带狗，装备靠偷！",des:"杀杀人、爆爆装，传奇就是这么好玩！"}),this._shareTxtList.push({title:"原来土豪是这么玩游戏的！",des:"一键轮回，秒变土豪！不但战力狂升，还送元宝。拿去花、随便花！"}),this._shareTxtList.push({title:"百人大逃杀",des:"跨服混战，胜者吃鸡。苟到最后你就是赢家！"}),this._shareTxtList.push({title:"挂机收菜，秒变土豪",des:"挂机一晚背包多把黄金屠龙，土豪都羡慕死了！"}));var e=Math.floor(3*Math.random());return e>this._shareTxtList.length-1&&(e=this._shareTxtList.length-1),this._shareTxtList[e]},s.getShareObj=function(e){var t=new Object,i=this.getShareTxtObj();return t.title=i.title,t.desc=i.des,t.share_type=e.toString(),t.back=!0,t.share_url=window.OPEN_DATA.shareurl,t.image_url=window.OPEN_DATA.appicon,t},s.getZoneObj=function(e){var t=new Object,i=this.getShareTxtObj();return t.title=i.title,t.desc=i.des,t.share_type=e.toString(),t.back=!0,t.image_url=window.OPEN_DATA.appicon,t.share_url=window.OPEN_DATA.shareurl,t},s.getInviteObj=function(){var e=new Object,t=this.getShareTxtObj();e.title=t.title,e.desc=t.des,e.share_type="0",e.back=!0,e.image_url=window.OPEN_DATA.appicon;var i=window.OPEN_DATA.shareurl;return e.share_url=this.parseShareUrl(i),e},s.invite=function(){window.inviteFriend()},s.showOff=function(e,t,i,n,s){if(void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),ConfigManager.isTencent()){this.initQQInterface();var a=new Array,o=PhpHttpStatisticsManager.createDataObj("platform",Tools.getPageParams("platform"));a.push(o),o=PhpHttpStatisticsManager.createDataObj("player_id",RoleModel.getInstance().getRoleCommon().role_id),a.push(o),o=PhpHttpStatisticsManager.createDataObj("username",ConfigManager.plat_id),a.push(o),o=PhpHttpStatisticsManager.createDataObj("open_key",this._openkey),a.push(o),o=PhpHttpStatisticsManager.createDataObj("openid",e),a.push(o),o=PhpHttpStatisticsManager.createDataObj("msgtype",3),a.push(o),o=PhpHttpStatisticsManager.createDataObj("content",t),a.push(o),o=PhpHttpStatisticsManager.createDataObj("qua",Tools.getPageParams("qua")),a.push(o),o=PhpHttpStatisticsManager.createDataObj("type",i),a.push(o),o=PhpHttpStatisticsManager.createDataObj("role_id",n),a.push(o),o=PhpHttpStatisticsManager.createDataObj("server_id",s),a.push(o),o=PhpHttpStatisticsManager.createDataObj("nickname",RoleModel.getInstance().getRoleCommon().name),a.push(o),o=PhpHttpStatisticsManager.createDataObj("pf",this.pf),a.push(o);var r=this._apiUrl+this._showOffUrl,h=new egret.URLRequest(r),l=new egret.URLLoader,d=PhpHttpStatisticsManager.getPraseVariable(a,!1);h.data=d,h.method=egret.URLRequestMethod.POST,l.dataFormat=egret.URLLoaderDataFormat.BINARY,l.addEventListener(egret.Event.COMPLETE,this.showOffComplete,this),l.load(h)}},s.showOffComplete=function(e){var t=e.target;t.removeEventListener(egret.Event.COMPLETE,this.showOffComplete,this);var i=PhpHttpStatisticsManager.parsePhpBack(t.data);Message.show(i.data)},s.getQQInfo=function(e,t,i){if(ConfigManager.isTencent()){if(this.myQQInfo)return;this.initQQInterface();var n=new Array,s=PhpHttpStatisticsManager.createDataObj("platform",Tools.getPageParams("platform"));n.push(s),s=PhpHttpStatisticsManager.createDataObj("openid",t),n.push(s),s=PhpHttpStatisticsManager.createDataObj("open_key",i),n.push(s),s=PhpHttpStatisticsManager.createDataObj("pf",this.pf),n.push(s);var a=this._apiUrl+this._getInfoUrl,o=new egret.URLRequest(a),r=new egret.URLLoader,h=PhpHttpStatisticsManager.getPraseVariable(n,!1);o.data=h,o.method=egret.URLRequestMethod.POST,r.dataFormat=egret.URLLoaderDataFormat.BINARY,r.addEventListener(egret.Event.COMPLETE,this.getQQInfoComplete,this),r.load(o)}},s.getQQInfoComplete=function(e){var t=e.target;t.removeEventListener(egret.Event.COMPLETE,this.showOffComplete,this);var i=PhpHttpStatisticsManager.parsePhpBack(t.data);i&&i.data&&(this.myQQInfo=i.data)},s.parseShareUrl=function(e){var t;return t=e.indexOf("inviter")>=0?e.replace(/inviter.+\&/g,StringUtil.substitute("inviter={0}&",RoleModel.getInstance().getRoleCommon().role_id)):e+StringUtil.substitute("&inviter={0}",RoleModel.getInstance().getRoleCommon().role_id),t+=StringUtil.substitute("&server_id={0}",ConfigManager.server_id),this.myQQInfo&&(t+=StringUtil.substitute("&inviter_name={0}",this.myQQInfo.qq_name)),t},s.getQQGoodsVo=function(e){if(null==this._qqGoodsObj){this._qqGoodsObj=new Object;for(var t=DataManager.getInstance().getObj("data_charge_qq"),i=t.data_charge_qq,n=0;n<i.length;n++){var s=i[n],a=new QQGoodsVo;a.template_id=s.template_id,a.rmb=s.rmb,a.field_name=s.field_name,a.type=s.type,a.describe=s.describe,this._qqGoodsObj[a.template_id]=a}}return this._qqGoodsObj[e]},s.getRMBGoIDByRmb=function(e){var i=0;return 1==e?i=ConfigManager.isIOS()?t.ONE_RMB_IOS:t.ONE_RMB_ANDROID:3==e?i=ConfigManager.isIOS()?t.THREE_RMB_IOS:t.THREE_RMB_ANDROID:5==e&&(i=ConfigManager.isIOS()?t.FIVE_RMB_IOS:t.FIVE_RMB_ANDROID),i},s.setAllTypeShare=function(){Message.show("setAllTypeShare");for(var e=[0,1,2,3],t=0;t<e.length;t++){var i=e[t];window.setCommonType(i)}},s.getWinXinShareObj=function(e){var t=new Object,i=this.getShareTxtObj();return t.title=i.title,t.desc=i.des,t.share_type=e,t.back=!0,t.image_url=window.OPEN_DATA.appicon,t.share_url=window.OPEN_DATA.shareurl,t},s.reBuy=function(){0!=this._buyID&&this.QQBuyGoods(this._buyID,this._shopID)},s.reset=function(){this._buyID=0,this._shopID=0},s.weiXinCallBack=function(){var e=ShareModel.getInstance().last_time,t=ShareModel.getInstance().share_num,i=ShareModel.getInstance().share_award;5>t&&0==e&&0==i&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ShareEvtName.CCMD15101))},s.shareForMoneyTree=function(){window.shareForMoneyTree()},s.getFriendList=function(){if(ConfigManager.isTencent()&&null==this._qqFriendsList){this.initQQInterface();var e=new Array,t=PhpHttpStatisticsManager.createDataObj("platform",Tools.getPageParams("platform"));e.push(t),t=PhpHttpStatisticsManager.createDataObj("username",ConfigManager.plat_id),e.push(t),t=PhpHttpStatisticsManager.createDataObj("open_key",this._openkey),e.push(t),t=PhpHttpStatisticsManager.createDataObj("pf",this.pf),e.push(t);var i=this._apiUrl+this._getFriendsUrl,n=new egret.URLRequest(i),s=new egret.URLLoader,a=PhpHttpStatisticsManager.getPraseVariable(e,!1);n.data=a,n.method=egret.URLRequestMethod.POST,s.dataFormat=egret.URLLoaderDataFormat.BINARY,s.addEventListener(egret.Event.COMPLETE,this.getFriendsListComplete,this),s.load(n)}},s.getFriendsListComplete=function(e){if(null==this._qqFriendsList){var t=e.target;t.removeEventListener(egret.Event.COMPLETE,this.getFriendsListComplete,this);var i=PhpHttpStatisticsManager.parsePhpBack(t.data);this._qqFriendsList=new Array;var n=i.data;for(var s in n){var a=n[s],o=new QQFriendInfoVo;for(var r in a)o[r]=a[r];this._qqFriendsList.push(o)}GameDispatcher.getInstance().dispatchEvent(new ParamEvent(QQEvtName.UPDATE_GOODFRIEND_LIST))}},i(s,"qqFriendsList",function(){return this._qqFriendsList}),s.sendWanBaMsg=function(e){if(ConfigManager.isTencent()&&this._qqFriendsList)for(var t=this._qqFriendsList,i=0;i<t.length;i++){var n=t[i];this.showOff(n.openid,e,1)}},s.requestSms=function(e){if(ConfigManager.isTencent()){this.initQQInterface();var t=new Array,i=PhpHttpStatisticsManager.createDataObj("platform",Tools.getPageParams("platform"));t.push(i),i=PhpHttpStatisticsManager.createDataObj("player_id",RoleModel.getInstance().getRoleCommon().role_id),t.push(i),i=PhpHttpStatisticsManager.createDataObj("phone",e),t.push(i);var n=this._apiUrl+this._smsUrl,s=new egret.URLRequest(n),a=new egret.URLLoader,o=PhpHttpStatisticsManager.getPraseVariable(t,!0);s.data=o,s.method=egret.URLRequestMethod.POST,a.dataFormat=egret.URLLoaderDataFormat.BINARY,a.addEventListener(egret.Event.COMPLETE,this.requestSmsToPhp,this),a.load(s)}},s.requestSmsToPhp=function(e){var t=e.target;t.removeEventListener(egret.Event.COMPLETE,this.requestSmsToPhp,this);var i=PhpHttpStatisticsManager.parsePhpBack(t.data);1e3==i.code?Message.show("请求成功"):Message.show(i.data)},s.requestSuperVip=function(e,t,i,n,s){if(ConfigManager.isTencent()){this.initQQInterface();var a=new Array,o=PhpHttpStatisticsManager.createDataObj("platform",Tools.getPageParams("platform"));a.push(o),o=PhpHttpStatisticsManager.createDataObj("server_id",ConfigManager.server_id),a.push(o),o=PhpHttpStatisticsManager.createDataObj("player_id",RoleModel.getInstance().getRoleCommon().role_id),a.push(o),o=PhpHttpStatisticsManager.createDataObj("username",ConfigManager.plat_id),a.push(o),o=PhpHttpStatisticsManager.createDataObj("qq",e),a.push(o),o=PhpHttpStatisticsManager.createDataObj("birthday",t),a.push(o),o=PhpHttpStatisticsManager.createDataObj("phone",i),a.push(o),o=PhpHttpStatisticsManager.createDataObj("verify_code",n),a.push(o),o=PhpHttpStatisticsManager.createDataObj("email",s),a.push(o);var r=this._apiUrl+this._superVipUrl,h=new egret.URLRequest(r),l=new egret.URLLoader,d=PhpHttpStatisticsManager.getPraseVariable(a,!0);h.data=d,h.method=egret.URLRequestMethod.POST,l.dataFormat=egret.URLLoaderDataFormat.BINARY,l.addEventListener(egret.Event.COMPLETE,this.requestSVToPhp,this),l.load(h)}},s.requestSVToPhp=function(e){var t=e.target;t.removeEventListener(egret.Event.COMPLETE,this.requestSmsToPhp,this);var i=PhpHttpStatisticsManager.parsePhpBack(t.data);1e3==i.code?(Message.show("请耐心等待验证"),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ActivityEvtName.SUPER_VIP_CLOSE_VIEW))):Message.show(i.data)},s.hasVerifyVip=function(){if(ConfigManager.isTencent()&&!this.isWeiXin()){this.initQQInterface();var e=new Array,t=PhpHttpStatisticsManager.createDataObj("platform",Tools.getPageParams("platform"));e.push(t),t=PhpHttpStatisticsManager.createDataObj("server_id",ConfigManager.server_id),e.push(t),t=PhpHttpStatisticsManager.createDataObj("player_id",RoleModel.getInstance().getRoleCommon().role_id),e.push(t),t=PhpHttpStatisticsManager.createDataObj("username",ConfigManager.plat_id),e.push(t);var i=this._apiUrl+this._isVerifyVipUrl,n=new egret.URLRequest(i),s=new egret.URLLoader,a=PhpHttpStatisticsManager.getPraseVariable(e,!1);n.data=a,n.method=egret.URLRequestMethod.POST,s.dataFormat=egret.URLLoaderDataFormat.BINARY,s.addEventListener(egret.Event.COMPLETE,this.isVerifyVipToPhp,this),s.load(n)}},s.isVerifyVipToPhp=function(e){var i=e.target;i.removeEventListener(egret.Event.COMPLETE,this.isVerifyVipToPhp,this);var n=PhpHttpStatisticsManager.parsePhpBack(i.data);1e3==n.code&&(t.getInstance().verifyVipStatu=n.data),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(QQEvtName.UPDATE_VERIFY_STATU))},s.requestWanBaVipLv=function(){if(ConfigManager.isTencent()&&!this.isWeiXin()){this.initQQInterface();var e=new Array,t=PhpHttpStatisticsManager.createDataObj("platform",Tools.getPageParams("platform"));e.push(t),t=PhpHttpStatisticsManager.createDataObj("server_id",ConfigManager.server_id),e.push(t),t=PhpHttpStatisticsManager.createDataObj("player_id",RoleModel.getInstance().getRoleCommon().role_id),e.push(t),t=PhpHttpStatisticsManager.createDataObj("openid",ConfigManager.plat_id),e.push(t),t=PhpHttpStatisticsManager.createDataObj("open_key",this._openkey),e.push(t),t=PhpHttpStatisticsManager.createDataObj("pf",this.pf),e.push(t);var i=this._apiUrl+this._wanbaVipLvUrl,n=new egret.URLRequest(i),s=new egret.URLLoader,a=PhpHttpStatisticsManager.getPraseVariable(e,!1);n.data=a,n.method=egret.URLRequestMethod.POST,s.dataFormat=egret.URLLoaderDataFormat.BINARY,s.load(n)}},s.shareForOnLine=function(){ConfigManager.isTencent()&&window.shareOnLine()},s.checkWanBaVipGiftExchange=function(e){if(ConfigManager.isTencent()&&!this.isWeiXin()){if(!this.isWanbaJiFenGift(e))return console.log("checkWanBaVipGiftExchange id = "+e),!1;this.initQQInterface();var t=new Array,i=PhpHttpStatisticsManager.createDataObj("platform",Tools.getPageParams("platform"));t.push(i),i=PhpHttpStatisticsManager.createDataObj("openid",ConfigManager.plat_id),t.push(i),i=PhpHttpStatisticsManager.createDataObj("open_key",this._openkey),t.push(i),i=PhpHttpStatisticsManager.createDataObj("pf",this.pf),t.push(i),i=PhpHttpStatisticsManager.createDataObj("gift_id",e),t.push(i),i=PhpHttpStatisticsManager.createDataObj("qua",Tools.getPageParams("qua")),t.push(i),i=PhpHttpStatisticsManager.createDataObj("server_id",ConfigManager.server_id),t.push(i),i=PhpHttpStatisticsManager.createDataObj("player_id",RoleModel.getInstance().getRoleCommon().role_id),t.push(i);var n=this._apiUrl+this._wanbaVipExchange,s=new egret.URLRequest(n),a=new egret.URLLoader,o=PhpHttpStatisticsManager.getPraseVariable(t,!1);return s.data=o,s.method=egret.URLRequestMethod.POST,a.dataFormat=egret.URLLoaderDataFormat.BINARY,a.addEventListener(egret.Event.COMPLETE,this.checkWanbaGiftExchangeComplete,this),a.load(s),!0}return!1},s.checkWanbaGiftExchangeComplete=function(e){var t=e.target;t.removeEventListener(egret.Event.COMPLETE,this.checkWanbaGiftExchangeComplete,this);var i=PhpHttpStatisticsManager.parsePhpBack(t.data);if(1e3==i.code){var n=parseInt(Tools.getPageParams("GIFT"));if(console.log("checkJiFenComplete id = "+n),this.isWanbaJiFenGift(n)){var s="恭喜您获得丰厚奖励：\n",a=GoodsListProxy.getInstance().getGoodsInfoByType(n);a&&(s+=StringUtil.substitute("{0}x{1}",a.name,1),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"积分礼包",content:s})))}}else Message.show(i.data)},s.isWanbaJiFenGift=function(e){return this._wanBaJiFenGiftList.indexOf(e)>=0},s.requestCoverStatu=function(){if(ConfigManager.isTencent()&&!this.isWeiXin()){this.initQQInterface();var e=new Array,t=PhpHttpStatisticsManager.createDataObj("platform",Tools.getPageParams("platform"));e.push(t),t=PhpHttpStatisticsManager.createDataObj("openid",ConfigManager.plat_id),e.push(t),t=PhpHttpStatisticsManager.createDataObj("open_key",this._openkey),e.push(t),t=PhpHttpStatisticsManager.createDataObj("pf",this.pf),e.push(t);var i=this._apiUrl+this._coverUrl,n=new egret.URLRequest(i),s=new egret.URLLoader,a=PhpHttpStatisticsManager.getPraseVariable(e,!1);n.data=a,n.method=egret.URLRequestMethod.POST,s.dataFormat=egret.URLLoaderDataFormat.BINARY,s.addEventListener(egret.Event.COMPLETE,this.checkCoverComplete,this),s.load(n)}},s.checkCoverComplete=function(e){var i=e.target;i.removeEventListener(egret.Event.COMPLETE,this.checkCoverComplete,this);var n=PhpHttpStatisticsManager.parsePhpBack(i.data);for(var s in n)console.log("key = "+s+"	value="+n[s]);1e3==n.code&&(t.getInstance().isSetCover=!0),this.dispatchEvent(new ParamEvent(QQEvtName.UPDATE_COVER_STATU))},s.requestWanBaWeiDuanClick=function(e){if(ConfigManager.isTencent()&&!this.isWeiXin()&&!this._hasClickDownload){this.initQQInterface();var t=new Array,i=PhpHttpStatisticsManager.createDataObj("platform",Tools.getPageParams("platform"));t.push(i),i=PhpHttpStatisticsManager.createDataObj("username",ConfigManager.plat_id),t.push(i),i=PhpHttpStatisticsManager.createDataObj("server_id",ConfigManager.server_id),t.push(i),i=PhpHttpStatisticsManager.createDataObj("player_id",RoleModel.getInstance().getRoleCommon().role_id),t.push(i),i=PhpHttpStatisticsManager.createDataObj("type",e),t.push(i);var n=this._apiUrl+this._weiduanDownloadTimes,s=new egret.URLRequest(n),a=new egret.URLLoader,o=PhpHttpStatisticsManager.getPraseVariable(t,!0);s.data=o,s.method=egret.URLRequestMethod.POST,a.dataFormat=egret.URLLoaderDataFormat.BINARY,a.load(s),this._hasClickDownload=!0}},t.ONE_RMB_ANDROID=10822,t.ONE_RMB_IOS=10878,t.THREE_RMB_ANDROID=10891,t.THREE_RMB_IOS=10893,t.FIVE_RMB_ANDROID=10892,t.FIVE_RMB_IOS=10894,t.FOUND_ANDROID=10868,t.FOUND_IOS=10880,t.MONTH_ANDROID=10869,t.MONTH_IOS=10881,t.LIFE_ANDROID=10867,t.LIFE_IOS=10879,t.SHADOW_ANDROID=11479,t.SHADOW_IOS=11480,t.CHARGEDABIAO_ANDROID=11826,t.CHARGEDABIAO_IOS=11827,t.AWAKEBUY_ANDROID=12626,t.AWAKEBUY_IOS=12627,t.HOSTNAME="http://1106167790.urlshare.cn",t.CHUANSHI_GIFT=990,t}(egret.EventDispatcher);egret.registerClass(QQManager,"QQManager");var AccessGoodFlyEffectManager=function(){function e(){this._layer=GameContent.gameLayers.topLayer}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},i.getGood=function(t,i,n,s,a){var o=this;void 0===i&&(i=e.BAGTYPE),void 0===n&&(n=null),void 0===s&&(s=null),void 0===a&&(a=.5);var r,h,l,d,_;t>0&&(r=new PicLoader,r.load(UrlUtil.getGoodsImageURL(t))),i==e.BAGTYPE?(d=MainUIModel.getInstance().bagRect.x,_=MainUIModel.getInstance().bagRect.y):i==e.GOLDTYPE?(d=MainUIModel.getInstance().goldRect.x,_=MainUIModel.getInstance().goldRect.y):s&&(d=s.x,_=s.y),null==n&&(n=new Point,n.x=GameContent.stageWidth/2,n.y=GameContent.stageHeight/2),h=d<n.x?d+(n.x-d)/2:n.x+(d-n.x)/2,l=_<n.y?_+(n.y-_)/3:n.y+(_-n.y)/3,r&&(r.x=n.x,r.y=n.y,this._layer.addChild(r),egret.Tween.get(r).to({x:d,y:_},500).wait(500).call(function(){o.onCollectComplete1(r)}))},i.flyArray=function(t,i,n,s){void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=e.BAGTYPE),this._time=t.length-1,n&&(s=0),e.getInstance().getGood(t[this._time],s,i,n),this._time>0&&TimerManager.getInstance().add(50,this.timeComplete,this,t,i,n,s)},i.timeComplete=function(t,i,n,s){return void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=e.BAGTYPE),this._time--,this._time<0?void TimerManager.getInstance().remove(50,this.timeComplete,this):(n&&(s=0),void e.getInstance().getGood(t[this._time],s,i,n,s))},i.onCollectComplete=function(e,t,i){this.onSetTimeOutHandler(e,t,i)},i.onSetTimeOutHandler=function(e,t,i){var n=this;egret.Tween.get(e).to({x:t,y:i},500).wait(500).call(function(){n.onCollectComplete1(e)})},i.onCollectComplete1=function(e){this._layer.contains(e)&&(this._layer.removeChild(e),e.dispose(),e=null)},i.fly=function(e,t,i,n){var s=this;void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=!1);var a,o;null==i?(a=MainUIModel.getInstance().bagRect.x,o=MainUIModel.getInstance().bagRect.y):i&&(a=i.x,o=i.y),null==t&&(t=new Point,t.x=GameContent.stageWidth/2,t.y=GameContent.stageHeight/2);var r=new PicLoader;n?r.load(e):r.loadByJsonName(e),r.x=t.x,r.y=t.y,this._layer.addChild(r),egret.Tween.get(r).to({x:a,y:o},800).call(function(){s.onCollectComplete1(r)})},e.BAGTYPE=1,e.GOLDTYPE=2,e}();egret.registerClass(AccessGoodFlyEffectManager,"AccessGoodFlyEffectManager");var AnimationLoader=function(e){function t(){e.call(this),this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){this._noResDic=new Object},n.load=function(e){this._url=e,this._noResDic[this._url]||RES.getResByUrl(e+".png",this.loadTextureComplete,this,RES.ResourceItem.TYPE_IMAGE)},n.loadTextureComplete=function(e){this._texture=e,RES.getResByUrl(this._url+".json",this.loadJsonComplete,this,RES.ResourceItem.TYPE_JSON)},n.loadJsonComplete=function(e){var i=this.parseMC(e,this._texture);this.dispatchEvent(new ParamEvent(t.COMPLETE,{url:this._url,mc:i}))},n.parseMC=function(e,t){if(null==e)return void(this._noResDic[this._url]=1);var i=this._url.split("/").pop(),n=e.mc;if(null==n)throw new Error(this._url);var s=n[i],a=s.frames,o=e.res,r=new CustomSpriteSheet(t),h=new MovieClipData;h.url=this._url;for(var l,d,_,c,u,p=new Array,g=0;g<a.length;g++)d=a[g],_=o[d.res],u=this._url+d.res,c=r.createTexture(u,_.x,_.y,_.w,_.h,d.x,d.y,_.w,_.h),l=new BitmapFrame,l.draw(c),l.width=_.w,l.height=_.h,p.push(l),h.bitmapNameDic[d.res]=l;return h.setBitmapFrameList(p),p=null,n=null,i=null,s=null,a=null,o=null,r=null,l=null,d=null,_=null,c=null,u=null,h},t.COMPLETE="animation_complete",t}(egret.EventDispatcher);egret.registerClass(AnimationLoader,"AnimationLoader");var B7724Manager=function(e){function t(){e.call(this),this.gameID="11559dc3a674b086"}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},n.sendCreateRole=function(){if(ConfigManager.isb7724()){var e=new Object;e.qqesuid=Tools.getPageParams("user_id"),e.channelid=Tools.getPageParams("cur_channel"),e.cpguid=this.gameID,e.roleName=RoleModel.getInstance().getRoleCommon().name,e.serverId=ConfigManager.server_id,e.level="1",e.cpgameid=Tools.getPageParams("cpgameid"),e.ext=decodeURIComponent(Tools.getPageParams("extends")),e.timestamp=RoleModel.getInstance().serverTime;var t=new Array,i=PhpHttpStatisticsManager.createDataObj("qqesuid",e.qqesuid);t.push(i),i=PhpHttpStatisticsManager.createDataObj("channelid",e.channelid),t.push(i),i=PhpHttpStatisticsManager.createDataObj("cpguid",e.cpguid),t.push(i),i=PhpHttpStatisticsManager.createDataObj("roleName",e.roleName),t.push(i),i=PhpHttpStatisticsManager.createDataObj("serverId",e.serverId),t.push(i),i=PhpHttpStatisticsManager.createDataObj("level",e.level),t.push(i),i=PhpHttpStatisticsManager.createDataObj("cpgameid",e.cpgameid),t.push(i),i=PhpHttpStatisticsManager.createDataObj("ext",e.ext),t.push(i),i=PhpHttpStatisticsManager.createDataObj("timestamp",e.timestamp),t.push(i);var n=PhpHttpStatisticsManager.getSign(t);return e.sign=n,JSON.stringify(e)}return null},n.loginSend=function(){if(ConfigManager.isb7724()){var e=new Object;e.cpgameid=Tools.getPageParams("cpgameid"),e.qqesuid=Tools.getPageParams("user_id"),e.channelid=Tools.getPageParams("cur_channel"),e.cpguid=this.gameID,e.roleName=RoleModel.getInstance().getRoleCommon().name,e.serverId=ConfigManager.server_id,e.level=RoleModel.getInstance().getRoleCommon().level.toString(),e.vip=VipModel.getInstance().getVIPLevel().toString(),e.ext=decodeURIComponent(Tools.getPageParams("extends")),e.servername="传世英雄"+e.serverId+"区",e.timestamp=Math.ceil((new Date).getTime()/1e3);var t=new Array,i=PhpHttpStatisticsManager.createDataObj("cpgameid",e.cpgameid);t.push(i),i=PhpHttpStatisticsManager.createDataObj("qqesuid",e.qqesuid),t.push(i),i=PhpHttpStatisticsManager.createDataObj("channelid",e.channelid),t.push(i),i=PhpHttpStatisticsManager.createDataObj("cpguid",e.cpguid),t.push(i),i=PhpHttpStatisticsManager.createDataObj("roleName",e.roleName),t.push(i),i=PhpHttpStatisticsManager.createDataObj("serverId",e.serverId),t.push(i),i=PhpHttpStatisticsManager.createDataObj("level",e.level),t.push(i),i=PhpHttpStatisticsManager.createDataObj("vip",e.vip),t.push(i),i=PhpHttpStatisticsManager.createDataObj("ext",e.ext),t.push(i),i=PhpHttpStatisticsManager.createDataObj("servername",e.servername),t.push(i),i=PhpHttpStatisticsManager.createDataObj("timestamp",e.timestamp),t.push(i);
var n=PhpHttpStatisticsManager.getSign(t);return e.sign=n,JSON.stringify(e)}return null},n.getInitParams=function(){console.log("platform = "+Tools.getPageParams("platform"));var e=new Object;e.qqesuid=Tools.getPageParams("user_id"),e.channelid=Tools.getPageParams("cur_channel"),e.channeluid=Tools.getPageParams("channeluid"),e.qqesnickname="",e.qqesavatar="",e.cpgameid=Tools.getPageParams("cpgameid"),e.ext=decodeURIComponent(Tools.getPageParams("extends")),e.qqestimestamp=Math.ceil((new Date).getTime()/1e3);var t=new Array,i=PhpHttpStatisticsManager.createDataObj("qqesuid",e.qqesuid);t.push(i),i=PhpHttpStatisticsManager.createDataObj("channelid",e.channelid),t.push(i),i=PhpHttpStatisticsManager.createDataObj("channeluid",e.channeluid),t.push(i),i=PhpHttpStatisticsManager.createDataObj("qqesnickname",e.qqesnickname),t.push(i),i=PhpHttpStatisticsManager.createDataObj("qqesavatar",e.qqesavatar),t.push(i),i=PhpHttpStatisticsManager.createDataObj("cpgameid",e.cpgameid),t.push(i),i=PhpHttpStatisticsManager.createDataObj("ext",e.ext),t.push(i),i=PhpHttpStatisticsManager.createDataObj("qqestimestamp",e.qqestimestamp),t.push(i);var n=PhpHttpStatisticsManager.getSign(t);return e.sign=n,e},t}(egret.EventDispatcher);egret.registerClass(B7724Manager,"B7724Manager");var Base64=function(){function e(){}var t=(__define,e);t.prototype;return e.base64encode=function(e){var t,i,n,s,a,o;for(n=e.length,i=0,t="";n>i;){if(s=255&e.charCodeAt(i++),i==n){t+=this.base64EncodeChars.charAt(s>>2),t+=this.base64EncodeChars.charAt((3&s)<<4),t+="==";break}if(a=e.charCodeAt(i++),i==n){t+=this.base64EncodeChars.charAt(s>>2),t+=this.base64EncodeChars.charAt((3&s)<<4|(240&a)>>4),t+=this.base64EncodeChars.charAt((15&a)<<2),t+="=";break}o=e.charCodeAt(i++),t+=this.base64EncodeChars.charAt(s>>2),t+=this.base64EncodeChars.charAt((3&s)<<4|(240&a)>>4),t+=this.base64EncodeChars.charAt((15&a)<<2|(192&o)>>6),t+=this.base64EncodeChars.charAt(63&o)}return t},e.base64decode=function(e){var t,i,n,s,a,o,r;for(o=e.length,a=0,r="";o>a;){do t=this.base64DecodeChars[255&e.charCodeAt(a++)];while(o>a&&-1==t);if(-1==t)break;do i=this.base64DecodeChars[255&e.charCodeAt(a++)];while(o>a&&-1==i);if(-1==i)break;r+=String.fromCharCode(t<<2|(48&i)>>4);do{if(n=255&e.charCodeAt(a++),61==n)return r;n=this.base64DecodeChars[n]}while(o>a&&-1==n);if(-1==n)break;r+=String.fromCharCode((15&i)<<4|(60&n)>>2);do{if(s=255&e.charCodeAt(a++),61==s)return r;s=this.base64DecodeChars[s]}while(o>a&&-1==s);if(-1==s)break;r+=String.fromCharCode((3&n)<<6|s)}return r},e.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e.base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],e}();egret.registerClass(Base64,"Base64");var ConfigManager=function(){function e(){}var t=__define,i=e;i.prototype;return t(e,"isDevServer",function(){var e=!1;return void 0!=AllParamObj.isin&&null!=AllParamObj.isin&&"1"==AllParamObj.isin&&(e=!0),e}),t(e,"isGMOpen",function(){return"1"==AllParamObj.gmOpen}),t(e,"isHttpPostMode",function(){var e=!1;return void 0!=AllParamObj.isin2&&null!=AllParamObj.isin2&&"1"==AllParamObj.isin2&&(e=!0),e}),e.isDirectEnter=function(){LoginControl.getInstance();var t,i,n,s,a,o=Tools.getPageParams("user_id"),r=Tools.getPageParams("platform"),h=Tools.getPageParams("cur_channel"),l=Number(Tools.getPageParams("ret")),d="",_="",c=[],u="";if(e.plat_id=o,e.cur_channel=h,null!=r&&""!=r&&(AllParamObj.platform=r,"dev"==r&&(AllParamObj.center_url=e.test_centerUrl)),1==e.isDevServer)return this.parseUrlLogin(),!1;var p=Tools.getPageParams("ret");if(void 0==p||null==p||""==p)return AllParamObj.isin2="0",AllParamObj.isin="1",this.parseUrlLogin(),!1;if(0==l)return Alert.show("登录失败"),!1;if(t=Tools.getPageParams("server_id"),i=Tools.getPageParams("login"),void 0==i||""==i)return!1;if(void 0==o||""==o)return Alert.show("登录失败"),!1;n=Base64.base64decode(i),s=n.split(","),c=[],a="",u="";for(var g in s)u=String.fromCharCode(Number(s[g])),a+=u;c=a.split(":"),d=c[0],_=c[1];var m=Tools.getPageParams("is_ssl");if(m&&parseInt(m)>0){var v=c[2];e.domain=v}return void 0!=t&&""!=t&&void 0!=d&&""!=d&&void 0!=_&&""!=_?(e.server_id=Number(t),e.plat_port=Number(_),e.plat_ip=d,PhpHttpStatisticsManager.send(1),CreateControl.getInstance(),RenderManager.start(),!0):!1},e.parseUrlLogin=function(){var t,i,n,s,a,o="",r="",h=[],l="";t=Tools.getPageParams("server_id"),i=Tools.getPageParams("login"),n=Base64.base64decode(i),s=n.split(","),h=[],a="",l="";for(var d in s)l=String.fromCharCode(Number(s[d])),a+=l;return h=a.split(":"),o=h[0],r=h[1],void 0!=t&&""!=t&&void 0!=o&&""!=o&&void 0!=r&&""!=r&&(e.server_id=Number(t),AllParamObj.port=r,AllParamObj.ip=o),!0},e.isTencent=function(){return"tencent"==AllParamObj.platform},e.isGuoZiZF=function(){return"b333yx"==AllParamObj.platform},e.isGuoZi=function(){return"guoziyx"==AllParamObj.platform},e.isb9cb=function(){return"b9cb"==AllParamObj.platform},e.isyxjinbang=function(){return"yxjinbang"==AllParamObj.platform},e.isQiTian=function(){return"qitian"==AllParamObj.platform},e.isWanZui=function(){return"wanzui"==AllParamObj.platform},e.isb7724=function(){return"b7724"==AllParamObj.platform},e.isQingFeng=function(){return"qingfeng"==AllParamObj.platform},e.getOS=function(){var e=egret.Capabilities.os,t="";return t="iOS"==e?"ios":"Android"==e?"android":"winpc"},e.isAndroid=function(){return"android"==e.getOS()},e.getOSCode=function(){var e=egret.Capabilities.os;return"iOS"==e?2:1},t(e,"plat_id",function(){return e._plat_id},function(t){e._plat_id=t}),e.isIOS=function(){return e.isTencent()&&window.OPEN_DATA?2==parseInt(window.OPEN_DATA.platform):"iOS"==egret.Capabilities.os},e.isQunHei=function(){return"qunhei"==AllParamObj.platform},e.getVia=function(){var t=0;if(e.isTencent()&&window.OPEN_DATA){var i=window.OPEN_DATA.via;"H5.QQ.SHARE"==i?t=2:"H5.QZONE.SHARE"==i?t=1:"H5.DESKTOP"==i?t=3:"H5.APP.HDB_D"==i&&(t=4)}return t},e.isChaoren=function(){return"chaoren"==AllParamObj.platform},e.isNewCreate=function(){return e.isTencent()||e.isb7724()||e.isyxjinbang()||e.isQunHei()||e.isQingFeng()||e.isChaoren()||e.isB9g()||e.isb9cb()||e.isLeDu()||e.isYuMeng()||e.is37()},e.isBigScene=function(){return e.isb7724()||e.isyxjinbang()||e.isQunHei()||e.isQingFeng()||e.isChaoren()||e.isB9g()||e.isb9cb()||e.isLeDu()||e.isYuMeng()},e.isB9g=function(){return"b9g"==AllParamObj.platform},e.isLeDu=function(){return"ledu"==AllParamObj.platform},e.isYuMeng=function(){return"yumeng"==AllParamObj.platform},e.is37=function(){return"b37huyu"==AllParamObj.platform},e.rootURL="",e.platform_id=0,e._plat_id="12",e.server_id=0,e.cur_channel="",e.test_centerUrl="http://api.bzsch5.test.9217web.com",e}();egret.registerClass(ConfigManager,"ConfigManager");var DataManager=function(){function e(){}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},i.setData=function(e){this._allConfigObj=e},i.getObj=function(e){return this._allConfigObj?this._allConfigObj[e]:null},e}();egret.registerClass(DataManager,"DataManager");var EffectManager=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},n.showEffect=function(e,t,i,n,s,a,o,r,h,l,d,_,c,u,p){void 0===s&&(s=60),void 0===a&&(a=!1),void 0===o&&(o=!1),void 0===r&&(r=0),void 0===h&&(h=!0),void 0===l&&(l=0),void 0===d&&(d=!0),void 0===_&&(_=1),void 0===c&&(c=-1),void 0===u&&(u=0),void 0===p&&(p=-1);var g=new UIEffect("EffectManager"),m=0,v=0;return g.showEffect(e,t+m,i+v,n,s,a,o,r,h,l,d,_,c,u,p),g},t}(egret.EventDispatcher);egret.registerClass(EffectManager,"EffectManager");var GameStateManager=function(){function e(){this.isResLoaded=!1,this.isSceneLoaded=!1,this._state=0,this._serverState=e.SERVER_NORMAL}var t=__define,i=e,n=i.prototype;return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},t(n,"state",function(){return this._state},function(e){e!=this._state&&(this._state=e)}),n.isReConnect=function(){return this._state==e.SOCKET_CLOSE},t(n,"serverState",function(){return this._serverState},function(e){this._serverState!=e&&(this._serverState=e)}),n.isServerNormal=function(){return this._serverState==e.SERVER_NORMAL},e.NORMAL=2,e.ACTIVATE=3,e.DEACTIVATE=4,e.SOCKET_CLOSE=5,e.SERVER_NORMAL="SERVER_NORMAL",e.REPEAT_LOGIN="repeat_login",e.SERVER_STOP="server_stop",e.BAN="ban",e.BAN_IP="ban_ip",e.ROUTING_FAST="routing_fast",e.HEART_BROKEN="heart_broken",e.WEBSOCKET_NOT_MATCH="websocket_not_match",e.WEBSOCKET_TERMINATE="websocket_terminate",e}();egret.registerClass(GameStateManager,"GameStateManager");var ImageLoader=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.load=function(e){var t=this;this._url=e,RES.getResByUrl(e,function(e){t.loadTextureComplete(e)},this,RES.ResourceItem.TYPE_IMAGE)},n.loadTextureComplete=function(e){var i=new CustomTexture;i.setTexture(e),i.url=this._url,this.dispatchEvent(new ParamEvent(t.COMPLETE,{url:this._url,ct:i}))},t.COMPLETE="imageloader_complete",t}(egret.EventDispatcher);egret.registerClass(ImageLoader,"ImageLoader");var JinBangYXManager=function(){function e(){}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},i.share=function(){},i.getInitObj=function(){var e=new Object,t=new Object;t.title="传世英雄",t.desc="传世英雄好好玩，大家一起来吧",t.imgUrl="",t.success=window.jbyxShareSuccess,t.cancel=window.jbyxShareFail;var i=new Object;i.title="传世英雄",i.imgUrl="",i.success=window.jbyxShareSuccess,i.cancel=window.jbyxShareFail;var n=new Object;n.success=window.jbyxPaySuccess,n.cancel=window.jbyxPayFail;var s=new Object;return s.friend=t,s.timeline=i,e.share=s,e.pay=n,e},e.GET_JBYXREWARD="GET_JBYXREWARD",e}();egret.registerClass(JinBangYXManager,"JinBangYXManager");var PhpHttpStatisticsManager=function(){function e(){}var t=(__define,e);t.prototype;return e.send=function(t){if(this._curStep=t,0!=ConfigManager.isHttpPostMode){var i=AllParamObj.center_url,n=new egret.URLRequest(i+this._loadLossURL),s=new egret.URLLoader;s.addEventListener(egret.Event.COMPLETE,function(t){var i=t.target,n=e.parsePhpBack(i.data);1e3==Number(n.code)?console.log("统计成功"):console.log("统计失败")},this);var a=ConfigManager.plat_id,o=AllParamObj.platform,r=ConfigManager.server_id.toString(),h=egret.Capabilities.os,l=navigator.appName,d=[];d.push(this.createDataObj("platform",o)),d.push(this.createDataObj("username",a)),d.push(this.createDataObj("type",t)),d.push(this.createDataObj("os",h)),d.push(this.createDataObj("browser",l)),d.push(this.createDataObj("server_id",r)),d.push(this.createDataObj("via",ConfigManager.getVia()));var _=this.getPraseVariable(d,!1);n.data=_,n.method=egret.URLRequestMethod.POST,s.dataFormat=egret.URLLoaderDataFormat.BINARY,s.load(n)}},e.updateLoad=function(t,i){void 0===i&&(i=!1);var n=AllParamObj.center_url,s=new egret.URLRequest(n+this._updateLoad),a=new egret.URLLoader;a.addEventListener(egret.Event.COMPLETE,function u(t){var i=t.target;i.removeEventListener(egret.Event.COMPLETE,u,this);var n=e.parsePhpBack(i.data);1e3==Number(n.code)?console.log("发送玩家信息成功"):console.log("发送玩家信息失败")},this);var o=ConfigManager.plat_id,r=AllParamObj.platform,h=ConfigManager.server_id.toString(),l=RoleModel.getInstance().getAllPartnerFight(),d=ConfigManager.cur_channel,_=[];_.push(this.createDataObj("platform",r)),_.push(this.createDataObj("username",o)),_.push(this.createDataObj("nickname",t.name)),_.push(this.createDataObj("sex",t.sex)),_.push(this.createDataObj("career",t.career)),_.push(this.createDataObj("level",t.level)),_.push(this.createDataObj("server_id",h)),_.push(this.createDataObj("player_id",t.role_id)),_.push(this.createDataObj("round",t.round)),_.push(this.createDataObj("power",l)),_.push(this.createDataObj("status",0)),_.push(this.createDataObj("cur_channel",d)),_.push(this.createDataObj("via",ConfigManager.getVia())),ConfigManager.isTencent()&&_.push(this.createDataObj("open_key",Tools.getPageParams("open_key"))),i&&(_.push(this.createDataObj("inviter",Tools.getPageParams("inviter"))),_.push(this.createDataObj("inviter_server_id",Tools.getPageParams("inviter_server_id"))),_.push(this.createDataObj("inviter_name",Tools.getPageParams("inviter_name")))),ConfigManager.isTencent()&&_.push(this.createDataObj("pf",QQManager.getInstance().pf));var c=this.getPraseVariable(_,!0);s.data=c,s.method=egret.URLRequestMethod.POST,a.dataFormat=egret.URLLoaderDataFormat.BINARY,a.load(s)},e.requestServerList=function(){if(0!=ConfigManager.isHttpPostMode){var t=AllParamObj.center_url,i=new egret.URLRequest(t+this._serverListURL),n=new egret.URLLoader;n.addEventListener(egret.Event.COMPLETE,function(t){var i=t.target,n=e.parsePhpBack(i.data);null==n&&trace("result ---------- null"),1e3==Number(n.code)?(LoginModel.getInstance().setServerListInfo(n.data),this.send(1),console.log("请求服务器列表成功")):console.log("请求服务器列表失败")},this);var s=AllParamObj.platform,a=ConfigManager.plat_id,o=[];o.push(this.createDataObj("platform",s)),o.push(this.createDataObj("username",a));try{var r=this.getPraseVariable(o,!1)}catch(h){console.log("getPraseVariable data error")}i.data=r,i.method=egret.URLRequestMethod.POST,n.dataFormat=egret.URLLoaderDataFormat.BINARY,n.load(i)}},e.requestChargeOrder=function(e,t,i,n,s,a){void 0===s&&(s=1),void 0===a&&(a=0);var o=ConfigManager.server_id.toString(),r=ConfigManager.plat_id,h=Tools.getPageParams("jzuid"),l=Tools.getPageParams("jzfid");window.location.href="http://211.159.189.27/pay/index.php?username="+r+"&price="+t+"&type="+i+"&server="+o+"&jzuid="+h+"&jzfid="+l},e.sendChat=function(t,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=""),0!=ConfigManager.isHttpPostMode){var a=AllParamObj.center_url,o=new egret.URLRequest(a+this._getChatURL),r=new egret.URLLoader;r.addEventListener(egret.Event.COMPLETE,function(t){var i=t.target;e.parsePhpBack(i.data)},this);var h=ConfigManager.plat_id,l=AllParamObj.platform,d=ConfigManager.server_id.toString(),_=(RoleModel.getInstance().getAllPartnerFight(),RoleModel.getInstance().getRoleCommon().role_id),c=RoleModel.getInstance().getRoleCommon().name,u=[];u.push(this.createDataObj("platform",l)),u.push(this.createDataObj("server_id",d)),u.push(this.createDataObj("player_id",_)),u.push(this.createDataObj("nickname",c)),u.push(this.createDataObj("username",h)),u.push(this.createDataObj("type",i)),u.push(this.createDataObj("content",t)),u.push(this.createDataObj("to_player_id",n)),u.push(this.createDataObj("to_nickname",s));var p=this.getPraseVariable(u,!0);o.data=p,o.method=egret.URLRequestMethod.POST,r.dataFormat=egret.URLLoaderDataFormat.BINARY,r.load(o)}},e.sendGM=function(t){if(0!=ConfigManager.isHttpPostMode){var i=AllParamObj.center_url,n=new egret.URLRequest(i+this._getGMURL),s=new egret.URLLoader;s.addEventListener(egret.Event.COMPLETE,function(t){var i=t.target,n=e.parsePhpBack(i.data);1e3==Number(n.code)?Message.show("发送GM信息成功"):1007==Number(n.code)&&console.log(n.data)},this);var a=ConfigManager.plat_id,o=AllParamObj.platform,r=ConfigManager.server_id.toString(),h=(RoleModel.getInstance().getAllPartnerFight(),RoleModel.getInstance().getRoleCommon().role_id),l=RoleModel.getInstance().getRoleCommon().name,d=[];d.push(this.createDataObj("platform",o)),d.push(this.createDataObj("username",a)),d.push(this.createDataObj("nickname",l)),d.push(this.createDataObj("server_id",r)),d.push(this.createDataObj("player_id",h)),d.push(this.createDataObj("content",t));var _=this.getPraseVariable(d,!0);n.data=_,n.method=egret.URLRequestMethod.POST,s.dataFormat=egret.URLLoaderDataFormat.BINARY,s.load(n)}},e.exchangeActivationCode=function(t){if(0!=ConfigManager.isHttpPostMode){var i=AllParamObj.center_url,n=new egret.URLRequest(i+this._getActivationURL),s=new egret.URLLoader;s.addEventListener(egret.Event.COMPLETE,function(t){var i=t.target,n=e.parsePhpBack(i.data);1e3==Number(n.code)?(Message.show("兑换成功，奖励已发放至邮件"),console.log("兑换成功")):1007==Number(n.code)&&(Message.show(n.data),console.log(n.data))},this);var a=(ConfigManager.plat_id,AllParamObj.platform),o=ConfigManager.server_id.toString(),r=RoleModel.getInstance().getRoleCommon().role_id,h=t,l=[];l.push(this.createDataObj("platform",a)),l.push(this.createDataObj("server_id",o)),l.push(this.createDataObj("player_id",r)),l.push(this.createDataObj("code",h));var d=this.getPraseVariable(l,!1);n.data=d,n.method=egret.URLRequestMethod.POST,s.dataFormat=egret.URLLoaderDataFormat.BINARY,s.load(n)}},e.requestInviteList=function(t){var i=AllParamObj.center_url,n=new egret.URLRequest(i+this._inviteListURL),s=new egret.URLLoader;s.addEventListener(egret.Event.COMPLETE,function d(t){var i=t.target;i.removeEventListener(egret.Event.COMPLETE,d,this);var n=e.parsePhpBack(i.data);1e3==Number(n.code)?(1==n.data.type?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(QQEvtName.QQFRIEND_INVITELIST_UPDATE,{data:n.data})):2==n.data.type&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(QQEvtName.QQFRIEND_RANK_LIST,{data:n.data})),console.log("获取邀请列表成功")):(Message.show(n.data),console.log(n.data))},this);var a=(ConfigManager.plat_id,AllParamObj.platform),o=ConfigManager.server_id.toString(),r=RoleModel.getInstance().getRoleCommon().role_id,h=[];h.push(this.createDataObj("platform",a)),h.push(this.createDataObj("server_id",o)),h.push(this.createDataObj("player_id",r)),h.push(this.createDataObj("type",t));var l=this.getPraseVariable(h,!1);n.data=l,n.method=egret.URLRequestMethod.POST,s.dataFormat=egret.URLLoaderDataFormat.BINARY,s.load(n)},e.requestInviteGift=function(t){var i=AllParamObj.center_url,n=new egret.URLRequest(i+this._inviteGiftURL),s=new egret.URLLoader;s.addEventListener(egret.Event.COMPLETE,function(t){var i=t.target,n=e.parsePhpBack(i.data);1e3==Number(n.code)?(GameDispatcher.getInstance().dispatchEvent(new ParamEvent(QQEvtName.QQFRIEND_INVITE_GETAWARD_SUCCESS)),e.requestInviteList(1),Message.show("领取好友邀请奖励"),console.log("领取好友邀请奖励")):(Message.show(n.data),console.log(n.data))},this);var a=(ConfigManager.plat_id,AllParamObj.platform),o=ConfigManager.server_id.toString(),r=RoleModel.getInstance().getRoleCommon().role_id,h=t,l=[];l.push(this.createDataObj("platform",a)),l.push(this.createDataObj("server_id",o)),l.push(this.createDataObj("player_id",r)),l.push(this.createDataObj("openid",h));var d=this.getPraseVariable(l,!1);n.data=d,n.method=egret.URLRequestMethod.POST,s.dataFormat=egret.URLLoaderDataFormat.BINARY,s.load(n)},e.requestShowShare=function(){var e=ConfigManager.cur_channel;ShareModel.getInstance().isShowShare=window.requestShowShare(e)},e.requestShare=function(e){window.requestShare(e)},e.requestShowShareNewGift=function(){var e=ConfigManager.cur_channel;ShareModel.getInstance().isShowShare=window.requestShowShareNewGift(e)},e.getJBYXPayAttentionInfo=function(){if(ConfigManager.isyxjinbang()){var e=AllParamObj.center_url+this._subscribeURL,t=new egret.URLRequest(e),i=new egret.URLLoader,n=new Array;n.push(this.createDataObj("platform",Tools.getPageParams("platform"))),n.push(this.createDataObj("username",ConfigManager.plat_id));var s=this.getPraseVariable(n,!1);t.data=s,t.method=egret.URLRequestMethod.POST,i.dataFormat=egret.URLLoaderDataFormat.BINARY,i.addEventListener(egret.Event.COMPLETE,this.getPayAttentionComplete,this),i.load(t)}},e.getPayAttentionComplete=function(t){var i=t.target;i.removeEventListener(egret.Event.COMPLETE,this.getPayAttentionComplete,this);var n=e.parsePhpBack(i.data);1e3==n.code&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.JBYX_ATTENTION,{result:n.data}))},e.getPraseVariable=function(e,t){void 0===t&&(t=!0);var i=TimerManager.getInstance().currentServerTime;t&&e.push(this.createDataObj("time",i)),e.sort(this.isMoreThan);for(var n=new egret.URLVariables,s="",a=0;a<e.length;a++){var o=e[a],r="";a<e.length-1&&(r="&"),s+=String(o.key)+"="+encodeURIComponent(o.name)+r}var h=(new md5).hex_md5(s+this.key);return n.decode(s+"&sign="+h),n},e.getSign=function(e){e.sort(this.isMoreThan);for(var t="",i=0;i<e.length;i++){var n=e[i],s="";i<e.length-1&&(s="&"),t+=String(n.key)+"="+encodeURIComponent(n.name)+s}var a=(new md5).hex_md5(t);return a},e.parsePhpBack=function(e){var t=new egret.ByteArray(e),i=t.readUTFBytes(t.bytesAvailable),n=Base64.base64decode(i),s=JSON.parse(n);return s},e.createDataObj=function(e,t){var i=new HttpVO;return i.name=t,i.key=e,i.index=e,i},e.isMoreThan=function(e,t){for(var i=e.key,n=t.key,s=[],a=[],o=0;o<i.length;o++)s.push(i[o].charCodeAt(0));for(var r=0;r<n.length;r++)a.push(n[r].charCodeAt(0));for(var h=Math.min(s.length,a.length),l=0;h>l;l++){if(Number(s[l])>Number(a[l]))return 1;if(Number(s[l])<Number(a[l]))return-1}return s.length>a.length?1:-1},e.sendEnterGame=function(){if(ConfigManager.isGuoZi()){var t={};t.is_new=LoginModel.getInstance().isCreateRoleThisTime,t.role_level=RoleModel.getInstance().getRoleCommon().level,t.game_id=Tools.getPageParams("game_id"),t.user_id=ConfigManager.plat_id,t.role_id=RoleModel.getInstance().getRoleCommon().role_id,t.role_name=RoleModel.getInstance().getRoleCommon().name,t.server_id=ConfigManager.server_id,t.power=RoleModel.getInstance().getAllPartnerFight(),t.login_time=Math.floor((new Date).getTime()/1e3),t.member_level=VipModel.getInstance().getVIPLevel(),t.currency=RoleModel.getInstance().getRoleInfo().getGold(),t.bind_currency=0,t.point=0,t.role_create_time=0,t.last_upgrade_time=0;var i=new Array,n=e.createDataObj("is_new",t.is_new);i.push(n),n=e.createDataObj("role_level",t.role_level),i.push(n),n=e.createDataObj("game_id",t.game_id),i.push(n),n=e.createDataObj("user_id",t.user_id),i.push(n),n=e.createDataObj("role_id",t.role_id),i.push(n),n=e.createDataObj("role_name",t.role_name),i.push(n),n=e.createDataObj("server_id",t.server_id),i.push(n),n=e.createDataObj("power",t.power),i.push(n),n=e.createDataObj("login_time",t.login_time),i.push(n),n=e.createDataObj("member_level",t.member_level),i.push(n),n=e.createDataObj("currency",t.currency),i.push(n),n=e.createDataObj("bind_currency",t.bind_currency),i.push(n),n=e.createDataObj("point",t.point),i.push(n),n=e.createDataObj("role_create_time",t.role_create_time),i.push(n),n=e.createDataObj("last_upgrade_time",t.last_upgrade_time),i.push(n);var s=e.getSign(i);t.sign=s,window.sendEnterGame&&window.sendEnterGame(t)}},e._loadLossURL="/Client/load_loss.php",e._updateLoad="/Client/update_player.php",e._serverListURL="/Client/server_list",e._chargeOrderURL="/Order/",e._getGMURL="/Client/customer_service.php",e._getActivationURL="/Client/activation.php",e._getChatURL="/Client/chat.php",e._inviteListURL="/Client/inviter_list",e._inviteGiftURL="/Client/inviter_gift",e._subscribeURL="/Client/yxjb_subscribe",e.key="bzsch5_Qm!*l98&CKEY",e.jbyxCPId="1afeec910b92c4cb6c863c6ce5db43aa",e.isNeedSendToDesktop=0,e.isNeedOpenTopicCirle=0,e._curStep=0,e}();egret.registerClass(PhpHttpStatisticsManager,"PhpHttpStatisticsManager");var PopManager=function(){function e(){this._winDic=new Object,this._modalDic=new Object,this.layer=GameContent.gameLayers.windowLayer,this.topLayer=GameContent.gameLayers.topLayer,this._onOpenPopList=new Array}var t=(__define,e),i=t.prototype;return i.popUp=function(e,t){void 0===t&&(t=!1),1!=this.layer.contains(e)&&(t&&(this._bg||(this._bg=new CustomImage,this._bg.source="share_black2",this._bg.width=GameContent.stageWidth,this._bg.height=GameContent.stageHeight,this._bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBgHandler,this)),this.layer.addChild(this._bg)),this.layer.addChild(e),this._onOpenPopList.push(e),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.WINDOW_CHANGE)))},i.popBack=function(e){if(0!=this.layer.contains(e)){this.layer.removeChild(e),this._bg&&this._bg.parent&&(this._bg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBgHandler,this),this._bg.parent.removeChild(this._bg),this._bg.source=null,this._bg=null);for(var t=0;t<this._onOpenPopList.length;t++)if(this._onOpenPopList[t]==e){this._onOpenPopList.splice(t,1);break}GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.WINDOW_CHANGE))}},i.onClickBgHandler=function(){var e=this._onOpenPopList[this._onOpenPopList.length-1];e&&(e.isPop=!1)},i.setmodal=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var s=this._modalDic[e.hashCode];if(0==t)return null!=s&&this.layer.contains(s)&&this.layer.removeChild(s),void delete this._modalDic[e.hashCode];if(null==s){var a=new egret.Shape;a.graphics.beginFill(i,n),a.graphics.drawRect(0,0,GameContent.stageWidth,GameContent.stageHeight),s=a,this._modalDic[e.hashCode]=s}this.layer.addChildAt(s,this.layer.getChildIndex(e))},i.create=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=0);var n;return void 0!=this._winDic[e]?(n=this._winDic[e],this.setmodal(n,!1)):(n=new e,this._winDic[e]=n),this.topLayer.addChild(n),1==t?this.setmodal(n,!0):this.setmodal(n,!1),this.setCenter(n),n},i.remove=function(e){if(null!=e&&null!=e.parent){var t=this._modalDic[e.hashCode];null!=t&&null!=t.parent&&t.parent.removeChild(t),delete this._modalDic[e.hashCode],null!=e.parent&&e.parent.removeChild(e)}},i.setCenter=function(e){e.x=GameContent.stageWidth-e.width>>1,e.y=GameContent.stageHeight-e.height>>1},i.hasPopWindow=function(){return this._onOpenPopList.length>0},i.hasWindow=function(e){return void 0!=this._winDic[e]},i.getWindow=function(e){return 1==this.hasWindow(e)?this._winDic[e]:null},e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e}();egret.registerClass(PopManager,"PopManager");var RenderManager=function(){function e(){}var t=(__define,e);t.prototype;return e.start=function(){null==e._enterFrame&&(e._enterFrame=new egret.Sprite),e._enterFrame.hasEventListener(egret.Event.ENTER_FRAME)||e._enterFrame.addEventListener(egret.Event.ENTER_FRAME,e.onRender,e)},e.onRender=function(t){e._time=getTimer();for(var i,n=e._renderList,s=0;s<n.length;s++){i=e._renderList[s];var a=i.thisObj;i.func.apply(a)}t=null},e.add=function(t,i){if(!e.has(t,i)){var n=new Object;n.func=t,n.thisObj=i,e._renderList.push(n),e._len++,t=null,i=null}},e.remove=function(t,i){for(var n=e._renderList,s=0;s<n.length;s++){var a=n[s];if(t==a.func&&i==a.thisObj){e._len--,n.splice(s,1);break}}n=null},e.has=function(t,i){for(var n=e._renderList,s=0;s<n.length;s++){var a=n[s];if(t==a.func&&i==a.thisObj)return!0}return!1},e.getCurrentTime=function(){return this._time},e._list=new Object,e._renderList=new Array,e._len=0,e._time=0,e.frameWeight=1,e}();egret.registerClass(RenderManager,"RenderManager");var ResourceType=function(){function e(){}var t=(__define,e);t.prototype;return e.ANIMATION="ANIMATION",e.TEXTURE="TEXTURE",e.EFFECT="EFFECT",e.IMAGE="IMAGE",e.MAPTILE="MAPTILE",e}();egret.registerClass(ResourceType,"ResourceType");var SceneImageManager=function(){function e(){}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},i.showDamage=function(t,i,n,s,a,o,r){if(void 0===o&&(o=0),void 0===r&&(r=!1),!(e.imageTextNum>e.IMAGETEXT_MAX)||r){var h=new SceneImageTxt(o);h.x=n,h.y=s,h.setData(i),t.addChild(h);var l=n+140*Math.cos(a),d=s+100*Math.sin(a);egret.Tween.get(h).to({x:l,y:d},150).call(this.step1Finish,this,[h]),e.imageTextNum++}},i.step1Finish=function(e){var t=e.y-70;egret.Tween.get(e).to({y:t},800).call(this.removeTxt,this,[e])},i.removeTxt=function(t){null!=t&&(t.parent&&t.parent.removeChild(t),t.dispose(),t=null,e.imageTextNum--)},e.imageTextNum=0,e.IMAGETEXT_MAX=15,e}();egret.registerClass(SceneImageManager,"SceneImageManager");var SoundManager=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},n.play=function(e){RES.getResByUrl(e,this.playSound,this,RES.ResourceItem.TYPE_SOUND)},n.playSound=function(e){Message.show("playSound"),e.play(0,1)},t}(egret.EventDispatcher);egret.registerClass(SoundManager,"SoundManager");var SourceCache=function(e){function t(){e.call(this),this._animationLoading=!1,this._textureLoading=!1,this._cacheDic=new Object,this._loadingDic=new Object,this._animationLoadingList=new Array,this._animationLoader=new AnimationLoader,this._animationLoader.addEventListener(AnimationLoader.COMPLETE,this.animationLoadComplete,this),this._textureLoadingList=new Array,this._textureLoader=new TextureLoader,this._textureLoader.addEventListener(TextureLoader.COMPLETE,this.textureLoadComplete,this),this._effectLoadingList=new Array,this._effectLoader=new AnimationLoader,this._effectLoader.addEventListener(AnimationLoader.COMPLETE,this.effectLoadComplete,this),this._imageLoadingList=new Array,this._imageLoader=new ImageLoader,this._imageLoader.addEventListener(ImageLoader.COMPLETE,this.imageLoadComplete,this),this._mapTileLoadingList=new Array,this._mapTileLoader=new ImageLoader,this._mapTileLoader.addEventListener(ImageLoader.COMPLETE,this.mapTileLoadComplete,this),TimerManager.getInstance().add(15e3,this.checkRes,this),TimerManager.getInstance().add(3e4,this.desMsg,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.desMsg=function(){TimerManager.getInstance().clearAllMsgTimer()},n.checkRes=function(){var e;null==this._waitForDispose&&(this._waitForDispose=new Array);for(e in this._cacheDic){var t=this._cacheDic[e];if(is(t,"MovieClipData")){var i=t;0==i.getTimes()&&getTimer()-i.getLastTime()>1e4&&this._waitForDispose.indexOf(i)<0&&this._waitForDispose.push(i)}else if(is(t,"CustomTexture")){var n=t;0==n.getTimes()&&n.canGC&&this._waitForDispose.indexOf(n)<0&&this._waitForDispose.push(n)}}this._waitForDispose.length>0&&TimerManager.getInstance().add(100,this.disposeRes,this)},n.disposeRes=function(){if(0==this._waitForDispose.length)return void TimerManager.getInstance().remove(100,this.disposeRes,this);var e=this._waitForDispose.shift();if(is(e,"MovieClipData")){var t=e;0==t.getTimes()&&(t.dispose(),this.gcMovieClipData(t.url),t=null)}else if(is(e,"CustomTexture")){var i=e;0==i.getTimes()&&(i.dispose(),this.gcCusteomTexture(i.url),i=null)}e=null},n.effectLoadComplete=function(e){var i=e.data.url,n=e.data.mc;delete this._loadingDic[i],this._cacheDic[i]=n,this.dispatchEvent(new ParamEvent(t.LOAD_EFFECT_COMPLETE,{url:i,mc:n})),this._effectLoading=!1,this.loadEffect()},n.animationLoadComplete=function(e){var i=e.data.url,n=e.data.mc;delete this._loadingDic[i],this._cacheDic[i]=n,this.dispatchEvent(new ParamEvent(t.LOAD_ANIMATION_COMPLETE,{url:i,mc:n})),this._animationLoading=!1,this.loadAnimation(),this.checkLoadImage()},n.textureLoadComplete=function(e){var i=e.data.url,n=e.data.sp;delete this._loadingDic[i],this._cacheDic[i]=n,this.dispatchEvent(new ParamEvent(t.LOAD_TEXTURE_COMPLETE,{url:i,texture:n})),this._textureLoading=!1,this.loadTexture(),this.checkLoadImage()},n.imageLoadComplete=function(e){var i=e.data.url,n=e.data.ct;delete this._loadingDic[i],this.dispatchEvent(new ParamEvent(t.LOAD_PIC_COMPLETE,{url:i,pic:n})),this._imageLoading=!1,this.loadImage()},n.mapTileLoadComplete=function(e){var i=e.data.url,n=e.data.ct;delete this._loadingDic[i],this.dispatchEvent(new ParamEvent(t.LOAD_PIC_COMPLETE,{url:i,pic:n})),this._mapTileLoading=!1,this.loadMapTile()},n.loadEffect=function(){if(!this._effectLoading&&this._effectLoadingList.length>0){var e=this._effectLoadingList.shift();this._effectLoading=!0,this._effectLoader.load(e)}},n.loadAnimation=function(){if(!this._animationLoading&&this._animationLoadingList.length>0){var e=this._animationLoadingList.shift();this._animationLoading=!0,this._animationLoader.load(e)}},n.loadTexture=function(){if(!this._textureLoading&&this._textureLoadingList.length>0){var e=this._textureLoadingList.shift();this._textureLoading=!0,this._textureLoader.load(e)
}},n.loadImage=function(){if(!this._imageLoading&&this._imageLoadingList.length>0){var e=this._imageLoadingList.shift();this._imageLoading=!0,this._imageLoader.load(e)}},n.loadMapTile=function(){if(!this._mapTileLoading&&this._mapTileLoadingList.length>0){var e=this._mapTileLoadingList.shift();this._mapTileLoading=!0,this._mapTileLoader.load(e)}},t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.load=function(e,t,i){if(void 0===i&&(i=!1),null!=e&&(e=rURL(e),!this.isLoading(e)&&!this.has(e)))switch(this._loadingDic[e]=!0,t){case ResourceType.ANIMATION:i?this._animationLoadingList.unshift(e):this._animationLoadingList.push(e),this.loadAnimation();break;case ResourceType.TEXTURE:this._textureLoadingList.push(e),this.loadTexture();break;case ResourceType.EFFECT:this._effectLoadingList.push(e),this.loadEffect();break;case ResourceType.IMAGE:this._imageLoadingList.push(e),this.checkLoadImage();break;case ResourceType.MAPTILE:i?this._mapTileLoadingList.unshift(e):this._mapTileLoadingList.push(e),this.loadMapTile()}},n.isLoading=function(e){return void 0==this._loadingDic[e]||null==this._loadingDic[e]?!1:!0},n.has=function(e){return null!=this._cacheDic[e]&&void 0!=this._cacheDic[e]?!0:!1},n.getAnimation=function(e){return this._cacheDic[e]},n.getSP=function(e){return this._cacheDic[e]},n.getEffect=function(e){return this._cacheDic[e]},n.getPicTexture=function(e){return this._cacheDic[e]},n.checkLoadImage=function(){0==this._textureLoadingList.length&&0==this._animationLoadingList.length&&0==this._mapTileLoadingList.length&&this.loadImage()},n.gcRes=function(){},n.gcCusteomTexture=function(e){delete this._cacheDic[e],RES.destroyRes(e)},n.gcMovieClipData=function(e){delete this._cacheDic[e],RES.destroyRes(e+".png"),RES.destroyRes(e+".json")},n.getWaitDesContent=function(){var e="",t=this._waitForDispose;if(t)for(var i=0;i<t.length;i++){var n=t[i];e+=n.url,e+="\n"}return e+="总数是："+t.length},t.LOAD_ANIMATION_COMPLETE="LOAD_ANIMATION_COMPLETE",t.LOAD_TEXTURE_COMPLETE="LOAD_TEXTURE_COMPLETE",t.LOAD_EFFECT_COMPLETE="LOAD_EFFECT_COMPLETE",t.LOAD_PIC_COMPLETE="LOAD_PIC_COMPLETE",t}(egret.EventDispatcher);egret.registerClass(SourceCache,"SourceCache");var TestManager=function(e){function t(){e.call(this),this._lastShareTime=0,this.comment="",this._dispatch=GameDispatcher.getInstance(),this._dispatch.addEventListener(EventName.SHOW_DEBUG_CONTENT,this.showDebugView,this)}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},i(s,"lastShareTime",function(){return this._lastShareTime},function(e){this._lastShareTime=e}),s.checkIsTest=function(e){var t="";if(e.indexOf("HP0")>-1)return this._dispatch.dispatchEvent(new ParamEvent(EventName.ALL_PARTNER_HP0)),!0;if(e.indexOf("bzsc110")>-1)return t=StringUtil.substitute("Player num = {0}\n",CommonSprite.classDic.Player),t+=StringUtil.substitute("Monster num = {0}\n",CommonSprite.classDic.Monster),t+=StringUtil.substitute("DropItem num = {0}\n",CommonSprite.classDic.DropItem),t+=StringUtil.substitute("SceneImageTxt num = {0}\n",SceneImageManager.imageTextNum),t+=StringUtil.substitute("ScenePlayer num = {0}\n",SceneModel.getInstance().getPlayerNum()),t+=StringUtil.substitute("SceneMonster num = {0}\n",Scene.monsterNum),t+=StringUtil.substitute("UIEffect num = {0}\n",UIEffect.getNum()),t+=StringUtil.substitute("render num = {0}\n",RenderManager._renderList.length),t+=StringUtil.substitute("sceneRootLayer num = {0}\n",GameContent.gameLayers.getContainerChildNum(GameContent.gameLayers.sceneRootLayer)),t+=StringUtil.substitute("timer num = {0}\n",TimerManager.getInstance().getCount()),t+=StringUtil.substitute("timerForMsg num = {0}\n",TimerManager.getInstance().getCountForMsg()),t+=0==this.lastShareTime?StringUtil.substitute("last share time = {0}\n",this.lastShareTime):StringUtil.substitute("last share time = {0}\n",TimeUtil.formatTime(this.lastShareTime)),t+=StringUtil.substitute("shareLog = {0}\n",this.comment),this._dispatch.dispatchEvent(new ParamEvent(EventName.SHOW_DEBUG_CONTENT,{content:t})),!0;if(e.indexOf("closeSocket")>-1)return CustomSocket.getInstance().close(),!0;if(e.indexOf("connect")>-1)return this._dispatch.dispatchEvent(new ParamEvent(EventName.RECONNECT)),!0;if(e.indexOf("continue")>-1)return SceneModel.getInstance().dispatchEvent(new ParamEvent(SceneModel.CREATE_MONSTER_LIST_FINISH)),!0;if(e.indexOf("pid")>-1){t="";for(var i=0;i<RoleModel.getInstance().getPartnerList().length;i++){var n=RoleModel.getInstance().getPartnerList()[i];t+=StringUtil.substitute("id={0}, career={1}\n",n.parnerID,n.getCareer())}return this._dispatch.dispatchEvent(new ParamEvent(EventName.SHOW_DEBUG_CONTENT,{content:t})),!0}if(e.indexOf("gcRes")>-1)return SceneModel.getInstance().clearElement(),SourceCache.getInstance().gcRes(),this._dispatch.dispatchEvent(new ParamEvent(EventName.CLIENT_RELIVE)),!0;if(e.indexOf("CLIENT_RELIVE")>-1)return this._dispatch.dispatchEvent(new ParamEvent(EventName.CLIENT_RELIVE)),!0;if("open10700"==e)return this.isOpen10700=!0,null==this.store10700List&&(this.store10700List=[]),!0;if("close10700"==e)return this.isOpen10700=!1,this.store10700List=[],!1;if("arrowClear"==e);else{if("tcinvite"==e)return QQManager.getInstance().invite(),!0;if("tcshortcut"==e)return QQManager.getInstance().addShortCut(),!0;if("tcsharezone"==e)return QQManager.getInstance().shareToQQZone(),!0;if("tcshare"==e)return QQManager.getInstance().showShareView(),!0;if(e.indexOf("22801")>-1){var s=e.split("_"),a=parseInt(s[1]);return GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.REQUEST_22801,{id:a})),!0}if("hideMainUI"==e)return GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.GM_SHOW_MAINUI,{type:!1})),GameContent.gameLayers.iconLayer.visible=!1,!0;if("chargeTest"==e)return ChargeModel.getInstance().isShowTest=!0,!0;if("unixTime"==e){var o=RoleModel.getInstance().getRoleCommon();return PhpHttpStatisticsManager.updateLoad(o),!0}}return!1},s.showDebugView=function(e){var t=e.data.content;null==this._testView&&(this._testView=new DebugView),this._testView.isPop=!0,this._testView.setData(t)},t}(egret.EventDispatcher);egret.registerClass(TestManager,"TestManager");var TextureLoader=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.load=function(e){var t=this;this._url=e,RES.getResByUrl(e+".png",function(e){t.loadTextureComplete(e)},this,RES.ResourceItem.TYPE_IMAGE)},n.loadTextureComplete=function(e){var t=this;this._texture=e,RES.getResByUrl(this._url+".json",function(e){t.loadJsonComplete(e)},this,RES.ResourceItem.TYPE_JSON)},n.loadJsonComplete=function(e){var i=this.parseMC(e,this._texture);this.dispatchEvent(new ParamEvent(t.COMPLETE,{url:this._url,sp:i}))},n.parseMC=function(e,t){var i,n,s=e.frames,a=new CustomSpriteSheet(t);for(var o in s)i=s[o],n=o,a.createTexture(n,i.x,i.y,i.w,i.h,i.offX,i.offY,i.sourceW,i.sourceH);return a},t.COMPLETE="texture_complete",t}(egret.EventDispatcher);egret.registerClass(TextureLoader,"TextureLoader");var TimerManager=function(){function e(){this._count=0,this._countForMsg=0,this._currentServerTime=0,this._lastTimer=0,this.init()}var t=__define,i=e,n=i.prototype;return n.init=function(){this._timerDic=new Object,this._keyToTimerDic=new Object,this._funcListDic=new Object,this._keyToFuncDic=new Object},e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},n.addForMsg=function(e,t,i){if(null==this._keyToTimerDic[i]&&void 0==this._keyToTimerDic[i]){this.removeForMsg(i),this._countForMsg++,this.createTimer(e,!0),this._keyToTimerDic[i]=e,this._keyToFuncDic[i]=t;var n=this._funcListDic[e];n.push(t)}},n.add=function(e,t,i){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];this.remove(e,t,i),this._count++,this.createTimer(e);var a=this._funcListDic[e],o=new Object;o.delay=e,o.func=t,o.thisObj=i,o.parameters=n,a.push(o)},n.hasTimer=function(e){return this._keyToTimerDic[e]?!0:!1},n.remove=function(e,t,i){var n=e,s=this._funcListDic[n];if(s){for(var a=0;a<s.length;a++){var o=s[a];if(o.func==t&&o.thisObj==i){s.splice(a,1),this._count--;break}}if(0==s.length){var r=this._timerDic[n];r.stop(),r.removeEventListener(egret.TimerEvent.TIMER,this.timerHandle,this),delete this._funcListDic[n],delete this._timerDic[n]}}},n.has=function(e,t,i){var n=this._funcListDic[e];if(!n)return!1;for(var s=0;s<n.length;s++){var a=n[s];if(a.func==t&&a.thisObj==i)return!0}return!1},n.removeForMsg=function(e,t){if(void 0===t&&(t=!1),null!=this._keyToTimerDic[e]&&void 0!=this._keyToTimerDic[e]){this._countForMsg--;var i=this._keyToTimerDic[e];delete this._keyToTimerDic[e];var n=this._funcListDic[i],s=this._keyToFuncDic[e];s&&t&&s();var a=n.indexOf(s);if(a>-1&&n.splice(a,1),0==n.length){var o=this._timerDic[i];o.stop(),o.removeEventListener(egret.TimerEvent.TIMER,this.timerHandleForMsg,this),delete this._funcListDic[i],delete this._timerDic[i]}}},n.getCount=function(){return this._count},n.getCountForMsg=function(){return this._countForMsg},n.timerHandle=function(e){for(var t=e.currentTarget,i=t.delay,n=this._funcListDic,s=n[i],a=0;a<s.length;a++){var o=s[a],r=o.thisObj;o.func.apply(r,o.parameters)}},n.createTimer=function(e,t){if(void 0===t&&(t=!1),void 0==this._timerDic[e]){var i=new egret.Timer(e);t?i.addEventListener(egret.TimerEvent.TIMER,this.timerHandleForMsg,this):i.addEventListener(egret.TimerEvent.TIMER,this.timerHandle,this),i.start(),this._timerDic[e]=i}void 0==this._funcListDic[e]&&(this._funcListDic[e]=new Array)},n.timerHandleForMsg=function(e){for(var t=e.currentTarget,i=t.delay,n=this._funcListDic,s=n[i],a=0;a<s.length;a++)s[a]()},n.getTimerKey=function(){return"TimerManager_"+e.TIMER_INDEX++},n.clearAllMsgTimer=function(){for(var e in this._keyToTimerDic)this.removeForMsg(e,!0)},t(n,"currentServerTime",function(){var e=Math.ceil((getTimer()-this._lastTimer)/1e3);return this._currentServerTime+e},function(e){this._currentServerTime=e,this._lastTimer=getTimer()}),e.TIMER_INDEX=0,e}();egret.registerClass(TimerManager,"TimerManager");var TipsWordManager=function(){function e(){this._isCity=0,this.init()}var t=__define,i=e,n=i.prototype;return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},n.init=function(){this._iconObj=new Object,this._redDotsObj=new Object,this._contentSp=new CommonSprite,GameContent.gameLayers.iconLayer.addChild(this._contentSp),this._topSp=new CommonSprite,this._topSp.y=110,this._topSp.x=10,this._contentSp.addChild(this._topSp),this._leftSp=new CommonSprite,this._leftSp.x=10,this._leftSp.y=350,this._contentSp.addChild(this._leftSp),this._rightSp=new CommonSprite,this._rightSp.y=890,this._contentSp.addChild(this._rightSp),this._topList=[],this._leftList=[],this._rightList=[],RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_CHANGE,this.reDrawSubIcon,this)},n.onStageClick=function(e){void 0===e&&(e=null),GameContent.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageClick,this),this._listSp&&this._listSp.parent&&(this.disposeList(),this._listSp.parent.removeChild(this._listSp),this._clickBtn=null)},n.onBtnClick=function(e){e.stopPropagation();var t=e.currentTarget;if(t==this._clickBtn)return void this.onStageClick();if(this._clickBtn=t,t.info.is_little>0){var i,n=0,s=RoleModel.getInstance().getRoleCommon().level;for(var a in this._iconObj)this._iconObj.hasOwnProperty(a)&&(i=this._iconObj[a],s>=t.showLevel&&i.info.below==t.info.template_id&&(null==this._listSp&&(this._listSp=new CommonSprite),this._listSp.addChild(i),1==i.rows?(i.y=-80*n,this._topSp.addChild(this._listSp)):3==i.rows&&(i.y=80*n,this._rightSp.addChild(this._listSp)),n++));n>0&&(this._listSp.x=t.x,1==t.rows?(this._listSp.y=t.y,egret.Tween.get(this._listSp).to({y:t.y+80*n},100)):3==t.rows&&(this._listSp.y=t.y,egret.Tween.get(this._listSp).to({y:t.y-80*n},100)),GameContent.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageClick,this))}},n.disposeList=function(){for(var e=this._listSp.numChildren,t=0;e>t;t++)this._listSp.removeChildAt(0)},n.addWordIcon=function(e){var t=this._iconObj[e];if(null==t)switch(t=new TipsWord(e),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick,this),this._iconObj[e]=t,t.rows){case 1:this._topList.push(t);break;case 2:this._leftList.push(t);break;case 3:this._rightList.push(t)}if(this.reDrawSubIcon(),t.info&&t.info.below>0){var i=TipsWordModel.getInstance().getDataById(t.info.below);this.addWordIcon(i.iconID)}return t},n.removeIcon=function(e){if(0!=this.isHasIcon(e)){var t=this._iconObj[e];null!=t&&(null!=t&&t.parent&&t.parent.removeChild(t),-1!=this._topList.indexOf(t)&&this._topList.splice(this._topList.indexOf(t),1),-1!=this._leftList.indexOf(t)&&this._leftList.splice(this._leftList.indexOf(t),1),-1!=this._rightList.indexOf(t)&&this._rightList.splice(this._rightList.indexOf(t),1),delete this._iconObj[e],this.reDrawSubIcon())}},n.reDrawSubIcon=function(){var e=RoleModel.getInstance().getRoleCommon().level;this._topList.sort(function(e,t){return e.Location>t.Location?1:-1}),this._leftList.sort(function(e,t){return e.Location>t.Location?1:-1}),this._rightList.sort(function(e,t){return e.Location>t.Location?1:-1});for(var t,i=0,n=0,s=0,a=0;a<this._topList.length;a++)t=this._topList[a],e>=t.showLevel&&t.info&&0==t.info.below&&t.info.city==this._isCity&&(t.x=i,t.y=n,this._topSp.addChild(t),0!=s&&s%6==0?(i=0,n+=80):i+=70,s++);i=0,n=0,s=0;for(var o=0;o<this._leftList.length;o++)t=this._leftList[o],e>=t.showLevel&&t.info.city==this._isCity&&(t.x=i,t.y=n,this._leftSp.addChild(t),0!=s&&s%5==0?(i=90,n=0):n+=90,s++);i=480;for(var r=0;r<this._rightList.length;r++)t=this._rightList[r],e>=t.showLevel&&0==t.info.below&&t.info.city==this._isCity?(t.x=i,this._rightSp.addChild(t),i-=70):t.parent&&t.parent.removeChild(t)},n.isHasIcon=function(e){return void 0!=this._iconObj[e]},n.getTipsWord=function(e){return this._iconObj[e]},n.show=function(e){this._contentSp.visible=e},n.showRedDots=function(e,t){this._redDotsObj[e]=t;var i=this._iconObj[e];if(i&&(i.showRedDot=t,i.info&&i.info.below>0)){var n=TipsWordModel.getInstance().getDataById(i.info.below),s=this._iconObj[n.iconID];if(0==t){var a,o=0;for(var r in this._iconObj)this._iconObj.hasOwnProperty(r)&&(a=this._iconObj[r],a.info.below==s.info.template_id&&a.showRedDot&&o++);s.showRedDot=o>0}else s.showRedDot=!0}GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.TIPSWORD_UPDATE))},n.getCityRedDots=function(){for(var e,t=TipsWordModel.getInstance().getList(),i=0;i<t.length;i++)if(e=t[i],1==e.city&&this.isRedDots(e.iconID))return!0;return this.isRedDots(TipsWord.KING)||this.isRedDots(TipsWord.GUILD)||CityWarModel.getInstance().checkCityWarDailyReweard()},n.isRedDots=function(e){return this._redDotsObj[e]?1==this._redDotsObj[e]:!1},t(n,"isCity",function(){return 1==this._isCity},function(e){this._isCity=e?1:0,this.dispose(),this.reDrawSubIcon()}),n.dispose=function(){for(var e=this._topSp.numChildren,t=0;e>t;t++)this._topSp.removeChildAt(0);e=this._leftSp.numChildren;for(var i=0;e>i;i++)this._leftSp.removeChildAt(0);e=this._rightSp.numChildren;for(var n=0;e>n;n++)this._rightSp.removeChildAt(0)},e}();egret.registerClass(TipsWordManager,"TipsWordManager");var WeiXinSDKManager=function(){function e(){this._title="fsf",this.link="http://cdns.bzsc.9217web.com/bzsch5/",this.imgUrl=""}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},i.config=function(){var e=window.wxInfo;if(null!=e){var t=new BodyConfig;t.debug=e.debug,t.appId=e.appId,t.timestamp=e.timestamp,t.nonceStr=e.nonceStr,t.signature=e.signature,Message.show(e.debug+""),Message.show(e.appId+""),Message.show(e.timestamp+""),Message.show(e.nonceStr+""),Message.show(e.signature+""),t.jsApiList=["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","playVoice","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"],wx.config(t)}},i.shareTimeLine=function(){null==this.bodyMenuShareTimeline&&(this.bodyMenuShareTimeline=new BodyMenuShareTimeline),this.bodyMenuShareTimeline.title=this._title,this.bodyMenuShareTimeline.link=this.link,this.bodyMenuShareTimeline.imgUrl=this.imgUrl,this.bodyMenuShareTimeline.trigger=function(){alert("已点击分享朋友圈")},this.bodyMenuShareTimeline.success=function(){alert("已分享"),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ShareEvtName.CCMD15101))},this.bodyMenuShareTimeline.cancel=function(){alert("分享已取消")},this.bodyMenuShareTimeline.fail=function(e){alert("分享失败")},wx.onMenuShareTimeline(this.bodyMenuShareTimeline),alert("已注册获取“分享到朋友圈”状态事件")},i.clearTimeLine=function(){this.bodyMenuShareTimeline&&(this.bodyMenuShareTimeline=null)},e}();egret.registerClass(WeiXinSDKManager,"WeiXinSDKManager");var AchievementModel=function(){function e(){this.autoGetReward=!1,this._dataArr=[]}var t=__define,i=e,n=i.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},n.createConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_achievement"),n=i.data_achievement,s=new Object,a=0;a<n.length;a++)t=n[a],e=new AchievementVO,e.template_id=t.template_id,e.type=t.type,e.name=t.name,e.value=t.value,e.radio=t.radio,e.title=t.title,e.showList=Tools.changeToNodeDropList(t.add_item),(null==s[e.type]||void 0==s[e.type])&&(s[e.type]=[]),s[e.type].push(e);return s},n.getAchievementVO=function(e,t){(null==this._config||void 0==this._config)&&(this._config=this.createConfig());var i,n=this._config[e];if(null==n)return null;for(var s=0;s<n.length;s++)if(i=n[s],i.template_id==t)return i;return null},n.setData=function(e){if(this._dataArr.length<=0)this._dataArr=e.achievement_list;else for(var t,i,n=0;n<e.achievement_list.length;n++)t=e.achievement_list[n],i=this.getData(t.type),null==i?this._dataArr.push(t):(i.template_id=t.template_id,i.flag=t.flag);GameDispatcher.getInstance().dispatchEvent(new ParamEvent(AchievementEvtName.CCMD21100_UPDATE))},n.getData=function(e){var t;for(var i in this._dataArr)if(t=this._dataArr[i],t.type==e)return t;return null},t(n,"achievementDataArr",function(){for(var e,t=[],i=[],n=[],s=0;s<this._dataArr.length;s++)e=this._dataArr[s],1==e.flag?t.push(e):0==e.flag?i.push(e):n.push(e);var a=t.concat(i),o=a.concat(n);return o}),n.checkCanGetReward=function(){for(var e,t=0;t<this._dataArr.length;t++)if(e=this._dataArr[t],1==e.flag)return!0;return!1},e}();egret.registerClass(AchievementModel,"AchievementModel");var AchievementVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(AchievementVO,"AchievementVO");var ActivityJubaoRewardVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ActivityJubaoRewardVo,"ActivityJubaoRewardVo");var ActivityJubaoVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ActivityJubaoVo,"ActivityJubaoVo");var ActivityModel=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.getConfigOff=function(){if(!this._offObj){this._offObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_activity_fllxbc"),i=t.data_activity_fllxbc,n=void 0,s=0;s<i.length;s++)n=i[s],e=new ActivityVo,e.template_id=n.template_id,e.need_sec=n.need_sec,e.show=Tools.changeToItemData(n.show),this._offObj[e.template_id]=e}return this._offObj},n.getConfigBack=function(){if(!this._backObj){this._backObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_activity_flhg"),i=t.data_activity_flhg,n=void 0,s=0;s<i.length;s++)n=i[s],e=new ActivityVo,e.template_id=n.template_id,e.get_time=n.get_time.match(/\d+/g),e.add_item=Tools.changeToItemData(n.add_item),this._backObj[e.template_id]=e}return this._backObj},n.getConfigYY=function(){if(!this._yyObj){this._yyObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_activity_flyy"),i=t.data_activity_flyy,n=void 0,s=0;s<i.length;s++)n=i[s],e=new ActivityVo,e.template_id=n.template_id,e.type=n.type,e.order_time=n.order_time.match(/\d+/g),e.get_time=n.get_time.match(/\d+/g),e.add_item=Tools.changeToItemData(n.add_item),e.show=Tools.changeToItemData(n.show),this._yyObj[e.type]=e}return this._yyObj},n.getConfigJubao=function(){if(!this._jubaoObj){this._jubaoObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_activity_bowl"),i=t.data_activity_bowl,n=void 0,s=0;s<i.length;s++)n=i[s],e=new ActivityJubaoVo,e.template_id=n.template_id,e.type=n.type,e.rmb=n.rmb,e.android=n.android,e.ios=n.ios,e.show=n.show,this._jubaoObj[e.template_id]=e}return this._jubaoObj},n.getConfigJubaoReward=function(){if(null==this._jubaoRewardObj){this._jubaoRewardObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_activity_bowl_reward"),i=t.data_activity_bowl_reward,n=void 0,s=0;s<i.length;s++)n=i[s],e=new ActivityJubaoRewardVo,e.template_id=n.template_id,e.type=n.type,e.day=n.day,e.add_item=n.add_item,e.add_item2=Tools.changeToItemData(e.add_item),this._jubaoRewardObj[e.type]||(this._jubaoRewardObj[e.type]=[]),this._jubaoRewardObj[e.type].push(e)}return this._jubaoRewardObj},n.getConfigQQVip=function(){if(null==this._qqvipObj){this._qqvipObj=[];for(var e,t=DataManager.getInstance().getObj("data_playbar_vip"),i=t.data_playbar_vip,n=void 0,s=0;s<i.length;s++)n=i[s],e=new QQVipVo,e.template_id=n.template_id,e.charge_num=n.charge_num,e.act_desc=n.act_desc,e.add_item=n.add_item,e.add_item2=Tools.changeToItemData(e.add_item),this._qqvipObj.push(e)}return this._qqvipObj},n.getConfigQQVipShop=function(){if(null==this._qqvipShopObj){this._qqvipShopObj=[];for(var e,t=DataManager.getInstance().getObj("data_playbar_vip_shop"),i=t.data_playbar_vip_shop,n=void 0,s=0;s<i.length;s++)n=i[s],e=new QQVipShopVo,e.template_id=n.template_id,e.original_price=n.original_price,e.con_gold=n.con_gold,e.add_item=n.add_item,e.add_item2=Tools.changeToItemData(e.add_item),this._qqvipShopObj.push(e)}return this._qqvipShopObj},n.getConfigSuperVip=function(){if(null==this._supervipObj)for(var e,t=DataManager.getInstance().getObj("data_qq_survip"),i=t.data_qq_survip,n=void 0,s=0;s<i.length;s++)n=i[s],e=new SuperVipVo,e.template_id=n.template_id,e.show_vip=n.show_vip,e.show_qq=n.show_qq,e.show_word=n.show_word,e.show_award=Tools.changeToItemData(n.show_award),this._supervipObj=e;return this._supervipObj},n.getConfigSendGold=function(){for(var e,t,i=new Object,n=DataManager.getInstance().getObj("data_activity_kfsendgold"),s=n.data_activity_kfsendgold,a=0;a<s.length;a++)e=s[a],t=new ActivitySendGoldVo,t.template_id=e.template_id,t.consume=e.consume,t.superior_limit=e.superior_limit,t.lower_limit=e.lower_limit,i[t.template_id]=t;return i},n.getOffVo=function(e){return void 0===e&&(e=1),this.getConfigOff()[e]},n.getBackVo=function(e){return void 0===e&&(e=1),this.getConfigBack()[e]},n.getYYVo=function(e){return void 0===e&&(e=1),this.getConfigYY()[e]},n.getJubaoVo=function(e){return this.getConfigJubao()[e]},n.getJubaoReward=function(e){var t=this.getConfigJubaoReward()[e];return t.sort(function(e,t){return e.day>t.day?1:-1}),t},n.getBuyJubaoData=function(e){if(this.jubaoBuyData)for(var t=0;t<this.jubaoBuyData.length;t++)if(this.jubaoBuyData[t].act_id==e)return this.jubaoBuyData[t];return null},n.getQQVip=function(){return this.getConfigQQVip()},n.getQQVipVo=function(e){for(var t=this.getConfigQQVip(),i=0;i<t.length;i++)if(t[i].template_id==e)return t[i];return null},n.getQQVipShop=function(){return this.getConfigQQVipShop()},n.getSuperVipShop=function(){return this.getConfigSuperVip()},n.getSendGoldMax=function(){var e,t,i=this,n=i.getConfigSendGold();for(var s in n)n.hasOwnProperty(s)&&(e=n[s],(!t||e.lower_limit>t.lower_limit)&&(t=e));return t},t}(egret.EventDispatcher);egret.registerClass(ActivityModel,"ActivityModel");var ActivitySendGoldVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ActivitySendGoldVo,"ActivitySendGoldVo");var ActivityVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ActivityVo,"ActivityVo");var QQVipShopVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(QQVipShopVo,"QQVipShopVo");var QQVipVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(QQVipVo,"QQVipVo");var SuperVipVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(SuperVipVo,"SuperVipVo");var ArtifactModel=function(e){function t(){e.call(this),this._artifactTypeDataList=[],this._shengongDataList=[],this._shengongAwardDataList=[],this._ExnobilityDataList=[],this._ExnobilityAwardDataList=[],this._sgLv=0,this._sgExp=0,this._exnobility_lv=0,this.createDataList()}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},s.setServerData=function(e){if(null==this._serverData)this._serverData=e;else for(var t,i,n=0;n<e.artifact_list.length;n++)t=e.artifact_list[n],i=this.getArtifactServerData(t.type),null==i?this._serverData.artifact_list.push(t):i.level=t.level;this.dispatchEvent(new ParamEvent(ArtifactEvtName.ARTIFACT_UPDATE_INFO))},s.getArtifactServerData=function(e){if(!this._serverData)return null;for(var t,i=this._serverData.artifact_list.length,n=0;i>n;n++)if(t=this._serverData.artifact_list[n],t.type==e)return t},s.createDataList=function(){var e,t,i,n=DataManager.getInstance().getObj("data_artifact"),s=n.data_artifact;null==this._artifactDataList&&(this._artifactDataList=new Object);for(var a=0;a<s.length;a++)e=s[a],t=new ArtifactDataVO,t.template_id=e.template_id,t.name=e.name,t.type=e.type,t.coin_up=e.coin_up,t.exp_coin=e.exp_coin,t.show_icon=e.show_icon,t.show_source=e.show_source,t.show_word=e.show_word,t.level=e.level,t.con_item=e.con_item,i=t.con_item.match(/\d+/g),t.con_itemid=parseInt(i[0]),t.con_count=parseInt(i[1]),t.hp=e.hp,t.mp=e.mp,t.attack=e.att,t.att_def=e.att_def,t.magic_def=e.magic_def,t.crit=e.crit,t.crit_hurt=e.crit_hurt,t.crit_def=e.crit_def,t.palsy_rate=e.palsy_rate,t.palsy_def=e.palsy_def,t.hurt_up=e.hurt_up,t.hurt_def=e.hurt_def,t.hp_up=e.hp_up,(null==this._artifactDataList[t.type]||void 0==this._artifactDataList[t.type])&&(this._artifactDataList[t.type]=[]),this._artifactDataList[t.type].push(t),0==this.checkHasTypeData(t.type)&&this._artifactTypeDataList.push(t)},s.getArtifactMaxLv=function(e){null==this._artifactDataList&&this.createDataList();var t=100;if(this._artifactDataList[e]){var i=this._artifactDataList[e];t=i.length}return t},s.createShengongAwardDataList=function(){for(var e,t,i,n,s=DataManager.getInstance().getObj("data_expower_reward"),a=s.data_expower_reward,o=[],r=0;r<a.length;r++){e=a[r],t=new ShengongAwardVO,t.template_id=e.template_id,t.lose_ex=e.lose_ex,t.special=e.special,t.show_item=e.show_item,i=t.show_item.match(/\d+/g),t.show_id=parseInt(i[0]),t.show_count=parseInt(i[1]),t.show=e.show,t.add_item=e.add_item,t.addItemArr=[];var h=Tools.changeToNodeDropList(t.add_item);for(var l in h)n=new ShengongAwardGoodsVO,n.id=Number(h[l].asset_id),n.count=Number(h[l].value),t.addItemArr.push(n);t.hp=e.hp,t.mp=e.mp,t.attack=e.att,t.att_def=e.att_def,t.magic_def=e.magic_def,t.crit=e.crit,t.crit_hurt=e.crit_hurt,t.crit_def=e.crit_def,t.palsy_rate=e.palsy_rate,t.palsy_def=e.palsy_def,t.hurt_up=e.hurt_up,t.hurt_def=e.hurt_def,t.hp_up=e.hp_up,o.push(t)}return o},s.createShengongDataList=function(){for(var e,t,i=DataManager.getInstance().getObj("data_expower"),n=i.data_expower,s=[],a=0;a<n.length;a++)e=n[a],t=new ShengongVo,t.template_id=e.template_id,t.project=e.project,t.project_name=e.project_name,t.day_limit=e.day_limit,t.gain_ex=e.gain_ex,t.event=e.event,s.push(t);return s},s.createExnobilityAwardDataList=function(){for(var e,t,i,n=DataManager.getInstance().getObj("data_exnobility_reward"),s=n.data_exnobility_reward,a=[],o=0;o<s.length;o++){e=s[o],t=new ExnobilityAwardVO,t.template_id=e.template_id,t.re_project=e.re_project,t.addItemArr=[];var r=Tools.changeToNodeDropList(t.re_project);for(var h in r)i=new ExnobilityTargetVO,i.id=Number(r[h].asset_id),i.value=Number(r[h].value),t.addItemArr.push(i);t.hp=e.hp,t.mp=e.mp,t.attack=e.att,t.att_def=e.att_def,t.magic_def=e.magic_def,t.crit=e.crit,t.crit_hurt=e.crit_hurt,t.crit_def=e.crit_def,t.palsy_rate=e.palsy_rate,t.palsy_def=e.palsy_def,t.hurt_up=e.hurt_up,t.hurt_def=e.hurt_def,t.hp_up=e.hp_up,a.push(t)}return a},s.getExnobilityTaskTargetVO=function(e,t){var i,n=this.getExnobilityAwardVO(e);for(var s in n.addItemArr)if(i=n.addItemArr[s],i.id==t)return i;return null},s.createExnobilityDataList=function(){for(var e,t,i=DataManager.getInstance().getObj("data_exnobility"),n=i.data_exnobility,s=[],a=0;a<n.length;a++)e=n[a],t=new ExnobilityVO,t.template_id=e.template_id,t.project=e.project,t.project_name=e.project_name,t.event=e.event,s.push(t);return s},s.getShengongDataList=function(){return this._shengongDataList.length<=0&&(this._shengongDataList=this.createShengongDataList()),this._shengongDataList},s.getShengongAwardVO=function(e){this._shengongAwardDataList.length<=0&&(this._shengongAwardDataList=this.createShengongAwardDataList());var t;for(var i in this._shengongAwardDataList)if(t=this._shengongAwardDataList[i],Number(t.template_id)==e)return t;return null},s.getExnobilityDataList=function(){return this._ExnobilityDataList.length<=0&&(this._ExnobilityDataList=this.createExnobilityDataList()),this._ExnobilityDataList},s.getExnobilityDataVO=function(e){this._ExnobilityDataList.length<=0&&(this._ExnobilityDataList=this.createExnobilityDataList());var t;for(var i in this._ExnobilityDataList)if(t=this._ExnobilityDataList[i],Number(t.template_id)==e)return t},s.getExnobilityAwardVO=function(e){this._ExnobilityAwardDataList.length<=0&&(this._ExnobilityAwardDataList=this.createExnobilityAwardDataList());var t;for(var i in this._ExnobilityAwardDataList)if(t=this._ExnobilityAwardDataList[i],Number(t.template_id)==e)return t;return null},s.checkHasTypeData=function(e){for(var t,i=this._artifactTypeDataList.length,n=0;i>n;n++)if(t=this._artifactTypeDataList[n],t.type==e)return!0;return!1},s.getArtifactDataVO=function(e,t){var i;null==this._artifactDataList&&this.createDataList();var n=this._artifactDataList[e];if(null==n)return null;for(var s=n.length,a=0;s>a;a++)if(i=n[a],i.level==t)return i;return null},s.getArrifactTypeDataList=function(){return null==this._artifactDataList&&this.createDataList(),this._artifactTypeDataList},s.checkArrifactIsActive=function(e){if(!this._serverData)return!1;for(var t,i=this._serverData.artifact_list.length,n=0;i>n;n++)if(t=this._serverData.artifact_list[n],t.type==e&&t.level>=1)return!0;return!1},s.getArtifactsCanupOrActive=function(){for(var e,i,n,s=this.getArrifactTypeDataList(),a=s.length,o=0,r=0,h=0;a>h;h++){e=s[h],o=0;var l=this.getArtifactServerData(e.type);if(l&&(o=l.level),o<this.getArtifactMaxLv(e.type)&&(r=o+1),i=t.getInstance().getArtifactDataVO(e.type,r),i&&(n=GoodsListProxy.getInstance().findGoodNumber(i.con_itemid),n>=i.con_count))return!0}return!1},s.getArtifactsSingleCanupOrActive=function(e){var i,n,s=this.getArrifactTypeDataList(),a=(s.length,0),o=0,r=this.getArtifactServerData(e.type);return r&&(a=r.level),a<this.getArtifactMaxLv(e.type)&&(o=a+1),i=t.getInstance().getArtifactDataVO(e.type,o),i&&(n=GoodsListProxy.getInstance().findGoodNumber(i.con_itemid),n>=i.con_count)?!0:!1},s.getShengongCanLeveUp=function(){var e=this.sgLv,t=this.sgExp,i=(this.getShengongAwardVO(e),this.getShengongAwardVO(e+1));return null==i?!1:t>=i.lose_ex?!0:!1
},s.getExnobilityCanLevelup=function(){var e,i=this._exnobility_lv+1,n=t.getInstance().getExnobilityAwardVO(i);if(null==n)return!1;var s,a=n.addItemArr,o=0,r=0;for(var h in a)if(s=a[h],e=this.getExnobilityDataVO(s.id),s&&(r=s.value),o=this.getExnobilityTargetValue(e),r>o)return!1;return!0},s.getExnobilityTargetValue=function(e){var t=0;return 1==e.template_id?t=RoleModel.getInstance().getAllPartnerFight():2==e.template_id?t=BuildModel.getInstance().getStrengTolLv():3==e.template_id?t=BuildModel.getInstance().getStoneTolLv():4==e.template_id?t=FigureModel.getInstance().getTotalSpecialEquipLvByType(4):5==e.template_id?t=WingModel.getInstance().getTotalWingLv():6==e.template_id?t=FigureModel.getInstance().getTotalSpecialEquipLvByType(3):7==e.template_id&&(t=MeridianModel.getInstance().getTotalMeridianLvl()),t},i(s,"sgLv",function(){return this._sgLv},function(e){this._sgLv!=e&&(this._sgLv=e)}),i(s,"sgExp",function(){return this._sgExp},function(e){this._sgExp!=e&&(this._sgExp=e)}),i(s,"exnobility_lv",function(){return this._exnobility_lv},function(e){this._exnobility_lv!=e&&(this._exnobility_lv=e)}),t}(egret.EventDispatcher);egret.registerClass(ArtifactModel,"ArtifactModel");var ArtifactDataVO=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(PropertyVO);egret.registerClass(ArtifactDataVO,"ArtifactDataVO");var ExnobilityAwardVO=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(PropertyVO);egret.registerClass(ExnobilityAwardVO,"ExnobilityAwardVO");var ExnobilityTargetVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ExnobilityTargetVO,"ExnobilityTargetVO");var ExnobilityVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ExnobilityVO,"ExnobilityVO");var ShengongAwardGoodsVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ShengongAwardGoodsVO,"ShengongAwardGoodsVO");var ShengongAwardVO=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(PropertyVO);egret.registerClass(ShengongAwardVO,"ShengongAwardVO");var ShengongVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ShengongVo,"ShengongVo");var AutoFightModel=function(e){function t(){e.call(this),this.continueAttack=!0,this._isAutoFight=!0}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.getIsAutoFight=function(){return!0},t}(egret.EventDispatcher);egret.registerClass(AutoFightModel,"AutoFightModel");var AwakeEquipComposeVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(AwakeEquipComposeVo,"AwakeEquipComposeVo");var AwakeEquipSoulVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(AwakeEquipSoulVo,"AwakeEquipSoulVo");var AwakeModel=function(e){function t(){e.call(this),this._awakeSkillConfig=[],this.awakeEquipComposeConfig=[],this._curId=0,this.linkArr=[{level:60,round:0},{level:70,round:0},{level:80,round:0},{level:0,round:1},{level:0,round:2},{level:0,round:3},{level:0,round:4},{level:0,round:5},{level:0,round:6},{level:0,round:7},{level:0,round:8},{level:0,round:9},{level:0,round:10},{level:0,round:11},{level:0,round:12}],this.awakeEquipSoulData=new Object,this._totalScore=0}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},s.getConfig=function(){if(!this._obj){this._obj=new Object;for(var e,t=DataManager.getInstance().getObj("data_awake"),i=t.data_awake,n=void 0,s=0;s<i.length;s++)n=i[s],e=new AwakeVo,e.template_id=n.template_id,e.career=n.career,e.lv=n.lv,e.name=n.name,e.con_air=n.con_air,e.show_pic=n.show_pic,e.skill=n.skill,e.show_word=n.show_word,e.show=n.show,this._obj[e.template_id]=e,this._skillArr||(this._skillArr=[]),e.skill>0&&this._skillArr.push(e)}return this._obj},s.getValueConfig=function(){if(null==this._valueObj){this._valueObj=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_awake_career"),n=i.data_awake_career,s=0;s<n.length;s++)t=n[s],e=new SkillFeatVo,e.template_id=t.template_id,e.hp=t.hp,e.mp=t.mp,e.att=t.att,e.att_def=t.att_def,e.magic_def=t.magic_def,e.crit=t.crit,e.crit_hurt=t.crit_hurt,e.crit_def=t.crit_def,e.palsy_rate=t.palsy_rate,e.palsy_def=t.palsy_def,e.hurt_up=t.hurt_up,e.hurt_def=t.hurt_def,e.hp_up=t.hp_up,this._valueObj[e.template_id]=e}return this._valueObj},s.createAwakeSkillConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_awake_skill"),n=i.data_awake_skill,s=[],a=0;a<n.length;a++)t=n[a],e=new AwakeSkillVo,e.template_id=t.template_id,e.type=t.type,e.name=t.name,e.proList=Tools.changeToNodeProList(t.value1),e.value2=t.value2,e.value3=t.value3,e.value4=t.value4,e.value5=t.value5,s.push(e);return s},s.createAwakeEquipSoulConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_awake_soul"),n=i.data_awake_soul,s=new Object,a=0;a<n.length;a++)t=n[a],e=new AwakeEquipSoulVo,e.template_id=t.template_id,e.type=t.type,e.level=t.level,e.showList=Tools.changeToNodeDropList(t.con_item),e.grow_up=t.grow_up,(null==s[e.type]||void 0==s[e.type])&&(s[e.type]=[]),s[e.type].push(e);return s},s.createAwakeEquipComposeConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_awake_compose"),n=i.data_awake_compose,s=[],a=0;a<n.length;a++)t=n[a],e=new AwakeEquipComposeVo,e.template_id=t.template_id,e.level=t.level,e.round=t.round,e.count=t.count,e.con_coin=t.con_coin,s.push(e);return s},s.getAwakeEquipComposeVO=function(e){this.awakeEquipComposeConfig.length<=0&&(this.awakeEquipComposeConfig=this.createAwakeEquipComposeConfig());var t;for(var i in this.awakeEquipComposeConfig)if(t=this.awakeEquipComposeConfig[i],t.template_id==e)return t;return null},s.getAwakeEquipSoulVO=function(e,t){void 0===t&&(t=0),(null==this._awakeEquipSoulConfig||void 0==this._awakeEquipSoulConfig)&&(this._awakeEquipSoulConfig=this.createAwakeEquipSoulConfig());var i,n=this._awakeEquipSoulConfig[e];for(var s in n)if(i=n[s],i.level==t)return i;return null},s.getAwakeEquipComposeConfig=function(){return this.awakeEquipComposeConfig.length<=0&&(this.awakeEquipComposeConfig=this.createAwakeEquipComposeConfig()),this.awakeEquipComposeConfig},s.getAwakeSkillVO=function(e){this._awakeSkillConfig.length<=0&&(this._awakeSkillConfig=this.createAwakeSkillConfig());var t;for(var i in this._awakeSkillConfig)if(t=this._awakeSkillConfig[i],t.template_id==e)return t;return null},s.getVo=function(e){return this.getConfig()[e]},s.getValueVo=function(e){return this.getValueConfig()[e]},s.setCurId=function(e){this._curId!=e&&(this._curId=e)},s.getCurId=function(){return this._curId},s.getFight=function(){var e=this.getPropertyVO(this._curId);return PropertyUtil.calculateProFight(e)},s.getPlist=function(){var e,t=[{career:1,propertyVO:new PropertyVO},{career:2,propertyVO:new PropertyVO},{career:3,propertyVO:new PropertyVO}],i=this.getConfig();for(var n in i)e=i[n],1==e.career&&this._curId>=e.template_id?(t[0].career=1,t[0].propertyVO=this.getPropertyVO(e.template_id)):2==e.career&&this._curId>=e.template_id?(t[1].career=2,t[1].propertyVO=this.getPropertyVO(e.template_id)):3==e.career&&this._curId>=e.template_id&&(t[2].career=3,t[2].propertyVO=this.getPropertyVO(e.template_id));return t},s.getPropertyVO=function(e){var i=t.getInstance().getVo(e),n=this.getValueVo(1e3*i.career+i.lv),s=new PropertyVO;return s.setValue(PropertyVO.HP,n.hp),s.setValue(PropertyVO.ATTACK,n.att),s.setValue(PropertyVO.ATTACK_DEF,n.att_def),s.setValue(PropertyVO.MAGIC_DEF,n.magic_def),s.setValue(PropertyVO.MP,n.mp),s.setValue(PropertyVO.CRIT,n.crit),s.setValue(PropertyVO.CRIT_HURT,n.crit_hurt),s.setValue(PropertyVO.CRIT_DEF,n.crit_def),s.setValue(PropertyVO.PALSY_RATE,n.palsy_rate),s.setValue(PropertyVO.PALSY_DEF,n.palsy_def),s.setValue(PropertyVO.HURT_UP,n.hurt_up),s.setValue(PropertyVO.HURT_DEF,n.hurt_def),s.setValue(PropertyVO.HP_UP,n.hp_up),s},s.getSkill=function(e){var t,i=this.getConfig();for(var n in i)if(t=i[n],t.skill>0&&e<=t.template_id)return t;return null},s.getSkillArr=function(){return this._skillArr||this.getConfig(),this._skillArr},s.setAwakeEquipSoulData=function(e){if(!this.awakeEquipSoulData[e.partner_id]||void 0==this.awakeEquipSoulData[e.partner_id])return this.awakeEquipSoulData[e.partner_id]=e.awake_souls,void this.dispatchEvent(new ParamEvent(AwakeEquipEvtName.CCMD21600_UPDATE));for(var t,i,n=0;n<e.awake_souls.length;n++)t=e.awake_souls[n],i=this.getAwakeEquipSoulData(e.partner_id,t.type),null==i?this.awakeEquipSoulData[e.partner_id].push(t):i.level=t.level;this.dispatchEvent(new ParamEvent(AwakeEquipEvtName.CCMD21600_UPDATE))},s.getAwakeEquipSoulData=function(e,t){var i,n=this.awakeEquipSoulData[e];if(null==n||void 0==n)return null;for(var s in n)if(i=n[s],i.type==t)return i;return null},s.getIsAwake=function(e){var t,i=this.getConfig();for(var n in i)if(t=i[n],t.skill==e&&this._curId>=t.template_id)return!0;return!1},i(s,"isUpAwake",function(){if(!FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_48,!1))return!1;var e=this._curId+1,i=t.getInstance().getVo(e);return i?RoleModel.getInstance().getRoleInfo().getAwake()>=i.con_air:!1}),s.checkCanComposeAwakeEquip=function(){for(var e=(this.getAwakeEquipComposeConfig(),this.linkArr.length),t=0;e>t;t++)if(1==this.checkCanComposeAwakeEquipByLvlOrRound(this.linkArr[t].level,this.linkArr[t].round))return!0;return!1},s.checkCanComposeAwakeEquipByLvlOrRound=function(e,i){for(var n,s,a,o=EquipmentVO.AWAKELEQUIP_GRID.length,r=0;o>r;r++)if(n=GoodsListProxy.getInstance().getAwakeEquipVOByLevelAndRoundAndSubtype(e,i,EquipmentVO.AWAKELEQUIP_GRID[r]),s=t.getInstance().getAwakeEquipComposeVO(n.template_id),null!=s&&(a=GoodsListProxy.getInstance().getAwakeEquipByLevelAndRound(s.level,s.round),a.length>0&&a.length>=s.count))return!0;return!1},s.checkAwakeEquipSoulCanUp=function(){for(var e,t=RoleModel.getInstance().getPartnerList(),i=t.length,n=0;i>n;n++)if(e=t[n],1==this.checkAwakeEquipSoulCanUpByPid(e.parnerID))return!0;return!1},s.checkAwakeEquipSoulCanUpByPid=function(e){for(var t=EquipmentVO.AWAKELEQUIP_GRID.length,i=0,n=0;t>n;n++)if(i=EquipmentVO.AWAKELEQUIP_GRID[n],1==this.checkAwakeEquipSoulCanUpByPidAndType(e,i))return!0;return!1},s.checkAwakeEquipSoulCanUpByPidAndType=function(e,i){var n=t.getInstance().getAwakeEquipSoulData(e,i),s=0,a=0;n&&(s=n.level),a=s+1;var o=(t.getInstance().getAwakeEquipSoulVO(i,s),t.getInstance().getAwakeEquipSoulVO(i,s+1));if(null==o)return!1;var r=GoodsListProxy.getInstance().findGoodNumber(o.showList[0].asset_id);return r>=o.showList[0].value?!0:!1},s.createAwakeScoreConfig=function(){var e,t=DataManager.getInstance().getObj("data_awake_class"),i=t.data_awake_class;this.scoreArr=[];for(var n=0;n<i.length;n++)e=new AwakeScoreVo,e.template_id=i[n].template_id,e.min=i[n].min,e.max=i[n].max,e.up=i[n].up,this.scoreArr.push(e)},s.getUpByScore=function(e){this.scoreArr||this.createAwakeScoreConfig();for(var t=0;t<this.scoreArr.length;t++){var i=this.scoreArr[t];if(i.min<=e&&e<=i.max)return i.up/100}return 0},s.getUpByLevel=function(e){this.scoreArr||this.createAwakeScoreConfig();for(var t=0;t<this.scoreArr.length;t++){var i=this.scoreArr[t];if(i.template_id==e)return i.up/100}return 0},s.getLevelByScore=function(){this.scoreArr||this.createAwakeScoreConfig();for(var e=this.getAwakeTotalScore(),t=0;t<this.scoreArr.length;t++){var i=this.scoreArr[t];if(i.min<=e&&e<=i.max)return i.template_id}return 0},s.getNextByScore=function(e){this.scoreArr||this.createAwakeScoreConfig();for(var t=0;t<this.scoreArr.length;t++){var i=this.scoreArr[t];if(i.min>e)return i}return null},s.getAwakeTotalScore=function(){return this._totalScore},s.setAwakeTotalScore=function(e){this._totalScore=e,this.dispatchEvent(new ParamEvent(t.UPDATE_AWAKE_SCORE))},t.UPDATE_AWAKE_SCORE="UPDATE_AWAKE_SCORE",t}(egret.EventDispatcher);egret.registerClass(AwakeModel,"AwakeModel");var AwakeScoreVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(AwakeScoreVo,"AwakeScoreVo");var AwakeSkillVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(AwakeSkillVo,"AwakeSkillVo");var AwakeVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(AwakeVo,"AwakeVo");var BossModel=function(e){function t(){e.call(this),this.currentPersonBoss=0,this.currentPeopleBossID=0,this.guildBossID=0,this.kfBossID=0,this.BossID_home=0,this.BossID_elite=0,this.BossID_field=0,this.BossGuildCallArr=[],this.isShowBossGuildCall=!0,this.init()}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.init=function(){},t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},s.setMeetBossInfo=function(e){this._meetBossInfo=e},s.getMeetBossInfo=function(){return this._meetBossInfo},s.getMeetBossConfig=function(e){if(null==this._meetBossConfigDic){this._meetBossConfigDic=new Object;for(var t,i,n=DataManager.getInstance().getObj("data_boss_meet"),s=n.data_boss_meet,a=0;a<s.length;a++)i=s[a],t=new BossMeetVo,t.id=i.template_id,t.bossID=i.boss_id,t.goodsList=Tools.changeToNodeDropList(i.show_award),this._meetBossConfigDic[t.id]=t}return this._meetBossConfigDic[e]},s.addMeetBoss=function(){var e=this.getMeetBossInfo();if(e&&e.template_id>0){var i=t.getInstance().getMeetBossConfig(e.template_id),n=SceneModel.getInstance().makeMonsterVo(i.bossID);n.useType=MonsterVO.MEETBOSS;var s=SceneModel.getInstance().getSceneCenter();n.x=s.x,n.y=s.y,n.dropInfo=Tools.convertDropList(e.drop_list),SceneModel.getInstance().addMonster(n)}},s.getBossPersonalConfig=function(){if(null==this._bossConfigDic){this._bossConfigDic=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_boss_single"),n=i.data_boss_single,s=0;s<n.length;s++)t=n[s],e=new BossVo,e.template_id=t.template_id,e.boss_id=t.boss_id,e.boss_name=t.boss_name,e.open_level=t.open_level,e.open_round=t.open_round,e.time=t.time,e.itemList=Tools.changeToItemData(t.show_award),e.boss_scene_id=t.boss_scene_id,e.boss_pos=t.boss_pos,this._bossConfigDic[e.boss_id]=e}return this._bossConfigDic},s.getBossAllConfig=function(){if(null==this._bossAllConfigDic){this._bossAllConfigDic=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_boss_all"),n=i.data_boss_all,s=0;s<n.length;s++)t=n[s],e=new BossVo,e.template_id=t.template_id,e.boss_id=t.boss_id,e.boss_name=t.boss_name,e.open_level=t.open_level,e.open_round=t.open_round,e.revive_sec=t.revive_sec,e.itemList=Tools.changeToItemData(t.show_award),e.boss_scene_id=t.boss_scene_id,e.setBossPos(t.boss_pos),e.setRandomPath(t.random_birth),this._bossAllConfigDic[e.template_id]=e}return this._bossAllConfigDic},s.getBossRoundConfig=function(){if(null==this._bossRoundConfigDic){this._bossRoundConfigDic=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_boss_round"),n=i.data_boss_round,s=0;s<n.length;s++)t=n[s],e=new BossRoundVo,e.template_id=t.template_id,e.boss_id=t.boss_id,e.boss_name=t.boss_name,e.min_round=t.min_round,e.max_round=t.max_round,e.boss_scene_id=t.boss_scene_id,e.setBossPos(t.boss_pos),e.itemList=Tools.changeToItemData(t.show_award),e.kill_award=Tools.changeToItemData(t.kill_award),e.luck_award=Tools.changeToItemData(t.luck_award),e.setRandomPath(t.random_birth),this._bossRoundConfigDic[e.template_id]=e}return this._bossRoundConfigDic},s.getBossRoundRewardConfig=function(){if(null==this._bossRoundRewardConfig){this._bossRoundRewardConfig=[];for(var e,t,i=DataManager.getInstance().getObj("data_boss_roundaward"),n=i.data_boss_roundaward,s=0;s<n.length;s++)t=n[s],e=new BossRoundRewardVo,e.template_id=t.template_id,e.boss_id=t.boss_id,e.type=t.type,e.min=t.min,e.max=t.max,e.itemList=Tools.changeToItemData(t.add_item),this._bossRoundRewardConfig.push(e)}return this._bossRoundRewardConfig},s.getBossGuildConfig=function(){if(null==this._bossGuildConfigDic){this._bossGuildConfigDic=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_boss_guild"),n=i.data_boss_guild,s=0;s<n.length;s++)t=n[s],e=new BossVo,e.template_id=t.template_id,e.boss_id=t.boss_id,e.boss_name=t.boss_name,e.open_level=t.open_level,e.open_round=t.open_round,e.itemList=Tools.changeToItemData(t.show_award),e.boss_scene_id=t.boss_scene_id,e.setBossPos(t.boss_pos),e.setRandomPath(t.random_birth),this._bossGuildConfigDic[e.template_id]=e}return this._bossGuildConfigDic},s.getBossKFAwakeConfig=function(){if(null==this._bossAwakeConfigDic){this._bossAwakeConfigDic=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_kfboss_awake"),n=i.data_kfboss_awake,s=0;s<n.length;s++)t=n[s],e=new BossKfbossAwakeVo,e.template_id=t.template_id,e.boss_id=t.boss_id,e.boss_name=t.boss_name,e.open_level=t.open_level,e.open_round=t.open_round,e.itemList=Tools.changeToItemData(t.show_award),e.boss_scene_id=t.boss_scene_id,e.setBossPos(t.boss_pos),e.setRandomPath(t.random_birth),e.limit_class=t.limit_class,this._bossAwakeConfigDic[e.template_id]=e}return this._bossAwakeConfigDic},s.getBossHomeConfig=function(){if(null==this._homeDic){this._homeDic=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_boss_home"),n=i.data_boss_home,s=0;s<n.length;s++)t=n[s],e=new BossVo,e.template_id=t.template_id,e.boss_id=t.boss_id,e.type=t.type,e.boss_name=t.boss_name,e.open_level=t.open_level,e.open_round=t.open_round,e.itemList=Tools.changeToItemData(t.show_award),e.boss_scene_id=t.boss_scene_id,e.setBossPos(t.boss_pos),e.setRandomPath(t.random_birth),this._homeDic[e.template_id]=e}return this._homeDic},s.getBossHomeTypeConfig=function(){if(null==this._homeTypeDic){this._homeTypeDic=new Object,this._homeTypeArr=[];for(var e,t,i=DataManager.getInstance().getObj("data_boss_home_type"),n=i.data_boss_home_type,s=0;s<n.length;s++)t=n[s],e=new BossHomeVo,e.template_id=t.template_id,e.live_time=t.live_time,e.refresh_cd=t.refresh_cd,e.flee_cd=t.flee_cd,e.vip=t.vip,e.open_level=t.open_level,e.open_round=t.open_round,e.con_item=Tools.changeToItemData(t.con_item),this._homeTypeDic[e.template_id]=e,this._homeTypeArr.push(e)}return this._homeTypeDic},s.getBossEliteConfig=function(){if(null==this._eliteDic){this._eliteDic=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_boss_elite"),n=i.data_boss_elite,s=0;s<n.length;s++)t=n[s],e=new BossEliteVo,e.template_id=t.template_id,e.boss_id=t.boss_id,e.live_time=t.live_time,e.refresh_cd=t.refresh_cd,e.flee_cd=t.flee_cd,e.con_item=Tools.changeToItemData(t.con_item),e.boss_name=t.boss_name,e.open_level=t.open_level,e.open_round=t.open_round,e.itemList=Tools.changeToItemData(t.show_award),e.boss_scene_id=t.boss_scene_id,e.setBossPos(t.boss_pos),e.setRandomPath(t.random_birth),this._eliteDic[e.template_id]=e}return this._eliteDic},s.getBossFieldConfig=function(){if(null==this._fieldDic){this._fieldDic=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_boss_field"),n=i.data_boss_field,s=0;s<n.length;s++)t=n[s],e=new BossFieldVo,e.template_id=t.template_id,e.boss_id=t.boss_id,e.live_time=t.live_time,e.refresh_cd=t.refresh_cd,e.flee_cd=t.flee_cd,e.boss_name=t.boss_name,e.open_level=t.open_level,e.open_round=t.open_round,e.itemList=Tools.changeToItemData(t.show_award),e.boss_scene_id=t.boss_scene_id,e.setBossPos(t.boss_pos),e.setRandomPath(t.random_birth),this._fieldDic[e.template_id]=e}return this._fieldDic},s.getBossRoundTypeReward=function(e,t){for(var i,n=0;n<this.getBossRoundRewardConfig().length;n++)if(i=this._bossRoundRewardConfig[n],i.boss_id==e&&i.type==t)return i;return null},s.getBossPersonalList=function(){var e,t=[],i=this.getBossPersonalConfig(),n=[],s=[];for(var a in i)i.hasOwnProperty(a)&&(e=i[a],RoleModel.getInstance().getRoleCommon().level>=e.open_level&&RoleModel.getInstance().getRoleCommon().round>=e.open_round?e.time>DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_5,e.template_id)?t.push(e):n.push(e):s.push(e));return t.concat(n).concat(s)},s.getBossAllList=function(){var e,t=[],i=this.getBossAllConfig(),n=[],s=[];for(var a in i)i.hasOwnProperty(a)&&(e=i[a],this.getBossAllDataById(e.template_id)&&(RoleModel.getInstance().getRoleCommon().level>=e.open_level&&RoleModel.getInstance().getRoleCommon().round>=e.open_round?this.getBossAllDataById(e.template_id).hp_rate>0?t.push(e):n.push(e):s.push(e)));return t.concat(n).concat(s)},s.getBossAllDataById=function(e){return this._bossData[e]},s.setBossAllTipStauts=function(e){this._bossAllTipsStauts||(this._bossAllTipsStauts=new Object);for(var t,i=0;i<e.length;i++)t=e[i],this._bossAllTipsStauts[t.template_id]=t.flag>0},s.getBossAllTipStautsById=function(e){return this._bossAllTipsStauts?this._bossAllTipsStauts[e]:!0},s.setBossDamageInfo=function(e){this._bossDamageInfo=e,this.dispatchEvent(new ParamEvent(t.UPDATE_BOSS_DAMAGEINFO))},s.getBossDamageInfo=function(){return this._bossDamageInfo},s.changePeopleToBossDamageVo=function(e){var t=new BossDamageInfo;t.bossID=e.boss_id,t.hp=e.hp,t.maxHp=e.max_hp,t.myHit=e.my_hit,t.hitsList=new Array;for(var i,n=0;n<e.boss_all_hits.length;n++)i=new BossHitInfo,i.hit=e.boss_all_hits[n].hit,i.name=e.boss_all_hits[n].name,i.rank=e.boss_all_hits[n].ctime,t.hitsList.push(i);return t},s.changeRoundToBossDamageVo=function(e){var t=new BossDamageInfo;t.bossID=e.boss_id,t.hp=e.hp,t.maxHp=e.max_hp,t.shieldRate=e.shield_rate,t.myHit=e.my_hit,t.hitsList=new Array;for(var i,n=0;n<e.boss_round_hits.length;n++)i=new BossHitInfo,i.hit=e.boss_round_hits[n].hit,i.name=e.boss_round_hits[n].name,i.rank=e.boss_round_hits[n].ctime,t.hitsList.push(i);return t},s.changeKFBossToBossDamageVo=function(e){var t=new BossDamageInfo;t.bossID=e.boss_id,t.hp=e.hp,t.maxHp=e.max_hp,t.myHit=e.my_hit,t.hitsList=new Array;for(var i,n=0;n<e.kfboss_awake_hits.length;n++)i=new BossHitInfo,i.hit=e.kfboss_awake_hits[n].hit,i.name=e.kfboss_awake_hits[n].name,i.rank=e.kfboss_awake_hits[n].ctime,t.hitsList.push(i);return t},s.changeGuildBossToBossDamageVo=function(e){var t=new BossDamageInfo;return t.bossID=e.boss_id,t.hp=e.hp,t.maxHp=e.max_hp,t.hitsList=new Array,t.myHit=0,t},s.changeNoHitListBossDamageVo=function(e,t,i){var n=new BossDamageInfo;return n.bossID=e,n.hp=t,n.maxHp=i,n.hitsList=new Array,n.myHit=0,n},s.change10700ToBssDamageVo=function(e){var t=new BossDamageInfo,i=e.battle_result[0];if(null==i)return t;var n=SceneModel.getInstance().getMonsterVo(i.obj_id);return null==n?t:(t.bossID=n.typeId,t.hp=i.hp,t.maxHp=i.max_hp,t)},i(s,"isHasBoss",function(){return this.isHasBossPersonal?!0:this.isHasBossAll?!0:!1}),i(s,"isHasBossPersonal",function(){for(var e,t=this.getBossPersonalList(),i=0;i<t.length;i++){e=t[i];var n=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_5,e.template_id);if(e.time>n&&RoleModel.getInstance().getRoleCommon().level>=e.open_level&&RoleModel.getInstance().getRoleCommon().round>=e.open_round)return!0}return!1}),i(s,"isHasBossAll",function(){if(null==this.bossAllInfo)return!1;if(this.bossAllInfo.bat_num>=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_46).value))return!1;for(var e,t,i=this.getBossAllList(),n=0;n<i.length;n++)if(e=i[n],t=this.getBossAllDataById(e.template_id),t&&t.hp_rate>0&&RoleModel.getInstance().getRoleCommon().level>=e.open_level&&RoleModel.getInstance().getRoleCommon().round>=e.open_round)return!0;return!1}),s.setBossAllData=function(e){this._bossData||(this._bossData=new Object);for(var t,i=0;i<e.length;i++)t=e[i],this._bossData[t.template_id]=t},s.getRoundVO=function(e){return this.getBossRoundConfig()[e]},s.setRoundData=function(e){this._bossRoundInfo=e},s.getRoundHitData=function(e){var t=[];if(this._bossRoundInfo)for(var i=0;i<this._bossRoundInfo.length;i++)this._bossRoundInfo[i].template_id==e&&(t=this._bossRoundInfo[i].boss_round_hits);return t},s.getRoundRewardVO=function(e,t){for(var i,n=[],s=this.getBossRoundRewardConfig(),a=0;a<s.length;a++)i=s[a],i.boss_id==e&&i.type==t&&n.push(i);return n},s.getCurrentPeopleBossVo=function(){var e,t;for(e in this.getBossAllConfig())if(t=this._bossAllConfigDic[e],t.template_id==this.currentPeopleBossID)return t;return null},s.getCurrentGuildBoss=function(){var e=this.getBossGuildConfig();return e?e[this.guildBossID]:null},s.getCurrentRoundBossVo=function(){var e,t,i=RoleModel.getInstance().getRoleCommon().round;for(e in this.getBossRoundConfig())if(t=this._bossRoundConfigDic[e],t.min_round<=i&&i<=t.max_round)return t;return null},s.changeRoundBossToCommon=function(e){var t=new BossVo;return t.boss_id=e.boss_id,t.boss_name=e.boss_name,t.boss_pos=e.boss_pos,t.randomPath=e.randomPath,t},s.changeCWOutToBossDamageVo=function(e){var t=new BossDamageInfo;t.bossID=e.boss_id,t.hp=e.hp,t.maxHp=e.max_hp,t.myHit=e.my_hit,t.hitsList=new Array;for(var i,n=0;n<e.boss_round_hits.length;n++)i=new BossHitInfo,i.hit=e.boss_round_hits[n].hit,i.name=e.boss_round_hits[n].name,i.rank=e.boss_round_hits[n].ctime,t.hitsList.push(i);return t},s.setBossGuildData=function(e){this._bossGuildData||(this._bossGuildData=new Object);for(var t,i=0;i<e.length;i++)t=e[i],this._bossGuildData[t.template_id]=t},s.getBossGuildDataById=function(e){return this._bossGuildData[e]},s.getBossGuildList=function(){var e,t,i=[],n=this.getBossGuildConfig(),s=[],a=[];for(var o in n)n.hasOwnProperty(o)&&(e=n[o],t=this.getBossGuildDataById(e.template_id),t&&(RoleModel.getInstance().getRoleCommon().level>=e.open_level&&RoleModel.getInstance().getRoleCommon().round>=e.open_round?t.hp_rate>0?i.push(e):s.push(e):a.push(e)));return i.concat(s).concat(a)},s.setBossAwakeData=function(e){this._bossAwakeData||(this._bossAwakeData=new Object);for(var t,i=0;i<e.length;i++)t=e[i],this._bossAwakeData[t.template_id]=t},s.getBossAwakeDataById=function(e){return this._bossAwakeData?this._bossAwakeData[e]:null},s.getBossAwakeList=function(){var e,t,i=[],n=this.getBossKFAwakeConfig(),s=[],a=[];for(var o in n)n.hasOwnProperty(o)&&(e=n[o],t=this.getBossAwakeDataById(e.template_id),t?RoleModel.getInstance().getRoleCommon().level>=e.open_level&&RoleModel.getInstance().getRoleCommon().round>=e.open_round?t.hp_rate>0?i.push(e):s.push(e):a.push(e):i.push(e));return i.concat(s).concat(a)},s.getBossAwakeVo=function(e){return this.getBossKFAwakeConfig()[e]},s.setBossHomeData=function(e){this._bossHomeData||(this._bossHomeData=new Object);for(var t,i=0;i<e.length;i++)t=e[i],this._bossHomeData[t.template_id]=t},s.getBossHomeDataById=function(e){return this._bossHomeData[e]},s.getBossHomeCDByType=function(e){var t=this;if(t.bossHomeCD)for(var i,n=0;n<t.bossHomeCD.enter_last_time.length;n++)if(i=t.bossHomeCD.enter_last_time[n],i.type==e)return i.num;return 0},s.getBossHomeList=function(e){void 0===e&&(e=0);var t,i,n=[],s=this.getBossHomeConfig(),a=[],o=[];for(var r in s)s.hasOwnProperty(r)&&(t=s[r],i=this.getBossHomeDataById(t.template_id),t.type!=e&&0!=e||!i||(RoleModel.getInstance().getRoleCommon().level>=t.open_level&&RoleModel.getInstance().getRoleCommon().round>=t.open_round?i.last_time>0?n.push(t):a.push(t):o.push(t)));return n.sort(this.sortBoss),a.sort(this.sortBoss),n.concat(a).concat(o)},s.sortBoss=function(e,t){var i=0;return e.open_round>t.open_round?i=-1:e.open_round<t.open_round?i=1:e.open_level>t.open_level?i=-1:e.open_level<t.open_level&&(i=1),i},s.getBossHomeTypeList=function(){return this._homeTypeArr||this.getBossHomeTypeConfig(),this._homeTypeArr},s.getBossHomeVo=function(e){return this.getBossHomeConfig()[e]},s.getBossHomeTypeVo=function(e){return this.getBossHomeTypeConfig()[e]},s.setBossEliteData=function(e){this._bossEliteData||(this._bossEliteData=new Object);for(var t,i=0;i<e.length;i++)t=e[i],this._bossEliteData[t.template_id]=t},s.getBossEliteDataById=function(e){return this._bossEliteData[e]},s.getBossEliteList=function(){var e,t=[],i=this.getBossEliteConfig(),n=[],s=[];for(var a in i)i.hasOwnProperty(a)&&(e=i[a],this.getBossEliteDataById(e.template_id)&&(RoleModel.getInstance().getRoleCommon().level>=e.open_level&&RoleModel.getInstance().getRoleCommon().round>=e.open_round?this.getBossEliteDataById(e.template_id).last_time>0?t.push(e):n.push(e):s.push(e)));return t.sort(this.sortBoss),n.sort(this.sortBoss),t.concat(n).concat(s)},s.getBossEliteVo=function(e){return this.getBossEliteConfig()[e]},s.setBossFieldData=function(e){this._bossFieldData||(this._bossFieldData=new Object);for(var t,i=0;i<e.length;i++)t=e[i],this._bossFieldData[t.template_id]=t},s.getBossFieldDataById=function(e){return this._bossFieldData[e]},s.getBossFieldList=function(){var e,t,i=[],n=this.getBossFieldConfig(),s=[],a=[];for(var o in n)n.hasOwnProperty(o)&&(e=n[o],t=this.getBossFieldDataById(e.template_id),t&&(RoleModel.getInstance().getRoleCommon().level>=e.open_level&&RoleModel.getInstance().getRoleCommon().round>=e.open_round?t.last_time>0?i.push(e):s.push(e):a.push(e)));return i.sort(this.sortBoss),s.sort(this.sortBoss),i.concat(s).concat(a)},s.getBossFieldVo=function(e){return this.getBossFieldConfig()[e]},s.setBossGuildCall=function(e){for(var t,i=this,n=0;n<i.BossGuildCallArr.length;n++)if(t=i.BossGuildCallArr[n],t.name==e.name)return void(e.is_show>0?i.BossGuildCallArr[n]=e:i.BossGuildCallArr.splice(n,1));e.is_show>0&&i.BossGuildCallArr.push(e)},t.UPDATE_BOSS_DAMAGEINFO="UPDATE_BOSS_DAMAGEINFO",t}(egret.EventDispatcher);egret.registerClass(BossModel,"BossModel");var BossDamageInfo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(BossDamageInfo,"BossDamageInfo");var BossVo=function(){function e(){}var t=(__define,e),i=t.prototype;return i.setRandomPath=function(e){this.randomPath=new Array;for(var t,i,n,s=e.match(/\d+/g),a=0;a<s.length;a+=2)i=parseInt(s[a]),n=parseInt(s[a+1]),t=new Point,t.x=i,t.y=n,this.randomPath.push(t)},i.setBossPos=function(e){var t=e.match(/\d+/g);this.boss_pos=new Point,this.boss_pos.x=parseInt(t[0]),this.boss_pos.y=parseInt(t[1])},e}();egret.registerClass(BossVo,"BossVo");var BossEliteVo=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(BossVo);egret.registerClass(BossEliteVo,"BossEliteVo");var BossFieldVo=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(BossVo);egret.registerClass(BossFieldVo,"BossFieldVo");var BossHitInfo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(BossHitInfo,"BossHitInfo");var BossHomeVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(BossHomeVo,"BossHomeVo");var BossKfbossAwakeVo=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(BossVo);egret.registerClass(BossKfbossAwakeVo,"BossKfbossAwakeVo");var BossMeetVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(BossMeetVo,"BossMeetVo");var BossRoundRewardVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(BossRoundRewardVo,"BossRoundRewardVo");var BossRoundVo=function(){function e(){}var t=(__define,e),i=t.prototype;return i.setRandomPath=function(e){this.randomPath=new Array;for(var t,i,n,s=e.match(/\d+/g),a=0;a<s.length;a+=2)i=parseInt(s[a]),n=parseInt(s[a+1]),t=new Point,t.x=i,t.y=n,this.randomPath.push(t)},i.setBossPos=function(e){var t=e.match(/\d+/g);this.boss_pos=new Point,this.boss_pos.x=parseInt(t[0]),this.boss_pos.y=parseInt(t[1])},e}();egret.registerClass(BossRoundVo,"BossRoundVo");var BuildModel=function(e){function t(){e.call(this),this._strengthenObj=new Object,this._strengData=new Object,this._stoneObj=new Object,this._stoneData=new Object,this._soulObj=new Object,this._soulData=new Object,this._starData=new Object,this._runeObj=new Object,this._runeData=new Object,this.createStrengthen(),this.createStone(),this.createSoul(),this.createRune()}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},s.createRune=function(){for(var e,t,i=DataManager.getInstance().getObj("data_forge_awake"),n=i.data_forge_awake,s=0;s<n.length;s++)e=n[s],t=new BuildRuneVo,t.template_id=e.template_id,t.name=e.name,t.att_id=e.att_id,t.level=e.level,t.stone_att=e.stone_att,t.type_id=e.type_id,t.show=e.show.match(/\d+/g),t.show_att=e.show_att.match(/\d+/g),""!=e.con_item&&"0"!=e.con_item&&null!=e.con_item&&(t.con_item=Tools.changeToItemData(e.con_item)),this._runeObj[t.type_id]||(this._runeObj[t.type_id]=new Object),this._runeObj[t.type_id][t.level]=t
},s.createStrengthen=function(){for(var e,t,i=DataManager.getInstance().getObj("data_forge_streng"),n=i.data_forge_streng,s=0;s<n.length;s++)e=n[s],t=new BuildStrengthenVo,t.template_id=e.template_id,t.type_id=e.type_id,t.type=e.type,t.att_id=e.att_id,t.value1=e.value1,t.value2=e.value2,t.value3=e.value3,t.value4=e.value4,t.value5=e.value5,t.value6=e.value6,this._strengthenObj[t.type_id]||(this._strengthenObj[t.type_id]=[]),this._strengthenObj[t.type_id].push(t)},s.createStone=function(){for(var e,t,i=DataManager.getInstance().getObj("data_forge_stone"),n=i.data_forge_stone,s=0;s<n.length;s++)e=n[s],t=new BuildStoneVo,t.template_id=e.template_id,t.name=e.name,t.att_id=e.att_id,t.level=e.level,t.stone_att=e.stone_att,t.type_id=e.type_id,t.show=e.show.match(/\d+/g),t.show_att=e.show_att.match(/\d+/g),""!=e.con_item&&"0"!=e.con_item&&null!=e.con_item&&(t.con_item=Tools.changeToItemData(e.con_item)),this._stoneObj[t.type_id]||(this._stoneObj[t.type_id]=new Object),this._stoneObj[t.type_id][t.level]=t},s.createSoul=function(){for(var e,t,i=DataManager.getInstance().getObj("data_forge_soul"),n=i.data_forge_soul,s=0;s<n.length;s++)e=n[s],t=new BuildSoulVo,t.template_id=e.template_id,t.type_id=e.type_id,t.type=e.type,t.att_id=e.att_id,t.value1=e.value1,t.value2=e.value2,t.value3=e.value3,t.value4=e.value4,t.value5=e.value5,t.value6=e.value6,this._soulObj[t.type_id]||(this._soulObj[t.type_id]=[]),this._soulObj[t.type_id].push(t)},s.getStarConfig=function(){if(null==this._starlObj){this._starlObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_forge_star"),i=t.data_forge_star,n=void 0,s=0;s<i.length;s++)n=i[s],e=new BuildStarVo,e.template_id=n.template_id,e.slot=n.slot,e.lv=n.lv,e.attr_up=n.attr_up,e.con_coin=n.con_coin,e.con_item=n.con_item,""!=e.con_item&&"0"!=e.con_item&&null!=e.con_item&&(e.con_item2=Tools.changeToItemData(e.con_item)),this._starlObj[e.slot]||(this._starlObj[e.slot]=new Object),this._starlObj[e.slot][e.lv]=e}return this._starlObj},s.getStrengVo=function(e){return this._strengthenObj[e]},s.setStrengData=function(e,t){for(var i=0,n=e;i<n.length;i++){var s=n[i];this._strengData[t]||(this._strengData[t]=new Object),this._strengData[t][s.type]=s.level}},s.getStrengLevelByType=function(e,t){return this._strengData[t]&&this._strengData[t][e]?this._strengData[t][e]:0},s.getStrengMinType=function(e){for(var t=1,i=0,n=1;8>=n;n++)this._strengData[e]&&i<=this._strengData[e][n]&&(i=this._strengData[e][n],t=n);return i>0&&(t=8==t?1:t+1),t},s.getStrengTolLv=function(){var e=0,t=RoleModel.getInstance().getPartnerList();if(t)for(var i,n=0;n<t.length;n++)if(i=t[n],this._strengData[i.parnerID])for(var s=1;8>=s;s++)this._strengData[i.parnerID][s]&&(e+=Number(this._strengData[i.parnerID][s]));return e},s.getStoneTolLv=function(){var e=0,t=RoleModel.getInstance().getPartnerList();if(t)for(var i,n=0;n<t.length;n++)if(i=t[n],this._stoneData[i.parnerID])for(var s=1;8>=s;s++)this._stoneData[i.parnerID][s]&&(e+=Number(this._stoneData[i.parnerID][s]));return e},s.getStoneVo=function(e,t){return this._stoneObj[e][t]},s.setStoneData=function(e,t){for(var i=0,n=e;i<n.length;i++){var s=n[i];this._stoneData[t]||(this._stoneData[t]=new Object),this._stoneData[t][s.type]=s.level}},s.getStoneLevelByType=function(e,t,i){return void 0===i&&(i=1),0==i?RankModel.getInstance().getOtherStone(t,e):this._stoneData[t]&&this._stoneData[t][e]?this._stoneData[t][e]:0},s.getStoneMinType=function(e){for(var t=1,i=0,n=1;8>=n;n++)this._stoneData[e]&&i<=this._stoneData[e][n]&&(i=this._stoneData[e][n],t=n);return i>0&&(t=8==t?1:t+1),t},s.getSoulVo=function(e){return this._soulObj[e]},s.setSoulData=function(e,t){for(var i=0,n=e;i<n.length;i++){var s=n[i];this._soulData[t]||(this._soulData[t]=new Object),this._soulData[t][s.type]=s.level}},s.getSoulLevelByType=function(e,t){return this._soulData[t]&&this._soulData[t][e]?this._soulData[t][e]:0},s.getSoulMinType=function(e){for(var t=1,i=0,n=1;8>=n;n++)this._soulData[e]&&i<=this._soulData[e][n]&&(i=this._soulData[e][n],t=n);return i>0&&(t=8==t?1:t+1),t},s.getRuneCostCount=function(e){return e},s.setRuneData=function(e,t){for(var i=0,n=e;i<n.length;i++){var s=n[i];this._runeData[t]||(this._runeData[t]=new Object),this._runeData[t][s.type]=s.level}},s.getRuneVo=function(e,t){return this._runeObj[e][t]},s.getRuneLevelByType=function(e,t,i){return void 0===i&&(i=1),0==i?RankModel.getInstance().getOtherStone(t,e):this._runeData[t]&&this._runeData[t][e]?this._runeData[t][e]:0},s.getRuneMinType=function(e){for(var t=40,i=0,n=40;47>=n;n++)this._runeData[e]&&i<=this._runeData[e][n]&&(i=this._runeData[e][n],t=n);return i>0&&(t=47==t?40:t+1),t},s.isRuneUpgrade=function(e){for(var t,i=0,n=0,s=0,a=0,o=1;8>=o;o++)if(a=this.getRuneLevelByType(o+39,e.parnerID),t=this.getRuneVo(o+39,a+1),t&&(s=Number(t.con_item[0].info.template_id),i=Number(t.con_item[0].num),n=GoodsListProxy.getInstance().findGoodNumber(s),n>=i))return!0;return!1},i(s,"isRuneUpgradeAll",function(){var e=RoleModel.getInstance().getPartnerList();if(e)for(var t,i=0;i<e.length;i++)if(t=e[i],this.isRuneUpgrade(t))return!0;return!1}),s.getStrengProStrAll=function(e,t,i){void 0===i&&(i=1);var n="",s=this.getStrengVo(e),a=s[0],o=this.getStrengLevelByType(e,t);0==i&&(o=RankModel.getInstance().getOtherStreng(t,e));var n=this.getStrengProStr(a,o);return 2==s.length&&(a=s[1],n+="\n"+this.getStrengProStr(a,o)),n},s.getStrengProStr=function(e,t){var i="";return i=1==e.type?EquipBasic.getProStr(e.att_id)+"+"+(t>0?Math.floor((t*t+e.value1*t+e.value2)/e.value3):0):EquipBasic.getProStr(e.att_id)+"+"+(t>0?Math.floor((t*t+e.value1*t+e.value2)*e.value3/e.value4):0)},s.getSoulProStrAll=function(e,t,i){void 0===i&&(i=1);var n="",s=this.getSoulVo(e),a=s[0],o=this.getSoulLevelByType(e,t);0==i&&(o=RankModel.getInstance().getOtherSoul(t,e));var n=this.getSoulProStr(a,o);return 2==s.length&&(a=s[1],n+="\n"+this.getSoulProStr(a,o)),n},s.getSoulProStr=function(e,t){var i=EquipBasic.getProStr(e.att_id)+"+"+Math.floor(e.value1*t*e.value2);return i},i(s,"isUpgrade",function(){var e=RoleModel.getInstance().getPartnerList();if(e)for(var t,i=0;i<e.length;i++){if(t=e[i],this.isStrengthenUpgrade(t))return!0;if(this.isStoneUpgrade(t))return!0;if(this.isSoulUpgrade(t))return!0;if(this.isStarUpgrade(t))return!0}return!1}),s.isStrengthenUpgrade=function(e){var t=this.getStrengMinType(e.parnerID),i=this.getStrengLevelByType(t,e.parnerID),n=this.getStrengthenTolCount(i),s=GoodsListProxy.getInstance().findGoodNumber(11010001);return s>=n&&i<Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_31).value)},i(s,"isStrengthenUpgradeAll",function(){var e=RoleModel.getInstance().getPartnerList();if(e)for(var t,i=0;i<e.length;i++)if(t=e[i],this.isStrengthenUpgrade(t))return!0;return!1}),s.getStrengthenTolCount=function(e){return Math.floor((e*e+4*e+8)/4)},s.isStoneUpgrade=function(e){var i=t.getInstance().getStoneMinType(e.parnerID),n=t.getInstance().getStoneLevelByType(i,e.parnerID),s=this.getStoneVo(i,n+1);if(!s)return!1;var a=Number(s.con_item[0].info.template_id),o=Number(s.con_item[0].num),r=GoodsListProxy.getInstance().findGoodNumber(a);return s&&r>=o},i(s,"isStoneUpgradeAll",function(){var e=RoleModel.getInstance().getPartnerList();if(e)for(var t,i=0;i<e.length;i++)if(t=e[i],this.isStoneUpgrade(t))return!0;return!1}),s.isSoulUpgrade=function(e){var t=this.getSoulMinType(e.parnerID),i=this.getSoulLevelByType(t,e.parnerID),n=this.getSoulTolCount(i),s=GoodsListProxy.getInstance().findGoodNumber(11020001);return s>=n&&i<Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_32).value)},i(s,"isSoulUpgradeAll",function(){var e=RoleModel.getInstance().getPartnerList();if(e)for(var t,i=0;i<e.length;i++)if(t=e[i],this.isSoulUpgrade(t))return!0;return!1}),s.getSoulTolCount=function(e){return 4*Math.floor(e/5)+4},s.setStarData=function(e,t){for(var i=0,n=e;i<n.length;i++){var s=n[i];this._starData[t]||(this._starData[t]=new Object),this._starData[t][s.type]=s.level}},s.getStarLevelByType=function(e,t){return this._starData&&this._starData[t]&&this._starData[t][e]?this._starData[t][e]:0},s.getStarVo=function(e,t){return this.getStarConfig()[e][t]},s.isStarUpgrade=function(e){for(var t,i=0,n=0,s=0,a=0,o=1;8>=o;o++)if(a=this.getStarLevelByType(o,e.parnerID),t=this.getStarVo(o,a+1),t&&(s=Number(t.con_item2[0].info.template_id),i=Number(t.con_item2[0].num),n=GoodsListProxy.getInstance().findGoodNumber(s),n>=i))return!0;return!1},i(s,"isStarUpgradeAll",function(){var e=RoleModel.getInstance().getPartnerList();if(e)for(var t,i=0;i<e.length;i++)if(t=e[i],this.isStarUpgrade(t))return!0;return!1}),s.getStarTolLv=function(){var e=0,t=RoleModel.getInstance().getPartnerList();if(t)for(var i,n=0;n<t.length;n++)if(i=t[n],this._starData[i.parnerID])for(var s=1;8>=s;s++)this._starData[i.parnerID][s]&&(e+=Number(this._starData[i.parnerID][s]));return e},s.getTypeStr=function(e){var t;switch(e){case 1:t="武器";break;case 2:t="衣服";break;case 3:t="头盔";break;case 4:t="项链";break;case 5:case 6:t="手腕";break;case 7:case 8:t="戒指";break;case 9:t="腰带";break;case 10:t="战靴"}return t},t}(egret.EventDispatcher);egret.registerClass(BuildModel,"BuildModel");var BuildRuneVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(BuildRuneVo,"BuildRuneVo");var BuildSoulVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(BuildSoulVo,"BuildSoulVo");var BuildStarVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(BuildStarVo,"BuildStarVo");var BuildStoneVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(BuildStoneVo,"BuildStoneVo");var BuildStrengthenVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(BuildStrengthenVo,"BuildStrengthenVo");var ChargeDataVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ChargeDataVO,"ChargeDataVO");var ChargeModel=function(){function e(){this._dataList=[],this._serverDataArr=[],this.isShowTest=!1}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},i.createDataList=function(){for(var e,t,i=DataManager.getInstance().getObj("data_charge_double"),n=i.data_charge_double,s=[],a=0;a<n.length;a++)e=n[a],t=new ChargeDataVO,t.template_id=Number(e.template_id),t.num=e.num,t.res_num=e.re_num,t.ios_id=e.ios_id,t.android_id=e.android_id,s.push(t);return s},i.getDataList=function(){return this._dataList.length<=0&&(this._dataList=this.createDataList()),this._dataList},i.setServerData=function(e){if(this._serverDataArr.length<=0)this._serverDataArr=e.charge_double_awards;else{var t;for(var i in e.charge_double_awards)t=e.charge_double_awards[i],0==this.checkHas(t)&&this._serverDataArr.push(t)}GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.UPDATE_CHARGET_DOUBLE_INFO))},i.checkHas=function(e){var t;for(var i in this._serverDataArr)return t=this._serverDataArr[i],t.cfg_id==e.cfg_id?(t.flag=e.flag,!0):!1},i.getServerNode=function(e){for(var t,i=0;i<this._serverDataArr.length;i++)if(t=this._serverDataArr[i],t.cfg_id==e)return t;return null},e}();egret.registerClass(ChargeModel,"ChargeModel");var ChatModel=function(e){function t(){e.call(this),this._isInit=!1,this._worldChatArr=[],this._guildChatArr=[],this._privateChatArr=new Object,this._systemChatArr=[]}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},s.getConfigGMTalk=function(){if(!this._gmtalkObj){this._gmtalkObj=new Object;for(var e=DataManager.getInstance().getObj("data_gmtalk"),t=e.data_gmtalk,i=void 0,n=0;n<t.length;n++)i=t[n],this._gmtalkObj[i.template_id]=i.content}return this._gmtalkObj},s.setWorldData=function(e){if(0==this._worldChatArr.length){var t=new NodeChatworld_list;t.icon=999,t.name="客服美眉小心心",t.content=this.getConfigGMTalk()[Math.ceil(20*Math.random())],e.push(t)}for(var i in e){if(e.hasOwnProperty(i)){var t=e[i];t.content=this.filtetSpecialChar(t.content),this._worldChatArr.push(t)}this._worldChatArr.length>50&&this._worldChatArr.shift()}},s.getWorldData=function(){return this._worldChatArr},s.setGuildData=function(e){for(var t in e)e.hasOwnProperty(t)&&this._guildChatArr.push(e[t]),this._guildChatArr.length>50&&this._guildChatArr.shift()},s.getGuildData=function(){return this._guildChatArr},s.getPrivateData=function(e){return this._privateChatArr[e]||(this._privateChatArr[e]=[]),this._privateChatArr[e]},s.updatePrivateData=function(e){this._privateChatArr[e.send_role_id]||(this._privateChatArr[e.send_role_id]=[]),this._privateChatArr[e.send_role_id].push(e)},s.setSystemData=function(e){for(var t in e)e.hasOwnProperty(t)&&this._systemChatArr.push(e[t])},s.getSystemData=function(){return this._systemChatArr},i(s,"isInit",function(){return this._isInit},function(e){this._isInit=e}),s.filtetSpecialChar=function(e){if(null==e)return"";var t=/<+/g;return e=e.replace(t,"***"),t=/>+/g,e=e.replace(t,"***")},t}(egret.EventDispatcher);egret.registerClass(ChatModel,"ChatModel");var ChenghaoModel=function(e){function t(){e.call(this),this._chenghaoDataList=[],this.isFirst=!0,this._totalPropertyVO=new ChenghaoVO}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},n.createDataList=function(){for(var e,t,i=DataManager.getInstance().getObj("data_title"),n=i.data_title,s=[],a=0;a<n.length;a++)e=n[a],t=new ChenghaoVO,t.template_id=e.template_id,t.quality=Number(e.quality),t.time=e.time,t.hp=Number(e.hp),t.mp=Number(e.mp),t.attack=Number(e.att),t.att_def=Number(e.att_def),t.magic_def=Number(e.magic_def),t.crit=Number(e.crit),t.crit_hurt=Number(e.crit_hurt),t.crit_def=Number(e.crit_def),t.palsy_rate=Number(e.palsy_rate),t.palsy_def=Number(e.palsy_def),t.hurt_up=Number(e.hurt_up),t.hurt_def=Number(e.hurt_def),t.hp_up=Number(e.hp_up),t.name=e.name,t.explain=e.explain,t.type=e.type,t.platform_limit=e.platform_limit,"0"!=t.platform_limit&&(t.platformList=t.platform_limit.substring(1,t.platform_limit.length-1).split(",")),"0"==t.platform_limit?s.push(t):-1!=t.platformList.indexOf(AllParamObj.platform)&&s.push(t);return s},n.getChenghaoData=function(e){this._chenghaoDataList.length<=0&&(this._chenghaoDataList=this.createDataList());var t;for(var i in this._chenghaoDataList)if(t=this._chenghaoDataList[i],t.template_id==e)return t;return null},n.getChenghaoDataList=function(){return this._chenghaoDataList.length<=0&&(this._chenghaoDataList=this.createDataList()),this._chenghaoDataList},n.setChenghaoServerData=function(e){var t,i,n;if(null==this._serverData){this._serverData=e;for(var s in this._serverData.title_list)t=this._serverData.title_list[s],this.setChenghaoVOSeq(t.title_id)}else for(var a=0;a<e.title_list.length;a++)t=e.title_list[a],n=this.getChenghaoData(t.title_id),i=this.getChenghaoServerData(t.title_id),null==i?(this._serverData.title_list.push(t),0==this.isFirst&&(n&&4==n.quality&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ChenghaoEvtName.CHENGHAO_OPEN_GETVIEW,{id:t.title_id})),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FuLiEvtName.SHOW_SHARENEW_VIEW,3)))):i.last_time=t.last_time,this.setChenghaoVOSeq(t.title_id);this.isFirst&&(this.isFirst=!1),this.dispatchEvent(new ParamEvent(ChenghaoEvtName.CHENGHAO_UPDATE_INFO))},n.deleteChenghao=function(e){var t;if(null!=this._serverData){for(var i=0;i<this._serverData.title_list.length;i++)if(t=this._serverData.title_list[i],e==t.title_id){this._serverData.title_list.splice(i,1);break}this.dispatchEvent(new ParamEvent(ChenghaoEvtName.CHENGHAO_UPDATE_INFO))}},n.setChenghaoVOSeq=function(e){var t=this.getChenghaoData(e);t&&(t.seq=1)},n.getChenghaoServerData=function(e){if(!this._serverData)return null;for(var t,i=this._serverData.title_list.length,n=0;i>n;n++)if(t=this._serverData.title_list[n],t.title_id==e)return t},n.getChenghaoTotalPropertyVO=function(){this._totalPropertyVO.hp=0,this._totalPropertyVO.attack=0,this._totalPropertyVO.att_def=0,this._totalPropertyVO.magic_def=0;var e;if(this._serverData)for(var t in this._serverData.title_list)e=this.getChenghaoData(this._serverData.title_list[t].title_id),this._totalPropertyVO.hp+=e.hp,this._totalPropertyVO.attack+=e.attack,this._totalPropertyVO.att_def+=e.att_def,this._totalPropertyVO.magic_def+=e.magic_def;return this._totalPropertyVO},n.getChenghaoCanLevelupOrActive=function(){var e,t,i,n=RoleModel.getInstance().getPartnerList();if(null==!this._serverData||void 0==this._serverData)return!1;if(null==n||void 0==n)return!1;for(var s=0;s<this._serverData.title_list.length;s++){i=this._serverData.title_list[s],t=!1;for(var a=0;a<n.length;a++)e=n[a],RoleModel.getInstance().hasChengHao(e.uid,i.title_id)&&(t=!0);if(0==t)return!0}},t}(egret.EventDispatcher);egret.registerClass(ChenghaoModel,"ChenghaoModel");var ChenghaoVO=function(e){function t(){e.call(this),this.type=0,this.seq=2}__extends(t,e);var i=(__define,t);i.prototype;return t}(PropertyVO);egret.registerClass(ChenghaoVO,"ChenghaoVO");var CityWarModel=function(e){function t(){e.call(this),this.fightType=0,this.isOpenCityWar=!1,this.isCaiQi=!1,this._cwKFOpenDay=-1,this._cwOpenWeek=-1,this._cwDaysLimit=-1,this._cityWarPoint=0}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},s.setOccupyInfo=function(e){this._occupyInfo=e,this.dispatchEvent(new ParamEvent(t.UPDATE_OCCUPYINFO))},i(s,"occupyInfo",function(){return this._occupyInfo}),s.getCityWarRewardConifg=function(){if(null==this._cityWarRewardConfigDic){this._cityWarRewardConfigDic=new Object;for(var e=DataManager.getInstance().getObj("data_siege_reward"),t=e.data_siege_reward,i=0;i<t.length;i++){var n=t[i],s=new CityWarRewardConfigVo;s.template_id=n.template_id,s.type=n.type,s.min=n.min,s.max=n.max,s.need_point=n.need_point,s.goodsList=Tools.changeToNodeDropList(n.add_item),this._cityWarRewardConfigDic[s.template_id]=s}}},s.getCityWarSceneConfig=function(e){if(null==this._cityWarSceneConfigDic){this._cityWarSceneConfigDic=new Object;for(var t=DataManager.getInstance().getObj("data_siege"),i=t.data_siege,n=0;n<i.length;n++){var s=i[n],a=new CWSceneConfigVo;a.template_id=s.template_id,a.con_gold=s.con_gold,a.scene_id=s.scene_id,a.revive_time=s.revive_time,a.go_point=s.go_point,a.setRandomPath(s.player_pos),a.setMonPoint(s.mon_pos),this._cityWarSceneConfigDic[a.scene_id]=a}}return this._cityWarSceneConfigDic[e]},s.getTypeRewardConfigList=function(e){var t=new Array;this.getCityWarRewardConifg();var i;for(i in this._cityWarRewardConfigDic){var n=this._cityWarRewardConfigDic[i];n.type==e&&t.push(n)}return t},s.setGuildRankInfo=function(e){this._guildRank=e,this._guildRank.siege_scores.sort(function(e,t){return e.score>t.score?0:1}),this.dispatchEvent(new ParamEvent(t.UPDATE_GUILDRANKINFO))},i(s,"guildRankInfo",function(){return this._guildRank}),s.setPersonRankInfo=function(e){this._personRankInfo=e,this._personRankInfo.siege_scores.sort(function(e,t){return e.score>t.score?0:1}),this.dispatchEvent(new ParamEvent(t.UPDATE_PERSONRANKINFO))},i(s,"personRankInfo",function(){return this._personRankInfo}),s.setCityWarStorageInfo=function(e){this._cityWarStorageInfo=e,this.dispatchEvent(new ParamEvent(t.UPDATE_REWARDSTORAGE))},i(s,"cityWarStorageInfo",function(){return this._cityWarStorageInfo}),s.getLeftNumOfGoods=function(e){var t=0;if(this._cityWarStorageInfo)for(var i=this._cityWarStorageInfo.siege_depot,n=0;n<i.length;n++){var s=i[n];if(s.cfg_id==e){t=s.num;break}}return t},s.setMemberGoodsNum=function(e,i,n){null==this._storageAssignDic&&(this._storageAssignDic=new Object);var s=this._storageAssignDic[e];null==s&&(s=new CWAssignVo,s.roleID=e,this._storageAssignDic[s.roleID]=s);for(var a,o=s.goodsList,r=0;r<o.length;r++){var h=o[r];if(h.asset_id==i){h.value=n,a=!0;break}}if(!a){var h=new NodeDrop_list;h.asset_id=i,h.value=n,s.goodsList.push(h)}this.dispatchEvent(new ParamEvent(t.UPDATE_ASSIGN_GOODS))},s.getStorageAssignDic=function(){return this._storageAssignDic},s.getCWStoreageAssignVo=function(e){return null==this._storageAssignDic?null:this._storageAssignDic[e]},s.setInnerRankInfo=function(e){this._innerRankInfo=e,this._innerRankInfo.siege_scores.sort(function(e,t){return e.score>t.score?0:1}),this._innerRankInfo.siege_guild_times.sort(function(e,t){return e.total_time>t.total_time?-1:1}),this.dispatchEvent(new ParamEvent(t.UPDATE_INNERRANK))},i(s,"innerRankInfo",function(){return this._innerRankInfo}),s.setCanAttackPlayerList=function(e){this._attackPlayerList=e,this.dispatchEvent(new ParamEvent(t.UPDATE_CANATTACKLIST))},s.findEnermyVoByID=function(e){var t=this._attackPlayerList;if(t)for(var i=0;i<t.length;i++){var n=t[i];if(n.roleID==e)return n}return null},s.convertAttackPlayerList=function(e){for(var t=new Array,i=0;i<e.length;i++){var n=e[i],s=new CityWarFightVo;s.changeFromNode(n),t.push(s)}return t},i(s,"attackPlayerList",function(){return null==this._attackPlayerList&&(this._attackPlayerList=new Array),this._attackPlayerList}),s.getRefreshCD=function(){var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_15205);return e?parseInt(e.value):5},s.isOpen=function(){var e=!1;if(HuoDongDailyModel.getInstance().kaiFuDay==this.cwKFOpenDay)e=!0;else if(HuoDongDailyModel.getInstance().kaiFuDay>this.cwDaysLimit){var t=new Date(1e3*RoleModel.getInstance().serverTime);t.getDay()==this.cwOpenWeek&&(e=!0)}return e},s.setCityWarPoint=function(e){this._cityWarPoint=e,this.dispatchEvent(new ParamEvent(t.UPDATE_CITYWAR_POINT))},i(s,"cityWarPoint",function(){return this._cityWarPoint}),s.setFlagStatu=function(e){this._flagStatu=e,this.dispatchEvent(new ParamEvent(t.UPDATE_FLAG_STATU))},i(s,"flagStatu",function(){return this._flagStatu}),s.setFighting=function(e){SceneModel.getInstance().isCityWarInner()&&this._isFighting!=e&&(this._isFighting=e,this.dispatchEvent(new ParamEvent(t.FIGHT_STATU_CHANGE)))},i(s,"isFighting",function(){return this._isFighting}),s.clearAssignData=function(){this._storageAssignDic=new Object,this.dispatchEvent(new ParamEvent(t.UPDATE_ASSIGN_GOODS))},s.checkRoleInAttackPlayerList=function(e){var t=this;if(null==t._attackPlayerList)return!1;for(var i=0;i<t._attackPlayerList.length;i++){var n=t._attackPlayerList[i];if(n.roleID==e)return!0}return!1},s.removeRoleFromAttackPlayerList=function(e){var t=this;if(null!=t._attackPlayerList)for(var i=0;i<t._attackPlayerList.length;i++){var n=t._attackPlayerList[i];if(n.roleID==e)return void t._attackPlayerList.splice(i,1)}},s.checkCityWarDailyReweard=function(){if(null==this.occupyInfo)return!1;if(0==RoleModel.getInstance().getRoleCommon().guild_id)return!1;if(this.occupyInfo.guild_id!=RoleModel.getInstance().getRoleCommon().guild_id)return!1;var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_23);return e>0?!1:!0},s.addRoomInfo=function(e,t){if(SceneModel.getInstance().isCityWarFrontPalace()||SceneModel.getInstance().isCityWarPalace()){var i=this;null==i._fightRoomList&&(i._fightRoomList=new Array);for(var n=!1,s=0;s<i._fightRoomList.length;s++){var a=i._fightRoomList[s],o=a.checkRelated(e,t);if(""!=o){a.addRelation(o),n=!0;break}if(""==o)return}if(!n){var a=new CWRoomVo;a.addRelation(e),a.addRelation(t),i._fightRoomList.push(a)}}},s.removeRoomInfo=function(e){if(SceneModel.getInstance().isCityWarFrontPalace()||SceneModel.getInstance().isCityWarPalace()){var t=this;if(t._fightRoomList)for(var i=0;i<t._fightRoomList.length;i++){var n=t._fightRoomList[i];if(n.removeRelation(e)){n.num<=1&&t._fightRoomList.splice(i,1);break}}}},s.parse10700=function(e){if((SceneModel.getInstance().isCityWarFrontPalace()||SceneModel.getInstance().isCityWarPalace())&&e.type==AttackType.PARTNER){var t=e.battle_result,i=PlayerBaseVO.makeUid(e.plat_name,e.att_id),n=SceneModel.getInstance().findPlayerIDByPartnerID(i);if(""!=n)for(var s=0;s<t.length;s++){var a=t[s];if(a.obj_type==AttackType.PARTNER){i=PlayerBaseVO.makeUid(a.plat_name,a.obj_id);var o=SceneModel.getInstance().findPlayerIDByPartnerID(i);if(""==o)break;this.addRoomInfo(n,o)}}}},s.findRoomVoByPlayerID=function(e){var t=this._fightRoomList;if(null==t)return null;for(var i=0;i<t.length;i++){var n=t[i];if(n.contains(e))return n}return null},s.clearFightRommList=function(){this._fightRoomList=null},i(s,"cwDaysLimit",function(){if(this._cwDaysLimit<0){this._cwDaysLimit=4;var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_15212);e&&(this._cwDaysLimit=parseInt(e.value))}return this._cwDaysLimit}),i(s,"cwKFOpenDay",function(){if(this._cwKFOpenDay<0){this._cwKFOpenDay=4;var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_15201);if(e){var t=/\d+/g,i=e.value.match(t);this._cwKFOpenDay=parseInt(i[0])}}return this._cwKFOpenDay}),i(s,"cwOpenWeek",function(){if(this._cwOpenWeek<0){this._cwOpenWeek=6;var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_15201);if(e){var t=/\d+/g,i=e.value.match(t);this._cwOpenWeek=parseInt(i[1])}}return this._cwOpenWeek}),t.UPDATE_OCCUPYINFO="UPDATE_OCCUPYINFO",t.UPDATE_GUILDRANKINFO="UPDATE_GUILDRANKINFO",t.UPDATE_PERSONRANKINFO="UPDATE_PERSONRANKINFO",t.UPDATE_REWARDSTORAGE="UPDATE_REWARDSTORAGE",t.UPDATE_ASSIGN_GOODS="UPDATE_ASSIGN_GOODS",t.UPDATE_INNERRANK="UPDATE_INNERRANK",t.UPDATE_CANATTACKLIST="UPDATE_CANATTACKLIST",t.UPDATE_CITYWAR_POINT="UPDATE_CITYWAR_POINT",t.UPDATE_FLAG_STATU="UPDATE_FLAG_STATU",t.FIGHT_STATU_CHANGE="FIGHT_STATU_CHANGE",t}(egret.EventDispatcher);egret.registerClass(CityWarModel,"CityWarModel");var CWAssignVo=function(){function e(){this.goodsList=new Array}var t=(__define,e);t.prototype;return e}();egret.registerClass(CWAssignVo,"CWAssignVo");var CWRoomVo=function(){function e(){this._fightList=new Array}var t=__define,i=e,n=i.prototype;return n.checkRelated=function(e,t){var i=this,n=i._fightList.indexOf(e),s=i._fightList.indexOf(t);return n>-1&&s>-1?"":n>-1&&0>s?t:0>n&&s>-1?e:""},n.addRelation=function(e){""!=e&&this._fightList.push(e)},n.removeRelation=function(e){var t=this._fightList.indexOf(e);return t>=0?(this._fightList.splice(t,1),!0):!1},n.contains=function(e){return this._fightList.indexOf(e)>-1},t(n,"fightList",function(){return this._fightList}),t(n,"num",function(){var e=this._fightList;return null==e?0:e.length}),e}();egret.registerClass(CWRoomVo,"CWRoomVo");var CWSceneConfigVo=function(){function e(){}var t=(__define,e),i=t.prototype;return i.setRandomPath=function(e){this.randomPath=new Array;for(var t,i,n,s=e.match(/\d+/g),a=0;a<s.length;a+=2)i=parseInt(s[a]),n=parseInt(s[a+1]),t=new Point,t.x=i,t.y=n,this.randomPath.push(t)},i.setMonPoint=function(e){this.monPoint=new Array;for(var t,i,n,s=e.match(/\d+/g),a=0;a<s.length;a+=2)i=parseInt(s[a]),n=parseInt(s[a+1]),t=new Point,t.x=i,t.y=n,this.monPoint.push(t)},e}();egret.registerClass(CWSceneConfigVo,"CWSceneConfigVo");var CityWarFightVo=function(){function e(){}var t=(__define,e),i=t.prototype;return i.changeFromNode=function(e){this.roleID=e.role_id,this.icon=e.icon,this.name=e.name,this.guildID=0,this.guildName=""},i.changeFromScmd=function(e){this.roleID=e.role_id,this.icon=e.icon,this.name=e.name,this.guildID=e.guild_id,this.guildName=e.guild_name},e}();egret.registerClass(CityWarFightVo,"CityWarFightVo");var CityWarRankItemVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(CityWarRankItemVo,"CityWarRankItemVo");var CityWarRewardConfigVo=function(){function e(){}var t=(__define,e);t.prototype;return e.ROLL=1,e.PERSONPOINT=4,e.GUILDPOINT=5,e.ZHANLING_MASTER=6,e.ZHANLING_MEMBER=7,e.ZHANLING_DAILY=8,e.PERSON_DABIAO=9,e}();egret.registerClass(CityWarRewardConfigVo,"CityWarRewardConfigVo");var ItemData=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ItemData,"ItemData");var LogVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(LogVO,"LogVO");var DailyModel=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.getDataByTypeId=function(e,t){if(void 0===t&&(t=0),this.dailyData){var i;for(var n in this.dailyData.daily_nums)if(i=this.dailyData.daily_nums[n],i.type==e&&i.sub_type==t)return i}return null},n.getCountByTypeId=function(e,t){if(void 0===t&&(t=0),this.dailyData){var i;for(var n in this.dailyData.daily_nums)if(i=this.dailyData.daily_nums[n],i.type==e&&i.sub_type==t)return i.value}return 0},n.updateData=function(e){this.dailyData||(this.dailyData=new SCMD11300);for(var t,i,n=!1,s=0;s<e.daily_nums.length;s++)i=e.daily_nums[s],n=!1,t=this.getDataByTypeId(i.type,i.sub_type),t?(t.value!=i.value&&(n=!0),t.value=i.value):(this.dailyData.daily_nums.push(i),n=!0),n&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(DailyEvtName.DAILY_DATA_CHANGE,{data:i}));GameDispatcher.getInstance().dispatchEvent(new ParamEvent(DailyEvtName.DAILY_UPDATE))},n.dispose=function(){this.dailyData=new SCMD11300},t.DAILY_TYPE_1=1,t.DAILY_TYPE_2=2,t.DAILY_TYPE_3=3,t.DAILY_TYPE_4=4,t.DAILY_TYPE_5=5,t.DAILY_TYPE_6=6,t.DAILY_TYPE_7=7,t.DAILY_TYPE_8=8,t.DAILY_TYPE_9=9,t.DAILY_TYPE_10=10,t.DAILY_TYPE_11=11,t.DAILY_TYPE_12=12,t.DAILY_TYPE_13=13,t.DAILY_TYPE_14=14,t.DAILY_TYPE_15=15,t.DAILY_TYPE_16=16,t.DAILY_TYPE_17=17,t.DAILY_TYPE_18=18,t.DAILY_TYPE_19=19,t.DAILY_TYPE_20=20,t.DAILY_TYPE_21=21,t.DAILY_TYPE_22=22,t.DAILY_TYPE_23=23,t.DAILY_TYPE_24=24,t.DAILY_TYPE_25=25,t.DAILY_TYPE_26=26,t.DAILY_TYPE_27=27,t.DAILY_TYPE_28=28,t.DAILY_TYPE_29=29,t.DAILY_TYPE_30=30,t.DAILY_TYPE_31=31,t.DAILY_TYPE_32=32,t.DAILY_TYPE_33=33,t.DAILY_TYPE_34=34,t.DAILY_TYPE_35=35,t.DAILY_TYPE_38=38,t.DAILY_TYPE_40=40,t.DAILY_TYPE_41=41,t.DAILY_TYPE_44=44,t.DAILY_TYPE_45=45,t.DAILY_TYPE_46=46,t.DAILY_TYPE_47=47,t.DAILY_TYPE_50=50,t.DAILY_TYPE_52=52,t.DAILY_TYPE_53=53,t.DAILY_TYPE_54=54,t.DAILY_TYPE_56=56,t.DAILY_TYPE_57=57,t.DAILY_TYPE_16901=16901,t.DAILY_TYPE_21801=21801,t.DAILY_TYPE_22001=22001,t.DAILY_TYPE_22002=22002,t.DAILY_TYPE_22101=22101,t.DAILY_TYPE_22501=22501,t.DAILY_TYPE_22901=22901,t.DAILY_TYPE_23101=23101,t.DAILY_TYPE_23302=23302,t.DAILY_TYPE_23304=23304,t.DAILY_TYPE_23601=23601,t.DAILY_TYPE_24001=24001,t.DAILY_TYPE_24002=24002,t.DAILY_TYPE_24003=24003,t.DAILY_TYPE_24004=24004,t.DAILY_TYPE_24005=24005,t.DAILY_TYPE_24006=24006,t.DAILY_TYPE_24007=24007,t.DAILY_TYPE_17301=17301,t.DAILY_TYPE_20501=20501,t.DAILY_TYPE_20701=20701,t.DAILY_TYPE_13002=13002,t.DAILY_TYPE_13003=13003,t.DAILY_TYPE_24501=24501,t}(egret.EventDispatcher);egret.registerClass(DailyModel,"DailyModel");var DarkModel=function(e){function t(){e.call(this)}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},s.getConfig=function(){if(!this._darkObj){this._darkObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_dark"),i=t.data_dark,n=void 0,s=0;s<i.length;s++)n=i[s],e=new DarkVo,e.template_id=n.template_id,e.name=n.name,e.scene_id=n.scene_id,e.player_pos=n.player_pos,e.mon_pos=n.mon_pos,e.bg_map=n.bg_map,""!=n.add_item&&"0"!=n.add_item&&null!=n.add_item&&(e.add_item=Tools.changeToItemData(n.add_item)),""!=n.null_reward&&"0"!=n.null_reward&&null!=n.null_reward&&(e.null_reward=Tools.changeToItemData(n.null_reward)),this._darkObj[e.template_id]=e}return this._darkObj},s.getConfigReward=function(){if(!this._darkRewardObj){this._darkRewardObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_dark_reward"),i=t.data_dark_reward,n=void 0,s=0;s<i.length;s++)n=i[s],e=new DarkRewardVo,e.template_id=n.template_id,e.min=n.min,e.max=n.max,""!=n.add_item&&"0"!=n.add_item&&null!=n.add_item&&(e.add_item=Tools.changeToItemData(n.add_item)),this._darkRewardObj[e.template_id]=e}return this._darkRewardObj},s.getVoById=function(e){return this.getConfig()[e]},s.getRewardById=function(e){return this.getConfigReward()[e]},s.getLogStr=function(e){var t="";return t=0==e.bat_ret?ColorUtil.getColorHtmlStr("[失败]",ColorUtil.COLOR_RED)+e.tar_name+"战胜了你":ColorUtil.getColorHtmlStr("[胜利]",ColorUtil.COLOR_GREEN)+"你战胜了"+e.tar_name
},s.setData=function(e){this._data=e},i(s,"isDoor",function(){return this._data?this._data.door>0:!1}),s.getCurDataVo=function(){var e=Math.floor(this._data.grid_id/100);return 0==e&&(e=1),this.getVoById(e)},t}(egret.EventDispatcher);egret.registerClass(DarkModel,"DarkModel");var DarkRewardVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(DarkRewardVo,"DarkRewardVo");var DarkVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(DarkVo,"DarkVo");var DominateModel=function(e){function t(){e.call(this),this._dominateList=[],this._dominateAdvList=[],this._dominateDecList=[],this._dominateServerData=new Object}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},n.createDataList=function(){for(var e,t,i,n=DataManager.getInstance().getObj("data_dominate"),s=n.data_dominate,a=[],o=0;o<s.length;o++)e=s[o],t=new DominateVO,t.template_id=e.template_id,t.type=e.type,t.star_level=e.star_level,t.player_round=Number(e.player_round),t.show_star=e.show_star,t.success=e.success,t.show_star=e.show_star,t.con_item=e.con_item,i=t.con_item.match(/\d+/g),t.con_itemid=parseInt(i[0]),t.con_count=parseInt(i[1]),t.hp=e.hp,t.mp=e.mp,t.attack=e.att,t.att_def=e.att_def,t.magic_def=e.magic_def,t.crit=Number(e.crit)/100,t.crit_hurt=e.crit_hurt,t.crit_def=e.crit_def,t.palsy_rate=e.palsy_rate,t.palsy_def=e.palsy_def,t.hurt_up=e.hurt_up,t.hurt_def=e.hurt_def,t.hp_up=e.hp_up,a.push(t);return a},n.createAdvDataList=function(){for(var e,t,i,n=DataManager.getInstance().getObj("data_dominate_adv"),s=n.data_dominate_adv,a=[],o=0;o<s.length;o++)e=s[o],t=new DominateAdvVO,t.template_id=e.template_id,t.type=e.type,t.level=e.level,t.crit=Number(e.crit)/100,t.promote=e.promote,t.success=e.success,t.con_item=e.con_item,i=t.con_item.match(/\d+/g),t.con_itemid=parseInt(i[0]),t.con_count=parseInt(i[1]),a.push(t);return a},n.createDecDataList=function(){for(var e,t,i,n=DataManager.getInstance().getObj("data_dominate_rec"),s=n.data_dominate_rec,a=[],o=0;o<s.length;o++)e=s[o],t=new DominateDecVO,t.item_id=e.item_id,t.add_item=e.add_item,i=t.add_item.match(/\d+/g),t.add_itemid=parseInt(i[0]),t.add_count=parseInt(i[1]),a.push(t);return a},n.updateDominateEquipInfo=function(e){var t;this._dominateServerData[e.partner_id]&&void 0!=this._dominateServerData[e.partner_id]||(this._dominateServerData[e.partner_id]=new Array);for(var i=0;i<e.dominate_list.length;i++)t=e.dominate_list[i],this.checkHas(t,e.partner_id);RedDotsModel.getInstance().calMainFigureIconRedDot(),this.dispatchEvent(new ParamEvent(DominateEvtName.DOMINATE_UPDATE_INFO))},n.checkHas=function(e,t){for(var i,n=0;n<this._dominateServerData[t].length;n++)if(i=this._dominateServerData[t][n],i.type_id==e.type_id)return i.star=e.star,i.level=e.level,this.dispatchEvent(new ParamEvent(DominateEvtName.DOMINATE_UPDATE_ONE_INFO,{type:e.type_id})),!0;return this._dominateServerData[t].push(e),this.dispatchEvent(new ParamEvent(DominateEvtName.DOMINATE_UPDATE_ONE_INFO,{type:e.type_id})),!1},n.getDominateEquipServerData=function(e,t){if(!this._dominateServerData[e]||void 0==this._dominateServerData[e])return null;for(var i,n=0;n<this._dominateServerData[e].length;n++)if(i=this._dominateServerData[e][n],i&&i.type_id==t)return i},n.getDominateVO=function(e,t){this._dominateList.length<=0&&(this._dominateList=this.createDataList());var i;for(var n in this._dominateList)if(i=this._dominateList[n],i.star_level==e&&i.type==t)return i;return null},n.getDominateDecVO=function(e){this._dominateDecList.length<=0&&(this._dominateDecList=this.createDecDataList());var t;for(var i in this._dominateDecList)if(t=this._dominateDecList[i],t.item_id==e)return t;return null},n.getDominateAdvVO=function(e,t){this._dominateAdvList.length<=0&&(this._dominateAdvList=this.createAdvDataList());var i;for(var n in this._dominateAdvList)if(i=this._dominateAdvList[n],i.level==e&&i.type==t)return i;return null},n.getDecompositionEquipInfoListForDominate=function(){for(var e,i=[],n=GoodsListProxy.getInstance().getGoodsArr(),s=n.length,a=0,o=0;s>o;o++)e=n[o],a=t.dominateEquipDic.indexOf(Number(e.template_id)),-1!=a&&this.isActive(a+1)&&i.push(e);return i},n.isActive=function(e){var t,i=RoleModel.getInstance().getPartnerList();if(null==i||void 0==i)return!1;for(var n,s,a=0,o=0;o<i.length;o++)if(t=i[o],s=this._dominateServerData[t.parnerID],null!=s&&void 0!=s)for(var r=0;r<s.length;r++)n=s[r],n.type_id==e&&a++;return a==i.length?!0:!1},n.getDominateCanUpStar=function(){var e,i,n,s,a=0,o=RoleModel.getInstance().getRoleCommon().round,r=RoleModel.getInstance().getPartnerList();if(null==r||void 0==r)return!1;for(var h,l=0;l<r.length;l++){e=r[l];for(var d=0;4>d;d++)if(i=d+1,n=t.getInstance().getDominateEquipServerData(e.parnerID,i),null!=n&&(a=n.star),s=t.getInstance().getDominateVO(a+1,i)){if(h=GoodsListProxy.getInstance().findGoodNumber(s.con_itemid),o>=s.player_round&&h>=s.con_count)return!0;if("0"==s.con_item&&o>=s.player_round)return!0}}return!1},n.getDominateSingleCanUpStar=function(e){for(var i,n,s,a,o=0,r=RoleModel.getInstance().getRoleCommon().round,h=0;4>h;h++)if(i=h+1,n=t.getInstance().getDominateEquipServerData(e.parnerID,i),null!=n&&(o=n.star),s=t.getInstance().getDominateVO(o+1,i)){if(a=GoodsListProxy.getInstance().findGoodNumber(s.con_itemid),r>=s.player_round&&a>=s.con_count)return!0;if("0"==s.con_item&&r>=s.player_round)return!0}return!1},n.getDominateSingleCanUpStarByType=function(e,i){var n,s,a,o=0,r=RoleModel.getInstance().getRoleCommon().round;if(n=t.getInstance().getDominateEquipServerData(e.parnerID,i),null!=n&&(o=n.star),s=t.getInstance().getDominateVO(o+1,i)){if(a=GoodsListProxy.getInstance().findGoodNumber(s.con_itemid),r>=s.player_round&&a>=s.con_count)return!0;if("0"==s.con_item&&r>=s.player_round)return!0}return!1},n.getDominateCanUpLevel=function(){var e,i,n,s,a=0,o=0,r=(RoleModel.getInstance().getRoleCommon().round,RoleModel.getInstance().getPartnerList());if(null==r||void 0==r)return!1;for(var h,l=0;l<r.length;l++){e=r[l];for(var d=0;4>d;d++){i=d+1;var a=0,o=0;if(n=t.getInstance().getDominateEquipServerData(e.parnerID,i),null!=n&&(a=n.star,o=n.level),s=t.getInstance().getDominateAdvVO(o+1,i),s&&(h=GoodsListProxy.getInstance().findGoodNumber(s.con_itemid),h>=s.con_count&&n))return!0}}return!1},n.getDominateSingleCanUpLevel=function(e){for(var i,n,s,a,o=0,r=0,h=(RoleModel.getInstance().getRoleCommon().round,0);4>h;h++){i=h+1;var o=0,r=0;if(n=t.getInstance().getDominateEquipServerData(e.parnerID,i),null!=n&&(o=n.star,r=n.level),s=t.getInstance().getDominateAdvVO(r+1,i),s&&(a=GoodsListProxy.getInstance().findGoodNumber(s.con_itemid),a>=s.con_count&&n))return!0}return!1},n.getDominateSingleCanUpLevelByType=function(e,i){var e,n,s,a,o=0,r=0,o=(RoleModel.getInstance().getRoleCommon().round,0),r=0;return n=t.getInstance().getDominateEquipServerData(e.parnerID,i),null!=n&&(o=n.star,r=n.level),s=t.getInstance().getDominateAdvVO(r+1,i),s&&(a=GoodsListProxy.getInstance().findGoodNumber(s.con_itemid),a>=s.con_count&&n)?!0:!1},t.dominateEquipDic=[15020001,15020002,15020003,15020004],t}(egret.EventDispatcher);egret.registerClass(DominateModel,"DominateModel");var DominateAdvVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(DominateAdvVO,"DominateAdvVO");var DominateDecVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(DominateDecVO,"DominateDecVO");var DominateVO=function(e){function t(){e.call(this),this.con_count=0}__extends(t,e);var i=(__define,t);i.prototype;return t}(PropertyVO);egret.registerClass(DominateVO,"DominateVO");var DropModel=function(e){function t(){e.call(this),this.canList=new Array}__extends(t,e);var i=(__define,t);i.prototype;return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t}(egret.EventDispatcher);egret.registerClass(DropModel,"DropModel");var BlessBuffVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(BlessBuffVO,"BlessBuffVO");var BlessVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(BlessVO,"BlessVO");var FanLiClientVO=function(){function e(){this.show=0}var t=(__define,e),i=t.prototype;return i.setDate=function(e){this.startDate=e[0],this.endDate=e[1],this.endDate&&this.endDate.setHours(24,0,0,0)},e}();egret.registerClass(FanLiClientVO,"FanLiClientVO");var FanLiEggNumVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanLiEggNumVO,"FanLiEggNumVO");var FanLiFishDataVO=function(){function e(){this.fish_actId=0,this.fish_resNum=0,this.fish_openNum=0,this.fish_freeNum=0,this.fish_LastTime=0,this.fish_list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanLiFishDataVO,"FanLiFishDataVO");var FanLiFishNumVO=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(FanLiEggNumVO);egret.registerClass(FanLiFishNumVO,"FanLiFishNumVO");var FanLiLcVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanLiLcVO,"FanLiLcVO");var FanLiLoginAwardServerVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanLiLoginAwardServerVO,"FanLiLoginAwardServerVO");var FanLiLoginAwardVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanLiLoginAwardVO,"FanLiLoginAwardVO");var FanLiLuckVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanLiLuckVO,"FanLiLuckVO");var FanLiModel=function(e){function t(){e.call(this),this._loginAwardConfig=[],this._flxgConfig=[],this._fllcConfig=[],this._flxfConfig=[],this._fanliEggConfig=[],this._fanliFishConfig=[],this._blessConfig=[],this._blessBuffConfig=[],this.fanliShareID=0,this._loginAwardDataArr=[],this._xgDataObj=new Object,this._lcData=new Object,this.lc_totalCharge=0,this.fanLiLuckActId=0,this._luckDataArr=[],this.blessBuffList=[],this.xf_actId=0,this.xf_totalGold=0,this.xfDataArr=[]}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},s.getClientData=function(e){if(void 0===e&&(e=1),null==this._fanliClientConfig){this._fanliClientConfig=new Object,this._dailyList=new Array,this._kaifuList=new Array;for(var t,i,n=DataManager.getInstance().getObj("data_activity_fl"),s=n.data_activity_fl,a=0;a<s.length;a++)i=s[a],t=new FanLiClientVO,t.template_id=i.template_id,t.name=i.name,t.type=Number(i.type),t.belong=Number(i.belong),t.show_icon=i.show_icon,t.show_title=i.show_title,t.open_day=Number(i.open_day),t.week=Number(i.week),t.func=i["function"],t.terrace_limit=i.terrace_limit,t.show=i.show,t.setDate(Tools.changeToDateList(i.date)),this._fanliClientConfig[t.template_id]=t,t.belong==HuoDongDailyModel.DAILY?this._dailyList.push(t):t.belong==HuoDongDailyModel.KAIFU&&this._kaifuList.push(t)}return e==HuoDongDailyModel.DAILY?this._dailyList:e==HuoDongDailyModel.KAIFU?this._kaifuList:null},s.getFanLiClientVO=function(e){return null==this._fanliClientConfig&&this.getClientData(),this._fanliClientConfig[e]},s.createLoginAwardConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_fldl"),n=i.data_activity_fldl,s=[],a=0;a<n.length;a++)t=n[a],e=new FanLiLoginAwardVO,e.template_id=t.template_id,e.goodsList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},s.createFanLiXgConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_flxg"),n=i.data_activity_flxg,s=[],a=0;a<n.length;a++)t=n[a],e=new FanLiXgVO,e.template_id=t.template_id,e.type=t.type,e.item_id=Number(t.item_id),e.name=t.name,e.limit=Number(t.limit),e.req_vip=t.req_vip,e.con_gold=t.con_gold,e.con_coin=t.con_coin,e.showList=Tools.changeToNodeDropList(t.show),s.push(e);return s},s.createFanLiDailyChargeConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_flcd"),n=i.data_activity_flcd,s=new Object,a=0;a<n.length;a++)t=n[a],e=new FanliDailyChargeVO,e.template_id=t.template_id,e.type=t.type,e.open_day=Number(t.open_day),e.need=t.need,e.goodsList=Tools.changeToNodeDropList(t.add_item),(null==s[e.open_day]||void 0==s[e.open_day])&&(s[e.open_day]=[]),s[e.open_day].push(e);return s},s.getFanliDailyChargeConfig=function(e){return null==this._fanliiDailyChargeConfig&&(this._fanliiDailyChargeConfig=this.createFanLiDailyChargeConfig()),this._fanliiDailyChargeConfig[e]},s.createFanLiLcConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_fllc"),n=i.data_activity_fllc,s=[],a=0;a<n.length;a++)t=n[a],e=new FanLiLcVO,e.template_id=t.template_id,e.type=t.type,e.need=t.need,e.goodsList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},s.createFanLiXfConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_flxf"),n=i.data_activity_flxf,s=[],a=0;a<n.length;a++)t=n[a],e=new FanLiXfVO,e.template_id=t.template_id,e.type=t.type,e.need=t.need,e.goodsList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},s.getConfigItemMu=function(){if(!this._itemMuObj){this._itemMuObj=[];for(var e,t=DataManager.getInstance().getObj("data_activity_fldb_mu"),i=t.data_activity_fldb_mu,n=void 0,s=0;s<i.length;s++)n=i[s],e=new ShadowItemVo,e.template_id=n.template_id,e.type=n.type,e["double"]=n.times,e.weight=n.weight,e.show=n.show,this._itemMuObj.push(e)}return this._itemMuObj},s.getConfigItemNum=function(){if(!this._itemNumObj){this._itemNumObj=[];for(var e,t=DataManager.getInstance().getObj("data_activity_fldb"),i=t.data_activity_fldb,n=void 0,s=0;s<i.length;s++)n=i[s],e=new ShadowItemVo,e.template_id=n.template_id,e.type=n.type,e.weight=n.need,e["double"]=n.base_gold,this._itemNumObj.push(e)}return this._itemNumObj},s.getConfigLoginLuck=function(){if(!this._itemLoginLuck){this._itemLoginLuck=[];for(var e,t=DataManager.getInstance().getObj("data_activity_flcj"),i=t.data_activity_flcj,n=void 0,s=0;s<i.length;s++)n=i[s],e=new FanliLoginLuckVo,e.template_id=n.template_id,e.type=n.type,e.weight=n.need,e.item_id=n.item_id,e.num=n.num,e.cost=n.cost,this._itemLoginLuck.push(e)}return this._itemLoginLuck},s.createFanLiLuckConfig=function(){if(!this._flLuckConfig){this._flLuckConfig=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_activity_flluck"),n=i.data_activity_flluck,s=0;s<n.length;s++)t=n[s],e=new FanLiLuckVO,e.template_id=t.template_id,e.type=t.type,e.day_limit=t.day_limit,e.con_gold=t.con_gold,e.min_gold=t.min_gold,e.max_gold=t.max_gold,e.goodsList=Tools.changeToNodeDropList(t.add_item),this._flLuckConfig[e.type]||(this._flLuckConfig[e.type]=[]),this._flLuckConfig[e.type].push(e)}return this._flLuckConfig},s.createBlessConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_bless"),n=i.data_bless,s=[],a=0;a<n.length;a++)t=n[a],e=new BlessVO,e.template_id=t.template_id,e.give_type=t.give_type,e.take_type=t.take_type,e.is_radio=t.is_radio,e.panel_name=t.panel_name,s.push(e);return s},s.createBlessBuffConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_bless_buff"),n=i.data_bless_buff,s=[],a=0;a<n.length;a++)t=n[a],e=new BlessBuffVO,e.template_id=t.template_id,e.name=t.name,e.type=t.type,e.desc=t.desc,e.time=t.time,e.show=t.show,e.value1=t.value1,e.value2=t.value2,e.value3=t.value3,e.value4=t.value4,e.value5=t.value5,s.push(e);return s},s.createEggNumConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_flegg_num"),n=i.data_activity_flegg_num,s=[],a=0;a<n.length;a++)t=n[a],e=new FanLiEggNumVO,e.template_id=t.template_id,e.num=t.num,e.type=t.type,e.goodsList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},s.createFishNumConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_flfish_num"),n=i.data_activity_flfish_num,s=[],a=0;a<n.length;a++)t=n[a],e=new FanLiFishNumVO,e.template_id=t.template_id,e.num=t.num,e.type=t.type,e.goodsList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},s.createCircleCarnivalConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_flcircle"),n=i.data_activity_flcircle,s=[],a=0;a<n.length;a++)t=n[a],e=new FanliCircleCarnivalConfig,e.template_id=t.template_id,e.up=t.up,s.push(e);return s},s.createPetExploreConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_fltreasure"),n=i.data_activity_fltreasure,s=[],a=0;a<n.length;a++)t=n[a],e=new FanliPetExploreConfig,e.template_id=t.template_id,e.con_gold1=t.con_gold1,e.con_gold2=t.con_gold2,e.times_reward=Tools.changeToItemData(t.times_reward),e.show=Tools.changeToItemData(t.show),e.show_time=Tools.changeToItemData(t.show_time),s.push(e);return s},s.getPetExploreConfig=function(){return this._fanliPetExploreConfig||(this._fanliPetExploreConfig=this.createPetExploreConfig()),this._fanliPetExploreConfig[0]},s.getConfigZP=function(){for(var e,t,i=new Object,n=DataManager.getInstance().getObj("data_activity_flzp"),s=n.data_activity_flzp,a=0;a<s.length;a++)e=s[a],t=new FanLiZPTypeVO,t.template_id=e.template_id,t.type=e.type,t.zp_type=e.zp_type,t.need=e.need,i[t.type]||(i[t.type]=new Object),i[t.type][t.zp_type]=t;return i},s.getConfigZPNei=function(){for(var e,t,i=new Object,n=DataManager.getInstance().getObj("data_activity_flzp_nei"),s=n.data_activity_flzp_nei,a=0;a<s.length;a++)e=s[a],t=new FanLiZPVO,t.template_id=e.template_id,t.weight=e.type,t.zp_type=e.zp_type,t.reward=Tools.changeToItemData(e.reward),i[t.zp_type]||(i[t.zp_type]=[]),i[t.zp_type].push(t);return i},s.getConfigZPWai=function(){for(var e,t,i=new Object,n=DataManager.getInstance().getObj("data_activity_flzp_wai"),s=n.data_activity_flzp_wai,a=0;a<s.length;a++)e=s[a],t=new FanLiZPVO,t.template_id=e.template_id,t.weight=e.type,t.zp_type=e.zp_type,t.nei_type=e.nei_type,t.reward=Tools.changeToItemData(e.reward),i[t.zp_type]||(i[t.zp_type]=[]),i[t.zp_type].push(t);return i},s.getConfigShop=function(){for(var e,t,i=new Object,n=DataManager.getInstance().getObj("data_activity_fldh"),s=n.data_activity_fldh,a=0;a<s.length;a++)e=s[a],t=new FanLiShopVO,t.template_id=e.template_id,t.name=e.name,t.type=e.type,t.shop_id=e.shop_id,t.limit_num=e.limit_num,t.radio=e.radio,t.sort=e.sort,t.con_item=Tools.changeToItemData(e.con_item),i[t.type]||(i[t.type]=[]),i[t.type].push(t);return i},s.getConfigDFW=function(){for(var e,t,i=new Object,n=DataManager.getInstance().getObj("data_activity_fldfw"),s=n.data_activity_fldfw,a=0;a<s.length;a++)e=s[a],t=new FanliDFWVo,t.template_id=e.template_id,t.type=e.type,t.num=e.num,t.reward_wealth=e.reward_wealth,""!=e.reward_item&&"0"!=e.reward_item&&null!=e.reward_item&&(t.reward_item=Tools.changeToItemData(e.reward_item)),i[t.type]||(i[t.type]=[]),i[t.type].push(t);return i},s.getConfigDFWReward=function(){for(var e,t,i=new Object,n=DataManager.getInstance().getObj("data_activity_fldfw_reward"),s=n.data_activity_fldfw_reward,a=0;a<s.length;a++)e=s[a],t=new FanliDFWRewardVo,t.template_id=e.template_id,t.floor=e.floor,t.type=e.type,""!=e.reward&&"0"!=e.reward&&null!=e.reward&&(t.reward=Tools.changeToItemData(e.reward)),i[t.type]||(i[t.type]=[]),i[t.type].push(t);return i},s.getEggNumConfig=function(e){this._fanliEggConfig.length<=0&&(this._fanliEggConfig=this.createEggNumConfig());var t,i=[];for(var n in this._fanliEggConfig)t=this._fanliEggConfig[n],t.type==e&&i.push(t);return i},s.getEggNumVO=function(e){this._fanliEggConfig.length<=0&&(this._fanliEggConfig=this.createEggNumConfig());var t;for(var i in this._fanliEggConfig)if(t=this._fanliEggConfig[i],t.template_id==e)return t;return null},s.getFishNumConfig=function(e){this._fanliFishConfig.length<=0&&(this._fanliFishConfig=this.createFishNumConfig());var t,i=[];for(var n in this._fanliFishConfig)t=this._fanliFishConfig[n],t.type==e&&i.push(t);return i},s.getFishNumVO=function(e){this._fanliFishConfig.length<=0&&(this._fanliFishConfig=this.createFishNumConfig());var t;for(var i in this._fanliFishConfig)if(t=this._fanliFishConfig[i],t.template_id==e)return t;return null},s.getBlessConfig=function(){return this._blessConfig.length<=0&&(this._blessConfig=this.createBlessConfig()),this._blessConfig},s.getBlessBuffConfig=function(){return this._blessBuffConfig.length<=0&&(this._blessBuffConfig=this.createBlessBuffConfig()),this._blessBuffConfig},s.getBlessVO=function(e){this._blessConfig.length<=0&&(this._blessConfig=this.createBlessConfig());var t;for(var i in this._blessConfig)if(t=this._blessConfig[i],t.template_id==e)return t;return null},s.getBlessBuffVO=function(e){this._blessBuffConfig.length<=0&&(this._blessBuffConfig=this.createBlessBuffConfig());var t;for(var i in this._blessBuffConfig)if(t=this._blessBuffConfig[i],t.template_id==e)return t;return null},s.getFanLiLuckConfig=function(e){return this.createFanLiLuckConfig()[e]},s.getFanLiXfConfig=function(){return this._flxfConfig.length<=0&&(this._flxfConfig=this.createFanLiXfConfig()),this._flxfConfig},s.getFanLiXfVO=function(e){this._flxfConfig.length<=0&&(this._flxfConfig=this.createFanLiXfConfig());var t;for(var i in this._flxfConfig)if(t=this._flxfConfig[i],t.template_id==e)return t;return null},s.getFanLiLcConfig=function(){return this._fllcConfig.length<=0&&(this._fllcConfig=this.createFanLiLcConfig()),this._fllcConfig},s.getFanLiLcVO=function(e){this._fllcConfig.length<=0&&(this._fllcConfig=this.createFanLiLcConfig());var t;for(var i in this._fllcConfig)if(t=this._fllcConfig[i],t.template_id==e)return t;return null},s.getFanLiXgConfig=function(e){this._flxgConfig.length<=0&&(this._flxgConfig=this.createFanLiXgConfig());for(var t,i=[],n=0;n<this._flxgConfig.length;n++)t=this._flxgConfig[n],t.type==e&&i.push(t);return i},s.getFanLiXgVO=function(e){this._flxgConfig.length<=0&&(this._flxgConfig=this.createFanLiXgConfig());var t;for(var i in this._flxgConfig)if(t=this._flxgConfig[i],t.template_id==e)return t;return null},s.getLoginAwardVO=function(e){return this._loginAwardConfig.length<=0&&(this._loginAwardConfig=this.createLoginAwardConfig()),this._loginAwardConfig[e-1]},s.getLoginAwardConfig=function(){return this._loginAwardConfig.length<=0&&(this._loginAwardConfig=this.createLoginAwardConfig()),this._loginAwardConfig},s.getShowIconList=function(){function e(e,t){return Number(e.show)-Number(t.show)}if(this._showIconList=[],null==this._fanliDataList)return this._showIconList;for(var t,i,n=this._fanliDataList.length,s=0;n>s;s++)t=this._fanliDataList[s],i=this.getFanLiClientVO(t.act_id),null!=i&&this._showIconList.push(i);return this._showIconList.sort(e),this._showIconList},s.isCircleCarnivalOpen=function(){if(this._showIconList)for(var e=0;e<this._showIconList.length;e++){var i=this._showIconList[e];if(i.type==t.CIRCLE_CARNIVAL){var n=new Date;if(i.endDate.getTime()>n.getTime())return!0}}return!1},s.getCircleAddTimeByVip=function(e){this._fanliCircleCarnivalConfig||(this._fanliCircleCarnivalConfig=this.createCircleCarnivalConfig());for(var t=0;t<this._fanliCircleCarnivalConfig.length;t++)return this._fanliCircleCarnivalConfig[e].up;return 0},s.checkAddFanLiIcon=function(){return this.getShowIconList().length>0},s.reset=function(){this._showIconList=[]},s.setServerData=function(e){if(null==this._fanliDataList)this._fanliDataList=e.act_fl_list;else for(var t,i=0;i<e.act_fl_list.length;i++)t=e.act_fl_list[i],0==this.isHasNode(t)&&this._fanliDataList.push(t)},i(s,"fanLiDataList",function(){return this._fanliDataList}),s.isHasNode=function(e){var t;if(null==this._fanliDataList)return!1;for(var i=this._fanliDataList.length,n=0;i>n;n++)if(t=this._fanliDataList[n],t.act_id==e.act_id)return!0;return!1},s.deleteOneServerData=function(e){var t;if(null!=this._fanliDataList)for(var i=this._fanliDataList.length,n=0;i>n;n++)if(t=this._fanliDataList[n],t.act_id==e){this.fanLiDataList.splice(n,1),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.SCMD17601,{id:e}));break}},s.setFanLiLoginAwardData=function(e){var t=new FanLiLoginAwardServerVO;t.id=e.act_id,t.award_id=e.award_id,t.awarded_id=e.awarded_id,0==this.updateFanLiLoginAwardData(t)&&this._loginAwardDataArr.push(t),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.UPDATE_LOGIN_INFO))},s.updateFanLiLoginAwardData=function(e){var t;for(var i in this._loginAwardDataArr)if(t=this._loginAwardDataArr[i],t.id==e.id)return t.award_id=e.award_id,t.awarded_id=e.awarded_id,!0;return!1},s.getFanLiLoginAwardServerData=function(e){var t;for(var i in this._loginAwardDataArr)if(t=this._loginAwardDataArr[i],t.id==e)return t;return null},s.setFanLiXgData=function(e){if(null==this._xgDataObj[e.act_id])this._xgDataObj[e.act_id]=e.act_flxg_list;else for(var t,i,n=0;n<e.act_flxg_list.length;n++)t=e.act_flxg_list[n],i=this.getFanLiXgData(t.gift_id,e.act_id),null==i?this._xgDataObj[e.act_id].push(t):i.num=t.num;GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.UPDATE_XG_INFO))},s.getFanLiXgData=function(e,t){var i;for(var n in this._xgDataObj[t])if(i=this._xgDataObj[t][n],i.gift_id==e)return i;return null},s.setFanLiLcData=function(e){if(this.lc_totalCharge=e.total_charge,null==this._lcData[e.act_id])this._lcData[e.act_id]=e.act_fllc_list;else for(var t,i,n=0;n<e.act_fllc_list.length;n++)t=e.act_fllc_list[n],i=this.getFanLiLcData(t.award_id,e.act_id),null==i?this._lcData[e.act_id].push(t):i.flag=t.flag;GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.UPDATE_LC_INFO))},s.getFanLiLcData=function(e,t){var i;for(var n in this._lcData[t])if(i=this._lcData[t][n],i.award_id==e)return i;return null},s.setFanLiLuckData=function(e){if(this.fanLiLuckActId=e.act_id,this._luckDataArr.length<=0)this._luckDataArr=e.act_flluck_goods;else for(var t,i,n=0;n<e.act_flluck_goods.length;n++)t=e.act_flluck_goods[n],i=this.getFanLiLuckData(t.good_id),null==i?this._luckDataArr.push(t):(i.num=t.num,i.rand_gold=t.rand_gold);GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.UPDATE_LUCK_INFO))},s.getFanLiLuckData=function(e){var t;for(var i in this._luckDataArr)if(t=this._luckDataArr[i],t.good_id==e)return t;return null},s.setBlessBuffList=function(e){if(this.blessBuffList.length<=0)this.blessBuffList=e.bless_buffs;else for(var t,i,n=0;n<e.bless_buffs.length;n++)t=e.bless_buffs[n],i=this.getBlessBuffData(t.type),null==i?this.blessBuffList.push(t):(i.last_time=t.last_time,i.buff_id=t.buff_id);GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.CCMD19710_UPDATE))},s.getBlessBuffData=function(e){var t;for(var i in this.blessBuffList)if(t=this.blessBuffList[i],t.type==e)return t;return null},s.deleteBlessBuff=function(e){for(var t,i=this.blessBuffList.length,n=0;i>n;n++)if(t=this.blessBuffList[n],t.buff_id==e){this.blessBuffList.splice(n,1);break}GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.CCMD19710_UPDATE))},s.setEggData=function(e){if(null==this._eggData&&(this._eggData=new Object),(null==this._eggData[e.act_id]||void 0==this._eggData[e.act_id])&&(this._eggData[e.act_id]=new FanliEggDataVO),this._eggData[e.act_id].egg_actId=e.act_id,this._eggData[e.act_id].egg_resNum=e.num,this._eggData[e.act_id].egg_openNum=e.open_num,this._eggData[e.act_id].egg_freeNum=e.free_num,this._eggData[e.act_id].egg_LastTime=e.last_time,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.EGG_TIMES_CHANGE)),this._eggData[e.act_id].egg_list.length<=0)this._eggData[e.act_id].egg_list=e.act_flegg_list,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.EGG_NUM_CHANGE));else for(var t,i,n=0;n<e.act_flegg_list.length;n++)t=e.act_flegg_list[n],i=this.getEggData(e.act_id,t.slot),null==i?(this._eggData[e.act_id].egg_list.push(t),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.CCMD19900_UPDATE,{node:t}))):(i.flag=t.flag,i.cfg_id=t.cfg_id,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.CCMD19900_UPDATE,{node:i})))},s.getEggData=function(e,t){var i,n=this._eggData[e];if(null==n||void 0==n)return null;var s=n.egg_list;for(var a in s)if(i=s[a],i.slot==t)return i;return null},s.getFanliEggDataVO=function(e){return this._eggData[e]},s.setFishData=function(e){if(null==this._fishData&&(this._fishData=new Object),(null==this._fishData[e.act_id]||void 0==this._fishData[e.act_id])&&(this._fishData[e.act_id]=new FanLiFishDataVO),this._fishData[e.act_id].fish_actId=e.act_id,this._fishData[e.act_id].fish_resNum=e.num,this._fishData[e.act_id].fish_openNum=e.open_num,this._fishData[e.act_id].fish_freeNum=e.free_num,this._fishData[e.act_id].fish_LastTime=e.last_time,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.FISH_TIMES_CHANGE)),this._fishData[e.act_id].fish_list.length<=0)this._fishData[e.act_id].fish_list=e.act_flfish_list,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.FISH_NUM_CHANGE));else for(var t,i,n=0;n<e.act_flfish_list.length;n++)t=e.act_flfish_list[n],i=this.getFishData(e.act_id,t.slot),null==i?(this._fishData[e.act_id].fish_list.push(t),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.CCMD23700_UPDATE,{node:t}))):(i.flag=t.flag,i.cfg_id=t.cfg_id,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.CCMD23700_UPDATE,{node:i})))},s.getFishData=function(e,t){var i,n=this._fishData[e];if(null==n||void 0==n)return null;var s=n.fish_list;for(var a in s)if(i=s[a],i.slot==t)return i;return null},s.getFanliFishDataVO=function(e){return null==this._fishData||void 0==this._fishData?null:this._fishData[e]},s.setFanLiXfData=function(e){if(this.xf_actId=e.act_id,this.xf_totalGold=e.total_consume,this.xfDataArr.length<=0)this.xfDataArr=e.act_flxf_list;else for(var t,i,n=0;n<e.act_flxf_list.length;n++)t=e.act_flxf_list[n],i=this.getXfData(t.award_id),null==i&&this.xfDataArr.push(t);GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.CCMD21700_UPDATE))},s.getXfData=function(e){var t;for(var i in this.xfDataArr)if(t=this.xfDataArr[i],t.award_id==e)return t;return null},s.checkIconRedDot=function(){var e,i=!1;if(null==this._fanliDataList||this._fanliDataList.length<=0)return!1;for(var n,s=this._fanliDataList.length,a=0;s>a;a++)if(e=this._fanliDataList[a],n=this.getFanLiClientVO(e.act_id),null!=n){switch(n.type){case t.LOGIN_AWARD:i=this.checkLoginAwardCanGet();break;case t.XIANGGOU:i=this.checkLimitGiftCanBuy();break;case t.LEICHANG:i=this.checkLcAwardCanGet();break;case t.ZHUAN:i=this._isZhuan;break;case t.LOGIN_LUCK:i=0==DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_45);break;case t.XF:i=this.checkFanliXfAwardCanGet();break;case t.DAILY_CHARGE:i=this.checkFanliDailyChargeRewardCanGet(this.getFanliOpenDay(n.template_id),n.template_id);break;case t.SHOP_QIZHEN_ZHUAN:i=MallModel.getInstance().getShopQizhenCount()>0;break;case t.DFW:i=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2025)}if(i)break}else Message.show("vo为null cnode.act_id = "+e.act_id);return i},s.checkLoginAwardCanGet=function(){var e;for(var t in this._loginAwardDataArr)if(e=this._loginAwardDataArr[t],e.award_id>e.awarded_id)return!0;return!1},s.checkLimitGiftCanBuy=function(){return!1},s.checkLimitGiftCanBuyOne=function(e){return!1},s.checkLcAwardCanGet=function(){var e,t,i=this.getFanLiLcConfig();for(var n in i)if(t=i[n],e=this.getFanLiLcData(t.template_id,t.type),e&&0==e.flag&&this.lc_totalCharge>=t.need)return!0;return!1},s.checkLcAwardCanGetOne=function(e){var t,i,n=this.getFanLiLcConfig();if(null==this._lcData[e])return!1;if(this._lcData[e].length<n.length){for(var s in n)if(i=n[s],i.type==e&&(t=this.getFanLiLcData(i.template_id,e),t&&0==t.flag&&this.lc_totalCharge>=i.need))return!0;return!1}for(var a in this._lcData[e])if(t=this._lcData[e][a],i=this.getFanLiLcVO(t.award_id),i.type==e&&t&&0==t.flag&&this.lc_totalCharge>=i.need)return!0;return!1},s.checkFanliXfAwardCanGet=function(){var e,t,i=this.getFanLiXfConfig();for(var n in i)if(t=i[n],e=this.getXfData(t.template_id),null==e&&this.xf_totalGold>=t.need)return!0;return!1},s.checkFanliDailyChargeRewardCanGet=function(e,t){var i,n=this.getFanliDailyChargeConfig(e);
for(var s in n)if(i=n[s],i.type==t&&1==this.checkFanliDailyChargeRewardCanGetById(i))return!0;return!1},s.checkFanliDailyChargeRewardCanGetById=function(e){var t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_14,0),i=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_21801,e.template_id);return i>0?!1:t>=e.need?!0:!1},s.checkZhuanCanGet=function(e){this._isZhuan=e},i(s,"isCanZhuan",function(){return this._isZhuan}),s.getNumArr=function(){return this.getConfigItemNum()},s.getMuArr=function(){return this.getConfigItemMu()},s.getLoginLuckArr=function(){return this.getConfigLoginLuck()},s.getFanliOpenDay=function(e){var t=0,i=this.getFanLiClientVO(e);if(null==i)return t;var n=1e3*RoleModel.getInstance().serverTime,s=i.startDate.getTime(),a=Math.floor((n-s)/1e3/60/60/24);return t=a},s.checkHasFanliData=function(e){if(null==this.fanLiDataList)return!1;for(var t,i=this._fanliDataList.length,n=0;i>n;n++)if(t=this._fanliDataList[n],t.act_id==e)return!0;return!1},s.checkHasFanliDataByType=function(e){if(null==this.fanLiDataList)return null;for(var t,i,n=this._fanliDataList.length,s=0;n>s;s++)if(t=this._fanliDataList[s],i=this.getFanLiClientVO(t.act_id),i&&i.type==e)return i;return null},s.getShopList=function(e){return this.getConfigShop()[e]},t.LUCK=6,t.LOGIN_AWARD=5,t.XIANGGOU=4,t.LEICHANG=2,t.ZHUAN=3,t.LOGIN_LUCK=1,t.EGG=7,t.BLESS=8,t.XF=9,t.DAILY_CHARGE=10,t.SHOP_QIZHEN=11,t.SHOP_QIZHEN_ZHUAN=12,t.JUBAO=16,t.ACTIVITY_BACK=13,t.ACTIVITY_YY=14,t.ACTIVITY_OFF=15,t.ZP=17,t.FISH=19,t.SHOP=18,t.DFW=20,t.CIRCLE_CARNIVAL=21,t.PET_EXPLORE=22,t}(egret.EventDispatcher);egret.registerClass(FanLiModel,"FanLiModel");var FanLiShopVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanLiShopVO,"FanLiShopVO");var FanLiXfVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanLiXfVO,"FanLiXfVO");var FanLiXgVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanLiXgVO,"FanLiXgVO");var FanLiZPTypeVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanLiZPTypeVO,"FanLiZPTypeVO");var FanLiZPVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanLiZPVO,"FanLiZPVO");var FanliCircleCarnivalConfig=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanliCircleCarnivalConfig,"FanliCircleCarnivalConfig");var FanliDFWRewardVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanliDFWRewardVo,"FanliDFWRewardVo");var FanliDFWVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanliDFWVo,"FanliDFWVo");var FanliDailyChargeVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanliDailyChargeVO,"FanliDailyChargeVO");var FanliEggDataVO=function(){function e(){this.egg_actId=0,this.egg_resNum=0,this.egg_openNum=0,this.egg_freeNum=0,this.egg_LastTime=0,this.egg_list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanliEggDataVO,"FanliEggDataVO");var FanliLoginLuckVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanliLoginLuckVo,"FanliLoginLuckVo");var FanliPetExploreConfig=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FanliPetExploreConfig,"FanliPetExploreConfig");var FashionModel=function(e){function t(){e.call(this),this._fashionConfig=[],this._fashionRoleConfig=[],this._fashionWeaponConfig=[],this._fashionWingConfig=[],this._fashionServerData=new Object}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},n.createFashionConfig=function(){for(var e,i,n=DataManager.getInstance().getObj("data_fashion"),s=n.data_fashion,a=[],o=0;o<s.length;o++)e=s[o],i=new FashionDataVO,i.template_id=e.template_id,i.type=e.type,i.goodsList=Tools.changeToNodeDropList(e.con_item),i.hp=e.hp,i.mp=e.mp,i.attack=e.att,i.att_def=e.att_def,i.magic_def=e.magic_def,i.crit=e.crit,i.crit_hurt=e.crit_hurt,i.crit_def=e.crit_def,i.palsy_rate=e.palsy_rate,i.palsy_def=e.palsy_def,i.hurt_up=e.hurt_up,i.hurt_def=e.hurt_def,i.hp_up=e.hp_up,a.push(i),i.type==t.ROLE?this._fashionRoleConfig.push(i):i.type==t.WEAPON?this._fashionWeaponConfig.push(i):i.type==t.WING&&this._fashionWingConfig.push(i);return a},n.getFashionConfigVO=function(e){this._fashionConfig.length<=0&&(this._fashionConfig=this.createFashionConfig());var t;for(var i in this._fashionConfig)if(t=this._fashionConfig[i],t.template_id==e)return t;return null},n.getFashionConfig=function(e){return this._fashionConfig.length<=0&&(this._fashionConfig=this.createFashionConfig()),e==t.ROLE?this._fashionRoleConfig:e==t.WEAPON?this._fashionWeaponConfig:e==t.WING?this._fashionWingConfig:this._fashionConfig},n.deleteFashion=function(e){if(!this._fashionServerData[e.partner_id]||void 0==this._fashionServerData[e.partner_id])return null;for(var t,i=this._fashionServerData[e.partner_id],n=i.length,s=0;n>s;s++)if(t=i[s],t&&t.template_id==e.template_id){i.splice(s,1);break}this.dispatchEvent(new ParamEvent(FashionEvtName.FASHION_UPDATE_INFO))},n.updateFashionInfo=function(e){var t;this._fashionServerData[e.partner_id]&&void 0!=this._fashionServerData[e.partner_id]||(this._fashionServerData[e.partner_id]=new Array);for(var i=0;i<e.fashion_list.length;i++)t=e.fashion_list[i],this.checkHas(t,e.partner_id);RedDotsModel.getInstance().calMainFigureIconRedDot(),this.dispatchEvent(new ParamEvent(FashionEvtName.FASHION_UPDATE_INFO))},n.checkHas=function(e,t){for(var i,n=0;n<this._fashionServerData[t].length;n++)if(i=this._fashionServerData[t][n],i.template_id==e.template_id)return i.last_time=e.last_time,this.dispatchEvent(new ParamEvent(FashionEvtName.FASHION_UPDATE_ONE_INFO,{type:e.template_id})),!0;return this._fashionServerData[t].push(e),!1},n.getFashionServerData=function(e,t){if(!this._fashionServerData[e]||void 0==this._fashionServerData[e])return null;for(var i,n=0;n<this._fashionServerData[e].length;n++)if(i=this._fashionServerData[e][n],i&&i.template_id==t)return i},n.checkFashionCanActive=function(){this.getFashionConfig(0);var e,t,i=RoleModel.getInstance().getPartnerList();for(var n in i)if(e=i[n],t=this.checkFashionCanActiveByPartnerAndType(e,0))return!0;return!1},n.checkFashionCanActiveByType=function(e){var t,i,n=(this.getFashionConfig(e),RoleModel.getInstance().getPartnerList());for(var s in n)if(t=n[s],i=this.checkFashionCanActiveByPartnerAndType(t,e))return!0;return!1},n.checkFashionCanActiveByPartnerAndType=function(e,t){void 0===t&&(t=0);for(var i,n=this.getFashionConfig(t),s=n.length,a=0;s>a;a++)if(i=n[a],1==this.checkFashionCanActiveByEquip(i,e))return!0;return!1},n.checkFashionCanActiveByEquip=function(e,t){var i,n=0;return n=GoodsListProxy.getInstance().findGoodNumber(e.goodsList[0].asset_id),i=this.getFashionServerData(t.parnerID,e.template_id),null==i&&n>=e.goodsList[0].value?!0:!1},t.ROLE=1,t.WEAPON=2,t.WING=3,t}(egret.EventDispatcher);egret.registerClass(FashionModel,"FashionModel");var FashionDataVO=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(PropertyVO);egret.registerClass(FashionDataVO,"FashionDataVO");var FigureModel=function(e){function t(){e.call(this),this._specialEquipList=[],this._specialServerData=new Object,this._openPartnerList=[],this._shenlianList=[],this.tastePartner_flag=0,this.tastePartner_time=0}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},i(s,"selectedPartnerVO",function(){return this._selectedPartnerVO},function(e){this._selectedPartnerVO=e,this._selectedPartnerVOInFigureWin=e,this.dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_SELECTED_PARTNER))}),i(s,"selectedPartnerVOInFigureWin",function(){return this._selectedPartnerVOInFigureWin}),i(s,"selectedPartnerVO2",void 0,function(e){this._selectedPartnerVO=e}),i(s,"selectedpartnerVOInSpeicalWin",function(){return this._selectedpartnerVOInSpeicalWin},function(e){this._selectedpartnerVOInSpeicalWin=e}),i(s,"selectedpartnerVOInDominateWin",function(){return this._selectedpartnerVOInDominateWin},function(e){this._selectedpartnerVOInDominateWin=e,this.dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_SELECTED_PARTNER_IN_DOMINATE))}),i(s,"selectedpartnerVOInFashionWin",function(){return this._selectedpartnerVOInFashionWin},function(e){this._selectedpartnerVOInFashionWin=e,this.dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_SELECTED_PARTNER_IN_FASHION))}),s.setTastePartnerInfo=function(e){this.tastePartner_flag=e.flag,this.tastePartner_time=e.last_time,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FigureEvtName.TASTE_UPDATE_INFO))},s.updateSpecialEquipInfo=function(e){var t;this._specialServerData[e.partner_id]&&void 0!=this._specialServerData[e.partner_id]||(this._specialServerData[e.partner_id]=new Array);for(var i=0;i<e.spec_equips.length;i++)t=e.spec_equips[i],this.checkHas(t,e.partner_id);RedDotsModel.getInstance().calMainFigureIconRedDot(),this.dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_UPDATE_SPECIALEQUIP))},s.checkHas=function(e,t){for(var i,n=0;n<this._specialServerData[t].length;n++)if(i=this._specialServerData[t][n],i.type==e.type)return i.level=e.level,this.dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_UPDATE_ONE_SPECIALEQUIP,{type:e.type})),!0;return this._specialServerData[t].push(e),this.dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_UPDATE_ONE_SPECIALEQUIP,{type:e.type})),!1},s.getSpecialEquipServerData=function(e,t){if(!this._specialServerData[e]||void 0==this._specialServerData[e])return null;for(var i,n=0;n<this._specialServerData[e].length;n++)if(i=this._specialServerData[e][n],i&&i.type==t)return i},s.getTotalSpecialEquipLvByType=function(e){for(var t,i,n=0,s=RoleModel.getInstance().getPartnerList(),a=s.length,o=0;a>o;o++)i=s[o],t=this.getSpecialEquipServerData(i.parnerID,e),t&&(n+=t.level);return n},s.getSpecialEquipData=function(e,t){this._specialEquipList.length<=0&&(this._specialEquipList=this.createDataList());for(var i,n=this._specialEquipList.length,s=0;n>s;s++)if(i=this._specialEquipList[s],i.type==e&&i.level==t)return i;return null},s.getSpecialEquipsCanUpOrActive=function(){var e,i=RoleModel.getInstance().getPartnerList();if(null==i||void 0==i)return!1;for(var n,s,a=0,o=0,r=0;r<i.length;r++){e=i[r];for(var h=1;5>h;h++)if(n=this.getSpecialEquipServerData(e.parnerID,h),n&&(o=n.level),s=t.getInstance().getSpecialEquipData(h,o+1),s&&(a=GoodsListProxy.getInstance().findGoodNumber(s.con_itemid),a>=s.con_count))return!0}return!1},s.getSpecialEquipsCanUpOrActiveByPartner=function(e){for(var i,n,s=0,a=0,o=1;5>o;o++)if(i=this.getSpecialEquipServerData(e.parnerID,o),a=i?i.level:0,n=t.getInstance().getSpecialEquipData(o,a+1),n&&(s=GoodsListProxy.getInstance().findGoodNumber(n.con_itemid),s>=n.con_count))return!0;return!1},s.getSpecialEquipSingleCanUpOrActive=function(e,i){var n,s,a=0,o=0;return n=this.getSpecialEquipServerData(e.parnerID,i),o=n?n.level:0,s=t.getInstance().getSpecialEquipData(i,o+1),s&&(a=GoodsListProxy.getInstance().findGoodNumber(s.con_itemid),a>=s.con_count)?!0:!1},s.getEquipsCanWear=function(e,t,i){void 0===e&&(e=!1),void 0===t&&(t=!0),void 0===i&&(i=!1);var n,s,a=RoleModel.getInstance().getPartnerList();for(var o in a)if(n=a[o],s=GoodsListProxy.getInstance().checkCanWearEquip(n,e,t,i))return!0;return!1},s.getEquipsCanWearByPartner=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var n;return n=GoodsListProxy.getInstance().checkCanWearEquip(e,t,!1,i),n?!0:!1},s.createDataList=function(){for(var e,t,i,n=DataManager.getInstance().getObj("data_specialequip"),s=n.data_specialequip,a=[],o=0;o<s.length;o++)e=s[o],t=new SpecialEqupVO,t.template_id=e.template_id,t.name=e.name,t.type=e.type,t.level=e.level,t.con_item=e.con_item,i=t.con_item.match(/\d+/g),t.con_itemid=parseInt(i[0]),t.con_count=parseInt(i[1]),t.hp=e.hp,t.mp=e.mp,t.attack=e.att,t.att_def=e.att_def,t.magic_def=e.magic_def,t.crit=e.crit,t.crit_hurt=e.crit_hurt,t.crit_def=e.crit_def,t.palsy_rate=e.palsy_rate,t.palsy_def=e.palsy_def,t.hurt_up=e.hurt_up,t.hurt_def=e.hurt_def,t.hp_up=e.hp_up,a.push(t);return a},s.createGodupDataList=function(){for(var e,t,i=DataManager.getInstance().getObj("data_godup"),n=i.data_godup,s=[],a=0;a<n.length;a++)e=n[a],t=new ShenlianVO,t.template_id=e.template_id,t.grow_up=e.grow_up,t.goodsList=Tools.changeToNodeDropList(e.con_item),s.push(t);return s},s.getShenlianVO=function(e){this._shenlianList.length<=0&&(this._shenlianList=this.createGodupDataList());for(var t,i=this._shenlianList.length,n=0;i>n;n++)if(t=this._shenlianList[n],t.template_id==e)return t;return null},s.getOpenpartnerVO=function(e){this._openPartnerList.length<=0&&(this._openPartnerList=this.createOpenpartnerList());for(var t,i=this._openPartnerList.length,n=0;i>n;n++)if(t=this._openPartnerList[n],t.template_id==e)return t;return null},s.getOpenpartnerConfig=function(){return this._openPartnerList.length<=0&&(this._openPartnerList=this.createOpenpartnerList()),this._openPartnerList},s.createOpenpartnerList=function(){for(var e,t,i=DataManager.getInstance().getObj("data_partner_open"),n=i.data_partner_open,s=[],a=0;a<n.length;a++)e=n[a],t=new OpenpartnerVO,t.template_id=e.template_id,t.desc=e.desc,t.round=Number(e.round),t.vip=Number(e.vip),t.lv=Number(e.lv),t.goodsList=Tools.changeToNodeDropList(e.add_item),s.push(t);return s},s.setShenlianInfo=function(e){null==this._shenlianInfo&&(this._shenlianInfo=new Object),null==this._shenlianInfo[e.partner_id]&&(this._shenlianInfo[e.partner_id]=new Object),this._shenlianInfo[e.partner_id].level=e.level,RedDotsModel.getInstance().calMainFigureIconRedDot(),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FigureEvtName.CCMD23000_UPDATE))},s.getShenlianLevel=function(e){return null==this._shenlianInfo?0:null==this._shenlianInfo[e]?0:this._shenlianInfo[e].level},s.getShenlianTotalLevel=function(){var e,t=RoleModel.getInstance().getPartnerList(),i=0;for(var n in t)e=t[n],i+=this.getShenlianLevel(e.parnerID);return i},s.checkShenlianCanUp=function(){if(!FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_51,!1))return!1;var e,t,i=RoleModel.getInstance().getPartnerList();for(var n in i)if(e=i[n],t=this.checkShenlianCanUpByPid(e.parnerID))return!0;return!1},s.checkShenlianCanUpByPid=function(e){if(!FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_51))return!1;var i,n=this.getShenlianLevel(e),s=t.getInstance().getShenlianVO(n+1);if(s){i=GoodsListProxy.getInstance().getGoodsInfoByType(s.goodsList[0].asset_id);var a=GoodsListProxy.getInstance().findGoodNumber(s.goodsList[0].asset_id);if(a>=s.goodsList[0].value)return!0}return!1},t.specialEquipDic=[14010001,14020001,14030001,14040001],t}(egret.EventDispatcher);egret.registerClass(FigureModel,"FigureModel");var OpenpartnerVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(OpenpartnerVO,"OpenpartnerVO");var ShenlianVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ShenlianVO,"ShenlianVO");var SpecialEqupVO=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(PropertyVO);egret.registerClass(SpecialEqupVO,"SpecialEqupVO");var FirstChargeFiveVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FirstChargeFiveVO,"FirstChargeFiveVO");var FirstChargeModel=function(e){function t(){e.call(this),this._chargeFiveConfig=[],this.firstChargeGetRewardTime=0,this.firstChargeFiveReward=0,this._chargedObj=new Object,this._chargeData=[],this.createBasic()}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.createChargeFiveConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_charge_five"),n=i.data_charge_five,s=[],a=0;a<n.length;a++)t=n[a],e=new FirstChargeFiveVO,e.template_id=t.template_id,e.num=t.num,e.re_num=t.re_num,e.android_id=t.android_id,e.ios_id=t.ios_id,s.push(e);return s},n.createBasic=function(){for(var e,t,i=DataManager.getInstance().getObj("data_first_charge"),n=i.data_first_charge,s=0;s<n.length;s++)e=n[s],t=new FirstChargeVO,t.template_id=e.template_id,t.type=e.type,t.num=e.num,t.itemList=Tools.changeToItemData(e.add_item),this._chargedObj[t.template_id]=t},n.getChargeFiveVO=function(e){this._chargeFiveConfig.length<=0&&(this._chargeFiveConfig=this.createChargeFiveConfig());var t;for(var i in this.createChargeFiveConfig)if(t=this.createChargeFiveConfig[i],t.template_id==e)return t;return null},n.getChargeFiveConfig=function(){return this._chargeFiveConfig.length<=0&&(this._chargeFiveConfig=this.createChargeFiveConfig()),this._chargeFiveConfig},n.getChargeVoById=function(e){return this._chargedObj[e]},n.getItemListById=function(e){for(var t=[],i=this._chargedObj[e].itemList,n=0;n<i.length;n++)!i[n]||i[n].info.req_career!=RoleModel.getInstance().getRoleBaseInfo().getCareer()&&0!=i[n].info.req_career||t.push(i[n]);return t},n.getData=function(){return this._chargeData},n.updateData=function(e){for(var t,i,n=!1,s=0;s<e.length;s++){i=e[s],n=!1;for(var a=0;a<this._chargeData.length;a++)t=this._chargeData[a],t.award_id==i.award_id&&(t.flag=i.flag,n=!0);n||this._chargeData.push(i)}},n.getFirstChargeRewardTimes=function(){for(var e,i=t.getInstance().getData(),n=0,s=0;s<i.length;s++)e=i[s],e.flag&&n++;return n},t}(egret.EventDispatcher);egret.registerClass(FirstChargeModel,"FirstChargeModel");var FirstChargeVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FirstChargeVO,"FirstChargeVO");var FixedNumModel=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},n.setFixedServerInfo=function(e){if(null==this._fixedNumArr)this._fixedNumArr=e.fixed_nums;else for(var t,i=0;i<e.fixed_nums.length;i++)t=e.fixed_nums[i],0==this.updateFixedNumNode(t)&&(this._fixedNumArr.push(t),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(DailyEvtName.FIXED_DATA_CHANGE,{data:t})));GameDispatcher.getInstance().dispatchEvent(new ParamEvent(DailyEvtName.FIXED_DATA_UPDATE))},n.updateFixedNumNode=function(e){for(var t,i=!1,n=0;n<this._fixedNumArr.length;n++)if(t=this._fixedNumArr[n],t.type==e.type&&t.sub_type==e.sub_type)return t.value!=e.value&&(i=!0),t.value=e.value,i&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(DailyEvtName.FIXED_DATA_CHANGE,{data:e})),!0;return!1},n.getFixedNumNode=function(e,t){void 0===t&&(t=0);var i;if(null==this._fixedNumArr)return null;for(var n=0;n<this._fixedNumArr.length;n++)if(i=this._fixedNumArr[n],i.type==e&&i.sub_type==t)return i;return null},n.getFixedNum=function(e,t){void 0===t&&(t=0);var i,n=0;if(null==this._fixedNumArr)return null;for(var s=0;s<this._fixedNumArr.length;s++)i=this._fixedNumArr[s],i.type==e&&i.sub_type==t&&(n=i.value);return n},t.FIXED_NUM_TYPE1=1,t.FIXED_NUM_TYPE2=2,t.FIXED_NUM_TYPE3=3,t.FIXED_NUM_TYPE5=5,t.FIXED_NUM_TYPE6=6,t.FIXED_NUM_TYPE7=7,t.FIXED_NUM_TYPE9=9,t.FIXED_NUM_TYPE10=10,t.FIXED_NUM_TYPE22901=22901,t.FIXED_NUM_TYPE24301=24301,t.FIXED_NUM_TYPE24302=24302,t.FIXED_NUM_TYPE12500=12500,t.FIXED_NUM_TYPE24701=24701,t}(egret.EventDispatcher);egret.registerClass(FixedNumModel,"FixedNumModel");var ForgemindModel=function(e){function t(){e.call(this),this._specialServerData=new Object,this._dataList=[],this._dataPropertyList=[]}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},n.updateForgemindInfo=function(e){var t;if(!this._specialServerData[e.partner_id]||void 0==this._specialServerData[e.partner_id])return this._specialServerData[e.partner_id]=e.forge_mind_list,void this.dispatchEvent(new ParamEvent(ForgemindEvtName.FORGEMIND_UPDATE_INFO));for(var i=0;i<e.forge_mind_list.length;i++)t=e.forge_mind_list[i],this.checkHas(t,e.partner_id);this.dispatchEvent(new ParamEvent(ForgemindEvtName.FORGEMIND_UPDATE_INFO))},n.checkHas=function(e,t){for(var i,n=0;n<this._specialServerData[t].length;n++)if(i=this._specialServerData[t][n],i.slot==e.slot)return!0;return this._specialServerData[t].push(e),!1},n.isActived=function(e,t){if(!this._specialServerData[t]||void 0==this._specialServerData[t])return!1;var i;for(var n in this._specialServerData[t])if(i=this._specialServerData[t][n],i.slot==e)return!0;return!1},n.getDataVO=function(e){this._dataList.length<=0&&(this._dataList=this.createDataList());var t;for(var i in this._dataList)if(t=this._dataList[i],t.type_id==e)return t;return null},n.getDataPropertyVO=function(e){this._dataPropertyList.length<=0&&(this._dataPropertyList=this.createPropertyDataList());var t;for(var i in this._dataPropertyList)if(t=this._dataPropertyList[i],t.type_id==e)return t;return null},n.createDataList=function(){for(var e,t,i,n=DataManager.getInstance().getObj("data_forge_mind"),s=n.data_forge_mind,a=[],o=0;o<s.length;o++)e=s[o],t=new ForgemindDataVO,t.type_id=e.type_id,t.con_item=e.con_item,i=t.con_item.match(/\d+/g),t.con_itemid=parseInt(i[0]),t.con_count=parseInt(i[1]),a.push(t);return a},n.createPropertyDataList=function(){for(var e,t,i=DataManager.getInstance().getObj("data_forge_mind_att"),n=i.data_forge_mind_att,s=[],a=0;a<n.length;a++)e=n[a],0==this.checkIsIn(e,s)&&(t=new ForgemindPropertyVO,t.template_id=e.template_id,t.type_id=e.type_id,t.setValue(Number(e.att_id),Number(e.att_val)),s.push(t));return s},n.checkIsIn=function(e,t){var i;for(var n in t)if(i=t[n],i.type_id==Number(e.type_id))return i.setValue(Number(e.att_id),Number(e.att_val)),!0;return!1},n.getForemindCanLevelupOrActive=function(){var e,i,n=RoleModel.getInstance().getPartnerList();if(null==n||void 0==n)return!1;for(var s,a=0;a<n.length;a++){i=n[a];for(var o=1;9>o;o++)if(e=t.getInstance().getDataVO(o),e&&0==this.isActived(o,i.parnerID)&&(s=GoodsListProxy.getInstance().findGoodNumber(e.con_itemid),s>=e.con_count))return!0}return!1},t}(egret.EventDispatcher);egret.registerClass(ForgemindModel,"ForgemindModel");var ForgemindDataVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ForgemindDataVO,"ForgemindDataVO");var ForgemindPropertyVO=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(PropertyVO);egret.registerClass(ForgemindPropertyVO,"ForgemindPropertyVO");var FriendModel=function(e){function t(){e.call(this),this._friendList=[],this._friendData=new Object,this._blackList=[],this._blackData=new Object,this._checkList=[]}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.getFriendLastList=function(){for(var e,t=[],i=0;i<this._friendList.length;i++)e=this._friendList[i],e.LatelyTime>0&&t.push(e);return t},n.getFriendList=function(){return this._friendList},n.getFriendIndexById=function(e){for(var t,i=0;i<this._friendList.length;i++)if(t=this._friendList[i],t&&t.role_id==e)return i;return-1},n.updateFriendList=function(e){for(var t,i,n=0;n<e.length;n++)i=e[n],this._friendData[i.role_id]=i,t=this.getFriendIndexById(i.role_id),t>=0?this._friendList[t]=i:this._friendList.push(i)},n.getFriendData=function(e){return this._friendData[e]},n.getBlackList=function(){return this._blackList},n.getBlackIndexById=function(e){for(var t,i=0;i<this._blackList.length;i++)if(t=this._blackList[i],t&&t.role_id==e)return i;return-1},n.updateBlackList=function(e){for(var t,i,n=0;n<e.length;n++)i=e[n],this._blackData[i.role_id]=i,t=this.getBlackIndexById(i.role_id),t>=0?this._blackList[t]=i:this._blackList.push(i)},n.checkIsBlack=function(e){return this._blackData[e]},n.getCheckIndexById=function(e){for(var t,i=0;i<this._checkList.length;i++)if(t=this._checkList[i],t&&t.role_id==e)return i;return-1},n.updateCheckList=function(e){for(var t,i,n=0;n<e.length;n++)i=e[n],t=this.getCheckIndexById(i.role_id),t>=0?this._checkList[t]=i:this._checkList.push(i)},n.delList=function(e,t){for(var i,n,s=0;s<e.length;s++)n=e[s],1==t?(this._friendData[n.role_id]=null,i=this.getFriendIndexById(n.role_id),this._friendList.splice(i,1),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11700_UPDATE))):2==t?(this._blackData[n.role_id]=null,i=this.getBlackIndexById(n.role_id),this._blackList.splice(i,1),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11701_UPDATE))):3==t&&(i=this.getCheckIndexById(n.role_id),this._checkList.splice(i,1),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11702_UPDATE)))},n.getCheckList=function(){return this._checkList},t}(egret.EventDispatcher);egret.registerClass(FriendModel,"FriendModel");var QQFriendInfoVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(QQFriendInfoVo,"QQFriendInfoVo");var FBMonsterVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FBMonsterVo,"FBMonsterVo");var FubenEquipVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FubenEquipVo,"FubenEquipVo");var FubenModel=function(e){function t(){e.call(this),this.fuBenID=0,this.fuBenID_equip=0,this.isContinue=!1,this._fubenObj=new Object,this.createBasic()}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},s.createBasic=function(){for(var e,t,i,n=DataManager.getInstance().getObj("data_fuben_material"),s=n.data_fuben_material,a=0;a<s.length;a++)e=s[a],t=new FubenVO,t.template_id=e.template_id,t.name=e.name,t.scene_id=e.scene_id,t.mon_id=e.mon_id,t.mon_pos=e.mon_pos,t.boss_id=parseInt(e.boss_id),i=e.boss_pos.match(/\d+/g),t.boss_pos=new Point(parseInt(i[0]),parseInt(i[1])),t.sweep=e.sweep,t.sweep_award=e.sweep_award,t.time=e.time,t.sweep_time=e.sweep_time,t.itemList=Tools.changeToItemData(e.show),t.setMonsterList(e.mon_id,e.mon_pos),this._fubenObj[t.template_id]=t},s.getTiaozhanConfig=function(){if(null==this._tiaozhanObj){this._tiaozhanObj=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_fuben_challenge"),n=i.data_fuben_challenge,s=0;s<n.length;s++)t=n[s],e=new FubenTiaozhanVO,e.template_id=t.template_id,e.boss_id=t.boss_id,e.scene_id=t.scene_id,e.boss_pos=t.boss_pos,e.show_att=t.show_att,e.show=Tools.changeToItemData(t.show),e.hp=t.hp,e.mp=t.mp,e.att=t.att,e.att_def=t.att_def,e.magic_def=t.magic_def,e.crit=t.crit,e.crit_hurt=t.crit_hurt,e.crit_def=t.crit_def,e.palsy_rate=t.palsy_rate,e.palsy_def=t.palsy_def,e.hurt_up=t.hurt_up,e.hurt_def=t.hurt_def,e.hp_up=t.hp_up,this._tiaozhanObj[e.template_id]=e}return this._tiaozhanObj},s.getEquipConfig=function(){if(null==this._equipObj){this._equipObj=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_fuben_equip"),n=i.data_fuben_equip,s=0;s<n.length;s++)t=n[s],e=new FubenEquipVo,e.template_id=t.template_id,e.boss_id=t.boss_id,e.buy=t.buy,e.name=t.name,e.open_level=t.open_level,e.open_round=t.open_round,e.itemList=Tools.changeToItemData(t.show_award),e.con_item=Tools.changeToItemData(t.con_item),e.boss_scene_id=t.boss_scene_id,e.time=t.time,this._equipObj[e.template_id]=e}return this._equipObj},s.getInfoById=function(e){return this._fubenObj[e]},i(s,"isHasFuben",function(){return this.isHasCailao?!0:!1}),i(s,"isHasCailao",function(){for(var e,t,i,n=FunctionOpenModel.FUBEN_CAILIAO,s=1;4>=s;s++){if(e=this.getInfoById(s),t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_6,s),i=FunctionOpenModel.getInstance().getFunctionOpenVO(n).open_level,e.time>t&&RoleModel.getInstance().getRoleCommon().level>=i)return!0;n++}return!1}),s.getTiaozhanVo=function(e){return this.getTiaozhanConfig()[e]},s.getProStr=function(e){var t=this.getTiaozhanVo(e.template_id-1),i="",n=0;return e.hp>0&&(i+="生命："+(e.hp-t.hp),n++,n%2==0?(n=0,i+="\n"):i+="  "),e.mp>0&&(i+="魔法："+(e.mp-t.mp),n++,n%2==0?(n=0,i+="\n"):i+="  "),e.att>0&&(i+="攻击："+(e.att-t.att),n++,n%2==0?(n=0,i+="\n"):i+="  "),e.att_def>0&&(i+="物防："+(e.att_def-t.att_def),n++,n%2==0?(n=0,i+="\n"):i+="  "),e.magic_def>0&&(i+="法防："+(e.magic_def-t.magic_def),n++,n%2==0?(n=0,i+="\n"):i+="  "),e.crit>0&&(i+="暴击："+(e.crit-t.crit)/100+"%\n",n++,n%2==0?(n=0,i+="\n"):i+="  "),e.crit_hurt>0&&(i+="暴击伤害："+(e.crit_hurt-t.crit_hurt)/100+"%\n",n++,n%2==0?(n=0,i+="\n"):i+="  "),e.crit_def>0&&(i+="抗暴："+(e.crit_def-t.crit_def)/100+"%\n",n++,n%2==0?(n=0,i+="\n"):i+="  "),e.palsy_rate>0&&(i+="麻痹几率："+(e.palsy_rate-t.palsy_rate)/100+"%\n",n++,n%2==0?(n=0,i+="\n"):i+="  "),e.palsy_def>0&&(i+="麻痹抵抗："+(e.palsy_def-t.palsy_def)/100+"%\n",n++,n%2==0?(n=0,i+="\n"):i+="  "),e.hurt_up>0&&(i+="伤害加成："+(e.hurt_up-t.hurt_up)/100+"%\n",n++,n%2==0?(n=0,i+="\n"):i+="  "),e.hurt_def>0&&(i+="伤害减免："+(e.hurt_def-t.hurt_def)/100+"%\n",n++,n%2==0?(n=0,i+="\n"):i+="  "),e.hp_up>0&&(i+="生命加成："+(e.hp_up-t.hp_up)/100+"%\n",n++,n%2==0?(n=0,i+="\n"):i+="  "),i},s.getEquipList=function(){var e,t=[],i=this.getEquipConfig();for(var n in i)i.hasOwnProperty(n)&&(e=i[n],RoleModel.getInstance().getRoleCommon().level>=e.open_level&&RoleModel.getInstance().getRoleCommon().round>=e.open_round&&t.push(e));return t.sort(this.sortFuben),t},s.sortFuben=function(e,t){var i=0;return e.open_round>t.open_round?i=-1:e.open_round<t.open_round?i=1:e.open_level>t.open_level?i=-1:e.open_level<t.open_level&&(i=1),i},t}(egret.EventDispatcher);egret.registerClass(FubenModel,"FubenModel");var FubenTiaozhanVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FubenTiaozhanVO,"FubenTiaozhanVO");var FubenVO=function(){function e(){}var t=(__define,e),i=t.prototype;return i.setMonsterList=function(e,t){this.monsterList=new Array;for(var i,n=e.match(/\d+/g),s=t.match(/\d+/g),a=0;a<n.length;a+=2)i=new FBMonsterVo,i.id=parseInt(n[a]),i.num=parseInt(n[a+1]),i.x=parseInt(s[a]),i.y=parseInt(s[a+1]),this.monsterList.push(i)},e}();egret.registerClass(FubenVO,"FubenVO");var ShareNewVo=function(){function e(){this.template_id=0,this.type=0,this.activity_id=0,this.add_gold=0}var t=(__define,e);t.prototype;return e}();egret.registerClass(ShareNewVo,"ShareNewVo");var FunctionOpenModel=function(e){function t(){e.call(this),this._dataList=[]}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},n.getFunctionOpenVO=function(e){this._dataList.length<=0&&(this._dataList=this.createFunctionOpenDataList());var t;for(var i in this._dataList)if(t=this._dataList[i],t.template_id==e)return t;return null},n.createFunctionOpenDataList=function(){for(var e,t,i=DataManager.getInstance().getObj("data_function_open"),n=i.data_function_open,s=[],a=0;a<n.length;a++)e=n[a],t=new FunctionOpenVO,t.template_id=e.template_id,t.name=e.name,t.open_round=e.open_round,t.open_level=e.open_level,t.open_hook=e.open_hook,t.open_day=e.open_day,s.push(t);return s},n.check=function(e,t){void 0===t&&(t=!0);var i=this.getFunctionOpenVO(e);return HuoDongDailyModel.getInstance().kaiFuDay<i.open_day?(t&&Message.show("开服第"+i.open_day+"天开启"),!1):RoleModel.getInstance().getRoleCommon().round<i.open_round?(t&&Message.show(i.open_round+"转开启"),!1):RoleModel.getInstance().getRoleCommon().level<i.open_level?(t&&Message.show(i.open_level+"级开启"),!1):SceneModel.getInstance().getSceneWave().total_wave_id<i.open_hook?(t&&Message.show(i.open_hook+"关开启"),!1):!0},t.FIGURE=1,t.BAG=2,t.WING=7,t.ROUND=8,t.MERIDIAN=9,t.MEETPLAYER=6,t.MEETBOSS=21,t.SPEED_PK=38,t.FUBEN_CAILIAO=23,t.GUILD=22,t.LOGIN_REWARD=30,t.ARTIFACT=20,t.DOMINATE=12,t.ORANGESUIT=10,t.LEGENDSUIT=3,t.KEY_15=15,t.KEY_16=16,t.KEY_27=27,t.KEY_28=28,t.HUODONGDAILY=29,t.KEY_37=37,t.KEY_42=42,t.KEY_44=44,t.KEY_45=45,t.KEY_32=32,t.KEY_33=33,t.KEY_46=46,t.KEY_48=48,t.KEY_49=49,t.KEY_50=50,t.KEY_51=51,t.KEY_52=52,t.KEY_53=53,t
}(egret.EventDispatcher);egret.registerClass(FunctionOpenModel,"FunctionOpenModel");var FunctionOpenVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FunctionOpenVO,"FunctionOpenVO");var GuildDonateVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(GuildDonateVO,"GuildDonateVO");var GuildFarmVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(GuildFarmVO,"GuildFarmVO");var GuildFubenHuodongVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(GuildFubenHuodongVO,"GuildFubenHuodongVO");var GuildFubenVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(GuildFubenVO,"GuildFubenVO");var GuildModel=function(e){function t(){e.call(this),this.farmSelectRole_id=0,this.isContinueFuben=!1,this._guildObj=new Object,this._donatObj=new Object,this._redObj=new Object,this._buildObj=new Object,this._membersList=[],this._applysList=[],this._redArr=[],this._guildInfo=new SCMD12519,this.createBase(),this.createDonate(),this.createRed(),this.createBuild()}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.createBase=function(){for(var e,t,i=DataManager.getInstance().getObj("data_guild_manage"),n=i.data_guild_manage,s=0;s<n.length;s++)e=n[s],t=new GuildVO,t.template_id=e.template_id,t.need=e.need,t.member=e.member,t.guild_deputy=e.guild_deputy,t.guild_elder=e.guild_elder,t.vip=e.vip,t.con_gold=e.con_gold,t.add_gx=e.add_gx,this._guildObj[t.template_id]=t},n.createDonate=function(){for(var e,t,i=DataManager.getInstance().getObj("data_guild_donate"),n=i.data_guild_donate,s=0;s<n.length;s++)e=n[s],t=new GuildDonateVO,t.template_id=e.template_id,t.level=e.level,t.type=e.type,t.con_coin=e.con_coin,t.con_gold=e.con_gold,t.add_gx=e.add_gx,t.guild_money=e.guild_money,t.min=e.min,t.max=e.max,t.donate_crit=e.donate_crit,this._donatObj[t.level]||(this._donatObj[t.level]=new Object),this._donatObj[t.level][t.type]=t},n.createRed=function(){for(var e,t,i=DataManager.getInstance().getObj("data_guild_goldroom"),n=i.data_guild_goldroom,s=0;s<n.length;s++)e=n[s],t=new GuildRedVO,t.template_id=e.template_id,t.cost=e.cost,t.money_limit=e.money_limit,t.redpacket_limit=e.redpacket_limit,t.redpacket_num=e.redpacket_num,t.people=e.people,t.itemList=Tools.changeToItemData(e.add_item),this._redObj[t.template_id]=t},n.createBuild=function(){for(var e,t,i=DataManager.getInstance().getObj("data_guild_buildup"),n=i.data_guild_buildup,s=0;s<n.length;s++)e=n[s],t=new GuildUpgradeVO,t.template_id=e.template_id,t.level=e.level,t.type=e.type,t.need=e.need,t.up_word=e.up_word,t.show_word=e.show_word,t.title=e.title,this._buildObj[t.type]||(this._buildObj[t.type]=new Object),this._buildObj[t.type][t.level]=t},n.getConfigSkill=function(){if(!this._skillObj){this._skillObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_guild_skillroom"),i=t.data_guild_skillroom,n=void 0,s=0;s<i.length;s++)n=i[s],e=new GuildSkillVO,e.template_id=n.template_id,e.level=n.level,e.need=n.need,e.skill_id=n.skill_id,e.name=n.name,e.con_gx=n.con_gx,e.con_coin=n.con_coin,e.up=n.up,e.luck=n.luck,e.hp=n.hp,e.mp=n.mp,e.att=n.att,e.att_def=n.att_def,e.magic_def=n.magic_def,e.crit=n.crit,e.crit_hurt=n.crit_hurt,e.crit_def=n.crit_def,e.palsy_rate=n.palsy_rate,e.palsy_def=n.palsy_def,e.hurt_up=n.hurt_up,e.hurt_def=n.hurt_def,e.hp_up=n.hp_up,this._skillObj[e.skill_id]||(this._skillObj[e.skill_id]=new Object),this._skillObj[e.skill_id][e.level]=e}return this._skillObj},n.getConfigFarm=function(){if(!this._farmObj){this._farmObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_guild_farm"),i=t.data_guild_farm,n=void 0,s=0;s<i.length;s++)n=i[s],e=new GuildFarmVO,e.template_id=n.template_id,e.gain_gx=n.gain_gx,e.harvest_sec=n.harvest_sec,e.speed_cd=n.speed_cd,e.speed_sec=n.speed_sec,this._farmObj[e.template_id]=e}return this._farmObj},n.getConfigShop=function(){if(!this._shopObj){this._shopObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_guild_shop"),i=t.data_guild_shop,n=void 0,s=0;s<i.length;s++)n=i[s],e=new GuildShopVO,e.template_id=n.template_id,e.con_gx=n.con_gx,e.times=n.times,e.add_item=Tools.changeToItemData(n.add_item),e.group_id=n.group_id,e.itemList=Tools.changeToItemData(n.show),this._shopObj[e.template_id]=e}return this._shopObj},n.getConfigFarmOpen=function(){if(!this._farmOpenObj){this._farmOpenObj=new Object;for(var e=DataManager.getInstance().getObj("data_guild_farm_open"),t=e.data_guild_farm_open,i=void 0,n=0;n<t.length;n++)i=t[n],this._farmOpenObj[i.template_id]=i.open_round}return this._farmOpenObj},n.getConfigFuben=function(){if(!this._fubenObj){this._fubenObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_guild_fuben"),i=t.data_guild_fuben,n=void 0,s=0;s<i.length;s++)n=i[s],e=new GuildFubenVO,e.template_id=n.template_id,e.next=n.next,e.mon_id=n.mon_id,e.scene_id=n.scene_id,e.mon_pos=n.mon_pos,e.limit_time=n.limit_time,e.random_birth=n.random_birth,e.itemList=Tools.changeToItemData(n.show),this._fubenObj[e.template_id]=e}return this._fubenObj},n.getConfigHuodong=function(){if(!this._huodongArr){this._huodongArr=[];for(var e,t=DataManager.getInstance().getObj("data_guild_activity"),i=t.data_guild_activity,n=void 0,s=0;s<i.length;s++)n=i[s],e=new GuildFubenHuodongVO,e.template_id=n.template_id,e.name=n.name,e.time=n.time,e.reward=n.reward,e.icon=n.icon,e.time_limit=n.time_limit,this._huodongArr.push(e)}return this._huodongArr},n.getGuildBaseByLv=function(e){return this._guildObj[e]},n.getGuildBaseInfo=function(){return this._guildObj[this._guildInfo.guild_level]},n.setGuildList=function(e){this._guildList=e,this._guildList.sort(function(e,t){return e.level>t.level?-1:1})},n.getGuildList=function(){return this._guildList},n.setGuildInfo=function(e){this._guildInfo=e},n.updateGuildBuild=function(e){var t=e.guild_build_list;this._build_list||(this._build_list=t);for(var i,n=0;n<t.length;n++){i=t[n],1==i.type&&(this._guildInfo.guild_level=i.level);for(var s=0;s<this._build_list.length;s++)this._build_list[s].type==i.type&&(this._build_list[s]=i)}this._guildInfo.guild_money=e.money},n.getBuildLv=function(e){for(var t=1,i=0;i<this._build_list.length;i++)this._build_list[i].type==e&&(t=this._build_list[i].level);return t},n.getGuildInfo=function(){return this._guildInfo},n.setGuildName=function(e){this._guildInfo.guild_name=e},n.getPositionStr=function(e){var i="成员";switch(e){case t.POSITION_TYPE_1:i="会长";break;case t.POSITION_TYPE_2:i="副会长";break;case t.POSITION_TYPE_3:i="长老"}return i},n.getPositionNum=function(e){for(var t=0,i=0;i<this._membersList.length;i++)this._membersList[i].position==e&&t++;return t},n.getGuildMembers=function(){return this._membersList},n.setGuildMembers=function(e){if(0==this._membersList.length)return void(this._membersList=e);for(var t=!1,i=0;i<e.length;i++){t=!1;for(var n=0;n<this._membersList.length;n++)this._membersList[n].role_id==e[i].role_id&&(this._membersList[n]=e[i],t=!0);t||this._membersList.push(e[i])}},n.delGuildMembers=function(e){for(var t=0;t<this._membersList.length;t++)this._membersList[t].role_id==e&&this._membersList.splice(t,1)},n.setReqPower=function(e){this._guildInfo.req_power=e},n.setReqAuto=function(e){this._guildInfo.req_auto=e},n.setNotice=function(e){this._guildInfo.notice=e},n.setMemberInfo=function(e){this._memberInfo=e},n.getMemberInfo=function(){return this._memberInfo},n.setApplysList=function(e){this._applysList=e},n.getApplysList=function(){return this._applysList},n.delApplysList=function(e){for(var t=0;t<this._applysList.length;t++)this._applysList[t].role_id==e&&this._applysList.splice(t,1)},n.getRedVoByLv=function(e){return this._redObj[e]},n.getDonateVoByLvType=function(e,t){return this._donatObj[e][t]},n.getRedArr=function(){return this._redArr},n.setRedArr=function(e){if(0==this._redArr.length)return void(this._redArr=e);for(var t,i,n,s=0;s<e.length;s++){i=e[s],n=!1;for(var a=0;a<this._redArr.length;a++)t=this._redArr[a],t.id==i.id&&(n=!0);n||this._redArr.push(i)}},n.delRed=function(e){for(var t,i=0;i<this._redArr.length;i++)if(t=this._redArr[i],t.id==e){this._redArr.splice(i,1);break}},n.delAllRed=function(){this._redArr=[]},n.getBuildInfo=function(e,t){return this._buildObj[e][t]},n.getSkillByLv=function(e,t){return this.getConfigSkill()[e][t]?this.getConfigSkill()[e][t]:null},n.setGuildSkillData=function(e){this._skillData||(this._skillData=new Object),this._skillData[e.parter_id]||(this._skillData[e.parter_id]=new Array);for(var t,i=!1,n=0;n<e.guild_skillrooms.length;n++){t=e.guild_skillrooms[n],i=!1;for(var s=0;s<this._skillData[e.parter_id].length;s++)this._skillData[e.parter_id][s].skill_id==t.skill_id&&(this._skillData[e.parter_id][s]=t,i=!0);i||this._skillData[e.parter_id].push(t)}},n.getGuildSkillData=function(e,t){if(!this._skillData[t])return null;for(var i=0;i<this._skillData[t].length;i++)if(this._skillData[t][i].skill_id==e)return this._skillData[t][i]},n.getPartnerSkillList=function(e){return this._skillData[e]},n.getSkillProStr=function(e){var t="";return e.hp>0&&(t+="生命："+e.hp+"\n"),e.mp>0&&(t+="魔法："+e.mp+"\n"),e.att>0&&(t+="攻击："+e.att+"\n"),e.att_def>0&&(t+="物防："+e.att_def+"\n"),e.magic_def>0&&(t+="法防："+e.magic_def+"\n"),e.crit>0&&(t+="暴击："+e.crit/100+"%\n"),e.crit_hurt>0&&(t+="暴击伤害："+e.crit_hurt/100+"%\n"),e.crit_def>0&&(t+="抗暴："+e.crit_def/100+"%\n"),e.palsy_rate>0&&(t+="麻痹几率："+e.palsy_rate/100+"%\n"),e.palsy_def>0&&(t+="麻痹抵抗："+e.palsy_def/100+"%\n"),e.hurt_up>0&&(t+="伤害加成："+e.hurt_up/100+"%\n"),e.hurt_def>0&&(t+="伤害减免："+e.hurt_def/100+"%\n"),e.hp_up>0&&(t+="生命加成："+e.hp_up/100+"%\n"),t},n.setFarmData=function(e){this._farmData||(this._farmData=new Object),this._farmData[e.role_id]?(this._farmData[e.role_id].role_id=e.role_id,this._farmData[e.role_id].role_name=e.role_name,this._farmData[e.role_id].level=e.level,this._farmData[e.role_id].round=e.round,this._farmData[e.role_id].last_time=e.last_time,this._farmData[e.role_id].man_time=e.man_time):this._farmData[e.role_id]=e;for(var t=RoleModel.getInstance().getRoleCommon().role_id,i=0;i<e.guild_farms.length;i++)for(var n=0;n<this._farmData[t].guild_farms.length;n++)if(e.guild_farms[i].role_id==this._farmData[t].guild_farms[n].role_id){this._farmData[t].guild_farms[n]=e.guild_farms[i];break}},n.getFarmdata=function(e){return this._farmData[e]},n.getFarmVo=function(e){return this.getConfigFarm()[e]},n.getFarmRound=function(e){return this.getConfigFarmOpen()[e]},n.getShopVo=function(e){return this.getConfigShop()[e]},n.getFubenVo=function(e){return this.getConfigFuben()[e]},n.getHuodongArr=function(){return this.getConfigHuodong()},n.setFubenData=function(e){this._fubenData=e},n.getFubenData=function(){return this._fubenData},n.getFubenLv=function(){return this._fubenData?this._fubenData.level:0},n.dispose=function(){this._guildList=[],this._guildInfo=new SCMD12519,this._membersList=[],this.optRole=null,this._farmData=new Object},t.POSITION_TYPE_1=1,t.POSITION_TYPE_2=2,t.POSITION_TYPE_3=3,t.POSITION_TYPE_4=4,t}(egret.EventDispatcher);egret.registerClass(GuildModel,"GuildModel");var GuildRedVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(GuildRedVO,"GuildRedVO");var GuildShopVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(GuildShopVO,"GuildShopVO");var GuildSkillVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(GuildSkillVO,"GuildSkillVO");var GuildUpgradeVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(GuildUpgradeVO,"GuildUpgradeVO");var GuildVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(GuildVO,"GuildVO");var HeFuModel=function(e){function t(){e.call(this),this._hefuShowIconList=[],this._hefuClientConfig=[],this._hefuRankConfig=[],this._hefuChargeConfig=[],this._hefuDLConfig=[],this._hefuBossPointConfig=[],this._hefuBossRewardConfig=[],this._hefuSiegeConfig=[],this._hefuGiftConfig=[],this._hefuTreasureConfig=[],this._hefuExchangeConfig=[],this._hefuTitleConfig=[],this.hefuDay=0,this.loginAwardId=0,this.loginAwardedId=0,this.hfBoss_point=0,this.hfBoss_awardId=0,this.hfBoss_awardedId=0,this._hfXgDataArr=[],this._hfExchangeDataArr=[],this._hfChargeDataArr=[]}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},n.getClientData=function(e){if(void 0===e&&(e=0),this._hefuClientConfig.length<=0)for(var t,i,n=DataManager.getInstance().getObj("data_activity_hfclient"),s=n.data_activity_hfclient,a=0;a<s.length;a++)i=s[a],t=new HeFuDataClientVO,t.template_id=i.template_id,t.name=i.name,t.type=i.type,t.setAList(i.activity_id),t.show_icon=i.show_icon,t.show_title=i.show_title,t.setRestTime(i.reset_tiem),t.func=i["function"],t.terrace_limit=i.terrace_limit,this._hefuClientConfig.push(t);return this._hefuClientConfig},n.createFHFbossPointConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_hfboss_point"),n=i.data_activity_hfboss_point,s=[],a=0;a<n.length;a++)t=n[a],e=new HeFuBossPointVO,e.template_id=t.template_id,e.name=t.name,e.point=t.point,s.push(e);return s},n.createFHFbossRewardConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_hfboss_reward"),n=i.data_activity_hfboss_reward,s=[],a=0;a<n.length;a++)t=n[a],e=new HeFuBossRewardVO,e.template_id=t.template_id,e.need=t.need,e.goodsList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},n.createFHFchargeConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_hfcharge"),n=i.data_activity_hfcharge,s=[],a=0;a<n.length;a++)t=n[a],e=new HeFuChargeVO,e.template_id=t.template_id,e.need_gold=t.need_gold,e.name=t.name,e.rewardList=Tools.changeToNodeDropList(t.reward),e.limitRewardList=Tools.changeToNodeDropList(t.limit_reward),s.push(e);return s},n.createFHFdlConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_hfdl"),n=i.data_activity_hfdl,s=[],a=0;a<n.length;a++)t=n[a],e=new HeFuDLVO,e.template_id=t.template_id,e.goodsList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},n.createFHFexchangeConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_hfexchange"),n=i.data_activity_hfexchange,s=[],a=0;a<n.length;a++)t=n[a],e=new HeFuExchangeVO,e.template_id=t.template_id,e.need=t.need,e.need_num=t.need_num,e.limit_day=t.limit_day,e.limit_all=t.limit_all,e.goodsList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},n.createFHFgiftConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_hfgift"),n=i.data_activity_hfgift,s=[],a=0;a<n.length;a++)t=n[a],e=new HeFuGiftVO,e.template_id=t.template_id,e.item_id=t.item_id,e.name=t.name,e.limit=t.limit,e.req_vip=t.req_vip,e.con_gold=t.con_gold,e.con_coin=t.con_coin,e.goodsList=Tools.changeToNodeDropList(t.show),s.push(e);return s},n.createFHFrankConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_hfrank"),n=i.data_activity_hfrank,s=[],a=0;a<n.length;a++)t=n[a],e=new HeFuRankVO,e.template_id=t.template_id,e.type=t.type,e.name=t.name,e.open_lv=t.open_lv,e.open_round=t.open_round,e["switch"]=t["switch"],e.merge_day=t.merge_day,e.min=t.min,e.max=t.max,e.radio=t.radio,e.goodsList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},n.createFHFsiegeConfig=function(){var e=[];e.push(SingleModel.getInstance().getSingVO(SingleModel.KEY_18701)),e.push(SingleModel.getInstance().getSingVO(SingleModel.KEY_18702)),e.push(SingleModel.getInstance().getSingVO(SingleModel.KEY_18703));for(var t,i,n=[],s=0;s<e.length;s++)i=e[s],t=new HeFuSiegeVO,t.template_id=i.key,t.desc=i.desc,t.goodsList=Tools.changeToNodeDropList(i.value),n.push(t);return n},n.createFHFtreasureConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_hftreasure"),n=i.data_activity_hftreasure,s=[],a=0;a<n.length;a++)t=n[a],e=new HeFuTreasureVO,e.template_id=t.template_id,e.gift=t.gift,e.name=t.name,e.con_gold1=t.con_gold1,e.con_gold2=t.con_gold2,e.showList=Tools.changeToNodeDropList(t.show),e.timesRewardList=Tools.changeToNodeDropList(t.times_reward),s.push(e);return s},n.createFHFTitleConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_hftitle"),n=i.data_activity_hftitle,s=[],a=0;a<n.length;a++)t=n[a],e=new HFTitleVO,e.template_id=t.template_id,e.name=t.name,e.need=t.need,e.show=t.show,e.goodsList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},n.getHFbossPointVO=function(e){this._hefuBossPointConfig.length<=0&&(this._hefuBossPointConfig=this.createFHFbossPointConfig());var t;for(var i in this._hefuBossPointConfig)if(t=this._hefuBossPointConfig[i],t.template_id==e)return t;return null},n.getHFbossRewardConfig=function(){return this._hefuBossRewardConfig.length<=0&&(this._hefuBossRewardConfig=this.createFHFbossRewardConfig()),this._hefuBossRewardConfig},n.getHFbossRewardVO=function(e){this._hefuBossRewardConfig.length<=0&&(this._hefuBossRewardConfig=this.createFHFbossRewardConfig());var t;for(var i in this._hefuBossRewardConfig)if(t=this._hefuBossRewardConfig[i],t.template_id==e)return t;return null},n.getHFchargeVO=function(e){this._hefuChargeConfig.length<=0&&(this._hefuChargeConfig=this.createFHFchargeConfig());var t;for(var i in this._hefuChargeConfig)if(t=this._hefuChargeConfig[i],t.template_id==e)return t;return null},n.getHFchargeConfig=function(){return this._hefuChargeConfig.length<=0&&(this._hefuChargeConfig=this.createFHFchargeConfig()),this._hefuChargeConfig},n.getHFdlVO=function(e){this._hefuDLConfig.length<=0&&(this._hefuDLConfig=this.createFHFdlConfig());var t;for(var i in this._hefuDLConfig)if(t=this._hefuDLConfig[i],t.template_id==e)return t;return null},n.getHFdlConfig=function(){return this._hefuDLConfig.length<=0&&(this._hefuDLConfig=this.createFHFdlConfig()),this._hefuDLConfig},n.getHFexchangeVO=function(e){this._hefuExchangeConfig.length<=0&&(this._hefuExchangeConfig=this.createFHFexchangeConfig());var t;for(var i in this._hefuExchangeConfig)if(t=this._hefuExchangeConfig[i],t.template_id==e)return t;return null},n.getHFexchangeConfig=function(){return this._hefuExchangeConfig.length<=0&&(this._hefuExchangeConfig=this.createFHFexchangeConfig()),this._hefuExchangeConfig},n.getHFgiftVO=function(e){this._hefuGiftConfig.length<=0&&(this._hefuGiftConfig=this.createFHFgiftConfig());var t;for(var i in this._hefuGiftConfig)if(t=this._hefuGiftConfig[i],t.template_id==e)return t;return null},n.getHFgiftConfig=function(){return this._hefuGiftConfig.length<=0&&(this._hefuGiftConfig=this.createFHFgiftConfig()),this._hefuGiftConfig},n.getHFrankVO=function(e){this._hefuRankConfig.length<=0&&(this._hefuRankConfig=this.createFHFrankConfig());var t;for(var i in this._hefuRankConfig)if(t=this._hefuRankConfig[i],t.template_id==e)return t;return null},n.getCurrentRankVo=function(){for(var e,i=this.getHefuIconList(),n=0;n<i.length;n++)if(e=i[n],e.type==t.HFrank)return e;return null},n.getRankVoByRank=function(e,t){var i,n;for(i in this._hefuRankConfig)if(n=this._hefuRankConfig[i],n.type==e&&n.min<=t&&t<=n.max)return n;return null},n.getHFsiegeVO=function(e){this._hefuSiegeConfig.length<=0&&(this._hefuSiegeConfig=this.createFHFsiegeConfig());var t;for(var i in this._hefuSiegeConfig)if(t=this._hefuSiegeConfig[i],t.template_id==e)return t;return null},n.getHFsiegeCOnfig=function(){return this._hefuSiegeConfig.length<=0&&(this._hefuSiegeConfig=this.createFHFsiegeConfig()),this._hefuSiegeConfig},n.getHFtreasureVO=function(e){this._hefuTreasureConfig.length<=0&&(this._hefuTreasureConfig=this.createFHFtreasureConfig());var t;for(var i in this._hefuTreasureConfig)if(t=this._hefuTreasureConfig[i],t.template_id==e)return t;return null},n.getHFTitleVO=function(e){this._hefuTitleConfig.length<=0&&(this._hefuTitleConfig=this.createFHFTitleConfig());var t;for(var i in this._hefuTitleConfig)if(t=this._hefuTitleConfig[i],t.template_id==e)return t;return null},n.getHefuIconList=function(){if(this._hefuShowIconList.length<=0)for(var e,i,n,s=this.getClientData(),a=new Object,o=0;o<s.length;o++)if(e=s[o],!a[e.type]){e.type==t.HFspeed&&this.hefuDay<=t.days&&this.isInHeFu()&&(a[e.type]=!0,this._hefuShowIconList.push(e)),i=e.activityList;for(var r=0;r<i.length&&!a[e.type];r++)switch(n=i[r],e.type){case t.HFboss:this.hefuDay<=t.days&&this.isInHeFu()&&(a[e.type]=!0,this._hefuShowIconList.push(e));break;case t.HFcharge:this.getHFchargeVO(n);this.hefuDay<=t.days&&this.isInHeFu()&&(a[e.type]=!0,this._hefuShowIconList.push(e));break;case t.HFdl:this.getHFdlVO(n);this.hefuDay<=t.days&&this.isInHeFu()&&(a[e.type]=!0,this._hefuShowIconList.push(e));break;case t.HFexchange:this.getHFexchangeVO(n);this.hefuDay<=t.days&&this.isInHeFu()&&(a[e.type]=!0,this._hefuShowIconList.push(e));break;case t.HFgift:this.hefuDay<=t.days&&this.isInHeFu()&&(a[e.type]=!0,this._hefuShowIconList.push(e));break;case t.HFrank:var h=this.getHFrankVO(n);h&&TimeUtil.isDateHeFu(h.merge_day)&&(a[e.type]=!0,this._hefuShowIconList.push(e));break;case t.HFsiege:this.hefuDay<=t.days&&this.isInHeFu()&&(a[e.type]=!0,this._hefuShowIconList.push(e));break;case t.HFtreasure:this.getHFtreasureVO(n);this.hefuDay<=t.days&&this.isInHeFu()&&(a[e.type]=!0,this._hefuShowIconList.push(e));break;case t.HFTitle:this.hefuDay<=t.days&&this.isInHeFu()&&(a[e.type]=!0,this._hefuShowIconList.push(e))}}return this._hefuShowIconList},n.checkIconRedDot=function(){for(var e,i=!1,n=this.getHefuIconList(),s=0;s<n.length;s++){switch(e=n[s],e.type){case t.HFdl:i=this.checkLoginAwardCanGet();break;case t.HFboss:i=this.checkBossPointAwardCanGet();break;case t.HFgift:i=this.checkLimitGiftCanBuy();break;case t.HFcharge:i=this.checkHFChargeCanGetAward();break;case t.HFexchange:i=this.checkExchange();break;case t.HFsiege:i=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2023)}if(i)break}return i},n.setHFLoginAwardData=function(e){this.loginAwardId=e.award_id,this.loginAwardedId=e.awarded_id,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HeFuEvtName.UPDATE_HF_LOGIN_INFO))},n.setHFBossPointData=function(e){this.hfBoss_point=e.point,this.hfBoss_awardId=e.award_id,this.hfBoss_awardedId=e.awarded_id,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HeFuEvtName.UPDATE_BOSSPOINT_INFO))},n.setHFXgData=function(e){if(this._hfXgDataArr.length<=0)this._hfXgDataArr=e.act_hfxg_list;else for(var t,i,n=0;n<e.act_hfxg_list.length;n++)t=e.act_hfxg_list[n],i=this.getHFXgData(t.gift_id),null==i?this._hfXgDataArr.push(t):i.num=t.num;GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HeFuEvtName.UPDATE_HF_XG_INFO))},n.getHFXgData=function(e){var t;for(var i in this._hfXgDataArr)if(t=this._hfXgDataArr[i],t.gift_id==e)return t;return null},n.setHFExchangeData=function(e){if(this._hfExchangeDataArr.length<=0)this._hfExchangeDataArr=e.act_hfexchange_list;else for(var t,i,n=0;n<e.act_hfexchange_list.length;n++)t=e.act_hfexchange_list[n],i=this.getHFExchangeData(t.cfg_id),null==i?this._hfExchangeDataArr.push(t):i.num=t.num;GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HeFuEvtName.UPDATE_HF_EXCHANGE_INFO))},n.getHFExchangeData=function(e){var t;for(var i in this._hfExchangeDataArr)if(t=this._hfExchangeDataArr[i],t.cfg_id==e)return t;return null},n.setHFChargeData=function(e){if(this._hfChargeDataArr.length<=0)this._hfChargeDataArr=e.hfcharge_awards;else for(var t,i,n=0;n<e.hfcharge_awards.length;n++)t=e.hfcharge_awards[n],i=this.getChargeData(t.cfg_id),null==i?this._hfChargeDataArr.push(t):(i.flag=t.flag,i.total_charge=t.total_charge,i.spec_flag=t.spec_flag);GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HeFuEvtName.UPDATE_HF_CHARGE_INFO))},n.getChargeData=function(e){var t;for(var i in this._hfChargeDataArr)if(t=this._hfChargeDataArr[i],t.cfg_id==e)return t;return null},n.getHFTotalCharge=function(){var e,t=0;for(var i in this._hfChargeDataArr)e=this._hfChargeDataArr[i],t+=e.total_charge;return t},n.checkAddHFIcon=function(){return this.getHefuIconList().length>0},n.checkLoginAwardCanGet=function(){return this.loginAwardedId>this.loginAwardedId},n.checkBossPointAwardCanGet=function(){return this.hfBoss_awardId>this.hfBoss_awardedId},n.checkLimitGiftCanBuy=function(){return!1},n.checkExchange=function(){var e,t,i=0,n=this.getHFexchangeConfig(),s=0;if(!(this._hfExchangeDataArr.length<n.length)){for(var a in this._hfExchangeDataArr)if(e=this._hfExchangeDataArr[a],t=this.getHFexchangeVO(e.cfg_id),null!=t&&(i=GoodsListProxy.getInstance().findGoodNumber(t.need),s=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_44,t.template_id),e.num<t.limit_all&&s<t.limit_day&&i>=t.need_num))return!0;return!1}for(var o in n)if(t=n[o],null!=t)if(i=GoodsListProxy.getInstance().findGoodNumber(t.need),e=this.getHFExchangeData(t.template_id),null==e){if(i>=t.need_num)return!0}else if(s=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_44,t.template_id),e.num<t.limit_all&&s<t.limit_day&&i>=t.need_num)return!0;return!1},n.checkExchangeOne=function(e){var t,i,n=0,s=0;return t=this.getHFExchangeData(e),i=this.getHFexchangeVO(e),n=GoodsListProxy.getInstance().findGoodNumber(i.need),null==t?n>=i.need_num?!0:!1:(s=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_44,i.template_id),t.num<i.limit_all&&s<i.limit_day&&n>=i.need_num?!0:!1)},n.checkHFChargeCanGetAward=function(){var e,t,i=this.getHFTotalCharge(),n=this.getHFchargeConfig();if(!(this._hfChargeDataArr.length<n.length)){for(var s in this._hfChargeDataArr)if(e=this._hfChargeDataArr[s],t=this.getHFchargeVO(e.cfg_id),0==e.flag&&e.cfg_id<=this.hefuDay&&i>=t.need_gold)return!0;return!1}for(var a in n)if(t=n[a],e=this.getChargeData(t.template_id),null==e){if(i>=t.need_gold&&t.template_id<=this.hefuDay)return!0}else if(0==e.flag&&e.cfg_id<=this.hefuDay&&i>=t.need_gold)return!0},n.checkHFChargeCanGetAwardOneDay=function(e){var t=this.getChargeData(e),i=this.getHFchargeVO(e),n=this.getHFTotalCharge();if(null==t){if(n>=i.need_gold&&i.template_id<=this.hefuDay)return!0}else if(0==t.flag&&t.cfg_id<=this.hefuDay&&n>=i.need_gold)return!0;return!1},n.isInHeFu=function(){return this.hefuDay<=t.days&&this.hefuDay>0},t.days=8,t.HFrank=1,t.HFcharge=2,t.HFdl=3,t.HFboss=4,t.HFsiege=5,t.HFgift=6,t.HFtreasure=7,t.HFexchange=8,t.HFspeed=9,t.HFTitle=10,t.UPDATE_HDDAILY_CONSUME="UPDATE_HDDAILY_CONSUME",t.UPDATE_HDDAILYTARGET_CONSUME="UPDATE_HDDAILYTARGET_CONSUME",t}(egret.EventDispatcher);egret.registerClass(HeFuModel,"HeFuModel");var HFTitleVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(HFTitleVO,"HFTitleVO");var HeFuBossPointVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(HeFuBossPointVO,"HeFuBossPointVO");var HeFuBossRewardVO=function(){function e(){this.goodsList=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(HeFuBossRewardVO,"HeFuBossRewardVO");var HeFuChargeVO=function(){function e(){this.rewardList=[],this.limitRewardList=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(HeFuChargeVO,"HeFuChargeVO");var HeFuDLVO=function(){function e(){this.goodsList=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(HeFuDLVO,"HeFuDLVO");var HeFuDataClientVO=function(){function e(){}var t=(__define,e),i=t.prototype;return i.setAList=function(e){var t=e.match(/\d+/g),i=0;if(this.activityList=new Array,t)for(var n=0;n<t.length;n++)i=parseInt(t[n]),this.activityList.push(i)},i.setRestTime=function(e){var t=e.split(","),i=new Date,n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),parseInt(t[0]),parseInt(t[1]),parseInt(t[2]));this.endDate=n},e}();egret.registerClass(HeFuDataClientVO,"HeFuDataClientVO");var HeFuExchangeVO=function(){function e(){this.goodsList=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(HeFuExchangeVO,"HeFuExchangeVO");var HeFuGiftVO=function(){function e(){this.goodsList=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(HeFuGiftVO,"HeFuGiftVO");var HeFuRankVO=function(){function e(){this.goodsList=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(HeFuRankVO,"HeFuRankVO");var HeFuSiegeVO=function(){function e(){this.goodsList=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(HeFuSiegeVO,"HeFuSiegeVO");var HeFuTreasureVO=function(){function e(){this.timesRewardList=[],this.showList=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(HeFuTreasureVO,"HeFuTreasureVO");var DailyChargeVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(DailyChargeVo,"DailyChargeVo");var FunctionNoticeAwardVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FunctionNoticeAwardVo,"FunctionNoticeAwardVo");var HDDailyConsumeVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(HDDailyConsumeVo,"HDDailyConsumeVo");var HDDailyTargetVo=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(HDDailyConsumeVo);egret.registerClass(HDDailyTargetVo,"HDDailyTargetVo");var HuoDongDailyClientVo=function(){function e(){}var t=(__define,e),i=t.prototype;return i.setAList=function(e){var t=e.match(/\d+/g),i=0;if(this.activityList=new Array,t)for(var n=0;n<t.length;n++)i=parseInt(t[n]),this.activityList.push(i)},i.setRestTime=function(e){var t=e.split(","),i=new Date,n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),parseInt(t[0]),parseInt(t[1]),parseInt(t[2]));this.endDate=n},e}();egret.registerClass(HuoDongDailyClientVo,"HuoDongDailyClientVo");var HuoDongDailyModel=function(e){function t(){e.call(this),this._kfhdChargeConfig=[],this._kfhdReChargeConfig=[],this._kfhdTreasureConfig=[],this._kfhdChargeSingleConfig=[],this._dailyChargeConfig=[],this._functionNoticeAwardConfig=[],this._nodeRmbConfig=[],this._kfhdTitleConfig=[],this.kaiFuDay=0,this.mergeTime=0,this._kfhdReChargeInfoArr=[],this.weekDay=0,this.oneRmb_flag=0,this.oneRmb_rankGold=0,this._nodeRmbInfoArr=[],this.nodeRmbCanBuy=0,this.dailyTypeList=new Array,this.dailyTypeList.push(DailyModel.DAILY_TYPE_12,DailyModel.DAILY_TYPE_4,DailyModel.DAILY_TYPE_14,DailyModel.DAILY_TYPE_13)}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},n.getClientData=function(e){if(null==this._dailyClientConfig){this._dailyClientConfig=new Object,this._dailyList=new Array,this._kaifuList=new Array;for(var i,n,s=DataManager.getInstance().getObj("data_activity_client"),a=s.data_activity_client,o=0;o<a.length;o++)n=a[o],i=new HuoDongDailyClientVo,i.template_id=n.template_id,i.name=n.name,i.type=n.type,i.setAList(n.activity_id),i.belong=n.belong,i.show_icon=n.show_icon,i.show_title=n.show_title,i.setRestTime(n.reset_tiem),i.func=n["function"],i.terrace_limit=n.terrace_limit,this._dailyClientConfig[i.template_id]=i,i.belong==t.DAILY?this._dailyList.push(i):i.belong==t.KAIFU&&this._kaifuList.push(i)}return e==t.DAILY?this._dailyList:e==t.KAIFU?this._kaifuList:null},n.getKFHDClientVo=function(e){return null==this._dailyClientConfig&&this.getClientData(0),this._dailyClientConfig[e]},n.getHDDailyConsume=function(e){if(null==this._hdDailyConsumeConfig){this._hdDailyConsumeConfig=new Object;for(var t,i,n=DataManager.getInstance().getObj("data_activity_daily_sub"),s=n.data_activity_daily_sub,a=0;a<s.length;a++)i=s[a],t=new HDDailyConsumeVo,t.template_id=i.template_id,t.type=i.type,t.name=i.name,t.open_lv=i.open_lv,t.open_round=i.open_round,t["switch"]=i["switch"],t.value=i.value,t.goodsList=Tools.changeToNodeDropList(i.add_item),t.radio=i.radio,this._hdDailyConsumeConfig[t.template_id]=t}return this._hdDailyConsumeConfig[e]},n.getHDDailyConsumeConfig=function(){return this._hdDailyConsumeConfig},n.getHDDailyTargetConfig=function(){return this._hdDailyTargetConfig},n.getHDDailyTarget=function(e){if(null==this._hdDailyTargetConfig){this._hdDailyTargetConfig=new Object;
for(var t,i,n=DataManager.getInstance().getObj("data_activity_target"),s=n.data_activity_target,a=0;a<s.length;a++)i=s[a],t=new HDDailyTargetVo,t.template_id=i.template_id,t.type=i.type,t.name=i.name,t.open_lv=i.open_lv,t.open_round=i.open_round,t["switch"]=i["switch"],t.value=i.value,t.goodsList=Tools.changeToNodeDropList(i.add_item),t.radio=i.radio,this._hdDailyTargetConfig[t.template_id]=t}return this._hdDailyTargetConfig[e]},n.getKFHDChargeSingleVo=function(e){this._kfhdChargeSingleConfig.length<=0&&(this._kfhdChargeSingleConfig=this.createKFHDChargeSingleConfig());var t;for(var i in this._kfhdChargeSingleConfig)if(t=this._kfhdChargeSingleConfig[i],t.template_id==e)return t;return null},n.getKFHDChargeSingleConfig=function(){return this._kfhdChargeSingleConfig.length<=0&&(this._kfhdChargeSingleConfig=this.createKFHDChargeSingleConfig()),this._kfhdChargeSingleConfig},n.getKFHDChargeVo=function(e){this._kfhdChargeConfig.length<=0&&(this._kfhdChargeConfig=this.createKFHDChargeConfig());var t;for(var i in this._kfhdChargeConfig)if(t=this._kfhdChargeConfig[i],t.template_id==e)return t;return null},n.getKFHDChargeConfig=function(){return this._kfhdChargeConfig.length<=0&&(this._kfhdChargeConfig=this.createKFHDChargeConfig()),this._kfhdChargeConfig},n.getKFHDReChargeVo=function(e){this._kfhdReChargeConfig.length<=0&&(this._kfhdReChargeConfig=this.createKFHDReChargeConfig());var t;for(var i in this._kfhdReChargeConfig)if(t=this._kfhdReChargeConfig[i],t.template_id==e)return t;return null},n.getKFHDReChargeConfig=function(){return this._kfhdReChargeConfig.length<=0&&(this._kfhdReChargeConfig=this.createKFHDReChargeConfig()),this._kfhdReChargeConfig},n.getKFHDTreasureConfig=function(){return this._kfhdTreasureConfig.length<=0&&(this._kfhdTreasureConfig=this.createKFHDTreasureConfig()),this._kfhdTreasureConfig},n.getKFHDTreasureVo=function(e){this._kfhdTreasureConfig.length<=0&&(this._kfhdTreasureConfig=this.createKFHDTreasureConfig());var t;for(var i in this._kfhdTreasureConfig)if(t=this._kfhdTreasureConfig[i],t.template_id==e)return t;return null},n.getDailyChargeVo=function(e){this._dailyChargeConfig.length<=0&&(this._dailyChargeConfig=this.createDailyChargeConfig());var t;for(var i in this._dailyChargeConfig)if(t=this._dailyChargeConfig[i],t.type==e)return t;return null},n.getFunctionNoticeAwardVo=function(e){this._functionNoticeAwardConfig.length<=0&&(this._functionNoticeAwardConfig=this.createFunctionNoticeAwardConfig());var t;for(var i in this._functionNoticeAwardConfig)if(t=this._functionNoticeAwardConfig[i],t.template_id==e)return t;return null},n.getFunctionNoticeAwardConfig=function(){return this._functionNoticeAwardConfig.length<=0&&(this._functionNoticeAwardConfig=this.createFunctionNoticeAwardConfig()),this._functionNoticeAwardConfig},n.getDailyChargeConfig=function(){return this._dailyChargeConfig.length<=0&&(this._dailyChargeConfig=this.createDailyChargeConfig()),this._dailyChargeConfig},n.getNodeRmbConfig=function(){return this._nodeRmbConfig.length<=0&&(this._nodeRmbConfig=this.createNodeRmbConfig()),this._nodeRmbConfig},n.getNodeRmbVO=function(e){this._nodeRmbConfig.length<=0&&(this._nodeRmbConfig=this.createNodeRmbConfig());var t;for(var i in this._nodeRmbConfig)if(t=this._nodeRmbConfig[i],t.template_id==e)return t;return null},n.getKFHDTitleVO=function(e){this._kfhdTitleConfig.length<=0&&(this._kfhdTitleConfig=this.createKFHDTitleConfig());var t;for(var i in this._kfhdTitleConfig)if(t=this._kfhdTitleConfig[i],t.template_id==e)return t;return null},n.createKFHDTitleConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_kftitle"),n=i.data_activity_kftitle,s=[],a=0;a<n.length;a++)t=n[a],e=new KFHDTitleVO,e.template_id=t.template_id,e.name=t.name,e.need=t.need,e.show=t.show,e.goodsList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},n.createKFHDReChargeConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_kfrecharge"),n=i.data_activity_kfrecharge,s=[],a=0;a<n.length;a++)t=n[a],e=new KFHDReChargeVO,e.template_id=t.template_id,e.name=t.name,e.need_gold=t.need_gold,e.type=t.type,e.open_day=t.open_day,e.rewardList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},n.createNodeRmbConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_rmb_go"),n=i.data_rmb_go,s=[],a=0;a<n.length;a++)t=n[a],e=new NodeRmbVo,e.template_id=t.template_id,e.add_coin=t.add_coin,e.add_gold=t.add_gold,e.num=t.num,s.push(e);return s},n.createKFHDChargeSingleConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_kfcharge_db"),n=i.data_activity_kfcharge_db,s=[],a=0;a<n.length;a++)t=n[a],e=new KFHDChargeSingleVo,e.template_id=t.template_id,e.name=t.name,e.rewardList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},n.createKFHDChargeConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_kfcharge"),n=i.data_activity_kfcharge,s=[],a=0;a<n.length;a++)t=n[a],e=new KFHDChargeVO,e.template_id=t.template_id,e.name=t.name,e.need_gold=t.need_gold,e.reward=t.reward,e.rewardList=Tools.changeToNodeDropList(t.reward),e.limit_reward=t.limit_reward,e.limit_rewardList=Tools.changeToNodeDropList(t.limit_reward),s.push(e);return s},n.createKFHDTreasureConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_activity_kftreasure"),n=i.data_activity_kftreasure,s=[],a=0;a<n.length;a++)t=n[a],e=new KFHDTreasureVo,e.template_id=t.template_id,e.name=t.name,e.gift=t.gift,e.con_gold1=t.con_gold1,e.con_gold2=t.con_gold2,e.timesRewardList=Tools.changeToNodeDropList(t.times_reward),e.showList=Tools.changeToNodeDropList(t.show),e.showTimesList=Tools.changeToNodeDropList(t.show_time),s.push(e);return s},n.createDailyChargeConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_daily_charge"),n=i.data_daily_charge,s=[],a=0;a<n.length;a++)t=n[a],e=new DailyChargeVo,e.template_id=t.template_id,e.type=Number(t.type),e.num=t.num,e.goodsList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},n.createFunctionNoticeAwardConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_trailer"),n=i.data_trailer,s=[],a=0;a<n.length;a++)t=n[a],e=new FunctionNoticeAwardVo,e.template_id=t.template_id,e.goodsList=Tools.changeToNodeDropList(t.add_item),s.push(e);return s},n.getShopEquipConfig=function(){if(null==this._kfShopEquip){this._kfShopEquip=[];for(var e,t,i=DataManager.getInstance().getObj("data_activity_kfshop1"),n=i.data_activity_kfshop1,s=0;s<n.length;s++)t=n[s],e=new KFShopEquipVo,e.template_id=t.template_id,e.show=Tools.changeToItemData(t.show),e.con_item=t.con_item,e.luck_up=t.luck_up,e.price=t.price,e.add_item=Tools.changeToItemData(t.add_item),this._kfShopEquip.push(e)}return this._kfShopEquip},n.getShopEquipConfig2=function(){if(null==this._kfShopEquip2){this._kfShopEquip2=[];for(var e,t,i=DataManager.getInstance().getObj("data_activity_kfshop2"),n=i.data_activity_kfshop2,s=0;s<n.length;s++)t=n[s],e=new KFShopEquipVo,e.template_id=t.template_id,e.show=Tools.changeToItemData(t.show),e.con_item=t.con_item,e.luck_up=t.luck_up,e.price=t.price,e.add_item=Tools.changeToItemData(t.add_item),this._kfShopEquip2.push(e)}return this._kfShopEquip2},n.setDailyReward=function(e){this._dailyConsumeReward=e,this.dispatchEvent(new ParamEvent(t.UPDATE_HDDAILY_CONSUME))},n.getDailyRewar=function(){return this._dailyConsumeReward},n.getRewardStatu=function(e,i){var n,s=0;switch(i){case t.CONSUME:n=this._dailyConsumeReward.act_daily_awards;break;case t.TARGET:var a=this.getHDDailyTarget(e);n=a?this._dailyTargetRewardDic[a.type].act_daily_awards:null}if(null==n)return 0;for(var o=0;o<n.length;o++)if(n[o].award_id==e){s=n[o].flag;break}return s},n.getDailyValue=function(e,i){var n=0,s=0;if(e==t.CONSUME){switch(i){case t.XIAOFEI:s=DailyModel.DAILY_TYPE_12;break;case t.TREASURE:s=DailyModel.DAILY_TYPE_13;break;case t.FAST:s=DailyModel.DAILY_TYPE_4;break;case t.CHARGE:s=DailyModel.DAILY_TYPE_14}n=DailyModel.getInstance().getCountByTypeId(s)}else if(e==t.TARGET)switch(i){case t.WAVE:n=SceneModel.getInstance().getCurrentWaveID();break;case t.FIGHT:n=RoleModel.getInstance().getAllPartnerFight();break;case t.LEVEL:n=RoleModel.getInstance().getRoleCommon().level;break;case t.ROUND:n=RoleModel.getInstance().getRoleCommon().round;break;case t.DAYDAY_CHARGE:n=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_14)}return n},n.setDailyTargetReward=function(e){},n.setDailyTargetRewardStatu=function(e){null==this._dailyTargetRewardDic&&(this._dailyTargetRewardDic=new Object),this._dailyTargetRewardDic[e.type]=e,this.dispatchEvent(new ParamEvent(t.UPDATE_HDDAILYTARGET_CONSUME))},n.getDayDayChargeDay=function(){var e,i=this._dailyTargetRewardDic[t.DAYDAY_CHARGE],n=0;if(i&&i.act_daily_awards.length>0){e=i.act_daily_awards[i.act_daily_awards.length-1];var s=parseInt(e.award_id.toString().substr(1,3));n=s}return n},n.getDayDayChargeRewardNode=function(e){var i,n=this._dailyTargetRewardDic[t.DAYDAY_CHARGE];if(null!=n)for(var s in n.act_daily_awards)if(i=n.act_daily_awards[s],i.award_id==e)return i;return null},n.getKFHDRankVo=function(e){if(null==this._kfhdRankConfig){this._kfhdRankConfig=new Object;for(var t,i,n=DataManager.getInstance().getObj("data_activity_kfrank"),s=n.data_activity_kfrank,a=0;a<s.length;a++)i=s[a],t=new KfhdRankVo,t.template_id=i.template_id,t.type=i.type,t.name=i.name,t.open_lv=i.open_lv,t.open_round=i.open_round,t.open_day=i.open_day,t["switch"]=i["switch"],t.min=i.min,t.max=i.max,t.goods=Tools.changeToNodeDropList(i.add_item),t.radio=i.radio,this._kfhdRankConfig[t.template_id]=t}return this._kfhdRankConfig[e]},n.getKFHDRobShopVo=function(e){if(null==this._kfhdRobShopConfig){this._kfhdRobShopConfig=new Object;for(var t,i,n=DataManager.getInstance().getObj("data_activity_kfrob"),s=n.data_activity_kfrob,a=0;a<s.length;a++)i=s[a],t=new KfhdRobShopVo,t.template_id=i.template_id,t.type=i.type,t.name=i.name,t.open_lv=i.open_lv,t.open_round=i.open_round,t["switch"]=i["switch"],t.con_coin=i.con_coin,t.open_day=i.open_day,t.con_gold=i.con_gold,t.goods=Tools.changeToNodeDropList(i.add_item),t.show_discount=i.show_discount,t.req_vip=i.req_vip,t.day_limit=i.day_limit,this._kfhdRobShopConfig[t.template_id]=t}return this._kfhdRobShopConfig[e]},n.getKFHDStandardVo=function(e){if(null==this._kfhdStandardConfig){this._kfhdStandardConfig=new Object;for(var t,i,n=DataManager.getInstance().getObj("data_activity_kfstandard"),s=n.data_activity_kfstandard,a=0;a<s.length;a++)i=s[a],t=new KfhdStandardVo,t.template_id=i.template_id,t.type=i.type,t.name=i.name,t.open_lv=i.open_lv,t.open_round=i.open_round,t["switch"]=i["switch"],t.open_day=i.open_day,t.goods=Tools.changeToNodeDropList(i.add_item),t.value=i.value,t.robShopID=parseInt(i.rob_id),this._kfhdStandardConfig[t.template_id]=t}return this._kfhdStandardConfig[e]},n.setServerTime=function(e){this.kaiFuDay=e.open_day,this.mergeTime=e.merge_day,this.weekDay=e.week,HeFuModel.getInstance().hefuDay=this.mergeTime,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FuLiEvtName.UPDATE_ICON_REDDOT))},n.checkAddKFHDIcon=function(){return this.getKaiFuIconList().length>0},n.reset=function(){this._kaifuShowIconList=null},n.getKaiFuIconList=function(){if(null==this._kaifuShowIconList){var e,i,n,s=this.getClientData(t.KAIFU),a=new Object;this._kaifuShowIconList=new Array;for(var o=0;o<s.length;o++)if(e=s[o],!a[e.type]){e.type==t.KFMINGRENTANG&&this.kaiFuDay<=8&&(a[e.type]=!0,this._kaifuShowIconList.push(e)),i=e.activityList;for(var r=0;r<i.length&&!a[e.type];r++)switch(n=i[r],e.type){case t.KFRANK:var h=this.getKFHDRankVo(n);h&&TimeUtil.isDateKaiFu(h.open_day)&&(a[e.type]=!0,this._kaifuShowIconList.push(e));break;case t.KFROBSHOP:var l=this.getKFHDRobShopVo(n);l&&TimeUtil.isDateKaiFu(l.open_day)&&(a[e.type]=!0,this._kaifuShowIconList.push(e));break;case t.KFSTANDARD:var d=this.getKFHDStandardVo(n);d&&TimeUtil.isDateKaiFu(d.open_day)&&this._kaifuShowIconList.push(e);break;case t.KFCHARGE:this.getKFHDChargeVo(n);this.getKFHDChargeConfig().length>=this.kaiFuDay&&(a[e.type]=!0,this._kaifuShowIconList.push(e));break;case t.KFTREASURE:this.getKFHDTreasureConfig().length>=this.kaiFuDay&&(a[e.type]=!0,this._kaifuShowIconList.push(e));break;case t.KFRECHARGE:this.kaiFuDay<=8&&(a[e.type]=!0,this._kaifuShowIconList.push(e));break;case t.KFTITLE:this.kaiFuDay<=8&&(a[e.type]=!0,this._kaifuShowIconList.push(e));break;case t.KFCHARGE_SINGLE:this.kaiFuDay<=8&&(a[e.type]=!0,this._kaifuShowIconList.push(e));break;case t.KF_TYPE_13:this.kaiFuDay<=8&&(a[e.type]=!0,this._kaifuShowIconList.push(e));break;case t.KF_TYPE_14:this.kaiFuDay<=8&&(a[e.type]=!0,this._kaifuShowIconList.push(e));break;case t.KF_TYPE_15:this.kaiFuDay<=8&&(a[e.type]=!0,this._kaifuShowIconList.push(e))}}}return this._kaifuShowIconList},n.getIconVo=function(e){if(this._kaifuShowIconList)for(var t,i=0;i<this._kaifuShowIconList.length;i++)if(t=this._kaifuShowIconList[i],t.type==e)return t;return null},n.getCurrentStandardVo=function(){for(var e,i=this.getKaiFuIconList(),n=0;n<i.length;n++)if(e=i[n],e.type==t.KFSTANDARD)return e;return null},n.getCurrentRankVo=function(){for(var e,i=this.getKaiFuIconList(),n=0;n<i.length;n++)if(e=i[n],e.type==t.KFRANK)return e;return null},n.getRankVoByRank=function(e,t){var i,n;for(i in this._kfhdRankConfig)if(n=this._kfhdRankConfig[i],n.type==e&&n.min<=t&&t<=n.max)return n;return null},n.checkTWAddRedDot=function(){var e,t,i,n,s=!1;for(e in this._dailyConsumeRewardDic){t=this._dailyConsumeRewardDic[e],i=t.act_daily_awards;for(var a=0;a<i.length;a++)n=i[a],!(n.flag>0)}return s},n.checkDailyHuoDongOk=function(){for(var e,i=!1,n=this.getClientData(t.DAILY),s=0;s<n.length;s++)if(e=n[s],this.checkOneIcon(e)){i=!0;break}return i},n.checkOneIcon=function(e){for(var i,n=!1,s=0,a=0,o=!1,r=0;r<e.activityList.length;r++)if(s=e.activityList[r],e.type==t.CONSUME?(i=this.getHDDailyConsume(s),o=this.checkConsumeHasGotReward(i)):e.type==t.TARGET&&(i=this.getHDDailyTarget(s),o=this.checkTargetHasGotReward(i)),a=this.getDailyValue(e.type,i.type),a>=i.value&&!o){n=!0;break}return n},n.setDailyConsumeRewardStatu=function(e){null==this._dailyConsumeRewardDic&&(this._dailyConsumeRewardDic=new Object),this._dailyConsumeRewardDic[e.type]=e},n.checkConsumeHasGotReward=function(e){if(null==this._dailyConsumeRewardDic)return!0;var t=this._dailyConsumeRewardDic[e.type];if(null==t)return!0;for(var i,n=t.act_daily_awards,s=0;s<n.length;s++)if(i=n[s],i.award_id==e.template_id)return i.flag>0;return!0},n.checkTargetHasGotReward=function(e){if(null==this._dailyTargetRewardDic)return!0;var t=this._dailyTargetRewardDic[e.type];if(null==t)return!0;for(var i,n=t.act_daily_awards,s=0;s<n.length;s++)if(i=n[s],i.award_id==e.template_id)return i.flag>0;return!0},n.checkKFIconOK=function(){for(var e,i=!1,n=this.getKaiFuIconList(),s=0;s<n.length;s++){switch(e=n[s],e.type){case t.KFSTANDARD:i=this.checkStandardOk(e);break;case t.KFROBSHOP:i=this.checkRobShopOk(e);break;case t.KFCHARGE:i=this.checkKfhdChargeCanGetAward();break;case t.KFTREASURE:i=this.checkKfhdTreasureCanGetAward();break;case t.KFRECHARGE:i=this.checkKFHDReChargeCanGetReward();break;case t.KFCHARGE_SINGLE:i=this.checkKFHDChargeSingleCanGetReward()}if(i)break}return i},n.checkStandardOk=function(e){for(var t,i=!1,n=e.activityList,s=0;s<n.length;s++)if(t=this.getKFHDStandardVo(n[s]),this.myValue>=t.value&&0==DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_18)){i=!0;break}return i},n.checkRobShopOk=function(e){for(var t,i=!1,n=e.activityList,s=0;s<n.length;s++)if(t=this.getKFHDRobShopVo(n[s]),t.con_coin>0){var a=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_19,t.template_id);t.day_limit>a&&RoleModel.getInstance().getRoleInfo().getCoin()>t.con_coin&&(i=!0)}return i},n.setKFHDChargeInfo=function(e){if(null==this._kfhdChargeInfoArr)this._kfhdChargeInfoArr=e.kfcharge_awards;else for(var t,i=0;i<e.kfcharge_awards.length;i++)t=e.kfcharge_awards[i],0==this.updateKfhdChargeNode(t)&&this._kfhdChargeInfoArr.push(t);GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HuoDongDailyEvtName.UPDATE_16600))},n.updateKfhdChargeNode=function(e){for(var t,i=0;i<this._kfhdChargeInfoArr.length;i++)if(t=this._kfhdChargeInfoArr[i],t.open_day==e.open_day)return t.flag=e.flag,t.spec_flag=e.spec_flag,!0;return!1},n.getKfhdChargeInfoByDay=function(e){var t;if(null==this._kfhdChargeInfoArr)return null;for(var i=0;i<this._kfhdChargeInfoArr.length;i++)if(t=this._kfhdChargeInfoArr[i],t.open_day==e)return t;return null},n.checkKfhdChargeCanGetAward=function(){var e;if(null==this._kfhdChargeInfoArr)return!1;for(var t=0;t<this._kfhdChargeInfoArr.length;t++)if(e=this._kfhdChargeInfoArr[t],0==e.flag&&e.open_day<=this.kaiFuDay)return!0;return!1},n.checkKFHDChargeSingleCanGetReward=function(){for(var e,t,i,n=this.getKFHDChargeSingleConfig(),s=0;s<n.length;s++)if(i=n[s],e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_56,i.template_id),t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_57,i.template_id),0==t&&1==e)return!0;return!1},n.checkKfhdChargeCanGetAwardOneDay=function(e){var t=this.getKfhdChargeInfoByDay(e);return null==t?!1:0==t.flag&&t.open_day<=this.kaiFuDay?!0:!1},n.checkKfhdTreasureCanGetAward=function(){return!1},n.updateOneRmbInfo=function(e){this.oneRmb_flag=e.flag,this.oneRmb_rankGold=e.rand_gold,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HuoDongDailyEvtName.UPDATE_16800))},n.updateNodeRmbInfo=function(e){if(this._nodeRmbInfoArr.length<=0)this._nodeRmbInfoArr=e.rmb_go_list;else{var t;for(var i in e.rmb_go_list)t=e.rmb_go_list[i],null==this.getNodeRmbInfoNode(t)&&this._nodeRmbInfoArr.push(t)}GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HuoDongDailyEvtName.UPDATE_18100))},n.setNodeRmbCanBuy=function(e){this.nodeRmbCanBuy=e,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HuoDongDailyEvtName.UPDATE_18110))},n.getNodeRmbInfoNode=function(e){var t;for(var i in this._nodeRmbInfoArr)if(t=this._nodeRmbInfoArr[i],t.rmb==e.rmb)return t.award_id=e.award_id,t.awarded_id=e.awarded_id,t.rand_num=e.rand_num,t.ctime=e.ctime,t;return null},n.getNodeRmbInfoNodeByType=function(e){var t;for(var i in this._nodeRmbInfoArr)if(t=this._nodeRmbInfoArr[i],t.rmb==e)return t;return null},n.setKFHDReChargeInfo=function(e){if(this._kfhdReChargeInfoArr.length<=0)this._kfhdReChargeInfoArr=e.kfrecharge_awards;else{var t;for(var i in e.kfrecharge_awards)t=e.kfrecharge_awards[i],null==this.updateKFHDReChargeNode(t)&&this._kfhdReChargeInfoArr.push(t)}GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HuoDongDailyEvtName.UPDATE_18200))},n.updateKFHDReChargeNode=function(e){var t;for(var i in this._kfhdReChargeInfoArr)if(t=this._kfhdReChargeInfoArr[i],t.cfg_id==e.cfg_id)return t.flag=e.flag,t;return null},n.getKFHDReChargeNode=function(e){var t;for(var i in this._kfhdReChargeInfoArr)if(t=this._kfhdReChargeInfoArr[i],t.cfg_id==e)return t;return null},n.checkDailyChargeCanGetReward=function(){var e,t=this.getDailyChargeConfig(),i=this.getDailyChargeGetRewardTimes(),n=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_14,0),s=0;for(var a in t)e=t[a],n>=e.num&&s++;if(0>=i){if(s>0)return!0}else if(1>=i&&s>=2)return!0;return!1},n.checkDailyChargeCanGetRewardByType=function(e){var t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_14,0),i=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_34,e),n=this.getDailyChargeVo(e);return t>=n.num&&1>i?!0:!1},n.getDailyChargeGetRewardTimes=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_34,1),t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_34,2);return e+t},n.checkOneRmbFinished=function(){if(this._nodeRmbInfoArr.length<=0)return!1;var e=this.getNodeRmbGetAwardLastTime();if(0>=e)return!1;var t=new Date(1e3*RoleModel.getInstance().serverTime),i=new Date(1e3*e);return 0==TimeUtil.isOnSameDay(t,i)?!1:!0},n.checkCanGetFunctionNoticeAwardAll=function(){var e,t=this.getFunctionNoticeAwardConfig();for(var i in t)if(e=t[i],this.checkCanGetFunctionNoticeAward(e.template_id))return!0;return!1},n.checkCanGetFunctionNoticeAward=function(e){if(e<=this.kaiFuDay){var t=FixedNumModel.getInstance().getFixedNumNode(FixedNumModel.FIXED_NUM_TYPE3,e);if(null==t||t.value<=0)return!0}return!1},n.checkAddNodeRmbIcon=function(){if(this._nodeRmbInfoArr.length<=0)return!0;var e,t,i=this.getNodeRmbConfig(),n=this.getNodeRmbGetAwardLastTime(),s=(RoleModel.getInstance().serverTime,new Date(1e3*RoleModel.getInstance().serverTime)),a=new Date(1e3*n),o=TimeUtil.isOnSameDay(s,a);o=!1;for(var r in i){if(e=i[r],t=this.getNodeRmbInfoNodeByType(e.template_id),null==t)return n>0?0==o?!0:!1:!0;if(t.awarded_id<e.num)return n>0?0==o?!0:!1:!0}return!1},n.getNodeRmbGetAwardLastTime=function(){var e,t=0;for(var i in this._nodeRmbInfoArr)e=this._nodeRmbInfoArr[i],e.ctime>0&&(t=e.ctime);return t},n.getNodeRmbCurrentInfo=function(){var e=this.getNodeRmbConfig();if(this._nodeRmbInfoArr.length<=0)return e[0];var t,i;for(var n in e){if(t=e[n],i=this.getNodeRmbInfoNodeByType(t.template_id),null==i)return t;if(i.awarded_id<t.num)return t}return null},n.checkKFHDReChargeCanGetReward=function(){for(var e,t,i=(this.kaiFuDay,FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE1,0)),n=this.getKFHDReChargeConfig(),s=0;s<n.length;s++)if(t=n[s],e=this.getKFHDReChargeNode(t.template_id),null==e){if(i>=t.need_gold)return!0}else if(0==e.flag)return!0;return!1},n.getHDRankStr=function(e,t){var i="";switch(t){case 3:i=StringUtil.substitute("翅膀战力:{0}",Tools.convertNumber(e.value));break;case 8:i=StringUtil.substitute("龙魂{0}级",e.value);break;case 9:i=StringUtil.substitute("宝石{0}级",e.value);break;case 10:i=StringUtil.substitute("消费元宝{0}",Tools.convertNumber(e.value));break;case 4:i=StringUtil.substitute("声望{0}",Tools.convertNumber(e.value));break;case 11:i=StringUtil.substitute("最大通关{0}关",e.value);break;case 2:i=StringUtil.substitute("{0}转{1}级",e.round,e.level);break;case 1:i=StringUtil.substitute("战力{0}",Tools.convertNumber(e.value));break;case 14:i=StringUtil.substitute("光环战力{0}",Tools.convertNumber(e.value));break;case 15:i=StringUtil.substitute("充值元宝{0}",Tools.convertNumber(e.value))}return i},n.getMrtRankStr=function(e,t){var i="";switch(t){case 3:i=StringUtil.substitute("翅膀战力:{0}",Tools.convertNumber(e.value));break;case 8:i=StringUtil.substitute("龙魂{0}级",e.value);break;case 9:i=StringUtil.substitute("宝石{0}级",e.value);break;case 10:i=StringUtil.substitute("消费元宝{0}",Tools.convertNumber(e.value));break;case 4:i=StringUtil.substitute("声望{0}",Tools.convertNumber(e.value));break;case 11:i=StringUtil.substitute("最大通关{0}关",e.value);break;case 2:var n=e.value/1e3,s=Math.floor(n),a=Math.floor(1e3*(n-s));i=StringUtil.substitute("{0}转{1}级",s,a);break;case 1:i=StringUtil.substitute("战力{0}",Tools.convertNumber(e.value));break;case 14:i=StringUtil.substitute("光环战力{0}",Tools.convertNumber(e.value));break;case 15:i=StringUtil.substitute("充值元宝{0}",Tools.convertNumber(e.value))}return i},t.DAILY=1,t.KAIFU=2,t.CONSUME=1,t.TARGET=2,t.KFRANK=3,t.KFSTANDARD=4,t.KFROBSHOP=5,t.KFCHARGE=6,t.KFMINGRENTANG=7,t.KFTREASURE=8,t.KFRECHARGE=9,t.KFTITLE=10,t.KFCHARGE_SINGLE=12,t.KF_TYPE_13=13,t.KF_TYPE_14=14,t.KF_TYPE_15=15,t.XIAOFEI=1,t.TREASURE=2,t.FAST=3,t.CHARGE=4,t.WAVE=1,t.FIGHT=2,t.LEVEL=3,t.ROUND=4,t.DAYDAY_CHARGE=5,t.WINGSTANDARD=1,t.LONGSTANDARD=2,t.STONESTANDARD=3,t.CONSUMESTANDARD=4,t.MPSTANDARD=5,t.WAVESTANDARD=6,t.ROUNDSTANDARD=7,t.FIGHTSTANDARD=8,t.XIAOFEI2=1001,t.TREASURE2=1002,t.FAST2=1003,t.CHARGE2=1004,t.WAVE2=1005,t.FIGHT2=1006,t.LEVEL2=1007,t.DAYDAY_CHARGE2=1008,t.KF_SHOP_EQUIP_1=8001,t.KF_SHOP_EQUIP_2=8002,t.UPDATE_HDDAILY_CONSUME="UPDATE_HDDAILY_CONSUME",t.UPDATE_HDDAILYTARGET_CONSUME="UPDATE_HDDAILYTARGET_CONSUME",t}(egret.EventDispatcher);egret.registerClass(HuoDongDailyModel,"HuoDongDailyModel");var KFHDChargeSingleVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(KFHDChargeSingleVo,"KFHDChargeSingleVo");var KFHDChargeVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(KFHDChargeVO,"KFHDChargeVO");var KFHDMrtRandkItem=function(e){function t(){e.call(this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDRankItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dataChanged=function(){var e=this.data;this._txtRank.text=StringUtil.substitute("名次\n{0}",e.rank),this._txtName.text=e.role_name;var t=this;null==t._goodsCach&&(t._goodsCach=new Array),t.clearGoods();for(var i,n,s=HuoDongDailyModel.getInstance().getKFHDClientVo(e.open_day+2e3),a=s.activityList[0],o=HuoDongDailyModel.getInstance().getKFHDRankVo(a),r=HuoDongDailyModel.getInstance().getRankVoByRank(o.type,e.rank),h=r.goods,l=0;l<h.length;l++)i=t._goodsCach[l],null==i&&(i=new GoodsItem,t._goodsCach.push(i)),n=GoodsListProxy.getInstance().getGoodsInfoByType(h[l].asset_id),n.num=h[l].value,i.data=n,i.x=100*l+110,i.y=18,t.addChild(i);t._txtLv.text=HuoDongDailyModel.getInstance().getMrtRankStr(e,o.type)},n.clearGoods=function(){for(var e,t=0;t<this._goodsCach.length;t++)e=this._goodsCach[t],this.contains(e)&&this.removeChild(e)},n.dispose=function(){for(var e,t=0;t<this._goodsCach.length;t++)e=this._goodsCach[t],this.contains(e)&&this.removeChild(e),e.dispose(),e=null;this._goodsCach=null},t}(eui.ItemRenderer);egret.registerClass(KFHDMrtRandkItem,"KFHDMrtRandkItem");var BaseView=function(e){function t(){e.call(this)}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.onOpenHandler=function(){},s.onCloseHandler=function(){},i(s,"resGroupName",void 0,function(e){this._resGroupName=e,RES.isGroupLoaded(this._resGroupName)?this.onReGroupLoadComplete():(RES.loadGroup(this._resGroupName),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onReGroupLoadComplete,this))}),s.onReGroupLoadComplete=function(){},s.dispose=function(){e.prototype.dispose.call(this),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onReGroupLoadComplete,this)},s.onAdd=function(){},s.onRemove=function(){},t}(Csprite);egret.registerClass(BaseView,"BaseView");var KFHDRandkItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDRankItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){},n.setData=function(e,t){var i=this;null==i._goodsCach&&(i._goodsCach=new Array),i.clearGoods();for(var n,s,a=HuoDongDailyModel.getInstance().getRankVoByRank(t,e.rank),o=a.goods,r=0;r<o.length;r++)n=i._goodsCach[r],null==n&&(n=new GoodsItem,i._goodsCach.push(n)),s=GoodsListProxy.getInstance().getGoodsInfoByType(o[r].asset_id),s.num=o[r].value,n.data=s,n.x=100*r+110,n.y=18,i.addChild(n);i._txtRank.text=StringUtil.substitute("名次\n{0}",e.rank),i._txtName.text=e.name,i._txtLv.text=HuoDongDailyModel.getInstance().getHDRankStr(e,t),i=null},n.clearGoods=function(){for(var e,t=0;t<this._goodsCach.length;t++)e=this._goodsCach[t],this.contains(e)&&this.removeChild(e)},n.dispose=function(){e.prototype.dispose.call(this);for(var t,i=0;i<this._goodsCach.length;i++)t=this._goodsCach[i],this.contains(t)&&this.removeChild(t),t.dispose(),t=null;this._goodsCach=null},t}(BaseView);egret.registerClass(KFHDRandkItem,"KFHDRandkItem");var KFHDRandkView=function(e){function t(){e.call(this),this._model=HuoDongDailyModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDRankViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._itemCach=new Array,this._btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickClose,this)},n.setData=function(e){this._vo=e},n.onAdd=function(){e.prototype.onAdd.call(this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateRankInfo,this),this.dispatchGlobalEvent(new ParamEvent(RankEvtName.RANK_CCMD13500,this._vo.type))},n.onRemove=function(){e.prototype.onRemove.call(this),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateRankInfo,this)},n.onClickClose=function(e){this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REMOVE_KFHD_RANKVIEW))},n.updateRankInfo=function(e){var t,i,n=e.data,s=n.rank_list;this._container.removeChildren(),this._txtNoPlayer.visible=0==s.length;for(var a=0;a<s.length&&20>a;a++)i=this._itemCach[a],null==i&&(i=new KFHDRandkItem,this._itemCach.push(i)),t=s[a],i.setData(t,this._vo.type),i.x=0,i.y=151*a,this._container.addChild(i);0==n.self_rank?this._txtDes.text=StringUtil.substitute("我的{0}:{1}",this._vo.name,"20名以外"):this._txtDes.text=StringUtil.substitute("我的{0}:{1}",this._vo.name,n.self_rank)},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.onRemove();for(var i,n=0;n<this._itemCach.length;n++)i=this._itemCach[n],i.parent&&i.parent.removeChild(i),i.dispose(),i=null;this._itemCach=null},t}(BaseView);egret.registerClass(KFHDRandkView,"KFHDRandkView");var KFHDReChargeVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(KFHDReChargeVO,"KFHDReChargeVO");var KFHDTitleVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(KFHDTitleVO,"KFHDTitleVO");var KFHDTreasureVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(KFHDTreasureVo,"KFHDTreasureVo");var KFShopEquipVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(KFShopEquipVo,"KFShopEquipVo");var KfhdRankVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(KfhdRankVo,"KfhdRankVo");var KfhdRobShopVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(KfhdRobShopVo,"KfhdRobShopVo");var KfhdStandardVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(KfhdStandardVo,"KfhdStandardVo");var NodeRmbVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeRmbVo,"NodeRmbVo");var JinbangModel=function(){function e(){}var t=(__define,e);t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e}();egret.registerClass(JinbangModel,"JinbangModel");var KfKillerModel=function(){function e(){}var t=(__define,e);t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e}();egret.registerClass(KfKillerModel,"KfKillerModel");var KingModel=function(e){function t(){e.call(this),this.goToPK=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.getConfig=function(){if(!this._kingObj){this._kingObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_king_dan"),i=t.data_king_dan,n=void 0,s=0;s<i.length;s++)n=i[s],e=new KingVo,e.template_id=n.template_id,e.name=n.name,e.type=n.type,e.lv=n.lv,e.need=n.need,e.fail_star=n.fail_star,e.add_coin=n.add_coin,e.add_feats=n.add_feats,e.scene_id=n.scene_id,e.mon_pos=n.mon_pos,e.radio=n.radio,""!=n.add_item&&"0"!=n.add_item&&null!=n.add_item&&(e.add_item=Tools.changeToItemData(n.add_item)),e.radio=n.radio,this._kingObj[e.template_id]=e}return this._kingObj},n.getConfigLv=function(){if(!this._lvObj){this._lvObj=new Object;for(var e=DataManager.getInstance().getObj("data_king_reward_lv"),t=e.data_king_reward_lv,i=void 0,n=0;n<t.length;n++)i=t[n],this._lvObj[i.template_id]=Tools.changeToItemData(i.add_item)[0]}return this._lvObj},n.getConfigTop=function(){if(!this._topObj){this._topObj=new Object;for(var e=DataManager.getInstance().getObj("data_king_top_five"),t=e.data_king_top_five,i=void 0,n=0;n<t.length;n++)i=t[n],this._topObj[i.template_id]=Tools.changeToItemData(i.add_item)[0]}return this._topObj},n.getKingVo=function(e){return this.getConfig()[e]},n.getKingLvVo=function(e){return this.getConfigLv()[e]},n.getKingTopVo=function(e){return this.getConfigTop()[e]},n.setData=function(e){this._data=e
},n.getData=function(){return this._data},t}(egret.EventDispatcher);egret.registerClass(KingModel,"KingModel");var KingVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(KingVo,"KingVo");var KuaFuModel=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t}(egret.EventDispatcher);egret.registerClass(KuaFuModel,"KuaFuModel");var LegendSuitDataVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(LegendSuitDataVO,"LegendSuitDataVO");var LegendSuitModel=function(e){function t(){e.call(this),this._legendSuitDataList=[]}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},n.getDataVO=function(e,t){this._legendSuitDataList.length<=0&&(this._legendSuitDataList=this.createDataList());var i,n=[];for(var s in this._legendSuitDataList)i=this._legendSuitDataList[s],i.slot==t&&n.push(i);for(var a=0;a<n.length;a++){if(i=n[a],e<i.player_round)return null!=n[a-1]?n[a-1]:i;if(e==i.player_round)return i}return i},n.getDataVOByTemplateId=function(e){this._legendSuitDataList.length<=0&&(this._legendSuitDataList=this.createDataList());var t;for(var i in this._legendSuitDataList)if(t=this._legendSuitDataList[i],t.template_id==e)return t;return null},n.getDataVOByItemId=function(e){this._legendSuitDataList.length<=0&&(this._legendSuitDataList=this.createDataList());var t;for(var i in this._legendSuitDataList)if(t=this._legendSuitDataList[i],t.item_id==e)return t;return null},n.createDataList=function(){for(var e,t,i,n,s=DataManager.getInstance().getObj("data_legend_suit"),a=s.data_legend_suit,o=[],r=0;r<a.length;r++)e=a[r],t=new LegendSuitDataVO,t.template_id=e.template_id,t.item_id=e.item_id,t.player_round=e.player_round,t.next_id=e.next_id,t.slot=e.slot,t.add_item=e.add_item,t.con_item=e.con_item,i=t.con_item.match(/\d+/g),t.con_itemid=parseInt(i[0]),t.con_count=parseInt(i[1]),n=t.add_item.match(/\d+/g),t.add_itemid=parseInt(n[0]),t.add_count=parseInt(n[1]),o.push(t);return o},n.getLegendsuitDebrisCanUpOrActive=function(){var e,t,i,n,s,a,o=RoleModel.getInstance().getPartnerList(),r=RoleModel.getInstance().getRoleCommon().level,h=RoleModel.getInstance().getRoleCommon().round;if(null==o||void 0==o)return!1;for(var l,n=0,d=0;d<o.length;d++){e=o[d];for(var _=0;_<EquipmentVO.LEGENDEQUIP_GRID.length;_++)if(l=EquipmentVO.LEGENDEQUIP_GRID[_],t=this.getDataVO(h,l),i=this.getDataVOByTemplateId(t.next_id),a=GoodsListProxy.getInstance().getEquipInfoBySlot(e.parnerID,l,GoodsType.QUALITY_7),n=GoodsListProxy.getInstance().findGoodNumber(t.con_itemid),a?(t=this.getDataVOByItemId(a.template_id),i=this.getDataVOByTemplateId(t.next_id),s=i?i.con_count-t.con_count:0):s=t.con_count,n>=s){if(h<t.player_round)return!1;if(a){if(a.req_round>0){if(i&&i.player_round<=h)return!0}else if(i&&a.req_lv<r)return!0}else if(t&&t.player_round<=h)return!0}}return!1},n.getLegendsuitSingeDebrisCanUpOrActive=function(e){for(var t,i,n,s,a,o,r=RoleModel.getInstance().getRoleCommon().level,h=RoleModel.getInstance().getRoleCommon().round,n=0,l=0;l<EquipmentVO.LEGENDEQUIP_GRID.length;l++)if(o=EquipmentVO.LEGENDEQUIP_GRID[l],t=this.getDataVO(h,o),i=this.getDataVOByTemplateId(t.next_id),a=GoodsListProxy.getInstance().getEquipInfoBySlot(e.parnerID,o,GoodsType.QUALITY_7),n=GoodsListProxy.getInstance().findGoodNumber(t.con_itemid),a?(t=this.getDataVOByItemId(a.template_id),i=this.getDataVOByTemplateId(t.next_id),s=i?i.con_count-t.con_count:0):s=t.con_count,n>=s)if(a){if(a.req_round>0){if(i&&i.player_round<=h)return!0}else if(i&&a.req_lv<r)return!0}else if(t&&t.player_round<=h)return!0;return!1},n.getLegendsuitSingeDebrisCanUpOrActiveBySlot=function(e,t){var i,n,s,a,o,r=RoleModel.getInstance().getRoleCommon().level,h=RoleModel.getInstance().getRoleCommon().round,s=0;if(i=this.getDataVO(h,t),n=this.getDataVOByTemplateId(i.next_id),o=GoodsListProxy.getInstance().getEquipInfoBySlot(e.parnerID,t,GoodsType.QUALITY_7),s=GoodsListProxy.getInstance().findGoodNumber(i.con_itemid),o?(i=this.getDataVOByItemId(o.template_id),n=this.getDataVOByTemplateId(i.next_id),a=n?n.con_count-i.con_count:0):a=i.con_count,s>=a)if(o){if(o.req_round>0){if(n&&n.player_round<=h)return!0}else if(n&&o.req_lv>=r)return!1}else if(i&&i.player_round<=h)return!0;return!1},t}(egret.EventDispatcher);egret.registerClass(LegendSuitModel,"LegendSuitModel");var ChargeOrderVO=function(){function e(){this.req_code="showPayDialog"}var t=(__define,e);t.prototype;return e}();egret.registerClass(ChargeOrderVO,"ChargeOrderVO");var HttpVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(HttpVO,"HttpVO");var LoginModel=function(){function e(){this.isCreateRole=!1,this.isCreateRoleThisTime=0,this.isNeedCreateRole=!1,this.last_login_server=0,this.server_info=[],this.server_gap=100,this.server_group_count=0}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},i.setServerListInfo=function(t){this.last_login_server=Number(t.last_login_server),this.last_login_server_list=t.last_login_server_list;var i=t.server_info;if(null!=i){for(var n,s=0;s<i.length;s++)n=new LoginServerVO,n.ip=i[s].ip,n.port=Number(i[s].port),n.open_time=Number(i[s].open_time),n.server_id=Number(i[s].server_id),n.server_name=i[s].server_name,n.status=Number(i[s].status),this.server_info.push(n);this.server_group_count=Math.ceil(this.server_info.length/this.server_gap)}if(this.last_login_server>0)GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_GAMESTART_VIEW));else{var a=this.getBestNewServerVO();if(a){if(2==a.status)return;e.getInstance().enterGameHandler(a)}}},i.getLoginServerVO=function(e){if(null!=this.server_info){for(var t,i=0;i<this.server_info.length;i++)if(t=this.server_info[i],t.server_id==e)return t;return null}},i.getBestNewServerVO=function(){return null==this.server_info?null:this.server_info.length<=0?null:this.server_info[0]},i.getLastServerVOList=function(){var e,t=0,i=[];if(null!=this.last_login_server_list){for(var n in this.last_login_server_list)t=this.last_login_server_list[n],e=this.getLoginServerVO(t),null!=e&&i.push(e);return i}},i.enterGameHandler=function(e){ConfigManager.server_id=e.server_id,ConfigManager.plat_ip=e.ip,ConfigManager.plat_port=e.port},i.setChargeOrderVO=function(e){var t=new ChargeOrderVO;return t.game_id=e.game_id,t.trade_id=e.trade_id,t.user_id=e.user_id,t.role_id=e.role_id,t.body=e.body,t.total_fee=e.total_fee,t.attach=e.attach,t.notify_url=e.notify_url,t.nonce_str=e.nonce_str,t.sign=e.sign,t},e}();egret.registerClass(LoginModel,"LoginModel");var LoginServerVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(LoginServerVO,"LoginServerVO");var FuliJijinVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(FuliJijinVO,"FuliJijinVO");var FuliModel=function(e){function t(){e.call(this)}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},s.getConfigJijin=function(){if(!this._jijinArr){this._jijinArr=[];for(var e,t=DataManager.getInstance().getObj("data_fund"),i=t.data_fund,n=void 0,s=0;s<i.length;s++)n=i[s],e=new FuliJijinVO,e.template_id=n.template_id,e.req_hook=n.req_hook,e.itemList=Tools.changeToItemData(n.add_item),this._jijinArr.push(e)}return this._jijinArr},s.getConfigTree=function(){if(!this._treeObj){this._treeObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_money_tree"),i=t.data_money_tree,n=void 0,s=0;s<i.length;s++)n=i[s],e=new MoneyTreeVo,e.template_id=n.template_id,e.need=n.need,e.itemList=Tools.changeToItemData(n.add_item),this._treeObj[e.template_id]=e}return this._treeObj},s.getJijinArr=function(){for(var e,t=[],i=[],n=0;n<this.getConfigJijin().length;n++)e=this.getConfigJijin()[n],this.isJijinGetReward(e.template_id)?i.push(e):t.push(e);return t.concat(i)},s.setJijinData=function(e,t){void 0===t&&(t=-1),-1!=t&&(this._isBuyJijin=1==t),this._jijinData||(this._jijinData=new Object);for(var i=0;i<e.length;i++)this._jijinData[e[i].cfg_id]=e[i].flag>0},i(s,"isBuyJijin",function(){return this._isBuyJijin}),s.isJijinGetReward=function(e){return this._jijinData?this._jijinData[e]:!1},s.getTreeVo=function(e){return this.getConfigTree()[e]},s.getShareNewObj=function(e,t){if(null==this._shareNewObj){this._shareNewObj=new Object;for(var i=DataManager.getInstance().getObj("data_activity_share"),n=i.data_activity_share,s=0;s<n.length;s++){var a=new ShareNewVo,o=n[s];a.template_id=o.template_id,a.activity_id=o.activity_id,a.type=o.type,a.add_gold=o.add_gold,this._shareNewObj[a.type+"_"+a.activity_id]=a}}return this._shareNewObj[e+"_"+t]},t}(egret.EventDispatcher);egret.registerClass(FuliModel,"FuliModel");var LoginRewardModel=function(e){function t(){e.call(this),this._rewardObj=new Object,this.createBasic()}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.createBasic=function(){for(var e,t,i=DataManager.getInstance().getObj("data_login_reward"),n=i.data_login_reward,s=0;s<n.length;s++)e=n[s],t=new LoginRewardVO,t.template_id=e.template_id,t.req_day=e.req_day,t.itemList=Tools.changeToItemData(e.reward_login),this._rewardObj[t.template_id]=t},n.getRewardVoById=function(e){return this._rewardObj[e]},n.getIdByDay=function(e){for(var t=1,i=1;9>i;i++){var n=this._rewardObj[i];e>=n.req_day&&(t=n.template_id)}return t},t}(egret.EventDispatcher);egret.registerClass(LoginRewardModel,"LoginRewardModel");var LoginRewardVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(LoginRewardVO,"LoginRewardVO");var MoneyTreeVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(MoneyTreeVo,"MoneyTreeVo");var LunhuiModel=function(e){function t(){e.call(this),this._obj=new Object,this.createBasic()}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.createBasic=function(){for(var e,t,i=DataManager.getInstance().getObj("data_hook_circle"),n=i.data_hook_circle,s=0;s<n.length;s++)e=n[s],t=new LunhuiVO,t.template_id=e.template_id,t.need_hook=e.need_hook,this._obj[t.template_id]=t},n.getVoById=function(e){return this._obj[e]},t.LUNHUIBACK="LUNHUIBACK",t}(egret.EventDispatcher);egret.registerClass(LunhuiModel,"LunhuiModel");var LunhuiVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(LunhuiVO,"LunhuiVO");var MagicPetConfigVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(MagicPetConfigVo,"MagicPetConfigVo");var MagicPetDataVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(MagicPetDataVo,"MagicPetDataVo");var MagicPetGradeVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(MagicPetGradeVo,"MagicPetGradeVo");var MagicPetLevelVo=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(PropertyVO);egret.registerClass(MagicPetLevelVo,"MagicPetLevelVo");var MagicPetModel=function(){function e(){this.createBase(),this.weaponUpAuto=!1}var t=__define,i=e,n=i.prototype;return e.getInstance=function(){return this.intance||(this.intance=new e),this.intance},n.createBase=function(){this.createPetConfig(),this.createPetLevel(),this.createPetGrade(),this.createPetWeapon(),this.curPetId=1,this.weaponList=[];for(var e=0;3>e;e++){var t=new NodePet_weapon;t.weapon_type=e+1,t.star=0,t.stage=0,t.is_show=0,t.exp=0,this.weaponList.push(t)}},n.createPetLevel=function(){this.petLevelConf=[];for(var e,t,i=DataManager.getInstance().getObj("data_pet_lv"),n=i.data_pet_lv,s=0;s<n.length;s++)e=n[s],t=new MagicPetLevelVo,t.template_id=e.template_id,t.type=e.type,t.lv=e.lv,t.setValue(PropertyVO.HP,e.hp),t.setValue(PropertyVO.ATTACK,e.att),t.setValue(PropertyVO.ATTACK_DEF,e.att_def),t.setValue(PropertyVO.MAGIC_DEF,e.magic_def),t.con_item=e.con_item,this.petLevelConf.push(t)},n.getLevelConfigById=function(e,t){for(var i=0;i<this.petLevelConf.length;i++)if(this.petLevelConf[i].type==e&&this.petLevelConf[i].lv==t)return this.petLevelConf[i]},n.createPetGrade=function(){this.petGradeConf=[];for(var e,t,i=DataManager.getInstance().getObj("data_pet_class"),n=i.data_pet_class,s=0;s<n.length;s++)e=n[s],t=new MagicPetGradeVo,t.template_id=e.template_id,t.type=e.type,t.limit_lv=e.limit_lv,t["class"]=e["class"],t.con_item=e.con_item,this.petGradeConf.push(t)},n.getConfigByGrade=function(e,t){for(var i=0;i<this.petGradeConf.length;i++)if(this.petGradeConf[i].type==e&&this.petGradeConf[i]["class"]==t)return this.petGradeConf[i]},n.createPetConfig=function(){this.petConfig=[];for(var e,t,i=DataManager.getInstance().getObj("data_pet"),n=i.data_pet,s=0;s<n.length;s++)e=n[s],t=new MagicPetConfigVo,t.template_id=e.template_id,t.name=e.name,t.show=e.show,t.req_vip=e.req_vip,t.req_pet=e.req_pet,this.petConfig.push(t);this.petData=[];for(var s=0;s<this.petConfig.length;s++){var a=new MagicPetDataVo;a.pet_id=this.petConfig[s].template_id,a.calss=0,a.level=0,a.exp=0,a.active=!1,this.petData.push(a)}},n.getPetConfig=function(){return this.petConfig},n.getPetConfigById=function(e){for(var t=0;t<this.petConfig.length;t++)if(this.petConfig[t].template_id==e)return this.petConfig[t];return null},n.getPetDataById=function(e){for(var t=0;t<this.petData.length;t++)if(this.petData[t].pet_id==e)return this.petData[t];return null},n.getCurPetData=function(){return this.getPetDataById(this.curPetId)},n.setPetInfo=function(e){for(var t=0;t<e.length;t++)for(var i=0;i<this.petData.length;i++)this.petData[i].pet_id==e[t].pet_id&&(this.petData[i].calss=e[t].calss,this.petData[i].level=e[t].level,this.petData[i].exp=e[t].exp,this.petData[i].active=!0)},n.createPetWeapon=function(){this.petWeaponConf=[];for(var e,t,i=DataManager.getInstance().getObj("data_pet_weapon"),n=i.data_pet_weapon,s=0;s<n.length;s++)e=n[s],t=new MagicPetWeaponConfig,t.template_id=e.template_id,t.type=e.type,t.star=e.star,t.lv=e.lv,t.luck_limit=e.luck_limit,t.con_item=Tools.changeToItemData(e.con_item),t.hp=e.hp,t.attack=e.att,t.att_def=e.att_def,t.magic_def=e.magic_def,this.petWeaponConf.push(t)},n.getWeaponConfig=function(e,t,i){for(var n=0;n<this.petWeaponConf.length;n++){var s=this.petWeaponConf[n];if(s.type==e&&s.lv==t&&s.star==i)return s}return null},n.chargeData=function(e){for(var t=0;t<e.length;t++)for(var i=0;i<this.weaponList.length;i++)this.weaponList[i].weapon_type==e[t].weapon_type&&(this.weaponList[i]=e[t])},n.onWeaponActive=function(e){for(var t=0;t<this.weaponList.length;t++)e==this.weaponList[t].weapon_type&&(this.weaponList[t].stage=1)},n.onWeaponShow=function(e){for(var t=0;t<this.weaponList.length;t++)e==this.weaponList[t].weapon_type&&(this.weaponList[t].is_show=0==this.weaponList[t].is_show?1:0)},t(n,"equipedWeapon",function(){for(var e=0;e<this.weaponList.length;e++)if(this.weaponList[e].is_show)return this.weaponList[e];return null}),n.getWeaponDate=function(e){for(var t=0;t<this.weaponList.length;t++)if(e==this.weaponList[t].weapon_type)return this.weaponList[t]},n.checkWeaponUpable=function(){for(var e=!1,t=0;t<this.weaponList.length;t++){var i=this.weaponList[t];this.checkWeaponUpableByType(i.weapon_type)&&(e=!0)}return e},n.checkWeaponUpableByType=function(t){for(var i=0;i<this.weaponList.length;i++){var n=this.weaponList[i];if(t==n.weapon_type){var s=e.getInstance().getWeaponConfig(n.weapon_type,n.stage,n.star);if(s&&s.con_item[0]){var a=GoodsListProxy.getInstance().findGoodNumber(s.con_item[0].info.template_id),o=s.con_item[0].info.num;return a>=o}}}return!1},e}();egret.registerClass(MagicPetModel,"MagicPetModel");var MagicPetWeaponConfig=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(PropertyVO);egret.registerClass(MagicPetWeaponConfig,"MagicPetWeaponConfig");var MailModel=function(e){function t(){e.call(this),this.mailData=[]}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.getMailIndexById=function(e){for(var t,i=0;i<this.mailData.length;i++)if(t=this.mailData[i],t&&t.mail_id==e)return i;return-1},n.updateData=function(e){for(var t,i,n=0;n<e.length;n++)i=e[n],t=this.getMailIndexById(i.mail_id),t>=0?this.mailData[t]=i:this.mailData.push(i);for(var s=[],a=[],o=[],r=[],h=0;h<this.mailData.length;h++)i=this.mailData[h],i.mail_read>0?0==this.isGetReward(i)?s.push(i):a.push(i):0==this.isGetReward(i)?o.push(i):r.push(i);s.sort(function(e,t){return e.ctime>t.ctime?-1:1}),a.sort(function(e,t){return e.ctime>t.ctime?-1:1}),o.sort(function(e,t){return e.ctime>t.ctime?-1:1}),r.sort(function(e,t){return e.ctime>t.ctime?-1:1}),this.mailData=o.concat(r).concat(s).concat(a)},n.isGetReward=function(e){return e.accessorys.length>0&&0==e.mail_award?0:1},t}(egret.EventDispatcher);egret.registerClass(MailModel,"MailModel");var MainUIModel=function(){function e(){this.bagRect=new Point,this.goldRect=new Point,this.guildRect=new Point,this.isMainUIInited=!1}var t=(__define,e);t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e}();egret.registerClass(MainUIModel,"MainUIModel");var MallModel=function(e){function t(){e.call(this),this._shopObj=new Object,this._shopIdObj=new Object,this._shopTypeObj=new Object,this._shopSmObj=new Object,this._shopSmsxObj=new Object,this._shopLevelConfig=[],this.createShop(),this.createShopSM(),this.createShopSMSX()}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.createShop=function(){for(var e,t,i=DataManager.getInstance().getObj("data_shop"),n=i.data_shop,s=0;s<n.length;s++)e=n[s],t=new MallShopBasic,t.template_id=e.template_id,t.mall_type=e.mall_type,t.name=e.name,t.id=e.id,t.num=e.number,t.buy_limit=e.buy_limit,t.con_coin=e.con_coin,t.con_gold=e.con_gold,t.con_gx=e.con_gx,t.con_soul=e.con_soul,t.con_mallpoint=e.con_mallpoint,t.con_feats=e.con_feats,t.hide=e.hide,t.sort=e.sort,""!=e.con_item&&"0"!=e.con_item&&null!=e.con_item&&(t.con_item=Tools.changeToItemData(e.con_item)),this._shopObj[t.template_id]=t,this._shopTypeObj[t.mall_type]||(this._shopTypeObj[t.mall_type]=new Array),this._shopTypeObj[t.mall_type].push(t),this._shopIdObj[t.mall_type]||(this._shopIdObj[t.mall_type]=new Object),this._shopIdObj[t.mall_type][t.id]=t},n.createShopSM=function(){for(var e,t,i=DataManager.getInstance().getObj("data_shop_sm"),n=i.data_shop_sm,s=0;s<n.length;s++)e=n[s],t=new MallShopSMBasic,t.template_id=e.template_id,t.name=e.name,t.id=e.id,t.num=e.number,t.sale_batch=e.sale_batch,t.con_coin=e.con_coin,t.con_gold=e.con_gold,t.add_mallpoint=e.add_mallpoint,t.discount=e.discount,t.rate=e.rate,this._shopSmObj[t.template_id]=t},n.createShopSMSX=function(){for(var e,t,i=DataManager.getInstance().getObj("data_shop_smsx"),n=i.data_shop_smsx,s=0;s<n.length;s++)e=n[s],t=new MallShopSMSXBasic,t.template_id=e.template_id,t.min_round=e.min_round,t.max_round=e.max_round,t.min_level=e.min_level,t.max_level=e.max_level,this._shopSmsxObj[t.template_id]=t},n.getShopRmbConfig=function(){if(!this._shopRmbObj){this._shopRmbObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_rmb_shop"),i=t.data_rmb_shop,n=void 0,s=0;s<i.length;s++)n=i[s],e=new MallRmbVo,e.template_id=n.template_id,e.rmb=n.rmb,e.vip_exp=n.vip_exp,e.name=n.name,e.type=n.type,e.sub_type=n.sub_type,e.android=n.android,e.ios=n.ios,""!=n.add_item&&"0"!=n.add_item&&null!=n.add_item&&(e.add_item=Tools.changeToItemData(n.add_item)),""!=n.show&&"0"!=n.show&&null!=n.show&&(e.show=Tools.changeToItemData(n.show)),this._shopRmbObj[e.template_id]=e}return this._shopRmbObj},n.getShopRmbRandConfig=function(){if(!this._shopRmbRandObj){this._shopRmbRandObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_rmb_shop_rand"),i=t.data_rmb_shop_rand,n=void 0,s=0;s<i.length;s++)n=i[s],e=new MallRmbRandVo,e.template_id=n.template_id,e.week=n.week,e.rand_gold=n.rand_gold,e.weight=n.weight,this._shopRmbRandObj[e.week]||(this._shopRmbRandObj[e.week]=[]),this._shopRmbRandObj[e.week].push(e)}return this._shopRmbRandObj},n.getShopCheapConfig=function(){if(!this._shopCheapObj){this._shopCheapObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_shop_cheap"),i=t.data_shop_cheap,n=void 0,s=0;s<i.length;s++)n=i[s],e=new ShopCheapVo,e.template_id=n.template_id,e.type=n.type,e.item_id=n.item_id,e.vip_limit=n.vip_limit,e.cost=n.cost,e.con_gold=n.con_gold,e.show=n.show,e.show_pic=n.show_pic,""!=n.show_item&&"0"!=n.show_item&&null!=n.show_item&&(e.show_item=Tools.changeToItemData(n.show_item)),this._shopCheapObj[e.template_id]=e}return this._shopCheapObj},n.getKFShopCheapConfig=function(){if(!this._shopCheapObj){this._shopCheapObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_kfshop_cheap"),i=t.data_kfshop_cheap,n=void 0,s=0;s<i.length;s++)n=i[s],e=new ShopCheapVo,e.template_id=n.template_id,e.type=n.open_day,e.item_id=n.item_id,e.vip_limit=n.vip_limit,e.cost=n.cost,e.con_gold=n.con_gold,e.show=n.show,e.show_pic=n.show_pic,""!=n.show_item&&"0"!=n.show_item&&null!=n.show_item&&(e.show_item=Tools.changeToItemData(n.show_item)),this._shopCheapObj[e.template_id]=e}return this._shopCheapObj},n.createShopLevelConfig=function(){for(var e,t,i=DataManager.getInstance().getObj("data_shop_level"),n=i.data_shop_level,s=0;s<n.length;s++)e=n[s],t=new ShopLevelVo,t.template_id=e.template_id,t.lv=e.lv,t.round=e.round,t.original_price=e.original_price,t.con_gold=e.con_gold,t.goodsList=Tools.changeToNodeDropList(e.add_item),t.deadline=e.deadline,this._shopLevelConfig.push(t)},n.getShopLevelConfig=function(){return this._shopLevelConfig.length<=0&&this.createShopLevelConfig(),this._shopLevelConfig},n.getShopLevelVO=function(e){this._shopLevelConfig.length<=0&&this.createShopLevelConfig();var t;for(var i in this._shopLevelConfig)if(t=this._shopLevelConfig[i],t.template_id==e)return t;return null},n.getShopLevelVOByLv=function(e){this._shopLevelConfig.length<=0&&this.createShopLevelConfig();var t;for(var i in this._shopLevelConfig)if(t=this._shopLevelConfig[i],t.lv==e)return t;return null},n.getShopLevelVOByRound=function(e){this._shopLevelConfig.length<=0&&this.createShopLevelConfig();var t;for(var i in this._shopLevelConfig)if(t=this._shopLevelConfig[i],t.round==e)return t;return null},n.getSMBasic=function(e){return this._shopSmObj[e]},n.getShopByType=function(e){var t=this._shopTypeObj[e];return t.sort(function(e,t){return e.sort>t.sort?1:-1}),t},n.getShopByTypeId=function(e,t){return this._shopIdObj[e][t]},n.getShopVo=function(e){return this._shopObj[e]},n.getShopBasicVO=function(e,t){var i=this.getShopByType(e);if(null==i||i.length<=0)return null;for(var n=0;n<i.length;n++)if(i[n].id==t)return i[n]},n.getRmbShopVo=function(e){return this.getShopRmbConfig()[e]},n.getRmbShopVoByType=function(e,t){var i=this.getShopRmbConfig();for(var n in i)if(i.hasOwnProperty(n)){var s=i[n];if(s.type==e&&s.sub_type==t)return s}return null},n.getShowIconList=function(){var e,t;HuoDongDailyModel.getInstance().kaiFuDay<=8?(e=this.getKFShopCheapConfig(),t=HuoDongDailyModel.getInstance().kaiFuDay):(e=this.getShopCheapConfig(),t=TimeUtil.getTimeByTimeZone().getDay(),0==t&&(t=7));var i,n=[];for(var s in e)e.hasOwnProperty(s)&&(i=e[s],i.type==t&&n.push(i));return n.length>0&&n.sort(function(e,t){return e.template_id<t.template_id?-1:1}),n},n.getShopQizhenRandList=function(e){return this.getShopRmbRandConfig()[e]},n.getShopQizhenCount=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_22001),t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_22002);return e-t},n.setShopLevelData=function(e){if(null==this._shopLevelData)this._shopLevelData=e.shop_levels;else{for(var t,i,n=!1,s=0,a=0;a<e.shop_levels.length;a++)t=e.shop_levels[a],i=this.getShopLevelData(t.shop_id),null==i?(this._shopLevelData.push(t),n=!0,s=t.shop_id):(i.flag=t.flag,i.last_time=t.last_time);n&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.OPEN_LEVEL_SELL_VIEW,{id:s}))}GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MallEvtName.CCMD22700_UPDATE))},n.getShopLevelData=function(e){var t;for(var i in this._shopLevelData)if(t=this._shopLevelData[i],t.shop_id==e)return t;return null},n.checkCanRemoveShopLevelIcon=function(){for(var e,t=this.getShopLevelConfig(),i=0;i<t.length;i++)e=t[i];if(null==this._shopLevelData||this._shopLevelData.length<this.getShopLevelConfig().length)return!1;var n;if(null==this._shopLevelData)return!1;var s=0;for(var a in this._shopLevelData)n=this._shopLevelData[a],1==n.flag&&s++,0==n.flag&&n.last_time<=0&&s++;return s==this.getShopLevelConfig().length?!0:!1},t.MALL_TYPE_1=1,t.MALL_TYPE_2=2,t.MALL_TYPE_3=3,t.MALL_TYPE_4=4,t.MALL_TYPE_5=5,t.MALL_RMB_1=1,t.MALL_RMB_2=2,t.MALL_RMB_3=3,t.MALL_RMB_4=4,t.MALL_RMB_5=5,t.MALL_RMB_6=6,t}(egret.EventDispatcher);egret.registerClass(MallModel,"MallModel");var MallRmbRandVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(MallRmbRandVo,"MallRmbRandVo");var MallRmbVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(MallRmbVo,"MallRmbVo");var MallShopBasic=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(MallShopBasic,"MallShopBasic");var MallShopSMBasic=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(MallShopSMBasic,"MallShopSMBasic");var MallShopSMSXBasic=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(MallShopSMSXBasic,"MallShopSMSXBasic");var MallSmVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(MallSmVo,"MallSmVo");var MallVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(MallVo,"MallVo");var ShopCheapVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ShopCheapVo,"ShopCheapVo");var ShopLevelVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ShopLevelVo,"ShopLevelVo");var FindVo=function(){function e(){}var t=(__define,e);t.prototype;return e.MONSTER=1,e.PLAYER=2,e.POINT=3,e}();egret.registerClass(FindVo,"FindVo");var MapManager=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},n.cancelAutoPath=function(){this.isAutoFindPath=!1,this._findPath=null,this.dispatchEvent(new ParamEvent(t.CANCEL))},t.CANCEL="MapManager_CANCEL",t}(egret.EventDispatcher);egret.registerClass(MapManager,"MapManager");var MeetPlayerModel=function(e){function t(){e.call(this),this.gotoFightMeetPlayerID=0,this.meetPlayerReward=0,this.fightMPID=0,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){this.testList=new Array,this._mpPosDic=new Object},t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},n.getMeetPlayerConfig=function(e,t){var i;if(null==this._configDic){this._configDic=new Object;for(var n,s=DataManager.getInstance().getObj("data_pk_reward"),a=s.data_pk_reward,o=0;o<a.length;o++)n=a[o],i=new MeetPlayerConfigVo,i.template_id=n.template_id,i.exp=n.add_exp,i.coin=n.add_coin,i.goodsList=Tools.changeToNodeDropList(n.add_item),i.round=n.round,i.lvMin=n.min,i.lvMax=n.max,this._configDic[i.template_id]=i}var r;for(r in this._configDic)if(i=this._configDic[r],i.round==e&&i.lvMin<=t&&t<=i.lvMax)return i;return null},n.setPKInfo=function(e){this._pkInfo=e;for(var i,n,s=0;s<this._pkInfo.meet_roles.length;s++)i=this._pkInfo.meet_roles[s],n=SceneModel.getInstance().getMeetPlayerPos(),SceneModel.getInstance().saveMPUsePoint(n),this._mpPosDic[i.role_id]||(this._mpPosDic[i.role_id]=n);this.dispatchEvent(new ParamEvent(t.UPDATE_MPPK_INFO))},n.getPkInfo=function(){return this._pkInfo},n.setPKLog=function(e){this._pkLog=e,this.dispatchEvent(new ParamEvent(MeetPlayerEvtName.UPDATE_MP_RECORD))},n.getPKLog=function(){return this._pkLog},n.deletePkInfoByID=function(e){for(var i,n=this._pkInfo.meet_roles,s=-1,a=0;a<n.length;a++)if(i=n[a],i.role_id==e){s=a;break}s>=0&&n.splice(s,1),this._pkInfo.meet_roles=n,this.dispatchEvent(new ParamEvent(t.UPDATE_MPPK_INFO))},n.getMpPos=function(e){return this._mpPosDic[e]},t.UPDATE_MPPK_INFO="UPDATE_MPPK_INFO",t.ROBOT_INDEX=1e4,t}(egret.EventDispatcher);egret.registerClass(MeetPlayerModel,"MeetPlayerModel");var MeetPlayerConfigVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(MeetPlayerConfigVo,"MeetPlayerConfigVo");var MeridianModel=function(e){function t(){e.call(this),this._meridianDataList=[],this._serverData=new Object}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},n.createDataList=function(){for(var e,t,i,n=DataManager.getInstance().getObj("data_meridian"),s=n.data_meridian,a=[],o=0;o<s.length;o++)e=s[o],t=new MeridianDataVO,t.template_id=e.template_id,t.advance_lev=e.advance_lev,t.level=e.level,t.con_item=e.con_item,"0"!=t.con_item&&(i=t.con_item.match(/\d+/g),t.con_itemid=parseInt(i[0]),t.con_count=parseInt(i[1])),t.hp=e.hp,t.mp=e.mp,t.attack=e.att,t.att_def=e.att_def,t.magic_def=e.magic_def,t.crit=e.crit,t.crit_hurt=e.crit_hurt,t.crit_def=e.crit_def,t.palsy_rate=e.palsy_rate,t.palsy_def=e.palsy_def,t.hurt_up=e.hurt_up,t.hurt_def=e.hurt_def,t.hp_up=e.hp_up,a.push(t);return a},n.getMeridianDataVO=function(e,t){this._meridianDataList.length<=0&&(this._meridianDataList=this.createDataList());for(var i,n=this._meridianDataList.length,s=0;n>s;s++)if(i=this._meridianDataList[s],i.advance_lev==e&&i.level==t)return i;return null},n.updateServerData=function(e){(null==this._serverData[e.partner_id]||void 0==this._serverData[e.partner_id])&&(this._serverData[e.partner_id]=new MeridianServerVO),this._serverData[e.partner_id].star!=e.exp&&e.exp>0&&0==this._serverData[e.partner_id].isFirst&&this.dispatchEvent(new ParamEvent(MeridianEvtName.MERIDIAN_SUCCESS,{star:e.exp})),this._serverData[e.partner_id].star=e.exp,this._serverData[e.partner_id].level=e.level,1==this._serverData[e.partner_id].isFirst&&(this._serverData[e.partner_id].isFirst=!1)},n.getTotalMeridianLvl=function(){for(var e,t,i=0,n=RoleModel.getInstance().getPartnerList(),s=n.length,a=0;s>a;a++)t=n[a],e=this.getMeridianServerVO(t.parnerID),e&&(i+=e.level);return i},n.getMeridianServerVO=function(e){return this._serverData[e]},n.getMeridianCanLeveupOrActive=function(){var e,i,n=0,s=0,a=0,o=0,r=RoleModel.getInstance().getPartnerList();if(null==r||void 0==r)return!1;for(var h,l=0,d=0;d<r.length;d++)if(e=r[d],h=this.getMeridianServerVO(e.parnerID),null!=h&&(n=h.level,s=h.star,0>=n?(a=n+1,o=0):8>s?(a=n,o=s+1):(a=n+1,o=0),i=t.getInstance().getMeridianDataVO(a,o),i&&(l=GoodsListProxy.getInstance().findGoodNumber(i.con_itemid),l>=i.con_count)))return!0;return!1},n.getMeridianCanLeveupOrActiveByPartner=function(e){var i,n,s=0,a=0,o=0,r=0,h=0;return n=this.getMeridianServerVO(e.parnerID),null==n?!1:(s=n.level,a=n.star,0>=s?(o=s+1,r=0):8>a?(o=s,r=a+1):(o=s+1,r=0),i=t.getInstance().getMeridianDataVO(o,r),i&&(h=GoodsListProxy.getInstance().findGoodNumber(i.con_itemid),h>=i.con_count)?!0:!1)},t.ITEM_FAST=13050001,t.ITEM_MERIDIAN=13040001,t}(egret.EventDispatcher);egret.registerClass(MeridianModel,"MeridianModel");var MeridianDataVO=function(e){function t(){e.call(this),this.con_itemid=0,this.con_count=0}__extends(t,e);var i=(__define,t);i.prototype;return t}(PropertyVO);egret.registerClass(MeridianDataVO,"MeridianDataVO");
var MeridianServerVO=function(){function e(){this.isFirst=!0}var t=(__define,e);t.prototype;return e}();egret.registerClass(MeridianServerVO,"MeridianServerVO");var MineModel=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.getConfigMine=function(){if(!this._mineObj){this._mineObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_mine"),i=t.data_mine,n=void 0,s=0;s<i.length;s++)n=i[s],e=new MineVo,e.template_id=n.template_id,e.name=n.name,e.rate=n.rate,e.luck=n.luck,e.luck_limit=n.luck_limit,e.award_coin=n.award_coin,e.award_feats=n.award_feats,e.rob_coin=n.rob_coin,e.rob_feats=n.rob_feats,e.radio=n.radio,""!=n.add_item&&"0"!=n.add_item&&null!=n.add_item&&(e.add_item=Tools.changeToItemData(n.add_item)),e.finish_time=n.finish_time,e.rob_time=n.rob_time,e.scene_id=n.scene_id,e.player_pos=n.player_pos,e.mon_pos=n.mon_pos,this._mineObj[e.template_id]=e}return this._mineObj},n.getConfigMineCost=function(){if(!this._mineCostObj){this._mineCostObj=new Object;for(var e=DataManager.getInstance().getObj("data_mine_cost"),t=e.data_mine_cost,i=void 0,n=0;n<t.length;n++)i=t[n],this._mineCostObj[i.template_id]=Number(i.gold_num)}return this._mineCostObj},n.getVoById=function(e){return this.getConfigMine()[e]},n.getCost=function(e){return null!=this.getConfigMineCost()[e]?this.getConfigMineCost()[e]:this.getConfigMineCost()[11]},n.setList=function(e){if(null==this._list||null==e)return void(this._list=e);for(var t,i=!1,n=0;n<e.length;n++){t=e[n],i=!1;for(var s=0;s<this._list.length;s++)this._list[s].role_id==t.role_id&&(this._list[s]=t,i=!0);i||this._list.push(t)}},n.getList=function(){return this._list},t}(egret.EventDispatcher);egret.registerClass(MineModel,"MineModel");var MineVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(MineVo,"MineVo");var MsgModel=function(){function e(){}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},i.getCodeContent=function(e){if(null==this._codeConfig){this._codeConfig=new Object;var t=DataManager.getInstance().getObj("data_server_msg");if(null==t)return null;var i=t.data_server_msg;if(null==i)return null;for(var n,s=0;s<i.length;s++)n=i[s],this._codeConfig[n.template_id]=n.msg}return this._codeConfig[e]?this._codeConfig[e]:e.toString()},e}();egret.registerClass(MsgModel,"MsgModel");var NoviceGuideManager=function(e){function t(){e.call(this),this._isNovice=!1,this._curType=1e4,this.strenGuild=!0}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.showShadeTip=function(e,t,i,n){void 0===t&&(t="");var s=this;s._isNovice=!0,null==s._guideShade&&(s._guideShade=new NoviceGuideShadeTip),s._guideShade.addTip(e,t,i,n),GameContent.gameLayers.guideLayer.addChild(s._guideShade),s.removeGuide()},n.showGuide=function(e,t,i,n){void 0===n&&(n=null);var s=this;s._guideObj||(s._guideObj=new Object),null==n&&(n=GameContent.gameLayers.guideLayer);var a=s._guideObj[e];a||(a=new NoviceGuideVO),a.type=e,a.px=t,a.py=i,a.con=n,s._guideObj[e]=a,!s._isNovice&&s._curType>e&&(s._curType=e,s._effectNovice&&(s._effectNovice.dispose(),s._effectNovice=null),s._effectNovice=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("xinshou"),t,i,n,80,!0))},n.removeShadeTip=function(){var e=this;e._isNovice=!1,e._guideShade&&(e._guideShade.dispose(),e._guideShade=null),e.nextGuide()},n.removeGuide=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var i=this;i._guideObj&&i._guideObj[e]&&(i._guideObj[e]=null),i._curType=1e4,this._effectNovice&&(this._effectNovice.dispose(),this._effectNovice=null),t&&i.nextGuide()},n.nextGuide=function(){var e,t=this;for(var i in t._guideObj)t._guideObj.hasOwnProperty(i)&&t._guideObj[i]&&(null==e||t._guideObj[i].type<e.type)&&(e=t._guideObj[i]);e&&t.showGuide(e.type,e.px,e.py,e.con)},n.isNovice=function(){return this._isNovice},n.setIsNovice=function(e){this._isNovice=e},t.BOSS=1,t}(egret.EventDispatcher);egret.registerClass(NoviceGuideManager,"NoviceGuideManager");var NoviceGuideShadeTip=function(e){function t(){e.call(this),this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){null==this._darkArea&&GameContent.stage.stageWidth>0&&(this._darkArea=new CustomImage,this._darkArea.source="share_black2",this._darkArea.width=GameContent.stageWidth,this._darkArea.height=GameContent.stageHeight,this._darkArea.scale9Grid=new egret.Rectangle(6,6,38,38),this.addChild(this._darkArea)),this._btnSp=new Csprite,this.addChild(this._btnSp),this._tipsBg=new CustomImage,this._tipsBg.source="mainUI_tipsBg",this.addChild(this._tipsBg),this._tipsTxt=new CustomLabel,this._tipsTxt.textColor=16772569,this._tipsTxt.size=18,this._tipsTxt.textAlign="center",this._tipsTxt.width=175,this.addChild(this._tipsTxt)},n.addTip=function(e,t,i,n){void 0===t&&(t=""),this._guideshade=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("xinshou"),0,0,this,80,!0),this._comp=e,this._compParent=this._comp.parent,this._compX=this._comp.x,this._compY=this._comp.y,this._comp.x=i.x,this._comp.y=i.y,this._btnSp.addChild(this._comp),this._guideshade.x=n.x,this._guideshade.y=n.y,this._tipsBg.x=this._guideshade.x-30,this._tipsBg.y=this._guideshade.y-55,this._tipsTxt.text=t,this._tipsTxt.x=this._tipsBg.x+25,this._tipsTxt.y=this._tipsBg.y+25},n.dispose=function(){this._comp.parent&&this._comp.parent.removeChild(this._comp),this._comp.x=this._compX,this._comp.y=this._compY,this._compParent&&this._compParent.addChild(this._comp),this.parent&&this.parent.removeChild(this),this._guideshade&&(this._guideshade.dispose(),this._guideshade=null)},t}(Csprite);egret.registerClass(NoviceGuideShadeTip,"NoviceGuideShadeTip");var NoviceGuideType=function(){function e(){}var t=(__define,e);t.prototype;return e.GuideFigureTips=1001,e.GuideBuildStrengthenTips=1002,e.GuideRonglianTips=1003,e.AUTO_FIGHT=1004,e.CheckPointBoss=1005,e.BOSS=1,e.TASK=2,e}();egret.registerClass(NoviceGuideType,"NoviceGuideType");var NoviceGuideVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(NoviceGuideVO,"NoviceGuideVO");var NoviceCgModel=function(){function e(){this._noviceDataList=[],this._noviceDataList=this.createDataList()}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},i.createDataList=function(){for(var e,t,i,n=DataManager.getInstance().getObj("data_cg"),s=n.data_cg,a=[],o=0,r=0;r<s.length;r++)e=s[r],o=e.hook,null==this.getNoviceCgVO(o)?(t=new NoviceCgVO,t.hook=o,a.push(t),this._noviceDataList.push(t)):t=this.getNoviceCgVO(o),i=new NoviceCgNodeVO,i.template_id=e.template_id,i.head=e.head,i.talk=e.talk,i.title=e.title,i.hook=e.hook,i.cg_id=e.cg_id,t.cgList.push(i);return a},i.getNoviceCgVO=function(e){var t;for(var i in this._noviceDataList)if(t=this._noviceDataList[i],t.hook==e)return t;return null},e}();egret.registerClass(NoviceCgModel,"NoviceCgModel");var NoviceCgNodeVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(NoviceCgNodeVO,"NoviceCgNodeVO");var NoviceCgVO=function(){function e(){this.cgList=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NoviceCgVO,"NoviceCgVO");var OnlineRewardGiftVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(OnlineRewardGiftVO,"OnlineRewardGiftVO");var OnlineRewardModel=function(){function e(){this.createBase()}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},i.createBase=function(){this.actType=0,this.createOpenList(),this.createRewardList()},i.createRewardList=function(){if(!this.rewardList){this.rewardList=[];for(var e,t=DataManager.getInstance().getObj("data_online_gift"),i=t.data_online_gift,n=void 0,s=0;s<i.length;s++)n=i[s],e=new OnlineRewardGiftVO,e.template_id=n.template_id,e.type=n.type,e.online_time=n.online_time,e.awards=Tools.changeToItemData(n.awards),this.rewardList.push(e)}},i.createOpenList=function(){if(!this.openList){this.openList=[];for(var e,t=DataManager.getInstance().getObj("data_online_gift_open"),i=t.data_online_gift_open,n=void 0,s=0;s<i.length;s++)n=i[s],e=new OnlineRewardOpenVO,e.template_id=n.template_id,e.open_date=n.open_date,e.act_date=n.act_date,this.openList.push(e)}},i.getRewardsByType=function(e){for(var t=[],i=0;i<this.rewardList.length;i++)this.rewardList[i].type==e&&t.push(this.rewardList[i]);return t},i.checkOpen=function(){for(var e=!1,t=new Date(1e3*RoleModel.getInstance().serverTime),i=t.getFullYear(),n=t.getMonth()+1,s=t.getDate(),a=0;a<this.openList.length;a++){var o=this.openList[a].open_date,r=o.match(/\d+/g),h=Number(r[0]),l=Number(r[1]),d=Number(r[2]),_=Number(r[3]),c=Number(r[4]),u=Number(r[5]);i>=h&&_>=i&&n>=l&&c>=n&&s>=d&&u>=s&&(this.actType=this.openList[a].template_id,e=!0)}return e},e}();egret.registerClass(OnlineRewardModel,"OnlineRewardModel");var OnlineRewardOpenVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(OnlineRewardOpenVO,"OnlineRewardOpenVO");var OrangeSuitModel=function(e){function t(){e.call(this),this._orangeSuitDataList=[]}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},n.getDataVO=function(e,t,i,n){this._orangeSuitDataList.length<=0&&(this._orangeSuitDataList=this.createDataList());var s;for(var a in this._orangeSuitDataList)if(s=this._orangeSuitDataList[a],s.req_career==n&&s.slot==i)if(e>0){if(e==s.player_round)return s}else if(t>=s.min&&t<=s.max)return s;return null},n.getDataVOByTemplateId=function(e){this._orangeSuitDataList.length<=0&&(this._orangeSuitDataList=this.createDataList());var t;for(var i in this._orangeSuitDataList)if(t=this._orangeSuitDataList[i],t.template_id==e)return t;return null},n.getDataVOByItemId=function(e){this._orangeSuitDataList.length<=0&&(this._orangeSuitDataList=this.createDataList());var t;for(var i in this._orangeSuitDataList)if(t=this._orangeSuitDataList[i],t.item_id==e)return t;return null},n.createDataList=function(){for(var e,t,i,n=DataManager.getInstance().getObj("data_orange_suit"),s=n.data_orange_suit,a=[],o=0;o<s.length;o++)e=s[o],t=new OrangeSuitVO,t.template_id=e.template_id,t.item_id=e.item_id,t.player_round=e.player_round,t.min=e.min,t.max=e.max,t.next_id=e.next_id,t.slot=e.slot,t.req_career=e.req_career,t.con_item=e.con_item,i=t.con_item.match(/\d+/g),t.con_itemid=parseInt(i[0]),t.con_count=parseInt(i[1]),a.push(t);return a},n.getOrangesuitDebrisCanUpOrActive=function(){var e,i,n,s,a,o,r,h,l,d,_=RoleModel.getInstance().getPartnerList(),c=0,u=0,p=RoleModel.getInstance().getRoleCommon().level,g=RoleModel.getInstance().getRoleCommon().round;if(null==_||void 0==_)return!1;for(var s=0,m=0;m<_.length;m++){e=_[m];for(var v=0;v<EquipmentVO.ORANGEEQUIP_GRID.length;v++)if(d=EquipmentVO.ORANGEEQUIP_GRID[v],i=this.getDataVO(g,p,d,e.getCareer()),null!=i&&(n=this.getDataVOByTemplateId(i.next_id),o=GoodsListProxy.getInstance().getEquipInfoBySlot(e.parnerID,d,GoodsType.QUALITY_6),r=GoodsListProxy.getInstance().getEquipInfoBySlot(e.parnerID,d,GoodsType.QUALITY_7),s=GoodsListProxy.getInstance().findGoodNumber(i.con_itemid),o?(i=t.getInstance().getDataVOByItemId(o.template_id),i&&(n=this.getDataVOByTemplateId(i.next_id)),n?(l=GoodsListProxy.getInstance().getGoodsInfoByType(n.item_id),a=n.con_count-i.con_count,r&&(c=GoodsListProxy.getInstance().getEquipFightValue(r),u=GoodsListProxy.getInstance().getEquipFightValue(l,15,100))):a=0):(a=i.con_count,r&&(h=GoodsListProxy.getInstance().getGoodsInfoByType(i.item_id),c=GoodsListProxy.getInstance().getEquipFightValue(r),u=GoodsListProxy.getInstance().getEquipFightValue(h,15,100))),s>=a))if(l){if(l.req_round>0){if(r){if(l.req_round<=g&&u>c)return!0}else if(l.req_round<=g)return!0}else if(r){if(l.req_lv<=p&&u>c)return!0}else if(l.req_lv<=p)return!0}else if(r){if(u>c)return!0}else{if(0==Number(i.next_id)&&null==o)return!0;if(0!=Number(i.next_id))return!0}}return!1},n.getOrangesuitSingleDebrisCanUpOrActive=function(e){for(var i,n,s,a,o,r,h,l,d,_=0,c=0,u=RoleModel.getInstance().getRoleCommon().level,p=RoleModel.getInstance().getRoleCommon().round,s=0,g=0;g<EquipmentVO.ORANGEEQUIP_GRID.length;g++)if(d=EquipmentVO.ORANGEEQUIP_GRID[g],i=this.getDataVO(p,u,d,e.getCareer()),null!=i&&(n=this.getDataVOByTemplateId(i.next_id),o=GoodsListProxy.getInstance().getEquipInfoBySlot(e.parnerID,d,GoodsType.QUALITY_6),r=GoodsListProxy.getInstance().getEquipInfoBySlot(e.parnerID,d,GoodsType.QUALITY_7),s=GoodsListProxy.getInstance().findGoodNumber(i.con_itemid),o?(i=t.getInstance().getDataVOByItemId(o.template_id),i&&(n=this.getDataVOByTemplateId(i.next_id)),n?(l=GoodsListProxy.getInstance().getGoodsInfoByType(n.item_id),a=n.con_count-i.con_count,r&&(_=GoodsListProxy.getInstance().getEquipFightValue(r),c=GoodsListProxy.getInstance().getEquipFightValue(l,15,100))):a=0):(a=i.con_count,r&&(h=GoodsListProxy.getInstance().getGoodsInfoByType(i.item_id),_=GoodsListProxy.getInstance().getEquipFightValue(r),c=GoodsListProxy.getInstance().getEquipFightValue(h,15,100))),s>=a))if(l){if(l.req_round>0){if(r){if(l.req_round<=p&&c>_)return!0}else if(l.req_round<=p)return!0}else if(r){if(l.req_lv<=u&&c>_)return!0}else if(l.req_lv<=u)return!0}else if(r){if(c>_)return!0}else{if(0==Number(i.next_id)&&null==o)return!0;if(0!=Number(i.next_id))return!0}return!1},n.getOrangesuitSingleDebrisCanUpOrActiveBySlot=function(e,i){var n,s,a,o,r,h,l,d,_=0,c=0,u=RoleModel.getInstance().getRoleCommon().level,p=RoleModel.getInstance().getRoleCommon().round,a=0;if(n=this.getDataVO(p,u,i,e.getCareer()),null==n)return!1;if(s=this.getDataVOByTemplateId(n.next_id),r=GoodsListProxy.getInstance().getEquipInfoBySlot(e.parnerID,i,GoodsType.QUALITY_6),h=GoodsListProxy.getInstance().getEquipInfoBySlot(e.parnerID,i,GoodsType.QUALITY_7),a=GoodsListProxy.getInstance().findGoodNumber(n.con_itemid),r)if(n=t.getInstance().getDataVOByItemId(r.template_id),n&&(s=this.getDataVOByTemplateId(n.next_id)),s){if(d=GoodsListProxy.getInstance().getGoodsInfoByType(s.item_id),o=s.con_count-n.con_count,h&&(_=GoodsListProxy.getInstance().getEquipFightValue(h),c=GoodsListProxy.getInstance().getEquipFightValue(d,15,100),_>=c))return!1}else o=0;else if(o=n.con_count,h&&(l=GoodsListProxy.getInstance().getGoodsInfoByType(n.item_id),_=GoodsListProxy.getInstance().getEquipFightValue(h),c=GoodsListProxy.getInstance().getEquipFightValue(l,15,100),_>=c))return!1;if(a>=o){if(d)if(d.req_round>0){if(d.req_round>p)return!1}else{if(s&&s.player_round>0&&s.player_round>p)return!1;if(d.req_lv>u)return!1}if(0==Number(n.next_id)&&null==r)return!0;if(0!=Number(n.next_id))return!0}return!1},t}(egret.EventDispatcher);egret.registerClass(OrangeSuitModel,"OrangeSuitModel");var OrangeSuitVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(OrangeSuitVO,"OrangeSuitVO");var OrderGiftModel=function(e){function t(){e.call(this)}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},s.parseXML=function(){var e=this;if(null==e._giftDic){e._giftDic=new Object;for(var t=DataManager.getInstance().getObj("data_order_gift"),i=t.data_order_gift,n=i.length,s=0;n>s;s++){var a=i[s],o=new OrderGiftVo;o.template_id=a.template_id,o.type=a.type,o.sub_type=a.sub_type,o.open_time=a.open_time,o.close_time=a.close_time,o["switch"]=a["switch"],o.platform_limit=a.platform_limit,e._giftDic[o.template_id]=o}}},s.getVo=function(e){var t=this;return t.parseXML(),t._giftDic[e]},s.hasGot=function(e){for(var t=this,i=t.myGiftList,n=i.length,s=0;n>s;s++){var a=i[s];if(a.tem_id==e)return a.flag>0}return!1},i(s,"orderGiftList",function(){var e=this;if(null==e._orderGiftList){e.parseXML(),e._orderGiftList=new Array;var t=e._giftDic;for(var i in t){var n=t[i];e._orderGiftList.push(n.goods_id)}}return e._orderGiftList}),s.isWanBaVipGift=function(e){if(0==e)return!1;var i=this;i.parseXML();var n=i._giftDic;for(var s in n){var a=n[s];if(a.goods_id==e)return a.type==t.TYPE_3&&a.sub_type==t.SUBTYPE_2}return!1},s.getOrderGiftRewardVo=function(e){var t=this;if(null==t._orderGiftRewardDic){t._orderGiftRewardDic=new Object;for(var i=DataManager.getInstance().getObj("data_order_gift_reward"),n=i.data_order_gift_reward,s=n.length,a=0;s>a;a++){var o=n[a],r=new OrderGiftRewardVo;r.template_id=o.template_id,r.type=o.type,r.goods_id=o.goods_id,r.dis=o.dis,r.value1=o.value1,r.value2=o.value2,r.value3=o.value3,r.value4=o.value4,r.show_item=o.show_item,t._orderGiftRewardDic[r.template_id]=r}}return t._orderGiftRewardDic[e]},s.getRewardListByAid=function(e){var t=new Array,i=this;i.getOrderGiftRewardVo(0);for(var n in i._orderGiftRewardDic){var s=i._orderGiftRewardDic[n];s.type==e&&t.push(s)}return t},t.TYPE_3=3,t.SUBTYPE_2=2,t}(egret.EventDispatcher);egret.registerClass(OrderGiftModel,"OrderGiftModel");var OrderGiftRewardVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(OrderGiftRewardVo,"OrderGiftRewardVo");var OrderGiftVo=function(){function e(){}var t=__define,i=e,n=i.prototype;return t(n,"platformList",function(){var e=this;if(null==e._platformList){var t=e.platform_limit.substring(1,e.platform_limit.length-1);e._platformList=t.split(",")}return e._platformList}),t(n,"openTime",function(){var e=this;if(null==e._openTime){var t=e.open_time.match(/\d+/g),i=parseInt(t[0]),n=parseInt(t[1]),s=parseInt(t[2]);e._openTime=new Date(i,n,s,23,59,59)}return e._openTime}),t(n,"closeTime",function(){var e=this;if(null==e._closeTime){var t=e.close_time.match(/\d+/g),i=parseInt(t[0]),n=parseInt(t[1]),s=parseInt(t[2]);e._closeTime=new Date(i,n,s,23,59,59)}return e._closeTime}),e.ONCE_LIFE=1,e}();egret.registerClass(OrderGiftVo,"OrderGiftVo");var OtherModel=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.getConfigFightUp=function(){if(!this._fightUpObj){this._fightUpObj=new Object,this._fightUpArr=new Object;var e,t,i=DataManager.getInstance().getObj("data_strong"),n=i.data_strong,s=void 0;this._fightUpTypeLen=0;for(var a=0;a<n.length;a++)s=n[a],e=new TaskVo,e.template_id=s.template_id,e.name=s.word,e.type=s.type,e.event=s.event,e.need=s.function_id,""!=e.event&&"0"!=e.event?(t=e.event.split(","),e.moduleType=t[0],e.moduleIndex=parseInt(t[1])):(e.moduleType="",e.moduleIndex=0),this._fightUpObj[e.template_id]=e,this._fightUpArr[e.type]||(this._fightUpArr[e.type]=[]),this._fightUpArr[e.type].push(e),this._fightUpTypeLen<e.type&&(this._fightUpTypeLen=e.type)}return this._fightUpObj},n.getFightUpArr=function(e){return this._fightUpArr||this.getConfigFightUp(),this._fightUpArr[e]},n.getFightUpTypeLen=function(){return this._fightUpArr||this.getConfigFightUp(),this._fightUpTypeLen},t}(egret.EventDispatcher);egret.registerClass(OtherModel,"OtherModel");var PKModel=function(e){function t(){e.call(this),this._statu=0}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},i(s,"statu",function(){return this._statu},function(e){var i=this;i._statu!=e&&(i._statu=e,i.dispatchEvent(new ParamEvent(t.STATU_CHANGE)))}),t.STATU_CHANGE="pk_statu_change",t}(egret.EventDispatcher);egret.registerClass(PKModel,"PKModel");var PKSkillModel=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},n.getPKTargetConfigList=function(){var e=this;if(null==e._targetConfigList){e._targetConfigList=new Object;for(var t=DataManager.getInstance().getObj("data_pkskill_project"),i=t.data_pkskill_project,n=i.length,s=0;n>s;s++){var a=i[s],o=new PKTargetConfigVo;o.template_id=a.template_id,o.type=a.type,o.describe=a.describe,o.need=a.need,o.point=a.point,""!=a.reward&&"0"!=a.reward&&null!=a.reward&&(o.reward=Tools.changeToItemData(a.reward)),o.is_daily=a.is_daily,o.event=a.event,o.open_lv=a.open_lv,o.open_round=a.open_round,e._targetConfigList[o.template_id]=o}}return e._targetConfigList},n.getSkillConfigList=function(){var e=this;if(null==e._skillConfigList){e._skillConfigList=new Array;for(var t=DataManager.getInstance().getObj("data_pkskill"),i=t.data_pkskill,n=i.length,s=0;n>s;s++){var a=i[s],o=new PKSkillConfigVo;o.template_id=a.template_id,o.type=a.type,o.describe=a.describe,o.name=a.name,o.value1=a.value1,o.value2=a.value2,o.value3=a.value3,o.value4=a.value4,o.cd_second=a.cd_second,e._skillConfigList.push(o)}}return e._skillConfigList},n.getPKRewardList=function(){var e=this;if(null==e._pkRewardObj){e._pkRewardObj=new Object;for(var t=DataManager.getInstance().getObj("data_pkskill_reward"),i=t.data_pkskill_reward,n=i.length,s=0;n>s;s++){var a=i[s],o=new PKRewardVo;o.template_id=a.template_id,o.reward=a.reward,o.get_pkskill=a.get_pkskill,o.get_pet=a.get_pet,o.need=a.need,e._pkRewardObj[o.template_id]=o}}return e._pkRewardObj},n.getNeedBySkill=function(e){var t,i=this,n=i.getPKRewardList();for(var s in n)if(n.hasOwnProperty(s)&&(t=n[s],t.get_pkskill==e))return t.need;return 0},n.getLevelBySkill=function(e){var t,i=this,n=i.getPKRewardList();for(var s in n)if(n.hasOwnProperty(s)&&(t=n[s],t.get_pkskill==e))return t.template_id;return 0},n.isShowSkillBtnScene=function(){var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_23901),t=e.value.substring(1,e.value.length-1),i=t.split(","),n=SceneModel.getInstance().getCurrentSceneType().toString();return i.indexOf(n)>-1},n.checkRedDot=function(){var e=this;if(RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2024))return!0;if(!t.getInstance().projectData)return!1;for(var i,n,s,a=t.getInstance().projectData.target_list,o=0;o<a.length;o++){if(i=a[o],n=e.getPKTargetConfigList()[i.template_id],i.progress>=n.need)return!0;switch(s=0,n.type){case t.PROJECT_TYPE_8:s=RoleModel.getInstance().getAllPartnerFight();break;case t.PROJECT_TYPE_9:s=BuildModel.getInstance().getStrengTolLv();break;case t.PROJECT_TYPE_10:s=BuildModel.getInstance().getStoneTolLv();break;case t.PROJECT_TYPE_11:s=FigureModel.getInstance().getTotalSpecialEquipLvByType(4);break;case t.PROJECT_TYPE_12:s=WingModel.getInstance().getTotalWingLv();break;case t.PROJECT_TYPE_13:s=FigureModel.getInstance().getTotalSpecialEquipLvByType(3);break;case t.PROJECT_TYPE_14:s=MeridianModel.getInstance().getTotalMeridianLvl();break;case t.PROJECT_TYPE_43:s=FigureModel.getInstance().getShenlianTotalLevel();break;case t.PROJECT_TYPE_44:s=BuildModel.getInstance().getStarTolLv()}if(s>=n.need)return!0}return!1},n.getNeedByPetID=function(e){var t=this,i=t.getPKRewardList();for(var n in i){var s=i[n];if(s.get_pet==e)return s.need}return 0},t.PROJECT_TYPE_1=1,t.PROJECT_TYPE_2=2,t.PROJECT_TYPE_3=3,t.PROJECT_TYPE_4=4,t.PROJECT_TYPE_5=5,t.PROJECT_TYPE_6=6,t.PROJECT_TYPE_7=7,t.PROJECT_TYPE_8=8,t.PROJECT_TYPE_9=9,t.PROJECT_TYPE_10=10,t.PROJECT_TYPE_11=11,t.PROJECT_TYPE_12=12,t.PROJECT_TYPE_13=13,t.PROJECT_TYPE_14=14,t.PROJECT_TYPE_43=43,t.PROJECT_TYPE_44=44,t.PROJECT_TYPE_45=45,t}(egret.EventDispatcher);egret.registerClass(PKSkillModel,"PKSkillModel");var PKRewardVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(PKRewardVo,"PKRewardVo");var PKSkillConfigVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(PKSkillConfigVo,"PKSkillConfigVo");var PKTargetConfigVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(PKTargetConfigVo,"PKTargetConfigVo");var RankModel=function(e){function t(){e.call(this),this._rankArr=[],this._rankPkArr=[],this.createBasic(),this.createBasicPK()}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},s.createBasic=function(){for(var e,t,i=DataManager.getInstance().getObj("data_rank_worship"),n=i.data_rank_worship,s=0;s<n.length;s++)e=n[s],t=new RankVO,t.template_id=e.template_id,t.round=e.round,t.min=e.min,t.max=e.max,t.add_coin=e.add_coin,t.add_exp=e.add_exp,this._rankArr.push(t)},s.createBasicPK=function(){for(var e,t,i=DataManager.getInstance().getObj("data_rank_meet_pk"),n=i.data_rank_meet_pk,s=0;s<n.length;s++){e=n[s],t=new RankPkVO,t.template_id=e.template_id,t.min=e.min,t.max=e.max,t.add_coin=e.add_coin;var a=e.add_item.match(/\d+/g);t.item_id=Number(a[0]),t.item_num=Number(a[1]),t.title_id=e.title_id,this._rankPkArr.push(t)}},s.getMobaiVo=function(){for(var e,t=RoleModel.getInstance().getRoleCommon().round,i=RoleModel.getInstance().getRoleCommon().level,n=0;n<this._rankArr.length;n++)if(e=this._rankArr[n],t>0&&t==e.round||0==t&&i>=e.min&&i<=e.max)return e;return e},s.getPkVo=function(e){for(var t,i=0;i<this._rankPkArr.length;i++)if(t=this._rankPkArr[i],e>=t.min&&e<=t.max)return t;return t},s.setOtherRoleData=function(e){this._otherRoleData=e},s.getOtherRoleData=function(){return this._otherRoleData},s.getOtherRoleByParnerID=function(e){for(var t,i=0;i<this._otherRoleData.rank_partners.length;i++)if(t=this._otherRoleData.rank_partners[i],t.partner_id==e)return t;return null},s.getOtherStreng=function(e,t){for(var i=this.getOtherRoleByParnerID(e),n=0,s=i.forge_streng,a=0;a<s.length;a++)if(s[a].type==t){n=s[a].level;break}return n},s.getOtherSoul=function(e,t){for(var i=this.getOtherRoleByParnerID(e),n=0,s=i.forge_soul,a=0;a<s.length;a++)if(s[a].type==t){n=s[a].level;break}return n},s.getOtherStone=function(e,t){for(var i=this.getOtherRoleByParnerID(e),n=0,s=i.forge_stone,a=0;a<s.length;a++)if(s[a].type==t){n=s[a].level;break}return n},i(s,"isOtherRole",function(){return this._isOtherRole},function(e){this._isOtherRole=e}),s.getPartnerList=function(){for(var e,t,i=[],n=0;n<this._otherRoleData.rank_partners.length;n++){e=this._otherRoleData.rank_partners[n],t=new PlayerBaseVO,t.id=e.role_id,t.parnerID=e.partner_id,t.setCareer(e.career),t.setSex(e.sex),t.setSpeed(PlayerBaseVO.SPEED);var s=PropertyUtil.changeProListToVo(e.attr);t.setPropertyVo(s),t.setMaxHp(s.getValue(PropertyVO.HP)),t.setHp(s.getValue(PropertyVO.HP)),t.setMaxMp(s.getValue(PropertyVO.MP)),t.setMp(s.getValue(PropertyVO.MP)),t.setFightValue(e.power);var a=AppearanceUtil.changeAppListToVo(e.appearance);t.setAppVo(a),t.isRole=!0,i.push(t)}return i.sort(function(e,t){return e.getFightValue()>t.getFightValue()?-1:1}),i},t.RANK_TYPE_1=1,t.RANK_TYPE_2=2,t.RANK_TYPE_3=3,t.RANK_TYPE_4=4,t.RANK_TYPE_5=5,t.RANK_TYPE_6=6,t.RANK_TYPE_7=7,t.RANK_TYPE_8=8,t.RANK_TYPE_9=9,t.RANK_TYPE_10=10,t.RANK_TYPE_11=11,t.RANK_TYPE_12=12,t.RANK_TYPE_13=13,t}(egret.EventDispatcher);egret.registerClass(RankModel,"RankModel");var RankPkVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(RankPkVO,"RankPkVO");var RankVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(RankVO,"RankVO");var RedDotsModel=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},n.setRedDotsData=function(e){this._redDotsData||(this._redDotsData=new Object);for(var t,i=0;i<e.red_dots.length;i++)t=e.red_dots[i],this._redDotsData[t.cfg_id]=t.flag,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.RED_DOTS+t.cfg_id,t.flag>0))},n.isShowRedDotsDataById=function(e){return this._redDotsData&&this._redDotsData[e]?this._redDotsData[e]>0:!1},n.calMainFigureIconRedDot=function(){if(null!=RoleModel.getInstance().getRoleCommon()){var e;e=FigureModel.getInstance().getEquipsCanWear(!1)||FigureModel.getInstance().getEquipsCanWear(!0)||FigureModel.getInstance().getSpecialEquipsCanUpOrActive()||FigureModel.getInstance().checkShenlianCanUp()||WingModel.getInstance().getWingsCanLevelup()||ForgemindModel.getInstance().getForemindCanLevelupOrActive()||RoundModel.getInstance().checkSoulCanLevelup()||MeridianModel.getInstance().getMeridianCanLeveupOrActive()||DominateModel.getInstance().getDominateCanUpLevel()||DominateModel.getInstance().getDominateCanUpStar()||AwakeModel.getInstance().checkCanComposeAwakeEquip()||FashionModel.getInstance().checkFashionCanActive()?!0:!1,e!=this.main_roleIconRedDot&&(this.main_roleIconRedDot=e,this.dispatchEvent(new ParamEvent(t.MAIN_ROLE_ICON_REDDOT)))}},n.calMainBagIconRedDot=function(){var e;e=GoodsListProxy.getInstance().hasGiftGoodsInBag()||GoodsListProxy.getInstance().getRongLianGoods(2).length>0?!0:!1,e!=this.main_bagIconRedDot&&(this.main_bagIconRedDot=e,this.dispatchEvent(new ParamEvent(t.MAIN_BAG_ICON_REDDOT)))},n.calMainTreasureIconRedDot=function(){var e;e=this.isShowRedDotsDataById(t.ID_2004)||this.isShowRedDotsDataById(t.ID_2014)?!0:!1,e!=this.main_treasureIconRedDot&&(this.main_treasureIconRedDot=e,this.dispatchEvent(new ParamEvent(t.MAIN_TREASURE_ICON_REDDOT)))},n.calMainArtifactIconRedDot=function(){var e;e=AchievementModel.getInstance().checkCanGetReward()||ArtifactModel.getInstance().getShengongCanLeveUp()||ArtifactModel.getInstance().getExnobilityCanLevelup()||PKSkillModel.getInstance().checkRedDot()?!0:!1,e!=this.main_artifactIconRedDot&&(this.main_artifactIconRedDot=e,this.dispatchEvent(new ParamEvent(t.MAIN_ARTIFACT_ICON_REDDOT)))},n.calMainArtifactSingleIconRedDot=function(){var e;e=ArtifactModel.getInstance().getArtifactsCanupOrActive()?!0:!1,e!=this.main_artifactSingleIconRedDot&&(this.main_artifactSingleIconRedDot=e,this.dispatchEvent(new ParamEvent(t.MAIN_ARTIFACT_SINGLE_ICON_REDDOT)))},n.calRoleTabRedDot=function(){var e;e=FigureModel.getInstance().getEquipsCanWear()||FigureModel.getInstance().getSpecialEquipsCanUpOrActive()?!0:!1,e!=this.figure_roleTabRedDot&&(this.figure_roleTabRedDot=e,this.dispatchEvent(new ParamEvent(t.FIGURE_TAB_REDDOT,{index:0,show:this.figure_roleTabRedDot})))},n.calWingTabRedDot=function(){var e,i=RoleModel.getInstance().getRoleCommon().level;return e=(FigureModel.getInstance().getEquipsCanWear(!0)||WingModel.getInstance().getWingsCanLevelup())&&i>=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.WING).open_level?!0:!1,this.figure_wingTabRedDot=e,this.dispatchEvent(new ParamEvent(t.FIGURE_TAB_REDDOT,{index:1,show:this.figure_wingTabRedDot})),e},n.calMeridianTabRedDot=function(){var e,i=RoleModel.getInstance().getRoleCommon().level;return e=MeridianModel.getInstance().getMeridianCanLeveupOrActive()&&i>=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.MERIDIAN).open_level?!0:!1,this.figure_meridianTabRedDot=e,this.dispatchEvent(new ParamEvent(t.FIGURE_TAB_REDDOT,{index:3,show:this.figure_meridianTabRedDot})),e},n.calRoundTabRedDot=function(){var e,i=RoleModel.getInstance().getRoleCommon().level;return e=(RoundModel.getInstance().checkSoulCanLevelup()||RoundModel.getInstance().getExchangeTimes()>0&&RoleModel.getInstance().getRoleCommon().level>=81)&&i>=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.ROUND).open_level?!0:!1,this.figure_roundTabRedDot=e,this.dispatchEvent(new ParamEvent(t.FIGURE_TAB_REDDOT,{index:2,show:this.figure_roundTabRedDot})),e},n.calShenlianTabRedDot=function(){var e;RoleModel.getInstance().getRoleCommon().level;return e=FigureModel.getInstance().checkShenlianCanUp()?!0:!1,this.figure_shenlianTabRedDot=e,this.dispatchEvent(new ParamEvent(t.FIGURE_TAB_REDDOT,{index:4,show:this.figure_shenlianTabRedDot})),e},n.calOrangesuitTabRedDot=function(){var e;return e=(OrangeSuitModel.getInstance().getOrangesuitDebrisCanUpOrActive()||GoodsListProxy.getInstance().getDecompositionEquipInfoList(GoodsType.QUALITY_6).length>0)&&RoleModel.getInstance().getRoleCommon().level>=FunctionOpenModel.ORANGESUIT?!0:!1,this.orange_orangeTabRedDot=e,this.dispatchEvent(new ParamEvent(t.ORANGE_TAB_REDDOT,{index:0,show:this.orange_orangeTabRedDot})),e
},n.calDominateUpStarTabRedDot=function(){var e;return e=DominateModel.getInstance().getDominateCanUpStar()?!0:!1,this.dominate_upStarTabRedDot=e,this.dispatchEvent(new ParamEvent(t.DOMINATE_TAB_REDDOT,{index:0,show:this.dominate_upStarTabRedDot})),e},n.calDominateUpLevelTabRedDot=function(){var e;return e=DominateModel.getInstance().getDominateCanUpLevel()?!0:!1,this.dominate_upLevelTabRedDot=e,this.dispatchEvent(new ParamEvent(t.DOMINATE_TAB_REDDOT,{index:1,show:this.dominate_upLevelTabRedDot})),e},n.calLegendsuitTabRedDot=function(){var e;return e=LegendSuitModel.getInstance().getLegendsuitDebrisCanUpOrActive()&&RoleModel.getInstance().getRoleCommon().round>=FunctionOpenModel.LEGENDSUIT?!0:!1,this.orange_legendTabRedDot=e,this.dispatchEvent(new ParamEvent(t.ORANGE_TAB_REDDOT,{index:2,show:this.orange_legendTabRedDot})),e},n.calAwakeEquipTabRedDot=function(){var e;return e=FigureModel.getInstance().getEquipsCanWear(!1,!1,!0)||AwakeModel.getInstance().checkCanComposeAwakeEquip()||AwakeModel.getInstance().checkAwakeEquipSoulCanUp()?!0:!1,this.orange_awakeTabRedDot=e,this.dispatchEvent(new ParamEvent(t.ORANGE_TAB_REDDOT,{index:1,show:this.orange_awakeTabRedDot})),e},n.calAchievementTabRedDot=function(){var e;return e=AchievementModel.getInstance().checkCanGetReward()?!0:!1,this.artifact_AchievementTabRedDot=e,this.dispatchEvent(new ParamEvent(t.ARTIFACT_TAB_REDDOT,{index:3,show:this.artifact_AchievementTabRedDot})),e},n.calShengongTabRedDot=function(){var e;return e=ArtifactModel.getInstance().getShengongCanLeveUp()?!0:!1,this.artifact_shengongTabRedDot=e,this.dispatchEvent(new ParamEvent(t.ARTIFACT_TAB_REDDOT,{index:1,show:this.artifact_shengongTabRedDot})),e},n.calExnobilityTabRedDot=function(){var e;return e=ArtifactModel.getInstance().getExnobilityCanLevelup()?!0:!1,this.artifact_ExnobilityTabRedDot=e,this.dispatchEvent(new ParamEvent(t.ARTIFACT_TAB_REDDOT,{index:2,show:this.artifact_ExnobilityTabRedDot})),e},n.calRongLuTabRedDot=function(){var e,i=GoodsListProxy.getInstance().getRongLianGoods(2);return e=i.length>0?!0:!1,this.bag_rongluTabRedDot=e,this.dispatchEvent(new ParamEvent(t.BAG_TAB_REDDOT,{index:2,show:this.bag_rongluTabRedDot})),e},n.calFashionTabRedDot=function(e){var i;return i=FashionModel.getInstance().checkFashionCanActiveByType(e)?!0:!1,this.dispatchEvent(new ParamEvent(t.FASHION_TAB_REDDOT,{index:e-1,show:i})),i},t.ID_2001=2001,t.ID_2002=2002,t.ID_2003=2003,t.ID_2004=2004,t.ID_2005=2005,t.ID_2006=2006,t.ID_2007=2007,t.ID_2008=2008,t.ID_2009=2009,t.ID_2010=2010,t.ID_2011=2011,t.ID_2012=2012,t.ID_2013=2013,t.ID_2014=2014,t.ID_2015=2015,t.ID_2016=2016,t.ID_2017=2017,t.ID_2018=2018,t.ID_2020=2020,t.ID_2021=2021,t.ID_2022=2022,t.ID_2023=2023,t.ID_2024=2024,t.ID_2025=2025,t.MAIN_ROLE_ICON_REDDOT="MAIN_ROLE_ICON_REDDOT",t.MAIN_BAG_ICON_REDDOT="MAIN_BAG_ICON_REDDOT",t.MAIN_TREASURE_ICON_REDDOT="MAIN_TREASURE_ICON_REDDOT",t.MAIN_ARTIFACT_ICON_REDDOT="MAIN_ARTIFACT_ICON_REDDOT",t.MAIN_ARTIFACT_SINGLE_ICON_REDDOT="MAIN_ARTIFACT_SINGLE_ICON_REDDOT",t.FIGURE_TAB_REDDOT="FIGURE_TAB_REDDOT",t.ORANGE_TAB_REDDOT="ORANGE_TAB_REDDOT",t.ARTIFACT_TAB_REDDOT="ARTIFACT_TAB_REDDOT",t.DOMINATE_TAB_REDDOT="DOMINATE_TAB_REDDOT",t.FASHION_TAB_REDDOT="FASHION_TAB_REDDOT",t.BAG_TAB_REDDOT="BAG_TAB_REDDOT",t.TREASURE_TAB_REDDOT="TREASURE_TAB_REDDOT",t.FIGURE_HEROLIST_REDDOT="FIGURE_HEROLIST_REDDOT",t.ORANGE_HEROLIST_REDDOT="ORANGE_HEROLIST_REDDOT",t.DOMINATE_HEROLIST_REDDOT="DOMINATE_HEROLIST_REDDOT",t.FASHION_HEROLIST_REDDOT="FASHION_HEROLIST_REDDOT",t.AWAKEEQUIPSOUL_HEROLIST_REDDOT="AWAKEEQUIPSOUL_HEROLIST_REDDOT",t}(egret.EventDispatcher);egret.registerClass(RedDotsModel,"RedDotsModel");var ReliveModel=function(e){function t(){e.call(this),this.isAuto=!1,this._serverReliveTime=0}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.getReliveYuanBao=function(){if(SceneModel.getInstance().isRoundBoss())var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_14803);else if(SceneModel.getInstance().isGuildBoss())var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_19401);else if(SceneModel.getInstance().isKFBossScene())var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_20107);else if(SceneModel.getInstance().isCityWarInner())var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_15211);return e?parseInt(e.value):10},n.getReliveTime=function(){if(this._serverReliveTime>0)return this._serverReliveTime;if(SceneModel.getInstance().isRoundBoss()){var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_14802);return parseInt(e.value)}if(SceneModel.getInstance().isGuildBoss()){var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_19402);return parseInt(e.value)}if(SceneModel.getInstance().isKFBossScene())var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_20106);else if(SceneModel.getInstance().isCityWarInner())var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_15210);return e?parseInt(e.value)+1:11},n.setReliveLeftTimeByServer=function(e){this._serverReliveTime=e},t}(egret.EventDispatcher);egret.registerClass(ReliveModel,"ReliveModel");var RoleModel=function(e){function t(){e.call(this),this.serverTime=0,this._showPet=0,this._lastLev=0,this.hunZhanTargetID="",this.init()}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.init=function(){this._roleInfo=new PlayerInfoVO},s.getPartnerList=function(){return this._roleList},s.getPartnerSkillList=function(e){for(var t,i=0;i<this._roleList.length;i++)if(t=this._roleList[i],t.parnerID==e)return t.getSkillList()},s.updatePetHandler=function(){for(var e,t,i=0,n=0;n<this._roleList.length;n++)e=this._roleList[n],e.getAppVo().pet>0&&(i=e.getAppVo().pet),null!=e.getAppVo().getPetWeapon()&&(t=e.getAppVo().getPetWeapon());0>=i?this.removeMyPet():null==this._petList||this._petList.length<=0?this.addMyPet(i,t):(this._petList[0].setSkinId(i),this._petList[0].setWeapon(t)),this.dispatchEvent(new ParamEvent(EventName.PETFIGURE_CHANGE))},s.addMyPet=function(e,t){if(void 0===t&&(t=null),null==this._petList&&(this._petList=[]),null!=this._roleList){var i=this._roleList[0];if(null!=i){var n=this.changeMyPetPartnerToVo(i,e,t);n.x=i.x+2,n.y=i.y+2,this._petList.push(n),SceneModel.getInstance().addPet(n,!0)}}},s.removeMyPet=function(){if(null!=this._petList){var e=this._petList.shift();null!=e&&SceneModel.getInstance().removePet(e.uid)}},s.getPetList=function(){return this._petList},t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},s.readLoginInfo=function(e){this._roleCommon=e},s.getRoleBaseInfo=function(){return this._roleBaseInfo},s.getAliveRole=function(){var e,t,i=this._roleList,n=0;for(n=0;n<i.length;n++)if(e=i[n],e.getCareer()==this._roleCommon.career&&e.getHp()>0){t=e;break}if(null==t)for(n=0;n<i.length;n++)if(e=i[n],e.getHp()>0){t=e;break}return t},s.getRoleInfo=function(){return this._roleInfo},s.setRoleList=function(e){var i,n,s=0;if(null==this._roleList){for(this._roleList=new Array,s=0;s<e.partner_list.length;s++)i=e.partner_list[s],n=this.changeMyNodePartnerToVo(i),n.setRound(this._roleCommon.round),n.setLev(this._roleCommon.level),n.getCareer()==this._roleCommon.career&&(this._roleBaseInfo=n),this._roleList.push(n);SkillModel.getInstance().updateSkillDic()}else{var a=this._roleList.length,o=this.getAllPartnerFight();for(s=0;s<e.partner_list.length;s++){i=e.partner_list[s];var r=PlayerBaseVO.makeUid(Tools.getPageParams("platform"),i.partner_id);n=this.getPartnerInfo(r),null==n?(n=this.changeMyNodePartnerToVo(i),this._roleBaseInfo&&(n.x=this._roleBaseInfo.x+1,n.y=this._roleBaseInfo.y+1),this._roleList.push(n)):(this.updatePartner(i),this.dispatchEvent(new ParamEvent(t.UPDATE_PARTNER_INFO,{id:i.partner_id})))}SkillModel.getInstance().updateSkillDic();var h=this._roleList.length,l=this.getAllPartnerFight();h>a&&this.dispatchEvent(new ParamEvent(t.ROLE_PARTNERLIST_CHANGE,{vo:n})),l!=o&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(PlayerBaseVO.CHANGE_FIGHTVALUE))}this.updatePetHandler()},s.updatePartner=function(e){var t=PlayerBaseVO.makeUid(null,e.partner_id),i=this.getPartnerInfo(t);if(i){var n=PropertyUtil.changeProListToVo(e.attr);i.setPropertyVo(n),i.setMaxHp(n.getValue(PropertyVO.HP)),i.setHp(n.getValue(PropertyVO.HP)),i.setMaxMp(n.getValue(PropertyVO.MP)),i.setMp(n.getValue(PropertyVO.MP)),i.setSkillList(e.skill),i.setFightValue(e.power);var s=AppearanceUtil.changeAppListToVo(e.appearance);i.setAppVo(s)}},s.changeMyNodePartnerToVo=function(e){var t=new PlayerBaseVO;t.id=this._roleCommon.role_id,t.name=this._roleCommon.name,t.setLev(this._roleCommon.level),t.setRound(this._roleCommon.round),t.setGM(this._roleCommon.gm),t.setExp(this._roleCommon.exp),t.parnerID=e.partner_id,t.setCareer(e.career),t.setSex(e.sex),t.setSpeed(PlayerBaseVO.SPEED),t.guildName=this._roleCommon.guild_name,t.setBangID(this._roleCommon.guild_id);var i=PropertyUtil.changeProListToVo(e.attr);t.setPropertyVo(i),t.setMaxHp(i.getValue(PropertyVO.HP)),t.setHp(i.getValue(PropertyVO.HP)),t.setMaxMp(i.getValue(PropertyVO.MP)),t.setMp(i.getValue(PropertyVO.MP)),t.setSkillList(e.skill),t.setFightValue(e.power);var n=AppearanceUtil.changeAppListToVo(e.appearance);return t.setAppVo(n),t.isRole=!0,t.platform=this._roleCommon.platform,n.pet>0&&this.setPetFigure(n.pet),t},s.changeMyPetPartnerToVo=function(e,t,i){void 0===i&&(i=null);var n=new PetBaseVO;return n.id=this._roleCommon.role_id,n.name=this._roleCommon.name,n.setLev(this._roleCommon.level),n.petId=e.parnerID,n.setSpeed(PlayerBaseVO.SPEED),n.setSkinId(t),n.setWeapon(i),n.platform=this._roleCommon.platform,n},s.changeOtherNodePartnerToVo=function(e,t){var i=new PlayerBaseVO;i.id=t.role_id,i.name=t.name,i.setLev(t.level),i.setRound(t.round),i.parnerID=e.partner_id,i.setCareer(e.career),i.setSex(e.sex),i.setSpeed(PlayerBaseVO.SPEED);var n=PropertyUtil.changeProListToVo(e.attr);i.setPropertyVo(n),i.setMaxHp(n.getValue(PropertyVO.HP)),i.setHp(n.getValue(PropertyVO.HP)),i.setMaxMp(n.getValue(PropertyVO.MP)),i.setMp(n.getValue(PropertyVO.MP)),i.setSkillList(e.skill),i.setFightValue(e.power);var s=AppearanceUtil.changeAppListToVo(e.appearance);return i.setAppVo(s),i.isRole=!1,i},s.changeScenePartnerToVo=function(e){var t=new PlayerBaseVO;t.parnerID=e.partner_id,t.id=e.own_id,t.name=e.name,t.setCareer(e.career),t.setSex(e.sex),t.setHp(e.hp),t.setMaxHp(e.max_hp),t.setSkillList(e.skill),t.setSpeed(PlayerBaseVO.SPEED),t.setBangID(e.guild_id),t.guildName=e.guild_name;var i=AppearanceUtil.changeAppListToVo(e.appearance);return t.setAppVo(i),t.platform=e.plat_name,t},s.changeRobotPartnerToVo=function(){var e=new PlayerBaseVO;e.id=99999+PlayerBaseVO.ROBOT_COUNT,e.setRound(this._roleCommon.round),e.setExp(this._roleCommon.exp),e.parnerID=e.id,e.setCareer(Tools.randRange(1,3)),e.setSex(Tools.randRange(1,2)),e.name=Tools.randomName(e.getSex()),e.setSpeed(PlayerBaseVO.SPEED),e.setMaxHp(100),e.setHp(100),e.setMaxMp(100),e.setMp(100);var t=new NodeSkill;t.cd=400,t.level=1,t.partner_id=e.parnerID,t.skill_id=SkillModel.getInstance().getBaseSkillByCareer(e.getCareer()),e.setSkillList([t]);var i=new AppearanceVO;return e.setAppVo(i),e.isRole=!1,PlayerBaseVO.ROBOT_COUNT++,e},s.getRoleCommon=function(){return this._roleCommon},s.getExpConfig=function(e){if(null==this._expDic){this._expDic=new Object;for(var t,i,n=DataManager.getInstance().getObj("data_exp"),s=n.data_exp,a=0;a<s.length;a++)t=s[a],i=new RoleExpVo,i.level=t.template_id,i.exp=t.exp,this._expDic[i.level]=i}return this._expDic[e]},s.getExpMax=function(){var e=this._roleCommon.level,t=this.getExpConfig(e+1);if(null==t)return 0;var i=this.getExpConfig(e);return i.exp},s.setRoleLevAndExp=function(e,i){this._roleCommon.level=e,this._roleCommon.exp=i,this._lastLev!=this._roleCommon.level&&0!=this._lastLev&&(this.dispatchEvent(new ParamEvent(t.ROLE_LV_CHANGE)),e>this._lastLev&&this.dispatchEvent(new ParamEvent(t.ROLE_LV_UP))),this._lastLev=e,this.dispatchEvent(new ParamEvent(t.ROLE_LV_EXP_CHANGE))},s.roleFight=function(){for(var e,t=0,i=this._roleList,n=0;n<i.length;n++)e=i[n],t+=e.getFightValue();return t},s.getPartnerInfo=function(e){for(var t,i=0;i<this._roleList.length;i++)if(t=this._roleList[i],t.uid==e)return t;return null},s.isMyPartner=function(e){for(var t,i=0;i<this._roleList.length;i++)if(t=this._roleList[i],t.uid==e)return!0;return!1},s.parseSkinConfig=function(){if(null==this._skinObj){this._skinObj=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_config_skin"),n=i.data_config_skin,s=0;s<n.length;s++)e=n[s],t=new RoleSkinVo,t.id=e.template_id,t.type=e.type,t.skinID=e.skin_id,this._skinObj[t.id]=t}},s.getSkinVo=function(e){return this.parseSkinConfig(),this._skinObj[e]},s.getPartnerSkillInfo=function(e,t){var i=SceneModel.getInstance().getPlayer(e);if(null==i)return null;for(var n,s=i.getSkillList(),a=0;a<s.length;a++)if(n=s[a],n.skill_id==t)return n;return null},s.getPartnerIdByCareer=function(e){for(var t,i=this._roleList,n=0;n<i.length;n++)if(t=i[n],t.getCareer()==e)return t.uid;return""},s.getPartnerByCareer=function(e){for(var t,i=this._roleList,n=0;n<i.length;n++)if(t=i[n],t.getCareer()==e)return t;return null},s.setAllPartnerPos=function(e){for(var t=0;t<this._roleList.length;t++){var i=this._roleList[t];i.x=e.x+Math.ceil(t/2),i.y=e.y+Math.pow(-1,t)}},s.getMainRolePos=function(){for(var e=0;e<this._roleList.length;e++){var t=this._roleList[e];if(t.getCareer()==this._roleCommon.career)return new Point(t.x,t.y)}return null},s.changeGuildID=function(e){this._roleCommon.guild_id!=e&&(this._roleCommon.guild_id=e,this.setAllPartnerGuildID(),this.dispatchEvent(new ParamEvent(EventName.CHANGE_GUILD_ID)))},s.setAllPartnerGuildID=function(){for(var e,t=0;t<this._roleList.length;t++)e=this._roleList[t],e.setBangID(this._roleCommon.guild_id)},s.setAllPartnerGuildName=function(){for(var e,t=0;t<this._roleList.length;t++)e=this._roleList[t],e.guildName=this._roleCommon.guild_name},s.changeGuildName=function(e){this._roleCommon.guild_name!=e&&(this._roleCommon.guild_name=e,this.setAllPartnerGuildName(),this.dispatchEvent(new ParamEvent(EventName.CHANGE_GUILD_NAME)))},s.changeGuildPosition=function(e){this._roleCommon.guild_position!=e&&(this._roleCommon.guild_position=e,this.dispatchEvent(new ParamEvent(EventName.CHANGE_GUILD_POSITION)))},s.getAllMaxHP=function(){for(var e,t=0,i=this._roleList,n=0;n<i.length;n++)e=i[n],t+=e.getMaxHp();return t},s.getAllHP=function(){for(var e,t=0,i=this._roleList,n=0;n<i.length;n++)e=i[n],t+=e.getHp();return t},s.getAllMaxMP=function(){for(var e,t=0,i=this._roleList,n=0;n<i.length;n++)e=i[n],t+=e.getMaxMp();return t},s.getAllMP=function(){for(var e,t=0,i=this._roleList,n=0;n<i.length;n++)e=i[n],t+=e.getMp();return t},s.hasPet=function(e){for(var t,i=0,n=0;n<this._roleList.length;n++)if(t=this._roleList[n],t.getAppVo().pet>0&&(i=t.getAppVo().pet,i==e))return!0;return!1},s.hasPetWeapon=function(e){for(var t,i=0,n=0;n<this._roleList.length;n++)if(t=this._roleList[n],null!=t.getAppVo().getPetWeapon()&&(i=t.getAppVo().pet,i==e))return!0;return!1},s.hasChengHao=function(e,t){var i=this.getPartnerInfo(e);return null==i?!1:i.getAppVo().title==t},s.hasFashionCloth=function(e,t){var i=this.getPartnerInfo(e);return null==i?!1:i.getAppVo().clothFashion==t},s.hasFashionWeapon=function(e,t){var i=this.getPartnerInfo(e);return null==i?!1:i.getAppVo().weaponFashion==t},s.hasFashionWing=function(e,t){var i=this.getPartnerInfo(e);return null==i?!1:i.getAppVo().wingFashion==t},s.getAllPartnerFight=function(){var e=0,t=this._roleList;if(null==t)return e;for(var i=0;i<t.length;i++)e+=t[i].getFightValue();return e},s.CheckCoin=function(e){if(e>this._roleInfo.getCoin()){var t=new ParamEvent(EventName.OPEN_GETMATERIAL_WINDOW),i=[];return i.push({type:GetMaterialItem.OPEN_PK,linkStr:"<u><a href = 'event:1'>遭遇pk</a></u>"}),i.push({type:GetMaterialItem.OPEN_FUBEN_TIAOZHAN,linkStr:"<u><a href = 'event:2'>打开副本--挑战副本</a></u>"}),i.push({type:GetMaterialItem.OPEN_CHECKPOINTBOSS,linkStr:"<u><a href = 'event:2'>打开关卡boss</a></u>"}),i.push({type:GetMaterialItem.OPEN_FAST_FIGHT,linkStr:"<u><a href = 'event:2'>快速战斗</a></u>"}),0==HuoDongDailyModel.getInstance().checkOneRmbFinished()&&i.push({type:GetMaterialItem.OPEN_ONE_RMB,linkStr:"<u><a href = 'event:2'>一元购</a></u>"}),t.data={typeId:1,type:0,linkStrArr:i},void GameDispatcher.getInstance().dispatchEvent(t)}return!0},s.CheckGold=function(e){return e>this._roleInfo.getGold()?void GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.CHARGE_OPEN)):!0},s.setName=function(e){this._roleCommon&&(this._roleCommon.name=e,this.dispatchEvent(new ParamEvent(t.UPDATE_ROLE_NAME)),PhpHttpStatisticsManager.updateLoad(t.getInstance().getRoleCommon()))},s.setHead=function(e){this._roleCommon.icon=e,this.dispatchEvent(new ParamEvent(t.ROLE_HEAD_CHANGE))},s.setAllPartnerChangeTarget=function(e){var t=this._roleList;if(t){for(var i=!1,n=0;n<t.length;n++){var s=t[n];(""==s.hunZhanTargetID||""==e)&&(s.hunZhanTargetID=e,this.hunZhanTargetID=e,i=!0)}return i}return!1},s.checkHunZhanReset=function(e){var t=this._roleList,i=!1;if(t)for(var n=0;n<t.length;n++){var s=t[n];s.hunZhanTargetID==e&&(s.hunZhanTargetID="",this.hunZhanTargetID="",i=!0)}return i},s.resetAllSkill=function(){var e=this._roleList;if(e)for(var t=0;t<e.length;t++){var i=e[t],n=i.getSkillList();if(n)for(var s=0;s<n.length;s++){var a=n[s];a.cd=0}}},s.getServerDate=function(){return new Date(1e3*this.serverTime)},s.setPetFigure=function(e){e!=this._showPet&&(this._showPet=e,this.dispatchEvent(new ParamEvent(EventName.PETFIGURE_CHANGE)))},i(s,"petFigure",function(){return this._showPet}),t.ROLE_LV_EXP_CHANGE="ROLE_LV_EXP_CHANGE",t.ROLE_LV_UP="ROLE_LV_UP",t.ROLE_LV_CHANGE="ROLE_LV_CHANGE",t.ROLE_ROUND_CHANGE="ROLE_ROUND_CHANGE",t.ROLE_PARTNERLIST_CHANGE="ROLE_PARTNERLIST_CHANGE",t.UPDATE_PARTNER_INFO="UPDATE_PARTNER_INFO",t.UPDATE_ROLE_NAME="UPDATE_ROLE_NAME",t.ROLE_HEAD_CHANGE="ROLE_HEAD_CHANGE",t}(egret.EventDispatcher);egret.registerClass(RoleModel,"RoleModel");var AppearanceVO=function(){function e(){this.weapon=0,this.ring=0,this.cloth=0,this.wing=0,this.pet=0,this.weaponFashion=0,this.clothFashion=0,this.wingFashion=0,this.title=0,this.pet_weapon_10=0,this.pet_weapon_11=0,this.pet_weapon_12=0}var t=(__define,e),i=t.prototype;return i.setValue=function(t,i){switch(t){case e.WEAPON:this.weapon=i;break;case e.CLOTH:this.cloth=i;break;case e.WING:this.wing=i;break;case e.WEAPON_FASHION:this.weaponFashion=i;break;case e.CLOTH_FASHION:this.clothFashion=i;break;case e.WING_FASHION:this.wingFashion=i;break;case e.TITLE:this.title=i;break;case e.RING:this.ring=i;break;case e.PET:this.pet=i;break;case e.PET_WEAPON_10:this.pet_weapon_10=i;break;case e.PET_WEAPON_11:this.pet_weapon_11=i;break;case e.PET_WEAPON_12:this.pet_weapon_12=i}},i.clone=function(){var t=new e,i=this;return t.weapon=i.weapon,t.cloth=i.cloth,t.wing=i.wing,t.weaponFashion=i.weaponFashion,t.clothFashion=i.clothFashion,t.wingFashion=i.wingFashion,t.title=i.title,t.ring=i.ring,t.pet=i.pet,t.pet_weapon_10=i.pet_weapon_10,t.pet_weapon_11=i.pet_weapon_11,t.pet_weapon_12=i.pet_weapon_12,t},i.getPetWeapon=function(){var t=this;return t.pet_weapon_10>0?{type:e.PET_WEAPON_10,value:t.pet_weapon_10}:t.pet_weapon_11>0?{type:e.PET_WEAPON_11,value:t.pet_weapon_11}:t.pet_weapon_12>0?{type:e.PET_WEAPON_12,value:t.pet_weapon_12}:null},e.WEAPON=1,e.CLOTH=2,e.WING=3,e.WEAPON_FASHION=4,e.CLOTH_FASHION=5,e.WING_FASHION=6,e.TITLE=7,e.RING=8,e.PET=9,e.PET_WEAPON_10=10,e.PET_WEAPON_11=11,e.PET_WEAPON_12=12,e}();egret.registerClass(AppearanceVO,"AppearanceVO");var LiveThingVo=function(e){function t(){e.call(this),this.CHANGEMANUAL="CHANGEMANUAL",this._hunZhanTargetID="",this.isRealFigure=!0,this.init()}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.init=function(){},s.setName=function(e){this._name!=e&&(this._name=e,this.dispatchEvent(new egret.Event(t.CHANGENAME)))},s.getName=function(){return this._name},s.setHp=function(e){this._hp!=e&&(this._hp=e,this.dispatchEvent(new egret.Event(t.CHANGEHP)))},s.getHp=function(){return this._hp},s.setMaxHp=function(e){this._maxHp!=e&&(this._maxHp=e,this.dispatchEvent(new egret.Event(t.CHANGEMAXHP)))},s.getMaxHp=function(){return this._maxHp},s.setMp=function(e){this._mp!=e&&(this._mp=e,this.dispatchEvent(new egret.Event(t.CHANGEMP)))},s.getMp=function(){return this._mp},s.setMaxMp=function(e){this._maxMp!=e&&(this._maxMp=e,this.dispatchEvent(new egret.Event(t.CHANGEMAXMP)))},s.getMaxMp=function(){return this._maxMp},s.setLev=function(e){this._lev!=e&&(this._lev=e,this.dispatchEvent(new egret.Event(t.CHANGELEV)))},s.getLev=function(){return this._lev},s.setSpeed=function(e){this._speed!=e&&(this._speed=e,this.dispatchEvent(new egret.Event(t.CHANGESPEED)))},s.getSpeed=function(){return this._speed},s.isDead=function(){return 0==this._hp},s.isFull=function(){return this._hp==this._maxHp},s.getPropertyVo=function(){return null},i(s,"hunZhanTargetID",function(){return this._hunZhanTargetID},function(e){this._hunZhanTargetID=e}),t.CHANGEHP="changeHP",t.CHANGEMP="changeMP",t.CHANGELEV="changeLev",t.CHANGEMAXHP="changeMaxHp",t.CHANGEMAXMP="changeMaxMp",t.CHANGESPEED="changeSpeed",t.CHANGENAME="changeName",t}(egret.EventDispatcher);egret.registerClass(LiveThingVo,"LiveThingVo");var PetBaseVO=function(e){function t(){e.call(this),this.name="",this.petId=0,this.platform="",this._skinId=0,this._bodyURL="",this._weaponURL="",this.poseState=new PoseState,this.init()}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.init=function(){this.poseState=new PoseState,this.dirState=new DirState,this.dirState.setState(2)},s.getPetId=function(){return this.petId+""},i(s,"uid",function(){return this.platform+"_"+this.petId}),s.getBodyURL=function(e){void 0===e&&(e=!1),this._bodyURL=null;var t="stand";return this.poseState.getState()==PoseState.STAND?t="stand":this.poseState.getState()==PoseState.MOVE?t="run":this.poseState.getState()==PoseState.ATTACK?t="attack":this.poseState.getState()==PoseState.HITED?t="behit":this.poseState.getState()==PoseState.DEAD&&(t="dead"),this._bodyURL=UrlUtil.getPetClothURL(this._skinId)+t+this.dirState.getFrame(),this._bodyURL},s.getWeaponURL=function(e){void 0===e&&(e=!1),this._bodyURL=null;var t="stand";this.poseState.getState()==PoseState.STAND?t="stand":this.poseState.getState()==PoseState.MOVE?t="run":this.poseState.getState()==PoseState.ATTACK?t="attack":this.poseState.getState()==PoseState.HITED?t="behit":this.poseState.getState()==PoseState.DEAD&&(t="dead");var i=0;return null==this._weapon?null:(10==this._weapon.type?i=1:11==this._weapon.type?i=2:12==this._weapon.type&&(i=3),this._bodyURL=UrlUtil.getPetWeaponURL(i,this._weapon.value)+t+this.dirState.getFrame(),this._bodyURL)},s.setSkinId=function(e){this._skinId!=e&&(this._skinId=e,this.dispatchEvent(new ParamEvent(t.CHANGE_PET_CLOTH)))},s.getSkinId=function(){return this._skinId},s.setWeapon=function(e){this._weapon=e},s.getWeapon=function(){return this._weapon},t.CHANGE_PET_CLOTH="CHANGE_PET_CLOTH",t.CHANGE_PET_WEAPON="CHANGE_PET_WEAPON",t}(LiveThingVo);egret.registerClass(PetBaseVO,"PetBaseVO");var PlayerBaseVO=function(e){function t(){e.call(this),this.isRole=!1,this.ranger=2,this.useType=0,this._fightValue=0,this._career=0,this._sex=0,this._guildName="",this.init()}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.init=function(){this.poseState=new PoseState,this.dirState=new DirState,this.dirState.setState(2),this.buffDic=new Object,this._skillList=new Array},s.setBangID=function(e){this._bangID!=e&&(this._bangID=e,this.dispatchEvent(new egret.Event(t.CHANGE_GONGHUI)))},s.getBangID=function(){return this._bangID},s.getBangCareer=function(){return this._bangCareer},s.setBangCareer=function(e){e!=this._bangCareer&&(this._bangCareer=e,this.dispatchEvent(new ParamEvent(t.CHANGE_GONGHUI_POSITION)))},s.getFightValue=function(){return this._fightValue},s.setFightValue=function(e){this._fightValue!=e&&(this._fightValue=e)},s.setSinValue=function(e){this._sinValue!=e&&(this._sinValue=e,this.dispatchEvent(new ParamEvent(t.CHANGE_SIN)))},s.getSinValue=function(){return this._sinValue},s.getCareer=function(){return this._career},s.setCareer=function(e){this._career!=e&&(this._career=e,this.dispatchEvent(new egret.Event(t.CHANGE_CAREER)))},s.getSex=function(){return this._sex},s.setSex=function(e){this._sex!=e&&(this._sex=e,this.dispatchEvent(new egret.Event(t.CHANGE_SEX)))},s.getWeapon=function(){return this._appVo.weaponFashion>0?this._appVo.weaponFashion:this._appVo.weapon},s.getCloth=function(){return this._appVo.clothFashion>0?this._appVo.clothFashion:this._appVo.cloth},s.setVip=function(e){this._vip!=e&&(this._vip=e,this.dispatchEvent(new egret.Event(t.CHANGE_VIP)))},s.getVip=function(){return this._vip},s.getWeaponURL=function(e){if(void 0===e&&(e=!1),null==this._appVo||0==this._appVo.weapon)return null;this._weaponUrl=null;var t="stand";this.poseState.getState()==PoseState.STAND?t="stand":this.poseState.getState()==PoseState.MOVE?t="run":this.poseState.getState()==PoseState.ATTACK?t=this._career==Tools.ZHANSHI?"attack":"magic":this.poseState.getState()==PoseState.HITED?t="behit":this.poseState.getState()==PoseState.DEAD&&(t="dead");var i=this._appVo.weapon;return this._appVo.weaponFashion>0&&(i=this._appVo.weaponFashion),e&&(t="run"),this._weaponUrl=UrlUtil.getWeaponURL(this._sex,i)+t+this.dirState.getFrame(),this._weaponUrl},s.getRingUrl=function(){var e=this.getAppVo();return null==e||0==e.ring?null:(this._ringUrl=UrlUtil.getRingURL(e.ring),this._ringUrl)},s.getBodyURL=function(e){void 0===e&&(e=!1),this._bodyURL=null;var t="stand";this.poseState.getState()==PoseState.STAND?t="stand":this.poseState.getState()==PoseState.MOVE?t="run":this.poseState.getState()==PoseState.ATTACK?t=this._career==Tools.ZHANSHI?"attack":"magic":this.poseState.getState()==PoseState.HITED?t="behit":this.poseState.getState()==PoseState.DEAD&&(t="dead");var i=this._appVo.cloth;return this._appVo.clothFashion>0&&(i=this._appVo.clothFashion),e&&(t="run"),this._bodyURL=UrlUtil.getClothURL(this._career,this._sex,i)+t+this.dirState.getFrame(),this._bodyURL},s.getWingURL=function(e){if(void 0===e&&(e=!1),null==this._appVo||0==this._appVo.wing)return null;var t=this.getWingID();this._wingUrl=null;var i="stand";return this.poseState.getState()==PoseState.STAND?i="stand":this.poseState.getState()==PoseState.MOVE?i="run":this.poseState.getState()==PoseState.ATTACK?i=this._career==Tools.ZHANSHI?"attack":"magic":this.poseState.getState()==PoseState.HITED?i="behit":this.poseState.getState()==PoseState.DEAD&&(i="dead"),e&&(i="run"),this._wingUrl=UrlUtil.getWingURL(t)+i+this.dirState.getFrame(),this._wingUrl},s.getTypeActionUrl=function(e,t){if(null==this._appVo)return null;var i;switch(e){case"body":var n=this._appVo.cloth;this._appVo.clothFashion>0&&(n=this._appVo.clothFashion),i=UrlUtil.getClothURL(this._career,this._sex,n);break;case"wing":var s=this.getWingID();i=UrlUtil.getWingURL(s);break;case"weapon":var n=this._appVo.weapon;this._appVo.weaponFashion>0&&(n=this._appVo.weaponFashion),i=UrlUtil.getWeaponURL(this._sex,n);break;default:i=null}return i&&(i+=t+this.dirState.getFrame()),i},s.getAttackRange=function(){return this._career==Tools.FASHI||this._career==Tools.DAOSHI?192:112},s.getWingID=function(){return this._appVo.wingFashion>0?this._appVo.wingFashion:this._appVo.wing},s.setPropertyVo=function(e){PropertyUtil.checkProVoDiff(this._propertyVo,e)&&(this._propertyVo=e,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PRO_LIST_CHANGE,{id:this.parnerID})))},s.getPropertyVo=function(){return this._propertyVo},s.setExp=function(e){this._exp=e},s.getExp=function(){return this._exp},s.setRound=function(e){this._round=e},s.getRound=function(){return this._round},s.setGM=function(e){this._gm=e},s.getGM=function(){return this._gm},s.setSkillList=function(e){var t=e;this._skillList=t;for(var i=0;i<t.length;i++){var n=t[i];SkillModel.getInstance().cdSkill(this.uid,n.skill_id)}GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SKILL_INFO_CHANGE,{id:this.parnerID}))},s.getSkillList=function(){return this._skillList},s.setAppVo=function(e){if(AppearanceUtil.checkAppVoDiff(this._appVo,e)){var i,n,s,a,o,r;null!=this._appVo&&(i=this._appVo.cloth!=e.cloth||this._appVo.clothFashion!=e.clothFashion,n=this._appVo.weapon!=e.weapon||this._appVo.weaponFashion!=e.weaponFashion,s=this._appVo.wing!=e.wing||this._appVo.wingFashion!=e.wingFashion,a=this._appVo.title!=e.title,o=this._appVo.ring!=e.ring,r=this._appVo.pet_weapon_10!=e.pet_weapon_10||this._appVo.pet_weapon_11!=e.pet_weapon_11||this._appVo.pet_weapon_12!=e.pet_weapon_12),this._appVo=e,i&&(this.dispatchEvent(new ParamEvent(t.CHANGE_CLOTH)),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(t.CHANGE_CLOTH,{id:this.parnerID}))),n&&(this.dispatchEvent(new ParamEvent(t.CHANGE_WEAPON)),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(t.CHANGE_WEAPON,{id:this.parnerID}))),s&&(this.dispatchEvent(new ParamEvent(t.CHANGE_WING)),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(t.CHANGE_WING,{id:this.parnerID}))),a&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.CHANGE_TITLE,{id:this.parnerID})),o&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.CHANGE_RING,{id:this.parnerID})),r&&this.dispatchEvent(new ParamEvent(t.CHANGE_PET_WEAPON))}},s.getAppVo=function(){return this._appVo},s.clone=function(e){var i=new t;i.id=this.id+1e3,i.name=this.name,i.setLev(this.getLev()),i.setRound(this.getRound()),i.setGM(this.getGM()),i.parnerID=this.parnerID+1e3,i.setCareer(this._career),i.setSex(this._sex),i.setSpeed(200);var n=this._propertyVo.clone();i.setPropertyVo(n),i.setMaxHp(n.getValue(PropertyVO.HP)),i.setHp(n.getValue(PropertyVO.HP)),i.setMaxMp(n.getValue(PropertyVO.MP)),i.setMp(n.getValue(PropertyVO.MP)),i.setSkillList(this.getSkillList()),i.setFightValue(this._fightValue);var s=this._appVo.clone();return i.setAppVo(s),i},i(s,"guildName",function(){return this._guildName},function(e){this._guildName!=e&&(this._guildName=e,this.dispatchEvent(new ParamEvent(t.CHANGE_GONGHUI)))}),s.getHeadIcon=function(){return 1e3*this._career+this._sex},i(s,"uid",function(){return this.platform+"_"+this.parnerID}),i(s,"pid",function(){return this.platform+"_"+this.id}),t.makeUid=function(e,t){return null==e&&(e=Tools.getPageParams("platform")),(null==e||""==e)&&(e=RoleModel.getInstance().getRoleCommon().platform),e+"_"+t},t.CHANGE_HEAD="change_head",t.CHANGE_GONGHUI="change_gonghui",t.CHANGE_GONGHUI_POSITION="change_gonghui_position",t.CHANGE_VIP="changevip",t.CHANGE_ZHANGONG="changeZhanGong",t.CHANGE_WEAPON="changeWeapon",t.CHANGE_CLOTH="changeCloth",t.CHANGE_IMAGEID="changeImageId",t.CHANGE_WING="CHANGE_WING",t.CHANGE_PET_WEAPON="CHANGE_PET_WEAPON",t.CHANGE_FIGHTVALUE="CHANGE_FIGHTVALUE",t.CHANGE_SIN="change_sin",t.CHANGE_CAREER="change_career",t.CHANGE_SEX="CHANGE_SEX",t.ROBOT_COUNT=1,t.SPEED=240,t.COMMON=0,t.MEET=1,t.VIRTUAL=2,t.FIGHTER=3,t.REAL=4,t.HELP_FIGHTER=5,t}(LiveThingVo);egret.registerClass(PlayerBaseVO,"PlayerBaseVO");var PlayerInfoVO=function(e){function t(){e.call(this),this.attackSpeed=400,this._gold=0,this._coin=0,this._gx=0,this._soul=0,this._mallpoint=0,this._feat=0,this._awake=0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.setGold=function(e){this._gold!=e&&(this._gold=e,this.dispatchEvent(new egret.Event(t.CHANGEGOLD)))},n.getGold=function(){return this._gold},n.setCoin=function(e){this._coin!=e&&(this._coin=e,this.dispatchEvent(new egret.Event(t.CHANGECOIN)))},n.getCoin=function(){return this._coin},n.setGx=function(e){this._gx!=e&&(this._gx=e,this.dispatchEvent(new egret.Event(t.CHANGEGX)))},n.getGx=function(){return this._gx},n.setSoul=function(e){this._soul!=e&&(this._soul=e,this.dispatchEvent(new egret.Event(t.CHANGESOUL)))},n.getSoul=function(){return this._soul},n.setMallPoint=function(e){this._mallpoint!=e&&(this._mallpoint=e,this.dispatchEvent(new egret.Event(t.CHANGEMALLPOINT)))},n.getMallPoint=function(){return this._mallpoint},n.setFeat=function(e){this._feat!=e&&(this._feat=e,this.dispatchEvent(new egret.Event(t.CHANGEFEAT)))
},n.getFeat=function(){return this._feat},n.setAwake=function(e){this._awake!=e&&(this._awake=e,this.dispatchEvent(new egret.Event(t.CHANGAWAKE)))},n.getAwake=function(){return this._awake},t.CHANGEGOLD="CHANGEGOLD",t.CHANGECOIN="CHANGECOIN",t.CHANGEGX="CHANGEGX",t.CHANGESOUL="CHANGESOUL",t.CHANGEMALLPOINT="CHANGEMALLPOINT",t.CHANGEFEAT="CHANGEFEAT",t.CHANGAWAKE="CHANGAWAKE",t}(egret.EventDispatcher);egret.registerClass(PlayerInfoVO,"PlayerInfoVO");var RoleExpVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(RoleExpVo,"RoleExpVo");var RoleSkinVo=function(){function e(){this.id=0,this.type=0,this.skinID=0}var t=(__define,e);t.prototype;return e}();egret.registerClass(RoleSkinVo,"RoleSkinVo");var WelfareType=function(){function e(){}var t=(__define,e);t.prototype;return e.ADD_COIN=1,e.ADD_GOLD=2,e.ADD_GX=3,e.ADD_SOUL=4,e.ADD_EXP=5,e.ADD_ITEM=6,e.ADD_MALLPOINT=7,e.ADD_FEATS=8,e.ADD_RENOWN=9,e.ADD_AWAKE=10,e}();egret.registerClass(WelfareType,"WelfareType");var RoundModel=function(){function e(){this._roundList=[],this._roundSoulList=[],this._medicineSoulArr=[]}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},i.getRoundVO=function(e){this._roundList.length<=0&&(this._roundList=this.createRoundDataList());var t;for(var i in this._roundList)if(t=this._roundList[i],t.lv==e)return t;return null},i.getRoundSoulVO=function(e){this._roundSoulList.length<=0&&(this._roundSoulList=this.createRoundSoulDataList());var t;for(var i in this._roundSoulList)if(t=this._roundSoulList[i],t.lv==e)return t;return e<this._roundSoulList[0].lv?this._roundSoulList[0]:e>this._roundSoulList[this._roundSoulList.length-1].lv?this._roundSoulList[this._roundSoulList.length-1]:null},i.createRoundSoulDataList=function(){for(var e,t,i=DataManager.getInstance().getObj("data_round_soul"),n=i.data_round_soul,s=[],a=0;a<n.length;a++)e=n[a],t=new RoundSoulVO,t.lv=e.template_id,t.add_soul=e.add_soul,s.push(t);return s},i.createRoundDataList=function(){for(var t,i,n=DataManager.getInstance().getObj("data_round"),s=n.data_round,a=[],o=0;o<s.length;o++)t=s[o],i=new RoundPropertyVO,i.lv=t.template_id,i.con_soul=t.con_soul,i.hp=t.hp,i.mp=t.mp,i.attack=t.att,i.att_def=t.att_def,i.magic_def=t.magic_def,i.crit=t.crit,i.crit_hurt=t.crit_hurt,i.crit_def=t.crit_def,i.palsy_rate=t.palsy_rate,i.palsy_def=t.palsy_def,i.hurt_up=t.hurt_up,i.hurt_def=t.hurt_def,i.hp_up=t.hp_up,i.mp_grow=t.mp_grow,a.push(i);return this.getRoundMedicineData(e.ROUND_MEDICINE1),a},i.getRoundMedicineData=function(e){if(this._medicineSoulArr.length<=0){var t,i,n=[],s=SingleModel.getInstance().getSingVO(21);t=s.value.match(/\d*,\d*,\d*/g);for(var a in t)n=String(t[a]).split(","),i=new RoundMedicineVO,i.tid=Number(n[0]),i.soul=Number(n[1]),i.limit_times=Number(n[2]),this._medicineSoulArr.push(i)}for(var a in this._medicineSoulArr)if(this._medicineSoulArr[a].tid==e)return this._medicineSoulArr[a]},i.checkSoulCanLevelup=function(){var e=RoleModel.getInstance().getRoleInfo().getSoul(),t=RoleModel.getInstance().getRoleCommon(),i=t.round+1,n=this.getRoundVO(i);return n&&e>=n.con_soul?!0:!1},i.getExchangeTimes=function(){var e=DailyModel.DAILY_TYPE_1,t=0,i=this.getLvToSoulDays(),n=i-DailyModel.getInstance().getCountByTypeId(e,t);return n},i.getLvToSoulDays=function(){return Number(SingleModel.getInstance().getSingVO(20).value)},e.ROUND_MEDICINE1=13010001,e.ROUND_MEDICINE2=13010002,e}();egret.registerClass(RoundModel,"RoundModel");var RoundMedicineVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(RoundMedicineVO,"RoundMedicineVO");var RoundPropertyVO=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(PropertyVO);egret.registerClass(RoundPropertyVO,"RoundPropertyVO");var RoundSoulVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(RoundSoulVO,"RoundSoulVO");var SceneModel=function(e){function t(){e.call(this),this.isStart=!0,this.isLock=!1,this.lockFocusPos=!1,this.rolePath=[],this.isFirstScene=!0,this.lastSceneID=0,this._isAutoKillBoss=!1,this._rolePos=new Point,this._currentSmallMonID=0,this._hideOhters=!1,this.toFightBossMeet=!1,this.hasPetMonster=!1,this.rebuildScene=!1,this._realFigureNum=0,this._dropLeftNum=0,this._dropRewardSi=0,this._canFind8Scene=[2101,2001],this.init()}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.init=function(){var e=this;e._waveMonsterList=new Array,e._noviceMonsterList=new Array,e._pathDic=new Object},t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},s.getSceneMaxPlayerNum=function(){var e=this;return e.isGuildBoss()?30:e.isMainCity()?999:t.MAX_PLAYER},s.setSceneObj=function(e){this._sceneConfig=e},s.getSceneInfo=function(e){if(null==this._sceneInfoDic){this._sceneInfoDic=new Object;for(var t,i,n=DataManager.getInstance().getObj("data_scene"),s=n.data_scene,a=0;a<s.length;a++)i=s[a],t=new SceneInfoVo,t.id=i.template_id,t.sceneName=i.name,t.type=i.type,t.resID=i.mod,t.desc=i.describe,t.setNpc(i.scene_npc),t.setBorn(i.born),this._sceneInfoDic[t.id]=t}return this._sceneInfoDic[e]},s.getSceneNpcInfo=function(e){if(null==this._sceneNpcDic){this._sceneNpcDic=new Object;for(var t,i,n=DataManager.getInstance().getObj("data_npc"),s=n.data_npc,a=0;a<s.length;a++)i=s[a],t=new SceneNpcVO,t.template_id=i.template_id,t.name=i.name,t.type=i.type,t.model=i.model,t.icon=i.icon,t.funName=i["function"],this._sceneNpcDic[t.template_id]=t}return this._sceneNpcDic[e]},s.buildScene=function(e){var t=this;t.sceneInit(),t.lastSceneID=t.id,t.id=e;var i=t.getSceneInfo(e);if(t.sceneWidth=this.getSceneWH(i.type).x,t.sceneHeight=this.getSceneWH(i.type).y,t.resID=i.resID,t.area=new SceneArea(0,0,0,0),t.isCanFind8Scene(t.resID))if(void 0==t._pathDic[t.resID]){var n=UrlUtil.getScenePathFile(t.resID);RES.getResByUrl(n,t.loadScenePathComplete,t,RES.ResourceItem.TYPE_JSON)}else{var s=t._pathDic[t.resID];this._findPath=new FindPath8(s)}t.dispatchEvent(new egret.Event(EventName.SCENE_BUILD))},s.getFocusPos=function(){return this._focusPos},s.setFocusPos=function(e){return null==e?void(this._focusPos=e):void((null==this._focusPos||0!=Point.distance(this._focusPos,e))&&(this._focusPos=e.clone(),this.dispatchEvent(new ParamEvent(t.FOCUS_POS_CHANGE))))},s.findPoint=function(e){return null==this._rolePos||null==e?null:e},s.changeToPixsPoint=function(e){return null==e?null:new Point(TileUtil.changeXToPixs(e.x),TileUtil.changeYToPixs(e.y))},s.changeToTilePoint=function(e){return null==e?null:new Point(TileUtil.changeXToTile(e.x),TileUtil.changeYToTile(e.y))},s.setRolePos=function(e){return null==e?void(this._rolePos=e):void((null==this._rolePos||e.x!=this._rolePos.x||e.y!=this._rolePos.y)&&(this._rolePos=e.clone(),this.dispatchEvent(new ParamEvent(t.ROLE_POS_CHANGE)),this.setFocusPos(this.getRolePosToFocusPos())))},s.getRolePos=function(){return this._rolePos},s.getRolePosToFocusPos=function(){if(null==this._rolePos)return null;var e=GameContent.stageWidth,t=GameContent.stageHeight,i=this.sceneWidth*TileUtil.scale,n=this.sceneHeight*TileUtil.scale,s=this.area.getRight()*TileUtil.tileWidth,a=this.area.getLeft()*TileUtil.tileWidth,o=this.area.getTop()*TileUtil.tileHeight,r=this.area.getButtom()*TileUtil.tileHeight,h=new Point,l=new Point;return l.x=this._rolePos.x*TileUtil.scale,l.y=this._rolePos.y*TileUtil.scale,e>i?h.x=-(e-i>>1):l.x<(e>>1)+a?h.x=a:l.x>i-s-(e>>1)?h.x=i-e-s:h.x=l.x-(e>>1),t>n?h.y=-(t-n>>1):l.y<(t>>1)+o?h.y=o:l.y>n-(t>>1)-r?h.y=n-t-r:h.y=l.y-(t>>1),h},s.findPath=function(e,t){if(null==this._findPath)return null;var i=this._findPath.find(t,e);return null!=i&&i.reverse(),i},s.roleMove=function(e){this.rolePath=e.concat(),this.dispatchEvent(new ParamEvent(t.ROLEMOVE,this.rolePath))},s.isCanPK=function(e,t){return void 0===t&&(t=!1),!0},s.removePlayer=function(e,i){void 0===i&&(i=!0);var n=this.getPlayer(e);if(null!=n)delete this._playerDic[e],i&&this.dispatchEvent(new ParamEvent(t.REMOVEPLAYER,{id:e}));else for(var s=0;s<this._loadingList.length;s++)if(is(this._loadingList[s],"PlayerBaseVO")&&this._loadingList[s].uid==e)return void this._loadingList.splice(s,1)},s.getPlayer=function(e){return null==this._playerDic?null:void 0!=this._playerDic[e]?this._playerDic[e]:null},s.checkInScreen=function(e,t,i){if(void 0===i&&(i=100),null==this._focusPos)return!1;var n,s;return n=GameContent.stageWidth+i,s=GameContent.stageHeight+i,e-this._focusPos.x<n&&e-this._focusPos.x>0&&t-this._focusPos.y<s&&t-this._focusPos.y>0?!0:!1},s.findLine=function(e,t,i,n){void 0===t&&(t=0),void 0===i&&(i=!0),void 0===n&&(n=null),null==n&&(n=this._rolePos);var s=e;if(null==n||null==e)return null;for(var a,o,r,h=new Array,l=Point.distance(n,s),d=Math.ceil(l/TileUtil.STEP),_=0;d-t>=_;_++)a=n.x+(s.x-n.x)*(_/d),o=n.y+(s.y-n.y)*(_/d),r=new Point(a,o),h.push(r);return h},s.removeMonster=function(e,i){if(void 0===i&&(i=!1),null!=this._monsterDic){var n=this._monsterDic[e];if(null!=n){if(delete this._monsterDic[n.id],this.dispatchEvent(new ParamEvent(t.REMOVEMONSTER,{id:n.id,typeId:n.typeId,monstertype:n.monsterType})),i)return void(this._waveMonsterList=new Array);var s,a=0,o="";this.isHookSmall()&&(s=this._waveMonsterList,o=EventName.WAVE_MONSTER_END),s&&(a=s.indexOf(e),a>=0&&s.splice(a,1),0==s.length&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(o)))}}else if(null!=this._loadingList)for(var r=0;r<this._loadingList.length;r++)if(is(this._loadingList[r],"MonsterVO")&&this._loadingList[r].id==e)return void this._loadingList.splice(r,1)},s.createWaveMonster=function(){if(null!=this._sceneWaveInfo){var e=this.getWaveConfig(this._sceneWaveInfo.wave_id);(null==this._wavePosList||0==this._wavePosList.length)&&(this._wavePosList=e.monPosList.concat());var i,n,s,a=e.monsterNum,o=this._wavePosList.shift();this._sceneWaveInfo.drop_list;this._currentSmallMonID=e.monsterID;for(var r=0;a>r;r++)i=this.makeMonsterVo(this._currentSmallMonID),s=new Point(o.x+Math.floor(8*Math.random()),o.y+Math.floor(10*Math.random())),i.x=s.x,i.y=s.y,n=this.getWaveDropItem(),n&&(i.dropInfo=[n]),this._waveMonsterList.push(i.id),this.addMonster(i);this.dispatchEvent(new ParamEvent(t.CREATE_WAVE_MONSTER_FINISH))}},s.createNoviceSceneMonster=function(e){var i=this,n=TaskModel.getInstance().getTaskInfoById(e);if(null!=n){var s=n.monsterList,a=n.monsterPos;if(null!=s&&null!=a){for(var o,r=0;r<a.length;r++)o=a[r],i.createNoviceSceneMonsterByPos(o,s);this.dispatchEvent(new ParamEvent(t.CREATE_NOVICE_MONSTER_FINISH,{monsterId:s[0].id}))}}},s.createNoviceSceneMonsterByPos=function(e,t){for(var i,n,s=0;s<t.length;s++){i=t[s];for(var a=0;1>a;a++)n=this.makeMonsterVo(i.id),n.x=e.x,n.y=e.y,this._noviceMonsterList.push(n.id),this.addMonster(n)}},s.addMonster=function(e){null!=this._monsterDic&&(void 0==this._monsterDic[e.id]||null==this._monsterDic[e.id])&&(this._monsterDic[e.id]=e,this.dispatchEvent(new ParamEvent(t.ADDMONSTER,e)))},s.addPlayer=function(e,i){void 0===i&&(i=!0),this._playerDic[e.uid]||(this._playerDic[e.uid]=e,i&&this.dispatchEvent(new ParamEvent(t.ADDPLAYER,{vo:e})))},s.addPet=function(e,i){void 0===i&&(i=!0),null!=this._petDic&&void 0!=this._petDic&&(this._petDic[e.uid]||(this._petDic[e.uid]=e,i&&this.dispatchEvent(new ParamEvent(t.ADDPET,{vo:e}))))},s.removePet=function(e,i){void 0===i&&(i=!0);var n=this.getPet(e);if(null!=n)delete this._petDic[e],i&&this.dispatchEvent(new ParamEvent(t.REMOVEPET,{id:e}));else for(var s=0;s<this._loadingList.length;s++)if(is(this._loadingList[s],"PetBaseVO")&&this._loadingList[s].uid==e)return void this._loadingList.splice(s,1)},s.getPet=function(e){return null==this._petDic?null:void 0!=this._petDic[e]?this._petDic[e]:null},s.addPlayerByTimer=function(e){this._loadingList.push(e)},s.addMonsterByList=function(e,i){void 0===i&&(i=!1);for(var n,s=0;s<e.length;s++){var a=e[s],o=this.makeMonsterVo(a.template_id);o.id=a.mon_id,o.setHp(a.hp),o.setMaxHp(a.max_hp),o.job=a.career,o.sex=a.sex,n=i?new Point(a.pos_x+Math.floor(8*Math.random()),a.pox_y+Math.floor(10*Math.random())):new Point(a.pos_x,a.pox_y),this.isMineFuBen()||this.isUnKnowPalace()?(o.x=n.x+Math.ceil(3*Math.random()),o.y=n.y+Math.ceil(5*Math.random())):(o.x=n.x,o.y=n.y),a.sex>0?o.appVo=AppearanceUtil.changeAppListToVo(a.appearance):o.appVo=null,o.setName(a.name),o.guildName=a.guild_name,this.isCityWarInner()?(this._loadingList.push(o),trace(StringUtil.substitute("mon id={0} x={1} y={2}",o.id,o.x,o.y))):this.addMonster(o)}this.isBossScene()||this.isChanllengeFuBen()||this.dispatchEvent(new ParamEvent(t.CREATE_MONSTER_LIST_FINISH))},s.sceneInit=function(){var e=this;e._rolePos=null,e._focusPos=null,e._playerDic=new Object,e._monsterDic=new Object,e._petDic=new Object,e._dropItemDic=new Object,e._loadingList=new Array,e._mpPointDic=new Object,e._allPartnerInSceneDic=new Object,TimerManager.getInstance().add(20,e.loadingElementHandler,e)},s.loadingElementHandler=function(){if(this._loadingList.length>0){var e=this._loadingList.shift();is(e,"MonsterVO")?this.addMonster(e):is(e,"DropItemVo")?this.addDropItem(e):is(e,"PlayerBaseVO")&&this.addPlayer(e)}},s.getMonsterVo=function(e){return null!=this._monsterDic?this._monsterDic[e]:null},s.setSceneWave=function(e){var i=!1,n=this.getWaveConfig(e.wave_id);this._sceneWaveInfo&&this._sceneWaveInfo.wave_id!=e.wave_id&&(i=!0);var s=!1;this._sceneWaveInfo&&this._sceneWaveInfo.kill_num!=e.kill_num&&e.kill_num<=n.passNum&&(s=!0),this._sceneWaveInfo=e,this._currentWaveID=e.wave_id,this.dispatchEvent(new ParamEvent(t.UPDATE_SCENE_WAVE)),i&&this.dispatchEvent(new ParamEvent(t.SCENEWAVE_CHANGE)),s&&this.dispatchEvent(new ParamEvent(t.SCENEKILL_CHANGE))},s.getSceneWave=function(){return this._sceneWaveInfo},s.getMonsterConfig=function(e){if(null==this._monsterConfigDic){this._monsterConfigDic=new Object;for(var t,i,n=DataManager.getInstance().getObj("data_monster"),s=n.data_monster,a=0;a<s.length;a++)i=s[a],t=new MonConfigVo,t.typeID=i.template_id,t.name=i.name,t.monsterType=i.type,t.resID=i.icon,t.lev=i.level,t.hp=i.hp,t.attSpeed=i.att_spd,t.attType=i.att_type,t.moveSpeed=i.mov_spd,t.propertyVo.attack=i.att,t.propertyVo.att_def=i.att_def,t.propertyVo.magic_def=i.magic_def,t.propertyVo.crit=i.crit,t.propertyVo.crit_hurt=i.crit_hurt,t.propertyVo.crit_def=i.crit_def,t.propertyVo.palsy_rate=i.palsy_rate,t.propertyVo.palsy_def=i.palsy_def,t.propertyVo.hurt_up=i.hurt_up,t.propertyVo.hurt_def=i.hurt_def,t.propertyVo.attack=i.att,this._monsterConfigDic[t.typeID]=t}return this._monsterConfigDic[e]},s.getWaveConfig=function(e){if(null==this._sceneWaveConfigDic){this._sceneWaveConfigDic=new Object;for(var t,i,n=DataManager.getInstance().getObj("data_hook_wave"),s=n.data_hook_wave,a=0;a<s.length;a++)t=s[a],i=new SceneWaveVo,i.waveID=t.template_id,i.nextID=t.next_id,i.masterLev=t.master_level,i.masterWave=t.master_wave,i.monsterID=t.mon_id,i.monsterNum=t.mon_num,i.passNum=t.pass_num,i.bossID=t.boss_id,i.sceneID=t.common_scene_id,i.bossSceneID=t.boss_scene_id,i.copper=t.show_add_coin,i.exp=t.show_add_exp,i.setMonPosList(t.mon_pos),i.setPlayerPosList(t.player_pos),this._sceneWaveConfigDic[i.waveID]=i}return this._sceneWaveConfigDic[e]},s.getSceneWH=function(e){var t=new Point;switch(e){case SceneInfoVo.MATERIAL:case SceneInfoVo.SMALL:case SceneInfoVo.CITY_WAR:t.x=2130,t.y=2130;break;case SceneInfoVo.PERSON_BOSS:case SceneInfoVo.CHANLLENGE:case SceneInfoVo.WAVE_BOSS:case SceneInfoVo.PEOPLE_BOSS:case SceneInfoVo.ROUND_BOSS:case SceneInfoVo.GUILD_FUBEN:case SceneInfoVo.MINE:case SceneInfoVo.UNKNOW_PALACE:case SceneInfoVo.SHADOW_FUBEN:case SceneInfoVo.WZZB:case SceneInfoVo.GUILD_BOSS:case SceneInfoVo.KFBOSS_SCENE:case SceneInfoVo.BOSS_HOME:case SceneInfoVo.ELITE_BOSS:case SceneInfoVo.WILD_BOSS:case SceneInfoVo.EQUIP_FUBEN:t.x=1024,t.y=1024;break;case SceneInfoVo.MAIN_CITY:t.x=2900,t.y=2450;break;case SceneInfoVo.NOVICE_SCENE:t.x=3120,t.y=5327}return t},s.makeMonsterVo=function(e){var i=new MonsterVO,n=this.getMonsterConfig(e);return n?(i.typeId=e,i.id=t.MONSTER_ID++,i.setName(n.name),i.setMaxHp(n.hp),i.setHp(n.hp),i.setResId(n.resID),i.monsterType=n.monsterType,i.setLev(n.lev),i.setSpeed(n.moveSpeed),i.propertyVo=n.propertyVo,i.poseState.useType=i.monsterType,i):void Message.show(StringUtil.substitute("没有找到{0}的怪物配置"))},s.getSceneLevelVo=function(e){if(null==this._sceneLevelDic){this._sceneLevelDic=new Object;for(var t,i,n,s,a=DataManager.getInstance().getObj("data_hook_level"),o=a.data_hook_level,r=0;r<o.length;r++)i=o[r],t=new SceneLevelVo,t.id=i.template_id,t.name=i.name,s=i.add_item,n=s.match(/\d+/g),t.itemID=parseInt(n[0]),t.itemNum=parseInt(n[1]),this._sceneLevelDic[t.id]=t}return this._sceneLevelDic[e]},s.setCurrentSceneInfo=function(e,t){void 0===t&&(t=null);var i=this.getSceneInfo(e);null==this._sceneInfoVo||this._sceneInfoVo.resID!=i.resID?this.rebuildScene=!0:this.rebuildScene=!1,this._sceneInfoVo=i,this._sceneInfoVo.width=this.getSceneWH(this._sceneInfoVo.type).x,this._sceneInfoVo.height=this.getSceneWH(this._sceneInfoVo.type).y,null==t&&(t=new Point(this._sceneInfoVo.x,this._sceneInfoVo.y)),RoleModel.getInstance().setAllPartnerPos(t)},s.getCurrentSceneInfo=function(){return this._sceneInfoVo},s.getCurrentWaveID=function(){return this._currentWaveID},s.getWaveCoin=function(e){void 0===e&&(e=0),0==e&&(e=this._currentWaveID);var i=t.getInstance().getWaveConfig(e);return i.copper},s.getWaveExp=function(e){void 0===e&&(e=0),0==e&&(e=this._currentWaveID);var i=t.getInstance().getWaveConfig(e);return i.exp},s.checkSceneDispose=function(e){if(this._currentWaveID!=e.wave_id){var t=this.getWaveConfig(this._currentWaveID),i=this.getWaveConfig(e.wave_id);t.sceneID==i.sceneID}},s.checkCanKillWaveBoss=function(){if(null==this._sceneWaveInfo)return!1;if(KingModel.getInstance().goToPK)return!1;var e=this.getWaveConfig(this._sceneWaveInfo.wave_id);if(this._sceneWaveInfo.kill_num<e.passNum)return!1;var t=20+Tools.getGoodsNumInDropList(this._sceneWaveInfo.drop_list);return 0==GoodsListProxy.getInstance().checkBagGridResNum(t,20)&&this.isAutoKillBoss?(this.isAutoKillBoss=!1,!1):!0},s.clearElement=function(){TimerManager.getInstance().remove(20,this.loadingElementHandler,this),this._playerDic=new Object,this._monsterDic=new Object,this._dropItemDic=new Object,this._waveMonsterList=new Array,this._wavePosList=new Array,this._findPath=null,this.dispatchEvent(new ParamEvent(t.CLEAR_ELEMENT))},s.getCurrentSceneType=function(){if(101==this.id)return SceneInfoVo.WAVE_BOSS;var e=this.getSceneInfo(this.id);return null==e?SceneInfoVo.SMALL:e.type},s.addDropItem=function(e){this.dispatchEvent(new ParamEvent(t.ADD_DROP_ITEM,{data:e})),this._isAutoFly&&(this._dropLeftNum--,this._dropLeftNum<=0&&setTimeout2(function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.AUTO_FLY_GOODS))},400))},s.dispose=function(){},s.setDropList=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=!1),this._isAutoFly=i,this._isAutoFly||(this._dropLeftNum=0);var n,s,a=e.length;null==t&&(t=this.getBossPos(),t.x-=150);for(var o=0,r=5,h=0;a>h;h++)if(s=new DropItemVo,n=e[h],this.checkDropVisible(n.asset_id)){s.id=n.asset_id,s.num=n.value;var l=t.x+o%r*70,d=t.y+70*Math.floor(o/r),_=this.changeToRightPoint(new Point(l,d));s.x=_.x,s.y=_.y,3>a?this.addDropItem(s):this._loadingList.push(s),o++}},s.getBossPos=function(){var e,t,i;for(e in this._monsterDic)if(t=this._monsterDic[e],t.monsterType==MonsterVO.WAVE_BOSS){i=new Point(t.x,t.y);break}return null==i&&(i=new Point,i.x=RoleModel.getInstance().getRoleBaseInfo().x,i.y=RoleModel.getInstance().getRoleBaseInfo().y),this.changeToPixsPoint(i)},s.isHookSmall=function(){return this.getCurrentSceneType()==SceneInfoVo.SMALL},s.isHookWaveBoss=function(){return this.getCurrentSceneType()==SceneInfoVo.WAVE_BOSS},s.isPersonBoss=function(){return this.getCurrentSceneType()==SceneInfoVo.PERSON_BOSS},s.isChanllengeFuBen=function(){return this.getCurrentSceneType()==SceneInfoVo.CHANLLENGE},s.isMaterialFuBen=function(){return this.getCurrentSceneType()==SceneInfoVo.MATERIAL},s.isGuildFuben=function(){return this.getCurrentSceneType()==SceneInfoVo.GUILD_FUBEN},s.isWZZB=function(){return this.getCurrentSceneType()==SceneInfoVo.WZZB},s.isMineFuBen=function(){return this.getCurrentSceneType()==SceneInfoVo.MINE},s.isUnKnowPalace=function(){return this.getCurrentSceneType()==SceneInfoVo.UNKNOW_PALACE},s.isShadowFuben=function(){return this.getCurrentSceneType()==SceneInfoVo.SHADOW_FUBEN},s.isGuildBoss=function(){return this.getCurrentSceneType()==SceneInfoVo.GUILD_BOSS},s.isPeopleBoss=function(){return this.getCurrentSceneType()==SceneInfoVo.PEOPLE_BOSS},s.isRoundBoss=function(){return this.getCurrentSceneType()==SceneInfoVo.ROUND_BOSS},s.isNoHitListScene=function(){return this.isGuildBoss()||this.isBossHome()||this.isWildBoss()||this.isEliteBoss()||this.isPersonBoss()},s.isCityWar=function(){return this.getCurrentSceneType()==SceneInfoVo.CITY_WAR},s.getWaveDropItem=function(){for(var e=this._sceneWaveInfo.drop_list,t=e.shift();;){if(0==e.length||this.checkDropVisible(t.asset_id))break;t=e.shift()}return t&&this.checkDropVisible(t.asset_id)?t:null},s.checkDropVisible=function(e){return e==WelfareType.ADD_COIN||e==WelfareType.ADD_GOLD||e>1e3},i(s,"isAutoKillBoss",function(){return this._isAutoKillBoss},function(e){this._isAutoKillBoss!=e&&(this._isAutoKillBoss=e,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.AUTOBOSSCHANGE)))}),s.changeToRightPoint=function(e){var t=new Point;return e.x<0?t.x=60:e.x>this.sceneWidth-120?t.x=this.sceneWidth-120:t.x=e.x,e.y<0?t.y=30:e.y>this.sceneHeight-100?t.y=this.sceneHeight-100:t.y=e.y,t.x=Math.floor(t.x),t.y=Math.floor(t.y),t},s.getSceneCenter=function(){var e=TileUtil.changeXToTile(this.sceneWidth/2),t=TileUtil.changeYToTile(this.sceneHeight/2);return new Point(e,t)},s.checkSceneHasSmallMonster=function(){var e,t;for(e in this._monsterDic)if(t=this._monsterDic[e],t.monsterType==MonsterVO.SMALL&&!t.isPetMonster&&t.useType!=MonsterVO.VIRTUAL)return!0;return!1},s.getMeetPlayerPos=function(e){void 0===e&&(e=-1);var t=(new Point,this.getWaveConfig(this._sceneWaveInfo.wave_id)),i=t.playerList;if(e>-1)return i[e];for(var n,s,a=0;a<i.length;a++)if(n=i[a],!this._mpPointDic[n.x+"_"+n.y]){s=n;break}return null==s&&(s=i[0]),s},s.createVirtualMonster=function(e,t){void 0===t&&(t=0),0==t&&(t=this._currentSmallMonID);var i=this.makeMonsterVo(t);return i.useType=MonsterVO.VIRTUAL,i.x=e.x,i.y=e.y,this.addMonster(i),i},s.removeTypeMon=function(e){var t,i;for(t in this._monsterDic)i=this._monsterDic[t],i.useType==e&&this.removeMonster(i.id,!0)},s.removeTypePlayer=function(e){var t,i;for(t in this._playerDic)i=this._playerDic[t],i.useType==e&&(RoleModel.getInstance().getPartnerInfo(i.uid)&&trace(StringUtil.substitute("removeTypePlayer remove my partner id = {0}",i.parnerID)),this.removePlayer(i.uid))},s.checkMeetPlayerFinish=function(){var e,t,i=!0;for(e in this._playerDic)if(t=this._playerDic[e],t.useType==PlayerBaseVO.MEET){i=!1;break}return i},s.saveMPUsePoint=function(e){this._mpPointDic[e.x+"_"+e.y]=!0},s.clearMPUsePoint=function(e){(this._mpPointDic[e.x+"_"+e.y]=!0)&&delete this._mpPointDic[e.x+"_"+e.y]},s.getRandomSkill=function(e){var t=Math.random(),i=0;if(t>.7){var n=SkillModel.getInstance().getSkillListByJob(e,!1),s=Math.floor(n.length*Math.random())+1;s=Math.min(s,n.length-1);var a=n[s];i=101004==a.id||101009==a.id?SkillModel.getInstance().getCarrerSkill(e):a.id}else i=SkillModel.getInstance().getCarrerSkill(e);return i},i(s,"hideOhters",function(){return this._hideOhters},function(e){e!=this._hideOhters&&(this._hideOhters=e,this.dispatchEvent(new ParamEvent(t.ISHIDE_CHANGE)))}),s.isKFBossScene=function(){return this.getCurrentSceneType()==SceneInfoVo.KFBOSS_SCENE},s.isBossHome=function(){return this.getCurrentSceneType()==SceneInfoVo.BOSS_HOME},s.isEliteBoss=function(){return this.getCurrentSceneType()==SceneInfoVo.ELITE_BOSS},s.isWildBoss=function(){return this.getCurrentSceneType()==SceneInfoVo.WILD_BOSS},s.isEquipFuBen=function(){return this.getCurrentSceneType()==SceneInfoVo.EQUIP_FUBEN},s.isMainCity=function(){return this.getCurrentSceneType()==SceneInfoVo.MAIN_CITY},s.isNoviceScene=function(){return this.getCurrentSceneType()==SceneInfoVo.NOVICE_SCENE},s.isCityWarInside=function(){return this.id==SceneInfoVo.CITYWAR_INSIDE},s.isCityWarFrontPalace=function(){return this.id==SceneInfoVo.CITYWAR_FRONTPALACE},s.isCityWarPalace=function(){return this.id==SceneInfoVo.CITYWAR_PALACE},s.isCityWarInner=function(){return this.isCityWarInside()||this.isCityWarFrontPalace()||this.isCityWarPalace()},s.isCityWarOutSide=function(){return this.id==SceneInfoVo.CITYWAR_OUTSIDE},s.getMonsterVoByTypeID=function(e){var t;for(t in this._monsterDic){var i=this.getMonsterVo(t);if(i.typeId==e)return i}return null},s.getRandomPointOfRound=function(e,t){var i=new Point,n=Math.random();return i.x=e.x+(2*n-1)*t,i.y=e.y+(2*n-1)*t,i=this.changeToRightPoint(i)},s.addRole=function(e){var t=this;null==t._roleList&&(t._roleList=new Array);for(var i=0;i<t._roleList.length;i++){var n=t._roleList[i];if(n.role_id==e.role_id&&n.plat_name==e.plat_name)return}t._roleList.push(e)},s.removeRole=function(e){var t=this;if(null!=t._roleList)for(var i=0;i<t._roleList.length;i++){var n=t._roleList[i];if(PlayerBaseVO.makeUid(n.plat_name,n.role_id)==e){t._roleList.splice(i,1);break}}},i(s,"roleList",function(){return null==this._roleList&&(this._roleList=new Array),this._roleList}),s.storeSceneRes=function(){null==this._sceneResDic&&(this._sceneResDic=new Object),this._sceneResDic[this.resID]=!0},s.isSceneMapResLoaded=function(){return null==this._sceneResDic?!1:this._sceneResDic[this.resID]},s.getQuadrantPoint=function(e){var t=(this.getSceneCenter(),new Point,this.getSceneWH(this.getCurrentSceneType()),this.getMyQuadrant());this.getOppositequadrant(t);return null},s.getRandomPointInQuadrant=function(e){void 0===e&&(e=0),0==e&&(e=this.getMyQuadrant());var t=new Point,i=this.getSceneCenter();i=this.changeToPixsPoint(i);var n=this.getSceneWH(this.getCurrentSceneType()),s=n.x/2,a=n.y/2,o=0,r=0;switch(e){case 1:o=s/2,r=-a/2;break;case 2:o=-s/2,r=-a/2;break;case 3:o=-s/2,r=a/2;break;case 4:o=s/2,r=a/2}return t.x=i.x+o,t.y=i.x+r,t},s.getMyQuadrant=function(){if(null==this._focusPos)return 1;var e=this._focusPos,t=this.getSceneWH(this.getCurrentSceneType()),i=t.x/2,n=t.y/2;return e.x>=i&&e.y<=n?1:e.x>=i&&e.y>=n?4:e.x<=i&&e.y<=n?2:3},s.getOppositequadrant=function(e){return 1==e?3:2==e?4:3==e?1:4==e?2:-1},s.getCurrentWaveLeft=function(){return null==this._waveMonsterList?0:this._waveMonsterList.length},s.isBossScene=function(){return this.isPersonBoss()||this.isPeopleBoss()||this.isHookWaveBoss()||this.isRoundBoss()||this.isGuildBoss()||this.isKFBossScene()||this.isBossHome()||this.isEliteBoss()||this.isWildBoss()||this.isEquipFuBen()?!0:!1},s.getRandomPosByR=function(e,t,i,n){void 0===i&&(i=150),void 0===n&&(n=120);var s=180*Math.atan2(Math.floor(t.y)-e.y,Math.floor(t.x)-e.x)/Math.PI,a=Math.ceil(100*Math.random()),o=Math.ceil(Math.random()*n),r=(s+Math.pow(-1,a)*o)*Math.PI/180,h=new Point;return h.x=e.x+Math.cos(r)*i,h.y=e.y+Math.sin(r)*i,h=this.changeToRightPoint(h)},s.calculateBackRewardContent=function(e){var t="",i=this.getSceneWave();if(null==i)return t;var n=i.wave_id;e&&(n=1);for(var s=i.total_wave_id,a=new Object,o=0,r=0,h=0,l=n;s>=l;l++){var d=this.getOneKeyLunHuiVo(l);o+=d.add_coin,r+=d.add_gold,h+=d.add_exp;for(var _=d.goodsList,c=0;c<_.length;c++){var u=_[c];a[u.asset_id]?a[u.asset_id]=a[u.asset_id]+u.value:a[u.asset_id]=u.value}}t=StringUtil.substitute("{0}、{1}、{2}",ColorUtil.getGoodsHtmlName(WelfareType.ADD_COIN,o),ColorUtil.getGoodsHtmlName(WelfareType.ADD_GOLD,r),ColorUtil.getGoodsHtmlName(WelfareType.ADD_EXP,h));for(var p in a)t+="、"+ColorUtil.getGoodsHtmlName(parseInt(p),parseInt(a[p]));var g=i.wave_id;return e&&(g=1),t+=StringUtil.substitute("\n当前关卡：{0}	历史最高关卡：{1}",g,i.total_wave_id),t+=StringUtil.substitute("\n实际花费以回归时关卡为准")},s.getOneKeyLunHuiVo=function(e){if(null==this._oneKeyLunHuiObj){this._oneKeyLunHuiObj=new Object;for(var t=DataManager.getInstance().getObj("data_hook_auto_circle"),i=t.data_hook_auto_circle,n=0;n<i.length;n++){var s=i[n],a=new LunHuiOneKeyVo;a.template_id=s.template_id,a.add_coin=s.add_coin,a.add_gold=s.add_gold,a.goodsList=Tools.changeToNodeDropList(s.add_item),a.add_exp=s.add_exp,this._oneKeyLunHuiObj[a.template_id]=a}}return this._oneKeyLunHuiObj[e]},s.lunHuiBack=function(e){void 0===e&&(e=!1);var i="是否一键回到最高关卡？可立即获得以下奖励：",n=t.getInstance().calculateBackRewardContent(e);GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:i,content:n,func:function(){EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("jiasu"),310,570,GameContent.gameLayers.windowLayer,200),setTimeout2(function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.LUNHUI_ONEKEY))},2e3)},autoCloseView:!1,type:LunhuiModel.LUNHUIBACK}))},s.getPlayerNum=function(){var e=0;for(var t in this._playerDic)e++;return e},s.storePartner=function(e){this._allPartnerInSceneDic[e.uid]=e},s.removePartnerInHunZhan=function(e){delete this._allPartnerInSceneDic[e]},s.removePlayerInHunZhan=function(e){for(var t in this._allPartnerInSceneDic){var i=this._allPartnerInSceneDic[e];i&&i.pid==e&&delete this._allPartnerInSceneDic[t]}},s.getPartnerInScene=function(e){return this._allPartnerInSceneDic[e]},s.findPlayerIDByPartnerID=function(e){for(var t in this._allPartnerInSceneDic){var i=this._allPartnerInSceneDic[t];if(i.uid==e)return i.pid}return""},s.hasPlayerInScene=function(e){for(var t in this._allPartnerInSceneDic){var i=this._allPartnerInSceneDic[t];if(i&&i.pid==e&&this.getPlayer(i.uid))return!0}return!1},s.findPartnersByPlayerID=function(e){var t=new Array;for(var i in this._allPartnerInSceneDic){if(t.length>=3)return t;var n=this._allPartnerInSceneDic[i];n.pid==e&&t.push(n)}return t},s.getRandomPosNearPoint=function(e,t,i){void 0===t&&(t=150),void 0===i&&(i=180);var n=new Point,s=Tools.makeCustomRandom(i);return s/=Math.PI,n.x=e.x+Math.cos(s)*t,n.y=e.y+Math.sin(s)*t,n=this.changeToRightPoint(n)},s.isClientHunZhan=function(){return this.isGuildBoss()||this.isKFBossScene()||this.isBossHome()||this.isWildBoss()||this.isEliteBoss()},s.isClientPersonHunZhan=function(){return this.isBossHome()||this.isWildBoss()||this.isEliteBoss()},s.isShowBossRight=function(){return this.isGuildBoss()||this.isKFBossScene()||this.isRoundBoss()},s.findPlayerInClientHunZhan=function(){var e;for(e in this._allPartnerInSceneDic){var t=this._allPartnerInSceneDic[e];if(t.getBangID()!=RoleModel.getInstance().getRoleCommon().guild_id)return t}return null},s.addPartnersToScene=function(e,t,i){void 0===i&&(i=!1);for(var n=this.findPartnersByPlayerID(e),s=0;s<n.length;s++){var a=n[s],o=0;s>0&&(o=Math.pow(-1,s)),a.x=t.x+o,a.y=t.y+o,this.getPlayer(a.uid)?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(CityWarEvtName.SET_ENERMY_POS,{id:e,pos:new Point(a.x,a.y)})):i?this.addPlayer(a):this.addPlayerByTimer(a)}},s.isSimpleFigure=function(){return this.isGuildBoss()},s.addOneRealFigure=function(){this._realFigureNum++},s.removeOneRealFigure=function(){this._realFigureNum--},s.getCurrentRealFigureNum=function(){return this._realFigureNum},s.resetRealFigureNum=function(){this._realFigureNum=0},s.showResult=function(e,i){var n=this;e>0?(this._resultGoodsList=i,t.getInstance().setDropList(i,null,!0),this.clearRewardSi(),this._dropRewardSi=setTimeout2(function(){n.showDropReward()},1200)):GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_FR_FAIL,{dropList:[]}))},s.showDropReward=function(){if(this._resultGoodsList&&(GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_FR_SUCCESS,{list:this._resultGoodsList})),this._resultGoodsList=null),this.isHookWaveBoss()){var e=this.getCurrentWaveID();GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.REQUEST_10604,{id:e}))}},s.clearRewardSi=function(){this._dropRewardSi>0&&clearTimeout(this._dropRewardSi)},s.isClientMakeBossBloodScene=function(){return this.isPersonBoss()||this.isGuildFuben()
},s.loadScenePathComplete=function(e){if(e){var t=parseInt(e.id),i=this,n=e.mask;i._pathDic[t]=n,i._findPath=new FindPath8(n)}},s.getOther=function(){for(var e in this._playerDic){var t=this._playerDic[e];if(t&&t.id!=RoleModel.getInstance().getRoleCommon().role_id)return t}return null},s.isCanFind8Scene=function(e){void 0===e&&(e=0);var t=this;return 0==e&&(e=t.resID),t._canFind8Scene.indexOf(e)>-1},s.checkPixsXY=function(e,t){var i=TileUtil.changeXToTile(e),n=TileUtil.changeYToTile(t),s=this,a=s._pathDic[s.resID];return null==a||null==a[n]||null==a[n][i]?-1:a[n][i]},s.checkPointCanMove=function(e){if(null==e)return!1;var t=this.checkPixsXY(e.x,e.y);return 0==t},t.ADDPLAYER="ADDPLAYER",t.REMOVEPLAYER="REMOVEPLAYER",t.ROLE_POS_CHANGE="ROLEPOSCHANGE",t.FOCUS_POS_CHANGE="FOCUS_POS_CHANGE",t.ROLEMOVE="ROLEMOVE",t.ADDMONSTER="ADDMONSTER",t.REMOVEMONSTER="REMOVEMONSTER",t.REMOVEALLMONSTER="REMOVEALLMONSTER",t.ADDPET="ADDPET",t.REMOVEPET="REMOVEPET",t.UPDATE_SCENE_WAVE="UPDATE_SCENE_WAVE",t.CREATE_WAVE_MONSTER_FINISH="CREATE_WAVE_MONSTER_FINISH",t.CREATE_MATERIAL_MONSTER_FINISH="CREATE_MATERIAL_MONSTER_FINISH",t.CREATE_NOVICE_MONSTER_FINISH="CREATE_NOVICE_MONSTER_FINISH",t.CLEAR_ELEMENT="CLEAR_ELEMENT",t.ISHIDE_CHANGE="ISHIDE_CHANGE",t.ADD_DROP_ITEM="ADD_DROP_ITEM",t.CREATE_MONSTER_LIST_FINISH="CREATE_MONSTER_LIST_FINISH",t.SCENEWAVE_CHANGE="SCENEWAVE_CHANGE",t.SCENEKILL_CHANGE="SCENEKILL_CHANGE",t.MAX_PLAYER=9,t.MAX_REALFIGURE=3,t.MONSTER_ID=1,t}(egret.EventDispatcher);egret.registerClass(SceneModel,"SceneModel");var FindNode=function(){function e(){this.x=0,this.y=0,this.value=0,this.block=!1,this.open=!1,this.value_g=0,this.value_h=0,this.value_f=0,this.nodeparent=null,this.dir=0}var t=(__define,e),i=t.prototype;return i.init=function(e,t,i){var n=this;n.x=e,n.y=t,n.value=i,n.block=!1,n.open=!1,n.value_g=0,n.value_h=0,n.value_f=0,n.nodeparent=null},e.changeValue=function(t){var i=t.x+"_"+t.y;void 0==e._dic[i]&&(e._dic[i]=t)},e.clearDic=function(){e._dic=new Object},e.resetDic=function(){for(var t in e._dic){var i=e._dic[t];i&&(i.block=!1,i.open=!1,i.value_g=0,i.value_h=0,i.value_f=0,i.nodeparent=null)}},e._dic=new Object,e}();egret.registerClass(FindNode,"FindNode");var FindPath8=function(){function e(t){this._path=[],FindNode.resetDic();var i=this;i._w=t[0].length,i._h=t.length;var n,s,a,o;for(a=0;a<i._h;a++)for(void 0==e._map[a]&&(e._map[a]=new Array),o=0;o<i._w;o++){s=t[a][o],n=0==s||2==s||3==s||5==s||6==s||7==s||8==s||9==s||10==s||11==s||61==s?0:1;var r=e._map[a][o];(null==r||void 0==r)&&(r=new FindNode,r.x=o,r.y=a,e._map[a][o]=r),r.value=n}FindNode.clearDic();e._map;trace("99")}var t=__define,i=e,n=i.prototype;return t(n,"path",function(){return this._path}),n.find=function(t,i){var n=this;if(n._path=[],null==e._map[t.y])return null;if(n._starPoint=e._map[t.y][t.x],null==e._map[i.y])return null;if(n._endPoint=e._map[i.y][i.x],null==n._endPoint||1==n._endPoint.value)return null;if(null==n._starPoint||1==n._starPoint.value)return null;if(n._endPoint.x==n._starPoint.x&&n._endPoint.y==n._starPoint.y)return null;var s=!1;n.initBlock();for(var a=n._starPoint;!s;){a.block=!0,FindNode.changeValue(a);var o=[];a.y>0&&o.push(e._map[a.y-1][a.x]),a.x>0&&o.push(e._map[a.y][a.x-1]),a.x<n._w-1&&o.push(e._map[a.y][a.x+1]),a.y<n._h-1&&o.push(e._map[a.y+1][a.x]),a.y>0&&a.x>0&&(1!=e._map[a.y][a.x-1].value||1!=e._map[a.y-1][a.x].value)&&o.push(e._map[a.y-1][a.x-1]),a.y<n._h-1&&a.x>0&&(1!=e._map[a.y][a.x-1].value||1!=e._map[a.y+1][a.x].value)&&o.push(e._map[a.y+1][a.x-1]),a.y>0&&a.x<n._w-1&&(1!=e._map[a.y-1][a.x].value||1!=e._map[a.y][a.x+1].value)&&o.push(e._map[a.y-1][a.x+1]),a.y<n._h-1&&a.x<n._w-1&&(1!=e._map[a.y+1][a.x].value||1!=e._map[a.y][a.x+1].value)&&o.push(e._map[a.y+1][a.x+1]);for(var r=o.length,h=0;r>h;h++){var l=o[h];if(l==n._endPoint){l.nodeparent=a,s=!0;break}0==l.value&&(n.count(l,a),FindNode.changeValue(l))}if(!s){if(!(n._open.length>0))return[];a=n._open.splice(n.getMin(),1)[0]}}return n.drawPath(),n._path},n.initBlock=function(){FindNode.resetDic(),this._open=[],FindNode.clearDic()},n.count=function(e,t){if(!e.block){var i=t.value_g+10;i=1==this.abs(e.x-t.x)&&1==this.abs(e.y-t.y)?t.value_g+14:t.value_g+10,e.open?e.value_g>=i&&(e.value_g=i,this.ghf(e),e.nodeparent=t):(this.addToOpen(e),e.value_g=i,this.ghf(e),e.nodeparent=t)}},n.drawPath=function(){for(var e=this._endPoint;e!=this._starPoint;)this._path.unshift(new Point(e.x,e.y)),e=e.nodeparent;this._path.unshift(new Point(e.x,e.y))},n.addToOpen=function(e){this._open.push(e),e.open=!0},n.ghf=function(e){var t=this.abs(e.x-this._endPoint.x),i=this.abs(e.y-this._endPoint.y);e.value_h=10*(t+i),e.value_f=e.value_g+e.value_h},n.getMin=function(){for(var e=this._open.length,t=1e5,i=0,n=0;e>n;n++)t>this._open[n].value_f&&(t=this._open[n].value_f,i=n);return i},n.abs=function(e){return 0>e?-1*e:e},e._map=[],e}();egret.registerClass(FindPath8,"FindPath8");var DirState=function(e){function t(){e.call(this),this._scale=1,this._frame=2,this._stateStep=0,this.isLock=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.setState=function(e){this._stateList=[],this.setState0(e)},n.revert=function(){this._stateList=[2],this._state=0,this._scale=1,this._frame=2,this._stateStep=0,this._isChanged=!1},n.getState=function(){return this._state},n.setState0=function(e){if(!this.isLock)if(this._state!=e){switch(this._state=e,this._isChanged=!0,this._state){case 7:this._frame=9,this._scale=-1;break;case 4:this._frame=6,this._scale=-1;break;case 1:this._frame=3,this._scale=-1;break;default:this._frame=this._state,this._scale=1}this.dispatchEvent(new ParamEvent(t.CHANGE))}else this._isChanged=!1},n.stepState=function(){this._stateStep<this._stateList.length&&(this.setState0(this._stateList[this._stateStep]),this._stateStep++)},n.getIsChanged=function(){return this._isChanged},n.getScale=function(){return this._scale},n.getFrame=function(){return this._frame},n.getDirVector=function(){switch(this._state){case 2:return new Point(0,1);case 3:return new Point(.707,.707);case 6:return new Point(1,0);case 9:return new Point(.707,-.707);case 8:return new Point(0,-1);case 7:return new Point(-.707,-.707);case 4:return new Point(-1,0);case 1:return new Point(-.707,.707);default:return null}},t.dirList=[2,1,4,7,8,9,6,3],t.CHANGE="DirState_change",t}(egret.EventDispatcher);egret.registerClass(DirState,"DirState");var DropItemVo=function(){function e(){this.id=0,this.num=0,this.x=0,this.y=0,this.uid=0,e.INDEX++,this.uid=e.INDEX}var t=(__define,e);t.prototype;return e.INDEX=0,e}();egret.registerClass(DropItemVo,"DropItemVo");var LunHuiOneKeyVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(LunHuiOneKeyVo,"LunHuiOneKeyVo");var PoseState=function(e){function t(t){void 0===t&&(t=0),e.call(this),this.canMove=!0,this._state=-1,this.ownerID="",this._useType=t}__extends(t,e);var i=__define,n=t,s=n.prototype;return i(s,"useType",void 0,function(e){this._useType=e}),s.setState=function(e){this._isChanged=!1,0!=this.canTransite(e)&&(this._state!=e||this._useType==MonsterVO.PEOPLE_BOSS||this._useType==MonsterVO.PERSON_BOSS||this._useType==MonsterVO.WAVE_BOSS||this._useType==MonsterVO.ROUND_BOSS)&&(this._preState=this._state,this._state=e,this._isChanged=!0,this.dispatchEvent(new ParamEvent(t.CHANGE)))},s.revert=function(){this._state=0,this._isChanged=!1,this._preState=0,this.canMove=!0},s.canTransite=function(e){if(this._state==t.DEAD)return!1;if(this._state==t.MOVE){if(e==t.HITED)return!1}else if((this._state==t.ATTACK||this._state==t.HITED)&&e==t.HITED)return!1;return!0},s.getState=function(){return this._state},s.getPreState=function(){return this._preState},s.isChanged=function(){return this._isChanged},s.getLockMove=function(){return 0==this.canMove?!0:this._state==t.MOVE||this._state==t.ATTACK||this._state==t.HITED||this._state==t.MOVEBACK?!1:!0},t.STAND=0,t.MOVE=1,t.HITED=2,t.ATTACK=3,t.DEAD=4,t.MOVEBACK=5,t.CHANGE="PoseState_change",t}(egret.EventDispatcher);egret.registerClass(PoseState,"PoseState");var SceneArea=function(){function e(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this._left=e,this._top=t,this._right=i,this._buttom=n}var t=(__define,e),i=t.prototype;return i.getLeft=function(){return this._left},i.getTop=function(){return this._top},i.getRight=function(){return this._right},i.getButtom=function(){return this._buttom},e}();egret.registerClass(SceneArea,"SceneArea");var SceneInfoVo=function(){function e(){}var t=(__define,e),i=t.prototype;return i.setBorn=function(e){var t=e.match(/\d+/g);this.x=parseInt(t[0]),this.y=parseInt(t[1])},i.setNpc=function(e){if(""!=e){null==this.npcList&&(this.npcList=[]);for(var t,i=e.match(/\d+/g),n=0;n<i.length;n+=3)t=SceneModel.getInstance().getSceneNpcInfo(parseInt(i[n])),t.x=parseInt(i[n+1]),t.y=parseInt(i[n+2]),this.npcList.push(t)}},e.SMALL=1,e.WAVE_BOSS=2,e.PERSON_BOSS=3,e.PEOPLE_BOSS=4,e.ROUND_BOSS=5,e.MATERIAL=6,e.CITY_WAR=7,e.CHANLLENGE=8,e.GUILD_FUBEN=9,e.MINE=10,e.UNKNOW_PALACE=11,e.SHADOW_FUBEN=12,e.WZZB=13,e.GUILD_BOSS=14,e.KFBOSS_SCENE=15,e.BOSS_HOME=16,e.ELITE_BOSS=17,e.WILD_BOSS=18,e.EQUIP_FUBEN=19,e.MAIN_CITY=20,e.NOVICE_SCENE=21,e.CITYWAR_OUTSIDE=8001,e.CITYWAR_INSIDE=8002,e.CITYWAR_FRONTPALACE=8003,e.CITYWAR_PALACE=8004,e.NOVICE_PALACE=21001,e}();egret.registerClass(SceneInfoVo,"SceneInfoVo");var SceneLevelVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(SceneLevelVo,"SceneLevelVo");var SceneNpcVO=function(){function e(){this._bodyURL=""}var t=(__define,e),i=t.prototype;return i.getBodyURL=function(){this._bodyURL=null;var e="stand";return this._bodyURL=UrlUtil.getNpcClothURL(this.model)+e,this._bodyURL},e}();egret.registerClass(SceneNpcVO,"SceneNpcVO");var SceneWaveVo=function(){function e(){this.waveID=0,this.nextID=0,this.masterLev=0,this.masterWave=0,this.monsterID=0,this.monsterNum=0,this.passNum=0,this.bossID=0,this.sceneID=0,this.bossSceneID=0,this.exp=0,this.copper=0}var t=__define,i=e,n=i.prototype;return n.setMonPosList=function(e){null==this._monPosList&&(this._monPosList=new Array);for(var t,i,n,s=e.match(/\d+/g),a=0,o=s.length/2,r=0;o>r;r++)i=parseInt(s[a]),n=parseInt(s[a+1]),t=new Point(i,n),this._monPosList.push(t),a+=2},n.setPlayerPosList=function(e){null==this.playerList&&(this.playerList=new Array);for(var t,i,n,s=this.playerList,a=e.match(/\d+/g),o=0,r=a.length/2,h=0;r>h;h++)i=parseInt(a[o]),n=parseInt(a[o+1]),t=new Point(i,n),s.push(t),o+=2},t(n,"monPosList",function(){return this._monPosList}),e}();egret.registerClass(SceneWaveVo,"SceneWaveVo");var ShadowCostVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ShadowCostVo,"ShadowCostVo");var ShadowEquipVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ShadowEquipVo,"ShadowEquipVo");var ShadowItemVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ShadowItemVo,"ShadowItemVo");var ShadowLevelVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ShadowLevelVo,"ShadowLevelVo");var ShadowModel=function(e){function t(){e.call(this)}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},s.getConfig=function(){if(!this._lvObj){this._lvObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_shadow_adv_lv"),i=t.data_shadow_adv_lv,n=void 0,s=0;s<i.length;s++)n=i[s],e=new ShadowLevelVo,e.template_id=n.template_id,e.icon=n.icon,e.boss_id=n.boss_id,e.scene_id=n.scene_id,e.rate=n.rate,e.show_pic=n.show_pic,e.mon_pos=n.mon_pos,e.show_word=n.show_word,this._lvObj[e.template_id]=e}return this._lvObj},s.getConfigStar=function(){if(null==this._starObj){this._starObj=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_shadow_adv_star"),n=i.data_shadow_adv_star,s=0;s<n.length;s++)t=n[s],e=new ShadowStarVo,e.template_id=t.template_id,e.star=t.star,e.lv=t.lv,""!=t.con_item&&"0"!=t.con_item&&null!=t.con_item&&(e.con_item=Tools.changeToItemData(t.con_item)),e.luck_up=t.luck_up,e.luck_limit=t.luck_limit,e.hp=t.hp,e.mp=t.mp,e.att=t.att,e.att_def=t.att_def,e.magic_def=t.magic_def,e.crit=t.crit,e.crit_hurt=t.crit_hurt,e.crit_def=t.crit_def,e.palsy_rate=t.palsy_rate,e.palsy_def=t.palsy_def,e.hurt_up=t.hurt_up,e.hurt_def=t.hurt_def,e.hp_up=t.hp_up,this._starObj[e.lv]||(this._starObj[e.lv]=new Object),this._starObj[e.lv][e.star]=e}return this._starObj},s.getConfigEquip=function(){if(null==this._equipObj){this._equipObj=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_shadow_equip"),n=i.data_shadow_equip,s=0;s<n.length;s++)t=n[s],e=new ShadowEquipVo,e.template_id=t.template_id,e.name=t.name,e.type=t.type,""!=t.con_item&&"0"!=t.con_item&&null!=t.con_item&&(e.con_item=Tools.changeToItemData(t.con_item)),e.next=t.next,e.need=t.need,e.show=t.show,e.hp=t.hp,e.mp=t.mp,e.att=t.att,e.att_def=t.att_def,e.magic_def=t.magic_def,e.crit=t.crit,e.crit_hurt=t.crit_hurt,e.crit_def=t.crit_def,e.palsy_rate=t.palsy_rate,e.palsy_def=t.palsy_def,e.hurt_up=t.hurt_up,e.hurt_def=t.hurt_def,e.hp_up=t.hp_up,this._equipObj[e.template_id]=e}return this._equipObj},s.getConfigCost=function(){if(!this._costObj){this._costObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_shadow_item_cost"),i=t.data_shadow_item_cost,n=void 0,s=0;s<i.length;s++)n=i[s],e=new ShadowCostVo,e.template_id=n.template_id,e.con_coin=n.con_coin,e.con_gold=n.con_gold,this._costObj[e.template_id]=e}return this._costObj},s.getConfigItemMu=function(){if(!this._itemMuObj){this._itemMuObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_shadow_item_mu"),i=t.data_shadow_item_mu,n=void 0,s=0;s<i.length;s++)n=i[s],e=new ShadowItemVo,e.template_id=n.template_id,e.type=n.type,e["double"]=n["double"],e.weight=n.weight,this._itemMuObj[e.template_id]=e}return this._itemMuObj},s.getConfigItemNum=function(){if(!this._itemNumObj){this._itemNumObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_shadow_item_num"),i=t.data_shadow_item_num,n=void 0,s=0;s<i.length;s++)n=i[s],e=new ShadowItemVo,e.template_id=n.template_id,e.type=n.type,e.weight=n.weight,""!=n.add_item&&"0"!=n.add_item&&null!=n.add_item&&(e.add_item=Tools.changeToItemData(n.add_item)),this._itemNumObj[e.template_id]=e}return this._itemNumObj},s.getStarVo=function(e,t){return this.getConfigStar()[e]?this.getConfigStar()[e][t]:null},s.getLevelVo=function(e){return this.getConfig()[e]},s.setDataJie=function(e){this._dataJie||(this._dataJie=new Object),this._dataJie[e.partner_id]=e},s.getDataJie=function(e){return this._dataJie?this._dataJie[e]:null},s.setDataEquip=function(e){if(this._dataEquip&&this._dataEquip[e.partner_id]){for(var t,i,n=this._dataEquip[e.partner_id],s=0;s<e.shadow_eqs.length;s++){t=e.shadow_eqs[s],i=!1;for(var a=0;a<n.length;a++)t.type==n[a].type&&(n[a].level=t.level,i=!0);i||n.push(t)}this._dataEquip[e.partner_id]=n}else this._dataEquip||(this._dataEquip=new Object),this._dataEquip[e.partner_id]=e.shadow_eqs},s.getDataEquip=function(e){return this._dataEquip||(this._dataEquip=new Object),this._dataEquip[e]?this._dataEquip[e]:[]},s.getEquipVo=function(e){return this.getConfigEquip()[e]},s.getMuArr=function(e){var t,i=[];for(var n in this.getConfigItemMu())t=this.getConfigItemMu()[n],t.type==e&&i.push(t);return i},s.getNumArr=function(e){var t,i=[];for(var n in this.getConfigItemNum())t=this.getConfigItemNum()[n],t.type==e&&i.push(t);return i},s.getZhuanCost=function(e){this.getConfigCost()[e];return this.getConfigCost()[e]},s.isJieUpgrade=function(e){var i=this.getDataJie(e.parnerID);if(null==i)return!1;if(0==i.adv_lv)return!0;if(10==i.star)return!1;var n=t.getInstance().getStarVo(i.adv_lv,i.star);if(n.con_item&&n.con_item.length>0){var s=GoodsListProxy.getInstance().findGoodNumber(n.con_item[0].info.template_id),a=n.con_item[0].num;if(s>=a)return!0}return!1},i(s,"isJieUpgradeAll",function(){var e=RoleModel.getInstance().getPartnerList();if(e)for(var t,i=0;i<e.length;i++)if(t=e[i],this.isJieUpgrade(t))return!0;return!1}),s.isEquipUpgrade=function(e){for(var i,n,s=this.getDataEquip(e.parnerID),a=0,o=1;5>o;o++){a=1e3*o;for(var r=0;r<s.length;r++)n=s[r],n.type==o&&(a=1e3*o+n.level);if(i=t.getInstance().getEquipVo(a+1),i&&i.con_item&&i.con_item.length>0){var h=GoodsListProxy.getInstance().findGoodNumber(i.con_item[0].info.template_id),l=i.con_item[0].num;if(h>=l)return!0}}return!1},i(s,"isEquipUpgradeAll",function(){var e=RoleModel.getInstance().getPartnerList();if(e)for(var t,i=0;i<e.length;i++)if(t=e[i],this.isEquipUpgrade(t))return!0;return!1}),s.setDataLv=function(e){this._dataLv||(this._dataLv=new Object),this._dataLv[e.partner_id]=e},s.getDataLv=function(e){return this._dataLv?this._dataLv[e]:null},s.isLvUpgrade=function(e){var t=this.getDataLv(e.parnerID);if(null==t)return!1;if(0==t.num)return!1;var i=Math.ceil((t.level+1)/10)*Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18006).value);return RoleModel.getInstance().CheckCoin(i)},i(s,"isLvUpgradeAll",function(){var e=RoleModel.getInstance().getPartnerList();if(e)for(var t,i=0;i<e.length;i++)if(t=e[i],this.isLvUpgrade(t))return!0;return!1}),t}(egret.EventDispatcher);egret.registerClass(ShadowModel,"ShadowModel");var ShadowStarVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ShadowStarVo,"ShadowStarVo");var ShareModel=function(e){function t(){e.call(this),this.share_award=0,this.share_num=0,this.last_time=0,this.isShowShare=0,this.showRedDot=!1,this._shareGoodsList=[15120002,16010348,11030001],this.shareOrderID=0}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},n.isSHowRedDot=function(){var e=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_15102).value);e<=this.share_num?(this.showRedDot=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ShareEvtName.SHARE_REDDOT,{show:!1}))):this.last_time>0?(TimerManager.getInstance().add(1e3,this.timeComplete,this),1==this.share_award?(this.showRedDot=!0,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ShareEvtName.SHARE_REDDOT,{show:!0}))):(this.showRedDot=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ShareEvtName.SHARE_REDDOT,{show:!1})))):(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.showRedDot=!0,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ShareEvtName.SHARE_REDDOT,{show:!0})))},n.timeComplete=function(){this.last_time--,this.last_time<=0&&(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.showRedDot=!0,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ShareEvtName.SHARE_REDDOT,{show:!0})))},n.isShareGoods=function(e){return this._shareGoodsList.indexOf(e)>=0},n.getShareReward=function(e){var t=this;return null==t._shareGoodsDic&&(t._shareGoodsDic=new Object,t._shareGoodsDic[11030001]=33001,t._shareGoodsDic[16010348]=33002,t._shareGoodsDic[15120002]=33003),t._shareGoodsDic[e]},t}(egret.EventDispatcher);egret.registerClass(ShareModel,"ShareModel");var ShopModel=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.getConfig=function(){if(!this._shopObj){this._shopObj=new Object;for(var e,t=DataManager.getInstance().getObj("data_kfmarket"),i=t.data_kfmarket,n=void 0,s=0;s<i.length;s++)n=i[s],e=new ShopVo,e.template_id=n.template_id,e.price=n.price,e.tax=n.tax,this._shopObj[e.template_id]=e}return this._shopObj},n.getShopVoById=function(e){return this.getConfig()[e]},t}(egret.EventDispatcher);egret.registerClass(ShopModel,"ShopModel");var ShopVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(ShopVo,"ShopVo");var SingleModel=function(){function e(){this._singleList=[]}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},i.getSingVO=function(e){this._singleList.length<=0&&(this._singleList=this.createSingDataList());var t;for(var i in this._singleList)if(t=this._singleList[i],t.key==e)return t;return null},i.createSingDataList=function(){for(var e,t,i=DataManager.getInstance().getObj("data_single"),n=i.data_single,s=[],a=0;a<n.length;a++)e=n[a],t=new SingleVO,t.key=e.key,t.value=e.value,t.itemArr=t.value.match(/\d+/g),t.desc=e.desc,s.push(t);return s},e.KEY_3=3,e.KEY_13=13,e.KEY_22=22,e.KEY_26=26,e.KEY_31=31,e.KEY_32=32,e.KEY_42=42,e.KEY_44=44,e.KEY_46=46,e.KEY_48=48,e.KEY_12505=12505,e.KEY_12506=12506,e.KEY_13801=13801,e.KEY_13802=13802,e.KEY_14801=14801,e.KEY_14802=14802,e.KEY_14803=14803,e.KEY_14804=14804,e.KEY_15101=15101,e.KEY_15102=15102,e.KEY_15103=15103,e.KEY_15104=15104,e.KEY_15201=15201,e.KEY_15202=15202,e.KEY_15203=15203,e.KEY_15204=15204,e.KEY_15205=15205,e.KEY_15206=15206,e.KEY_15208=15208,e.KEY_15210=15210,e.KEY_15211=15211,e.KEY_15212=15212,e.KEY_14902=14902,e.KEY_11901=11901,e.KEY_15701=15701,e.KEY_16201=16201,e.KEY_16202=16202,e.KEY_16203=16203,e.KEY_16301=16301,e.KEY_16302=16302,e.KEY_16701=16701,e.KEY_16703=16703,e.KEY_16704=16704,e.KEY_16709=16709,e.KEY_16901=16901,e.KEY_16902=16902,e.KEY_16903=16903,e.KEY_16904=16904,e.KEY_16907=16907,e.KEY_16908=16908,e.KEY_16909=16909,e.KEY_16910=16910,e.KEY_17101=17101,e.KEY_17103=17103,e.KEY_17105=17105,e.KEY_18002=18002,e.KEY_18006=18006,e.KEY_18007=18007,e.KEY_18008=18008,e.KEY_18009=18009,e.KEY_18010=18010,e.KEY_18011=18011,e.KEY_18014=18014,e.KEY_18015=18015,e.KEY_18301=18301,e.KEY_18307=18307,e.KEY_18308=18308,e.KEY_18701=18701,e.KEY_18702=18702,e.KEY_18703=18703,e.KEY_18802=18802,e.KEY_18803=18803,e.KEY_19401=19401,e.KEY_19402=19402,e.KEY_19403=19403,e.KEY_19901=19901,e.KEY_19902=19902,e.KEY_19903=19903,e.KEY_19904=19904,e.KEY_20001=20001,e.KEY_19801=19801,e.KEY_19802=19802,e.KEY_20107=20107,e.KEY_20106=20106,e.KEY_20104=20104,e.KEY_20401=20401,e.KEY_20402=20402,e.KEY_20403=20403,e.KEY_20404=20404,e.KEY_20501=20501,e.KEY_20701=20701,e.KEY_21001=21001,e.KEY_21002=21002,e.KEY_21101=21101,e.KEY_21302=21302,e.KEY_22101=22101,e.KEY_22102=22102,e.KEY_22501=22501,e.KEY_22502=22502,e.KEY_23303=23303,e.KEY_23304=23304,e.KEY_23305=23305,e.KEY_23306=23306,e.KEY_23307=23307,e.KEY_23901=23901,e.KEY_24001=24001,e.KEY_24002=24002,e.KEY_24003=24003,e.KEY_24004=24004,e.KEY_24005=24005,e.KEY_24006=24006,e.FIND_ENERMY=13305,e}();egret.registerClass(SingleModel,"SingleModel");var SingleVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(SingleVO,"SingleVO");var BuffState=function(){function e(){}var t=(__define,e);t.prototype;return e.NOTHING=0,e.ADDSPEED=1,e.DELSPEED=2,e.YUN=3,e.DIANXUE=4,e.CM=5,e.CHAOS=6,e.WUDI=7,e.MIANYI=8,e.FAST=9,e.BLINK=10,e.DEFENSE=11,e.FASTATTACK=12,e.PAOPAO=13,e.SCREENQUAKE=14,e.HIDING=15,e}();egret.registerClass(BuffState,"BuffState");var SkillModel=function(e){function t(){e.call(this),this._baseSkillList=[101001,102001,103001],this._skillSiObj=new Object}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},s.getSkillConfig=function(){if(null==this._skillDic){this._skillDic=new Object,this._skillAwakeDic=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_skill"),n=i.data_skill,s=0;s<n.length;s++)e=n[s],t=new SkillVo,t.id=e.id,t.name=e.name,t.describe=e.describe,t.type=e.type,t.icon=e.icon,t.prof=e.prof,t.cost=e.cost,t.obj=e.obj,t.target=e.target,t.distance=e.distance,t.cd=e.cd,t.mod=e.mod,t.getbuff=e.getbuff,t.open_lv=e.open_lv,t.power_up=e.power_up,t.born_percent=e.born_percent,t.lv_percent=e.lv_percent,t.replace=e.replace,t.prior=e.prior,this._skillDic[t.id]=t,t.replace>0&&(this._skillAwakeDic[t.replace]=t)}return this._skillDic},s.getMathConfig=function(){if(null==this._skillMathDic){this._skillMathDic=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_skill_math"),n=i.data_skill_math,s=0;s<n.length;s++)e=n[s],t=new SkillMathVo,t.template_id=e.template_id,t.skill_id=e.skill_id,t.type=e.type,t.min=e.min,t.max=e.max,t.value1=e.value1,t.value2=e.value2,t.value3=e.value3,t.value4=e.value4,t.value5=e.value5,t.value6=e.value6,this._skillMathDic[t.template_id]=t}return this._skillMathDic},s.getFeatConfig=function(){if(null==this._featObj){this._featObj=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_skill_feat"),n=i.data_skill_feat,s=0;s<n.length;s++)t=n[s],e=new SkillFeatVo,e.template_id=t.template_id,e.type=t.type,e.level=t.level,e.name=t.name,e.description=t.description,e.con_feats=t.con_feats,e.active_item=t.active_item,e.probability=t.probability,e.fail=t.fail,e.power_up=t.power_up,e.add_feats=t.add_feats,e.hp=t.hp,e.mp=t.mp,e.att=t.att,e.att_def=t.att_def,e.magic_def=t.magic_def,e.crit=t.crit,e.crit_hurt=t.crit_hurt,e.crit_def=t.crit_def,e.palsy_rate=t.palsy_rate,e.palsy_def=t.palsy_def,e.hurt_up=t.hurt_up,e.hurt_def=t.hurt_def,e.hp_up=t.hp_up,e.buff_id=t.buff_id,e.radio=t.radio,e.show=t.show,this._featObj[e.type]||(this._featObj[e.type]=new Object),this._featObj[e.type][e.level]=e}return this._featObj},s.getFeatOpenConfig=function(){if(null==this._featOpenObj){this._featOpenObj=new Object;for(var e,t,i=DataManager.getInstance().getObj("data_skill_feat_open"),n=i.data_skill_feat_open,s=0;s<n.length;s++)t=n[s],e=new SkillFeatOpenVo,e.template_id=t.template_id,e.open_round=t.open_round,e.vip=t.vip,this._featOpenObj[e.template_id]=e}return this._featOpenObj},s.currentSkill=function(){return this.getSkill(this._currentSkillId)},s.getSkill=function(e){return this.getSkillConfig()[e]?this.getSkillConfig()[e]:void 0},s.getSkillByCareer=function(e){this._skillAwakeDic||this.getSkillConfig();var t,i=[];for(var n in this.getSkillConfig())t=this.getSkillConfig()[n],t.prof==e&&0==t.replace&&i.push(t);i=i.sort(this.orderSkill);for(var s,a=0;a<i.length;a++)t=i[a],s=this._skillAwakeDic[t.id],s&&AwakeModel.getInstance().getIsAwake(s.id)&&(i[a]=s);return i},s.orderSkill=function(e,t){return e.id>t.id?1:e.id===t.id?0:-1},s.getPartnerBaseSkill=function(e){for(var t=RoleModel.getInstance().getPartnerInfo(e),i=t.getSkillList(),n=i.length,s=this.getCarrerSkill(t.getCareer()),a=0;n>a;a++){var o=i[a],r=this.getSkill(o.skill_id);if(r&&this.isBaseSkill(r.replace))return o.skill_id}return s},s.getCarrerSkill=function(e){switch(e){case 1:return 101001;case 2:return 102001;case 3:return 103001}return 0},s.isBaseSkill=function(e){return this._baseSkillList.indexOf(e)>=0},s.getBaseSkillByCareer=function(e){return this._baseSkillList[e-1]},s.getPartnerSkillCanUse=function(e,t){var i=this;void 0===t&&(t=0),null==this._parnerSkillDic&&this.updateSkillDic();var n=SceneModel.getInstance().getPlayer(e);if(null==n)return 0;var s=n.getSkillList();s=s.sort(function(e,t){return e.skill_id-t.skill_id}),s=this.filterSkill(s),s=s.sort(function(e,t){var n=i.getSkill(e.skill_id),s=i.getSkill(t.skill_id);return s.prior-n.prior});for(var a=999999,o=0;o<s.length;o++){var r=s[o];if(r.skill_id!=t&&(r.skill_id<a&&(a=r.skill_id),r.cd<=0))return r.skill_id}return a},s.updateSkillDic=function(){this._parnerSkillDic=new Object;for(var e,t=RoleModel.getInstance().getPartnerList(),i=0;i<t.length;i++)e=t[i],this._parnerSkillDic[e.parnerID]=e.getSkillList()},s.filterSkill=function(e){if(e.length<=5)return e;for(var t=this.copySkills(e,0,5),i=0;i<e.length;i++)for(var n=e[i],s=this.getSkill(n.skill_id),a=0;a<t.length;a++){var o=t[a];s.replace==o.skill_id&&(o.skill_id=n.skill_id,o.level=n.level,o.cd=n.cd)}return t},s.copySkills=function(e,t,i){for(var n=new Array,s=t;s<e.length&&i>s;s++){var a=e[s],o=new NodeSkill;o.level=a.level,o.partner_id=a.partner_id,o.skill_id=a.skill_id,o.cd=a.cd,n.push(o)}return n},s.cdSkill=function(e,t){if(!this.isBaseSkill(t)){var i=SceneModel.getInstance().getPlayer(e);if(null!=i)for(var n=i.getSkillList(),s=0;s<n.length;s++){var a=n[s];if(a.skill_id==t){var o=this._skillSiObj[e+"_"+t];o>0&&clearTimeout(o),a.cd=this.getSkillConfig()[a.skill_id].cd,o=setTimeout2(function(e){e.cd=0},a.cd,a),this._skillSiObj[e+"_"+t]=o;break}}}},s.getSKillEffect=function(e){if(null==this._skillEffectDic){this._skillEffectDic=new Object;for(var t,i,n,s,a=DataManager.getInstance().getObj("data_skill_effect"),o=a.data_skill_effect,r=0;r<o.length;r++)t=o[r],i=new SkillEffectVo,i.id=t.template_id,i.type=t.type,i.dir=t.dir,i.speed=t.speed,i.eff1=t.effect1,i.eff2=t.effect2,i.showHurtTime=t.show_time,i.pos=t.pos,s=t.eff1_off,""!=s&&(n=s.split(","),i.off1=new Point(parseInt(n[0]),parseInt(n[1]))),s=t.eff2_off,""!=s&&(n=s.split(","),i.off2=new Point(parseInt(n[0]),parseInt(n[1]))),i.eff1Delay=t.eff1_delay,i.eff2Delay=t.eff2_delay,this._skillEffectDic[i.id]=i}return this._skillEffectDic[e]},s.getSkillEffectDir=function(e,t,i,n){var s=MapUtil.judgeDir(e,t,i,n),a=1;return 7==s?(s=9,a=-1):4==s?(s=6,a=-1):1==s&&(s=3,a=-1),{dir:s,scale:a}},s.getSkillAttackExt=function(e,t){var i=0,n=this.getSkillMathVo(e,t);if(null==n)return 0;var s=Math.floor(t/10)+1;switch(n.type){case 1:i=t*n.value1*n.value2;break;case 2:i=(n.value1*(s*s-s)+n.value2*s*(t%n.value3)-n.value4)*n.value5;break;case 3:i=(n.value1+n.value2*(t-n.value3))*n.value4}return i},s.getSkillMathVo=function(e,t){var i,n,s;for(n in this.getMathConfig())if(s=this.getMathConfig()[n],s.skill_id==e&&!(s.min>t||s.max<t)){i=s;break}return i},s.getSkillPercent=function(e,t){var i=this.getSkillConfig()[e];return 100+i.born_percent+t*i.lv_percent},s.getSkillTargetNum=function(e){if(MeetPlayerModel.getInstance().fightMPID>0)return 1;var t=this.getSkillConfig()[e];return t?t.obj:0},s.getSkillListByJob=function(e,t){void 0===t&&(t=!1);var i,n,s=new Array;for(n in this.getSkillConfig())i=this.getSkillConfig()[n],i.prof==e&&(i.replace>0&&t||0==i.replace)&&s.push(i);return s},i(s,"isUpgrade",function(){return this.isUpgradeSkill?!0:this.isUpgradeFeat?!0:!1}),i(s,"isUpgradeSkill",function(){var e=RoleModel.getInstance().getPartnerList();if(e)for(var t,i=0;i<e.length;i++)if(t=e[i],this.isPartenerUpgrade(t))return!0;return!1}),s.isPartenerUpgrade=function(e){for(var i,n,s=t.getInstance().getSkillByCareer(e.getCareer()),a=RoleModel.getInstance().getPartnerSkillList(e.parnerID),o=0;o<s.length;o++){n=s[o];for(var r=0;r<a.length;r++)if(a[r].skill_id==n.id&&a[r].level>0&&a[r].level<this.getCurSkillMaxLv()&&(i=this.getCost(a[r].level),RoleModel.getInstance().getRoleInfo().getCoin()>=i))return!0}return!1},i(s,"isUpgradeFeat",function(){var e=RoleModel.getInstance().getPartnerList();if(e)for(var t,i=0;i<e.length;i++)if(t=e[i],this.isPartenerFeatUpgrade(t))return!0;return!1}),s.isPartenerFeatUpgrade=function(e){var i=GoodsListProxy.getInstance().getGoodsByTypeAndSubType(15,10);if(0==i.length)return!1;if(this._featData&&this._featData[e.parnerID]){for(var n=this._featData[e.parnerID],s=0,a=0;a<n.length;a++)n[a].skill_id>0&&s++;for(var o=0,r=RoleModel.getInstance().getRoleCommon().round,h=1;8>h;h++){var l=t.getInstance().getFeatOpenVo(h);l&&r>=l.open_round&&o++}return o>s}return!1},s.getCost=function(e){var t=5e3;return e>0&&(t=5e3+500*(e-1)),t},s.getCurSkillMaxLv=function(){var e=RoleModel.getInstance().getRoleCommon().level;e>80&&(e=80);var t=RoleModel.getInstance().getRoleCommon().round;return t>0&&(e+=10*t),e},s.getFeatOpenVo=function(e){return this.getFeatOpenConfig()[e]},s.getFeatVo=function(e,t){return this.getFeatConfig()[e][t]},s.setFeatData=function(e){this._featData||(this._featData=new Object),this._featData[e.parter_id]||(this._featData[e.parter_id]=e.feat_skills);for(var t,i,n=0;n<e.feat_skills.length;n++){t=e.feat_skills[n];for(var s=0;s<this._featData[e.parter_id].length;s++)i=this._featData[e.parter_id][s],i.slot==t.slot&&(this._featData[e.parter_id][s]=t)}},s.getFeatData=function(e){return this._featData[e]},s.getFeatProStr=function(e){var t=[];return e.hp>0&&t.push(e.hp),e.mp>0&&t.push(e.mp),e.att>0&&t.push(e.att),e.att_def>0&&t.push(e.att_def),e.magic_def>0&&t.push(e.magic_def),e.crit>0&&t.push(e.crit/100),e.crit_hurt>0&&t.push(e.crit_hurt/100),e.crit_def>0&&t.push(e.crit_def/100),e.palsy_rate>0&&t.push(e.palsy_rate/100),e.palsy_def>0&&t.push(e.palsy_def/100),e.hurt_up>0&&t.push(e.hurt_up/100),e.hurt_def>0&&t.push(e.hurt_def/100),e.hp_up>0&&t.push(e.hp_up/100),t
},s.getBUffVo=function(e){if(null==this._buffDic){this._buffDic=new Object;for(var t=DataManager.getInstance().getObj("data_buff"),i=t.data_buff,n=0;n<i.length;n++){var s=new BuffVo,a=i[n];s.id=a.template_id,s.showID=a.show,s.type=a.type,s.time=a.time,this._buffDic[s.id]=s}}return this._buffDic[e]},s.getSkillDes=function(e){var i="",n=t.getInstance().getSkillPercent(e.id,e.lev),s=t.getInstance().getSkillAttackExt(e.id,e.lev);return i=n>100?StringUtil.substitute(e.describe,s,n):StringUtil.substitute(e.describe,s)},s.isCallPetSkill=function(e){return 103005==e||103010==e},s.getPetSkillID=function(){var e=RoleModel.getInstance().getPartnerIdByCareer(Tools.DAOSHI),t=RoleModel.getInstance().getPartnerSkillInfo(e,103010);return t?t.skill_id:103005},s.getResIDBySkillID=function(e){return 103005==e?101:102},t.ATTACK_RANGER_X=30,t.ATTACK_RANGER_Y=20,t}(egret.EventDispatcher);egret.registerClass(SkillModel,"SkillModel");var TargetType=function(){function e(){}var t=(__define,e);t.prototype;return e.TARGET=1,e.SELF=2,e.SELF_ALL=3,e.SELECT_RANGE=4,e}();egret.registerClass(TargetType,"TargetType");var BuffVo=function(){function e(){}var t=(__define,e);t.prototype;return e.HUSHEN=9999,e.YUN=1,e}();egret.registerClass(BuffVo,"BuffVo");var SkillEffectVo=function(){function e(){this.off1=new Point,this.off2=new Point,this.eff1Delay=0,this.eff2Delay=0}var t=(__define,e);t.prototype;return e.TARGET=1,e.SELF=2,e.PROCESS=3,e.TARGET_SELF=4,e.SELF_ALL=5,e.ZHAOHUAN=6,e.PARTNERS=7,e.POS_BODY=1,e.POS_FOOT=2,e.POS_SCENE=3,e.POS_HEAD=4,e}();egret.registerClass(SkillEffectVo,"SkillEffectVo");var SkillFeatOpenVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(SkillFeatOpenVo,"SkillFeatOpenVo");var SkillFeatVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(SkillFeatVo,"SkillFeatVo");var SkillMathVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(SkillMathVo,"SkillMathVo");var SkillVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(SkillVo,"SkillVo");var TaskBasic=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(TaskBasic,"TaskBasic");var TaskModel=function(e){function t(){e.call(this),this.isNoviceTaskExit=!1,this.isGuildGuide=!1,this.guildGuideLvl=80,this._taskObj=new Object,this._noviceTaskConfig=[],this.autoTime=1300,this.taskMonster=0,this._killCount=0,this.createBasic()}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},s.createBasic=function(){for(var e,t,i,n=DataManager.getInstance().getObj("data_task"),s=n.data_task,a=0;a<s.length;a++)e=s[a],t=new TaskVo,t.template_id=e.template_id,t.name=e.name,t.next_id=e.next_id,t.type=e.type,t.need=e.need,t.add_coin=e.add_coin,t.add_exp=e.add_exp,t.xs=e.xs,t.desc=e.desc,t.is_rookie=e.is_rookie,t.add_item=e.add_item,t.end_npc=e.end_npc,t.start_talk=e.start_talk,t.end_talk=e.end_talk,""!=e.mon_pos&&"0"!=e.mon_pos&&t.setMonsterPos(e.mon_pos),""!=e.mon_list&&"0"!=e.mon_list&&t.setMonster(e.mon_list),""!=t.add_item&&"0"!=t.add_item?(i=t.add_item.match(/\d+/g),t.itemID=parseInt(i[0]),t.itemNum=parseInt(i[1]),t.itemList=Tools.changeToItemData(e.add_item)):(t.itemID=0,t.itemNum=0),t.event=e.event,""!=t.event&&"0"!=t.event?(i=t.event.split(","),t.moduleType=i[0],t.moduleIndex=parseInt(i[1])):(t.moduleType="",t.moduleIndex=0),this._taskObj[t.template_id]=t,1==t.is_rookie&&this._noviceTaskConfig.push(t)},s.isNovicePlayer=function(){var e=this,t=RoleModel.getInstance().getRoleCommon().level,i=e.getCurNoviceTask();return 20>=t&&null!=i&&void 0!=i?!0:!1},s.isNoviceTaskFinished=function(){var e=1==FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE24302);return e},s.isNoviceTaskFinishedById=function(e){var t=this,i=t.getTaskInfoById(e),n=FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE24301),s=t._noviceTaskConfig.indexOf(i);return n>s?!0:!1},s.getCurNoviceTask=function(){var e=this,t=FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE24301),i=e._noviceTaskConfig[t];return i},s.killMonsterAddCount=function(e){var t=this,i=t.getCurNoviceTask();null!=i&&void 0!=i&&null!=i.monsterList&&i.monsterList.length>0&&(i.monsterList[0].id==e&&(t._killCount++,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(TaskEvtName.NOVICE_TASK_KILLNUM_UPDATE))),t._killCount>=i.monsterList[0].count&&(GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.WALK_TO_NPC,{id:i.end_npc})),t._killCount=0))},s.getKillMonsterCount=function(){var e=this;return e._killCount},s.getTaskInfoById=function(e){return this._taskObj[e]},s.setCurTaskInfo=function(e){this._taskInfo=e},s.getCurTaskInfo=function(){var e=this;return e._taskInfo},s.getCurTaskXS=function(){if(this._taskInfo){var e=this._taskObj[this._taskInfo.task_id];if(e&&e.need>this._taskInfo.num)return e.xs}return-1},i(s,"curTaskId",function(){var e=0;return this._taskInfo&&(e=this._taskInfo.task_id),e}),s.getTaskOpenView=function(e){this.getTaskOpen(e.moduleType,e.moduleIndex)},s.getTaskOpen=function(e,i){switch(e){case"skill":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_SKILL,i));break;case"figure":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_FIGURE,{index:i,isOpen:!0}));break;case"build":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_BUILD,i));break;case"fuben":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FubenEvtName.OPEN_FUBEN_VIEW,i));break;case"ronglian":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_PACK,{index:0,isOpen:!0}));break;case"boss":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.OPEN_BOSS_WINDOW,i));break;case"meetBoss":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.OPEN_MEET_BOSS_WINDOW));break;case"speedpk":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_SPEED_PK));break;case"checkPointBoss":var n=SceneModel.getInstance().getSceneWave();n.award_id>n.awarded_id?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(CheckPointBossEvtName.NOVICECG_OPEN_WINDOW)):GameDispatcher.getInstance().dispatchEvent(new ParamEvent(CheckPointBossEvtName.CHECKPOINTBOSS_OPEN_WINDOW));break;case"specialEquip":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_OPEN_SPECIALEQUIPWINDOW,{state:!0,type:3}));break;case"guild":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_GUILD));break;case"mall":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_MALL,i));break;case t.TYPE_GUIZU:GameDispatcher.getInstance().dispatchEvent(new ParamEvent(VipEvtName.OPEN_VIP_MONTH,i));break;case t.TYPE_RANK:GameDispatcher.getInstance().dispatchEvent(new ParamEvent(RankEvtName.RANK_OPEN_VIEW,i));break;case t.TYPE_SHOPCHEAP:GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MallEvtName.OPEN_SHOPCHEAP,i));break;case t.TYPE_SHADOW:GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ShadowEvtName.OPEN_SHADOW,i));break;case t.TYPE_AWAKE:GameDispatcher.getInstance().dispatchEvent(new ParamEvent(AwakeEvtName.OPEN_AWAKE,i));break;case t.TYPE_LUNHUI:GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.OPEN_LUNHUI_WINDOW,i));break;case t.TYPE_LILIAN:GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ArtifactEvtName.ARTIFACT_OPEN_WINDOW,{index:i,isOpen:!0}));break;case"king":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(KingEvtName.OPEN_VIEW_SELECT));break;case"kuafu":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_SHOW_RIGHTTOP,{state:!0})),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(SceneEvtName.MAIN_CITY_CHANGE)),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(KuaFuEvtName.KUAFU_OPEN_MAP));break;case"cityWar":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(CityWarEvtName.SHOW_CITYWAR_VIEW));break;case"partner":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_OPEN_OPENPARTNERWINDOW));break;case"fightUp":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.OPEN_FIGHT_UP_WINDOW));break;case"magicPet":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_OPEN_WINDOW,i));break;case"shenqi":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ArtifactEvtName.ARTIFACT_OPEN_SINGLE_WINDOW,i));break;case"pk":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MeetPlayerEvtName.SHOW_MEETPLAYER_VIEW,{index:i}));break;default:GameDispatcher.getInstance().dispatchEvent(new ParamEvent(e,i))}},t.TYPE_GUIZU="guizu",t.TYPE_RANK="rank",t.TYPE_SHOPCHEAP="shopcheap",t.TYPE_SHADOW="shadow",t.TYPE_AWAKE="awake",t.TYPE_LUNHUI="lunhui",t.TYPE_FULI="fuli",t.TYPE_LILIAN="lilian",t.TYPE_DIALOG=10002,t.TYPE_KILL_MONSTER=10001,t}(egret.EventDispatcher);egret.registerClass(TaskModel,"TaskModel");var TaskNoviceMonsterVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(TaskNoviceMonsterVO,"TaskNoviceMonsterVO");var TaskVo=function(){function e(){}var t=(__define,e),i=t.prototype;return i.setMonsterPos=function(e){if(""!=e&&"0"!=e){var t=this;t.monsterPos=[];for(var i,n,s,a=e.match(/\d+/g),o=0,r=a.length/2,h=0;r>h;h++)n=parseInt(a[o]),s=parseInt(a[o+1]),i=new Point(n,s),t.monsterPos.push(i),o+=2}},i.setMonster=function(e){if(""!=e&&"0"!=e){var t=this;t.monsterList=[];for(var i,n=e.match(/\d+/g),s=0,a=n.length/2,o=0;a>o;o++)i=new TaskNoviceMonsterVO,i.id=parseInt(n[s]),i.count=parseInt(n[s+1]),t.monsterList.push(i),s+=2}},e}();egret.registerClass(TaskVo,"TaskVo");var SideUIVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(SideUIVO,"SideUIVO");var TipsWordModel=function(e){function t(){e.call(this),this._baseObj=new Object,this._obj=new Object,this._list=[],this.createBase()}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.createBase=function(){for(var e,t,i=DataManager.getInstance().getObj("data_Interface"),n=i.data_Interface,s=0;s<n.length;s++)e=n[s],t=new TipsWordVO,t.template_id=e.template_id,t.iconID=e.iconID,t.name=e.name,t.Location=e.Location,t.rows=e.rows,t.isGlow=e.isGlow,t.showLevel=e.showLevel,t.showhook=e.showhook,t.is_little=e.is_little,t.below=e.below,t.city=e.city,this._baseObj[t.iconID]=t,this._obj[t.template_id]=t,this._list.push(t)},n.getSideUIConfig=function(e){function t(e,t){return Number(e.sort)-Number(t.sort)}var i=this;if(null==i._sideUIConfig){i._sideUIConfig=[];for(var n,s=DataManager.getInstance().getObj("data_Interface_other"),a=s.data_Interface_other,o=void 0,r=0;r<a.length;r++)o=a[r],n=new SideUIVO,n.template_id=o.template_id,n.type=o.type,n.name=o.name,n.sort=o.sort,n.event=o.event,n.open_lv=o.open_lv,n.open_round=o.open_round,n.open_day=o.open_day,i._sideUIConfig.push(n)}for(var h=[],r=0;r<i._sideUIConfig.length;r++)n=i._sideUIConfig[r],n.type==e&&h.push(n);return h.sort(t),h},n.getDataByIconId=function(e){return this._baseObj[e]},n.getDataById=function(e){return this._obj[e]},n.getList=function(){return this._list},t}(egret.EventDispatcher);egret.registerClass(TipsWordModel,"TipsWordModel");var TipsWordVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(TipsWordVO,"TipsWordVO");var TreasureModel=function(e){function t(){e.call(this),this._dataObj=new Object,this._itemObj=new Object,this._packArr=[],this.createBasic()}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},s.createBasic=function(){for(var e,t,i=DataManager.getInstance().getObj("data_treasure"),n=i.data_treasure,s=0;s<n.length;s++)e=n[s],t=new TreasureVO,t.template_id=e.template_id,t.item_id=e.item_id,t.name=e.name,t.num=e.num,t.weight=e.weight,t.show=e.show,t.record=e.record,t.radio=e.radio,this._dataObj[t.template_id]=t,t.show>0&&(this._itemObj[t.show]=t)},s.getItemByIndex=function(e){return this._itemObj[e]},s.getVoById=function(e){return this._dataObj[e]},s.setPackData=function(e){this._packArr=e},i(s,"packData",function(){return this._packArr}),s.delPackData=function(e){for(var t,i,n,s,a=0;a<e.length;a++)if(i=e[a],s=this.getVoById(i.item_id),null==s&&Message.show("寻宝提取物品没有找到"+i.item_id),s){n=GoodsListProxy.getInstance().getGoodsInfoByType(s.item_id);for(var o=0;o<this._packArr.length;o++)if(t=this._packArr[o],t.item_id==i.item_id){n.type==GoodsType.ITEM_EQUIP?(t.num-=i.num,t.num<=0&&this._packArr.splice(o,1)):this._packArr.splice(o,1);break}}},s.getItemIdById=function(e){for(var t,i,n=0;n<this._packArr.length;n++)if(t=this._packArr[n],i=this.getVoById(t.item_id),i.item_id==e)return i.template_id;return 0},t}(egret.EventDispatcher);egret.registerClass(TreasureModel,"TreasureModel");var TreasureVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(TreasureVO,"TreasureVO");var VipModel=function(e){function t(){e.call(this),this._vipObj=new Object,this.createBase()}__extends(t,e);var i=__define,n=t,s=n.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},s.createBase=function(){for(var e,t,i=DataManager.getInstance().getObj("data_vip"),n=i.data_vip,s=0;s<n.length;s++)e=n[s],t=new VipVo,t.template_id=e.template_id,t.exp=e.exp,t.itemList=Tools.changeToItemData(e.add_item),t.vip_fuben_material=e.vip_fuben_material,t.vip_bag=e.vip_bag,t.vip_speed=e.vip_speed,t.vip_circle=e.vip_circle,t.donate_2=e.donate_2,t.donate_3=e.donate_3,t.money_tree_time=e.money_tree_time,t.show=e.show,this._vipObj[t.template_id]=t},s.setVIPData=function(e){(null==this._vipData||this._vipData.level!=e.level)&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(VipEvtName.VIP_LEVEL_CHANGE)),this._vipData=e},s.getVIPLevel=function(){return this._vipData?this._vipData.level:0},s.getVIPExp=function(){return this._vipData.exp},i(s,"isMonth",function(){return this.month_time>0}),i(s,"isLife",function(){return this._isLife},function(e){this._isLife=e}),i(s,"isLifeReward",function(){return this._isLifeReward},function(e){this._isLifeReward=e}),s.getVipVoByLv=function(e){return void 0===e&&(e=0),0==e&&(e=this.getVIPLevel()),this._vipObj[e]},s.isGetVipReward=function(e){for(var t,i=0;i<this._vipData.vip_awards.length;i++)if(t=this._vipData.vip_awards[i],t&&t.level==e&&1==t.award)return!0;return!1},t}(egret.EventDispatcher);egret.registerClass(VipModel,"VipModel");var VipVo=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(VipVo,"VipVo");var AttackType=function(){function e(){}var t=(__define,e);t.prototype;return e.PARTNER=2,e.MONSTER=3,e.MONSTER_SKILL=200001,e}();egret.registerClass(AttackType,"AttackType");var FightVo=function(){function e(){this.leftType=1}var t=(__define,e);t.prototype;return e.RED=1,e.BLUE=2,e}();egret.registerClass(FightVo,"FightVo");var MonConfigVo=function(){function e(){this.typeID=0,this.monsterType=0,this.resID=0,this.lev=0,this.hp=0,this.attSpeed=0,this.attType=0,this.moveSpeed=0,this.propertyVo=new PropertyVO}var t=(__define,e);t.prototype;return e}();egret.registerClass(MonConfigVo,"MonConfigVo");var MonsterVO=function(e){function t(){e.call(this),this.bossType=0,this.startDirstate=0,this.resID=0,this._hasShodow=!0,this.toAttackId=0,this.born=!1,this.useType=0,this.isPetMonster=!1,this._body=0,this._color=0,this._isCanBeAttack=!0,this.job=0,this.sex=0,this.guildName=""}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this),this.buffDic=new Object,this.poseState=new PoseState,this.dirState=new DirState},n.getIsCanBeAttack=function(){return this._isCanBeAttack},n.setIsCanBeAttack=function(e){this._isCanBeAttack=e},n.getResId=function(){return this._resId},n.setResId=function(e){this._resId!=e&&(this._resId=e,this.dispatchEvent(new ParamEvent(t.CHANGERESID)))},n.getPropertyVo=function(){return this.propertyVo},t.CHANGERESID="changeResId",t.SMALL=1,t.WAVE_BOSS=2,t.PERSON_BOSS=3,t.PEOPLE_BOSS=4,t.ROUND_BOSS=5,t.MEET_BOSS=6,t.COPY_MONSTER=7,t.VIRTUAL=1,t.COMMON=0,t.PET=2,t.MEETBOSS=3,t.YUELING_RES=102,t.DOG_RES=101,t}(LiveThingVo);egret.registerClass(MonsterVO,"MonsterVO");var QQGoodsVo=function(){function e(){this.template_id=0,this.type=0,this.rmb=0}var t=(__define,e);t.prototype;return e}();egret.registerClass(QQGoodsVo,"QQGoodsVo");var WingModel=function(e){function t(){e.call(this),this._wingDataList=[],this.isAuto=!1,this._serverData=new Object}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},n.createDataList=function(){for(var e,t,i,n=DataManager.getInstance().getObj("data_wing"),s=n.data_wing,a=[],o=0;o<s.length;o++)e=s[o],t=new WingDataVO,t.template_id=e.template_id,t.advance_lev=e.advance_lev,t.need=e.need,t.con_coin=e.con_coin,t.coin_luck=e.coin_luck,t.item_luck=e.item_luck,t.show=e.show,t.level=e.level,t.con_item=e.con_item,i=t.con_item.match(/\d+/g),t.con_itemid=parseInt(i[0]),t.con_count=parseInt(i[1]),t.hp=e.hp,t.mp=e.mp,t.attack=e.att,t.att_def=e.att_def,t.magic_def=e.magic_def,t.crit=e.crit,t.crit_hurt=e.crit_hurt,t.crit_def=e.crit_def,t.palsy_rate=e.palsy_rate,t.palsy_def=e.palsy_def,t.hurt_up=e.hurt_up,t.hurt_def=e.hurt_def,t.hp_up=e.hp_up,a.push(t);return a},n.getWingDataVO=function(e,t){this._wingDataList.length<=0&&(this._wingDataList=this.createDataList());for(var i,n=this._wingDataList.length,s=0;n>s;s++)if(i=this._wingDataList[s],i.advance_lev==e&&i.level==t)return i;return null},n.getWingDataVOByTemplateId=function(e){this._wingDataList.length<=0&&(this._wingDataList=this.createDataList());for(var t,i=this._wingDataList.length,n=0;i>n;n++)if(t=this._wingDataList[n],t.template_id==e)return t;return null},n.updateServerData=function(e){(null==this._serverData[e.partner_id]||void 0==this._serverData[e.partner_id])&&(this._serverData[e.partner_id]=new WingServerVO),this._serverData[e.partner_id].exp!=e.exp&&(this._serverData[e.partner_id].exp=e.exp),this._serverData[e.partner_id].jie!=e.level&&(this._serverData[e.partner_id].jie=e.level,this.dispatchEvent(new ParamEvent(WingEvtName.WING_LEVELUP))),this._serverData[e.partner_id].star!=e.star&&(this._serverData[e.partner_id].star=e.star),RedDotsModel.getInstance().calMainFigureIconRedDot()},n.getWingServerVO=function(e){return this._serverData[e]},n.getTotalWingLv=function(){for(var e,t,i=0,n=RoleModel.getInstance().getPartnerList(),s=0,a=n.length,o=0;a>o;o++)t=n[o],e=this.getWingServerVO(t.parnerID),e&&(s=e.jie,1>s&&(s=1),i+=10*(s-1)+e.star);return i},n.getWingsCanLevelup=function(){var e,i,n,s,a,o=RoleModel.getInstance().getRoleInfo().getCoin(),r=0,h=0,l=RoleModel.getInstance().getPartnerList();if(null==l||void 0==l)return!1;for(var d,a=0,_=0;_<l.length;_++)if(e=l[_],d=this.getWingServerVO(e.parnerID),null!=d&&(i=d.jie,n=d.star,10>n?(r=i,h=n+1):(r=i+1,h=1),0==i&&(r=i+1),s=t.getInstance().getWingDataVO(r,h))){if(a=GoodsListProxy.getInstance().findGoodNumber(s.con_itemid),a>=s.con_count)return!0;if(o>=s.con_coin)return!0}return!1},n.getWingsCanLevelupByPartner=function(e){var i,n,s,a,o,r=RoleModel.getInstance().getRoleInfo().getCoin(),h=0,l=0,a=0;if(o=this.getWingServerVO(e.parnerID),null==o)return!1;if(i=o.jie,n=o.star,10>n?(h=i,l=n+1):(h=i+1,l=1),0==i&&(h=i+1),s=t.getInstance().getWingDataVO(h,l)){if(a=GoodsListProxy.getInstance().findGoodNumber(s.con_itemid),a>=s.con_count)return!0;if(r>=s.con_coin)return!0}return!1},n.getWingEquipFigValue=function(e){var t,i=GoodsListProxy.getInstance().getEquipListByPartner(e,!0),n=0;for(var s in i)t=i[s],n+=GoodsListProxy.getInstance().getEquipFightValue(t);return n},t.ITEM_WING=2001001,t.ITEM_FAST=13030001,t}(egret.EventDispatcher);egret.registerClass(WingModel,"WingModel");var WingDataVO=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(PropertyVO);egret.registerClass(WingDataVO,"WingDataVO");var WingServerVO=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(WingServerVO,"WingServerVO");var CustomByteArray=function(e){function t(){e.call(this),this.endian=egret.Endian.BIG_ENDIAN}__extends(t,e);var i=(__define,t);i.prototype;return t}(egret.ByteArray);egret.registerClass(CustomByteArray,"CustomByteArray");var CustomSocket=function(e){function t(){e.call(this),this._contentLen=0,this.HEADLENGTH=7,this._readDataFlag=!1,this.isClosed=!0,this._loginCmdList=[1e4,10001,10002,10003,10010,10020,10200,10203,10300],this._cmd10700Back=!0,this.type=egret.WebSocket.TYPE_BINARY,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){this._cmdArray=new Array,this._bufferDataArray=new Array,this._cmdMap=new Object,this._cmdReflectionDic=new Object,this.type=egret.WebSocket.TYPE_BINARY},n.configureListeners=function(){this.removeEventListener(egret.Event.CLOSE,this.closeHandler,this),this.removeEventListener(egret.Event.CONNECT,this.connectHandler,this),this.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.ioErrorHandler,this),this.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.socketDataHandler,this),this.addEventListener(egret.Event.CLOSE,this.closeHandler,this),this.addEventListener(egret.Event.CONNECT,this.connectHandler,this),this.addEventListener(egret.IOErrorEvent.IO_ERROR,this.ioErrorHandler,this),this.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.socketDataHandler,this)},n.ioErrorHandler=function(e){trace("----------------------服务器重启了-------------------"),this.dispatchEvent(new ParamEvent(t.ERROR,{code:2}))},n.connectHandler=function(e){this.dispatchEvent(new ParamEvent(t.CONNECT)),this.isClosed=!1},n.closeHandler=function(e){trace("----------------------socket断开了-------------------"),this.isClosed=!0,this.dispatchEvent(new ParamEvent(t.ERROR,{code:1}))},n.socketDataHandler=function(e){var t=new CustomByteArray;this.readBytes(t),this._bufferDataArray.push(t),this._readDataFlag||(this._readDataFlag=!0,this.handleBufferData(),this._readDataFlag=!1),e=null,t=null},n.handleBufferData=function(){if(this._bufferDataArray.length<=0)return void(this._readDataFlag=!1);var e=this._bufferDataArray.shift();if(e.position=0,null!=this._cashBytes&&this._cashBytes.bytesAvailable>0){var t=new CustomByteArray;this._cashBytes.readBytes(t,0,this._cashBytes.bytesAvailable),e.readBytes(t,t.length,e.bytesAvailable),this._cashBytes=null,e=t,e.position=0,t=null}0==this._contentLen&&e.bytesAvailable<this.HEADLENGTH?(null==this._cashBytes&&(this._cashBytes=new CustomByteArray),e.readBytes(this._cashBytes,this._cashBytes.length,e.bytesAvailable),e=null,this.handleBufferData()):(this.getBytes(e),t=null,e=null)},n.getBytes=function(e){if(0==this._contentLen&&(this._contentLen=e.readUnsignedInt()),e.bytesAvailable<this._contentLen)null==this._cashBytes&&(this._cashBytes=new CustomByteArray),e.readBytes(this._cashBytes,this._cashBytes.length,e.bytesAvailable),e=null,this.handleBufferData();else{var t=e.readUnsignedInt(),i=new CustomByteArray;0!=this._contentLen&&e.readBytes(i,0,this._contentLen),this.receiveData(t,i),this._contentLen=0,i=null,e.bytesAvailable>=this.HEADLENGTH?this.getBytes(e):(e.bytesAvailable>0&&(null==this._cashBytes&&(this._cashBytes=new CustomByteArray),e.readBytes(this._cashBytes,this._cashBytes.length,e.bytesAvailable)),this._readDataFlag=!1,e=null,this.handleBufferData())}},n.receiveData=function(e,t,i){if(void 0===i&&(i=!1),!(1e4>e||(null==RoleModel.getInstance().getRoleCommon()||null==RoleModel.getInstance().getPartnerList())&&this._loginCmdList.indexOf(e)<0)){var n=this._cmdArray[e];if(!(null==n||n.length<=0)){var s,a;if(null==this.getCMDObject(e))try{s=egret.getDefinitionByName("SCMD"+e),this.addCMDObject(e,s)}catch(o){90006!=e&&11202!=e&&trace("@没有配置该协议对应的类"+e)}else s=this.getCMDObject(e);if(null==s&&90006!=e)trace("@没有配置该协议对应的类   "+e);else if(t.bytesAvailable>0)try{a=this.mappingObject(s,t,e)}catch(o){throw new Error("协议号"+e+"有错")}else a=null;for(var r=(getTimer(),0);r<n.length;r++)null==a?n[r]():n[r](a);s=null,n=null}}},n.getCMDObject=function(e){var t="cmd"+e;return this._cmdMap[t]},n.addCMDObject=function(e,t){var i="cmd"+e;this._cmdMap[i]=t},n.mappingObject=function(e,t,i){for(var n=new e,s=0,a=n.list;s<a.length;s++){var o=a[s];if(t.bytesAvailable<=0)break;if("uint"==o.type)n[o.name]=t.readShort();else if("Int8"==o.type)n[o.name]=t.readUnsignedByte();else if("Int16"==o.type)n[o.name]=t.readUnsignedShort();else if("Int32"==o.type)n[o.name]=t.readInt();else if("Int64"==o.type){var r=t.readUnsignedInt(),h=t.readUnsignedInt(),l=4294967296,d=Number(r)*l+Number(h);n[o.name]=d}else if("Number"==o.type)n[o.name]=t.readFloat();else if("string"==o.type)n[o.name]=t.readUTF();else{for(var _=t.readShort(),c=n[o.name],u=c.pop(),p=0;_>p;p++)u instanceof Number?c.push(t.readInt()):u instanceof String?c.push(t.readUTF()):c.push(this.mappingObject(u,t,i));u=null}}return o=null,u=null,c=null,n},n.getReflection=function(e){return this._cmdReflectionDic[e]},n.putReflection=function(e,t){this._cmdReflectionDic[e]=t},n.start=function(e,t){void 0===e&&(e=null),void 0===t&&(t=0),this.ip=e,this.port=t,this.configureListeners();var i=Tools.getPageParams("is_ssl");i&&parseInt(i)>0?this.connectByUrl(StringUtil.substitute("wss://{0}:{1}",ConfigManager.domain,t)):this.connect(this.ip,this.port)},t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.sendMessage=function(e,i){if(void 0===i&&(i=null),0!=this.connected){var n=new CustomByteArray;if(null!=i){var s=null;if(i instanceof Array&&i.length>0)for(var a=0;a<i.length;a++)s=this.packageData(i[a]),n.writeBytes(s,0,s.length);else s=this.packageData(i),n.writeBytes(s,0,s.length)}var o=new CustomByteArray;o.writeUnsignedInt(n.length),o.writeUnsignedInt(e),o.writeBytes(n,0,n.bytesAvailable),this.writeBytes(o),this.flush(),s=null,i=null,n=null,o=null}else switch(this){case t.getInstance():}},n.packageData=function(e){for(var t,i=new CustomByteArray,n=0,s=e.list;n<s.length;n++){var a=s[n];if("uint"==a.type)i.writeShort(e[a.name]);else if("Number"==a.type){var o=e[a.name];isNaN(o)&&(o=0),i.writeFloat(o)}else if("string"==a.type){var r=e[a.name];null==r&&(r=" "),i.writeUTF(r)}else if("Int64"==a.type)t=4294967296,i.writeInt(Math.floor(e[a.name]/t)),i.writeInt(Math.floor(e[a.name]%t));else if("Int32"==a.type)i.writeInt(e[a.name]);else if("Int16"==a.type)i.writeShort(e[a.name]);else if("Int8"==a.type)i.writeByte(e[a.name]);else{var h=e[a.name];if(h instanceof Array){i.writeShort(h.length);for(var l=0,d=h;l<d.length;l++){var _=d[l],c=this.packageData(_);i.writeBytes(c,0,c.length)}}else c=this.packageData(h),i.writeBytes(c,0,c.length);h=null,_=null,c=null}}return a=null,e=null,r=null,i},n.addCmdListener=function(e,t,i){null==this._cmdArray[e]&&(this._cmdArray[e]=[]),-1==this._cmdArray[e].indexOf(t)&&this._cmdArray[e].push(t)},n.removeCmdListener=function(e,t){var i=this._cmdArray[e];if(null!=i&&i.length>0)for(var n=i.length-1;n>=0;n--)t==i[n]&&i.splice(n,1)},t.ERROR="socket_error",t.CONNECT="socket_connect",t}(egret.WebSocket);egret.registerClass(CustomSocket,"CustomSocket");var CCMD10000=function(){function e(){this.list=[{name:"plat_id",type:"Int32"},{name:"unixtime",type:"Int32"},{name:"plat_account",type:"string"},{name:"ticket",type:"string"},{name:"channel",type:"string"},{name:"via",type:"Int8"},{name:"svr_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10000,"CCMD10000");var CCMD10001=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10001,"CCMD10001");var CCMD10002=function(){function e(){this.list=[{name:"svr_id",type:"Int32"},{name:"role_career",type:"Int8"},{name:"role_sex",type:"Int8"},{name:"role_name",type:"string"},{name:"role_channel",type:"string"},{name:"role_via",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10002,"CCMD10002");var CCMD10003=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"unixtime",type:"Int32"},{name:"tstamp",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10003,"CCMD10003");var CCMD10020=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10020,"CCMD10020");var CCMD10021=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10021,"CCMD10021");var CCMD10030=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10030,"CCMD10030");var CCMD10040=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10040,"CCMD10040");var CCMD10200=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10200,"CCMD10200");var CCMD10202=function(){function e(){this.list=[{name:"icon",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10202,"CCMD10202");var CCMD10210=function(){function e(){this.list=[{name:"new_name",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10210,"CCMD10210");var CCMD10300=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10300,"CCMD10300");var CCMD10301=function(){function e(){this.list=[{name:"career",type:"Int8"},{name:"sex",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10301,"CCMD10301");var CCMD10400=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10400,"CCMD10400");var CCMD10401=function(){function e(){this.list=[{name:"item_id",type:"Int64"},{name:"num",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10401,"CCMD10401");var CCMD10402=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10402,"CCMD10402");var CCMD10410=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10410,"CCMD10410");var CCMD10420=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10420,"CCMD10420");var CCMD10421=function(){function e(){this.list=[{name:"num",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10421,"CCMD10421");var CCMD10430=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10430,"CCMD10430");var CCMD10500=function(){function e(){this.list=[{name:"skill_id",type:"Int32"},{name:"parter_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10500,"CCMD10500");var CCMD10501=function(){function e(){this.list=[{name:"parter_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10501,"CCMD10501");var CCMD10600=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10600,"CCMD10600");var CCMD10601=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10601,"CCMD10601");var CCMD10602=function(){function e(){this.list=[{name:"wave_id",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10602,"CCMD10602");var CCMD10603=function(){function e(){this.list=[{name:"level_id",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10603,"CCMD10603");var CCMD10604=function(){function e(){this.list=[{name:"level_id",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10604,"CCMD10604");var CCMD10605=function(){function e(){this.list=[]}var t=(__define,e);
t.prototype;return e}();egret.registerClass(CCMD10605,"CCMD10605");var CCMD10610=function(){function e(){this.list=[{name:"use_super_item",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10610,"CCMD10610");var CCMD10620=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10620,"CCMD10620");var CCMD10700=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"skill_id",type:"Int32"},{name:"type",type:"Int8"},{name:"plat_name",type:"string"},{name:"mon_id",type:"Int64"},{name:"pos_x",type:"Int16"},{name:"pos_y",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10700,"CCMD10700");var CCMD10800=function(){function e(){this.list=[{name:"scene_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10800,"CCMD10800");var CCMD10801=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10801,"CCMD10801");var CCMD10820=function(){function e(){this.list=[{name:"pos_x",type:"Int16"},{name:"pox_y",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10820,"CCMD10820");var CCMD10900=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10900,"CCMD10900");var CCMD10901=function(){function e(){this.item_ids=[NodeItem_ids],this.list=[{name:"item_ids",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10901,"CCMD10901");var CCMD10902=function(){function e(){this.item_ids=[NodeItem_ids],this.list=[{name:"item_ids",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD10902,"CCMD10902");var CCMD11000=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11000,"CCMD11000");var CCMD11001=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11001,"CCMD11001");var CCMD11002=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11002,"CCMD11002");var CCMD11003=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11003,"CCMD11003");var CCMD11004=function(){function e(){this.list=[{name:"template_id",type:"Int32"},{name:"num",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11004,"CCMD11004");var CCMD11005=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11005,"CCMD11005");var CCMD11100=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11100,"CCMD11100");var CCMD11101=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11101,"CCMD11101");var CCMD11200=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11200,"CCMD11200");var CCMD11201=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11201,"CCMD11201");var CCMD11202=function(){function e(){this.list=[{name:"item_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11202,"CCMD11202");var CCMD11300=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11300,"CCMD11300");var CCMD11400=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11400,"CCMD11400");var CCMD11401=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11401,"CCMD11401");var CCMD11500=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11500,"CCMD11500");var CCMD11501=function(){function e(){this.list=[{name:"mail_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11501,"CCMD11501");var CCMD11502=function(){function e(){this.list=[{name:"mail_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11502,"CCMD11502");var CCMD11503=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11503,"CCMD11503");var CCMD11600=function(){function e(){this.list=[{name:"content",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11600,"CCMD11600");var CCMD11601=function(){function e(){this.list=[{name:"content",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11601,"CCMD11601");var CCMD11602=function(){function e(){this.list=[{name:"tar_role_id",type:"Int64"},{name:"content",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11602,"CCMD11602");var CCMD11610=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11610,"CCMD11610");var CCMD11611=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11611,"CCMD11611");var CCMD11612=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11612,"CCMD11612");var CCMD11620=function(){function e(){this.list=[{name:"content",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11620,"CCMD11620");var CCMD11700=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11700,"CCMD11700");var CCMD11701=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11701,"CCMD11701");var CCMD11702=function(){function e(){this.list=[{name:"name",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11702,"CCMD11702");var CCMD11703=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11703,"CCMD11703");var CCMD11704=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11704,"CCMD11704");var CCMD11705=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11705,"CCMD11705");var CCMD11706=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11706,"CCMD11706");var CCMD11707=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11707,"CCMD11707");var CCMD11708=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11708,"CCMD11708");var CCMD11800=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11800,"CCMD11800");var CCMD11801=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11801,"CCMD11801");var CCMD11810=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11810,"CCMD11810");var CCMD11811=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11811,"CCMD11811");var CCMD11820=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11820,"CCMD11820");var CCMD11821=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11821,"CCMD11821");var CCMD11830=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11830,"CCMD11830");var CCMD11831=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11831,"CCMD11831");var CCMD11900=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11900,"CCMD11900");var CCMD11901=function(){function e(){this.list=[{name:"vip_level",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11901,"CCMD11901");var CCMD11910=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD11910,"CCMD11910");var CCMD12000=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12000,"CCMD12000");var CCMD12001=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12001,"CCMD12001");var CCMD12002=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12002,"CCMD12002");var CCMD12100=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12100,"CCMD12100");var CCMD12101=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12101,"CCMD12101");var CCMD12102=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12102,"CCMD12102");var CCMD12103=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12103,"CCMD12103");var CCMD12104=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12104,"CCMD12104");var CCMD12105=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12105,"CCMD12105");var CCMD12106=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12106,"CCMD12106");var CCMD12200=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12200,"CCMD12200");var CCMD12201=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"slot",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12201,"CCMD12201");var CCMD12202=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12202,"CCMD12202");var CCMD12300=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12300,"CCMD12300");var CCMD12301=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"title_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12301,"CCMD12301");var CCMD12302=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"title_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12302,"CCMD12302");var CCMD12400=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12400,"CCMD12400");var CCMD12401=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"type_id",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12401,"CCMD12401");var CCMD12402=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"type_id",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12402,"CCMD12402");var CCMD12403=function(){function e(){this.list=[{name:"item_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12403,"CCMD12403");var CCMD12500=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12500,"CCMD12500");var CCMD12501=function(){function e(){this.list=[{name:"name",type:"string"},{name:"level",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12501,"CCMD12501");var CCMD12502=function(){function e(){this.list=[{name:"name",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12502,"CCMD12502");var CCMD12503=function(){function e(){this.list=[{name:"guild_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12503,"CCMD12503");var CCMD12504=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12504,"CCMD12504");var CCMD12505=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12505,"CCMD12505");var CCMD12506=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12506,"CCMD12506");var CCMD12507=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12507,"CCMD12507");var CCMD12508=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12508,"CCMD12508");var CCMD12509=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12509,"CCMD12509");var CCMD12510=function(){function e(){this.list=[{name:"position",type:"Int8"},{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12510,"CCMD12510");var CCMD12511=function(){function e(){this.list=[{name:"power",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12511,"CCMD12511");var CCMD12512=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12512,"CCMD12512");var CCMD12513=function(){function e(){this.list=[{name:"name",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12513,"CCMD12513");var CCMD12514=function(){function e(){this.list=[{name:"notice",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12514,"CCMD12514");var CCMD12515=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12515,"CCMD12515");var CCMD12516=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12516,"CCMD12516");var CCMD12517=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12517,"CCMD12517");var CCMD12519=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12519,"CCMD12519");var CCMD12520=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12520,"CCMD12520");var CCMD12521=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12521,"CCMD12521");var CCMD12522=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12522,"CCMD12522");var CCMD12600=function(){function e(){this.list=[{name:"parter_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12600,"CCMD12600");var CCMD12601=function(){function e(){this.list=[{name:"parter_id",type:"Int64"},{name:"skill_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12601,"CCMD12601");var CCMD12700=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12700,"CCMD12700");var CCMD12701=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12701,"CCMD12701");var CCMD12800=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12800,"CCMD12800");var CCMD12801=function(){function e(){this.list=[{name:"award_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12801,"CCMD12801");var CCMD12900=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12900,"CCMD12900");var CCMD12901=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD12901,"CCMD12901");var CCMD13000=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13000,"CCMD13000");var CCMD13010=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13010,"CCMD13010");var CCMD13020=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13020,"CCMD13020");var CCMD13100=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13100,"CCMD13100");var CCMD13101=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13101,"CCMD13101");var CCMD13102=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13102,"CCMD13102");var CCMD13110=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13110,"CCMD13110");var CCMD13111=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13111,"CCMD13111");var CCMD13112=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13112,"CCMD13112");var CCMD13200=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13200,"CCMD13200");var CCMD13201=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13201,"CCMD13201");var CCMD13202=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13202,"CCMD13202");var CCMD13203=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13203,"CCMD13203");var CCMD13300=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13300,"CCMD13300");var CCMD13301=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13301,"CCMD13301");var CCMD13302=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13302,"CCMD13302");var CCMD13303=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13303,"CCMD13303");var CCMD13304=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13304,"CCMD13304");var CCMD13400=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13400,"CCMD13400");var CCMD13401=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13401,"CCMD13401");var CCMD13410=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13410,"CCMD13410");var CCMD13411=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13411,"CCMD13411");var CCMD13420=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13420,"CCMD13420");var CCMD13421=function(){function e(){this.list=[{name:"red_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13421,"CCMD13421");var CCMD13422=function(){function e(){this.list=[{name:"red_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13422,"CCMD13422");var CCMD13500=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13500,"CCMD13500");var CCMD13501=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13501,"CCMD13501");var CCMD13502=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13502,"CCMD13502");var CCMD13503=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13503,"CCMD13503");var CCMD13600=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13600,"CCMD13600");var CCMD13601=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13601,"CCMD13601");var CCMD13602=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13602,"CCMD13602");var CCMD13603=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13603,"CCMD13603");var CCMD13700=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13700,"CCMD13700");var CCMD13701=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13701,"CCMD13701");var CCMD13702=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13702,"CCMD13702");var CCMD13710=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13710,"CCMD13710");var CCMD13800=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13800,"CCMD13800");var CCMD13801=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13801,"CCMD13801");var CCMD13810=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13810,"CCMD13810");var CCMD13811=function(){function e(){this.treasure_item=[NodeTreasure_item],this.list=[{name:"treasure_item",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13811,"CCMD13811");var CCMD13812=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13812,"CCMD13812");var CCMD13820=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13820,"CCMD13820");var CCMD13821=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13821,"CCMD13821");var CCMD13830=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13830,"CCMD13830");var CCMD13900=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"slot",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13900,"CCMD13900");var CCMD13901=function(){function e(){this.list=[{name:"item_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD13901,"CCMD13901");var CCMD14000=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"slot",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14000,"CCMD14000");var CCMD14001=function(){function e(){this.list=[{name:"item_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14001,"CCMD14001");var CCMD14100=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14100,"CCMD14100");var CCMD14101=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"award_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14101,"CCMD14101");var CCMD14200=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14200,"CCMD14200");var CCMD14201=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"award_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14201,"CCMD14201");var CCMD14300=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14300,"CCMD14300");var CCMD14310=function(){function e(){this.list=[{name:"template_id",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14310,"CCMD14310");var CCMD14311=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14311,"CCMD14311");var CCMD14320=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14320,"CCMD14320");var CCMD14400=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14400,"CCMD14400");var CCMD14401=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14401,"CCMD14401");var CCMD14402=function(){function e(){this.list=[{name:"template_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14402,"CCMD14402");var CCMD14410=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14410,"CCMD14410");var CCMD14500=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14500,"CCMD14500");var CCMD14501=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14501,"CCMD14501");var CCMD14502=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14502,"CCMD14502");var CCMD14600=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14600,"CCMD14600");var CCMD14700=function(){function e(){this.list=[{name:"parter_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14700,"CCMD14700");var CCMD14701=function(){function e(){this.list=[{name:"parter_id",type:"Int64"},{name:"item_id",type:"Int64"},{name:"slot",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14701,"CCMD14701");var CCMD14702=function(){function e(){this.list=[{name:"parter_id",type:"Int64"},{name:"slot",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14702,"CCMD14702");var CCMD14703=function(){function e(){this.list=[{name:"parter_id",type:"Int64"},{name:"slot",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14703,"CCMD14703");var CCMD14800=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14800,"CCMD14800");var CCMD14810=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14810,"CCMD14810");var CCMD14811=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14811,"CCMD14811");var CCMD14820=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14820,"CCMD14820");var CCMD14900=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14900,"CCMD14900");var CCMD14901=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14901,"CCMD14901");var CCMD14902=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14902,"CCMD14902");var CCMD14903=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14903,"CCMD14903");var CCMD14904=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14904,"CCMD14904");var CCMD14905=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14905,"CCMD14905");var CCMD14910=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14910,"CCMD14910");var CCMD14920=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD14920,"CCMD14920");var CCMD15000=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15000,"CCMD15000");var CCMD15001=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15001,"CCMD15001");var CCMD15010=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15010,"CCMD15010");var CCMD15100=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15100,"CCMD15100");var CCMD15101=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15101,"CCMD15101");var CCMD15102=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15102,"CCMD15102");var CCMD15200=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15200,"CCMD15200");var CCMD15201=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15201,"CCMD15201");var CCMD15202=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15202,"CCMD15202");var CCMD15203=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15203,"CCMD15203");var CCMD15210=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15210,"CCMD15210");var CCMD15211=function(){function e(){this.siege_depot_allots=[NodeSiege_depot_allots],this.list=[{name:"siege_depot_allots",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15211,"CCMD15211");var CCMD15220=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15220,"CCMD15220");var CCMD15230=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15230,"CCMD15230");var CCMD15240=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15240,"CCMD15240");var CCMD15310=function(){function e(){this.list=[]
}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15310,"CCMD15310");var CCMD15400=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15400,"CCMD15400");var CCMD15410=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15410,"CCMD15410");var CCMD15411=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15411,"CCMD15411");var CCMD15412=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15412,"CCMD15412");var CCMD15413=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15413,"CCMD15413");var CCMD15420=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15420,"CCMD15420");var CCMD15500=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15500,"CCMD15500");var CCMD15501=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15501,"CCMD15501");var CCMD15502=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15502,"CCMD15502");var CCMD15510=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15510,"CCMD15510");var CCMD15520=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15520,"CCMD15520");var CCMD15521=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15521,"CCMD15521");var CCMD15600=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15600,"CCMD15600");var CCMD15601=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15601,"CCMD15601");var CCMD15602=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15602,"CCMD15602");var CCMD15610=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15610,"CCMD15610");var CCMD15611=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15611,"CCMD15611");var CCMD15612=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15612,"CCMD15612");var CCMD15620=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15620,"CCMD15620");var CCMD15630=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15630,"CCMD15630");var CCMD15700=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15700,"CCMD15700");var CCMD15701=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15701,"CCMD15701");var CCMD15800=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15800,"CCMD15800");var CCMD15900=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15900,"CCMD15900");var CCMD15901=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD15901,"CCMD15901");var CCMD16000=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16000,"CCMD16000");var CCMD16001=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16001,"CCMD16001");var CCMD16100=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16100,"CCMD16100");var CCMD16200=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16200,"CCMD16200");var CCMD16201=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16201,"CCMD16201");var CCMD16202=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16202,"CCMD16202");var CCMD16203=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16203,"CCMD16203");var CCMD16204=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16204,"CCMD16204");var CCMD16205=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16205,"CCMD16205");var CCMD16206=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16206,"CCMD16206");var CCMD16210=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16210,"CCMD16210");var CCMD16211=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16211,"CCMD16211");var CCMD16220=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16220,"CCMD16220");var CCMD16221=function(){function e(){this.list=[{name:"log_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16221,"CCMD16221");var CCMD16222=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16222,"CCMD16222");var CCMD16300=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16300,"CCMD16300");var CCMD16301=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16301,"CCMD16301");var CCMD16302=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16302,"CCMD16302");var CCMD16303=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16303,"CCMD16303");var CCMD16304=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16304,"CCMD16304");var CCMD16310=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16310,"CCMD16310");var CCMD16311=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16311,"CCMD16311");var CCMD16400=function(){function e(){this.list=[{name:"open_day",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16400,"CCMD16400");var CCMD16500=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16500,"CCMD16500");var CCMD16600=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16600,"CCMD16600");var CCMD16601=function(){function e(){this.list=[{name:"open_day",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16601,"CCMD16601");var CCMD16700=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16700,"CCMD16700");var CCMD16701=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16701,"CCMD16701");var CCMD16800=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16800,"CCMD16800");var CCMD16801=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16801,"CCMD16801");var CCMD16900=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16900,"CCMD16900");var CCMD16901=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16901,"CCMD16901");var CCMD16910=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD16910,"CCMD16910");var CCMD17000=function(){function e(){this.list=[{name:"cfg_id",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17000,"CCMD17000");var CCMD17100=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17100,"CCMD17100");var CCMD17101=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17101,"CCMD17101");var CCMD17110=function(){function e(){this.list=[{name:"grid_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17110,"CCMD17110");var CCMD17200=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17200,"CCMD17200");var CCMD17201=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17201,"CCMD17201");var CCMD17300=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17300,"CCMD17300");var CCMD17310=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17310,"CCMD17310");var CCMD17400=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17400,"CCMD17400");var CCMD17401=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17401,"CCMD17401");var CCMD17500=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17500,"CCMD17500");var CCMD17501=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17501,"CCMD17501");var CCMD17502=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17502,"CCMD17502");var CCMD17510=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17510,"CCMD17510");var CCMD17600=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17600,"CCMD17600");var CCMD17601=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"award_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17601,"CCMD17601");var CCMD17700=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17700,"CCMD17700");var CCMD17701=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17701,"CCMD17701");var CCMD17800=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17800,"CCMD17800");var CCMD17801=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"gift_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17801,"CCMD17801");var CCMD17900=function(){function e(){this.list=[{name:"award_id",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD17900,"CCMD17900");var CCMD18000=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18000,"CCMD18000");var CCMD18001=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18001,"CCMD18001");var CCMD18010=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18010,"CCMD18010");var CCMD18011=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18011,"CCMD18011");var CCMD18012=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18012,"CCMD18012");var CCMD18013=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18013,"CCMD18013");var CCMD18020=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18020,"CCMD18020");var CCMD18030=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18030,"CCMD18030");var CCMD18031=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18031,"CCMD18031");var CCMD18100=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18100,"CCMD18100");var CCMD18101=function(){function e(){this.list=[{name:"rmb",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18101,"CCMD18101");var CCMD18110=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18110,"CCMD18110");var CCMD18200=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18200,"CCMD18200");var CCMD18201=function(){function e(){this.list=[{name:"cfg_id",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18201,"CCMD18201");var CCMD18300=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18300,"CCMD18300");var CCMD18301=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18301,"CCMD18301");var CCMD18310=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18310,"CCMD18310");var CCMD18311=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18311,"CCMD18311");var CCMD18320=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18320,"CCMD18320");var CCMD18330=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18330,"CCMD18330");var CCMD18331=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18331,"CCMD18331");var CCMD18332=function(){function e(){this.list=[{name:"rank",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18332,"CCMD18332");var CCMD18400=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"activity_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18400,"CCMD18400");var CCMD18500=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18500,"CCMD18500");var CCMD18501=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18501,"CCMD18501");var CCMD18600=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18600,"CCMD18600");var CCMD18601=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18601,"CCMD18601");var CCMD18700=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18700,"CCMD18700");var CCMD18701=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18701,"CCMD18701");var CCMD18702=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18702,"CCMD18702");var CCMD18800=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18800,"CCMD18800");var CCMD18801=function(){function e(){this.list=[{name:"gift_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18801,"CCMD18801");var CCMD18900=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD18900,"CCMD18900");var CCMD19000=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19000,"CCMD19000");var CCMD19001=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19001,"CCMD19001");var CCMD19100=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19100,"CCMD19100");var CCMD19101=function(){function e(){this.list=[{name:"cfg_id",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19101,"CCMD19101");var CCMD19400=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19400,"CCMD19400");var CCMD19410=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19410,"CCMD19410");var CCMD19420=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19420,"CCMD19420");var CCMD19430=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19430,"CCMD19430");var CCMD19431=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19431,"CCMD19431");var CCMD19500=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19500,"CCMD19500");var CCMD19600=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19600,"CCMD19600");var CCMD19601=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"good_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19601,"CCMD19601");var CCMD19602=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"good_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19602,"CCMD19602");var CCMD19700=function(){function e(){this.list=[{name:"tar_role_id",type:"Int64"},{name:"item_cfgid",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19700,"CCMD19700");var CCMD19710=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19710,"CCMD19710");var CCMD19800=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19800,"CCMD19800");var CCMD19801=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19801,"CCMD19801");var CCMD19802=function(){function e(){this.list=[{name:"item_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19802,"CCMD19802");var CCMD19900=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19900,"CCMD19900");var CCMD19901=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"slot",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19901,"CCMD19901");var CCMD19902=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19902,"CCMD19902");var CCMD19903=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD19903,"CCMD19903");var CCMD20000=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20000,"CCMD20000");var CCMD20100=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20100,"CCMD20100");var CCMD20101=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20101,"CCMD20101");var CCMD20110=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20110,"CCMD20110");var CCMD20120=function(){function e(){this.list=[{name:"template_id",type:"Int32"},{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20120,"CCMD20120");var CCMD20300=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20300,"CCMD20300");var CCMD20301=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"item_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20301,"CCMD20301");var CCMD20302=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"slot_id",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20302,"CCMD20302");var CCMD20310=function(){function e(){this.item_ids=[NodeItem_ids],this.list=[{name:"cfg_id",type:"Int32"},{name:"item_ids",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20310,"CCMD20310");var CCMD20400=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20400,"CCMD20400");var CCMD20410=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20410,"CCMD20410");var CCMD20500=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20500,"CCMD20500");var CCMD20510=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20510,"CCMD20510");var CCMD20520=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20520,"CCMD20520");var CCMD20530=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20530,"CCMD20530");var CCMD20600=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20600,"CCMD20600");var CCMD20610=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20610,"CCMD20610");var CCMD20700=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20700,"CCMD20700");var CCMD20710=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20710,"CCMD20710");var CCMD20720=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20720,"CCMD20720");var CCMD20730=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20730,"CCMD20730");var CCMD20800=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20800,"CCMD20800");var CCMD20900=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20900,"CCMD20900");var CCMD20901=function(){function e(){this.friend_exs=[NodeFriend_exs],this.list=[{name:"friend_exs",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD20901,"CCMD20901");var CCMD21000=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21000,"CCMD21000");var CCMD21001=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21001,"CCMD21001");var CCMD21010=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21010,"CCMD21010");var CCMD21100=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21100,"CCMD21100");var CCMD21101=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21101,"CCMD21101");var CCMD21200=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21200,"CCMD21200");var CCMD21300=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21300,"CCMD21300");var CCMD21400=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21400,"CCMD21400");var CCMD21410=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21410,"CCMD21410");var CCMD21500=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21500,"CCMD21500");var CCMD21600=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21600,"CCMD21600");var CCMD21601=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21601,"CCMD21601");var CCMD21700=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21700,"CCMD21700");var CCMD21701=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"award_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21701,"CCMD21701");var CCMD21800=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21800,"CCMD21800");var CCMD21900=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21900,"CCMD21900");var CCMD21901=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"slot",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD21901,"CCMD21901");var CCMD22000=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22000,"CCMD22000");var CCMD22100=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22100,"CCMD22100");var CCMD22200=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22200,"CCMD22200");var CCMD22210=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22210,"CCMD22210");var CCMD22300=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22300,"CCMD22300");var CCMD22310=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22310,"CCMD22310");var CCMD22311=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22311,"CCMD22311");var CCMD22400=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22400,"CCMD22400");var CCMD22410=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22410,"CCMD22410");var CCMD22500=function(){function e(){this.list=[{name:"type",type:"Int32"},{name:"sub_type",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22500,"CCMD22500");var CCMD22501=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22501,"CCMD22501");var CCMD22510=function(){function e(){this.list=[{name:"item_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22510,"CCMD22510");var CCMD22511=function(){function e(){this.list=[{name:"shop_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22511,"CCMD22511");var CCMD22520=function(){function e(){this.list=[{name:"shop_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22520,"CCMD22520");var CCMD22600=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22600,"CCMD22600");var CCMD22610=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22610,"CCMD22610");var CCMD22700=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22700,"CCMD22700");var CCMD22710=function(){function e(){this.list=[{name:"shop_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22710,"CCMD22710");var CCMD22800=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22800,"CCMD22800");var CCMD22801=function(){function e(){this.list=[{name:"tem_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22801,"CCMD22801");var CCMD22810=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22810,"CCMD22810");var CCMD22900=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22900,"CCMD22900");var CCMD22910=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22910,"CCMD22910");var CCMD22920=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD22920,"CCMD22920");var CCMD23000=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23000,"CCMD23000");var CCMD23010=function(){function e(){this.list=[{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23010,"CCMD23010");var CCMD23100=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23100,"CCMD23100");var CCMD23110=function(){function e(){this.list=[{name:"type_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23110,"CCMD23110");var CCMD23200=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23200,"CCMD23200");var CCMD23210=function(){function e(){this.list=[{name:"pet_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23210,"CCMD23210");var CCMD23220=function(){function e(){this.list=[{name:"pet_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23220,"CCMD23220");var CCMD23230=function(){function e(){this.list=[{name:"pet_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23230,"CCMD23230");var CCMD23240=function(){function e(){this.list=[{name:"pet_id",type:"Int32"}]}var t=(__define,e);
t.prototype;return e}();egret.registerClass(CCMD23240,"CCMD23240");var CCMD23300=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23300,"CCMD23300");var CCMD23310=function(){function e(){this.list=[{name:"pet_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23310,"CCMD23310");var CCMD23320=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23320,"CCMD23320");var CCMD23400=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23400,"CCMD23400");var CCMD23401=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"type_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23401,"CCMD23401");var CCMD23402=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"type_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23402,"CCMD23402");var CCMD23410=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23410,"CCMD23410");var CCMD23500=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23500,"CCMD23500");var CCMD23600=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"shop_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23600,"CCMD23600");var CCMD23700=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23700,"CCMD23700");var CCMD23701=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"slot",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23701,"CCMD23701");var CCMD23702=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23702,"CCMD23702");var CCMD23703=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23703,"CCMD23703");var CCMD23800=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23800,"CCMD23800");var CCMD23801=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23801,"CCMD23801");var CCMD23802=function(){function e(){this.list=[{name:"type",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23802,"CCMD23802");var CCMD23900=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23900,"CCMD23900");var CCMD23910=function(){function e(){this.list=[{name:"plat_name",type:"string"},{name:"tar_role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD23910,"CCMD23910");var CCMD24000=function(){function e(){this.list=[{name:"cfg_id",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24000,"CCMD24000");var CCMD24010=function(){function e(){this.list=[{name:"cfg_id",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24010,"CCMD24010");var CCMD24020=function(){function e(){this.list=[{name:"cfg_id",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24020,"CCMD24020");var CCMD24030=function(){function e(){this.list=[{name:"cfg_id",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24030,"CCMD24030");var CCMD24040=function(){function e(){this.list=[{name:"cfg_id",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24040,"CCMD24040");var CCMD24100=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24100,"CCMD24100");var CCMD24101=function(){function e(){this.list=[{name:"weapon_type",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24101,"CCMD24101");var CCMD24102=function(){function e(){this.list=[{name:"weapon_type",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24102,"CCMD24102");var CCMD24103=function(){function e(){this.list=[{name:"weapon_type",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24103,"CCMD24103");var CCMD24104=function(){function e(){this.list=[{name:"weapon_type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24104,"CCMD24104");var CCMD24200=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24200,"CCMD24200");var CCMD24201=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24201,"CCMD24201");var CCMD24300=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24300,"CCMD24300");var CCMD24500=function(){function e(){this.list=[{name:"type",type:"Int32"},{name:"number",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24500,"CCMD24500");var CCMD24600=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24600,"CCMD24600");var CCMD24601=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24601,"CCMD24601");var CCMD24602=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24602,"CCMD24602");var CCMD24603=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24603,"CCMD24603");var CCMD24610=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24610,"CCMD24610");var CCMD24620=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24620,"CCMD24620");var CCMD24621=function(){function e(){this.list=[{name:"obj_type",type:"Int8"},{name:"plat_name",type:"string"},{name:"obj_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24621,"CCMD24621");var CCMD24630=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24630,"CCMD24630");var CCMD24700=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24700,"CCMD24700");var CCMD24710=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(CCMD24710,"CCMD24710");var NodeAccessorys=function(){function e(){this.list=[{name:"type",type:"Int32"},{name:"value",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAccessorys,"NodeAccessorys");var NodeAccount_list=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"role_state",type:"Int8"},{name:"role_career",type:"Int8"},{name:"role_sex",type:"Int8"},{name:"role_level",type:"Int16"},{name:"role_round",type:"Int16"},{name:"role_name",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAccount_list,"NodeAccount_list");var NodeAchievement_list=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"template_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAchievement_list,"NodeAchievement_list");var NodeAct_bowl_list=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_bowl_list,"NodeAct_bowl_list");var NodeAct_daily_awards=function(){function e(){this.list=[{name:"award_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_daily_awards,"NodeAct_daily_awards");var NodeAct_fl_list=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_fl_list,"NodeAct_fl_list");var NodeAct_flcj_list=function(){function e(){this.list=[{name:"name",type:"string"},{name:"item_id",type:"Int32"},{name:"num",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_flcj_list,"NodeAct_flcj_list");var NodeAct_flcj_logs=function(){function e(){this.list=[{name:"content",type:"string"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_flcj_logs,"NodeAct_flcj_logs");var NodeAct_flegg_list=function(){function e(){this.list=[{name:"slot",type:"Int8"},{name:"cfg_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_flegg_list,"NodeAct_flegg_list");var NodeAct_flfish_list=function(){function e(){this.list=[{name:"slot",type:"Int8"},{name:"cfg_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_flfish_list,"NodeAct_flfish_list");var NodeAct_fllc_list=function(){function e(){this.list=[{name:"award_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_fllc_list,"NodeAct_fllc_list");var NodeAct_flluck_goods=function(){function e(){this.list=[{name:"good_id",type:"Int32"},{name:"num",type:"Int8"},{name:"rand_gold",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_flluck_goods,"NodeAct_flluck_goods");var NodeAct_flxf_list=function(){function e(){this.list=[{name:"award_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_flxf_list,"NodeAct_flxf_list");var NodeAct_flxg_list=function(){function e(){this.list=[{name:"gift_id",type:"Int32"},{name:"num",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_flxg_list,"NodeAct_flxg_list");var NodeAct_flzp_list=function(){function e(){this.list=[{name:"type_id",type:"Int32"},{name:"is_nei",type:"Int8"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_flzp_list,"NodeAct_flzp_list");var NodeAct_flzp_logs=function(){function e(){this.list=[{name:"content",type:"string"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_flzp_logs,"NodeAct_flzp_logs");var NodeAct_hfexchange_list=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"},{name:"num",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_hfexchange_list,"NodeAct_hfexchange_list");var NodeAct_hfxg_list=function(){function e(){this.list=[{name:"gift_id",type:"Int32"},{name:"num",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_hfxg_list,"NodeAct_hfxg_list");var NodeAct_order_gifts=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_order_gifts,"NodeAct_order_gifts");var NodeAct_target_awards=function(){function e(){this.list=[{name:"award_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAct_target_awards,"NodeAct_target_awards");var NodeAppearance=function(){function e(){this.list=[{name:"key",type:"Int8"},{name:"value",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAppearance,"NodeAppearance");var NodeArtifact_list=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"level",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeArtifact_list,"NodeArtifact_list");var NodeAtt_roles=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"icon",type:"Int32"},{name:"name",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAtt_roles,"NodeAtt_roles");var NodeAttr=function(){function e(){this.list=[{name:"id",type:"Int8"},{name:"val",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAttr,"NodeAttr");var NodeAwake_souls=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"level",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeAwake_souls,"NodeAwake_souls");var NodeBattle_result=function(){function e(){this.list=[{name:"plat_name",type:"string"},{name:"obj_id",type:"Int64"},{name:"obj_type",type:"Int8"},{name:"show_type",type:"Int8"},{name:"hurt",type:"Int64"},{name:"hp",type:"Int64"},{name:"max_hp",type:"Int64"},{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBattle_result,"NodeBattle_result");var NodeBless_awards=function(){function e(){this.list=[{name:"obj_id",type:"Int32"},{name:"obj_type",type:"Int8"},{name:"num",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBless_awards,"NodeBless_awards");var NodeBless_buffs=function(){function e(){this.list=[{name:"buff_id",type:"Int32"},{name:"type",type:"Int32"},{name:"last_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBless_buffs,"NodeBless_buffs");var NodeBoss_all_hits=function(){function e(){this.list=[{name:"name",type:"string"},{name:"hit",type:"Int64"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBoss_all_hits,"NodeBoss_all_hits");var NodeBoss_all_kills=function(){function e(){this.list=[{name:"name",type:"string"},{name:"power",type:"Int64"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBoss_all_kills,"NodeBoss_all_kills");var NodeBoss_all_notices=function(){function e(){this.list=[{name:"template_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBoss_all_notices,"NodeBoss_all_notices");var NodeBoss_alls=function(){function e(){this.boss_all_hits=[NodeBoss_all_hits],this.boss_all_kills=[NodeBoss_all_kills],this.list=[{name:"template_id",type:"Int32"},{name:"hp_rate",type:"Int8"},{name:"last_time",type:"Int32"},{name:"boss_all_hits",type:"array"},{name:"boss_all_kills",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBoss_alls,"NodeBoss_alls");var NodeBoss_elites=function(){function e(){this.list=[{name:"template_id",type:"Int32"},{name:"last_time",type:"Int32"},{name:"hit_num",type:"Int16"},{name:"own_name",type:"string"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBoss_elites,"NodeBoss_elites");var NodeBoss_fields=function(){function e(){this.list=[{name:"template_id",type:"Int32"},{name:"last_time",type:"Int32"},{name:"hit_num",type:"Int16"},{name:"own_name",type:"string"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBoss_fields,"NodeBoss_fields");var NodeBoss_guild_hits=function(){function e(){this.list=[{name:"name",type:"string"},{name:"hit",type:"Int64"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBoss_guild_hits,"NodeBoss_guild_hits");var NodeBoss_guild_kills=function(){function e(){this.list=[{name:"name",type:"string"},{name:"power",type:"Int64"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBoss_guild_kills,"NodeBoss_guild_kills");var NodeBoss_guilds=function(){function e(){this.boss_guild_hits=[NodeBoss_guild_hits],this.boss_guild_kills=[NodeBoss_guild_kills],this.list=[{name:"template_id",type:"Int32"},{name:"hp_rate",type:"Int8"},{name:"last_time",type:"Int32"},{name:"boss_guild_hits",type:"array"},{name:"boss_guild_kills",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBoss_guilds,"NodeBoss_guilds");var NodeBoss_homes=function(){function e(){this.list=[{name:"template_id",type:"Int32"},{name:"last_time",type:"Int32"},{name:"hit_num",type:"Int16"},{name:"own_name",type:"string"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBoss_homes,"NodeBoss_homes");var NodeBoss_round_hits=function(){function e(){this.list=[{name:"name",type:"string"},{name:"hit",type:"Int64"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBoss_round_hits,"NodeBoss_round_hits");var NodeBoss_rounds=function(){function e(){this.boss_round_hits=[NodeBoss_round_hits],this.list=[{name:"template_id",type:"Int32"},{name:"is_kill",type:"Int8"},{name:"boss_round_hits",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBoss_rounds,"NodeBoss_rounds");var NodeBowl_buys=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"award_id",type:"Int8"},{name:"buy_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBowl_buys,"NodeBowl_buys");var NodeBuff_list=function(){function e(){this.list=[{name:"buff_id",type:"Int32"},{name:"buff_time",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeBuff_list,"NodeBuff_list");var NodeCharge_double_awards=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeCharge_double_awards,"NodeCharge_double_awards");var NodeChatguild_list=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"month_vip",type:"Int8"},{name:"life_vip",type:"Int8"},{name:"vip",type:"Int8"},{name:"position",type:"Int8"},{name:"content",type:"string"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeChatguild_list,"NodeChatguild_list");var NodeChatsvr_list=function(){function e(){this.list=[{name:"type_str",type:"string"},{name:"content",type:"string"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeChatsvr_list,"NodeChatsvr_list");var NodeChatworld_list=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"month_vip",type:"Int8"},{name:"life_vip",type:"Int8"},{name:"vip",type:"Int8"},{name:"king_lv",type:"Int8"},{name:"kf_bugle",type:"Int8"},{name:"content",type:"string"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeChatworld_list,"NodeChatworld_list");var NodeDaily_nums=function(){function e(){this.list=[{name:"type",type:"Int32"},{name:"sub_type",type:"Int64"},{name:"value",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeDaily_nums,"NodeDaily_nums");var NodeDark_logs=function(){function e(){this.list=[{name:"bat_type",type:"Int8"},{name:"bat_ret",type:"Int8"},{name:"tar_name",type:"string"},{name:"grid_id",type:"Int32"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeDark_logs,"NodeDark_logs");var NodeDel_itemids=function(){function e(){this.list=[{name:"item_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeDel_itemids,"NodeDel_itemids");var NodeDominate_list=function(){function e(){this.list=[{name:"type_id",type:"Int8"},{name:"level",type:"Int16"},{name:"star",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeDominate_list,"NodeDominate_list");var NodeDrop_list=function(){function e(){this.list=[{name:"asset_id",type:"Int32"},{name:"value",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeDrop_list,"NodeDrop_list");var NodeEconomy=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"value",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeEconomy,"NodeEconomy");var NodeEgg_drop_list=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"slot",type:"Int8"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeEgg_drop_list,"NodeEgg_drop_list");var NodeEnter_last_time=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"num",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeEnter_last_time,"NodeEnter_last_time");var NodeFamous_ranks=function(){function e(){this.list=[{name:"open_day",type:"Int8"},{name:"rank",type:"Int16"},{name:"role_id",type:"Int64"},{name:"role_name",type:"string"},{name:"value",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeFamous_ranks,"NodeFamous_ranks");var NodeFashion_list=function(){function e(){this.list=[{name:"template_id",type:"Int32"},{name:"last_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeFashion_list,"NodeFashion_list");var NodeFeat_skills=function(){function e(){this.list=[{name:"slot",type:"Int8"},{name:"skill_id",type:"Int16"},{name:"level",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeFeat_skills,"NodeFeat_skills");var NodeFirst_charge_awards=function(){function e(){this.list=[{name:"award_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeFirst_charge_awards,"NodeFirst_charge_awards");var NodeFish_drop_list=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"slot",type:"Int8"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeFish_drop_list,"NodeFish_drop_list");var NodeFixed_nums=function(){function e(){this.list=[{name:"type",type:"Int32"},{name:"sub_type",type:"Int64"},{name:"value",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeFixed_nums,"NodeFixed_nums");var NodeForge_list=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"level",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeForge_list,"NodeForge_list");var NodeForge_mind_list=function(){function e(){this.list=[{name:"slot",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeForge_mind_list,"NodeForge_mind_list");var NodeFriend_exs=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeFriend_exs,"NodeFriend_exs");var NodeFriend_list=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"round",type:"Int8"},{name:"level",type:"Int16"},{name:"power",type:"Int64"},{name:"type",type:"Int8"},{name:"LogoffTime",type:"Int32"},{name:"LatelyTime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeFriend_list,"NodeFriend_list");var NodeFund_awards=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeFund_awards,"NodeFund_awards");var NodeGuild_applys=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"power",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeGuild_applys,"NodeGuild_applys");var NodeGuild_build_list=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"level",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeGuild_build_list,"NodeGuild_build_list");var NodeGuild_donate_logs=function(){function e(){this.list=[{name:"id",type:"Int32"},{name:"content",type:"string"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeGuild_donate_logs,"NodeGuild_donate_logs");var NodeGuild_farm_logs=function(){function e(){this.list=[{name:"content",type:"string"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeGuild_farm_logs,"NodeGuild_farm_logs");var NodeGuild_farms=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"round",type:"Int16"},{name:"is_water",type:"Int8"},{name:"is_steal",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeGuild_farms,"NodeGuild_farms");var NodeGuild_fuben_sorts=function(){function e(){this.list=[{name:"rank",type:"Int16"},{name:"role_id",type:"Int64"},{name:"Name",type:"string"},{name:"pass_num",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeGuild_fuben_sorts,"NodeGuild_fuben_sorts");var NodeGuild_invades=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeGuild_invades,"NodeGuild_invades");var NodeGuild_list=function(){function e(){this.list=[{name:"guild_id",type:"Int64"},{name:"level",type:"Int8"},{name:"name",type:"string"},{name:"chief_role_id",type:"Int64"},{name:"chief_role_name",type:"string"},{name:"num",type:"Int8"},{name:"power",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeGuild_list,"NodeGuild_list");var NodeGuild_logs=function(){function e(){this.list=[{name:"content",type:"string"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeGuild_logs,"NodeGuild_logs");var NodeGuild_members=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"position",type:"Int8"},{name:"donate_total",type:"Int32"},{name:"power",type:"Int64"},{name:"offline_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeGuild_members,"NodeGuild_members");var NodeGuild_red_gets=function(){function e(){this.list=[{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"coin",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeGuild_red_gets,"NodeGuild_red_gets");var NodeGuild_reds=function(){function e(){this.list=[{name:"id",type:"Int32"},{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"last_coin",type:"Int32"},{name:"last_num",type:"Int16"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeGuild_reds,"NodeGuild_reds");var NodeGuild_shop_logs=function(){function e(){this.list=[{name:"name",type:"string"},{name:"item_id",type:"Int32"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeGuild_shop_logs,"NodeGuild_shop_logs");var NodeGuild_skillrooms=function(){function e(){this.list=[{name:"skill_id",type:"Int32"},{name:"level",type:"Int16"},{name:"exp",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeGuild_skillrooms,"NodeGuild_skillrooms");var NodeHarry_list=function(){function e(){this.list=[{name:"role_name",type:"string"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeHarry_list,"NodeHarry_list");var NodeHfcharge_awards=function(){function e(){this.list=[{name:"cfg_id",type:"Int8"},{name:"total_charge",type:"Int32"},{name:"flag",type:"Int8"},{name:"spec_flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeHfcharge_awards,"NodeHfcharge_awards");var NodeItem=function(){function e(){this.list=[{name:"item_id",type:"Int64"},{name:"partner_id",type:"Int64"},{name:"template_id",type:"Int32"},{name:"location",type:"Int8"},{name:"slot",type:"Int8"},{name:"num",type:"Int32"},{name:"rand_attr",type:"Int32"},{name:"rand_awake",type:"Int32"},{name:"last_sec",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeItem,"NodeItem");var NodeItem_ids=function(){function e(){this.list=[{name:"item_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeItem_ids,"NodeItem_ids");var NodeKfboss_awake_hits=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"name",type:"string"},{name:"hit",type:"Int64"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeKfboss_awake_hits,"NodeKfboss_awake_hits");var NodeKfboss_awake_kills=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"name",type:"string"},{name:"power",type:"Int64"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeKfboss_awake_kills,"NodeKfboss_awake_kills");var NodeKfboss_awakes=function(){function e(){this.kfboss_awake_hits=[NodeKfboss_awake_hits],this.kfboss_awake_kills=[NodeKfboss_awake_kills],this.list=[{name:"template_id",type:"Int32"},{name:"hp_rate",type:"Int8"},{name:"kfboss_awake_hits",type:"array"},{name:"kfboss_awake_kills",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeKfboss_awakes,"NodeKfboss_awakes");var NodeKfcharge_awards=function(){function e(){this.list=[{name:"open_day",type:"Int16"},{name:"flag",type:"Int8"},{name:"spec_flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeKfcharge_awards,"NodeKfcharge_awards");var NodeKfkiller_attacks=function(){function e(){this.list=[{name:"obj_type",type:"Int8"},{name:"plat_name",type:"string"},{name:"obj_id",type:"Int64"},{name:"icon",type:"Int32"},{name:"name",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeKfkiller_attacks,"NodeKfkiller_attacks");var NodeKfkiller_scores=function(){function e(){this.list=[{name:"rank_id",type:"Int16"},{name:"guild_name",type:"string"},{name:"role_id",type:"Int64"},{name:"role_name",type:"string"},{name:"score",type:"Int32"},{name:"kill_num",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeKfkiller_scores,"NodeKfkiller_scores");var NodeKfrecharge_awards=function(){function e(){this.list=[{name:"cfg_id",type:"Int16"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeKfrecharge_awards,"NodeKfrecharge_awards");var NodeKing_ranks=function(){function e(){this.list=[{name:"rank",type:"Int32"},{name:"role_id",type:"Int64"},{name:"role_name",type:"string"},{name:"level",type:"Int8"},{name:"exp",type:"Int8"},{name:"win_num",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeKing_ranks,"NodeKing_ranks");var NodeLegend_suits=function(){function e(){this.list=[{name:"slot",type:"Int8"},{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeLegend_suits,"NodeLegend_suits");var NodeMail_list=function(){function e(){this.accessorys=[NodeAccessorys],this.list=[{name:"mail_id",type:"Int64"},{name:"mail_title",type:"string"},{name:"mail_content",type:"string"},{name:"accessorys",type:"array"},{name:"mail_read",type:"Int8"},{name:"mail_award",type:"Int8"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeMail_list,"NodeMail_list");var NodeMarket_items=function(){function e(){this.list=[{name:"shop_id",type:"Int32"},{name:"cfg_id",type:"Int32"},{name:"num",type:"Int32"},{name:"rand_attr",type:"Int32"},{name:"rand_awake",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeMarket_items,"NodeMarket_items");var NodeMeet_pk_logs=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"role_id",type:"Int64"},{name:"name",type:"string"},{name:"flag",type:"Int8"},{name:"ctime",type:"Int32"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeMeet_pk_logs,"NodeMeet_pk_logs");var NodeMeet_roles=function(){function e(){this.partner_list=[NodePartner_list],this.list=[{name:"role_id",type:"Int64"},{name:"name",type:"string"},{name:"icon",type:"Int32"},{name:"round",type:"Int8"},{name:"level",type:"Int16"},{name:"partner_list",type:"array"}]
}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeMeet_roles,"NodeMeet_roles");var NodeMine_logs=function(){function e(){this.list=[{name:"log_id",type:"Int64"},{name:"cfgid",type:"Int32"},{name:"type",type:"Int8"},{name:"role_id",type:"Int64"},{name:"name",type:"string"},{name:"icon",type:"Int32"},{name:"power",type:"Int64"},{name:"revenge",type:"Int8"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeMine_logs,"NodeMine_logs");var NodeMines=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"mine_cfgid",type:"Int32"},{name:"role_name",type:"string"},{name:"last_time",type:"Int32"},{name:"is_harry",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeMines,"NodeMines");var NodeMon_ids=function(){function e(){this.list=[{name:"mon_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeMon_ids,"NodeMon_ids");var NodeObj_hp_change=function(){function e(){this.list=[{name:"plat_name",type:"string"},{name:"obj_id",type:"Int64"},{name:"obj_type",type:"Int8"},{name:"hp",type:"Int64"},{name:"max_hp",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeObj_hp_change,"NodeObj_hp_change");var NodeOrange_suits=function(){function e(){this.list=[{name:"slot",type:"Int8"},{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeOrange_suits,"NodeOrange_suits");var NodeOrder_gifts=function(){function e(){this.list=[{name:"tem_id",type:"Int32"},{name:"flag",type:"Int8"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeOrder_gifts,"NodeOrder_gifts");var NodePartner_ids=function(){function e(){this.list=[{name:"plat_name",type:"string"},{name:"partner_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodePartner_ids,"NodePartner_ids");var NodePartner_list=function(){function e(){this.skill=[NodeSkill],this.attr=[NodeAttr],this.appearance=[NodeAppearance],this.list=[{name:"partner_id",type:"Int64"},{name:"career",type:"Int8"},{name:"sex",type:"Int8"},{name:"skill",type:"array"},{name:"attr",type:"array"},{name:"appearance",type:"array"},{name:"power",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodePartner_list,"NodePartner_list");var NodePet_get_logs=function(){function e(){this.list=[{name:"tar_role_id",type:"Int64"},{name:"tar_tole_name",type:"string"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodePet_get_logs,"NodePet_get_logs");var NodePet_list=function(){function e(){this.list=[{name:"pet_id",type:"Int32"},{name:"calss",type:"Int16"},{name:"level",type:"Int16"},{name:"exp",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodePet_list,"NodePet_list");var NodePet_weapon=function(){function e(){this.list=[{name:"weapon_type",type:"Int32"},{name:"stage",type:"Int16"},{name:"star",type:"Int16"},{name:"exp",type:"Int32"},{name:"is_show",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodePet_weapon,"NodePet_weapon");var NodeRank_equips=function(){function e(){this.list=[{name:"slot",type:"Int8"},{name:"item_id",type:"Int32"},{name:"rand_attr",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeRank_equips,"NodeRank_equips");var NodeRank_list=function(){function e(){this.list=[{name:"rank",type:"Int16"},{name:"role_id",type:"Int64"},{name:"name",type:"string"},{name:"vip",type:"Int8"},{name:"month_card",type:"Int8"},{name:"round",type:"Int8"},{name:"level",type:"Int16"},{name:"power",type:"Int64"},{name:"value",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeRank_list,"NodeRank_list");var NodeRank_partners=function(){function e(){this.appearance=[NodeAppearance],this.attr=[NodeAttr],this.rank_equips=[NodeRank_equips],this.forge_streng=[NodeForge_list],this.forge_stone=[NodeForge_list],this.forge_soul=[NodeForge_list],this.forge_mind_list=[NodeForge_mind_list],this.spec_equips=[NodeSpec_equips],this.dominate_list=[NodeDominate_list],this.rank_skills=[NodeRank_skills],this.list=[{name:"partner_id",type:"Int64"},{name:"role_id",type:"Int64"},{name:"career",type:"Int8"},{name:"sex",type:"Int8"},{name:"power",type:"Int64"},{name:"appearance",type:"array"},{name:"attr",type:"array"},{name:"rank_equips",type:"array"},{name:"forge_streng",type:"array"},{name:"forge_stone",type:"array"},{name:"forge_soul",type:"array"},{name:"forge_mind_list",type:"array"},{name:"spec_equips",type:"array"},{name:"dominate_list",type:"array"},{name:"rank_skills",type:"array"},{name:"wing_level",type:"Int8"},{name:"wing_star",type:"Int8"},{name:"wing_exp",type:"Int8"},{name:"meridian_level",type:"Int32"},{name:"meridian_exp",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeRank_partners,"NodeRank_partners");var NodeRank_skills=function(){function e(){this.list=[{name:"skill_id",type:"Int32"},{name:"level",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeRank_skills,"NodeRank_skills");var NodeRed_dots=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeRed_dots,"NodeRed_dots");var NodeRmb_go_list=function(){function e(){this.list=[{name:"rmb",type:"Int32"},{name:"award_id",type:"Int8"},{name:"awarded_id",type:"Int8"},{name:"rand_num",type:"Int32"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeRmb_go_list,"NodeRmb_go_list");var NodeRole_ids=function(){function e(){this.list=[{name:"plat_name",type:"string"},{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeRole_ids,"NodeRole_ids");var NodeScene_mon=function(){function e(){this.skill=[NodeSkill],this.appearance=[NodeAppearance],this.list=[{name:"mon_id",type:"Int32"},{name:"name",type:"string"},{name:"guild_id",type:"Int64"},{name:"guild_name",type:"string"},{name:"template_id",type:"Int32"},{name:"career",type:"Int8"},{name:"sex",type:"Int8"},{name:"hp",type:"Int64"},{name:"max_hp",type:"Int64"},{name:"pos_x",type:"Int16"},{name:"pox_y",type:"Int16"},{name:"skill",type:"array"},{name:"appearance",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeScene_mon,"NodeScene_mon");var NodeScene_objs=function(){function e(){this.appearance=[NodeAppearance],this.list=[{name:"plat_name",type:"string"},{name:"obj_id",type:"Int64"},{name:"template_id",type:"Int32"},{name:"own_id",type:"Int64"},{name:"name",type:"string"},{name:"guild_id",type:"Int64"},{name:"guild_name",type:"string"},{name:"career",type:"Int8"},{name:"sex",type:"Int8"},{name:"hp",type:"Int64"},{name:"max_hp",type:"Int64"},{name:"dir",type:"Int8"},{name:"pos_x",type:"Int16"},{name:"pox_y",type:"Int16"},{name:"appearance",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeScene_objs,"NodeScene_objs");var NodeScene_partner=function(){function e(){this.skill=[NodeSkill],this.appearance=[NodeAppearance],this.list=[{name:"plat_name",type:"string"},{name:"partner_id",type:"Int64"},{name:"own_id",type:"Int64"},{name:"name",type:"string"},{name:"guild_id",type:"Int64"},{name:"guild_name",type:"string"},{name:"career",type:"Int8"},{name:"sex",type:"Int8"},{name:"hp",type:"Int64"},{name:"max_hp",type:"Int64"},{name:"skill",type:"array"},{name:"pos_x",type:"Int16"},{name:"pox_y",type:"Int16"},{name:"appearance",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeScene_partner,"NodeScene_partner");var NodeShadow_eqs=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"level",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeShadow_eqs,"NodeShadow_eqs");var NodeShop_levels=function(){function e(){this.list=[{name:"shop_id",type:"Int32"},{name:"last_time",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeShop_levels,"NodeShop_levels");var NodeShop_smlist=function(){function e(){this.list=[{name:"template_id",type:"Int32"},{name:"discount",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeShop_smlist,"NodeShop_smlist");var NodeSiege_depot=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"},{name:"num",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeSiege_depot,"NodeSiege_depot");var NodeSiege_depot_allots=function(){function e(){this.siege_depot=[NodeSiege_depot],this.list=[{name:"role_id",type:"Int64"},{name:"siege_depot",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeSiege_depot_allots,"NodeSiege_depot_allots");var NodeSiege_guild_times=function(){function e(){this.list=[{name:"guild_name",type:"string"},{name:"total_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeSiege_guild_times,"NodeSiege_guild_times");var NodeSiege_scores=function(){function e(){this.list=[{name:"rank_id",type:"Int16"},{name:"guild_name",type:"string"},{name:"role_name",type:"string"},{name:"score",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeSiege_scores,"NodeSiege_scores");var NodeSkill=function(){function e(){this.list=[{name:"skill_id",type:"Int32"},{name:"partner_id",type:"Int64"},{name:"level",type:"Int16"},{name:"cd",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeSkill,"NodeSkill");var NodeSpec_equips=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"level",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeSpec_equips,"NodeSpec_equips");var NodeTarget_list=function(){function e(){this.list=[{name:"template_id",type:"Int32"},{name:"progress",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeTarget_list,"NodeTarget_list");var NodeTitle_list=function(){function e(){this.list=[{name:"title_id",type:"Int32"},{name:"last_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeTitle_list,"NodeTitle_list");var NodeTreasure_item=function(){function e(){this.list=[{name:"item_id",type:"Int32"},{name:"num",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeTreasure_item,"NodeTreasure_item");var NodeTreasure_log=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"name",type:"string"},{name:"item_id",type:"Int32"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeTreasure_log,"NodeTreasure_log");var NodeVip_awards=function(){function e(){this.list=[{name:"level",type:"Int16"},{name:"award",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodeVip_awards,"NodeVip_awards");var SCMD10000=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"role_num",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10000,"SCMD10000");var SCMD10001=function(){function e(){this.account_list=[NodeAccount_list],this.list=[{name:"account_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10001,"SCMD10001");var SCMD10002=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10002,"SCMD10002");var SCMD10003=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10003,"SCMD10003");var SCMD10010=function(){function e(){this.list=[{name:"reason",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10010,"SCMD10010");var SCMD10020=function(){function e(){this.list=[{name:"unixtime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10020,"SCMD10020");var SCMD10040=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10040,"SCMD10040");var SCMD10100=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"sub_type",type:"Int8"},{name:"code",type:"Int32"},{name:"fields",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10100,"SCMD10100");var SCMD10200=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"name",type:"string"},{name:"icon",type:"Int32"},{name:"career",type:"Int8"},{name:"sex",type:"Int8"},{name:"level",type:"Int16"},{name:"exp",type:"Int64"},{name:"round",type:"Int8"},{name:"gm",type:"Int8"},{name:"guild_id",type:"Int64"},{name:"guild_name",type:"string"},{name:"guild_position",type:"Int8"},{name:"platform",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10200,"SCMD10200");var SCMD10201=function(){function e(){this.list=[{name:"role_level",type:"Int16"},{name:"role_exp",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10201,"SCMD10201");var SCMD10202=function(){function e(){this.list=[{name:"icon",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10202,"SCMD10202");var SCMD10203=function(){function e(){this.list=[{name:"offline_time",type:"Int32"},{name:"coin",type:"Int32"},{name:"coin_month",type:"Int32"},{name:"coin_artifact",type:"Int32"},{name:"exp",type:"Int32"},{name:"exp_month",type:"Int32"},{name:"exp_artifact",type:"Int32"},{name:"equip_count",type:"Int16"},{name:"sell_count",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10203,"SCMD10203");var SCMD10210=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"new_name",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10210,"SCMD10210");var SCMD10300=function(){function e(){this.partner_list=[NodePartner_list],this.list=[{name:"partner_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10300,"SCMD10300");var SCMD10310=function(){function e(){this.appearance=[NodeAppearance],this.list=[{name:"partner_id",type:"Int64"},{name:"appearance",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10310,"SCMD10310");var SCMD10400=function(){function e(){this.item=[NodeItem],this.list=[{name:"item",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10400,"SCMD10400");var SCMD10401=function(){function e(){this.item=[NodeItem],this.list=[{name:"item",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10401,"SCMD10401");var SCMD10403=function(){function e(){this.del_itemids=[NodeDel_itemids],this.list=[{name:"del_itemids",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10403,"SCMD10403");var SCMD10410=function(){function e(){this.economy=[NodeEconomy],this.list=[{name:"economy",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10410,"SCMD10410");var SCMD10411=function(){function e(){this.economy=[NodeEconomy],this.list=[{name:"economy",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10411,"SCMD10411");var SCMD10420=function(){function e(){this.list=[{name:"base_num",type:"Int16"},{name:"other_num",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10420,"SCMD10420");var SCMD10430=function(){function e(){this.item=[NodeItem],this.list=[{name:"item",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10430,"SCMD10430");var SCMD10440=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10440,"SCMD10440");var SCMD10500=function(){function e(){this.skill=[NodeSkill],this.list=[{name:"skill",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10500,"SCMD10500");var SCMD10600=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"wave_id",type:"Int16"},{name:"kill_num",type:"Int16"},{name:"awarded_id",type:"Int16"},{name:"award_id",type:"Int16"},{name:"total_wave_id",type:"Int16"},{name:"total_circle",type:"Int16"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10600,"SCMD10600");var SCMD10605=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10605,"SCMD10605");var SCMD10606=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10606,"SCMD10606");var SCMD10610=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10610,"SCMD10610");var SCMD10620=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"curr_wave_id",type:"Int16"},{name:"total_wave_id",type:"Int16"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10620,"SCMD10620");var SCMD10700=function(){function e(){this.battle_result=[NodeBattle_result],this.list=[{name:"plat_name",type:"string"},{name:"att_id",type:"Int64"},{name:"type",type:"Int8"},{name:"skill_id",type:"Int32"},{name:"battle_result",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10700,"SCMD10700");var SCMD10701=function(){function e(){this.list=[{name:"plat_name",type:"string"},{name:"def_id",type:"Int64"},{name:"type",type:"Int8"},{name:"buff_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10701,"SCMD10701");var SCMD10702=function(){function e(){this.list=[{name:"plat_name",type:"string"},{name:"partner_id",type:"Int64"},{name:"buff_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10702,"SCMD10702");var SCMD10703=function(){function e(){this.obj_hp_change=[NodeObj_hp_change],this.list=[{name:"obj_hp_change",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10703,"SCMD10703");var SCMD10800=function(){function e(){this.list=[{name:"scene_id",type:"Int32"},{name:"pos_x",type:"Int16"},{name:"pos_y",type:"Int16"},{name:"dir",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10800,"SCMD10800");var SCMD10801=function(){function e(){this.role_ids=[NodeRole_ids],this.list=[{name:"role_ids",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10801,"SCMD10801");var SCMD10802=function(){function e(){this.partner_ids=[NodePartner_ids],this.list=[{name:"partner_ids",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10802,"SCMD10802");var SCMD10803=function(){function e(){this.scene_partner=[NodeScene_partner],this.list=[{name:"scene_partner",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10803,"SCMD10803");var SCMD10804=function(){function e(){this.mon_ids=[NodeMon_ids],this.list=[{name:"mon_ids",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10804,"SCMD10804");var SCMD10805=function(){function e(){this.scene_mon=[NodeScene_mon],this.list=[{name:"scene_mon",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10805,"SCMD10805");var SCMD10806=function(){function e(){this.scene_mon=[NodeScene_mon],this.scene_partner=[NodeScene_partner],this.list=[{name:"scene_mon",type:"array"},{name:"scene_partner",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10806,"SCMD10806");var SCMD10810=function(){function e(){this.list=[{name:"plat_name",type:"string"},{name:"role_id",type:"Int64"},{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"guild_id",type:"Int64"},{name:"guild_name",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10810,"SCMD10810");var SCMD10820=function(){function e(){this.list=[{name:"plat_name",type:"string"},{name:"obj_id",type:"Int64"},{name:"obj_type",type:"Int8"},{name:"pos_x",type:"Int16"},{name:"pox_y",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10820,"SCMD10820");var SCMD10900=function(){function e(){this.list=[{name:"level",type:"Int16"},{name:"exp",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10900,"SCMD10900");var SCMD10901=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10901,"SCMD10901");var SCMD10902=function(){function e(){this.list=[{name:"type",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD10902,"SCMD10902");var SCMD11000=function(){function e(){this.shop_smlist=[NodeShop_smlist],this.list=[{name:"shop_smlist",type:"array"},{name:"last_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11000,"SCMD11000");var SCMD11100=function(){function e(){this.spec_equips=[NodeSpec_equips],this.list=[{name:"partner_id",type:"Int64"},{name:"spec_equips",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11100,"SCMD11100");var SCMD11200=function(){function e(){this.list=[{name:"round",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11200,"SCMD11200");var SCMD11300=function(){function e(){this.daily_nums=[NodeDaily_nums],this.list=[{name:"daily_nums",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11300,"SCMD11300");var SCMD11301=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11301,"SCMD11301");var SCMD11400=function(){function e(){this.list=[{name:"task_id",type:"Int32"},{name:"num",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11400,"SCMD11400");var SCMD11500=function(){function e(){this.mail_list=[NodeMail_list],this.list=[{name:"mail_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11500,"SCMD11500");var SCMD11602=function(){function e(){this.list=[{name:"send_role_id",type:"Int64"},{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"content",type:"string"},{name:"ctime",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11602,"SCMD11602");var SCMD11610=function(){function e(){this.chatworld_list=[NodeChatworld_list],this.list=[{name:"chatworld_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11610,"SCMD11610");var SCMD11611=function(){function e(){this.chatsvr_list=[NodeChatsvr_list],this.list=[{name:"chatsvr_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11611,"SCMD11611");var SCMD11612=function(){function e(){this.chatguild_list=[NodeChatguild_list],this.list=[{name:"chatguild_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11612,"SCMD11612");var SCMD11620=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"role_name",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11620,"SCMD11620");var SCMD11700=function(){function e(){this.friend_list=[NodeFriend_list],this.list=[{name:"friend_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11700,"SCMD11700");var SCMD11701=function(){function e(){this.friend_list=[NodeFriend_list],this.list=[{name:"friend_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11701,"SCMD11701");var SCMD11702=function(){function e(){this.friend_list=[NodeFriend_list],this.list=[{name:"friend_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11702,"SCMD11702");var SCMD11708=function(){function e(){this.role_ids=[NodeRole_ids],this.list=[{name:"type",type:"Int8"},{name:"role_ids",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11708,"SCMD11708");var SCMD11800=function(){function e(){this.forge_list=[NodeForge_list],this.list=[{name:"partner_id",type:"Int64"},{name:"forge_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11800,"SCMD11800");var SCMD11810=function(){function e(){this.forge_list=[NodeForge_list],this.list=[{name:"partner_id",type:"Int64"},{name:"forge_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11810,"SCMD11810");var SCMD11820=function(){function e(){this.forge_list=[NodeForge_list],this.list=[{name:"partner_id",type:"Int64"},{name:"forge_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11820,"SCMD11820");var SCMD11830=function(){function e(){this.forge_list=[NodeForge_list],this.list=[{name:"partner_id",type:"Int64"},{name:"forge_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11830,"SCMD11830");var SCMD11900=function(){function e(){this.vip_awards=[NodeVip_awards],this.list=[{name:"level",type:"Int16"},{name:"exp",type:"Int32"},{name:"vip_awards",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11900,"SCMD11900");var SCMD11910=function(){function e(){this.list=[{name:"last_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD11910,"SCMD11910");var SCMD12000=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"level",type:"Int16"},{name:"exp",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12000,"SCMD12000");var SCMD12100=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"level",type:"Int16"},{name:"star",type:"Int16"},{name:"exp",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12100,"SCMD12100");var SCMD12105=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12105,"SCMD12105");var SCMD12106=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"level",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12106,"SCMD12106");var SCMD12200=function(){function e(){this.forge_mind_list=[NodeForge_mind_list],this.list=[{name:"partner_id",type:"Int64"},{name:"forge_mind_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12200,"SCMD12200");var SCMD12300=function(){function e(){this.title_list=[NodeTitle_list],this.list=[{name:"title_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12300,"SCMD12300");var SCMD12301=function(){function e(){this.list=[{name:"title_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12301,"SCMD12301");var SCMD12400=function(){function e(){this.dominate_list=[NodeDominate_list],this.list=[{name:"partner_id",type:"Int64"},{name:"dominate_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12400,"SCMD12400");var SCMD12401=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12401,"SCMD12401");var SCMD12500=function(){function e(){this.guild_list=[NodeGuild_list],this.list=[{name:"guild_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12500,"SCMD12500");var SCMD12502=function(){function e(){this.list=[{name:"guild_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12502,"SCMD12502");var SCMD12503=function(){function e(){this.list=[{name:"guild_id",type:"Int64"},{name:"guild_name",type:"string"},{name:"position",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12503,"SCMD12503");var SCMD12504=function(){function e(){this.guild_applys=[NodeGuild_applys],this.list=[{name:"guild_applys",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12504,"SCMD12504");var SCMD12505=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12505,"SCMD12505");var SCMD12507=function(){function e(){this.list=[{name:"guild_id",type:"Int64"},{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12507,"SCMD12507");var SCMD12509=function(){function e(){this.guild_members=[NodeGuild_members],this.list=[{name:"guild_members",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12509,"SCMD12509");var SCMD12513=function(){function e(){this.list=[{name:"guild_name",type:"string"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12513,"SCMD12513");var SCMD12515=function(){function e(){this.guild_logs=[NodeGuild_logs],this.list=[{name:"guild_logs",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12515,"SCMD12515");var SCMD12516=function(){function e(){this.guild_build_list=[NodeGuild_build_list],this.list=[{name:"money",type:"Int32"},{name:"guild_build_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12516,"SCMD12516");var SCMD12519=function(){function e(){this.list=[{name:"guild_id",type:"Int64"},{name:"guild_name",type:"string"},{name:"guild_level",type:"Int16"},{name:"guild_num",type:"Int32"},{name:"guild_money",type:"Int32"},{name:"guild_power",type:"Int64"},{name:"chief_role_id",type:"Int64"},{name:"chief_role_name",type:"string"},{name:"icon",type:"Int32"},{name:"notice",type:"string"},{name:"req_auto",type:"Int8"},{name:"req_power",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12519,"SCMD12519");var SCMD12600=function(){function e(){this.guild_skillrooms=[NodeGuild_skillrooms],this.list=[{name:"parter_id",type:"Int64"},{name:"guild_skillrooms",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12600,"SCMD12600");var SCMD12700=function(){function e(){this.list=[{name:"day",type:"Int32"},{name:"award_id",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12700,"SCMD12700");var SCMD12800=function(){function e(){this.first_charge_awards=[NodeFirst_charge_awards],this.list=[{name:"first_charge_awards",type:"array"},{name:"last_award_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12800,"SCMD12800");var SCMD12900=function(){function e(){this.artifact_list=[NodeArtifact_list],this.list=[{name:"artifact_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12900,"SCMD12900");var SCMD12901=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD12901,"SCMD12901");var SCMD13000=function(){function e(){this.list=[{name:"offline_time",type:"Int32"},{name:"coin",type:"Int32"},{name:"coin_month",type:"Int32"},{name:"coin_artifact",type:"Int32"},{name:"exp",type:"Int32"},{name:"exp_month",type:"Int32"},{name:"exp_artifact",type:"Int32"},{name:"equip_count",type:"Int16"},{name:"sell_count",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13000,"SCMD13000");var SCMD13100=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"template_id",type:"Int32"},{name:"drop_list",type:"array"},{name:"is_share",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13100,"SCMD13100");var SCMD13110=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13110,"SCMD13110");
var SCMD13111=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13111,"SCMD13111");var SCMD13200=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13200,"SCMD13200");var SCMD13201=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13201,"SCMD13201");var SCMD13300=function(){function e(){this.meet_roles=[NodeMeet_roles],this.list=[{name:"reflash_time",type:"Int32"},{name:"rank_num",type:"Int16"},{name:"meet_roles",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13300,"SCMD13300");var SCMD13301=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"role_id",type:"Int64"},{name:"result",type:"Int8"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13301,"SCMD13301");var SCMD13302=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13302,"SCMD13302");var SCMD13303=function(){function e(){this.meet_pk_logs=[NodeMeet_pk_logs],this.list=[{name:"meet_pk_logs",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13303,"SCMD13303");var SCMD13304=function(){function e(){this.partner_list=[NodePartner_list],this.list=[{name:"flash_time",type:"Int32"},{name:"role_id",type:"Int64"},{name:"name",type:"string"},{name:"icon",type:"Int32"},{name:"round",type:"Int8"},{name:"level",type:"Int16"},{name:"partner_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13304,"SCMD13304");var SCMD13400=function(){function e(){this.list=[{name:"level",type:"Int16"},{name:"red_exp",type:"Int32"},{name:"guild_money",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13400,"SCMD13400");var SCMD13410=function(){function e(){this.guild_donate_logs=[NodeGuild_donate_logs],this.list=[{name:"guild_donate_logs",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13410,"SCMD13410");var SCMD13411=function(){function e(){this.guild_donate_logs=[NodeGuild_donate_logs],this.list=[{name:"guild_donate_logs",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13411,"SCMD13411");var SCMD13420=function(){function e(){this.guild_reds=[NodeGuild_reds],this.list=[{name:"guild_reds",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13420,"SCMD13420");var SCMD13421=function(){function e(){this.list=[{name:"red_id",type:"Int32"},{name:"gain_count",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13421,"SCMD13421");var SCMD13422=function(){function e(){this.guild_red_gets=[NodeGuild_red_gets],this.list=[{name:"guild_red_gets",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13422,"SCMD13422");var SCMD13430=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13430,"SCMD13430");var SCMD13500=function(){function e(){this.rank_list=[NodeRank_list],this.list=[{name:"self_rank",type:"Int32"},{name:"rank_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13500,"SCMD13500");var SCMD13501=function(){function e(){this.rank_partners=[NodeRank_partners],this.list=[{name:"role_id",type:"Int64"},{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"round",type:"Int8"},{name:"level",type:"Int16"},{name:"rank_partners",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13501,"SCMD13501");var SCMD13503=function(){function e(){this.list=[{name:"rank",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13503,"SCMD13503");var SCMD13600=function(){function e(){this.fashion_list=[NodeFashion_list],this.list=[{name:"partner_id",type:"Int64"},{name:"fashion_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13600,"SCMD13600");var SCMD13601=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13601,"SCMD13601");var SCMD13700=function(){function e(){this.list=[{name:"level",type:"Int8"},{name:"role_id",type:"Int64"},{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"item_id",type:"Int32"},{name:"item_num",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13700,"SCMD13700");var SCMD13701=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"flag",type:"Int8"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13701,"SCMD13701");var SCMD13710=function(){function e(){this.guild_shop_logs=[NodeGuild_shop_logs],this.list=[{name:"guild_shop_logs",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13710,"SCMD13710");var SCMD13800=function(){function e(){this.treasure_log=[NodeTreasure_log],this.list=[{name:"treasure_log",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13800,"SCMD13800");var SCMD13801=function(){function e(){this.treasure_item=[NodeTreasure_item],this.list=[{name:"treasure_item",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13801,"SCMD13801");var SCMD13810=function(){function e(){this.treasure_item=[NodeTreasure_item],this.list=[{name:"treasure_item",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13810,"SCMD13810");var SCMD13811=function(){function e(){this.treasure_item=[NodeTreasure_item],this.list=[{name:"treasure_item",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13811,"SCMD13811");var SCMD13820=function(){function e(){this.list=[{name:"last_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13820,"SCMD13820");var SCMD13900=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13900,"SCMD13900");var SCMD13901=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD13901,"SCMD13901");var SCMD14000=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14000,"SCMD14000");var SCMD14001=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14001,"SCMD14001");var SCMD14100=function(){function e(){this.act_daily_awards=[NodeAct_daily_awards],this.list=[{name:"type",type:"Int8"},{name:"act_daily_awards",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14100,"SCMD14100");var SCMD14200=function(){function e(){this.act_daily_awards=[NodeAct_daily_awards],this.list=[{name:"type",type:"Int8"},{name:"act_daily_awards",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14200,"SCMD14200");var SCMD14300=function(){function e(){this.list=[{name:"open_day",type:"Int16"},{name:"merge_day",type:"Int16"},{name:"year",type:"Int16"},{name:"month",type:"Int8"},{name:"day",type:"Int8"},{name:"week",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14300,"SCMD14300");var SCMD14310=function(){function e(){this.list=[{name:"template_id",type:"Int16"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14310,"SCMD14310");var SCMD14311=function(){function e(){this.list=[{name:"type",type:"Int8"},{name:"value",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14311,"SCMD14311");var SCMD14400=function(){function e(){this.boss_alls=[NodeBoss_alls],this.list=[{name:"bat_num",type:"Int16"},{name:"last_time",type:"Int32"},{name:"boss_alls",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14400,"SCMD14400");var SCMD14401=function(){function e(){this.boss_all_notices=[NodeBoss_all_notices],this.list=[{name:"boss_all_notices",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14401,"SCMD14401");var SCMD14405=function(){function e(){this.boss_alls=[NodeBoss_alls],this.list=[{name:"boss_alls",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14405,"SCMD14405");var SCMD14410=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"is_top",type:"Int8"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14410,"SCMD14410");var SCMD14411=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14411,"SCMD14411");var SCMD14412=function(){function e(){this.boss_all_hits=[NodeBoss_all_hits],this.list=[{name:"boss_id",type:"Int32"},{name:"hp",type:"Int64"},{name:"max_hp",type:"Int64"},{name:"my_hit",type:"Int64"},{name:"boss_all_hits",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14412,"SCMD14412");var SCMD14420=function(){function e(){this.list=[{name:"template_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14420,"SCMD14420");var SCMD14500=function(){function e(){this.list=[{name:"level",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14500,"SCMD14500");var SCMD14501=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14501,"SCMD14501");var SCMD14502=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14502,"SCMD14502");var SCMD14600=function(){function e(){this.red_dots=[NodeRed_dots],this.list=[{name:"red_dots",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14600,"SCMD14600");var SCMD14700=function(){function e(){this.feat_skills=[NodeFeat_skills],this.list=[{name:"parter_id",type:"Int64"},{name:"feat_skills",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14700,"SCMD14700");var SCMD14702=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14702,"SCMD14702");var SCMD14800=function(){function e(){this.boss_rounds=[NodeBoss_rounds],this.list=[{name:"boss_rounds",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14800,"SCMD14800");var SCMD14810=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14810,"SCMD14810");var SCMD14811=function(){function e(){this.boss_round_hits=[NodeBoss_round_hits],this.list=[{name:"boss_id",type:"Int32"},{name:"hp",type:"Int64"},{name:"max_hp",type:"Int64"},{name:"shield_rate",type:"Int8"},{name:"my_hit",type:"Int64"},{name:"boss_round_hits",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14811,"SCMD14811");var SCMD14812=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14812,"SCMD14812");var SCMD14813=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"last_cd",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14813,"SCMD14813");var SCMD14820=function(){function e(){this.list=[{name:"num",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14820,"SCMD14820");var SCMD14821=function(){function e(){this.list=[{name:"name",type:"string"},{name:"num",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14821,"SCMD14821");var SCMD14822=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14822,"SCMD14822");var SCMD14830=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14830,"SCMD14830");var SCMD14831=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14831,"SCMD14831");var SCMD14900=function(){function e(){this.guild_farms=[NodeGuild_farms],this.list=[{name:"role_id",type:"Int64"},{name:"role_name",type:"string"},{name:"level",type:"Int16"},{name:"round",type:"Int16"},{name:"last_time",type:"Int32"},{name:"man_time",type:"Int32"},{name:"guild_farms",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14900,"SCMD14900");var SCMD14910=function(){function e(){this.guild_farm_logs=[NodeGuild_farm_logs],this.list=[{name:"guild_farm_logs",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD14910,"SCMD14910");var SCMD15000=function(){function e(){this.guild_invades=[NodeGuild_invades],this.list=[{name:"guild_invades",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15000,"SCMD15000");var SCMD15010=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15010,"SCMD15010");var SCMD15011=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15011,"SCMD15011");var SCMD15100=function(){function e(){this.list=[{name:"share_num",type:"Int8"},{name:"last_time",type:"Int32"},{name:"award",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15100,"SCMD15100");var SCMD15200=function(){function e(){this.list=[{name:"guild_id",type:"Int64"},{name:"guild_name",type:"string"},{name:"role_id",type:"Int64"},{name:"role_name",type:"string"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15200,"SCMD15200");var SCMD15201=function(){function e(){this.siege_scores=[NodeSiege_scores],this.list=[{name:"siege_scores",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15201,"SCMD15201");var SCMD15202=function(){function e(){this.siege_scores=[NodeSiege_scores],this.list=[{name:"siege_scores",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15202,"SCMD15202");var SCMD15210=function(){function e(){this.siege_depot=[NodeSiege_depot],this.list=[{name:"siege_depot",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15210,"SCMD15210");var SCMD15230=function(){function e(){this.list=[{name:"int32",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15230,"SCMD15230");var SCMD15231=function(){function e(){this.siege_scores=[NodeSiege_scores],this.siege_guild_times=[NodeSiege_guild_times],this.list=[{name:"siege_scores",type:"array"},{name:"siege_guild_times",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15231,"SCMD15231");var SCMD15240=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15240,"SCMD15240");var SCMD15300=function(){function e(){this.boss_round_hits=[NodeBoss_round_hits],this.list=[{name:"boss_id",type:"Int32"},{name:"hp",type:"Int64"},{name:"max_hp",type:"Int64"},{name:"my_hit",type:"Int64"},{name:"boss_round_hits",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15300,"SCMD15300");var SCMD15310=function(){function e(){this.list=[{name:"num",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15310,"SCMD15310");var SCMD15311=function(){function e(){this.list=[{name:"name",type:"string"},{name:"num",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15311,"SCMD15311");var SCMD15312=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15312,"SCMD15312");var SCMD15400=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"mon_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15400,"SCMD15400");var SCMD15410=function(){function e(){this.att_roles=[NodeAtt_roles],this.list=[{name:"att_roles",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15410,"SCMD15410");var SCMD15412=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15412,"SCMD15412");var SCMD15413=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15413,"SCMD15413");var SCMD15414=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15414,"SCMD15414");var SCMD15415=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"last_cd",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15415,"SCMD15415");var SCMD15430=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15430,"SCMD15430");var SCMD15500=function(){function e(){this.att_roles=[NodeAtt_roles],this.list=[{name:"att_roles",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15500,"SCMD15500");var SCMD15502=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15502,"SCMD15502");var SCMD15503=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15503,"SCMD15503");var SCMD15504=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15504,"SCMD15504");var SCMD15510=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15510,"SCMD15510");var SCMD15511=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"last_cd",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15511,"SCMD15511");var SCMD15600=function(){function e(){this.list=[{name:"id",type:"Int32"},{name:"role_id",type:"Int64"},{name:"guild_id",type:"Int64"},{name:"guild_name",type:"string"},{name:"last_time",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15600,"SCMD15600");var SCMD15601=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15601,"SCMD15601");var SCMD15602=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15602,"SCMD15602");var SCMD15610=function(){function e(){this.att_roles=[NodeAtt_roles],this.list=[{name:"att_roles",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15610,"SCMD15610");var SCMD15612=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15612,"SCMD15612");var SCMD15613=function(){function e(){this.list=[{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15613,"SCMD15613");var SCMD15614=function(){function e(){this.list=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15614,"SCMD15614");var SCMD15620=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15620,"SCMD15620");var SCMD15621=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"last_cd",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15621,"SCMD15621");var SCMD15700=function(){function e(){this.fund_awards=[NodeFund_awards],this.list=[{name:"flag",type:"Int8"},{name:"fund_awards",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15700,"SCMD15700");var SCMD15701=function(){function e(){this.fund_awards=[NodeFund_awards],this.list=[{name:"fund_awards",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15701,"SCMD15701");var SCMD15800=function(){function e(){this.charge_double_awards=[NodeCharge_double_awards],this.list=[{name:"charge_double_awards",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15800,"SCMD15800");var SCMD15900=function(){function e(){this.list=[{name:"level",type:"Int16"},{name:"exp",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD15900,"SCMD15900");var SCMD16000=function(){function e(){this.list=[{name:"level",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16000,"SCMD16000");var SCMD16100=function(){function e(){this.fixed_nums=[NodeFixed_nums],this.list=[{name:"fixed_nums",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16100,"SCMD16100");var SCMD16200=function(){function e(){this.mines=[NodeMines],this.list=[{name:"mines",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16200,"SCMD16200");var SCMD16201=function(){function e(){this.harry_list=[NodeHarry_list],this.list=[{name:"mine_cfgid",type:"Int32"},{name:"last_time",type:"Int32"},{name:"harry_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16201,"SCMD16201");var SCMD16202=function(){function e(){this.list=[{name:"cfgid",type:"Int32"},{name:"bless",type:"Int32"},{name:"num",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16202,"SCMD16202");var SCMD16205=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16205,"SCMD16205");var SCMD16210=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"cfgid",type:"Int32"},{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"guild_name",type:"string"},{name:"power",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16210,"SCMD16210");var SCMD16211=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"flag",type:"Int8"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16211,"SCMD16211");var SCMD16220=function(){function e(){this.mine_logs=[NodeMine_logs],this.list=[{name:"mine_logs",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16220,"SCMD16220");var SCMD16300=function(){function e(){this.list=[{name:"level",type:"Int16"},{name:"is_assist",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16300,"SCMD16300");var SCMD16301=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"position",type:"Int8"},{name:"power",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16301,"SCMD16301");var SCMD16302=function(){function e(){this.guild_fuben_sorts=[NodeGuild_fuben_sorts],this.list=[{name:"guild_fuben_sorts",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16302,"SCMD16302");var SCMD16304=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"level",type:"Int16"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16304,"SCMD16304");var SCMD16310=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16310,"SCMD16310");var SCMD16311=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16311,"SCMD16311");var SCMD16400=function(){function e(){this.famous_ranks=[NodeFamous_ranks],this.list=[{name:"open_day",type:"Int8"},{name:"famous_ranks",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16400,"SCMD16400");var SCMD16500=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16500,"SCMD16500");var SCMD16600=function(){function e(){this.kfcharge_awards=[NodeKfcharge_awards],this.list=[{name:"kfcharge_awards",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16600,"SCMD16600");var SCMD16700=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"award_flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16700,"SCMD16700");var SCMD16800=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"rand_gold",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16800,"SCMD16800");var SCMD16900=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD16900,"SCMD16900");var SCMD17100=function(){function e(){this.list=[{name:"grid_id",type:"Int32"},{name:"total_level",type:"Int16"},{name:"num",type:"Int8"},{name:"door",type:"Int8"},{name:"last_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD17100,"SCMD17100");var SCMD17101=function(){function e(){this.dark_logs=[NodeDark_logs],this.list=[{name:"dark_logs",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD17101,"SCMD17101");var SCMD17110=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"flag",type:"Int8"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD17110,"SCMD17110");var SCMD17111=function(){function e(){this.list=[{name:"grid_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD17111,"SCMD17111");var SCMD17200=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"last_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD17200,"SCMD17200");var SCMD17300=function(){function e(){this.act_fl_list=[NodeAct_fl_list],this.list=[{name:"act_fl_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD17300,"SCMD17300");var SCMD17301=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD17301,"SCMD17301");var SCMD17400=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"award_id",type:"Int16"},{name:"awarded_id",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD17400,"SCMD17400");var SCMD17500=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"award_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD17500,"SCMD17500");var SCMD17510=function(){function e(){this.act_flcj_list=[NodeAct_flcj_list],this.list=[{name:"act_id",type:"Int32"},{name:"act_flcj_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD17510,"SCMD17510");var SCMD17600=function(){function e(){this.act_fllc_list=[NodeAct_fllc_list],this.list=[{name:"act_id",type:"Int32"},{name:"total_charge",type:"Int32"},{name:"act_fllc_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD17600,"SCMD17600");var SCMD17700=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"award_id",type:"Int32"},{name:"awarded_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD17700,"SCMD17700");var SCMD17701=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD17701,"SCMD17701");var SCMD17800=function(){function e(){this.act_flxg_list=[NodeAct_flxg_list],this.list=[{name:"act_id",type:"Int32"},{name:"act_flxg_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD17800,"SCMD17800");var SCMD18000=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"level",type:"Int16"},{name:"exp",type:"Int16"},{name:"num",type:"Int8"},{name:"last_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18000,"SCMD18000");var SCMD18001=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18001,"SCMD18001");var SCMD18010=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"adv_lv",type:"Int16"},{name:"star",type:"Int16"},{name:"exp",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18010,"SCMD18010");var SCMD18013=function(){function e(){this.list=[{name:"adv_lv",type:"Int16"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18013,"SCMD18013");var SCMD18020=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"},{name:"double_cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18020,"SCMD18020");var SCMD18030=function(){function e(){this.shadow_eqs=[NodeShadow_eqs],this.list=[{name:"partner_id",type:"Int64"},{name:"shadow_eqs",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18030,"SCMD18030");var SCMD18100=function(){function e(){this.rmb_go_list=[NodeRmb_go_list],this.list=[{name:"rmb_go_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18100,"SCMD18100");var SCMD18110=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18110,"SCMD18110");var SCMD18200=function(){function e(){this.kfrecharge_awards=[NodeKfrecharge_awards],this.list=[{name:"kfrecharge_awards",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18200,"SCMD18200");var SCMD18300=function(){function e(){this.list=[{name:"level",type:"Int8"},{name:"exp",type:"Int8"},{name:"win_num",type:"Int16"},{name:"num",type:"Int8"},{name:"rec_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18300,"SCMD18300");var SCMD18310=function(){function e(){this.list=[{name:"role_id",type:"Int64"},{name:"icon",type:"Int32"},{name:"name",type:"string"},{name:"level",type:"Int8"},{name:"exp",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18310,"SCMD18310");var SCMD18311=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"flag",type:"Int8"},{name:"drop_list",type:"array"},{name:"level",type:"Int8"},{name:"exp",type:"Int8"},{name:"new_level",type:"Int8"},{name:"new_exp",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18311,"SCMD18311");var SCMD18320=function(){function e(){this.king_ranks=[NodeKing_ranks],this.list=[{name:"level",type:"Int8"},{name:"exp",type:"Int8"},{name:"win_num",type:"Int16"},{name:"king_ranks",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18320,"SCMD18320");var SCMD18330=function(){function e(){this.king_ranks=[NodeKing_ranks],this.list=[{name:"level",type:"Int8"},{name:"king_ranks",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18330,"SCMD18330");var SCMD18500=function(){function e(){this.list=[{name:"award_id",type:"Int32"},{name:"awarded_id",type:"Int32"}]
}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18500,"SCMD18500");var SCMD18600=function(){function e(){this.list=[{name:"point",type:"Int32"},{name:"award_id",type:"Int32"},{name:"awarded_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18600,"SCMD18600");var SCMD18800=function(){function e(){this.act_hfxg_list=[NodeAct_hfxg_list],this.list=[{name:"act_hfxg_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18800,"SCMD18800");var SCMD18900=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD18900,"SCMD18900");var SCMD19000=function(){function e(){this.act_hfexchange_list=[NodeAct_hfexchange_list],this.list=[{name:"act_hfexchange_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19000,"SCMD19000");var SCMD19100=function(){function e(){this.hfcharge_awards=[NodeHfcharge_awards],this.list=[{name:"hfcharge_awards",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19100,"SCMD19100");var SCMD19400=function(){function e(){this.boss_guilds=[NodeBoss_guilds],this.list=[{name:"bat_num",type:"Int16"},{name:"last_time",type:"Int32"},{name:"boss_guilds",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19400,"SCMD19400");var SCMD19401=function(){function e(){this.boss_guilds=[NodeBoss_guilds],this.list=[{name:"boss_guilds",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19401,"SCMD19401");var SCMD19410=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"is_top",type:"Int8"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19410,"SCMD19410");var SCMD19411=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19411,"SCMD19411");var SCMD19412=function(){function e(){this.list=[{name:"boss_id",type:"Int32"},{name:"hp",type:"Int64"},{name:"max_hp",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19412,"SCMD19412");var SCMD19413=function(){function e(){this.list=[{name:"kill_name",type:"string"},{name:"kill_icon",type:"Int32"},{name:"bekill_name",type:"string"},{name:"bekill_icon",type:"Int32"},{name:"double_kill",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19413,"SCMD19413");var SCMD19430=function(){function e(){this.list=[{name:"name",type:"string"},{name:"icon",type:"Int32"},{name:"template_id",type:"Int32"},{name:"is_show",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19430,"SCMD19430");var SCMD19431=function(){function e(){this.list=[{name:"cd",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19431,"SCMD19431");var SCMD19600=function(){function e(){this.act_flluck_goods=[NodeAct_flluck_goods],this.list=[{name:"act_id",type:"Int32"},{name:"act_flluck_goods",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19600,"SCMD19600");var SCMD19602=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19602,"SCMD19602");var SCMD19700=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19700,"SCMD19700");var SCMD19701=function(){function e(){this.bless_awards=[NodeBless_awards],this.list=[{name:"role_id",type:"Int64"},{name:"role_name",type:"string"},{name:"item_id",type:"Int32"},{name:"bless_awards",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19701,"SCMD19701");var SCMD19710=function(){function e(){this.bless_buffs=[NodeBless_buffs],this.list=[{name:"bless_buffs",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19710,"SCMD19710");var SCMD19711=function(){function e(){this.list=[{name:"buff_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19711,"SCMD19711");var SCMD19800=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19800,"SCMD19800");var SCMD19900=function(){function e(){this.act_flegg_list=[NodeAct_flegg_list],this.list=[{name:"act_id",type:"Int32"},{name:"num",type:"Int32"},{name:"open_num",type:"Int32"},{name:"free_num",type:"Int32"},{name:"last_time",type:"Int32"},{name:"act_flegg_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19900,"SCMD19900");var SCMD19901=function(){function e(){this.egg_drop_list=[NodeEgg_drop_list],this.list=[{name:"act_id",type:"Int32"},{name:"egg_drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19901,"SCMD19901");var SCMD19903=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD19903,"SCMD19903");var SCMD20100=function(){function e(){this.list=[{name:"bat_num",type:"Int16"},{name:"last_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20100,"SCMD20100");var SCMD20101=function(){function e(){this.kfboss_awakes=[NodeKfboss_awakes],this.list=[{name:"kfboss_awakes",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20101,"SCMD20101");var SCMD20110=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"is_top",type:"Int8"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20110,"SCMD20110");var SCMD20111=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20111,"SCMD20111");var SCMD20112=function(){function e(){this.kfboss_awake_hits=[NodeKfboss_awake_hits],this.list=[{name:"boss_id",type:"Int32"},{name:"hp",type:"Int64"},{name:"max_hp",type:"Int64"},{name:"my_hit",type:"Int64"},{name:"kfboss_awake_hits",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20112,"SCMD20112");var SCMD20113=function(){function e(){this.list=[{name:"kill_id",type:"Int64"},{name:"kill_name",type:"string"},{name:"kill_icon",type:"Int32"},{name:"bekill_id",type:"Int64"},{name:"bekill_name",type:"string"},{name:"bekill_icon",type:"Int32"},{name:"double_kill",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20113,"SCMD20113");var SCMD20120=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"last_cd",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20120,"SCMD20120");var SCMD20310=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20310,"SCMD20310");var SCMD20500=function(){function e(){this.enter_last_time=[NodeEnter_last_time],this.list=[{name:"last_time",type:"Int32"},{name:"enter_last_time",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20500,"SCMD20500");var SCMD20501=function(){function e(){this.boss_homes=[NodeBoss_homes],this.list=[{name:"boss_homes",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20501,"SCMD20501");var SCMD20510=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"is_win",type:"Int8"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20510,"SCMD20510");var SCMD20511=function(){function e(){this.list=[{name:"boss_id",type:"Int32"},{name:"hp",type:"Int64"},{name:"max_hp",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20511,"SCMD20511");var SCMD20512=function(){function e(){this.list=[{name:"kill_name",type:"string"},{name:"kill_icon",type:"Int32"},{name:"bekill_name",type:"string"},{name:"bekill_icon",type:"Int32"},{name:"double_kill",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20512,"SCMD20512");var SCMD20600=function(){function e(){this.boss_elites=[NodeBoss_elites],this.list=[{name:"boss_elites",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20600,"SCMD20600");var SCMD20610=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"is_win",type:"Int8"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20610,"SCMD20610");var SCMD20611=function(){function e(){this.list=[{name:"boss_id",type:"Int32"},{name:"hp",type:"Int64"},{name:"max_hp",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20611,"SCMD20611");var SCMD20612=function(){function e(){this.list=[{name:"kill_name",type:"string"},{name:"kill_icon",type:"Int32"},{name:"bekill_name",type:"string"},{name:"bekill_icon",type:"Int32"},{name:"double_kill",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20612,"SCMD20612");var SCMD20700=function(){function e(){this.list=[{name:"last_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20700,"SCMD20700");var SCMD20701=function(){function e(){this.boss_fields=[NodeBoss_fields],this.list=[{name:"boss_fields",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20701,"SCMD20701");var SCMD20710=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"is_win",type:"Int8"},{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20710,"SCMD20710");var SCMD20711=function(){function e(){this.list=[{name:"boss_id",type:"Int32"},{name:"hp",type:"Int64"},{name:"max_hp",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20711,"SCMD20711");var SCMD20712=function(){function e(){this.list=[{name:"kill_name",type:"string"},{name:"kill_icon",type:"Int32"},{name:"bekill_name",type:"string"},{name:"bekill_icon",type:"Int32"},{name:"double_kill",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20712,"SCMD20712");var SCMD20900=function(){function e(){this.list=[{name:"last_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD20900,"SCMD20900");var SCMD21000=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD21000,"SCMD21000");var SCMD21001=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD21001,"SCMD21001");var SCMD21100=function(){function e(){this.achievement_list=[NodeAchievement_list],this.list=[{name:"achievement_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD21100,"SCMD21100");var SCMD21300=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD21300,"SCMD21300");var SCMD21400=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD21400,"SCMD21400");var SCMD21600=function(){function e(){this.awake_souls=[NodeAwake_souls],this.list=[{name:"partner_id",type:"Int64"},{name:"awake_souls",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD21600,"SCMD21600");var SCMD21700=function(){function e(){this.act_flxf_list=[NodeAct_flxf_list],this.list=[{name:"act_id",type:"Int32"},{name:"total_consume",type:"Int32"},{name:"act_flxf_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD21700,"SCMD21700");var SCMD21900=function(){function e(){this.forge_list=[NodeForge_list],this.list=[{name:"partner_id",type:"Int64"},{name:"forge_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD21900,"SCMD21900");var SCMD22000=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22000,"SCMD22000");var SCMD22200=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"flag",type:"Int8"},{name:"award_flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22200,"SCMD22200");var SCMD22300=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"flag",type:"Int8"},{name:"award_flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22300,"SCMD22300");var SCMD22400=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"total_sec",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22400,"SCMD22400");var SCMD22500=function(){function e(){this.market_items=[NodeMarket_items],this.list=[{name:"market_items",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22500,"SCMD22500");var SCMD22501=function(){function e(){this.market_items=[NodeMarket_items],this.list=[{name:"market_items",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22501,"SCMD22501");var SCMD22520=function(){function e(){this.list=[{name:"shop_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22520,"SCMD22520");var SCMD22600=function(){function e(){this.bowl_buys=[NodeBowl_buys],this.list=[{name:"bowl_buys",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22600,"SCMD22600");var SCMD22610=function(){function e(){this.act_bowl_list=[NodeAct_bowl_list],this.list=[{name:"act_bowl_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22610,"SCMD22610");var SCMD22611=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22611,"SCMD22611");var SCMD22700=function(){function e(){this.shop_levels=[NodeShop_levels],this.list=[{name:"shop_levels",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22700,"SCMD22700");var SCMD22710=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22710,"SCMD22710");var SCMD22800=function(){function e(){this.order_gifts=[NodeOrder_gifts],this.list=[{name:"order_gifts",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22800,"SCMD22800");var SCMD22801=function(){function e(){this.list=[{name:"tem_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22801,"SCMD22801");var SCMD22810=function(){function e(){this.act_order_gifts=[NodeAct_order_gifts],this.list=[{name:"act_order_gifts",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22810,"SCMD22810");var SCMD22811=function(){function e(){this.list=[{name:"act_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22811,"SCMD22811");var SCMD22900=function(){function e(){this.list=[{name:"level",type:"Int16"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD22900,"SCMD22900");var SCMD23000=function(){function e(){this.list=[{name:"partner_id",type:"Int64"},{name:"level",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23000,"SCMD23000");var SCMD23010=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23010,"SCMD23010");var SCMD23100=function(){function e(){this.list=[{name:"online_time",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23100,"SCMD23100");var SCMD23110=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23110,"SCMD23110");var SCMD23200=function(){function e(){this.pet_list=[NodePet_list],this.list=[{name:"pet_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23200,"SCMD23200");var SCMD23210=function(){function e(){this.list=[{name:"activation",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23210,"SCMD23210");var SCMD23220=function(){function e(){this.list=[{name:"up_lv",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23220,"SCMD23220");var SCMD23230=function(){function e(){this.list=[{name:"up_stairs",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23230,"SCMD23230");var SCMD23320=function(){function e(){this.pet_get_logs=[NodePet_get_logs],this.list=[{name:"pet_get_logs",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23320,"SCMD23320");var SCMD23400=function(){function e(){this.act_flzp_list=[NodeAct_flzp_list],this.list=[{name:"act_id",type:"Int32"},{name:"score",type:"Int32"},{name:"act_flzp_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23400,"SCMD23400");var SCMD23401=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23401,"SCMD23401");var SCMD23402=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"cfg_id",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23402,"SCMD23402");var SCMD23410=function(){function e(){this.act_flzp_logs=[NodeAct_flzp_logs],this.list=[{name:"act_id",type:"Int32"},{name:"act_flzp_logs",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23410,"SCMD23410");var SCMD23500=function(){function e(){this.list=[{name:"grade",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23500,"SCMD23500");var SCMD23600=function(){function e(){this.list=[{name:"act_id",type:"Int32"},{name:"shop_id",type:"Int32"},{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23600,"SCMD23600");var SCMD23700=function(){function e(){this.act_flfish_list=[NodeAct_flfish_list],this.list=[{name:"act_id",type:"Int32"},{name:"num",type:"Int32"},{name:"open_num",type:"Int32"},{name:"free_num",type:"Int32"},{name:"last_time",type:"Int32"},{name:"act_flfish_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23700,"SCMD23700");var SCMD23701=function(){function e(){this.fish_drop_list=[NodeFish_drop_list],this.list=[{name:"act_id",type:"Int32"},{name:"fish_drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23701,"SCMD23701");var SCMD23703=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23703,"SCMD23703");var SCMD23800=function(){function e(){this.target_list=[NodeTarget_list],this.list=[{name:"level",type:"Int16"},{name:"point",type:"Int16"},{name:"target_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23800,"SCMD23800");var SCMD23801=function(){function e(){this.target_list=[NodeTarget_list],this.list=[{name:"level",type:"Int16"},{name:"point",type:"Int16"},{name:"target_id",type:"Int16"},{name:"target_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23801,"SCMD23801");var SCMD23802=function(){function e(){this.list=[{name:"red_dot_flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23802,"SCMD23802");var SCMD23900=function(){function e(){this.list=[{name:"cfg_id",type:"Int32"},{name:"cd",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23900,"SCMD23900");var SCMD23910=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD23910,"SCMD23910");var SCMD24000=function(){function e(){this.list=[{name:"point",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24000,"SCMD24000");var SCMD24010=function(){function e(){this.list=[{name:"six",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24010,"SCMD24010");var SCMD24040=function(){function e(){this.list=[{name:"floor",type:"Int16"},{name:"location",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24040,"SCMD24040");var SCMD24100=function(){function e(){this.pet_weapon_list=[NodePet_weapon],this.list=[{name:"pet_weapon_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24100,"SCMD24100");var SCMD24101=function(){function e(){this.list=[{name:"weapon_type",type:"Int8"},{name:"result",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24101,"SCMD24101");var SCMD24102=function(){function e(){this.list=[{name:"weapon_type",type:"Int8"},{name:"result",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24102,"SCMD24102");var SCMD24103=function(){function e(){this.list=[{name:"weapon_type",type:"Int8"},{name:"result",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24103,"SCMD24103");var SCMD24104=function(){function e(){this.list=[{name:"weapon_type",type:"Int8"},{name:"result",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24104,"SCMD24104");var SCMD24500=function(){function e(){this.drop_list=[NodeDrop_list],this.list=[{name:"drop_list",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24500,"SCMD24500");var SCMD24600=function(){function e(){this.appearance=[NodeAppearance],this.list=[{name:"guild_name",type:"string"},{name:"role_id",type:"Int64"},{name:"role_name",type:"string"},{name:"appearance",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24600,"SCMD24600");var SCMD24601=function(){function e(){this.kfkiller_scores=[NodeKfkiller_scores],this.list=[{name:"index",type:"Int16"},{name:"kfkiller_scores",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24601,"SCMD24601");var SCMD24602=function(){function e(){this.list=[{name:"kill_num",type:"Int16"},{name:"self_score",type:"Int32"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24602,"SCMD24602");var SCMD24610=function(){function e(){this.list=[{name:"kfkiller_id",type:"Int64"},{name:"kfkiller_name",type:"string"},{name:"guild_kill",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24610,"SCMD24610");var SCMD24611=function(){function e(){this.list=[{name:"self_score",type:"Int32"},{name:"floor_kill_num",type:"Int16"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24611,"SCMD24611");var SCMD24612=function(){function e(){this.list=[{name:"obj_type",type:"Int8"},{name:"plat_name",type:"string"},{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24612,"SCMD24612");var SCMD24620=function(){function e(){this.kfkiller_attacks=[NodeKfkiller_attacks],this.list=[{name:"kfkiller_attacks",type:"array"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24620,"SCMD24620");var SCMD24621=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"obj_type",type:"Int8"},{name:"plat_name",type:"string"},{name:"role_id",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24621,"SCMD24621");var SCMD24630=function(){function e(){this.list=[{name:"flag",type:"Int8"},{name:"last_cd",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24630,"SCMD24630");var SCMD24631=function(){function e(){this.list=[{name:"flag",type:"Int8"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24631,"SCMD24631");var SCMD24700=function(){function e(){this.list=[{name:"gold_num",type:"Int64"}]}var t=(__define,e);t.prototype;return e}();egret.registerClass(SCMD24700,"SCMD24700");var LayeroutWindowSkin=function(e){function t(){e.call(this),this.skinName="resource/game_skins/custom/LayeroutWindowSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){},n.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},n.onTouchMove=function(e){},n.childrenCreated=function(){e.prototype.childrenCreated.call(this)},n.onCloseButtonClick=function(e){this.dispatchEvent(new ParamEvent(EventName.WIN_CLOSE,{type:0}))},n.onReturnButtonClick=function(e){this.dispatchEvent(new ParamEvent(EventName.WIN_CLOSE,{type:1}))},n.getBtnReturn=function(){return this.returnButton},n.onBtnReturnSetIndex=function(){this.setChildIndex(this.returnButton,this.numChildren-1)},n.setWindowBgBottom=function(e){this.win_bg.bottom=e},n.setWindowBgSource=function(e){this.win_bg.source=e},n.setImageTitleTop=function(e){this.imageTitle.top=e},n.dispose=function(){var e=this;e.imageTitle&&(e.imageTitle.source=null,e.imageTitle.parent&&e.imageTitle.parent.removeChild(e.imageTitle)),e.imageTitle=null,e.win_headBar&&(e.win_headBar.source=null,e.win_headBar.parent&&e.win_headBar.parent.removeChild(e.win_headBar),e.win_headBar=null),e.removeEventListener(eui.UIEvent.COMPLETE,e.uiCompHandler,e),e.returnButton&&e.returnButton.parent&&e.returnButton.parent.removeChild(e.returnButton),e.skinName=null,e=null},t}(eui.Panel);egret.registerClass(LayeroutWindowSkin,"LayeroutWindowSkin",["eui.UIComponent"]);var RandCircle=function(e){function t(t,i,n,s,a){void 0===n&&(n=3),void 0===s&&(s=100),void 0===a&&(a=0),e.call(this),this.START_Y=50,this.GAP=80,this.MAX_SPEED=10,this.MIN_SPEED=1,this.ACCELERATE=.35;var o=this;o.START_Y=a,o.GAP=s,this.container=new eui.Group,this.addChild(this.container),this._total=i,this._url=t,this._keep=n,this.itemList=[];for(var r=0;r<=this._total;r++){var h=new PicLoader;h.load(rURL(t+r+".png")),h.y=this.START_Y-this.GAP*r,this.container.addChild(h),this.itemList.push(h)}this.curSpeed=0,this.state=0,this.addEventListener(egret.Event.ENTER_FRAME,this.onFrame,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onFrame=function(){if(0!=this.state){1==this.state?this.curSpeed<this.MAX_SPEED&&(this.curSpeed+=this.ACCELERATE+this._keep):2==this.state&&this.START_Y>this.getTargetY()&&this.START_Y-this.getTargetY()<180&&(this.curSpeed=this.curSpeed>this.MIN_SPEED?this.curSpeed-this.ACCELERATE:this.MIN_SPEED);for(var e=0;e<this.itemList.length;e++){var i=this.itemList[e];i.y+=this.curSpeed,i.y>150&&(i.y=this.getHighestOne().y-this.GAP),e==this._tartget&&this.curSpeed<=this.MIN_SPEED&&this.START_Y-this.MIN_SPEED<=Math.floor(i.y)&&Math.floor(i.y)<=this.START_Y&&(i.y=this.START_Y,this.state=0,this.dispatchEvent(new ParamEvent(t.STOP)))}}},n.getHighestOne=function(){for(var e=this.itemList[0],t=0;t<this.itemList.length;t++)this.itemList[t].y<=e.y&&(e=this.itemList[t]);return e},n.play=function(){this.state=1},n.alignToTarget=function(e){this._tartget=e,this.state=2},n.getTargetY=function(){return this.itemList[this._tartget].y},n.dispose=function(){e.prototype.dispose.call(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.onFrame,this),this.container&&(this.container.removeChildren(),this.container=null)},t.STOP="STOP",t}(BaseView);egret.registerClass(RandCircle,"RandCircle");var TipsWord=function(e){function t(t){e.call(this),this._Location=0,this._clearGrowSi=0,this._iconID=t,this._isShowEffect=!0,this.changeIcon(this._iconID),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.onGetClick=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this._isShowEffect=!1,this.disposeGrow()},i(s,"Location",function(){return this.dataConfig?this.dataConfig.Location:this._Location},function(e){this._Location=e}),i(s,"showLevel",function(){return this.dataConfig?this.dataConfig.showLevel:0}),i(s,"rows",function(){return this.dataConfig?this.dataConfig.rows:1}),s.changeIcon=function(e){null==this.icon&&(this.icon=new PicLoader(PicLoader.MAPTILE),this.addChildAt(this.icon,0)),this.icon.load("resource/assets/icon/mainUIBtn/"+this._iconID+".png"),this.dataConfig=TipsWordModel.getInstance().getDataByIconId(this._iconID),this.dataConfig?this.setGrow(this.dataConfig.isGlow>0):Message.show("TipsWord id = "+this._iconID+" 有问题")},s.setGrow=function(e){var t=this;void 0===e&&(e=!0),this._isShowEffect&&e?(this._effect||(this._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("huodong"),-4,-6,this,80,!0)),this._clearGrowSi>0&&clearTimeout(this._clearGrowSi),this._clearGrowSi=setTimeout2(function(){t.disposeGrow()},2e5)):this._effect&&this.disposeGrow()},s.disposeGrow=function(){this._effect&&(this._effect.dispose(),this._effect=null),this._clearGrowSi>0&&clearTimeout(this._clearGrowSi)},i(s,"info",function(){return this.dataConfig}),t.FUBEN="btn_fuben",t.KING="btn_king",t.SHOP_CHEAP="btn_shopch",t.AWAKE="btn_awake",t.BIANQIANG="btn_bianqiang",t.SHADOW="btn_guanghuan",t.KUAFU="btn_kuafu",t.LOGIN_REWARD="btn_login",t.MAIL="btn_mail",t.FRIEND="btn_friend",t.KFSHOPEQUIP="btn_zhuangbei",t.GUILD="btn_gonghui",t.FULI="btn_fuli",t.GUIZU="btn_guizu",t.LUNHUI="btn_lunhui",t.SHENQI="btn_shenqi",t.HEFU="btn_hefu",t.FIRST_CHARGE="btn_firstcharge",t.FANLI="btn_fanli",t.CHARGE="btn_chongzhi",t.ACTIVITY_BACK="btn_huigui",t.ACTIVITY_YY="btn_yuyue",t.ACTIVITY_OFF="btn_lixian",t.QQ_VIP="btn_qqvip",t.SUPER_VIP="btn_supvip",t.SHUANG_11="btn_shaung11",t.QQ_COVER="btn_cover",t.PK_SKILL="btn_jueji",t.RANK="btn_paihang",t}(Csprite);egret.registerClass(TipsWord,"TipsWord");var AppearanceUtil=function(){function e(){}var t=(__define,e);t.prototype;return e.changeAppListToVo=function(e){for(var t,i=new AppearanceVO,n=0;n<e.length;n++)t=e[n],i.setValue(t.key,t.value);return i},e.checkAppVoDiff=function(e,t){return null==e||null==t?!0:e.cloth!=t.cloth||e.wing!=t.wing?!0:e.weaponFashion!=t.weaponFashion||e.wingFashion!=t.wingFashion?!0:e.title!=t.title||e.weapon!=t.weapon?!0:e.clothFashion!=t.clothFashion?!0:e.ring!=t.ring?!0:e.pet!=t.pet?!0:e.pet_weapon_10!=t.pet_weapon_10?!0:e.pet_weapon_11!=t.pet_weapon_11?!0:e.pet_weapon_12!=t.pet_weapon_12?!0:!1},e}();egret.registerClass(AppearanceUtil,"AppearanceUtil");var ColorUtil=function(){function e(){}var t=(__define,e);t.prototype;return e.getGoodColor=function(e){return e==GoodsType.COLOR_WHITE?"#939393":e==GoodsType.COLOR_GREEN?"#00d228":e==GoodsType.COLOR_BLUE?"#02a4e7":e==GoodsType.COLOR_PURPLE?"#ae58ca":e==GoodsType.COLOR_ORANGE?"#ff7200":e==GoodsType.COLOR_RED?"#e31101":e==GoodsType.COLOR_GOLD?"#ffd200":"#939393"},e.getGoodColorNumber=function(e){return e==GoodsType.COLOR_WHITE?9671571:e==GoodsType.COLOR_GREEN?53800:e==GoodsType.COLOR_BLUE?173287:e==GoodsType.COLOR_PURPLE?11425994:e==GoodsType.COLOR_ORANGE?16740864:e==GoodsType.COLOR_RED?14881025:e==GoodsType.COLOR_GOLD?16765440:9671571},e.getColorHtmlStr=function(e,t){return"<font color='"+t+"'>"+e+"</font>"},e.getGoodsHtmlName=function(t,i){void 0===i&&(i=0);var n="",s=GoodsListProxy.getInstance().getGoodsInfoByType(t);return null==s?n:(n=StringUtil.substitute("<font color='{0}'>{1}</font>",e.getGoodColor(s.quality-1),s.name),i>0&&(n=StringUtil.substitute("{0}x{1}",n,Tools.convertNumber(i))),n)},e.COLOR_WHITE="#939393",e.COLOR_GREEN="#00d228",e.COLOR_BLUE="#02a4e7",e.COLOR_PURPLE="#ae58ca",e.COLOR_ORANGE="#ff7200",e.COLOR_RED="#e31101",e.COLOR_GOLD="#ffd200",e}();egret.registerClass(ColorUtil,"ColorUtil");var FilterText=function(e){function t(){e.call(this),this._splitReg=/(\n|\r)+/gm,this._wordMap=new Object,this.createWord(),this.createWordOther()
}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.createWord=function(){for(var e,t=DataManager.getInstance().getObj("data_word"),i=t.data_word,n=0;n<i.length;n++)e=i[n],this.addWord(e.keyword)},n.createWordOther=function(){for(var e,t=DataManager.getInstance().getObj("data_word_other"),i=t.data_word_other,n=0;n<i.length;n++)e=i[n],this.addWord(e.keyword)},n.addWord=function(e){if(e=e.replace("\n",""),e=e.replace("(","\\("),e=e.replace(")","\\)"),e=e.replace("*","\\*"),e=e.replace("^","\\^"),e=e.replace("$","\\$"),e=e.replace("@","\\@"),e=e.replace("!","\\!"),e=e.replace("&","\\&"),e=e.replace("#","\\#"),null!=e&&e.length>0){var t,i=e.charAt(0);t=this._wordMap[i],t?this._wordMap[i]+="|"+e:this._wordMap[i]=e}},n.getFilterStr=function(e){if(!isFilterTxt)return e;if(null==e||""==e)return"";for(var t,i,n=e.length,s=new Object,a=0;n>a;a++)if(t=e.charAt(a),"*"!=t&&null==s[t]){i=this._wordMap[t];try{i=this._wordMap[t]=new RegExp("("+i+")","img")}catch(o){return e}e=e.replace(i,this.regHandler),s[t]=i}return e},n.regHandler=function(){var e=arguments[1].toString();return e.replace(/.{1}/g,"*")},n.isHaveFilterTxt=function(e){var t=this.getFilterStr(e);return!(t==e)},t}(egret.EventDispatcher);egret.registerClass(FilterText,"FilterText");var HtmlUtil=function(){function e(){}var t=(__define,e);t.prototype;return e.font=function(e,t){var i="<font color='"+t+"'>"+e+"</font>";return i},e.link=function(e){var t="<font><u>"+e+"</u></font>";return t},e.bold=function(e){var t="<font><b>"+e+"</b></font>";return t},e}();egret.registerClass(HtmlUtil,"HtmlUtil");var LoginLang=function(){function e(){}var t=(__define,e);t.prototype;return e.getChangeRandomName=function(){var t="",i=[];return i=e._surnameList.concat(e._surnameList_man),t=i[Math.floor(i.length*Math.random())]+e._forenameList_man_0[Math.floor(e._forenameList_man_0.length*Math.random())],FilterText.getInstance().isHaveFilterTxt(t)?e.getChangeRandomName():t},e._surnameConvoyList=["采花","柔情","夜战","刚猛","啪啪","多情","无情","留情","惊艳","寂寞","空虚","挑逗","妩媚","长腿","白嫩","水灵"],e._nameCovoyList=["俏皮哥","敏捷哥","乐观哥","调皮哥","爽脆哥","爽朗哥","豪爽哥","正直哥","直率哥","直爽哥","干脆哥","直言哥","爽直哥","刚直哥","憨直哥","率直哥","耿直哥","公正哥","公道哥","公平哥","公允哥","正派哥","爽快哥","简捷哥","开阔哥","豁达哥","明朗哥","率真哥","真诚哥","热诚哥","至诚哥","赤诚哥","诚挚哥","恳切哥","纯真哥","坦率哥","笃实哥","拳拳哥","平实哥","老实哥","规矩哥","正经哥","忠厚哥","敦厚哥","温厚哥","宽厚哥","憨厚哥","纯朴哥","诚笃哥","诚恳哥","诚心哥","诚意哥","赤忱哥","竭诚哥","恳挚哥","虔诚哥","真挚哥","衷心哥","狡猾哥","狡黠哥","狡诈哥","诡谲哥","刁滑哥","伪善哥","虚伪哥","虚假哥","刻薄哥","尖刻哥","虚浮哥","虚构哥","虚拟哥","虚幻哥","虚夸哥","虚名哥","虚妄哥","虚造哥","假冒哥","假充哥","冒充哥","假相哥","假象哥","冒名哥","挂名哥","应名哥","名义哥","无稽哥","子虚哥","捏造哥","生造哥","编造哥","热忱哥","热心哥","好客哥","客气哥","殷勤哥","和气哥","和蔼哥","和善哥","和婉哥","和悦哥","和易哥","亲切哥","过谦哥","谦卑哥","谦恭哥","谦和哥","谦让哥","谦虚哥","谦逊哥","虚心哥","自谦哥","刚强哥","倔强哥","顽强哥","强硬哥","强悍哥","强劲哥","坚决哥","坚信哥","坚定哥","坚韧哥","坚实哥","坚毅哥","坚贞哥","中坚哥","毅力哥","骠悍哥","勇敢哥","勇猛哥","刚毅哥","决断哥","果敢哥","果决哥","坚强哥","坚忍哥","决然哥","毅然哥","定弦哥","断然哥","泼辣哥","断腕哥","断行哥","决意哥","决计哥","主意哥","作意哥","锐意哥","发誓哥","果断哥","温存哥","委婉哥","婉言哥","含蓄哥","婉转哥","婉约哥","缓和哥","仁慈哥","慈善哥","慈祥哥","慈悲哥","温和哥","心善哥","同情哥","慈和哥","和缓哥","和顺哥","平和哥","顺和哥","温顺哥","温驯哥","温雅哥","善心哥","善意哥","善行哥","善举哥","慈爱哥","焦躁哥","烦躁哥","性急哥","急性哥","浮躁哥","暴躁哥","暴烈哥","粗暴哥","凶恶哥","凶恨哥","急躁哥","凶暴哥","凶悍哥","强暴哥","邪恶哥","恶毒哥","阴险哥","险恶哥","险诈哥","蛮横哥","强横哥","强梁哥","凶狂哥","凶横哥","凶猛哥","凶虐哥","狰狞哥","暴虐哥","残暴哥","懦弱哥","孱弱哥","软弱哥","脆弱哥","怯懦哥","胆怯哥","胆小哥","腼腆哥","羞涩哥","羞怯弟","尴尬弟","拘谨弟","拘束弟","拘板弟","拘泥弟","拘礼弟","矜持弟","局促弟","谨饬弟","谨慎弟","谨严弟","审慎弟","小心弟","弱质弟","安静弟","安详弟","安稳弟","安闲弟","娴雅弟","悠闲弟","恬静弟","娴静弟","寂静弟","清静弟","沉静弟","肃静弟","悲观弟","失望弟","黯淡弟","郁闷弟","悠雅弟","悠然弟","闲适弟","闲静弟","淡漠弟","平稳弟","平静弟","平淡弟","安逸弟","安祥弟","安然弟","安宁弟","安神弟","淑静弟","静谧弟","静默弟","沉默弟","缄默弟","沉闷弟","沉郁弟","阴郁弟","阴沉弟","沉着弟","沮丧弟","气馁弟","丧气弟","灰心弟","委靡弟","俏皮姐","敏捷姐","乐观姐","调皮姐","爽脆姐","爽朗姐","豪爽姐","正直姐","直率姐","直爽姐","干脆姐","直言姐","爽直姐","刚直姐","憨直姐","率直姐","耿直姐","公正姐","公道姐","公平姐","公允姐","正派姐","爽快姐","简捷姐","开阔姐","豁达姐","明朗姐","率真姐","真诚姐","热诚姐","至诚姐","赤诚姐","诚挚姐","恳切姐","纯真姐","坦率姐","笃实姐","拳拳姐","平实姐","老实姐","规矩姐","正经姐","忠厚姐","敦厚姐","温厚姐","宽厚姐","憨厚姐","纯朴姐","诚笃姐","诚恳姐","诚心姐","诚意姐","赤忱姐","竭诚姐","恳挚姐","虔诚姐","真挚姐","衷心姐","狡猾姐","狡黠姐","狡诈姐","诡谲姐","刁滑姐","伪善姐","虚伪姐","虚假姐","刻薄姐","尖刻姐","虚浮姐","虚构姐","虚拟姐","虚幻姐","虚夸姐","虚名姐","虚妄姐","虚造姐","假冒姐","假充姐","冒充姐","假相姐","假象姐","冒名姐","挂名姐","应名姐","名义姐","无稽姐","子虚姐","捏造姐","生造姐","编造姐","热忱姐","热心姐","好客姐","客气姐","殷勤姐","和气姐","和蔼姐","和善姐","和婉姐","和悦姐","和易姐","亲切姐","过谦姐","谦卑姐","谦恭姐","谦和姐","谦让姐","谦虚姐","谦逊姐","虚心姐","自谦姐","刚强姐","倔强姐","顽强姐","强硬姐","强悍姐","强劲姐","坚决姐","坚信姐","坚定姐","坚韧姐","坚实姐","坚毅姐","坚贞姐","中坚姐","毅力姐","骠悍姐","勇敢姐","勇猛姐","刚毅姐","决断姐","果敢姐","果决姐","坚强姐","坚忍姐","决然姐","毅然姐","定弦姐","断然姐","泼辣姐","断腕姐","断行姐","决意姐","决计姐","主意姐","作意姐","锐意姐","发誓姐","果断姐","温存姐","委婉姐","婉言姐","含蓄姐","婉转姐","婉约姐","缓和姐","仁慈姐","慈善姐","慈祥姐","慈悲姐","温和姐","心善姐","同情姐","慈和姐","和缓姐","和顺姐","平和姐","顺和姐","温顺姐","温驯姐","温雅姐","善心姐","善意姐","善行姐","善举姐","慈爱姐","焦躁姐","烦躁姐","性急姐","急性姐","浮躁姐","暴躁姐","暴烈姐","粗暴姐","凶恶姐","凶恨姐","急躁姐","凶暴姐","凶悍姐","强暴姐","邪恶姐","恶毒姐","阴险姐","险恶姐","险诈姐","蛮横姐","强横姐","强梁姐","凶狂姐","凶横姐","凶猛姐","凶虐姐","狰狞姐","暴虐姐","残暴姐","懦弱姐","孱弱姐","软弱姐","脆弱姐","怯懦姐","胆怯姐","胆小姐","腼腆姐","羞涩姐","羞怯姐","尴尬姐","拘谨姐","拘束姐","拘板姐","拘泥姐","拘礼姐","矜持姐","局促姐","谨饬姐","谨慎姐","谨严姐","审慎姐","小心姐","弱质姐","安静姐","安详姐","安稳姐","安闲姐","娴雅姐","悠闲姐","恬静姐","娴静姐","寂静姐","清静姐","沉静姐","肃静姐","悲观姐","失望姐","黯淡姐","郁闷姐","悠雅姐","悠然姐","闲适姐","闲静姐","淡漠姐","平稳姐","平静姐","平淡姐","安逸姐","安祥姐","安然姐","安宁姐","安神姐","淑静姐","静谧姐","静默姐","沉默姐","缄默姐","沉闷姐","沉郁姐","阴郁姐","阴沉姐","沉着姐","沮丧姐","气馁姐","丧气姐","灰心姐","委靡姐"],e._surnameHonourList=["伪.剑兵","伪.枪兵","伪.魔道","伪.狂战","伪.刺客","伪.骑士","伪.弓手"],e._nameHonourList=["No.1","No.2","No.3","No.4","No.5","No.6","No.7","No.8","No.9","No.10","No.11","No.12","No.13","No.14","No.15","No.16","No.17","No.18","No.19","No.20","No.21","No.22","No.23","No.24","No.25","No.26","No.27","No.28","No.29","No.30","No.31","No.32","No.33","No.34","No.35","No.36","No.37","No.38","No.39","No.40","No.41","No.42","No.43","No.44","No.45","No.46","No.47","No.48","No.49","No.50","No51","No.52","No.53","No.54","No.55","No.56","No.57","No.58","No.59","No.60","No.61","No.62","No.63","No.64","No.65","No.66","No.67","No.68","No.69","No.70","No.71","No.72","No.73","No.74","No.75","No.76","No.77","No.78","No.79","No.80","No.81","No.82","No.83","No.84","No.85","No.86","No.87","No.88","No.89","No.90","No.91","No.92","No.93","No.94","No.95","No.96","No.97","No.98","No.99","No.100","No.101","No.102","No.103","No.104","No.105","No.106","No.107","No.108","No.109","No.110","No.111","No.112","No.113","No.114","No.115","No.116","No.117","No.118","No.119","No.120","No.121","No.122","No.123","No.124","No.125","No.126","No.127","No.128","No.129","No.130","No.131","No.132","No.133","No.134","No.135","No.136","No.137","No.138","No.139","No.140","No.141","No.142","No.143","No.144","No.145","No.146","No.147","No.148","No.149","No.150","No.151","No.152","No.153","No.154","No.155","No.156","No.157","No.158","No.159","No.160","No.161","No.162","No.163","No.164","No.165","No.166","No.167","No.168","No.169","No.170","No.171","No.172","No.173","No.174","No.175","No.176","No.177","No.178","No.179","No.180","No.181","No.182","No.183","No.184","No.185","No.186","No.187","No.188","No.189","No.190","No.191","No.192","No.193","No.194","No.195","No.196","No.197","No.198","No.199","No.200","No.201","No.202","No.203","No.204","No.205","No.206","No.207","No.208","No.209","No.210","No.211","No.212","No.213","No.214","No.215","No.216","No.217","No.218","No.219","No.220","No.221","No.222","No.223","No.224","No.225","No.226","No.227","No.228","No.229","No.230","No.231","No.232","No.233","No.234","No.235","No.236","No.237","No.238","No.239","No.240","No.241","No.242","No.243","No.244","No.245","No.246","No.247","No.248","No.249","No.250","No.251","No.252","No.253","No.254","No.255","No.256","No.257","No.258","No.259","No.260","No.261","No.262","No.263","No.264","No.265","No.266","No.267","No.268","No.269","No.270","No.271","No.272","No.273","No.274","No.275","No.276","No.277","No.278","No.279","No.280","No.281","No.282","No.283","No.284","No.285","No.286","No.287","No.288","No.289","No.290","No.291","No.292","No.293","No.294","No.295","No.296","No.297","No.298","No.299","No.300","No.301","No.302","No.303","No.304","No.305","No.306","No.307","No.308","No.309","No.310","No.311","No.312","No.313","No.314","No.315","No.316","No.317","No.318","No.319","No.320","No.321","No.322","No.323","No.324","No.325","No.326","No.327","No.328","No.329","No.330","No.331","No.332","No.333","No.334","No.335","No.336","No.337","No.338","No.339","No.340","No.341","No.342","No.343","No.344","No.345","No.346","No.347","No.348","No.349","No.350","No.351","No.352","No.353","No.354","No.355","No.356","No.357","No.358","No.359","No.360","No.361","No.362","No.363","No.364","No.365","No.366","No.367","No.368","No.369","No.370","No.371","No.372","No.373","No.374","No.375","No.376","No.377","No.378","No.379","No.380","No.381","No.382","No.383","No.384","No.385","No.386","No.387","No.388","No.389","No.390","No.391","No.392","No.393","No.394","No.395","No.396","No.397","No.398","No.399","No.400","No.401","No.402","No.403","No.404","No.405","No.406","No.407","No.408","No.409","No.410","No.411","No.412","No.413","No.414","No.415","No.416","No.417","No.418","No.419","No.420","No.421","No.422","No.423","No.424","No.425","No.426","No.427","No.428","No.429","No.430","No.431","No.432","No.433","No.434","No.435","No.436","No.437","No.438","No.439","No.440","No.441","No.442","No.443","No.444","No.445","No.446","No.447","No.448","No.449","No.450","No.451","No.452","No.453","No.454","No.455","No.456","No.457","No.458","No.459","No.460","No.461","No.462","No.463","No.464","No.465","No.466","No.467","No.468","No.469","No.470","No.471","No.472","No.473","No.474","No.475","No.476","No.477","No.478","No.479","No.480","No.481","No.482","No.483","No.484","No.485","No.486","No.487","No.488","No.489","No.490","No.491","No.492","No.493","No.494","No.495","No.496","No.497","No.498","No.499","No.500","No.501","No.502","No.503","No.504","No.505","No.506","No.507","No.508","No.509","No.510","No.511","No.512","No.513","No.514","No.515","No.516","No.517","No.518","No.519","No.520","No.521","No.522","No.523","No.524","No.525","No.526","No.527","No.528","No.529","No.530","No.531","No.532","No.533","No.534","No.535","No.536","No.537","No.538","No.539","No.540","No.541","No.542","No.543","No.544","No.545","No.546","No.547","No.548","No.549","No.550","No.551","No.552","No.553","No.554","No.555","No.556","No.557","No.558","No.559","No.560","No.561","No.562","No.563","No.564","No.565","No.566","No.567","No.568","No.569","No.570","No.571","No.572","No.573","No.574","No.575","No.576","No.577","No.578","No.579","No.580","No.581","No.582","No.583","No.584","No.585","No.586","No.587","No.588","No.589","No.590","No.591","No.592","No.593","No.594","No.595","No.596","No.597","No.598","No.599","No.600","No.601","No.602","No.603","No.604","No.605","No.606","No.607","No.608","No.609","No.610","No.611","No.612","No.613","No.614","No.615","No.616","No.617","No.618","No.619","No.620","No.621","No.622","No.623","No.624","No.625","No.626","No.627","No.628","No.629","No.630","No.631","No.632","No.633","No.634","No.635","No.636","No.637","No.638","No.639","No.640","No.641","No.642","No.643","No.644","No.645","No.646","No.647","No.648","No.649","No.650","No.651","No.652","No.653","No.654","No.655","No.656","No.657","No.658","No.659","No.660","No.661","No.662","No.663","No.664","No.665","No.666","No.667","No.668","No.669","No.670","No.671","No.672","No.673","No.674","No.675","No.676","No.677","No.678","No.679","No.680","No.681","No.682","No.683","No.684","No.685","No.686","No.687","No.688","No.689","No.690","No.691","No.692","No.693","No.694","No.695","No.696","No.697","No.698","No.699","No.700","No.701","No.702","No.703","No.704","No.705","No.706","No.707","No.708","No.709","No.710","No.711","No.712","No.713","No.714","No.715","No.716","No.717","No.718","No.719","No.720","No.721","No.722","No.723","No.724","No.725","No.726","No.727","No.728","No.729","No.730","No.731","No.732","No.733","No.734","No.735","No.736","No.737","No.738","No.739","No.740","No.741","No.742","No.743","No.744","No.745","No.746","No.747","No.748","No.749","No.750","No.751","No.752","No.753","No.754","No.755","No.756","No.757","No.758","No.759","No.760","No.761","No.762","No.763","No.764","No.765","No.766","No.767","No.768","No.769","No.770","No.771","No.772","No.773","No.774","No.775","No.776","No.777","No.778","No.779","No.780","No.781","No.782","No.783","No.784","No.785","No.786","No.787","No.788","No.789","No.790","No.791","No.792","No.793","No.794","No.795","No.796","No.797","No.798","No.799"],e._surnameList_s=["★","∷","﹌","￡","卐","々","∪","∩","∈","∏","〃","ミ","灬","⌒","ω","＊","≮","≯","∮","∴","√","¤","♀","♂","∞","↘","↙","▂","℃","℉","¤","℅","?","＄","≒","?","o","?","?","Ж","Ф","Э","Ю","Я","Ч","З"],e._surnameList=["黑衣の","闪光の","狂暴の","独行の","利刃の","疾风の","迅雷の","铁壁の","不破の","孤傲の","奇迹の","流浪の","守卫の","穿云の","绯红の","美妙の","流丽の","料理の","车工の","铁锤の","爆弹の","狂刀の","信蜂の","雀尾の","大鳌の","豪腕の","蛇眼の","蛇牙の","赤炎の","赤眼の","邪眼の","神速の","光芒の","暴风の","流岚の","清泉の","海皇の","闪电の","圣光の","神奇の","原力の","震波の","独行的","终末的","超越的","心灵的","编织者","飞升者","妄想者","梦想者","驱逐者","勇者","贤者","先知","猎手","狩人","盗圣","狼神","行者","厉害的","妄言者","万刃の","魔剑の","天王の","恶魔の","天使の","叛逆的","救赎的","东方的","皇族的","果敢的","公牛之","山羊之","老虎之","豹猫之","爱恋之","爱憎之","微笑之","无影之","幻影之","巨力之","技巧之","玲珑之","风斩之","龙王之","孤僻之","不屈之","双剑之","逐风之","潜行之","冰凝之","铸剑之","炮手之","刺客之","驭龙之","铁剑之","流浪之","骑手之","圣洁之","博爱哒","正义哒","美德哒","巧舌哒","流浪哒","奔跑哒","帅帅哒","傲娇哒","骄傲哒","卖萌哒","风流哒","隐者","神秘哒","尊贵哒","修罗","沉默哒","冰雨之","无聊哒","酷酷哒","崩坏者","破碎者","假面之","骑士","斩人の","幸存の","进击の","巨人の","七巧の","夙夜の","热月の","胭脂の","双面的","追寻者","讨伐者","秘之","穿越者","光明的","七曜的","灵巧的","圣洁的","冠军的","印记者","獠牙的","圆滑的","九头的","九命的","迅足的","神枪的","老练的","唯一的","疯狂的","传颂的","天真的","晨星の","七星之","朝阳之","凌云者","子夜之","琉璃之","极冰之","炽热之","军神","武神","战神","叛逆者","星瞳之","旅行的","向导","采掘者","裁决者","双极的","厄运的","梦魇之","救世之","绝美的","暴走的","血之","怒之","龙之","红之","白之","黑之","青之","罪之","天之","剑之","神之","红粉","蔚蓝","洁白","低语者","无言者","轻狂的","勇敢的","年少的","霸道的","慷慨的","诚实的","忠诚的","冷眼的","欢乐的","善良的","魔力的","无畏的","失落的","呆萌哒","黑客","千变の","顶之","富有的","幽默的","悲伤的","敏捷的","神意之","无尽的","贵族哒","帅气的","沧桑的","忧伤的","斯文的","狂傲的","疯狂的","探索者","赏金的","独眼的","守望者","追梦者","滑行者","武斗的","疼痛的","猜测的","奔腾的","潇洒的","长久的","模仿的","固定的","寒冷的","深思的","奇怪的","无敌的","漂浮的","特殊的","虚假的","遥望的","微弱的","消灭的","珍贵的","祝愿的","缠绕的","颤抖的","抚摩的","柔软的","思恋的","思凡的","思致的","思维的","思潮的","思忆的","思想的","馨香的","飘散的","舒展的","娇美的","神韵的","恬静的","醉人的","素雅的","娇嫩的","幽香的","淡雅的","朴素的","花瓣的","花蕊的","花粉的","鲜花的","怒气的","孤单的","寂寞的","寂寥的","落寞的","孤独的","寂静的","囧囧的","宁静的","寂然的","清静的","沉寂的","沉静的","安静的","孤立的","伶仃的","孤单的","零落的","落莫的","动静的","呼吸的","朝夕的","取舍的","善恶的","兴衰的","祸福的","甘苦的","彼此的","吞吐的","黑白的","是非的","多少的","真假的","虚实的","反正的","悲欢的","前后的","始末的","早晚的","昼夜的","曲直的","东西的","善恶的","南北的","开关的","左右的","眷恋的","留恋的","依恋的","迷恋的","自恋的","爱恋的","失恋的","贪恋的","思恋的","热恋的","怀恋的","初恋的","顾恋的","流恋的","恋恋的","悲恋的","相恋的","婉恋的","忆恋的","积恋的","恳恋的","情恋的","凝恋的","耽恋的","欣恋的","绻恋的","感恋的","单恋的","遐恋的","嫪恋的","安恋的","慕恋的","兴奋的","快乐的","喜悦的","愉快的","畅快的","欢畅的","欢喜的","欢腾的","欢快的","欣喜的","积恋的","恳恋的","情恋的","凝恋的","耽恋的","欣恋的","绻恋的","感恋的","单恋的","遐恋的","嫪恋的","安恋的","慕恋的","激奋的","激昂的","激情的","敬佩的","佩服的","崇拜的","钦仰的","惊恐的","惊慌的","怒斥的","怒吼的","震怒的","气愤的","忧伤的","伤感的","瘦削的","俊美的","恬静的","慈祥的","苍白的","白皙的","清秀的","光滑的","英俊的","红润的","挺直的","扁平的","小巧的","笔直的","端庄的","秀气的","秀美的","巧嘴的","朱唇的","苍白的","娇嫩的","整齐的","整洁的","雪白的","洁净的","蓬松的","鲜嫩的","粉红的","通红的","红嫩的","滑润的","滋润的","洁白的","苗条的","丰满的","强壮的","清秀的","单薄的","文弱的","轩昂的","多疑的","可爱的","山高的","水深的","天高的","地厚的","拥有的","凑整的","仿佛的","苍茫的","参差的","丢失的","幻灭的","使令的","香甜的","漂亮的","圆滑的","机智的","单调的","快速的","浓厚的","迅速的","悄悄的","雷霆的","欣喜的","奔腾的","长久的","模仿的","固定的","寒冷的","奇怪的","整齐的","漂浮的","特殊的","遥望的","微弱的","消灭的","珍贵的","祝愿的","缠绕的","颤抖的","抚摩的","拉扯的","柔软的","明亮的","宽敞的"],e._surnameList_man=["北京","天津","河北","山西","内蒙古","辽宁","吉林","黑龙江","上海","江苏","浙江","安徽","福建","江西","山东","河南","湖北","湖南","广东","广西","海南","重庆市","四川","贵州","云南","西藏","陕西","甘肃","青海","宁夏","香港","澳门","台湾","花钱曰下的","有容奶大的","粪发涂墙的","天天想上的","以精致洞的","弟大勿搏的","精候佳阴的","笑傲浆糊的","四裤全输的","流精岁月的","疯牛涕淌的","久硬真惊的","儿童不遗的","蒂大物勃的","根深蒂固的","越王够溅的","为你直着的","挥精如土的","欲黄大帝的","凌空铲射的","合久必婚的","人溅仍爱的","阴词艳语的","曰后再说的","深入浅出的","双管齐下的","曰理万机的","鞭长莫及的","深不可测的","曰久生情的","夜夜笙箫的","上下其手的","直捣黄龙的","知根知底的","精疲力尽的","善解人衣的","药店碧莲的","汝来伸掌的","学富五车的","满腹经纶的","才高八斗的","学贯中西的","博学多才的","博古通今的","鸟语花香的","百花齐放的","繁花似锦的","桃红柳绿的","春色满园的","春意盎然的","秋高气爽的","丹桂飘香的","天高云淡的","红叶似火的","金风送爽的","硕果累累的","美如冠玉的","眉清目秀的","闭月羞花的","国色天香的","如花似玉的","鹤发童颜的","坐立不安的","心急如焚的","焦急万分的","心急火燎的","迫在眉睫的","危在旦夕的","千钧一发的","燃眉之急的","火上眉梢的","刻不容缓的","冥思苦想的","东张西望的","抓耳挠腮的","聚精会神的","专心致志的","左顾右盼的","一泻千里的","惊涛骇浪的","波峰浪谷的","浊浪排空的","波澜壮阔的","风急浪高的","喜上眉梢的","喜闻乐见的","喜形于色的","喜笑颜开的","喜气洋洋的","喜出望外的","前赴后继的","冲锋陷阵的","赴汤蹈火的","视死如归的","奋不顾身的","舍生忘死的","妙语连珠的","出口成章的","伶牙俐齿的","侃侃而谈的","口若悬河的","滔滔不绝的","粲然一笑的","哄堂大笑的","眉开眼笑的","捧腹大笑的","破涕为笑的","嫣然一笑的","神采奕奕的","精神抖擞的","容光焕发的","神采飞扬的","意气风发的","精神焕发的","卓尔不群的","永垂不朽的","一丝不苟的","无微不至的","一尘不染的","六亲不认的","四面楚歌的","纸上谈兵的","背水一战的","负荆请罪的","卧薪尝胆的","心慌意乱的","惊慌失措的","惶恐不安的","慌不择路的","落荒而逃的","平易近人的","和蔼可亲的","合声细语的","笑容可掬的","笑容满面的","三心二意的","一心一意的","横七竖八的","七嘴八舌的"],e._surnameList_wonman=["北京","天津","河北","山西","内蒙古","辽宁","吉林","黑龙江","上海","江苏","浙江","安徽","福建","江西","山东","河南","湖北","湖南","广东","广西","海南","重庆市","四川","贵州","云南","西藏","陕西","甘肃","青海","宁夏","香港","澳门","台湾","花钱曰下的","有容奶大的","粪发涂墙的","天天想上的","以精致洞的","弟大勿搏的","精候佳阴的","笑傲浆糊的","四裤全输的","流精岁月的","疯牛涕淌的","久硬真惊的","儿童不遗的","蒂大物勃的","根深蒂固的","越王够溅的","为你直着的","挥精如土的","欲黄大帝的","凌空铲射的","合久必婚的","人溅仍爱的","阴词艳语的","曰后再说的","深入浅出的","双管齐下的","曰理万机的","鞭长莫及的","深不可测的","曰久生情的","夜夜笙箫的","上下其手的","直捣黄龙的","知根知底的","精疲力尽的","善解人衣的","药店碧莲的","汝来伸掌的","学富五车的","满腹经纶的","才高八斗的","学贯中西的","博学多才的","博古通今的","鸟语花香的","百花齐放的","繁花似锦的","桃红柳绿的","春色满园的","春意盎然的","秋高气爽的","丹桂飘香的","天高云淡的","红叶似火的","金风送爽的","硕果累累的","美如冠玉的","眉清目秀的","闭月羞花的","国色天香的","如花似玉的","鹤发童颜的","坐立不安的","心急如焚的","焦急万分的","心急火燎的","迫在眉睫的","危在旦夕的","千钧一发的","燃眉之急的","火上眉梢的","刻不容缓的","冥思苦想的","东张西望的","抓耳挠腮的","聚精会神的","专心致志的","左顾右盼的","一泻千里的","惊涛骇浪的","波峰浪谷的","浊浪排空的","波澜壮阔的","风急浪高的","喜上眉梢的","喜闻乐见的","喜形于色的","喜笑颜开的","喜气洋洋的","喜出望外的","前赴后继的","冲锋陷阵的","赴汤蹈火的","视死如归的","奋不顾身的","舍生忘死的","妙语连珠的","出口成章的","伶牙俐齿的","侃侃而谈的","口若悬河的","滔滔不绝的","粲然一笑的","哄堂大笑的","眉开眼笑的","捧腹大笑的","破涕为笑的","嫣然一笑的","神采奕奕的","精神抖擞的","容光焕发的","神采飞扬的","意气风发的","精神焕发的","卓尔不群的","永垂不朽的","一丝不苟的","无微不至的","一尘不染的","六亲不认的","四面楚歌的","纸上谈兵的","背水一战的","负荆请罪的","卧薪尝胆的","心慌意乱的","惊慌失措的","惶恐不安的","慌不择路的","落荒而逃的","平易近人的","和蔼可亲的","合声细语的","笑容可掬的","笑容满面的","三心二意的","一心一意的","横七竖八的","七嘴八舌的"],e._forenameList_man_0=["传说","传奇","神话","傳奇","傳說","神話","少爺","拽爺","公子","师兄","师弟","小子","王子","奇葩","左手","右手","左耳","右耳","三胖","真龙","真龍","少男","石头","靓仔","帅哥","美男","小帅","战将","战灵","战神","战仙","战魔","狂战","狂刀","狂神","医仙","神医","魔医","剑仙","盗皇","盗圣","盗贼","海盗","海贼","海皇","海王","海神","天皇","天神","天将","真仙","神仙","潮男","英雄","英豪","豪侠","饭团","土豆","天君","仙君","神君","魔君","鬼王","鬼奴","刀奴","剑奴","刀魔","剑魔","刀魂","剑灵","仙师","天师","帝君","帝皇","直男","正太","大叔","战歌","邪神","邪魔","邪仙","邪王","邪皇","邪医","狂仙","天魔","鬼泣","邪君","大帝","小白","菜鸟","宅男","邪僧","小僧","高僧","贫僧","力士","壮男","米粉","家丁","酒徒","赌徒","狂徒","门徒","阿呆","圣王","圣君","大圣","歪男","怪咖","大咖","麻豆","大少","星魂","神皇","神王","神帝","狂少","酷少","剑心","剑仙","罗汉","红尘","男神","渣男","汉子","款爺","吃货","天尊","马甲","书生","太子","刀客","剑客","浪客","浪人","诗人","痞子","武士","武痴","武圣","武神","武帝","圣帝","死神","魔师","咒师","拳王","拳霸","拳皇","灵将","魔修","鬼修","魔王","魔帝","魔皇","学长","尐爺","霸主","霸王","罗刹","流火","学霸","贵族","伯爵","游侠","方士","大师","备胎","剑豪","邪少","疯子","坏坏","老鬼","尐豬","爺们","少年","Kimi","高手","楼主","江湖","无烟"],e._forenameList_woman_0=["小姐","侍女","拽妞","姑娘","师妹","师姐","丫头","公主","奇葩","左手","右手","左耳","右耳","迷情","喵喵","叮叮","当当","小伊","胖妞","龙女","龍女","少女","森碟","靓妞","美女","美妞","妞妞","蝶舞","妖妖","妖精","琴仙","倾城","倾国","红尘","天仙","飞仙","魔女","魔皇","魔后","皇后","叮当","欣儿","馨儿","昕儿","潮女","直女","萝莉","瑜姐","彩虹","清风","白雪","筱雪","听雨","听风","听雪","听海","青霜","追月","追风","若曦","若兮","若惜","若熙","若汐","如风","如梦","如诗","如歌","寵妃","花颜","花痴","花非","貂蝉","饭团","饭饭","小熙","Lady","楚楚","薇薇","维维","丫丫","萌萌","小白","宅女","灵儿","灵珊","牙牙","芙蓉","女王","师太","菇娘","芷若","天使","嬛嬛","婠婠","巫女","女巫","巫婆","婆婆","淑女","语嫣","梦蝶","伊人","风铃","凤凰","甜心","悠悠","嫣然","朵朵","玫瑰","海棠","小安","回忆","親親","清荷","盈盈","蔷薇","宝宝","宝贝","妖狐","若兰","学姐","学妹","米粉","嫣兒","猫奴","舞娘","女仆","歪女","怪咖","大咖","豆豆","女神","圣女","剩女","富婆","吃货","仙尊","仙子","马甲","夜叉","学霸","贵族","夫人","菲菲","人鱼","寒烟","叮当","贝贝","贝儿","心海","时光","小主","娘娘","贵妇","小染","小冉","皇妃","凡尘","佳人","乐师","罗刹","可儿","浮云","舞灵","款姐","尐豬","娘们"],e.LOGING_STR1="请输入角色名",e.LOGING_STR2="角色名称长度为2~6个汉字",e.LOGING_STR3="名字中存在敏感字符",e.LOGING_STR4="点击进入游戏",e.LOGING_STR5="神将",e.LOGING_STR6="罗刹",e.LOGING_STR7="天尊",e.LOGING_STR8="<font color='#E7BF6F'>神将</font>：胸怀天下不平事，十方无敌勇者狂！\n<font color='#E7BF6F'>职业特点</font>：超高防御 超高血量",e.LOGING_STR9="<font color='#E7BF6F'>罗刹</font>：罗刹门徒世间行，敢违天下大不平！\n<font color='#E7BF6F'>职业特点</font>：超高爆发 超高输出",e.LOGING_STR10="<font color='#E7BF6F'>天尊</font>：天尊弟子遁入世，仗剑天下济世先！\n<font color='#E7BF6F'>职业特点</font>：远程攻击 超强辅助",e.LOGING_STR11="您必将名动小丑鱼！",e.LOGING_STR12="你的账号在别处登录",e.LOGING_STR13="登录太频繁！",e.LOGING_STR14="角色被封号，请联系管理员！",e.LOGING_STR15="登陆失败",e.LOGING_STR="",e}();egret.registerClass(LoginLang,"LoginLang");var MapUtil=function(){function e(){}var t=(__define,e);t.prototype;return e.judgeDir=function(e,t,i,n){var s,a=-Math.atan2(n-t,i-e)*(180/Math.PI);return s=a>-155&&-115>=a?1:a>-115&&-65>=a?2:a>-65&&-25>=a?3:a>-25&&25>=a?6:a>25&&65>=a?9:a>65&&115>=a?8:a>115&&155>=a?7:4},e.getAngle=function(e){var t;return 1==e?t=225*Math.PI/180:2==e?t=270*Math.PI/180:3==e?t=315*Math.PI/180:6==e?t=0:9==e?t=45*Math.PI/180:8==e?t=90*Math.PI/180:7==e?t=135*Math.PI/180:4==e&&(t=180*Math.PI/180),t},e.getDirXY=function(e,t,i,n){var s=this.judgeDir(e,t,i,n);return 2==s?this.dirXY[0]:1==s?this.dirXY[1]:4==s?this.dirXY[2]:7==s?this.dirXY[3]:8==s?this.dirXY[4]:9==s?this.dirXY[5]:6==s?this.dirXY[6]:3==s?this.dirXY[7]:null},e.getDirXY2=function(e,t,i,n){var s=this.judgeDir(e,t,i,n);return 2==s?1:1==s?2:4==s?3:7==s?4:8==s?5:9==s?6:6==s?7:3==s?8:1},e.getDirObject=function(e,t,i,n){var s=this.judgeDir(e,t,i,n),a=new Object;switch(a.dir=s,s){case 9:a.frame=7,a.scale=-1;break;case 6:a.frame=4,a.scale=-1;break;case 3:a.frame=1,a.scale=-1;break;default:a.frame=s,a.scale=1}return a},e.dirXY=[{x:0,y:1,dpx:0,dpy:0},{x:-1,y:1,dpx:0,dpy:0},{x:-1,y:0,dpx:0,dpy:0},{x:-1,y:-1,dpx:0,dpy:0},{x:0,y:-1,dpx:0,dpy:0},{x:1,y:-1,dpx:0,dpy:0},{x:1,y:0,dpx:0,dpy:0},{x:1,y:1,dpx:0,dpy:0}],e}();egret.registerClass(MapUtil,"MapUtil");var NodePro=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(NodePro,"NodePro");var PropertyUtil=function(){function e(){}var t=(__define,e);t.prototype;return e.changeProListToVo=function(e){for(var t,i=new PropertyVO,n=0;n<e.length;n++)t=e[n],i.setValue(t.id,t.val);return i},e.calculateDamage=function(e,t,i,n){if(null==e||null==t)return 0;var s=e.attack+i,a=t.att_def+n,o=Math.max(s-a,.2*s)*(1-t.hurt_def/1e4);return MeetPlayerModel.getInstance().fightMPID>0&&(o=.5*o),Math.ceil(o)},e.calculateProFight=function(e){if(null==e)return 0;var t=4*e.attack+2*e.att_def+.4*e.hp+2*e.magic_def+1e4*e.crit+5e3*e.crit_def+1e3*e.palsy_rate+500*e.palsy_def+100*e.hurt_def;return Math.floor(t)},e.checkProVoDiff=function(e,t){return null==e||null==t?!0:e.att_def!=t.att_def||e.attack!=t.attack?!0:e.crit!=t.crit||e.crit_def!=t.crit_def?!0:e.crit_hurt!=t.crit_hurt||e.hp!=t.hp?!0:e.hp_up!=t.hp_up||e.hurt_def!=t.hurt_def?!0:e.hurt_up!=t.hurt_up||e.magic_def!=t.magic_def?!0:e.mp!=t.mp||e.palsy_def!=t.palsy_def?!0:e.palsy_rate!=t.palsy_rate?!0:!1},e}();egret.registerClass(PropertyUtil,"PropertyUtil");var StringUtil=function(){function e(){}var t=(__define,e);t.prototype;return e.substitute=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null==e)return"";var n,s=t.length;1==s&&is(t[0],"Array")?(n=t[0],s=n.length):n=t;for(var a=0;s>a;a++)e=e.replace(new RegExp("\\{"+a+"\\}","g"),n[a]);return e},e}();egret.registerClass(StringUtil,"StringUtil");var TileUtil=function(){function e(){}var t=(__define,e);t.prototype;return e.changeXToPixs=function(t){return Math.floor(t*e.GRID_WIDTH)},e.changeYToPixs=function(t){return Math.floor(t*e.GRID_HEIGHT)},e.changeXToTile=function(t){return Math.floor(t/e.GRID_WIDTH)},e.changeYToTile=function(t){return Math.floor(t/e.GRID_HEIGHT)},e.tileWidth=256,e.tileHeight=256,e.GRID_WIDTH=60,e.GRID_HEIGHT=30,e.scale=1,e.ALPHA=2,e.STEP=30,e}();egret.registerClass(TileUtil,"TileUtil");var TimeUtil=function(){function e(){}var t=(__define,e);t.prototype;return e.getTimeNow=function(){return Math.floor((new Date).getTime()/1e3)},e.getTime=function(e){var t="",i=e%60,n=Math.floor(e/60);return n>=60?(e=Math.floor(n/60),t+=e>9?e:"0"+e,t=t.concat(":"),n%=60,t+=n>9?n:"0"+n,t=t.concat(":"),t+=i>9?i:"0"+i):(t=t.concat("00:"),t+=n>9?n:"0"+n,t=t.concat(":"),t+=i>9?i:"0"+i),t},e.getTime2=function(e,t){if(void 0===t&&(t=!1),0>e)return"00分00秒";var i="",n=e%60,s=Math.floor(e/60);if(t)return 0>=s?n+"秒":s+"分";var a="",o="",r="";if(s>=60){var h=Math.floor(s/60);a=i+(h>9?h:"0"+h),s%=60}return o+=s>9?s:"0"+s,r+=n>9?n:"0"+n,i=""==a?o+"分"+r+"秒":a+"时"+o+"分"+r+"秒"},e.getTime3=function(e){if(86400>e)return this.getTime2(e);var t=Math.floor(e/86400);return t+"天 "+this.getTime2(e%86400)},e.getTime4=function(e){if(0>=e)return"0天0小时";if(3600>e)return"0天1小时";if(86400>e){var t=Math.ceil(e/3600);return 24==t?"1天0小时":"0天&{hour}小时"}var i=e/86400,n=Math.ceil(e%86400/3600);return i+"天 "+n+"小时"},e.getTime5=function(e){var t=Math.floor(e/86400);return t+"天 "+this.getTime2(e%86400)},e.convertTime=function(e,t){void 0===t&&(t="DD hh:mm:ss");var i=Math.floor(e/864e5),n=Math.floor(e%864e5/36e5),s=Math.floor(e%864e5%36e5/6e4),a=Math.floor(e%864e5%36e5%6e4/1e3),o=i+"",r=n>=10?""+n:"0"+n,h=s>=10?""+s:"0"+s,l=a>=10?""+a:"0"+a;return t=t.replace("DD",o),t=t.replace("hh",r),t=t.replace("mm",h),t=t.replace("ss",l)},e.formatTime=function(e,t){void 0===e&&(e=0),void 0===t&&(t="YYYY-MM-DD hh:mm:ss");var i=new Date;0!=e&&i.setTime(e);var n=i.getFullYear(),s=i.getMonth()+1,a=i.getDate(),o=i.getHours(),r=i.getMinutes(),h=i.getSeconds(),l=n+"",d=s>=10?""+s:"0"+s,_=a>=10?""+a:"0"+a,c=o>=10?""+o:"0"+o,u=r>=10?""+r:"0"+r,p=h>=10?""+h:"0"+h;return t=t.replace("YYYY",l),t=t.replace("MM",d),t=t.replace("DD",_),t=t.replace("hh",c),t=t.replace("mm",u),t=t.replace("ss",p)},e.getTimeHour=function(e){var t=e/60,i="1";if(t>=60){var n=t/60;i=Math.floor(n).toString()}return i},e.isDateKaiFu=function(e){return e==HuoDongDailyModel.getInstance().kaiFuDay},e.isDateHeFu=function(e){return e==HeFuModel.getInstance().hefuDay},e.isOnSameDay=function(e,t){var i=e.getFullYear(),n=t.getFullYear(),s=e.getMonth(),a=t.getMonth(),o=e.getDate(),r=t.getDate(),h=e.getDay(),l=t.getDay();return i==n&&s==a&&o==r&&h==l?!0:!1},e.getNextDay=function(e){for(var t=RoleModel.getInstance().serverTime,i=new Date(1e3*t),n=0;i.getDay()!=e&&7>n;)i=new Date(i.getTime()+864e5),n++;return i},e.getKaiFuTimestamp=function(){var e=RoleModel.getInstance().serverTime,t=HuoDongDailyModel.getInstance().kaiFuDay;return e-86400*(t-1)},e.getKaiFuZero=function(){var t=e.getKaiFuTimestamp(),i=new Date(1e3*t),n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);return n.getTime()},e.getTodayZero=function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0);return t.getTime()},e.getZero=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0);return t.getTime()},e.getTimeByTimeZone=function(e){void 0===e&&(e=8);var t=new Date,i=t.getTime(),n=6e4*t.getTimezoneOffset(),s=i+n,a=e,o=s+36e5*a,r=new Date(o);return r},e.getWeekStartDate=function(e){void 0===e&&(e=0);var t=new Date,i=t.getFullYear(),n=t.getMonth(),s=t.getDate(),a=t.getDay(),o=new Date(i,n,s-a+e);return o},e.getWeekEndDate=function(e){void 0===e&&(e=0);var t=new Date,i=t.getFullYear(),n=t.getMonth(),s=t.getDate(),a=t.getDay(),o=new Date(i,n,s+(6-a+e));return o},e}();egret.registerClass(TimeUtil,"TimeUtil");var CommonSprite=function(e){function t(i){void 0===i&&(i="CommonSprite"),e.call(this),this._type=i,void 0==t.classDic[i]||null==t.classDic[i]?t.classDic[i]=1:t.classDic[i]=t.classDic[i]+1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dispose=function(){var e=t.classDic[this._type];t.classDic[this._type]=e-1},t.classDic=new Object,t}(egret.Sprite);egret.registerClass(CommonSprite,"CommonSprite");var TipsBg=function(e){function t(){e.call(this),this._bg=new CustomImage,this._bg.source=RES.getRes("share_json.share_tipbg"),this._bg.scale9Grid=new egret.Rectangle(31,32,278,144),this.addChild(this._bg)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.setSize=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.x=i,this.y=n,this._bg.width=e,this._bg.height=t},n.getWidth=function(){return this._bg.width},n.getHeight=function(){return this._bg.height},t}(CommonSprite);egret.registerClass(TipsBg,"TipsBg");var TipsCanvas=function(e){function t(){e.call(this),this.visible=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.cancelTip=function(){this.visible=!1,this.contains(TipsHelpBgs.getInstance().tipsBg1)&&this.removeChild(TipsHelpBgs.getInstance().tipsBg1),this.shapeMask&&GameContent.gameLayers.tipsLayer.contains(this.shapeMask)&&(this.shapeMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShapMaskClickHandler,this),GameContent.gameLayers.tipsLayer.removeChild(this.shapeMask),this.shapeMask=null),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onThisClickHandler,this)},n.updatePos=function(){this.x=GameContent.stageWidth-TipsHelpBgs.getInstance().tipsBg1.getWidth()>>1,this.y=GameContent.stageHeight-TipsHelpBgs.getInstance().tipsBg1.getHeight()>>1},n.setBackground=function(){TipsHelpBgs.getInstance().tipsBg1.setSize(this.pw,this.ph,0),this.addChildAt(TipsHelpBgs.getInstance().tipsBg1,0),null==this.shapeMask&&(this.shapeMask=new egret.Shape,this.shapeMask.graphics.clear(),this.shapeMask.graphics.beginFill(0,.5),this.shapeMask.graphics.drawRect(0,0,GameContent.stageWidth,GameContent.stageHeight),this.shapeMask.graphics.endFill(),this.shapeMask.$setTouchEnabled(!0),GameContent.gameLayers.tipsLayer.addChildAt(this.shapeMask,0)),this.shapeMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShapMaskClickHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onThisClickHandler,this)},n.addLine=function(e,t){var i=new CustomImage;return i.source=RES.getRes("share_json.share_line2"),i.x=3,i.y=t,i.width=this.pw-5,e.addChild(i),i},n.addTextField=function(e,t,i,n,s,a,o,r,h){void 0===s&&(s=200),void 0===a&&(a=20),void 0===o&&(o=20),void 0===r&&(r="left"),void 0===h&&(h=5);var l=new CustomLabel;return l.lineSpacing=h,l.width=s,l.height=a,l.size=o,l.multiline=!0,l.wordWrap=!0,l.x=t,l.y=i,n&&(l.htmlText=n),e.addChild(l),l},n.addNameTextField=function(e){var t=new CustomLabel;return t.x=0,t.y=12,t.width=252,t.$setTextColor(6749952),t.textAlign="center",e.addChild(t),t},n.onThisClickHandler=function(){this.cancelTip()},n.onShapMaskClickHandler=function(){this.cancelTip()},t}(CommonSprite);egret.registerClass(TipsCanvas,"TipsCanvas");var TipsEquipCanvas=function(e){function t(){e.call(this),this.hasValue=!1,this.myH=0,this.contentSprite=new CommonSprite,this.addChild(this.contentSprite)}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t,GameContent.gameLayers.tipsLayer.addChild(this._instance)),this._instance},n.cancelTip=function(){for(e.prototype.cancelTip.call(this);this.contentSprite.numChildren>0;){var t=this.contentSprite.removeChildAt(0);t instanceof CustomImage&&(t.dispose(),t=null),t instanceof GoodsItem&&(t.dispose(),t=null)}this.image_fPowerBg&&(this.image_fPowerBg.dispose(),this.image_fPowerBg.parent&&this.image_fPowerBg.parent.removeChild(this.image_fPowerBg),this.image_fPowerBg=null),this.image_nameBg&&(this.image_nameBg.dispose(),this.image_nameBg.parent&&this.image_nameBg.parent.removeChild(this.image_nameBg),this.image_nameBg=null),this.goodsItem&&(this.goodsItem.dispose(),this.goodsItem.parent&&this.goodsItem.parent.removeChild(this.goodsItem),this.goodsItem=null)},n.displayTip=function(e,t,i){void 0===i&&(i=null);var n=e;this.addGoodsTips(n,i),this.pw=339,this.setBackground(),this.visible=!0,this.updatePos()},n.addGoodsTips=function(e,t){var i=e.split("|"),n=Number(i[0]),s=(Number(i[8]),Number(i[9])),a=Number(i[11]),o=0;if(t&&(o=t.partner_id),this.myBasic=GoodsListProxy.getInstance().getBasicGood(n),this.myH=0,this.myBasic){this.image_nameBg||(this.image_nameBg=new CustomImage,this.contentSprite.addChild(this.image_nameBg),this.image_nameBg.x=5,this.image_nameBg.y=2),this.image_nameBg.source=RES.getRes("share_json.share_tip_nameBg"+this.myBasic.quality);
var r=this.addTextField(this.contentSprite,20,10,"",200);r.text=this.myBasic.name;var h=this.addTextField(this.contentSprite,151,r.y,"",200);h.visible=!1;var l=GoodsListProxy.getInstance().getEquipBasicGood(this.myBasic.template_id),d=0;l&&(d=PropertyUtil.calculateProFight(GoodsListProxy.getInstance().getNewEquipPropetyVO(l,t))),h.text="评分："+d.toFixed(),this.goodsItem||(this.goodsItem=new GoodsItem,this.goodsItem.showLv(!1),this.contentSprite.addChild(this.goodsItem),this.goodsItem.x=20,this.goodsItem.y=this.image_nameBg.y+45),this.goodsItem.data=GoodsListProxy.getInstance().getGoodsInfoByType(this.myBasic.template_id);var _=this.addTextField(this.contentSprite,this.goodsItem.x+100,this.goodsItem.y,"",180,100),c="";if(this.myBasic.type==GoodsType.ITEM_EQUIP){var u="",p="",g="";g=this.myBasic.req_career<=0?"通用":Tools.getJobName(this.myBasic.req_career),this.myBasic.req_round>0?(u="转生：",p=this.myBasic.req_round.toString()+"转"):(u="等级：",p=this.myBasic.req_lv.toString(),-1!=EquipmentVO.WINGLEQUIP_GRID.indexOf(Number(this.myBasic.sub_type))&&(u="阶数：",p=this.myBasic.req_lv.toString()+"阶")),c="<font color='#dda66b'>部位：</font><font color='#e7d0b7'>"+GoodsType.EQUIP_PARTNAME[this.myBasic.sub_type]+"</font>",c+="\n<font color='#dda66b'>"+u+"</font><font color='#00d228'>"+p+"</font>",c+="\n<font color='#dda66b'>职业：</font><font color='#e7d0b7'>"+g+"</font>"}_.htmlText=c,this.image_fPowerBg||(this.image_fPowerBg=new CustomImage,this.contentSprite.addChild(this.image_fPowerBg),this.image_fPowerBg.x=this.goodsItem.x,this.image_fPowerBg.y=this.goodsItem.y+92),this.image_fPowerBg.source=RES.getRes("share_json.share_fpowerBg");var m=new eui.BitmapLabel;m.width=200,m.height=29,m.font="number_0_fnt",this.contentSprite.addChild(m),m.x=this.image_fPowerBg.x+101,m.y=this.image_fPowerBg.y+20,m.text=d.toFixed();var v=this.addLine(this.contentSprite,this.image_fPowerBg.y+70),C=this.addTextField(this.contentSprite,20,v.y+10,"",200,1200,20,"left",10);this.hasValue=!1;var f="",E=GoodsListProxy.getInstance().getEquipBasicGood(this.myBasic.template_id);if(f+="<font color='#ffd200'>基本属性</font>",E&&(f+=this.addProperty(E,t,EquipBasic.PROPERTY_INDEX)),this.hasValue||(f+="\n<font color='#dda66b'>无属性</font>"),C.htmlText=f,this.myH=C.y+C.textHeight+22,-1!=EquipmentVO.AWAKELEQUIP_GRID.indexOf(Number(t.sub_type))){v=this.addLine(this.contentSprite,this.myH+5);var I=this.addTextField(this.contentSprite,20,v.y+10,"",200,1200,20,"left",10),D=AwakeModel.getInstance().getAwakeSkillVO(t.rand_awake);if(D){f="<font color='#ffd200'>觉醒技能</font>";var M=D.proList[0],T=EquipBasic.getProStr(M.key)+"+"+M.value;f+="\n<font color='#ffd200'>"+D.name+"</font>\n<font color='#00d228'>"+T+"</font>",I.htmlText=f,this.myH=I.y+I.textHeight+22}if(0!=o){v=this.addLine(this.contentSprite,this.myH+5);var y=this.addTextField(this.contentSprite,20,v.y+10,"",200,30,20,"left",10),w=BuildModel.getInstance().getRuneLevelByType(t.slot,o,a);y.htmlText="<font color='#ffd200'>符文属性</font>",this.updateRuneProperty(Number(t.sub_type),w,y.x,y.y+30)}}if(s&&-1==EquipmentVO.AWAKELEQUIP_GRID.indexOf(Number(t.sub_type))){if(f="<font color='#ffd200'>强化属性</font>",""!=BuildModel.getInstance().getStrengProStrAll(t.slot,o)){f+="\n"+BuildModel.getInstance().getStrengProStrAll(t.slot,o,a),v=this.addLine(this.contentSprite,this.myH+5);var L=this.addTextField(this.contentSprite,20,v.y+10,"",200,1200,20,"left",10);L.htmlText=f,this.myH=L.y+L.textHeight+22}v=this.addLine(this.contentSprite,this.myH+5);var y=this.addTextField(this.contentSprite,20,v.y+10,"",200,30,20,"left",10),w=BuildModel.getInstance().getStoneLevelByType(t.slot,o,a);if(y.htmlText="<font color='#ffd200'>宝石属性</font>",this.updateStoneProperty(t.slot,w,y.x,y.y+30),f="<font color='#ffd200'>注灵属性</font>",""!=BuildModel.getInstance().getSoulProStrAll(t.slot,o,a)){f+="\n"+BuildModel.getInstance().getSoulProStrAll(t.slot,o,a),v=this.addLine(this.contentSprite,this.myH+5);var S=this.addTextField(this.contentSprite,20,v.y+10,"",200,1200,20,"left",10);S.htmlText=f,this.myH=S.y+S.textHeight+22}}this.ph=this.myH}},n.updateStoneProperty=function(e,t,i,n){for(var s=[],a=[],o=0,r=0,h=0;4>h;h++)a.push(this.addTextField(this.contentSprite,i+37,n+25*h,"",200,20,20,"left",10));for(h=0;4>h;h++)s.push(this.addImage(this.contentSprite,i,n-4+25*h));var l=BuildModel.getInstance().getStoneVo(e,t);for(h=0;4>h;h++)l&&l.show[h]&&"0"!=l.show[h]?(r=Number(l.show[h]),o=GoodsListProxy.getInstance().getGoodsInfoByType(r).req_lv,s[h].source="resource/assets/icon/smallPic/"+r+".png",s[h].filters=[],a[h].htmlText="Lv"+o+" <font color='#00d228'>"+EquipBasic.getProStr(l.att_id)+"+"+l.show_att[h]+"</font>"):(a[h].text="宝石未激活",s[h].source="resource/assets/icon/smallPic/12120001.png",s[h].filters=[Tools.GrayFilter]);this.myH=a[a.length-1].y+a[a.length-1].textHeight+22},n.updateRuneProperty=function(e,t,i,n){for(var s=[],a=[],o=0,r=0,h=0;4>h;h++)a.push(this.addTextField(this.contentSprite,i+37,n+25*h,"",200,20,20,"left",10));for(h=0;4>h;h++)s.push(this.addImage(this.contentSprite,i,n-4+25*h));var l,d=BuildModel.getInstance().getRuneVo(e,t);for(h=0;4>h;h++)d&&d.show[h]&&"0"!=d.show[h]?(r=Number(d.show[h]),l=GoodsListProxy.getInstance().getGoodsInfoByType(r),o=GoodsListProxy.getInstance().getGoodsInfoByType(r).req_lv,s[h].source="resource/assets/icon/smallPic/"+l.pic+".png",s[h].filters=[],a[h].htmlText="Lv"+o+" <font color='#00d228'>"+EquipBasic.getProStr(d.att_id)+"+"+d.show_att[h]+"</font>"):(a[h].text="符文未激活",s[h].source="resource/assets/icon/smallPic/12130001.png",s[h].filters=[Tools.GrayFilter]);this.myH=a[a.length-1].y+a[a.length-1].textHeight+22},n.getNewEquipPropetyVO=function(e,t){for(var i=EquipBasic.PROPERTY_INDEX,n=new EquipBasic,s="",a=0,o=0,r=0,h=0;h<i.length;h++)s=i[h],a=e[s],o=null==t?0:Math.floor(t.rand_attr/1e4*a),0>=o&&(o=1),r=Number(a)+Number(o),0>=a||(n[s]=r);return n},n.addProperty=function(e,t,i,n,s,a){void 0===n&&(n="#dda66b"),void 0===s&&(s="#e7d0b7"),void 0===a&&(a="#00d228");for(var o=0,r=0,h=0,l="",d="",_=0;_<i.length;_++)d=i[_],o=e[d],r=null==t?0:Math.floor(t.rand_attr/t.rate*o),0>=r&&(r=1),0>=o||(this.hasValue=!0,h=_,l+=h>=5?"\n<font color='"+n+"'>"+EquipBasic.PROPERTY_NAME[d]+" ：</font><font color='"+s+"'>"+o/100+"%</font><font color='"+a+"'>+"+r+"%</font>":"\n<font color='"+n+"'>"+EquipBasic.PROPERTY_NAME[d]+" ：</font><font color='"+s+"'></font>"+o+"<font color='"+a+"'>+"+r+"</font>");return l},n.addImage=function(e,t,i){var n=new CustomImage;return n.x=t,n.y=i,e.addChild(n),n},t}(TipsCanvas);egret.registerClass(TipsEquipCanvas,"TipsEquipCanvas");var TipsGoodsCanvas=function(e){function t(){e.call(this),this.myH=0,this.contentSprite=new CommonSprite,this.addChild(this.contentSprite),this.contentSprite.touchEnabled=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return this._instance||(this._instance=new t,GameContent.gameLayers.tipsLayer.addChild(this._instance)),this._instance},n.cancelTip=function(){e.prototype.cancelTip.call(this);for(var t=0;t<this.contentSprite.numChildren;t++){var i=this.contentSprite.getChildAt(t);i instanceof CustomImage&&i.dispose(),i instanceof GoodsItem&&i.dispose()}this.myGoodsInfo.type==GoodsType.ITEM_GIFT&&(GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.onUpdateItemNum,this),this.useBtn&&this.useBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useHandler,this)),this.numberStep&&(this.numberStep.parent&&this.numberStep.parent.removeChild(this.numberStep),this.numberStep=null),this.useBtn&&(this.useBtn.parent&&this.useBtn.parent.removeChild(this.useBtn),this.useBtn=null)},n.displayTip=function(e,t){var i=e;this.addGoodsTips(i),this.pw=339,this.setBackground(),this.visible=!0,this.updatePos()},n.addGoodsTips=function(e){var t=e.split("|"),i=Number(t[0]),n=Number(t[8]),s=Number(t[10]);if(this.myH=0,this.myBasic=GoodsListProxy.getInstance().getBasicGood(i),this.myBasic){this.myGoodsInfo=GoodsListProxy.getInstance().getGoodsInfoById(n),this.myGoodsInfo||(this.myGoodsInfo=GoodsListProxy.getInstance().getGoodsInfoByType(i)),this.image_nameBg||(this.image_nameBg=new CustomImage,this.contentSprite.addChild(this.image_nameBg),this.image_nameBg.x=5,this.image_nameBg.y=2),this.image_nameBg.source=RES.getRes("share_json.share_tip_nameBg"+this.myBasic.quality),this.txtName||(this.txtName=this.addTextField(this.contentSprite,20,10,"",200)),this.txtName.text=this.myBasic.name,this.goodsItem||(this.goodsItem=new GoodsItem,this.goodsItem.showLv(!1),this.contentSprite.addChild(this.goodsItem),this.goodsItem.x=20,this.goodsItem.y=this.image_nameBg.y+45),this.goodsItem.data=this.myGoodsInfo,this.txtInfo||(this.txtInfo=this.addTextField(this.contentSprite,this.goodsItem.x+100,this.goodsItem.y,"",180,100));var a="";a="<font color='#dda66b'>数量：</font><font color='#e7d0b7'>"+this.myGoodsInfo.num+"</font>",a+="\n<font color='#dda66b'>等级：</font><font color='#00d228'>"+this.myGoodsInfo.req_lv+"</font>",this.txtInfo.htmlText=a;var o=this.addLine(this.contentSprite,this.goodsItem.y+98);this.txtBasePro||(this.txtBasePro=this.addTextField(this.contentSprite,20,o.y+10,"",310,200,20,"left",10)),this.txtBasePro.text=this.myBasic.desc,this.myH=this.txtBasePro.y+this.txtBasePro.textHeight+22,this._isCanUse=!1,this.myGoodsInfo.type==GoodsType.ITEM_GIFT&&1==s&&(this.numberStep=new CustomNumberStep,this.numberStep.MaxNum=this.myGoodsInfo.num,this.numberStep.setValue(1),this.contentSprite.addChild(this.numberStep),this.numberStep.x=this.width-this.numberStep.width>>1,this.numberStep.y=this.txtBasePro.y+this.txtBasePro.textHeight+22,this.useBtn=new CustomButton,this.useBtn.label="使用",this.contentSprite.addChild(this.useBtn),this.useBtn.x=this.width-this.useBtn.width>>1,this.useBtn.y=this.numberStep.y+this.numberStep.height+15,this.useBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.useHandler,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.onUpdateItemNum,this),this.myH=this.useBtn.y+this.useBtn.height+10,this._isCanUse=!0),this.ph=this.myH}},n.onUpdateItemNum=function(){if(this.myGoodsInfo.type==GoodsType.ITEM_GIFT){var e=GoodsListProxy.getInstance().findGoodNumber(this.myGoodsInfo.template_id),t="";t="<font color='#dda66b'>数量：</font><font color='#e7d0b7'>"+e+"</font>",t+="\n<font color='#dda66b'>等级：</font><font color='#00d228'>"+this.myGoodsInfo.req_lv+"</font>",this.txtInfo.htmlText=t,this.numberStep&&(this.numberStep.MaxNum=e),0>=e&&this.cancelTip()}},n.useHandler=function(){var e=new ParamEvent(EventName.REQUEST_USEITEM);e.data={id:this.myGoodsInfo.item_id,num:this.numberStep.getValue()},GameDispatcher.getInstance().dispatchEvent(e)},n.onThisClickHandler=function(){0==this._isCanUse&&this.cancelTip()},t}(TipsCanvas);egret.registerClass(TipsGoodsCanvas,"TipsGoodsCanvas");var TipsHelpBgs=function(){function e(){this.tipsBg1=new TipsBg}var t=(__define,e);t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e}();egret.registerClass(TipsHelpBgs,"TipsHelpBgs");var TipsHelps=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=339),this.type=0,this._maxWidth=t,this.type=e}var t=(__define,e),i=t.prototype;return i.setType=function(e){this.type=e},i.setTips=function(e,t){switch(void 0===e&&(e=null),void 0===t&&(t=null),e&&(this._toolTips=e),this.type){case 0:TipsGoodsCanvas.getInstance().displayTip(String(this._toolTips),this._maxWidth);break;case 1:TipsEquipCanvas.getInstance().displayTip(String(this._toolTips),this._maxWidth,t)}},i.setToolTips=function(e,t){this._toolTips=t,this.type=e,this.setTips()},i.setGoodsTip=function(e){this.setToolTips(0,GoodsListProxy.getInstance().getBasicProp(e,!1,!1,0,0,-1,!0,-1))},i.cancel=function(){},i.dispose=function(){this.cancel()},e}();egret.registerClass(TipsHelps,"TipsHelps");var Tools=function(){function e(){}var t=(__define,e);t.prototype;return e.changeToNumberStr=function(e){return 10>e?"0"+e:e.toString()},e.getJobName=function(e){return["战皇","法神","道祖"][e-1]},e.getSexName=function(e){return["男","女"][e-1]},e.getJobFolder=function(e){return["zhanshi","fashi","daoshi"][e-1]},e.getSexFolder=function(e){return["man","woman"][e-1]},e.changeToNodeDropList=function(e){for(var t,i=new Array,n=e.match(/\d+/g),s=0;s<n.length;s+=2)t=new NodeDrop_list,t.asset_id=parseInt(n[s]),t.value=parseInt(n[s+1]),i.push(t);return i},e.changeToNodeProList=function(e){for(var t,i=new Array,n=e.match(/\d+/g),s=0;s<n.length;s+=2)t=new NodePro,t.key=parseInt(n[s]),t.value=parseInt(n[s+1]),i.push(t);return i},e.changeToDateList=function(e){for(var t,i,n=new Array,s=e.match(/\d+/g),a=0;a<s.length;a+=3)t=new Date(parseInt(s[a]),parseInt(s[a+1])-1,parseInt(s[a+2])),i=new Date(t.getTime()-864e5),n.push(i);return n},e.changeToItemData=function(e){for(var t,i=new Array,n=e.match(/\d+/g),s=0;s<n.length;){var a=Number(n[s]);a>0&&(t=new ItemData,t.info=GoodsListProxy.getInstance().getGoodsInfoByType(a),t.info.num=Number(n[s+1]),t.num=Number(n[s+1]),i.push(t)),s+=2}return i},e.convertRoundLv=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=!0);var n;return n=t>0?i?StringUtil.substitute("{0}转{1}级",t,e):StringUtil.substitute("{0}转",t):StringUtil.substitute("{0}级",e)},e.convertDropList=function(e){for(var t,i,n=new Array,s=0;s<e.length;s++)if(t=e[s],t.asset_id>1e3&&t.value>1)for(var a=0;a<t.value;a++)i=new NodeDrop_list,i.asset_id=t.asset_id,i.value=1,n.push(i);else n.push(t);return n},e.convertNumber=function(e){var t,i,n="",s=0;if(e>=1e8)s=e/1e8,i="亿";else{if(!(e>=1e4))return e.toString();s=e/1e4,i="万"}t=s.toString();var a=t.indexOf(".");return n=a>=0?t.substr(0,a+2)+i:t+i},e.getGoodsNumInDropList=function(e){for(var t,i=0,n=0;n<e.length;n++)t=e[n],t.asset_id>1e4&&i++;return i},e.changeObjToString=function(e){if(null==e)return"empty";for(var t="",i=e.list,n=0;n<i.length;n++)t+=StringUtil.substitute("key = {0} value = {1}\n",i[n].name,e[i[n].name]);return t},e.GameRefresh=function(){ConfigManager.is37()?window.refreshGame():window.location.reload()},e.makeCustomRandom=function(e){var t=Math.ceil(4*Math.random()),i=Math.pow(-1,t)*Math.ceil(Math.random()*e);return i},e.randRange=function(e,t){e>t&&(t=e^t,e=t^e,t^=e);var i=t-e+1;return e+(Math.random()*i>>0)},e.getPageParams=function(e){var t,i=AllParamObj.params;return i&&(t=i[e]),(""==t||null==t||void 0==t)&&(t=egret.getOption(e)),t},e.getRotationLong=function(e,t,i,n,s,a){var o=360*(Math.floor(Math.random()*(n-i))+i),r=360/e*t,h=360/e*s,l=Math.floor(Math.random()*(360/e)*(1-2*a))+360/e*a;return o+r+h+l},e.bu0=function(e){var t,i=parseInt(e);return t=10>i?"0"+e:e},e.randomName=function(e){void 0===e&&(e=1);var t="",i=[];return 1==e?(i=LoginLang._surnameList.concat(LoginLang._surnameList_man),t=i[Math.floor(i.length*Math.random())]+LoginLang._forenameList_man_0[Math.floor(LoginLang._forenameList_man_0.length*Math.random())]):(i=LoginLang._surnameList.concat(LoginLang._surnameList_wonman),t=i[Math.floor(i.length*Math.random())]+LoginLang._forenameList_woman_0[Math.floor(LoginLang._forenameList_woman_0.length*Math.random())]),FilterText.getInstance().isHaveFilterTxt(t)?this.randomName():t},e.GrayFilter=new egret.ColorMatrixFilter([1/3,1/3,1/3,0,0,1/3,1/3,1/3,0,0,1/3,1/3,1/3,0,0,0,0,0,1,0]),e.ZHANSHI=1,e.FASHI=2,e.DAOSHI=3,e.MALE=1,e.FEMALE=2,e}();egret.registerClass(Tools,"Tools");var UrlUtil=function(){function e(){}var t=(__define,e);t.prototype;return e.getClothURL=function(e,t,i){0==e&&(e=3),0==t&&(t=1);var n,s=Tools.getJobFolder(e),a=Tools.getSexFolder(t),o=RoleModel.getInstance().getSkinVo(i);return n=o?"resource/assets/mapAssets/player/cloth/"+s+"/"+a+"/"+o.skinID+"/":"resource/assets/mapAssets/player/cloth/"+s+"/"+a+"/"+i+"/",rURL(n)},e.getWeaponURL=function(e,t){var i,n=Tools.getSexFolder(e),s=RoleModel.getInstance().getSkinVo(t);return i=s?"resource/assets/mapAssets/player/weapon/"+n+"/"+s.skinID+"/":"resource/assets/mapAssets/player/weapon/"+n+"/"+t+"/",rURL(i)},e.getRingURL=function(e){var t=StringUtil.substitute("resource/assets/mapAssets/player/ring/{0}/gh",e);return rURL(t)},e.getFigureRingURL=function(e){var t=StringUtil.substitute("resource/assets/mapAssets/figure/ring/{0}/gh",e);return rURL(t)},e.getPetClothURL=function(e){var t;return t="resource/assets/mapAssets/player/pet/"+e+"/",rURL(t)},e.getPetWeaponURL=function(e,t){var i;return i="resource/assets/mapAssets/player/pet_weapon/type"+e+"/"+t+"/",rURL(i)},e.getNpcClothURL=function(e){var t;return t="resource/assets/mapAssets/npc/"+e+"/",rURL(t)},e.getMapTileURL=function(e){var t="resource/assets/mapAssets/sceneMapTile/"+e+"/";return rURL(t)},e.getSmallMapURL=function(e){var t="resource/assets/mapAssets/sceneMapTile/"+e+"/smallmap.jpg";return rURL(t)},e.getGoodsImageURL=function(e){var t="resource/assets/icon/goodsPic/"+e+".png";return rURL(t)},e.getNpcFunIconURL=function(e){var t="resource/assets/icon/npcIcon/"+e+".png";return rURL(t)},e.getGoodsDropURL=function(e){var t="resource/assets/icon/goodsPic/"+e+".png";return rURL(t)},e.getMonsterURL=function(e){var t="resource/assets/mapAssets/monster/"+e+"/";return rURL(t)},e.getCommonSceneURL=function(){var e="resource/assets/mapAssets/commonScene/commonScene";return rURL(e)},e.getWingURL=function(e){var t=WingModel.getInstance().getWingDataVOByTemplateId(e),i="resource/assets/mapAssets/player/wing/"+t.advance_lev+"/";return rURL(i)},e.getCommonEffectURL=function(e){var t="resource/assets/mapAssets/effect/common/"+e;return rURL(t)},e.getArtifactEffectURL=function(e){var t="resource/assets/mapAssets/effect/artifact/"+e;return rURL(t)},e.getPetEffectURL=function(e,t){var i="resource/assets/mapAssets/figure/pet/"+e+"/"+t;return rURL(i)},e.getPetWeaponEffectURL=function(e,t){var i="resource/assets/mapAssets/figure/pet_weapon/type"+e+"/"+t+"/stand";return rURL(i)},e.getPetWeaponEffectURL2=function(e,t){var i="resource/assets/mapAssets/figure/pet_weapon/type"+e+"/"+t+"/stand_s";return rURL(i)},e.getSkillEffectURL=function(e){var t="resource/assets/mapAssets/effect/skill/"+e;return rURL(t)},e.getSkillURL=function(e){return rURL("resource/assets/icon/skill/"+e+".png")},e.getSkillGuildURL=function(e){return rURL("resource/assets/icon/skill/guild/guild_skill_"+e+".png")},e.getSkillFeatURL=function(e){return rURL("resource/assets/icon/skill/feat/feat_skill_"+e+".png")},e.getPKSkillURL=function(e){return rURL("resource/assets/icon/pkSkill/"+e+".png")},e.getHeadURL=function(e,t,i,n,s){void 0===e&&(e=1),void 0===t&&(t=0),void 0===i&&(i=1),void 0===n&&(n=1),void 0===s&&(s=0);var a="";return 1==e&&(a=rURL("resource/assets/icon/head/bighead_"+t+".png")),a},e.getHeadURLByPartner=function(e,t,i){return void 0===e&&(e=1),void 0===t&&(t=1),void 0===i&&(i=0),rURL(i>0?"resource/assets/icon/head/smallhead_"+i+".png":"resource/assets/icon/head/smallhead_"+(1e3*e+t)+".png")},e.getFigureClothURL=function(e,t,i){var n,s=Tools.getJobFolder(e),a=Tools.getSexFolder(t),o=RoleModel.getInstance().getSkinVo(i);return n=o?"resource/assets/mapAssets/figure/cloth/"+s+"/"+a+"/"+o.skinID+"/":"resource/assets/mapAssets/figure/cloth/"+s+"/"+a+"/"+i+"/",rURL(n)},e.getFigureWeaponURL=function(e){var t,i=RoleModel.getInstance().getSkinVo(e);return t=i?"resource/assets/mapAssets/figure/weapon/"+i.skinID+"/":"resource/assets/mapAssets/figure/weapon/"+e+"/",rURL(t)},e.getFigureWingURL=function(e){var t;if(100>e)t="resource/assets/mapAssets/figure/wing/"+e+"/";else{var i=WingModel.getInstance().getWingDataVOByTemplateId(e);t="resource/assets/mapAssets/figure/wing/"+i.advance_lev+"/"}return rURL(t)},e.getTitleQualityURL=function(e){var t="resource/assets/icon/title/title_type"+e+".png";return rURL(t)},e.getTitleResource=function(e){var t="resource/assets/mapAssets/title/"+e;return rURL(t)},e.getTitleWinResource=function(e){var t="resource/assets/icon/chenghao/"+e+".png";return rURL(t)},e.getSmallPic=function(e){var t="resource/assets/icon/smallPic/"+e+".png";return rURL(t)},e.getHuoDongDailyIcon=function(e){var t="resource/assets/icon/huoDongDaily/"+e+".png";return rURL(t)},e.getHeFuIcon=function(e){var t="resource/assets/icon/hefu/"+e+".png";return rURL(t)},e.getFanLiDailyIcon=function(e){var t="resource/assets/icon/fanli/"+e+".png";return rURL(t)},e.getQQFriendWinIcon=function(e){var t="resource/assets/icon/QQFriend/"+e+".png";return rURL(t)},e.getQQWeekGiftWinIcon=function(e){var t="resource/assets/icon/QQWeekGift/"+e+".png";return rURL(t)},e.getFanLiXGIcon=function(e){var t="resource/assets/icon/fanli/flxg/"+e+".png";return rURL(t)},e.getBlessBuffIcon=function(e){var t="resource/assets/icon/bless/buff/"+e+".png";return rURL(t)},e.getHFXGIcon=function(e){var t="resource/assets/icon/hefu/HFGift/"+e+".png";return rURL(t)},e.getKFHDTITLEIcon=function(e){var t="resource/assets/icon/kfhdTitle/"+e+".png";return rURL(t)},e.getHFTITLEIcon=function(e){var t="resource/assets/icon/hefu/HFTitle/"+e+".png";return rURL(t)},e.getHuoDongDailyPic=function(e,t){void 0===t&&(t="jpg");var i="resource/assets/icon/huoDongDaily/"+e+"."+t;return rURL(i)},e.getHFPic=function(e,t){void 0===t&&(t="jpg");var i="resource/assets/icon/hefu/"+e+"."+t;return rURL(i)},e.getWindowTitlePicURL=function(e){var t="resource/assets/icon/windowTitle/"+e+".png";return rURL(t)},e.getMallPic=function(e){var t=StringUtil.substitute("resource/assets/icon/mall/{0}.png",e);return rURL(t)},e.getBossHead=function(e){var t=StringUtil.substitute("resource/assets/icon/head/bosshead/{0}.png",e);return rURL(t)},e.getBossCommonHead=function(){var e=StringUtil.substitute("resource/assets/icon/head/bosshead/common.png");return rURL(e)},e.getOtherIcon=function(e,t){void 0===t&&(t="png");var i=StringUtil.substitute("resource/assets/icon/other/{0}.{1}",e,t);return rURL(i)},e.getTitleURL=function(e){var t=StringUtil.substitute("resource/assets/mapAssets/title/{0}",e);return rURL(t)},e.getDominateURL=function(e){var t=StringUtil.substitute("resource/assets/icon/dominate/{0}",e);return rURL(t)},e.getMeridiansURL=function(e){var t=StringUtil.substitute("resource/assets/icon/meridians/{0}",e);return rURL(t)},e.getShanlianURL=function(e){var t=StringUtil.substitute("resource/assets/icon/shenlian/{0}",e);return rURL(t)},e.getCityWarUrl=function(e){var t=StringUtil.substitute("resource/assets/icon/cityWar/{0}.png",e);return rURL(t)},e.getChargeURL=function(e){var t=StringUtil.substitute("resource/assets/icon/charge/{0}.png",e);return rURL(t)},e.getKFHDChargeURL=function(e){var t=StringUtil.substitute("resource/assets/icon/kfhdCharge/{0}.png",e);return rURL(t)},e.getHFChargeURL=function(e){var t=StringUtil.substitute("resource/assets/icon/hefu/HFCharge/{0}.png",e);return rURL(t)},e.getBuffIcon=function(e){var t=StringUtil.substitute("resource/assets/icon/buff/buff_{0}.png",e);return rURL(t)},e.getFunctionNoticeURL=function(e){var t=StringUtil.substitute("resource/assets/icon/functionNotice/{0}.png",e);return rURL(t)},e.getHeadURLByKing=function(e){return rURL("resource/assets/icon/head/dw_0"+e+".png")},e.getSoundUrl=function(e,t){return void 0===t&&(t="wav"),rURL(StringUtil.substitute("resource/assets/Sound/{0}.{1}",e,t))},e.getScenePathFile=function(e){return rURL(StringUtil.substitute("resource/assets/config/scene/{0}.json",e))},e.getFolderPic=function(e,t,i){void 0===i&&(i="png");var n="resource/assets/icon/"+e+"/"+t+"."+i;return rURL(n)},e.getFanliDFWPic=function(e){var t="resource/assets/icon/fanli/dfw/fanli_dfw_"+e+".png";return rURL(t)},e}();egret.registerClass(UrlUtil,"UrlUtil");var md5=function(){function e(){this.hexcase=0,this.b64pad=""}var t=(__define,e),i=t.prototype;return i.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},i.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},i.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},i.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},i.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},i.any_hmac_md5=function(e,t,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),i)},i.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},i.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},i.rstr_hmac_md5=function(e,t){var i=this.rstr2binl(e);i.length>16&&(i=this.binl_md5(i,8*e.length));for(var n=Array(16),s=Array(16),a=0;16>a;a++)n[a]=909522486^i[a],s[a]=1549556828^i[a];var o=this.binl_md5(n.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(s.concat(o),640))},i.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var i,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",s="",a=0;a<e.length;a++)i=e.charCodeAt(a),s+=n.charAt(i>>>4&15)+n.charAt(15&i);return s},i.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",s=e.length,a=0;s>a;a+=3)for(var o=e.charCodeAt(a)<<16|(s>a+1?e.charCodeAt(a+1)<<8:0)|(s>a+2?e.charCodeAt(a+2):0),r=0;4>r;r++)n+=8*a+6*r>8*e.length?this.b64pad:i.charAt(o>>>6*(3-r)&63);return n},i.rstr2any=function(e,t){var i,n,s,a,o,r=t.length,h=Array(Math.ceil(e.length/2));for(i=0;i<h.length;i++)h[i]=e.charCodeAt(2*i)<<8|e.charCodeAt(2*i+1);var l=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),d=Array(l);for(n=0;l>n;n++){for(o=Array(),a=0,i=0;i<h.length;i++)a=(a<<16)+h[i],s=Math.floor(a/r),a-=s*r,(o.length>0||s>0)&&(o[o.length]=s);d[n]=a,h=o}var _="";for(i=d.length-1;i>=0;i--)_+=t.charAt(d[i]);return _},i.str2rstr_utf8=function(e){for(var t,i,n="",s=-1;++s<e.length;)t=e.charCodeAt(s),i=s+1<e.length?e.charCodeAt(s+1):0,t>=55296&&56319>=t&&i>=56320&&57343>=i&&(t=65536+((1023&t)<<10)+(1023&i),s++),127>=t?n+=String.fromCharCode(t):2047>=t?n+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n},i.str2rstr_utf16le=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(255&e.charCodeAt(i),e.charCodeAt(i)>>>8&255);return t},i.str2rstr_utf16be=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e.charCodeAt(i)>>>8&255,255&e.charCodeAt(i));return t},i.rstr2binl=function(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t},i.binl2rstr=function(e){for(var t="",i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t},i.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,n=-271733879,s=-1732584194,a=271733878,o=0;o<e.length;o+=16){var r=i,h=n,l=s,d=a;i=this.md5_ff(i,n,s,a,e[o+0],7,-680876936),a=this.md5_ff(a,i,n,s,e[o+1],12,-389564586),s=this.md5_ff(s,a,i,n,e[o+2],17,606105819),n=this.md5_ff(n,s,a,i,e[o+3],22,-1044525330),i=this.md5_ff(i,n,s,a,e[o+4],7,-176418897),a=this.md5_ff(a,i,n,s,e[o+5],12,1200080426),s=this.md5_ff(s,a,i,n,e[o+6],17,-1473231341),n=this.md5_ff(n,s,a,i,e[o+7],22,-45705983),i=this.md5_ff(i,n,s,a,e[o+8],7,1770035416),a=this.md5_ff(a,i,n,s,e[o+9],12,-1958414417),s=this.md5_ff(s,a,i,n,e[o+10],17,-42063),n=this.md5_ff(n,s,a,i,e[o+11],22,-1990404162),i=this.md5_ff(i,n,s,a,e[o+12],7,1804603682),a=this.md5_ff(a,i,n,s,e[o+13],12,-40341101),s=this.md5_ff(s,a,i,n,e[o+14],17,-1502002290),n=this.md5_ff(n,s,a,i,e[o+15],22,1236535329),i=this.md5_gg(i,n,s,a,e[o+1],5,-165796510),a=this.md5_gg(a,i,n,s,e[o+6],9,-1069501632),s=this.md5_gg(s,a,i,n,e[o+11],14,643717713),n=this.md5_gg(n,s,a,i,e[o+0],20,-373897302),i=this.md5_gg(i,n,s,a,e[o+5],5,-701558691),a=this.md5_gg(a,i,n,s,e[o+10],9,38016083),s=this.md5_gg(s,a,i,n,e[o+15],14,-660478335),n=this.md5_gg(n,s,a,i,e[o+4],20,-405537848),i=this.md5_gg(i,n,s,a,e[o+9],5,568446438),a=this.md5_gg(a,i,n,s,e[o+14],9,-1019803690),s=this.md5_gg(s,a,i,n,e[o+3],14,-187363961),n=this.md5_gg(n,s,a,i,e[o+8],20,1163531501),i=this.md5_gg(i,n,s,a,e[o+13],5,-1444681467),a=this.md5_gg(a,i,n,s,e[o+2],9,-51403784),s=this.md5_gg(s,a,i,n,e[o+7],14,1735328473),n=this.md5_gg(n,s,a,i,e[o+12],20,-1926607734),i=this.md5_hh(i,n,s,a,e[o+5],4,-378558),a=this.md5_hh(a,i,n,s,e[o+8],11,-2022574463),s=this.md5_hh(s,a,i,n,e[o+11],16,1839030562),n=this.md5_hh(n,s,a,i,e[o+14],23,-35309556),i=this.md5_hh(i,n,s,a,e[o+1],4,-1530992060),a=this.md5_hh(a,i,n,s,e[o+4],11,1272893353),s=this.md5_hh(s,a,i,n,e[o+7],16,-155497632),n=this.md5_hh(n,s,a,i,e[o+10],23,-1094730640),i=this.md5_hh(i,n,s,a,e[o+13],4,681279174),a=this.md5_hh(a,i,n,s,e[o+0],11,-358537222),s=this.md5_hh(s,a,i,n,e[o+3],16,-722521979),n=this.md5_hh(n,s,a,i,e[o+6],23,76029189),i=this.md5_hh(i,n,s,a,e[o+9],4,-640364487),a=this.md5_hh(a,i,n,s,e[o+12],11,-421815835),s=this.md5_hh(s,a,i,n,e[o+15],16,530742520),n=this.md5_hh(n,s,a,i,e[o+2],23,-995338651),i=this.md5_ii(i,n,s,a,e[o+0],6,-198630844),a=this.md5_ii(a,i,n,s,e[o+7],10,1126891415),s=this.md5_ii(s,a,i,n,e[o+14],15,-1416354905),n=this.md5_ii(n,s,a,i,e[o+5],21,-57434055),i=this.md5_ii(i,n,s,a,e[o+12],6,1700485571),a=this.md5_ii(a,i,n,s,e[o+3],10,-1894986606),s=this.md5_ii(s,a,i,n,e[o+10],15,-1051523),n=this.md5_ii(n,s,a,i,e[o+1],21,-2054922799),i=this.md5_ii(i,n,s,a,e[o+8],6,1873313359),a=this.md5_ii(a,i,n,s,e[o+15],10,-30611744),s=this.md5_ii(s,a,i,n,e[o+6],15,-1560198380),n=this.md5_ii(n,s,a,i,e[o+13],21,1309151649),i=this.md5_ii(i,n,s,a,e[o+4],6,-145523070),a=this.md5_ii(a,i,n,s,e[o+11],10,-1120210379),s=this.md5_ii(s,a,i,n,e[o+2],15,718787259),n=this.md5_ii(n,s,a,i,e[o+9],21,-343485551),i=this.safe_add(i,r),n=this.safe_add(n,h),s=this.safe_add(s,l),a=this.safe_add(a,d)}return[i,n,s,a]},i.md5_cmn=function(e,t,i,n,s,a){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(n,a)),s),i)},i.md5_ff=function(e,t,i,n,s,a,o){return this.md5_cmn(t&i|~t&n,e,t,s,a,o)},i.md5_gg=function(e,t,i,n,s,a,o){return this.md5_cmn(t&n|i&~n,e,t,s,a,o)},i.md5_hh=function(e,t,i,n,s,a,o){return this.md5_cmn(t^i^n,e,t,s,a,o)},i.md5_ii=function(e,t,i,n,s,a,o){return this.md5_cmn(i^(t|~n),e,t,s,a,o)},i.safe_add=function(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i},i.bit_rol=function(e,t){return e<<t|e>>>32-t},e}();egret.registerClass(md5,"md5");var QQFriendInviteItem=function(e){function t(t){void 0===t&&(t=0),e.call(this),this._ind=0,this._ind=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/qq/QQFriendInviteItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this._img=new PicLoader,this.addChild(this._img),this._img.x=37,this._img.y=37,this._imgGold=new CustomImage,this.addChild(this._imgGold),this._imgGold.x=33,this._imgGold.y=32,this._imgGold.source=UrlUtil.getGoodsImageURL(2),this._imgGold.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGold,this)},s.onClickGold=function(){PhpHttpStatisticsManager.requestInviteGift(this._data.openid),this.dispatchEvent(new ParamEvent(t.EVT_CLICK))},s.setData=function(e){this._data=e,null!=e.figureurl&&void 0!=e.figureurl&&this._img.load(e.figureurl),this._txtName.text=e.qq_name,this._imgGold.visible=0==e.status},i(s,"width",function(){return 125}),i(s,"height",function(){return 165}),s.dispose=function(){e.prototype.dispose.call(this),this._imgGold.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGold,this),this.parent&&this.parent.removeChild(this),this._img&&(this._img.dispose(),this._img=null),this._imgGold&&(this._imgGold.dispose(),this._imgGold=null)},t.EVT_CLICK="EVT_CLICK",t}(Csprite);egret.registerClass(QQFriendInviteItem,"QQFriendInviteItem");var QQFriendInviteView=function(e){function t(){e.call(this),this._itemArr=[],this.name="QQFriendInviteView"+t.K++,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/qq/QQFriendInviteViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){var e=new eui.TileLayout;e.paddingTop=3,e.paddingLeft=3,e.paddingRight=3,e.paddingBottom=3,this._itemContainer.layout=e,e.horizontalGap=11,e.verticalGap=27,this._imgDesc=new PicLoader,this._imgDesc.load(rURL("resource/assets/icon/QQFriend/word_1.png")),this.addChild(this._imgDesc),this._imgDesc.touchEnabled=!1,this._imgDesc.x=10,this._imgDesc.y=17
},n.onAdd=function(){e.prototype.onAdd.call(this),this.resetMouseEnable(),GameDispatcher.getInstance().addEventListener(QQEvtName.QQFRIEND_INVITELIST_UPDATE,this.onUpdateList,this),PhpHttpStatisticsManager.requestInviteList(1),this._btnShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareHandler,this)},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.removeEventListener(QQFriendInviteItem.EVT_CLICK,this.onClickItem,this),e.dispose(),e=null;this._itemArr=[]},n.onRemove=function(){e.prototype.onRemove.call(this),GameDispatcher.getInstance().removeEventListener(QQEvtName.QQFRIEND_INVITELIST_UPDATE,this.onUpdateList,this),this._btnShare.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareHandler,this)},n.onUpdateList=function(e){this.clearItems();var t,i=e.data.data;for(var n in i.lists)t=new QQFriendInviteItem,t.addEventListener(QQFriendInviteItem.EVT_CLICK,this.onClickItem,this),t.setData(i.lists[n]),this._itemContainer.addChild(t),this._itemArr.push(t);this._txtProgress.text="进度（"+i.num+"/5）"},n.onClickItem=function(){var e=this;this.touchEnabled=this.touchChildren=!1,setTimeout2(function(){e.resetMouseEnable()},5e3)},n.resetMouseEnable=function(){this.touchEnabled=this.touchChildren=!0},n.onShareHandler=function(){QQManager.getInstance().invite()},n.dispose=function(){e.prototype.dispose.call(this),this.clearItems(),this._imgDesc&&(this._imgDesc.dispose(),this._imgDesc=null)},t.K=0,t}(BaseView);egret.registerClass(QQFriendInviteView,"QQFriendInviteView");var QQFriendRankItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/qq/QQFriendRankItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onListClick,this),this._btnSend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSend,this)},n.onListClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(QQEvtName.QQFRIEND_RANK_ITEM_TAP,this))},n.dataChanged=function(){this.txtName.text=this.data.qq_name,this.txtName2.text=this.data.nickname,this.txtFight.text=this.data.level;var e=this.itemIndex+1;this.txtRank.text=e.toString(),this.itemBg.source=e%2==0?"share_lineBg":"share_lineBg2",console.log("QQFriendRankItem role_id = ",this.data.role_id)},n.setSelected=function(e){this.imgSelect.visible=e},n.onSend=function(e){var t=this.data.openid,i="",n=2,s=this.data.role_id,a=this.data.server_id;QQManager.getInstance().showOff(t,i,n,s,a)},n.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onListClick,this)},t}(eui.ItemRenderer);egret.registerClass(QQFriendRankItem,"QQFriendRankItem");var QQFriendRankItem2=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/qq/QQFriendRankItem2Skin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this._img=new PicLoader,this.addChild(this._img),this._img.x=151,this._img.y=20},n.onListClick=function(){},n.dataChanged=function(){this._txtName.text=this.data.qq_name,this._txtLv.text=this.data.level;var e=this.itemIndex+1;this.itemIndex%2==0?this._imgBg.visible=!0:this._imgBg.visible=!1,this._txtRank.text=e.toString(),this._img.load(this.data.figureurl)},n.dispose=function(){this.parent&&this.parent.removeChild(this),this._img&&(this._img.dispose(),this._img=null)},t}(eui.ItemRenderer);egret.registerClass(QQFriendRankItem2,"QQFriendRankItem2");var QQFriendRankShowWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/qq/QQFriendRankShowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/QQFriend/QQFriendRankShowBg.png"),this.bgGroup.addChild(this.imageBg),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnCanel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCenel,this)},n.onGet=function(){QQManager.getInstance().showOff(this._data.openid,RoleModel.getInstance().getRoleCommon().level+"级"),this.isPop=!1},n.onCenel=function(){this.isPop=!1},n.setData=function(e){this._data=e,this.txtTitle.text="HI~我在"+this._data.tol+"名好友中排名第"+this._data.rank+"，",this.txtContent.text="向好友【"+this._data.qq_name+"】炫耀"},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=GameContent.stageHeight-this.height>>1},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnCanel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCenel,this)},t}(LayeroutWindow);egret.registerClass(QQFriendRankShowWindow,"QQFriendRankShowWindow");var QQFriendRankView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/qq/QQFriendRankViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnGet.visible=!1,PhpHttpStatisticsManager.requestInviteList(2)},n.onUpdateList=function(e){var t=e.data.data,i=[];for(var n in t.lists)i.push(t.lists[n]);i.sort(function(e,t){return Number(e.level)<Number(t.level)?1:-1}),this._cachList=i,this._rank=1;for(var s=new eui.ArrayCollection,a=0;a<i.length;a++)i[a].level>RoleModel.getInstance().getRoleCommon().level&&this._rank++,s.addItem(i[a]);this._itemContainer.dataProvider=s,this._listCount=i.length,this.txtDes.text="你在"+this._listCount+"名好友中排行第",this.txtRank.text=this._rank.toString()},n.onGet=function(){this._selectItem&&this.dispatchGlobalEvent(new ParamEvent(QQEvtName.QQFRIEND_RANK_SHOW,this._selectItem.data))},n.onSend=function(e){for(var t=[],i=0;i<this._cachList.length;i++)t.push(this._cachList[i].rold_id);this.dispatchGlobalEvent(new ParamEvent(QQEvtName.REQEUST_20900,{list:t}))},n.onItemTap=function(e){this._selectItem&&this._selectItem.setSelected(!1),this._selectItem=e.data,this._selectItem.setSelected(!0),this._selectItem.data.rank=this._rank,this._selectItem.data.tol=this._listCount;var t=Number(this._selectItem.data.level);this.btnGet.visible=RoleModel.getInstance().getRoleCommon().level>t},n.onAdd=function(){e.prototype.onAdd.call(this),this.addGlobalEventListener(QQEvtName.QQFRIEND_RANK_LIST,this.onUpdateList,this),this.addGlobalEventListener(QQEvtName.QQFRIEND_RANK_ITEM_TAP,this.onItemTap,this),this.dispatchGlobalEvent(new ParamEvent(QQEvtName.REQEUST_20900))},n.onRemove=function(){e.prototype.onRemove.call(this),this.removeGlobalEventListener(QQEvtName.QQFRIEND_RANK_LIST,this.onUpdateList,this),this.removeGlobalEventListener(QQEvtName.QQFRIEND_RANK_ITEM_TAP,this.onItemTap,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.removeGlobalEventListener(QQEvtName.QQFRIEND_RANK_LIST,this.onUpdateList,this),this.removeGlobalEventListener(QQEvtName.QQFRIEND_RANK_ITEM_TAP,this.onItemTap,this);for(var t=0;t<this._itemContainer.numChildren;t++){var i=this._itemContainer.getChildAt(t);i&&i.dispose()}},t}(BaseView);egret.registerClass(QQFriendRankView,"QQFriendRankView");var QQFriendRankView2=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/qq/QQFriendRankView2Skin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)},n.onUpdateList=function(){var e=QQManager.getInstance().qqFriendsList,t=[];for(var i in e)t.push(e[i]);t.sort(function(e,t){return Number(e.level)<Number(t.level)?1:-1}),this._cachList=t;for(var n=new eui.ArrayCollection,s=0;s<t.length;s++)n.addItem(t[s]);this._itemContainer.dataProvider=n,this._listCount=t.length},n.onGet=function(){},n.onSend=function(e){for(var t=[],i=0;i<this._cachList.length;i++)t.push(this._cachList[i].rold_id);this.dispatchGlobalEvent(new ParamEvent(QQEvtName.REQEUST_20900,{list:t}))},n.onAdd=function(){e.prototype.onAdd.call(this),GameDispatcher.getInstance().addEventListener(QQEvtName.UPDATE_GOODFRIEND_LIST,this.onUpdateList,this);var t=QQManager.getInstance().qqFriendsList;null==t&&QQManager.getInstance().getFriendList(),this.onUpdateList()},n.onRemove=function(){e.prototype.onRemove.call(this),GameDispatcher.getInstance().removeEventListener(QQEvtName.UPDATE_GOODFRIEND_LIST,this.onUpdateList,this)},n.dispose=function(){e.prototype.dispose.call(this),GameDispatcher.getInstance().removeEventListener(QQEvtName.UPDATE_GOODFRIEND_LIST,this.onUpdateList,this);for(var t=0;t<this._itemContainer.numChildren;t++){var i=this._itemContainer.getChildAt(t);i&&i.dispose()}},t}(BaseView);egret.registerClass(QQFriendRankView2,"QQFriendRankView2");var QQFriendWindow=function(e){function t(){e.call(this),this._selectedIndex=0,this._btnCach=new Array,this.skinName="resource/game_skins/qq/QQFriendWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_fanli"),this.createIcons(),this.windowBgBottom=-20,this.onBtnReturnSetIndex()},n.createIcons=function(){var e,t,i='<e:Skin class="skins.ButtonSkin" states="up,down" xmlns:e="http://ns.egret.com/eui">\n                <e:Image width="100%" height="100%"\n                         source="{0}"\n                         source.down="{0}"/>\n            </e:Skin>';this._btnCach=new Array;for(var n=0,s=0;3>s;s++)e=new CustomButton,e.data=s,t=UrlUtil.getQQFriendWinIcon(s+1+""),e.skinName=StringUtil.substitute(i,t),e.x=115*n+20,e.y=15,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this),n++,this._btnCach.push(e),this._iconContainer.addChild(e);this._iconContainer.addChild(this._selectImage),this._selectImage.x=this._btnCach[0].x-10,this._selectImage.y=this._btnCach[0].y-12,this._selectedIndex=0,this.updateView()},n.clickIcon=function(e){var t=e.currentTarget;this._selectImage.x=t.x-10,this._selectImage.y=t.y-12,this._selectedIndex=t.data,this.updateView()},n.updateView=function(){switch(this._currentView&&this._viewContainer.contains(this._currentView)&&(this._currentView.onRemove(),this._viewContainer.removeChild(this._currentView)),this._selectedIndex){case 0:null==this._inviteView&&(this._inviteView=new QQFriendInviteView),this._currentView=this._inviteView,this.getBtnReturn()&&(this.getBtnReturn().visible=!0);break;case 1:null==this._rank&&(this._rank=new QQFriendRankView),this._currentView=this._rank,this.getBtnReturn()&&(this.getBtnReturn().visible=!1);break;case 2:null==this._rankView2&&(this._rankView2=new QQFriendRankView2),this._currentView=this._rankView2,this.getBtnReturn()&&(this.getBtnReturn().visible=!1)}this._currentView&&(this._currentView.onAdd(),this._viewContainer.addChild(this._currentView))},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this._currentView&&this._currentView.onRemove()},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this);var t=Tools.getPageParams("platform"),i=ConfigManager.plat_id,n=Tools.getPageParams("open_key");QQManager.getInstance().getQQInfo(t,i,n)},n.dispose=function(){e.prototype.dispose.call(this),this.onCloseHandler(),this._currentView&&(this._currentView.onRemove(),this._currentView.parent&&this._currentView.parent.removeChild(this._currentView),this._currentView=null),this._inviteView&&(this._inviteView.parent&&this._inviteView.parent.removeChild(this._inviteView),this._inviteView.dispose(),this._inviteView=null),this._rank&&(this._rank.parent&&this._rank.parent.removeChild(this._rank),this._rank.dispose(),this._rank=null),this._rankView2&&(this._rankView2.parent&&this._rankView2.parent.removeChild(this._rankView2),this._rankView2.dispose(),this._rankView2=null)},t}(LayeroutWindow);egret.registerClass(QQFriendWindow,"QQFriendWindow");var QQWeekGiftView=function(e){function t(){e.call(this),this.name="QQWeekGiftView"+t.K++,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/qq/QQWeekGiftViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._bg=new PicLoader,this._bg.load(rURL("resource/assets/icon/QQWeekGift/bg.png")),this.addChild(this._bg),this._bg.touchEnabled=!1,this._bg.x=0,this._bg.y=0},n.onAdd=function(){e.prototype.onAdd.call(this)},n.onRemove=function(){e.prototype.onRemove.call(this)},n.onShareHandler=function(){},n.dispose=function(){e.prototype.dispose.call(this),this._bg&&(this._bg.dispose(),this._bg=null)},t.K=0,t}(BaseView);egret.registerClass(QQWeekGiftView,"QQWeekGiftView");var QQWeekGiftWindow=function(e){function t(){e.call(this),this._selectedIndex=0,this._btnCach=new Array,this.skinName="resource/game_skins/qq/QQWeekGiftWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_weekGift"),this.createIcons(),this.windowBgBottom=-20,this.onBtnReturnSetIndex()},n.createIcons=function(){var e,t,i='<e:Skin class="skins.ButtonSkin" states="up,down" xmlns:e="http://ns.egret.com/eui">\n                <e:Image width="100%" height="100%"\n                         source="{0}"\n                         source.down="{0}"/>\n            </e:Skin>';this._btnCach=new Array;for(var n=0,s=0;1>s;s++)e=new CustomButton,e.data=s,t=UrlUtil.getQQWeekGiftWinIcon(s+1+""),e.skinName=StringUtil.substitute(i,t),e.x=115*n+20,e.y=15,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this),n++,this._btnCach.push(e),this._iconContainer.addChild(e);this._iconContainer.addChild(this._selectImage),this._selectImage.x=this._btnCach[0].x-10,this._selectImage.y=this._btnCach[0].y-12,this._selectedIndex=0,this._selectImage.visible=!1,this.updateView()},n.clickIcon=function(e){var t=e.currentTarget;this._selectImage.x=t.x-10,this._selectImage.y=t.y-12,this._selectedIndex=t.data,this.updateView()},n.updateView=function(){switch(this._currentView&&this._viewContainer.contains(this._currentView)&&(this._currentView.onRemove(),this._viewContainer.removeChild(this._currentView)),this._selectedIndex){case 0:null==this._weekGiftView&&(this._weekGiftView=new QQWeekGiftView),this._currentView=this._weekGiftView}this._currentView&&(this._currentView.onAdd(),this._viewContainer.addChild(this._currentView))},n.onCloseHandler=function(){this._currentView&&this._currentView.onRemove(),e.prototype.onCloseHandler.call(this)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this)},n.dispose=function(){e.prototype.dispose.call(this),this.onCloseHandler(),this._currentView&&(this._currentView.onRemove(),this._currentView.parent&&this._currentView.parent.removeChild(this._currentView),this._currentView=null),this._weekGiftView&&(this._weekGiftView.parent&&this._weekGiftView.parent.removeChild(this._weekGiftView),this._weekGiftView.dispose(),this._weekGiftView=null)},t}(LayeroutWindow);egret.registerClass(QQWeekGiftWindow,"QQWeekGiftWindow");var AchievementItem=function(e){function t(){e.call(this),this._showCheckBox=!1,this.LABEL_GET="领取",this.LABEL_GETING="领取中",this._delaySI=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/achievement/AchievementItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){var e=this;this._checkBox.visible=this._showCheckBox,this._img=new PicLoader,this.addChild(this._img),this._img.x=24,this._img.y=22,this._imgSmallGoods=new PicLoader,this.addChild(this._imgSmallGoods),this._imgSmallGoods.x=139,this._imgSmallGoods.y=76,this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._imageState.visible=!1,this._btnOK.enabled=!1,this._delaySI=setTimeout2(function(){e.updateBtnEnable()},300),this._checkBox.addEventListener(egret.Event.CHANGE,this.onCheckBoxHandler,this)},s.onOkHandler=function(){this._btnOK.label==this.LABEL_GET,this.dispatchGlobalEvent(new ParamEvent(AchievementEvtName.CCMD21101,{type:this._vo.type})),this.flySucessHandler()},s.onCheckBoxHandler=function(){AchievementModel.getInstance().autoGetReward=this._checkBox.selected,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(AchievementEvtName.ACHIEVEMENT_REWARD_AUTO,{auto:this._checkBox.selected}))},s.setGetingState=function(e){e?this._btnOK.enabled&&(this._btnOK.label=this.LABEL_GETING):this._btnOK.enabled&&(this._btnOK.label=this.LABEL_GET)},s.showCheckBox=function(e){this._showCheckBox=e,this._checkBox&&(this._checkBox.visible=e),e&&(this._checkBox.selected=AchievementModel.getInstance().autoGetReward)},s.updateBtnEnable=function(){0==this._btnOK.enabled&&(this._btnOK.enabled=!0)},s.flySucessHandler=function(){var e=this.localToGlobal(this._imgSmallGoods.x,this._imgSmallGoods.y),t=GoodsListProxy.getInstance().getGoodsInfoByType(this._vo.showList[0].asset_id);AccessGoodFlyEffectManager.getInstance().getGood(t.pic,AccessGoodFlyEffectManager.BAGTYPE,e)},s.setData=function(e){this._node=e;var t=AchievementModel.getInstance().getAchievementVO(e.type,e.template_id);if(this._vo=t,t){var i=GoodsListProxy.getInstance().getGoodsInfoByType(t.showList[0].asset_id);this._img.load(rURL("resource/assets/icon/achievement/"+this._vo.type+".png")),this._txtCoin.text=t.showList[0].value+"",this._imgSmallGoods.load(UrlUtil.getSmallPic(i.template_id)),this._txtDesc.text=t.name,this._txtName.text=t.title}0==e.flag?this._btnOK.visible=!1:1==e.flag?this._btnOK.visible=!0:2==e.flag&&(this._btnOK.visible=!1,this._imageState.visible=!0)},s.checkGet=function(){return 1==this._node.flag?!0:!1},i(s,"vo",function(){return this._vo}),s.dispose=function(){this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._checkBox.removeEventListener(egret.Event.CHANGE,this.onCheckBoxHandler,this),this.parent&&this.parent.removeChild(this),this._img&&(this._img.dispose(),this._img=null),this._imgSmallGoods&&(this._imgSmallGoods.dispose(),this._imgSmallGoods=null),clearTimeout(this._delaySI)},t}(Csprite);egret.registerClass(AchievementItem,"AchievementItem");var AchievementWindow=function(e){function t(){e.call(this),this._itemArr=[],this.si=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/achievement/AchievementWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.dispatchGlobalEvent(new ParamEvent(AchievementEvtName.CCMD21100)),GameDispatcher.getInstance().addEventListener(AchievementEvtName.CCMD21100_UPDATE,this.updateList,this),GameDispatcher.getInstance().addEventListener(AchievementEvtName.ACHIEVEMENT_REWARD_AUTO,this.autoHandler,this),this.updateList()},n.onCloseHandler=function(){GameDispatcher.getInstance().removeEventListener(AchievementEvtName.CCMD21100_UPDATE,this.updateList,this),GameDispatcher.getInstance().removeEventListener(AchievementEvtName.ACHIEVEMENT_REWARD_AUTO,this.autoHandler,this),this.clearItems(),this.stopAuto(),e.prototype.onCloseHandler.call(this)},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.dispose(),e=null;this._itemArr=[]},n.autoHandler=function(e){for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],t.y=115*n,t.setGetingState(e.data.auto),0==n&&1==t.checkGet()&&1==AchievementModel.getInstance().autoGetReward&&(this.dispatchGlobalEvent(new ParamEvent(AchievementEvtName.CCMD21101,{type:t.vo.type})),t.flySucessHandler());0==e.data.auto&&this.stopAuto()},n.updateList=function(){var e=this;this.clearItems();for(var t,i=AchievementModel.getInstance().achievementDataArr,n=i.length,s=!1,a=0;n>a;a++)t=new AchievementItem,t.y=115*a,t.setData(i[a]),t.setGetingState(AchievementModel.getInstance().autoGetReward),0==a&&1==t.checkGet()&&t.showCheckBox(!0),0==a&&1==t.checkGet()&&1==AchievementModel.getInstance().autoGetReward&&(clearTimeout(this.si),this.si=setTimeout2(function(){e.getReward()},300)),1==t.checkGet()&&(s=!0),this._itemContainer.addChild(t),this._itemArr.push(t);0==s&&this.stopAuto()},n.getReward=function(){var e=this._itemArr[0];this.dispatchGlobalEvent(new ParamEvent(AchievementEvtName.CCMD21101,{type:e.vo.type})),e.flySucessHandler()},n.stopAuto=function(){AchievementModel.getInstance().autoGetReward=!1,clearTimeout(this.si)},t}(BaseView);egret.registerClass(AchievementWindow,"AchievementWindow");var ActivityBackWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/activity/ActivityBackWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageTitle("title_friend_add"),this._content=new PicLoader,this._content.load(rURL("resource/assets/icon/activity/activity_backBg.png")),this.addChildAt(this._content,0),this._vo=ActivityModel.getInstance().getBackVo(),this.item_1.data=this._vo.add_item[0].info,this.item_1.showLv(!1),this.item_2.data=this._vo.add_item[0].info,this.item_2.showLv(!1)},n.updateData=function(e){var t=e.data,i=RoleModel.getInstance().getServerDate().getDate(),n=this._vo.get_time,s=parseInt(n[2]),a=parseInt(n[5]),o=parseInt(n[8]),r=parseInt(n[11]);a>=i?(this.txtTime.text=n[1]+"月"+s+"日领取",this.txtTime2.text=n[4]+"月"+a+"日领取",this.btnGet.visible=i==s&&0==t.award_flag,this.btnGet2.visible=i==a&&0==t.award_flag):(this.txtTime.text=n[7]+"月"+o+"日领取",this.txtTime2.text=n[10]+"月"+r+"日领取",this.btnGet.visible=i==o&&0==t.award_flag,this.btnGet2.visible=i==r&&0==t.award_flag)},n.onGet=function(){this.dispatchGlobalEvent(new ParamEvent(ActivityEvtName.CCMD22210)),this.isPop=!1},n.onClose=function(){this.isPop=!1},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=GameContent.stageHeight-this.height>>1},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnGet2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.addGlobalEventListener(ActivityEvtName.CCMD22200_UPDATE,this.updateData,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnGet2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.removeGlobalEventListener(ActivityEvtName.CCMD22200_UPDATE,this.updateData,this),this._content&&(this._content.dispose(),this._content=null),this.item_1&&(this.item_1.dispose(),this.item_1=null),this.item_2&&(this.item_2.dispose(),this.item_2=null)},t}(LayeroutWindow);egret.registerClass(ActivityBackWindow,"ActivityBackWindow");var ActivityJubaoListView=function(e){function t(){e.call(this),this._resTime=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/activity/ActivityJubaoListViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addGlobalEventListener(ActivityEvtName.CCMD22600_UPDATE,this.updateData,this),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this._bg=new PicLoader,this.addChildAt(this._bg,0)},n.onGet=function(e){var t=this;this.dispatchGlobalEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"",content:"是否花费"+this._jubaoVo.rmb+"人民币购买聚宝盆",func:function(){ConfigManager.isTencent()?ConfigManager.isIOS()?QQManager.getInstance().QQBuyGoods(t._jubaoVo.ios,t._jubaoVo.template_id):QQManager.getInstance().QQBuyGoods(t._jubaoVo.android,t._jubaoVo.template_id):PhpHttpStatisticsManager.requestChargeOrder(1,t._jubaoVo.rmb,10,"聚宝盆",1,t._jubaoVo.template_id)}}))},n.setVO=function(e){this._vo=e,this._jubaoVo=ActivityModel.getInstance().getJubaoVo(e.template_id),this._bg.load("resource/assets/icon/activity/activity_jubao_"+this._jubaoVo.show+".jpg");var t=this._vo.endDate,i=new Date(1e3*RoleModel.getInstance().serverTime),n=(t.getTime()-i.getTime())/1e3;this._resTime=Math.ceil(n),TimerManager.getInstance().remove(1e3,this.onTimer,this),this._resTime>0&&(TimerManager.getInstance().add(1e3,this.onTimer,this),this.onTimer())},n.onTimer=function(){this._resTime--,this._resTime>0?this.txtTime.text=TimeUtil.getTime5(this._resTime):(TimerManager.getInstance().remove(1e3,this.onTimer,this),this.txtTime.text="活动已结束")},n.updateData=function(){var e=ActivityModel.getInstance().getBuyJubaoData(this._jubaoVo.template_id);this.btnBuy.visible=e?!1:!0,this.setData(this._jubaoVo)},n.setData=function(e){for(var t=ActivityModel.getInstance().getJubaoReward(e.template_id),i=new eui.ArrayCollection,n=0;n<t.length;n++)i.addItem(t[n]);this.listGroup.dataProvider=i},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(ActivityEvtName.CCMD22600_UPDATE,this.updateData,this),this.btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),TimerManager.getInstance().remove(1e3,this.onTimer,this),this._bg&&(this._bg.dispose(),this._bg=null);for(var t=0;t<this.listGroup.numChildren;t++){var i=this.listGroup.getChildAt(t);i&&(i.dispose(),i=null)}},t}(BaseView);egret.registerClass(ActivityJubaoListView,"ActivityJubaoListView");var ActivityJubaoRewardItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/activity/ActivityJubaoRewardItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this)},n.dataChanged=function(){this._vo=this.data;for(var e,t=0;4>t;t++)e=this["item_"+t],this._vo.add_item2[t]?(e.data=this._vo.add_item2[t].info,e.visible=!0):e.visible=!1;var i="第"+this._vo.day+"天\n",n=ActivityModel.getInstance().getBuyJubaoData(this._vo.type);i+=n&&n.award_id>=this._vo.day?"("+ColorUtil.getColorHtmlStr("已领取",ColorUtil.COLOR_GREEN)+")":"("+ColorUtil.getColorHtmlStr("未领取",ColorUtil.COLOR_RED)+")",this.txtDay.htmlText=i},n.dispose=function(){for(var e,t=0;4>t;t++)e=this["item_"+t],e.dispose()},t}(eui.ItemRenderer);egret.registerClass(ActivityJubaoRewardItem,"ActivityJubaoRewardItem");var ActivityOffLineWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/activity/ActivityOffLineWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_activity_off"),this._content=new PicLoader,this._content.x=35,this._content.y=235,this._content.load(rURL("resource/assets/icon/activity/activity_offLineContent.png")),this.panelSkin.addChild(this._content),this._vo=ActivityModel.getInstance().getOffVo();for(var t,i=0;5>i;i++)t=this["item_"+i],this._vo.show[i]?(t.data=this._vo.show[i].info,t.visible=!0):t.visible=!1},n.updateData=function(e){var t=e.data;this.txtTime.text=TimeUtil.getTimeHour(t.total_sec)+"小时";var i=Math.floor(t.total_sec/this._vo.need_sec);i>50&&(i=50),this.txtCount.text=i.toString(),this.btnGet.visible=i>0},n.onGet=function(){this.dispatchGlobalEvent(new ParamEvent(ActivityEvtName.CCMD22410)),this.isPop=!1},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.addGlobalEventListener(ActivityEvtName.CCMD22400_UPDATE,this.updateData,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.removeGlobalEventListener(ActivityEvtName.CCMD22400_UPDATE,this.updateData,this),this._content&&(this._content.dispose(),this._content=null)},t}(LayeroutWindow);egret.registerClass(ActivityOffLineWindow,"ActivityOffLineWindow");var ActivitySendGoldView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/activity/ActivitySendGoldViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiCompHandler,e),e.img_up.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGet,e),e.addGlobalEventListener(ActivityEvtName.CCMD24700_UPDATE,e.updateData,e),e.addGlobalEventListener(DailyEvtName.FIXED_DATA_CHANGE,e.updateCount,e),e._bg2=new PicLoader,e._bg2.x=9,e._bg2.y=202,e._bg2.load(rURL("resource/assets/icon/sendGold/activitySendGoldBg2.png")),e.addChildAt(e._bg2,0),e._bg=new PicLoader,e._bg.x=-29,e._bg.load(rURL("resource/assets/icon/sendGold/activitySendGoldBg.png")),e.addChildAt(e._bg,0),e._itemArr=[];for(var t,i=0;6>i;i++)t=new RandCircle("resource/assets/icon/sendGold/activitySendGoldNum_",9,10),t.addEventListener(RandCircle.STOP,e.onRandStop,e),t.x=e["img_mask"+i].x+5,t.y=e["img_mask"+i].y,e.addChild(t),t.mask=e["img_mask"+i],e._itemArr.push(t);e.updateCount()},n.onRandStop=function(){var e=this;e._stopCount++,e._stopCount==e._itemArr.length?(e.dispatchGlobalEvent(new ParamEvent(ActivityEvtName.CCMD24710)),e.updateCount()):e.playDone()},n.setVO=function(e){var t=this,i=7-HuoDongDailyModel.getInstance().kaiFuDay,n=(e.endDate.getTime()-(new Date).getTime())/1e3;t._time=Math.ceil(n)+24*i*60*60,t.timeComplete(),TimerManager.getInstance().add(1e3,t.timeComplete,t)},n.timeComplete=function(){var e=this;e._time--,e._time<=0?TimerManager.getInstance().remove(1e3,e.timeComplete,e):e.txtTime.text="倒计时："+TimeUtil.getTime3(e._time)},n.onGet=function(e){var t=this;RoleModel.getInstance().CheckGold(t._vo.superior_limit)&&(t.img_up.visible=!1,t.img_down.visible=!0,t.dispatchGlobalEvent(new ParamEvent(ActivityEvtName.CCMD24700)))},n.updateData=function(e){var t=this;t._result=e.data.toString();for(var i,n=0;n<t._itemArr.length;n++)i=t._itemArr[n],i.play();t._stopCount=0,clearTimeout(t._timeIndex),t._timeIndex=setTimeout2(function(){t.playDone()},500)},n.playDone=function(){var e,t=this,i=t._result.split(""),n=0,s=0;e=t._itemArr[t._stopCount],s=i.length-1-t._stopCount,n=s>=0&&i[s]?Number(i[s]):0,e.alignToTarget(n)},n.updateCount=function(){var e=this,t=FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE24701),i=ActivityModel.getInstance().getSendGoldMax();e._vo=ActivityModel.getInstance().getConfigSendGold()[t+1],e._vo?(e.txtTitle.htmlText="元宝送不停，每次都超乎你想象 本次最低送出"+ColorUtil.getColorHtmlStr(e._vo.consume,ColorUtil.COLOR_GREEN)+"元宝",e.txtCost.htmlText="本次需元宝："+ColorUtil.getColorHtmlStr(e._vo.superior_limit,ColorUtil.COLOR_GREEN)+"元宝",e.img_up.visible=!0,e.txtContent.htmlText="最多可得"+ColorUtil.getColorHtmlStr(i.lower_limit,ColorUtil.COLOR_GREEN)+"元宝"):(e.img_up.visible=!1,e.txtTitle.text="你的抽奖次数已用完",e.txtContent.text=""),e.img_down.visible=!1;var n=i.template_id-t;e.txtCount.htmlText="剩余次数："+ColorUtil.getColorHtmlStr(n,n>0?ColorUtil.COLOR_GREEN:ColorUtil.COLOR_RED)+ColorUtil.getColorHtmlStr("/"+i.template_id,ColorUtil.COLOR_GREEN)},n.dispose=function(){var e=this;TimerManager.getInstance().remove(1e3,e.timeComplete,e),e.img_up.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onGet,e),e.removeGlobalEventListener(ActivityEvtName.CCMD24700_UPDATE,e.updateData,e),e.removeGlobalEventListener(DailyEvtName.FIXED_DATA_CHANGE,e.updateCount,e);for(var t,i=0;i<e._itemArr.length;i++)t=e._itemArr[i],t.removeEventListener(RandCircle.STOP,e.onRandStop,e),t.dispose(),t=null;e._itemArr=null},t}(BaseView);egret.registerClass(ActivitySendGoldView,"ActivitySendGoldView");
var ActivityYuyueWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/activity/ActivityYuyueWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageTitle("title_friend_add"),this._content=new PicLoader,this._content.x=-136,this._content.load(rURL("resource/assets/icon/activity/activity_yuyueBg.png")),this.addChildAt(this._content,0);var t=FanLiModel.getInstance().checkHasFanliDataByType(FanLiModel.ACTIVITY_YY);this._vo=ActivityModel.getInstance().getYYVo(t.template_id),this.item_1.data=this._vo.add_item[0].info,this.item_1.showLv(!1),this.item_2.data=this._vo.add_item[0].info,this.item_2.showLv(!1);for(var i,n="",s=0;s<this._vo.show.length;s++)i=this._vo.show[s],n+=i.info.name+"×"+i.num+"、";this.txtDes.text=n;var a=RoleModel.getInstance().getServerDate().getDate(),o=this._vo.get_time,r=parseInt(o[2]),h=parseInt(o[5]);this._isGet=r>=a||h>=a,this.txtTime.text=o[1]+"月"+r+"日领取",this.txtTime2.text=o[4]+"月"+h+"日领取";var l=this._vo.order_time,d=parseInt(l[2]),_=parseInt(l[5])-1;this.txtTitle.text=l[1]+"月"+d+"~"+_+"号预约领取资格 ",this.txtTitle2.text=r+"号和"+h+"号即可领取超值大礼"},n.updateData=function(e){this._data=e.data;var t=this._vo.order_time,i=RoleModel.getInstance().getServerDate(),n=RoleModel.getInstance().getServerDate();n.setFullYear(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2])),n.setHours(0,0,0);var s=RoleModel.getInstance().getServerDate();s.setFullYear(parseInt(t[3]),parseInt(t[4])-1,parseInt(t[5])),s.setHours(0,0,0),this._isYY=i.getTime()<=n.getTime()||i.getTime()<=s.getTime();var a=this._vo.get_time,o=parseInt(a[2]),r=parseInt(a[5]),h=i.getDate();this._isGet=o>=h||r>=h,this._isYY?(this.btnGet.visible=i.getTime()>=n.getTime()&&i.getTime()<s.getTime()&&0==this._data.flag,this.txtTips.visible=1==this._data.flag):this._isGet&&(this.btnGet1.visible=h==o&&0==this._data.award_flag&&1==this._data.flag,this.btnGet2.visible=h==r&&0==this._data.award_flag&&1==this._data.flag)},n.onGet=function(){this.dispatchGlobalEvent(new ParamEvent(ActivityEvtName.CCMD22310)),this.isPop=!1},n.onGet2=function(){this.dispatchGlobalEvent(new ParamEvent(ActivityEvtName.CCMD22311)),this.isPop=!1},n.onClose=function(){this.isPop=!1},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=GameContent.stageHeight-this.height>>1},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnGet1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet2,this),this.btnGet2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet2,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.addGlobalEventListener(ActivityEvtName.CCMD22300_UPDATE,this.updateData,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnGet1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet2,this),this.btnGet2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet2,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.removeGlobalEventListener(ActivityEvtName.CCMD22300_UPDATE,this.updateData,this),this._content&&(this._content.dispose(),this._content=null),this.item_1&&(this.item_1.dispose(),this.item_1=null),this.item_2&&(this.item_2.dispose(),this.item_2=null)},t}(LayeroutWindow);egret.registerClass(ActivityYuyueWindow,"ActivityYuyueWindow");var QQVipRewardItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/activity/QQVipRewardItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this._vipIcon=new PicLoader,this._vipIcon.x=10,this._vipIcon.y=48,this.addChild(this._vipIcon)},n.dataChanged=function(){this._vo=this.data,this._vipIcon.load("resource/assets/icon/qqvip/qqvipIcon_"+this._vo.template_id+".png");for(var e,t=0;3>t;t++)e=this["item_"+t],this._vo.add_item2[t]?(e.data=this._vo.add_item2[t].info,e.visible=!0):e.visible=!1;var i=ActivityModel.getInstance().qqvipData;if(i.level==this._vo.template_id){this.txtTips.visible=!1;var n=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_22901);this.btnGet.visible=0==n,this.img_ylq.visible=!this.btnGet.visible}else this.txtTips.visible=!0,this.btnGet.visible=!1,this.img_ylq.visible=!1},n.onGet=function(){var e=ActivityModel.getInstance().qqvipData;return 0==e.flag?void Message.show(this._vo.act_desc):(this.btnGet.visible=!1,void GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ActivityEvtName.CCMD22910)))},n.dispose=function(){this._vipIcon&&(this._vipIcon.dispose(),this._vipIcon=null);for(var e,t=0;4>t;t++)e=this["item_"+t],e.dispose()},t}(eui.ItemRenderer);egret.registerClass(QQVipRewardItem,"QQVipRewardItem");var QQVipShopItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/activity/QQVipShopItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this._vipIcon=new PicLoader,this._vipIcon.x=10,this._vipIcon.y=48,this.addChild(this._vipIcon)},n.dataChanged=function(){this._vo=this.data,this._vipIcon.load("resource/assets/icon/qqvip/qqvipIcon_"+this._vo.template_id+".png"),this.item.data=this._vo.add_item2[0].info,this.txtCost.text="原价："+this._vo.original_price,this.txtCost2.text="现价："+this._vo.con_gold;var e=ActivityModel.getInstance().qqvipData,t=FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE22901,this._vo.template_id);this.btnBuy.visible=e.level==this._vo.template_id&&0==t,this.txtTips.visible=e.level!=this._vo.template_id},n.onGet=function(){var e=ActivityModel.getInstance().qqvipData;return 0==e.flag?void Message.show(ActivityModel.getInstance().getQQVipVo(this._vo.template_id).act_desc):(this.btnBuy.visible=!1,void GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ActivityEvtName.CCMD22920,this._vo.template_id)))},n.dispose=function(){this._vipIcon&&(this._vipIcon.dispose(),this._vipIcon=null);for(var e,t=0;4>t;t++)e=this["item_"+t],e.dispose()},t}(eui.ItemRenderer);egret.registerClass(QQVipShopItem,"QQVipShopItem");var QQVipWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/activity/QQVipWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_qqvip")},n.clickReward=function(e){this._selectImage.x=this.btn_reward.x-5,this._viewReward.visible=!0,this._viewShop.visible=!1},n.clickShop=function(e){this._selectImage.x=this.btn_shop.x-5,this._viewReward.visible=!1,this._viewShop.visible=!0,this.updateShop()},n.updateData=function(){if(this._viewReward.visible){var e=ActivityModel.getInstance().getQQVip(),t=new eui.ArrayCollection;if(e.length>0)for(var i=0;i<e.length;i++)t.addItem(e[i]);this.rewardList.dataProvider=t}var n=ActivityModel.getInstance().qqvipData;this._txtVipLv.text=StringUtil.substitute("我的vip特权等级：{0}",n.level)},n.updateShop=function(){if(this._viewShop.visible){var e=ActivityModel.getInstance().getQQVipShop(),t=new eui.ArrayCollection;if(e.length>0)for(var i=0;i<e.length;i++)t.addItem(e[i]);this.shopList.dataProvider=t}},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btn_reward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickReward,this),this.btn_shop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickShop,this),this.addGlobalEventListener(ActivityEvtName.CCMD22900_UPDATE,this.updateData,this),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateData,this),this.addGlobalEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.updateShop,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btn_reward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickReward,this),this.btn_shop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickShop,this),this.removeGlobalEventListener(ActivityEvtName.CCMD22300_UPDATE,this.updateData,this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateData,this),this.removeGlobalEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.updateShop,this)},t}(LayeroutWindow);egret.registerClass(QQVipWindow,"QQVipWindow");var SuperVipWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/activity/SuperVipWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this._bg=new PicLoader,this._bg.load("resource/assets/icon/activity/superVip_bg.jpg"),this.bgGroup.addChild(this._bg);var t=ActivityModel.getInstance().getSuperVipShop();this.txtDes.text=t.show_word,this.txtNum.text=t.show_qq+"";for(var i,n=418,s=220,a=0;a<t.show_award.length;a++)i=new GoodsItemSmall,i.data=t.show_award[a].info,i.x=n,i.y=s,this.addChild(i),1==a?(n=418,s+=110):n+=90;0==QQManager.getInstance().verifyVipStatu?(this.btnGet.enabled=!0,this.btnGet.label="提交信息"):(this.btnGet.enabled=!1,this.btnGet.label="已提交"),this.btnSms.enabled=this.btnGet.enabled,this.txtTips.visible=!this.btnGet.enabled},n.onSms=function(){return""==this.txtPhone.text?void Message.show("电话不能为空"):void QQManager.getInstance().requestSms(this.txtPhone.text)},n.onGet=function(){return""==this.txtQQ.text||""==this.txtMail.text||""==this.txtDate.text||""==this.txtPhone.text||""==this.txtSms.text?void Message.show("信息不能为空"):this.txtDate.text.length<8?void Message.show("请输入8位数字"):void QQManager.getInstance().requestSuperVip(this.txtQQ.text,this.txtDate.text,this.txtPhone.text,this.txtSms.text,this.txtMail.text)},n.onTxtFocus=function(){this.txtDate.text=""},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnSms.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSms,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.txtDate.addEventListener(egret.TouchEvent.FOCUS_IN,this.onTxtFocus,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnSms.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSms,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.txtDate.removeEventListener(egret.TouchEvent.FOCUS_IN,this.onTxtFocus,this),this._bg&&(this._bg.dispose(),this._bg=null)},t}(LayeroutWindow);egret.registerClass(SuperVipWindow,"SuperVipWindow");var ArtifactItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/artifact/ArtifactItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){ArtifactModel.getInstance().addEventListener(ArtifactEvtName.ARTIFACT_UPDATE_INFO,this.updateInfoHandler,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this)},n.setData=function(e){this._vo=e,this._image.source=rURL("resource/assets/icon/artifact/icon_"+e.show_icon+".png"),this._imageName.source=rURL("resource/assets/icon/artifact/word_"+e.show_icon+".png"),"0"!=e.show_source?(this._container1.visible=!0,this._txtCondition.text=e.show_source):this._container1.visible=!1,this.updateNum()},n.updateNum=function(){this.showRedDot=ArtifactModel.getInstance().getArtifactsSingleCanupOrActive(this._vo)},n.updateInfoHandler=function(){var e=ArtifactModel.getInstance().getArtifactServerData(this._vo.type);e&&(e.level>0?this._container1.visible=!1:this._container1.visible=!1)},n.setSelected=function(e){this._image_selected.visible!=e&&(this._image_selected.visible=e)},n.getData=function(){return this._vo},n.dispose=function(){ArtifactModel.getInstance().removeEventListener(ArtifactEvtName.ARTIFACT_UPDATE_INFO,this.updateInfoHandler,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),this.parent&&this.parent.removeChild(this),this._image&&(this._image.source=null),this._imageName&&(this._imageName.source=null),this._vo=null},t}(Csprite);egret.registerClass(ArtifactItem,"ArtifactItem");var ArtifactSingleWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/artifact/ArtifactSingleWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.ARTIFACT,this.setImageWindowTitle("title_shenqi")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),this.updateNum()},n.onCloseHandler=function(){this.clearContent(),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),e.prototype.onCloseHandler.call(this)},n.updateNum=function(){RedDotsModel.getInstance().calMainArtifactSingleIconRedDot()},n.openView=function(e,t){if(t)this.isPop=!0;else{var i=!this.isPop;this.isPop=i}1==this.isPop&&(this._artifactView||(this._artifactView=new ArtifactView,this.container.addChild(this._artifactView)),this._artifactView.onOpenHandler())},n.onBoxTap=function(e){e.data&&(FigureModel.getInstance().selectedPartnerVO=e.data)},n.clearContent=function(){this._artifactView&&(this._artifactView.parent&&this._artifactView.parent.removeChild(this._artifactView),this._artifactView.onCloseHandler(),this._artifactView=null)},t}(LayeroutWindow);egret.registerClass(ArtifactSingleWindow,"ArtifactSingleWindow");var ArtifactView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/artifact/ArtifactViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this._btnDown.visible=this._btnUp.visible=!1},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnDown.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDownHandler,this),this._btnUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpHandler,this),this.dispatchGlobalEvent(new ParamEvent(ArtifactEvtName.CCMD12900)),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),ArtifactModel.getInstance().addEventListener(ArtifactEvtName.ARTIFACT_UPDATE_INFO,this.updateInfoHandler,this);var t,i=ArtifactModel.getInstance().getArrifactTypeDataList(),n=i.length;this._itemArr=[];for(var s=0;n>s;s++)t=new ArtifactItem,t.y=122*s,t.setData(i[s]),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),this._itemContainer.addChild(t),this._itemArr.push(t);this.setSelected(this._itemArr[0])},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnDown.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDownHandler,this),this._btnUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpHandler,this),ArtifactModel.getInstance().removeEventListener(ArtifactEvtName.ARTIFACT_UPDATE_INFO,this.updateInfoHandler,this),this.showEffect(!1),this._effect&&(this._effect.dispose(),this._effect=null);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t.dispose(),t=null;this._itemArr=null,this.cProNextVO=null,this.nullProVO=null},n.onItemClick=function(e){var t=e.currentTarget;this.setSelected(t)},n.onDownHandler=function(){},n.onUpHandler=function(){},n.onOkHandler=function(){var e=new ParamEvent(ArtifactEvtName.CCMD12901);e.data={type:this._selectedItem.getData().type},this.dispatchGlobalEvent(e)},n.setSelected=function(e){for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t.setSelected(!1);e.setSelected(!0),this._selectedItem=e,this.updateInfoHandler()},n.updateNum=function(){var e=0,t="#00d228",i="";this.cProNextVO?(i=GoodsListProxy.getInstance().getBasicGood(this.cProNextVO.con_itemid).name,e=GoodsListProxy.getInstance().findGoodNumber(this.cProNextVO.con_itemid),e<this.cProNextVO.con_count&&(t="#ff0000"),this._txtCondition.htmlText="消耗："+i+"x"+this.cProNextVO.con_count+"<font color='"+t+"'>("+e+"/"+this.cProNextVO.con_count+")<font>"):this._txtCondition.text="已满级"},n.showEffect=function(e,t){void 0===t&&(t=""),e?(this._imageEffect||(this._imageEffect=new UIEffect),this._imageEffect.showEffect(UrlUtil.getCommonEffectURL(t),-38,-132,this,120,!0)):this._imageEffect&&(this._imageEffect.dispose(),this._imageEffect=null)},n.updateInfoHandler=function(){function e(e,t,i,n,s,a){void 0===i&&(i="#e7d0b7"),void 0===n&&(n=!1),void 0===s&&(s=!1),void 0===a&&(a=1);for(var o=0,r=0,h="",d="",_=0;_<t.length;_++)d=t[_],o=null==e?0:e[d],r=_,!s&&0>=o||(n&&l.push(d),h+=1==a?r>=5?"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[d]+" ：</font><font color='"+i+"'>+"+o/100+"%</font>":"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[d]+" ：</font><font color='"+i+"'>+"+o+"</font>":r>=5?"\n<font color='"+i+"'>+"+o/100+"%</font>":"\n<font color='"+i+"'>+"+o+"</font>");return h}this.nullProVO||(this.nullProVO=new ArtifactDataVO);var t=this._selectedItem.getData(),i=ArtifactModel.getInstance().getArtifactServerData(t.type),n=0,s=0,a="#ff0000";i?(n=i.level,t=ArtifactModel.getInstance().getArtifactDataVO(t.type,i.level),this.showEffect(!0,"shenqi1"),this._txtName2.text=t.name,this._btnOK.label="升阶"):(this.showEffect(!0,"shenqi2"),this._txtName2.htmlText="<font color='"+a+"'>"+t.name+"·未激活</font>",this._btnOK.label="激活"),n<ArtifactModel.getInstance().getArtifactMaxLv(t.type)&&(s=n+1),"0"!=t.show_word?this._txtDesc.text=t.show_word:this._txtDesc.text="";var o=ArtifactModel.getInstance().getArtifactDataVO(t.type,s);this.cProNextVO=o;var r="",h="",l=[];0>=n?(r=e(o,EquipBasic.PROPERTY_INDEX,"#00D228",!0,!1,2),h=e(this.nullProVO,l,"#e7d0b7",!1,!0),this._txtFPower.text="0"):(h=e(t,EquipBasic.PROPERTY_INDEX),o&&(r=e(o,EquipBasic.PROPERTY_INDEX,"#00D228",!1,!1,2)),this._txtFPower.text=Number(PropertyUtil.calculateProFight(t)).toFixed()),o?(this._groupProLeft.x=10,this._imageArrow.visible=!0):(this._groupProLeft.x=64,this._imageArrow.visible=!1),this._txtName.text=t.name,this._txtPro.htmlText=h,this._txtProNext.htmlText=r,null==this._effect&&(this._effect=new UIEffect),this._effect.showEffect(UrlUtil.getArtifactEffectURL("model_"+t.show_icon),0,0,this._effectContainer,120,!0),this.updateNum()},t}(BaseView);egret.registerClass(ArtifactView,"ArtifactView");var ArtifactWindow=function(e){function t(){e.call(this),this._selectedTabIndex=0,this.skinName="resource/game_skins/artifact/ArtifactWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this);var t=this;t.setImageWindowTitle("title_pkSkill"),t.tabBar.dataProvider=new eui.ArrayCollection(["目标","神功","爵位","成就"])},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),RedDotsModel.getInstance().addEventListener(RedDotsModel.ARTIFACT_TAB_REDDOT,this.updateTabRedDot,this),GameDispatcher.getInstance().addEventListener(ArtifactEvtName.SHENGONG_UPDATE_INFO,this.updateShengongHandler,this),GameDispatcher.getInstance().addEventListener(ArtifactEvtName.EXNOBILITY_UPDATE_INFO,this.updateExnobilityHandler,this),GameDispatcher.getInstance().addEventListener(AchievementEvtName.CCMD21100_UPDATE,this.updateAchievementHandler,this),this.updateAchievementHandler(),this.updateShengongHandler(),this.updateExnobilityHandler()},n.onCloseHandler=function(){this.clearContent(),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),RedDotsModel.getInstance().removeEventListener(RedDotsModel.ARTIFACT_TAB_REDDOT,this.updateTabRedDot,this),GameDispatcher.getInstance().removeEventListener(ArtifactEvtName.SHENGONG_UPDATE_INFO,this.updateShengongHandler,this),GameDispatcher.getInstance().removeEventListener(ArtifactEvtName.EXNOBILITY_UPDATE_INFO,this.updateExnobilityHandler,this),GameDispatcher.getInstance().removeEventListener(AchievementEvtName.CCMD21100_UPDATE,this.updateAchievementHandler,this),e.prototype.onCloseHandler.call(this)},n.updateNum=function(){},n.updateAchievementHandler=function(){RedDotsModel.getInstance().calAchievementTabRedDot()},n.updateShengongHandler=function(){RedDotsModel.getInstance().calShengongTabRedDot()},n.updateExnobilityHandler=function(){RedDotsModel.getInstance().calExnobilityTabRedDot()},n.updateTabRedDot=function(e){var t=e.data.index,i=e.data.show;i?(this.tabBar.validateNow(),this.tabBar.getChildAt(t).showRedDot=!0):(this.tabBar.validateNow(),this.tabBar.getChildAt(t).showRedDot=!1)},n.openView=function(e,t){if(t)this.isPop=!0;else{var i=!this.isPop;this.isPop=i}1==this.isPop&&(this.setTabIndex(0),this.onBarItemTap(null))},n.onBoxTap=function(e){e.data&&(FigureModel.getInstance().selectedPartnerVO=e.data)},n.onBarItemTap=function(e){var t=this;switch(t.clearContent(),t.tabBar.selectedIndex){case 0:t._pkskill||(t._pkskill=new PKSkillProjectView,t.container.addChild(t._pkskill)),t._pkskill.onOpenHandler(),t.dispatchGlobalEvent(new ParamEvent(PKSkillEvtName.CCMD23800));break;case 1:t._shengongView||(t._shengongView=new ShenGongView,t.container.addChild(t._shengongView)),t._shengongView.onOpenHandler();break;case 2:t._exnobilityView||(t._exnobilityView=new ExnobilityView,t.container.addChild(t._exnobilityView)),t._exnobilityView.onOpenHandler();break;case 3:t._achievementView||(t._achievementView=new AchievementWindow,t.container.addChild(t._achievementView)),t._achievementView.onOpenHandler()}},n.setTabIndex=function(e){this._selectedTabIndex=e,this.tabBar.selectedIndex=this._selectedTabIndex},n.clearContent=function(){for(var e,t=this;t.container.numChildren>0;)e=t.container.getChildAt(0),t.container.removeChild(e),e.dispose(),e=null;t._achievementView&&(t._achievementView.parent&&t._achievementView.parent.removeChild(t._achievementView),t._achievementView.onCloseHandler(),t._achievementView=null),t._exnobilityView&&(t._exnobilityView.parent&&t._exnobilityView.parent.removeChild(t._exnobilityView),t._exnobilityView.onCloseHandler(),t._exnobilityView=null),t._shengongView&&(t._shengongView.parent&&t._shengongView.parent.removeChild(t._shengongView),t._shengongView.onCloseHandler(),t._shengongView=null),t._pkskill&&(t._pkskill.parent&&t._pkskill.parent.removeChild(t._pkskill),t._pkskill.dispose(),t._pkskill=null)},t}(LayeroutWindow);egret.registerClass(ArtifactWindow,"ArtifactWindow");var ExnobilityTaskItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/artifact/ExnobilityTaskItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.setData=function(e){var t=ArtifactModel.getInstance().exnobility_lv,i=t+1,n=(ArtifactModel.getInstance().getExnobilityAwardVO(i),ArtifactModel.getInstance().getExnobilityDataVO(e.id)),s=0,a=0;e&&(a=e.value),s=ArtifactModel.getInstance().getExnobilityTargetValue(n);var o="#00D228";a>s?(o="#ff0000",this._imgState.visible=!1,this._txtOp.visible=!0):(this._imgState.visible=!0,this._txtOp.visible=!1),this._txtName.htmlText=n.project_name+"<font color='"+o+"'>（"+s+"/"+a+"）</font>",this._txtOp.htmlText="<u><a href = 'event:"+n.event+"'>点击前往</a></u>",this._txtOp.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this)},n.onTxtLinkHandler=function(e){var t=String(e.text).split(","),i=t[0],n=Number(t[1]);switch(i){case"checkPointBoss":this.dispatchGlobalEvent(new ParamEvent(CheckPointBossEvtName.CHECKPOINTBOSS_OPEN_WINDOW));break;case"build":this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_BUILD,n));break;case"figure":this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_FIGURE,{isOpen:!0,index:n}));break;case"specialEquip":this.dispatchGlobalEvent(new ParamEvent(FigureEvtName.FIGURE_OPEN_SPECIALEQUIPWINDOW,{state:!0,type:n}))}},n.dispose=function(){this._txtOp.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this.parent&&this.parent.removeChild(this)},t}(Csprite);egret.registerClass(ExnobilityTaskItem,"ExnobilityTaskItem");var ExnobilityView=function(e){function t(){e.call(this),this._itemArr=[],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/artifact/ExnobilityViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this.dispatchGlobalEvent(new ParamEvent(ArtifactEvtName.CCMD16000)),GameDispatcher.getInstance().addEventListener(ArtifactEvtName.EXNOBILITY_UPDATE_INFO,this.updateInfoHandler,this),this.addGlobalEventListener(PlayerBaseVO.CHANGE_FIGHTVALUE,this.updateInfoHandler,this),this.addGlobalEventListener(BuildEvtName.BUILD_CCMD11800_UPDATE,this.updateInfoHandler,this),this.addGlobalEventListener(BuildEvtName.BUILD_CCMD11810_UPDATE,this.updateInfoHandler,this),this.addGlobalEventListener(MeridianEvtName.MERIDIAN_UPDATE_INFO,this.updateInfoHandler,this),this.addGlobalEventListener(WingEvtName.WING_UPDATE_INFO,this.updateInfoHandler,this),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_UPDATE_SPECIALEQUIP,this.updateInfoHandler,this)},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().removeEventListener(ArtifactEvtName.EXNOBILITY_UPDATE_INFO,this.updateInfoHandler,this),this.removeGlobalEventListener(PlayerBaseVO.CHANGE_FIGHTVALUE,this.updateInfoHandler,this),this.removeGlobalEventListener(BuildEvtName.BUILD_CCMD11800_UPDATE,this.updateInfoHandler,this),this.removeGlobalEventListener(BuildEvtName.BUILD_CCMD11810_UPDATE,this.updateInfoHandler,this),this.removeGlobalEventListener(MeridianEvtName.MERIDIAN_UPDATE_INFO,this.updateInfoHandler,this),this.removeGlobalEventListener(WingEvtName.WING_UPDATE_INFO,this.updateInfoHandler,this),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_UPDATE_SPECIALEQUIP,this.updateInfoHandler,this),this.clearTaskItems(),this.updateBtnEffect(!1)},n.onOkHandler=function(){this.dispatchGlobalEvent(new ParamEvent(ArtifactEvtName.CCMD16001))},n.clearTaskItems=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e.dispose(),e=null;this._itemArr=[]},n.updateInfoHandler=function(){function e(e,t,i,n,s,a){void 0===i&&(i="#e7d0b7"),void 0===n&&(n=!1),void 0===s&&(s=!1),void 0===a&&(a=1);for(var r=0,h=0,l="",d="",_=0;_<t.length;_++)d=t[_],r=null==e?0:e[d],h=_,!s&&0>=r||(n&&o.push(d),l+=1==a?h>=5?"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[d]+" ：</font><font color='"+i+"'>+"+r/100+"%</font>":"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[d]+" ：</font><font color='"+i+"'>+"+r+"</font>":h>=5?"\n<font color='"+i+"'>+"+r/100+"%</font>":"\n<font color='"+i+"'>+"+r+"</font>");return l}this.nullProVO||(this.nullProVO=new ExnobilityAwardVO);var t=ArtifactModel.getInstance().exnobility_lv,i=ArtifactModel.getInstance().getExnobilityAwardVO(t),n=ArtifactModel.getInstance().getExnobilityAwardVO(t+1),s="",a="",o=[];if(this._txtName.text="爵位:LV"+t,this._txtFPower.text="0",i&&(this._txtFPower.text=PropertyUtil.calculateProFight(i)+""),n){var r=ArtifactModel.getInstance().getExnobilityCanLevelup();this._btnOK.enabled=r,r?this.updateBtnEffect(!0):this.updateBtnEffect(!1),this._txtProNext.y=172}else this._btnOK.enabled=!1,this.updateBtnEffect(!1),this.clearTaskItems(),this._txtProNext.y=220;if(0>=t?(s=e(n,EquipBasic.PROPERTY_INDEX,"#00D228",!0,!1,1),a=e(this.nullProVO,o,"#e7d0b7",!1,!0)):(a=e(i,EquipBasic.PROPERTY_INDEX),s=n?e(n,EquipBasic.PROPERTY_INDEX,"#00D228",!1,!1,1):"已满级"),this.clearTaskItems(),n)for(var h,l=n.addItemArr,d=0;d<l.length;d++)h=new ExnobilityTaskItem,h.setData(l[d]),h.y=65*d,this._itemContainer.addChild(h),this._itemArr.push(h);this._txtPro.htmlText=a,this._txtProNext.htmlText=s},n.updateBtnEffect=function(e){e?null==this.btnEffect&&(this.btnEffect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("anniu"),58,28,this._btnOK,80,!0)):this.btnEffect&&(this.btnEffect.dispose(),this.btnEffect=null)},t}(BaseView);egret.registerClass(ExnobilityView,"ExnobilityView");var ShenGongView=function(e){function t(){e.call(this),this._itemArr=[],this._awardItemArr=[],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/artifact/ShenGongViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this._item.showLv(!1)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this.dispatchGlobalEvent(new ParamEvent(ArtifactEvtName.CCMD15900)),GameDispatcher.getInstance().addEventListener(ArtifactEvtName.SHENGONG_UPDATE_INFO,this.updateInfoHandler,this)},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().removeEventListener(ArtifactEvtName.SHENGONG_UPDATE_INFO,this.updateInfoHandler,this),this.clearTaskItems(),this.clearAwardItems(),this.updateBtnEffect(!1)},n.onOkHandler=function(){this.dispatchGlobalEvent(new ParamEvent(ArtifactEvtName.CCMD15901));for(var e,t=this._txtAwardContainer.localToGlobal(96,37),i=[],n=0;n<this._awardItemArr.length;n++)e=this._awardItemArr[n],i.push(e.data.pic);AccessGoodFlyEffectManager.getInstance().flyArray(i,t)},n.clearAwardItems=function(){for(var e,t=0;t<this._awardItemArr.length;t++)e=this._awardItemArr[t],e.parent&&e.parent.removeChild(e),e.data=null,e.dispose(),e=null;this._awardItemArr=[]},n.clearTaskItems=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e.dispose(),e=null;this._itemArr=[]},n.updateInfoHandler=function(){function e(e,t,i,n,s,a){void 0===i&&(i="#e7d0b7"),void 0===n&&(n=!1),void 0===s&&(s=!1),void 0===a&&(a=1);for(var o=0,h=0,l="",d="",_=0;_<t.length;_++)d=t[_],o=null==e?0:e[d],h=_,!s&&0>=o||(n&&r.push(d),l+=1==a?h>=5?"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[d]+" ：</font><font color='"+i+"'>+"+o/100+"%</font>":"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[d]+" ：</font><font color='"+i+"'>+"+o+"</font>":h>=5?"\n<font color='"+i+"'>+"+o/100+"%</font>":"\n<font color='"+i+"'>+"+o+"</font>");return l}this.nullProVO||(this.nullProVO=new ArtifactDataVO);var t=ArtifactModel.getInstance().sgLv,i=ArtifactModel.getInstance().sgExp,n=ArtifactModel.getInstance().getShengongAwardVO(t),s=ArtifactModel.getInstance().getShengongAwardVO(t+1),a="",o="",r=[];this._txtName.text="神功:LV"+t,this._txtProgress.text=i+"/"+s.lose_ex;var h=i/s.lose_ex;h>1&&(h=1),this._imgBar.scaleX=h;var l=GoodsListProxy.getInstance().getGoodsInfoByType(s.show_id);this._item.data=l,this._txtGoodsName.text=l.name,this._txtNeedLvl.text=s.show;var d=16777215;s?(this._btnOK.enabled=i>=s.lose_ex,i<s.lose_ex&&(d=16711680),i>=s.lose_ex?this.updateBtnEffect(!0):this.updateBtnEffect(!1)):(this._btnOK.enabled=!1,this.updateBtnEffect(!1)),this.clearAwardItems();for(var _,c,u=0;u<s.addItemArr.length;u++)c=s.addItemArr[u],_=new GoodsItem,_.x=u*(_.width+4),_.data=GoodsListProxy.getInstance().getGoodsInfoByType(c.id),_.num=c.count,this._txtAwardContainer.addChild(_),this._awardItemArr.push(_);
0>=t?(a=e(s,EquipBasic.PROPERTY_INDEX,"#00D228",!0,!1,2),o=e(this.nullProVO,r,"#e7d0b7",!1,!0)):(o=e(n,EquipBasic.PROPERTY_INDEX),s&&(a=e(s,EquipBasic.PROPERTY_INDEX,"#00D228",!1,!1,2))),this.clearTaskItems();for(var p,g=ArtifactModel.getInstance().getShengongDataList(),u=0;u<g.length;u++)p=new ShengongTaskItem,p.setData(g[u]),p.y=65*u,this._itemContainer.addChild(p),this._itemArr.push(p);this._txtPro.htmlText=o,this._txtProNext.htmlText=a},n.updateBtnEffect=function(e){e?null==this.btnEffect&&(this.btnEffect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("anniu"),58,28,this._btnOK,80,!0)):this.btnEffect&&(this.btnEffect.dispose(),this.btnEffect=null)},t}(BaseView);egret.registerClass(ShenGongView,"ShenGongView");var ShengongTaskItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/artifact/ShengongTaskItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.setData=function(e){this._txtName.text=e.project_name,this._txtAwardName.text=e.gain_ex+"历练";var t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_24,e.template_id);this._txtTimes.text=t+"/"+e.day_limit+"次";var i=9671571;t<e.day_limit&&(i=53800),t>=e.day_limit?(this._imgState.visible=!0,this._txtOp.visible=!1):(this._imgState.visible=!1,this._txtOp.visible=!0),this._txtTimes.textColor=i,this._txtOp.htmlText="<u><a href = 'event:"+e.event+"'>点击前往</a></u>",this._txtOp.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this)},n.onTxtLinkHandler=function(e){var t=String(e.text).split(","),i=t[0],n=Number(t[1]);switch(i){case"guild":RoleModel.getInstance().getRoleCommon().guild_id<=0?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_GUILD)):GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_VIEW,7));break;case"checkPointBoss":this.dispatchGlobalEvent(new ParamEvent(CheckPointBossEvtName.CHECKPOINTBOSS_OPEN_WINDOW));break;case"fuben":this.dispatchGlobalEvent(new ParamEvent(FubenEvtName.OPEN_FUBEN_VIEW,n));break;case"mall":this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_MALL,n));break;case"ronglian":this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_PACK));break;case"pk":this.dispatchGlobalEvent(new ParamEvent(MeetPlayerEvtName.SHOW_MEETPLAYER_VIEW));break;case"boss":this.dispatchGlobalEvent(new ParamEvent(BossEvtName.OPEN_BOSS_WINDOW,n));break;case"FULI_OPEN":this.dispatchGlobalEvent(new ParamEvent(ShareEvtName.SHARE_WINDOW_OPEN))}},n.dispose=function(){this._txtOp.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this.parent&&this.parent.removeChild(this)},t}(Csprite);egret.registerClass(ShengongTaskItem,"ShengongTaskItem");var AwakeBuyItem=function(e){function t(t){void 0===t&&(t=0),e.call(this),this._type=1,this._type=t,this.skinName="resource/game_skins/awake/AwakeBuyItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dataChanged=function(){this.updateInfo()},n.updateInfo=function(){if(null!=this.data)if(this._info=GoodsListProxy.getInstance().getGoodsInfoByType(this.data.id),this._item.data=this._info,this._txtSoul.text="增加"+this.data.num+"真气",2==this._type){var e=this.data.count,t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_40,MallModel.MALL_RMB_3);this._btnOK.enabled=e>t,this._txtTimes.text="今天还可以购买"+(e-t)+"次",this._txtReqGold.visible=!0,this._imageGold.visible=!0;var i=MallModel.getInstance().getRmbShopVo(MallModel.MALL_RMB_3);this._txtReq.htmlText="仅售人民币"+ColorUtil.getColorHtmlStr(i.rmb,ColorUtil.COLOR_GOLD),this._txtReqGold.text="赠送1000"}else this.updateResTimes(),this.updateNum()},n.updateResTimes=function(){var e=this.data.count,t=e-DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_47,this.data.id);this._txtTimes.text="今天还可兑换"+t+"/"+e+"次"},n.updateNum=function(){this.mallVO=MallModel.getInstance().getShopBasicVO(MallModel.MALL_TYPE_1,this._info.template_id);var e=GoodsListProxy.getInstance().findGoodNumber(this.mallVO.id);e>0?(this._btnOK.label="兑换",this._txtReq.text="剩余数量："+e+"个",this._txtReqGold.visible=!1,this._imageGold.visible=!1):(this._btnOK.label="购买",this._txtReq.text=this._info.name,this._txtReqGold.text=this.mallVO.con_gold.toString(),this._txtReqGold.visible=!0,this._imageGold.visible=!0,this._imageGold.x=this._txtReq.x+this._txtReq.textWidth,this._txtReqGold.x=this._imageGold.x+42)},n.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._item.showLv(!1),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateInfo,this),GameDispatcher.getInstance().addEventListener(DailyEvtName.DAILY_UPDATE,this.updateInfo,this)},n.onOkHandler=function(){if(2==this._type){var e=MallModel.getInstance().getRmbShopVo(MallModel.MALL_RMB_3);e&&(ConfigManager.isTencent()?ConfigManager.isIOS()?QQManager.getInstance().QQBuyGoods(QQManager.AWAKEBUY_IOS,e.template_id):QQManager.getInstance().QQBuyGoods(QQManager.AWAKEBUY_ANDROID,e.template_id):PhpHttpStatisticsManager.requestChargeOrder(1,e.rmb,7,"RMB商城",1,e.template_id))}else if(GoodsListProxy.getInstance().findGoodNumber(this.mallVO.id)>0)GameDispatcher.getInstance().dispatchEvent(new ParamEvent(AwakeEvtName.CCMD_19802,{id:this._info.template_id}));else{if(!RoleModel.getInstance().CheckGold(this.mallVO.con_gold))return;GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MallEvtName.MALL_CCMD11004,{id:this.mallVO.template_id,num:1}))}},n.dispose=function(){this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateInfo,this),GameDispatcher.getInstance().removeEventListener(DailyEvtName.DAILY_UPDATE,this.updateInfo,this),this._item&&(this._item.data&&(this._item.data=null),this._item.dispose())},t}(eui.ItemRenderer);egret.registerClass(AwakeBuyItem,"AwakeBuyItem",["eui.UIComponent"]);var AwakeBuyWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/awake/AwakeBuyWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_awake_buy"),this.txtLine.text="敬请期待"},n.onGet=function(){KuaFuModel.getInstance().isKuaFu&&this.dispatchGlobalEvent(new ParamEvent(BossEvtName.OPEN_KUAFU_BOSS_VIEW,4))},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this);var t=SingleModel.getInstance().getSingVO(SingleModel.KEY_19801).itemArr,i=SingleModel.getInstance().getSingVO(SingleModel.KEY_19802).itemArr,n=[{id:Number(t[0]),num:Number(t[1]),count:Number(t[2])},{id:Number(t[3]),num:Number(t[4]),count:Number(t[5])},{id:Number(i[0]),num:Number(i[1]),count:Number(i[2])}];this.itemArr=new Array;for(var s,a=0;3>a;a++)s=new AwakeBuyItem(a),s.y=140*a,s.data=n[a],this.itemContainer.addChild(s),this.itemArr.push(s)},n.onCloseHandler=function(){this.txtLine.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this);for(var t,i=this.itemArr.length,n=0;i>n;n++)t=this.itemArr[n],t&&(t.parent&&t.parent.removeChild(t),t.dispose(),t=null);this.itemArr=[],e.prototype.onCloseHandler.call(this)},t}(LayeroutWindow);egret.registerClass(AwakeBuyWindow,"AwakeBuyWindow");var AwakeScoreAddItem=function(e){function t(){e.call(this),this.skinName="resource/game_skins/awake/AwakeScoreAddItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.setNum=function(e,t){1==t?(this.num0.visible=this.per0.visible=!0,this.num1.visible=this.per1.visible=!1,this.num0.text=e,this.num0.x=20*(3-String(e).length)):(this.num0.visible=this.per0.visible=!1,this.num1.visible=this.per1.visible=!0,this.num1.text=e,this.num1.x=20*(3-String(e).length))},t}(BaseView);egret.registerClass(AwakeScoreAddItem,"AwakeScoreAddItem");var AwakeScoreWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/awake/AwakeScoreWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_awakeScore"),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeft,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRight,this),this.update()},n.update=function(){this.txtTotal.text="三角色总评级："+AwakeModel.getInstance().getLevelByScore();var e=AwakeModel.getInstance().getUpByScore(AwakeModel.getInstance().getAwakeTotalScore());this.numCur.setNum(e+"",1);var t=AwakeModel.getInstance().getNextByScore(AwakeModel.getInstance().getAwakeTotalScore());t?(this.numNext.visible=!0,this.numNext.setNum((t.up/100).toFixed(1),2),this.txtNext.text="下次提升需要评分："+AwakeModel.getInstance().getAwakeTotalScore()+"/"+t.min):(this.numNext.visible=!1,this.txtNext.text="已达最高级"),this.roleListData=RoleModel.getInstance().getPartnerList(),this.curIndex=0,this.setRole()},n.onLeft=function(){this.curIndex=this.curIndex-1<0?this.roleListData.length-1:this.curIndex-1,this.setRole()},n.onRight=function(){this.curIndex=this.curIndex+1>=this.roleListData.length?0:this.curIndex+1,this.setRole()},n.setRole=function(){var e=this.roleListData[this.curIndex];this.txtCareer.text=(1==e.getCareer()?"战士":2==e.getCareer()?"法师":"道士")+"觉醒装备";var t=0;this.equipCon.removeChildren();for(var i,n=GoodsListProxy.getInstance().getEquipPartnerByPartnerId(e.parnerID),s=0;8>s;s++)if(i=n["the_"+(40+s)+"_Grid"]){var a=new GoodsItem;a.data=i,a.x=110*(t%4),a.y=125*Math.floor(t/4),this.equipCon.addChild(a),t++}},n.dispose=function(){e.prototype.dispose.call(this),AwakeModel.getInstance().removeEventListener(AwakeModel.UPDATE_AWAKE_SCORE,this.update,this)},t}(LayeroutWindow);egret.registerClass(AwakeScoreWindow,"AwakeScoreWindow");var AwakeSkillWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/awake/AwakeSkillWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_awakeSkill"),this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/awake/awakeBg_skill.png"),this.contentGroup.addChildAt(this.imageBg,0),this.icon=new PicLoader,this.icon.x=263,this.icon.y=152,this.contentGroup.addChild(this.icon),this.txtName=new PicLoader,this.txtName.x=160,this.txtName.y=330,this.contentGroup.addChild(this.txtName),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeft,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRight,this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.onLeft=function(){this._pageIndex--,this.updateContent()},n.onRight=function(){this._pageIndex++,this.updateContent()},n.setData=function(e){this._dataArr=AwakeModel.getInstance().getSkillArr();for(var t=0;t<this._dataArr.length;t++)if(this._dataArr[t].template_id==e.template_id){this._pageIndex=t;break}this.updateContent()},n.updateContent=function(){this._pageIndex<0&&(this._pageIndex=0),this.btnLeft.visible=this._pageIndex>0,this.btnRight.visible=this._pageIndex<this._dataArr.length-1;var e=this._dataArr[this._pageIndex],t=SkillModel.getInstance().getSkill(e.skill);t.lev=1,this.icon.load(UrlUtil.getSkillURL(t.icon)),this.txtName.load("resource/assets/icon/awake/awakeName_"+e.skill+".png"),this.txtTitle.text=e.show_word,this.img_career.source="awakeIcon_"+e.career,this.txtDes.text=SkillModel.getInstance().getSkillDes(t),this.img_jh.visible=AwakeModel.getInstance().getCurId()>=e.template_id},n.dispose=function(){e.prototype.dispose.call(this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeft,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRight,this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null),this.icon&&(this.icon.dispose(),this.icon=null),this.txtName&&(this.txtName.dispose(),this.txtName=null)},t}(LayeroutWindow);egret.registerClass(AwakeSkillWindow,"AwakeSkillWindow");var AwakeUpView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/awake/AwakeUpViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.addGlobalEventListener(AwakeEvtName.CCMD_19800_UPDATE,this.updateData,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGAWAKE,this.updateAwakeHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.skillItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItem,this),this.txtLine.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLine,this),this.txtLine.htmlText="<u>查看总属性</>",this.txtBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.txtBuy.htmlText="<u>获取真气</>",this.imageBg=new PicLoader,this.addChildAt(this.imageBg,0),this.skillItem.isAwake=!0},n.updateData=function(e){var t=AwakeModel.getInstance().getCurId();!this.btnGet.enabled&&t%21==0&&this.skillItem.data&&this.dispatchGlobalEvent(new ParamEvent(EventName.SHOW_ITEM_TIPS,{url:UrlUtil.getSkillURL(this.skillItem.data.icon),str:"恭喜获得觉醒技能——"+this.skillItem.data.name}));var i=t+1,n=AwakeModel.getInstance().getVo(i);n||(i=t,n=AwakeModel.getInstance().getVo(i)),this.txtName.text=n.name,this.bar.maximum=n.con_air,this.bar.visible=n.con_air>0,this.txtPro.text=n.show_word,t>0&&(this.numFight.text=AwakeModel.getInstance().getFight().toString()),this.imageBg.load("resource/assets/icon/awake/awakeBg"+n.show+".png"),this.pointGroup.visible=!1,this.pointGroup2.visible=!1,1==n.show?(this.pointGroup.visible=!0,this.skillItem.x=43,this.skillItem.y=294):(this.pointGroup2.visible=!0,this.skillItem.x=113,this.skillItem.y=312);for(var s,a=t%21,o=1;21>o;o++)s=this["point"+n.show+"_"+o],s.visible=a>=o;this._itemVo=AwakeModel.getInstance().getSkill(i),this.skillItem.data=SkillModel.getInstance().getSkill(this._itemVo.skill),this.updateAwakeHandler()},n.onGet=function(){var e=this;this.btnGet.enabled=!1,this._timeId>0&&clearTimeout(this._timeId),this._timeId=setTimeout2(function(){e.dispatchGlobalEvent(new ParamEvent(AwakeEvtName.CCMD_19801))},200)},n.onItem=function(){this.dispatchGlobalEvent(new ParamEvent(AwakeEvtName.OPEN_AWAKE_SKILL,this._itemVo))},n.updateAwakeHandler=function(){this.bar.value=RoleModel.getInstance().getRoleInfo().getAwake(),this.btnGet.enabled=this.bar.value>=this.bar.maximum},n.onLine=function(){var e=new ParamEvent(FigureEvtName.FIGURE_OPEN_PARTNERPROPERTYVIEW);e.data={index:0,dataList:AwakeModel.getInstance().getPlist()},this.dispatchGlobalEvent(e)},n.onBuy=function(){this.dispatchGlobalEvent(new ParamEvent(AwakeEvtName.OPEN_AWAKE_BUY))},n.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this.removeGlobalEventListener(AwakeEvtName.CCMD_19800_UPDATE,this.updateData,this),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGAWAKE,this.updateAwakeHandler,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.skillItem.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItem,this),this.txtLine.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLine,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null)},t}(BaseView);egret.registerClass(AwakeUpView,"AwakeUpView");var AwakeWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/awake/AwakeWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_awake"),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this.tabBar.dataProvider=new eui.ArrayCollection(["等级"]),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.setSelectIndex()},n.onBarItemTap=function(e){this.setSelectIndex(this.tabBar.selectedIndex)},n.setSelectIndex=function(e){switch(void 0===e&&(e=0),this.tabBar.selectedIndex=e,e){case 0:this._up||(this._up=new AwakeUpView),this._view=this._up,this.dispatchGlobalEvent(new ParamEvent(AwakeEvtName.CCMD_19800))}this.viewContainer.addChild(this._view)},n.onHelp=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.AWAKE))},n.dispose=function(){e.prototype.dispose.call(this),this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this._up&&(this._up.dispose(),this._up=null)},t}(LayeroutWindow);egret.registerClass(AwakeWindow,"AwakeWindow");var AwakeEquipComposeLinkItem=function(e){function t(t){e.call(this),this._selected=!1,this._ind=0,this._level=0,this._round=0,this._ind=t,this._txtName=new CustomLabel,this._txtName.textAlign="center",this.addChild(this._txtName),this._txtName.addEventListener(egret.TextEvent.LINK,this.onLink,this)}__extends(t,e);var i=__define,n=t,s=n.prototype;return i(s,"level",function(){return this._level}),i(s,"round",function(){return this._round}),s.setData=function(e,t){this._level=e,this._round=t;var i="";this._level>0?i=this._level+"级":this._round>0&&(i=this._round+"转"),this._txtName.htmlText="<u><a href = 'event:2'>"+i+"</a></u>",this._level<=60&&this._round<=0?(this._txtName.touchEnabled=!1,this._txtName.textColor=10066585):(this._txtName.touchEnabled=!0,this._txtName.textColor=53800)},i(s,"showRedDot",void 0,function(e){return this._showRedDot!=e?(this._showRedDot=e,1==this._showRedDot?void(null==this._imageRed&&(this._imageRed=new CustomImage,this._imageRed.source=RES.getRes("share_json.share_alert"),this.addChild(this._imageRed),this._imageRed.x=-16,this._imageRed.y=-16)):void(this._imageRed&&(this._imageRed.parent&&this._imageRed.parent.removeChild(this._imageRed),this._imageRed.dispose(),this._imageRed=null))):void 0}),s.setSelected=function(e){this._selected=e,1==e?this._txtName.textColor=16765440:this._level<=60&&this._round<=0?this._txtName.textColor=10066585:this._txtName.textColor=53800},s.onLink=function(){this.dispatchEvent(new ParamEvent(t.ONLINK,{level:this._level,round:this._round}))},s.dispose=function(){e.prototype.dispose.call(this),this._txtName.removeEventListener(egret.TextEvent.LINK,this.onLink,this),this.parent&&this.parent.removeChild(this)},t.ONLINK="ONLINK",t}(Csprite);egret.registerClass(AwakeEquipComposeLinkItem,"AwakeEquipComposeLinkItem");var AwakeEquipComposeMateiralItem=function(e){function t(t){e.call(this),this._ind=0,this._ind=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/awakeEquip/AwakeEquipComposeMaterialItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this._btnWear.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnWearHandler,this)},s.onBtnWearHandler=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(t.SELECTED_MATEIRAL,{vo:this._vo}))},s.setData=function(e){var t=AwakeModel.getInstance().getAwakeSkillVO(e.rand_awake);if(this._vo=e,this._item.data=e,this._txtName.text=e.name,t){var i=t.proList[0],n=EquipBasic.getProStr(i.key)+"+"+i.value;this._txtSkill.htmlText="技能：<font color='#ffd200'>"+t.name+"</font>",this._txtSkillEff.htmlText="技能效果：<font color='#00d228'>"+n+"</font>"}},i(s,"vo",function(){return this._vo}),s.setSelected=function(e){},s.dispose=function(){e.prototype.dispose.call(this),this._btnWear.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnWearHandler,this),this.parent&&this.parent.removeChild(this),this._item&&(this._item.parent&&this._item.parent.removeChild(this._item),this._item.dispose(),this._item=null)},t.SELECTED_MATEIRAL="SELECTED_MATEIRAL",t}(Csprite);egret.registerClass(AwakeEquipComposeMateiralItem,"AwakeEquipComposeMateiralItem");var AwakeEquipComposeMaterialView=function(e){function t(t,i,n){e.call(this),this._itemArr=[],this._curLevel=0,this._curRound=0,this._curLevel=t,this._curRound=i,this._ids=n,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/awakeEquip/AwakeEquipComposeMaterialViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateItemList,this),this._btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnReturn2Handler,this),GameDispatcher.getInstance().addEventListener(AwakeEquipComposeMateiralItem.SELECTED_MATEIRAL,this.onSelect,this),this.updateItemList()},n.onSelect=function(){this.isPop=!1},n.updateItemList=function(){this.clearItems();for(var e,t,i=0,n=GoodsListProxy.getInstance().getAwakeEquipByLevelAndRound(this._curLevel,this._curRound),s=0;s<n.length;s++)t=n[s],-1==this._ids.indexOf(t.item_id)&&(e=new AwakeEquipComposeMateiralItem(i+1),e.y=147*i,this._itemContainer.addChild(e),this._itemArr.push(e),e.setData(t),i++)},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e&&(e.dispose(),e=null);this._itemArr=[]},n.onBtnReturn2Handler=function(){this.isPop=!1},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onCloseHandler=function(){GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateItemList,this),this._btnReturn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnReturn2Handler,this),GameDispatcher.getInstance().removeEventListener(AwakeEquipComposeMateiralItem.SELECTED_MATEIRAL,this.onSelect,this),this.clearItems(),e.prototype.onCloseHandler.call(this)},t}(LayeroutWindow);egret.registerClass(AwakeEquipComposeMaterialView,"AwakeEquipComposeMaterialView");var AwakeEquipComposeWindow=function(e){function t(){e.call(this),this._itemLinkArr=[],this._itemEquipArr=[],this._itemArr=[],this._curLevel=0,this._curRound=0,this._model=AwakeModel.getInstance(),this.skinName="resource/game_skins/awakeEquip/AwakeEquipComposeWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){function t(e,t){return Number(e.name)-Number(t.name)}e.prototype.uiCompHandler.call(this);var i=new eui.TileLayout;i.paddingTop=3,i.paddingLeft=3,i.paddingRight=3,i.paddingBottom=3,this._itemLinksContainer.layout=i,i.horizontalGap=40,i.verticalGap=40,this.setImageWindowTitle("title_compose");for(var n,s=0;s<this._itemContainer.numChildren;s++)n=this._itemContainer.getChildAt(s),n.showLv(!1),n.showAdd(!0),n.addCallBack(this.callBackF,n,this),this._itemArr.push(n);this._itemArr.sort(t)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().addEventListener(AwakeEquipComposeMateiralItem.SELECTED_MATEIRAL,this.onSelectedMateiral,this),GameDispatcher.getInstance().addEventListener(AwakeEquipEvtName.AWAKEEQUIPCOMPOSE_SUCCESS,this.onSucessHandler,this);for(var t,i=0;i<this._model.linkArr.length;i++)t=new AwakeEquipComposeLinkItem(i+1),t.addEventListener(AwakeEquipComposeLinkItem.ONLINK,this.itemLinkClick,this),t.setData(this._model.linkArr[i].level,this._model.linkArr[i].round),this._itemLinksContainer.addChild(t),this._itemLinkArr.push(t);this.updateTxtLinkRedDot(),this.setSelectedLinkItem(this._itemLinkArr[1]),this._lrContainer=new CustomRLContainer(0,503,-60),this._lrContainer.x=18,this._lrContainer.y=2,this._lrContainer.setBtnY(15),this._equipContainer.addChild(this._lrContainer);for(var n,s=EquipmentVO.AWAKELEQUIP_GRID.length,i=0;s>i;i++)n=new AwakeEquipItem,n.addCallBack(this.itemEquipClick,n,this),n.setImageBottomType(EquipmentVO.AWAKELEQUIP_GRID[i]),this._itemEquipArr.push(n);this._lrContainer.setItemList(this._itemEquipArr,4),this.setSelectedEquipItem(this._itemEquipArr[0])},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().removeEventListener(AwakeEquipComposeMateiralItem.SELECTED_MATEIRAL,this.onSelectedMateiral,this),GameDispatcher.getInstance().removeEventListener(AwakeEquipEvtName.AWAKEEQUIPCOMPOSE_SUCCESS,this.onSucessHandler,this),this._imgSelected&&(this._imgSelected.parent&&this._imgSelected.parent.removeChild(this._imgSelected),this._imgSelected.dispose(),this._imgSelected=null),this.clearEquipMaterials(),this.clearEquipParts(),this.clearLinks()},n.onSucessHandler=function(){this.flySucessHandler(),this.updateInfo(),this.updateTxtLinkRedDot()},n.flySucessHandler=function(){var e=this.localToGlobal(this._item.x,this._item.y),t=this._item.data;AccessGoodFlyEffectManager.getInstance().getGood(t.pic,AccessGoodFlyEffectManager.BAGTYPE,e)},n.updateTxtLinkRedDot=function(){for(var e,t=this._itemLinkArr.length,i=0;t>i;i++)e=this._itemLinkArr[i],e.showRedDot=this._model.checkCanComposeAwakeEquipByLvlOrRound(e.level,e.round),1==e.showRedDot},n.onOkHandler=function(){for(var e,t,i=[],n=0;n<this._itemArr.length;n++)t=this._itemArr[n],t.data&&(e=new NodeItem_ids,e.item_id=t.data.item_id,i.push(e));i.length>0&&i.length>=this._curComposevo.count?this.dispatchGlobalEvent(new ParamEvent(AwakeEquipEvtName.CCMD20310,{cfg_id:this._curGvo.template_id,item_ids:i})):Message.show("材料不足")},n.onSelectedMateiral=function(e){for(var t,i=e.data.vo,n=0;n<this._itemArr.length;n++)if(t=this._itemArr[n],null==t.data){t.data=i;break}},n.clearLinks=function(){for(var e,t=this._itemLinkArr.length,i=0;t>i;i++)e=this._itemLinkArr[i],e.dispose(),e=null;this._itemLinkArr=[]},n.clearEquipParts=function(){for(var e,t=this._itemEquipArr.length,i=0;t>i;i++)e=this._itemEquipArr[i],e.dispose(),e=null;this._itemEquipArr=[]},n.clearEquipMaterials=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.dispose(),e=null;this._itemArr=[]},n.callBackF=function(e,t){null==e.data?this.dispatchGlobalEvent(new ParamEvent(AwakeEquipEvtName.AWAKEEQUIPCOMPOSE_MATERIAL_OPEN,{level:t._curComposevo.level,round:t._curComposevo.round,ids:t.getMaterialIds()})):(e.data=null,e.showAdd(!0))},n.itemEquipClick=function(e,t){t.setSelectedEquipItem(e)},n.itemLinkClick=function(e){this.setSelectedLinkItem(e.currentTarget)},n.setSelectedEquipItem=function(e){this._selectedEquipItem=e,null==this._imgSelected&&(this._imgSelected=new CustomImage,this._imgSelected.source=RES.getRes("share_json.share_itemSelected")),this._imgSelected.parent&&this._imgSelected.parent.removeChild(this._imgSelected),this._selectedEquipItem.addChild(this._imgSelected),this._imgSelected.x=-8,this._imgSelected.y=-8,this.updateInfo()},n.getMaterialIds=function(){for(var e,t=[],i=this._itemArr.length,n=0;i>n;n++)e=this._itemArr[n],e.data&&t.push(e.data.item_id);return t},n.setSelectedLinkItem=function(e){this._selectedLinkItem=e;for(var t,i=0;i<this._itemLinkArr.length;i++)t=this._itemLinkArr[i],t.setSelected(!1);this._selectedLinkItem.setSelected(!0),this._curLevel=this._selectedLinkItem.level,this._curRound=this._selectedLinkItem.round,this._selectedEquipItem&&this.updateInfo()},n.updateInfo=function(){var e=GoodsListProxy.getInstance().getAwakeEquipVOByLevelAndRoundAndSubtype(this._curLevel,this._curRound,this._selectedEquipItem.subtype);if(this._curGvo=e,null!=e){var t=GoodsListProxy.getInstance().getEquipBasicGood(e.template_id),i=this.addProperty(t,EquipBasic.PROPERTY_INDEX,"#e7d0b7"),n=AwakeModel.getInstance().getAwakeEquipComposeVO(e.template_id);this._curComposevo=n,this._item.data=e,this._txtName.text=e.name,this._txtPro.htmlText=i,this._txtCoin.text=n.con_coin+"",this._imgCoin.x=this._txtCoin.x+this._txtCoin.textWidth+2;for(var s,a,o=GoodsListProxy.getInstance().getAwakeEquipByLevelAndRound(n.level,n.round),r=(o.length,0);r<this._itemArr.length;r++)a=this._itemArr[r],s=o[r],s?a.data=s:(a.data=null,a.showAdd(!0))}},n.addProperty=function(e,t,i,n,s){void 0===i&&(i="#e7d0b7"),void 0===n&&(n=!1),void 0===s&&(s=!1);for(var a=0,o=0,r="",h="",l=0;l<t.length;l++)h=t[l],a=null==e?0:e[h],o=l,!s&&0>=a||(r+=o>=5?"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+a/100+"%</font>":"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+a+"</font>");return r},t}(LayeroutWindow);egret.registerClass(AwakeEquipComposeWindow,"AwakeEquipComposeWindow");var CustomItemRenderer=function(e){function t(i){void 0===i&&(i="CustomItemRenderer"),e.call(this),this._showRedDot=!1,this.dispatcher=GameDispatcher.getInstance(),this._type=i,void 0==t._classDic[i]||null==t._classDic[i]?t._classDic[i]=1:t._classDic[i]=t._classDic[i]+1}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.addGlobalEventListener=function(e,t,i,n,s,a){void 0===n&&(n=!1),void 0===s&&(s=0),void 0===a&&(a=!1),this.dispatcher.addEventListener(e,t,i,n,s)},s.removeGlobalEventListener=function(e,t,i){void 0===i&&(i=!1),this.dispatcher.removeEventListener(e,t,i)},s.dispatchGlobalEvent=function(e){return this.dispatcher.dispatchEvent(e)},s.hasGlobalEventListener=function(e){return this.dispatcher.hasEventListener(e)},i(s,"showRedDot",function(){return this._showRedDot},function(e){return this._showRedDot!=e?(this._showRedDot=e,1==this._showRedDot?void(null==this._imageRed&&(this._imageRed=new CustomImage,this._imageRed.source=RES.getRes("share_json.share_alert"),this.addChild(this._imageRed),this._imageRed.top=1,this._imageRed.left=1)):void(this._imageRed&&(this._imageRed.parent&&this._imageRed.parent.removeChild(this._imageRed),this._imageRed.dispose(),this._imageRed=null))):void 0}),s.dispose=function(){t._classDic[this._type]=t._classDic[this._type]--},t._classDic=new Object,t}(eui.ItemRenderer);egret.registerClass(CustomItemRenderer,"CustomItemRenderer");var GoodsItem=function(e){function t(t,i,n,s){void 0===t&&(t=!1),void 0===i&&(i=!0),void 0===n&&(n=null),void 0===s&&(s=!0),e.call(this),this._showAdd=t,this._showLv=i,this._callBack=n,this._showTips=s,this.skinName="resource/game_skins/common/GoodsItemSkin.exml",this._iconUrl="itemBg_"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.addExtralElment=function(){this.imageAdd=new CustomImage,this.imageAdd.source=RES.getRes("share_json.share_imageAdd"),this.addChild(this.imageAdd),this.imageAdd.horizontalCenter=0,this.imageAdd.top=30,this.imageAdd.visible=this._showAdd},s.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},s.dataChanged=function(){return e.prototype.dataChanged.call(this),this.data?(this.showAdd(!1),this.image.source=UrlUtil.getGoodsImageURL(this.data.pic),this.imageBorder.source=RES.getRes(this._iconUrl+(this.data.quality-1)+""),this.imageCareer.source=RES.getRes("share_career"+this.data.req_career),this.txtLv.text=this.data.name,this.txtLv.textColor=ColorUtil.getGoodColorNumber(this.data.quality-1),void(this.num=this.data.num)):(this.showAdd(!0),void this.clearContent())},s.showLv=function(e){this._showLv=e,this.txtLv&&(this.txtLv.visible=e)},s.showName=function(e){this.txtLv&&(this.txtLv.htmlText=e)},s.showAdd=function(e){this._showAdd=e,this.imageAdd&&(this.imageAdd.visible=e)},s.clearContent=function(){this._callBack&&(this._callBack=null),this._callBackParam&&(this._callBackParam=null),this._thisObj&&(this._thisObj=null),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onThisClick,this),this.image.source=null,this.imageCareer.source=null,this.imageCareer.dispose(),this.imageBorder.source=RES.getRes("itemBg"),this.txtLv.text="",this.num=0},i(s,"num",void 0,function(e){e>1?this.txtNum.text=Tools.convertNumber(e)+"":this.txtNum.text=""}),i(s,"showTips",void 0,function(e){this._showTips=e}),s.addCallBack=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),this._callBack=e,this._callBackParam=t,this._thisObj=i
},s.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addExtralElment(),this.txtLv&&this.txtLv.addMiaoBian(),this.txtLv&&(this.txtLv.visible=this._showLv),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onThisClick,this)},s.onThisClick=function(){return this._callBack?void this._callBack(this._callBackParam,this._thisObj):void(null!=this.data&&this._showTips&&(this.myTips||(this.myTips=new TipsHelps),this.data.type==GoodsType.ITEM_EQUIP?this.myTips.setType(1):this.myTips.setType(0),this.setTip()))},s.setTip=function(){this.myTips.setTips(GoodsListProxy.getInstance().getBasicProp(this.data.template_id,!1,!1,1,this.data.item_id),this.data)},s.dispose=function(){this.clearContent(),this.removeGray(),e.prototype.dispose.call(this)},s.gray=function(){this.filters=[Tools.GrayFilter]},s.removeGray=function(){this.filters=[]},s.setItemBg=function(e){this.imageBorder.source=e},t}(CustomItemRenderer);egret.registerClass(GoodsItem,"GoodsItem",["eui.UIComponent"]);var EquipItem=function(e){function t(t,i,n,s,a,o){void 0===t&&(t=!1),void 0===i&&(i=!0),void 0===n&&(n=null),void 0===s&&(s=!1),void 0===a&&(a=!1),void 0===o&&(o=!0),e.call(this,t,i,n),this._isSpecial=!1,this._isWeared=!1,this._isSelf=!1,this.strenthLvl=0,this.imageBottom=new PicLoader,this.imageBottom.x=12,this.imageBottom.y=15,this.addChild(this.imageBottom),this._isSpecial=s,this._isWeared=a,this._isSelf=o}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},s.setImageBottomType=function(e){e<=GoodsType.EQUIP_NECKLACE&&e>=1?this.imageBottom.load(rURL("resource/assets/icon/equip/share_equipBottom_"+e+".png")):5==e||6==e?this.imageBottom.load(rURL("resource/assets/icon/equip/share_equipBottom_5.png")):7==e||8==e?this.imageBottom.load(rURL("resource/assets/icon/equip/share_equipBottom_6.png")):this.imageBottom.load(rURL("resource/assets/icon/equip/share_equipBottom_"+e+".png"))},s.dataChanged=function(){return this.data?(this.showAdd(!1),this.imageBottom.visible=!1,this.image.source=UrlUtil.getGoodsImageURL(this.data.pic),this.imageBorder.source=RES.getRes("itemBg_"+(this.data.quality-1)),this.imageCareer.source=RES.getRes("share_career"+this.data.req_career),this.data.req_round>0?this.txtLv.text=this.data.req_round+"转":this.txtLv.text="LV."+this.data.req_lv,-1!=EquipmentVO.WINGLEQUIP_GRID.indexOf(Number(this.data.sub_type))&&(this.txtLv.text=this.data.req_lv+"阶"),this.num=this.data.num,this._isSpecial&&this.showName(this.data.name),void(this._isWeared&&this.setStrenthLvl(this.strenthLvl))):(this.showAdd(!1),this.clearContent(),this.imageBottom.visible=!0,void(this._txtStrength.text=""))},s.setStrenthLvl=function(e,t){void 0===t&&(t=!0),null==this.data&&t||(0>=e?this._txtStrength.text="":this._txtStrength.text="+"+e,this.getChildIndex(this._txtStrength)!=this.numChildren-1&&this.setChildIndex(this._txtStrength,this.numChildren-1))},s.setSpecialEquipLvl=function(e){0>=e?this._txtStrength.text="":this._txtStrength.text="+"+e},s.setIsSelf=function(e){this._isSelf=e},s.showForgmineBg=function(e){1==e?null==this.imageForgmineBg&&(this.imageForgmineBg=new CustomImage,this.imageForgmineBg.source=RES.getRes("share_json.share_equipForgmineBg"),this.addChild(this.imageForgmineBg),this.imageForgmineBg.x=-15,this.imageForgmineBg.y=-15,this.setChildIndex(this.imageForgmineBg,this.numChildren-5)):this.imageForgmineBg&&(this.removeChild(this.imageForgmineBg),this.imageForgmineBg.source=null,this.imageForgmineBg=null)},i(s,"isSpecial",void 0,function(e){this._isSpecial=e}),i(s,"isWeared",void 0,function(e){this._isWeared=e}),s.setTip=function(){this.myTips||(this.myTips=new TipsHelps),this.data.type==GoodsType.ITEM_EQUIP?this.myTips.setType(1):this.myTips.setType(0),this.myTips.setTips(GoodsListProxy.getInstance().getBasicProp(this.data.template_id,!1,!1,1,this.data.item_id,0,!1,0,!1,!1,0,this._isWeared,!1,this._isSelf),this.data)},s.setTipsPub=function(){this.setTip()},s.clearContent=function(){this.showForgmineBg(!1),this.image.source=null,this.imageCareer.source=null,this.imageBorder.source=RES.getRes("itemBg"),this.txtLv.text="",this.num=0},s.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(GoodsItem);egret.registerClass(EquipItem,"EquipItem");var AwakeEquipItem=function(e){function t(){e.call(this),this._subtype=0}__extends(t,e);var i=__define,n=t,s=n.prototype;return i(s,"width",function(){return 111}),s.setImageBottomType=function(t){e.prototype.setImageBottomType.call(this,t),this._subtype=t},i(s,"subtype",function(){return this._subtype}),t}(EquipItem);egret.registerClass(AwakeEquipItem,"AwakeEquipItem");var AwakeEquipMenuView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/awakeEquip/AwakeEquipMenuViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new FriendMenuView),this._instance},n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this._btnDetail.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDetail,this),this._btnTakeOff.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTakeOff,this),this.addGlobalEventListener(FriendEvtName.FRIEND_MENU_CLOSE,this.dispose,this),this._btnArr=[],this._btnArr.push(this._btnDetail),this._btnArr.push(this._btnTakeOff)},n.onDetail=function(){this._vo.setTipsPub(),this.dispatchGlobalEvent(new ParamEvent(AwakeEquipEvtName.AWAKEEQUIPMENU_CLOSE))},n.onTakeOff=function(){this.dispatchGlobalEvent(new ParamEvent(AwakeEquipEvtName.AWAKEEQUIPWEAR_OPEN,{type:Number(this._vo.name)})),this.dispatchGlobalEvent(new ParamEvent(AwakeEquipEvtName.AWAKEEQUIPMENU_CLOSE))},n.updateData=function(e){this._vo=e},n.dispose=function(){this.parent&&this.parent.removeChild(this),this._btnDetail.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDetail,this),this._btnTakeOff.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTakeOff,this),this.removeGlobalEventListener(FriendEvtName.FRIEND_MENU_CLOSE,this.dispose,this)},t}(BaseView);egret.registerClass(AwakeEquipMenuView,"AwakeEquipMenuView");var AwakeEquipSoulView=function(e){function t(){e.call(this),this._selectedPartnerID=0,this._delaySI=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/awakeEquip/AwakeEquipSoulViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){function e(e,t){return Number(e.name)-Number(t.name)}this._txtLink.htmlText="<u><a href = 'event:2'>查看属性</a></u>",this._txtRecLink.htmlText="<u><a href = 'event:2'>获取道具</a></u>";var t;this._itemArr=[];for(var i=0;i<this.equipItemContainer.numChildren;i++)t=this.equipItemContainer.getChildAt(i),t.showLv(!0),t.setImageBottomType(Number(t.name)),t.showName(GoodsType.EQUIP_PARTNAME[Number(t.name)]),t.addCallBack(this.callBackF,t,this),this._itemArr.push(t);this._itemArr.sort(e),this._linkRedDot.visible=!1},n.onOpenHandler=function(){this._selectedPartnerID=FigureModel.getInstance().selectedPartnerVO.parnerID,FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateGoods,this),AwakeModel.getInstance().addEventListener(AwakeEquipEvtName.CCMD21600_UPDATE,this.updateServerData,this),this._btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeButtonHandler,this),this._txtLink.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._txtRecLink.addEventListener(egret.TextEvent.LINK,this.onTxtLinkComposeHandler,this),this.onPartnerChangeHandler(),this.setSelected(this._itemArr[0])},n.onCloseHandler=function(){this.dispose(),this.dispatchGlobalEvent(new ParamEvent(AwakeEquipEvtName.AWAKEEQUIPMENU_CLOSE)),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateGoods,this),AwakeModel.getInstance().removeEventListener(AwakeEquipEvtName.CCMD21600_UPDATE,this.updateServerData,this),this._btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeButtonHandler,this),this._txtLink.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._txtRecLink.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkComposeHandler,this);for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e&&(e.parent&&e.parent.removeChild(e),e.data&&(e.data=null),e.dispose(),e=null);this._itemArr=null},n.callBackF=function(e,t){t.setSelected(e)},n.dispose=function(){},n.onTxtLinkComposeHandler=function(e){},n.onTxtLinkHandler=function(e){for(var t,i=0,n=RoleModel.getInstance().getPartnerList(),s=0;s<n.length;s++)if(t=n[s],t.parnerID==FigureModel.getInstance().selectedPartnerVO.parnerID){i=s;break}var a,o=[];for(var r in n)a={},a.career=n[r].getCareer(),a.propertyVO=this.getPartnerEquipPro(n[r]),o.push(a);var h=new ParamEvent(FigureEvtName.FIGURE_OPEN_PARTNERPROPERTYVIEW);h.data={index:i,dataList:o},this.dispatchGlobalEvent(h)},n.getPartnerEquipPro=function(e){var t=new EquipBasic,i=GoodsListProxy.getInstance().getEquipPartnerByPartnerId(this._selectedPartnerID);if(null!=i){for(var n,s,a,o,r,h=0,l=0,d=0;d<EquipmentVO.AWAKELEQUIP_GRID.length;d++)h=EquipmentVO.AWAKELEQUIP_GRID[d],n=i["the_"+h+"_Grid"],null!=n&&(s=GoodsListProxy.getInstance().getEquipBasicGood(n.template_id),o=AwakeModel.getInstance().getAwakeEquipSoulData(this._selectedPartnerID,h),o&&(r=AwakeModel.getInstance().getAwakeEquipSoulVO(h,o.level)),r&&(l=Math.floor(r.grow_up/100)),a=GoodsListProxy.getInstance().getNewEquipPropetyVO(s,n),a.up(l/100),t.add(a));return t}},n.onChangeButtonHandler=function(){var e=this;this.dispatchGlobalEvent(new ParamEvent(AwakeEquipEvtName.CCMD21601,{partner_id:this._selectedPartnerID,type:Number(this._selectedItem.name)})),1==this._btnChange.enabled&&(this._btnChange.enabled=!1),this._delaySI=setTimeout2(function(){e.updateBtnEnable()},500)},n.updateBtnEnable=function(){0==this._btnChange.enabled&&(this._btnChange.enabled=!0)},n.getEquipItem=function(e){for(var t,i=this._itemArr.length,n=0;i>n;n++)if(t=this._itemArr[n],t.name==e)return t;return null},n.onPartnerChangeHandler=function(){this._selectedPartnerID=FigureModel.getInstance().selectedPartnerVO.parnerID,this.updateItemListRedDot(),this.updateFightValue()},n.updateFightValue=function(){var e=GoodsListProxy.getInstance().getEquipPartnerByPartnerId(this._selectedPartnerID);if(null!=e){for(var t,i,n,s,a,o=0,r=0,h=0,l=0;l<EquipmentVO.AWAKELEQUIP_GRID.length;l++)r=EquipmentVO.AWAKELEQUIP_GRID[l],t=e["the_"+r+"_Grid"],null!=t&&(i=GoodsListProxy.getInstance().getEquipBasicGood(t.template_id),s=AwakeModel.getInstance().getAwakeEquipSoulData(this._selectedPartnerID,r),s&&(a=AwakeModel.getInstance().getAwakeEquipSoulVO(r,s.level)),a&&(h=Math.floor(a.grow_up/100)),n=GoodsListProxy.getInstance().getNewEquipPropetyVO(i,t),n.up(h/100),i&&(o+=PropertyUtil.calculateProFight(GoodsListProxy.getInstance().getNewEquipPropetyVO(n,t))));this._txtFpower.text=o+""}},n.updateGoods=function(e){var t=PlayerBaseVO.makeUid(null,FigureModel.getInstance().selectedPartnerVO.parnerID);RoleModel.getInstance().getPartnerInfo(t);this.updateItemListRedDot(),this.updateInfoHandler(),RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.AWAKEEQUIPSOUL_HEROLIST_REDDOT))},n.updateItemListRedDot=function(){for(var e,t,i=this._itemArr.length,n=0;i>n;n++)e=this._itemArr[n],t=AwakeModel.getInstance().getAwakeEquipSoulData(this._selectedPartnerID,Number(e.name)),t?e.setStrenthLvl(t.level,!1):e.setStrenthLvl(0,!1),e.showRedDot=AwakeModel.getInstance().checkAwakeEquipSoulCanUpByPidAndType(this._selectedPartnerID,Number(e.name))},n.setSelected=function(e){this._selectedItem=e,this._imageSelected.x=this.equipItemContainer.x+this._selectedItem.x-13,this._imageSelected.y=this.equipItemContainer.y+this._selectedItem.y-13,this.updateInfoHandler()},n.updateServerData=function(){this.updateItemListRedDot(),this.updateInfoHandler(),RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.AWAKEEQUIPSOUL_HEROLIST_REDDOT))},n.updateInfoHandler=function(){var e,t,i=AwakeModel.getInstance().getAwakeEquipSoulData(this._selectedPartnerID,Number(this._selectedItem.name)),n=0,s=0,a=0,o=3459072;if(this._txtName.text="",this._txtCount.text="",null!=i?(e=AwakeModel.getInstance().getAwakeEquipSoulVO(i.type,i.level),n=i.level,this._txtDesc.htmlText="精魂保护<font color='#00d228'>（已开启）</font>\n当装备栏上存在精魂时，装备被爆时会优先掉落精魂,每次被爆掉落1层精魂，当精魂为0时，被爆则损失装备"):this._txtDesc.htmlText="<font color='#ff0000'>该装备栏未激活精魂</font>",s=n+1,t=AwakeModel.getInstance().getAwakeEquipSoulVO(Number(this._selectedItem.name),s),this._txtPro.visible=!0,this._txtProNext.visible=!0,null==e?(this._txtPro.text="0%",this._txtPro.x=260,this._imgArrow.visible=!1,this._txtProNext.text=""):null==t?(this._txtPro.text="",this._imgArrow.visible=!1,this._txtProNext.x=260,this._txtProNext.text="满级"):(this._txtPro.x=190,this._txtProNext.x=341,this._txtPro.text=Math.floor(e.grow_up/100)+"%",this._txtProNext.text=Math.floor(t.grow_up/100)+"%",this._imgArrow.visible=!0),t){var r=GoodsListProxy.getInstance().getGoodsInfoByType(t.showList[0].asset_id);a=GoodsListProxy.getInstance().findGoodNumber(t.showList[0].asset_id),a<t.showList[0].value&&(o=16711680),this._txtName.text=r.name,this._txtCount.text=a+"/"+t.showList[0].value}this._txtCount.textColor=o,this.updateFightValue()},n.getBtnChange=function(){return this._btnChange},t}(BaseView);egret.registerClass(AwakeEquipSoulView,"AwakeEquipSoulView");var AwakeEquipSoulWindow=function(e){function t(){e.call(this),this._selectedTabIndex=0,this.skinName="resource/game_skins/awakeEquip/AwakeEquipSoulWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_jinghun"),this.heroListTopBox=new HeroListTopBox,this.topContainer.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0,FigureModel.getInstance().selectedPartnerVO=this.heroListTopBox.roleListData[0]},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateGoods,this),RedDotsModel.getInstance().addEventListener(RedDotsModel.AWAKEEQUIPSOUL_HEROLIST_REDDOT,this.updateHeroListRedDot,this),this.updateGoods(null),this.updateHeroListRedDot(null)},n.dispose=function(){e.prototype.dispose.call(this),this.heroListTopBox&&(this.heroListTopBox.parent&&this.heroListTopBox.parent.removeChild(this.heroListTopBox),this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateGoods,this),RedDotsModel.getInstance().removeEventListener(RedDotsModel.AWAKEEQUIPSOUL_HEROLIST_REDDOT,this.updateHeroListRedDot,this),this.clearContent()},n.openView=function(e,t){if(t)this.isPop=!0;else{var i=!this.isPop;this.isPop=i}1==this.isPop&&(this._awakeEquipSoulView||(this._awakeEquipSoulView=new AwakeEquipSoulView,this.container.addChild(this._awakeEquipSoulView)),this._awakeEquipSoulView.onOpenHandler())},n.onBoxTap=function(e){e.data&&(FigureModel.getInstance().selectedPartnerVO=e.data)},n.updateHeroListRedDot=function(e){this.heroListTopBox.updateAwakeEquipSoulRedDots()},n.updateGoods=function(e){},n.clearContent=function(){for(var e;this.container.numChildren>0;)e=this.container.getChildAt(0),this.container.removeChild(e),e.dispose(),e=null;this._awakeEquipSoulView&&(this._awakeEquipSoulView.parent&&this._awakeEquipSoulView.parent.removeChild(this._awakeEquipSoulView),this._awakeEquipSoulView.onCloseHandler(),this._awakeEquipSoulView=null)},t}(LayeroutWindow);egret.registerClass(AwakeEquipSoulWindow,"AwakeEquipSoulWindow");var AwakeEquipView=function(e){function t(){e.call(this),this._selectedPartnerID=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/awakeEquip/AwakeEquipViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){function e(e,t){return Number(e.name)-Number(t.name)}this.figureMovieContainer.touchEnabled=!1,this._txtLink.htmlText="<u><a href = 'event:2'>查看属性</a></u>",this._txtLinkCompose.htmlText="<u><a href = 'event:2'>前往合成</a></u>";var t;this._itemArr=[];for(var i=0;i<this.equipItemContainer.numChildren;i++)t=this.equipItemContainer.getChildAt(i),t.showLv(!1),t.showAdd(!0),t.isWeared=!0,t.addCallBack(this.callBackF,t,this),this._itemArr.push(t);this._itemArr.sort(e)},n.onOpenHandler=function(){this._selectedPartnerID=FigureModel.getInstance().selectedPartnerVO.parnerID,this.updateFigure(),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),this.addGlobalEventListener(EventName.EQUIP_LIST_CHANGE,this.onChangeEquipListHandler,this),this.onChangeEquipListHandler(null),GameDispatcher.getInstance().addEventListener(PlayerBaseVO.CHANGE_CLOTH,this.updateFigure,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateGoods,this),AwakeModel.getInstance().addEventListener(AwakeEquipEvtName.CCMD21600_UPDATE,this.updateSoulHandler,this),AwakeModel.getInstance().addEventListener(AwakeModel.UPDATE_AWAKE_SCORE,this.updateAwakeScore,this),this._btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeButtonHandler,this),this._btnForgemind.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onForgemindButtonHandler,this),this._txtLink.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._txtLinkCompose.addEventListener(egret.TextEvent.LINK,this.onTxtLinkComposeHandler,this),this.imgAwakeScore.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openAwakeScore,this),GameDispatcher.getInstance().addEventListener(AwakeEquipEvtName.AWAKEEQUIPCOMPOSE_SUCCESS,this.onSucessHandler,this),this.onSucessHandler(),this.updateSoulHandler(),this.dispatchGlobalEvent(new ParamEvent(AwakeEvtName.CCMD_23500))},n.updateAwakeScore=function(){var e=AwakeModel.getInstance().getLevelByScore()+"";this.numAwakeScore.text=e,this.numAwakeScore.x=518-7*e.length},n.onCloseHandler=function(){this.dispose(),this.dispatchGlobalEvent(new ParamEvent(AwakeEquipEvtName.AWAKEEQUIPMENU_CLOSE)),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),this.removeGlobalEventListener(EventName.EQUIP_LIST_CHANGE,this.onChangeEquipListHandler,this),GameDispatcher.getInstance().removeEventListener(PlayerBaseVO.CHANGE_CLOTH,this.updateFigure,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateGoods,this),AwakeModel.getInstance().removeEventListener(AwakeEquipEvtName.CCMD21600_UPDATE,this.updateSoulHandler,this),this._btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeButtonHandler,this),this._btnForgemind.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onForgemindButtonHandler,this),this._txtLink.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._txtLinkCompose.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkComposeHandler,this),GameDispatcher.getInstance().removeEventListener(AwakeEquipEvtName.AWAKEEQUIPCOMPOSE_SUCCESS,this.onSucessHandler,this);for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e&&(e.parent&&e.parent.removeChild(e),e.data&&(e.data=null),e.dispose(),e=null);this._itemArr=null},n.onSucessHandler=function(){this._linkRedDot.visible=AwakeModel.getInstance().checkCanComposeAwakeEquip()},n.callBackF=function(e,t){this.dispatchGlobalEvent(new ParamEvent(AwakeEquipEvtName.AWAKEEQUIPMENU_CLOSE)),null==e.data?this.dispatchGlobalEvent(new ParamEvent(AwakeEquipEvtName.AWAKEEQUIPWEAR_OPEN,{type:Number(e.name)})):this.dispatchGlobalEvent(new ParamEvent(AwakeEquipEvtName.AWAKEEQUIPMENU_OPEN,{item:e,parentObj:t}))},n.updateFigure=function(){var e=PlayerBaseVO.makeUid(null,FigureModel.getInstance().selectedPartnerVO.parnerID),t=RoleModel.getInstance().getPartnerInfo(e);this.figureMovie&&this.figureMovie.dispose(),this.figureMovie||(this.figureMovie=new BigFigure,this.figureMovie.setTounchEnable(!1),this.figureMovieContainer.addChild(this.figureMovie)),this.figureMovie.changeBody(t.getCareer(),t.getSex(),t.getCloth()),this.figureMovie.changeWeapon(t.getCareer(),t.getSex(),t.getWeapon()),this.figureMovie.changeWing(t.getWingID())},n.dispose=function(){this.figureMovie&&(this.figureMovie.parent.removeChild(this.figureMovie),this.figureMovie.dispose(),this.figureMovie=null),AwakeModel.getInstance().removeEventListener(AwakeModel.UPDATE_AWAKE_SCORE,this.updateAwakeScore,this)},n.onTxtLinkComposeHandler=function(e){var t=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_49);if(t){if(t.open_round>0&&RoleModel.getInstance().getRoleCommon().round<t.open_round)return void Message.show("系统"+t.open_round+"转开启");if(t.open_level>0&&RoleModel.getInstance().getRoleCommon().level<t.open_level)return void Message.show("系统"+t.open_level+"级开启")}this.dispatchGlobalEvent(new ParamEvent(AwakeEquipEvtName.AWAKEEQUIPCOMPOSE_OPEN))},n.onTxtLinkHandler=function(e){for(var t,i=0,n=RoleModel.getInstance().getPartnerList(),s=0;s<n.length;s++)if(t=n[s],t.parnerID==FigureModel.getInstance().selectedPartnerVO.parnerID){i=s;break}var a,o=[];for(var r in n)a={},a.career=n[r].getCareer(),a.propertyVO=this.getPartnerEquipPro(n[r]),o.push(a);var h=new ParamEvent(FigureEvtName.FIGURE_OPEN_PARTNERPROPERTYVIEW);h.data={index:i,dataList:o},this.dispatchGlobalEvent(h)},n.getPartnerEquipPro=function(e){var t=GoodsListProxy.getInstance().getEquipPartnerByPartnerId(e.parnerID);if(null==t)return new PropertyVO;for(var i,n,s,a,o,r,h=this._itemArr.length,l=new EquipBasic,d=0,_=AwakeModel.getInstance().getUpByLevel(AwakeModel.getInstance().getLevelByScore()),c=0;h>c;c++)i=this._itemArr[c],n=t["the_"+i.name+"_Grid"],n&&(s=GoodsListProxy.getInstance().getEquipBasicGood(n.template_id),o=AwakeModel.getInstance().getAwakeEquipSoulData(this._selectedPartnerID,Number(i.name)),o&&(r=AwakeModel.getInstance().getAwakeEquipSoulVO(Number(i.name),o.level),r&&(d=Math.floor(r.grow_up/100))),d+=_,a=GoodsListProxy.getInstance().getNewEquipPropetyVO(s,n),a.up(d/100),l.add(a));return l},n.onForgemindButtonHandler=function(){this.dispatchGlobalEvent(new ParamEvent(AwakeEquipEvtName.AWAKEEQUIP_SOUL_VIEW_OPEN))},n.onChangeButtonHandler=function(){var e=GoodsListProxy.getInstance().checkCanWearEquip(FigureModel.getInstance().selectedPartnerVO,!1,!1,!0);if(!e)return void Message.show("没有装备可以换");var t=new ParamEvent(AwakeEquipEvtName.CCMD20300),i=FigureModel.getInstance().selectedPartnerVO;t.data={id:i.parnerID},this.dispatchGlobalEvent(t);for(var n,s,a=GoodsListProxy.getInstance().equipWearSlotList,o=0;o<a.length;o++)s=a[o],n=this.getEquipItem(s.slot+""),EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("shark"),44,40,n,120,!1)},n.getEquipItem=function(e){for(var t,i=this._itemArr.length,n=0;i>n;n++)if(t=this._itemArr[n],t.name==e)return t;return null},n.onPartnerChangeHandler=function(){this._selectedPartnerID=FigureModel.getInstance().selectedPartnerVO.parnerID,this.updateFigure(),this.onChangeEquipListHandler(null)},n.updateGoods=function(e){var t=PlayerBaseVO.makeUid(null,FigureModel.getInstance().selectedPartnerVO.parnerID),i=RoleModel.getInstance().getPartnerInfo(t);this._btnChange.showRedDot=FigureModel.getInstance().getEquipsCanWearByPartner(i,!1,!0),RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.ORANGE_HEROLIST_REDDOT,{index:1})),this._btnForgemind.showRedDot=AwakeModel.getInstance().checkAwakeEquipSoulCanUp(),RedDotsModel.getInstance().calAwakeEquipTabRedDot()},n.updateSoulHandler=function(){this._btnForgemind.showRedDot=AwakeModel.getInstance().checkAwakeEquipSoulCanUp(),RedDotsModel.getInstance().calAwakeEquipTabRedDot()},n.onChangeEquipListHandler=function(e){if(this._selectedPartnerID==FigureModel.getInstance().selectedPartnerVO.parnerID){var t=PlayerBaseVO.makeUid(null,FigureModel.getInstance().selectedPartnerVO.parnerID),i=RoleModel.getInstance().getPartnerInfo(t),n=GoodsListProxy.getInstance().getEquipPartnerByPartnerId(i.parnerID);if(null!=n){for(var s,a,o,r,h,l,d=this._itemArr.length,_=0,c=0,u=0;d>u;u++)s=this._itemArr[u],a=n["the_"+s.name+"_Grid"],a?(s.data=a,s.showLv(!0),o=GoodsListProxy.getInstance().getEquipBasicGood(a.template_id),h=AwakeModel.getInstance().getAwakeEquipSoulData(this._selectedPartnerID,Number(s.name)),h&&(l=AwakeModel.getInstance().getAwakeEquipSoulVO(Number(s.name),h.level)),l&&(_=Math.floor(l.grow_up/100)),r=GoodsListProxy.getInstance().getNewEquipPropetyVO(o,a),r.up(_/100),o&&(c+=PropertyUtil.calculateProFight(GoodsListProxy.getInstance().getNewEquipPropetyVO(r,a)))):s&&s.data&&(s.data=null,s.showAdd(!0));this._txtFpower.text=c+"",this._btnChange.showRedDot=FigureModel.getInstance().getEquipsCanWearByPartner(i,!1,!0),RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.ORANGE_HEROLIST_REDDOT,{index:1}))}}},n.openAwakeScore=function(){this.dispatchGlobalEvent(new ParamEvent(AwakeEvtName.OPEN_AWAKE_SCORE))},n.getBtnChange=function(){return this._btnChange},t}(BaseView);egret.registerClass(AwakeEquipView,"AwakeEquipView");var AwakeEquipWearItem=function(e){function t(t){e.call(this),this._ind=0,this._ind=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/awakeEquip/AwakeEquipWearItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this._btnWear.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnWearHandler,this)},s.onBtnWearHandler=function(){return SceneModel.getInstance().isKFBossScene()?void Message.show("该场景无法操作"):void this.dispatchGlobalEvent(new ParamEvent(AwakeEquipEvtName.CCMD20301,{id:FigureModel.getInstance().selectedPartnerVO.parnerID,item_id:this._vo.item_id}))},s.setData=function(e){var t=AwakeModel.getInstance().getAwakeSkillVO(e.rand_awake);if(this._vo=e,this._item.data=e,this._txtName.text=e.name,t){var i=t.proList[0],n=EquipBasic.getProStr(i.key)+"+"+i.value;this._txtSkill.htmlText="技能：<font color='#ffd200'>"+t.name+"</font>",this._txtSkillEff.htmlText="技能效果：<font color='#00d228'>"+n+"</font>"}},i(s,"vo",function(){return this._vo}),s.setSelected=function(e){},s.dispose=function(){e.prototype.dispose.call(this),this._btnWear.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnWearHandler,this),this.parent&&this.parent.removeChild(this),this._item&&(this._item.parent&&this._item.parent.removeChild(this._item),this._item.dispose(),this._item=null)},t}(Csprite);egret.registerClass(AwakeEquipWearItem,"AwakeEquipWearItem");var AwakeEquipWearView=function(e){function t(t){e.call(this),this._itemArr=[],this._type=0,this._type=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/awakeEquip/AwakeEquipWearViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateItemList,this),this._btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnReturn2Handler,this),this.updateItemList()},n.updateItemList=function(){this.clearItems();for(var e,t,i,n=GoodsListProxy.getInstance().getEquipsListBySubtype(this._type),s=0,a=0;a<n.length;a++)t=n[a],i=GoodsListProxy.getInstance().getEquipInfoByItemId(t.item_id),i||(e=new AwakeEquipWearItem(a+1),e.y=147*s,s++,this._itemContainer.addChild(e),this._itemArr.push(e),e.setData(t))},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e&&(e.dispose(),e=null);this._itemArr=[]},n.onBtnReturn2Handler=function(){this.isPop=!1},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onCloseHandler=function(){GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateItemList,this),this._btnReturn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnReturn2Handler,this),this.clearItems(),e.prototype.onCloseHandler.call(this)},t}(LayeroutWindow);egret.registerClass(AwakeEquipWearView,"AwakeEquipWearView");var BagEquipItem=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t}(EquipItem);egret.registerClass(BagEquipItem,"BagEquipItem");var BagEquipTipsView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/bag/BagEquipTipsSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.touchChildren=!1,this.touchEnabled=!1},n.setData=function(e,t){this.icon||(this.icon=new PicLoader,this.icon.x=55,this.icon.y=45),this.addChild(this.icon),this.icon.load(e),this.icon.setWH(60,60),this.txtContent.text=t},t}(BaseView);egret.registerClass(BagEquipTipsView,"BagEquipTipsView");var BagGoodsItem=function(e){function t(){e.call(this)}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.setTip=function(){this.myTips.setTips(GoodsListProxy.getInstance().getBasicProp(this.data.template_id,!1,!1,1,this.data.item_id,0,!1,0,!1,!1,0,!1,!0))},s.dataChanged=function(){return e.prototype.dataChanged.call(this),null!=this.data?void(this.data.type==GoodsType.ITEM_GIFT?this.showRedDot=!0:this.showRedDot=!1):void(this.showRedDot=!1)},i(s,"width",function(){return 94}),t}(GoodsItem);egret.registerClass(BagGoodsItem,"BagGoodsItem");var BagWindow=function(e){function t(){e.call(this),this._isNovice=!0,this._selectedTabIndex=0,this.skinName="resource/game_skins/bag/bagUISkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.BAG,this.tabBar.dataProvider=new eui.ArrayCollection(["装备","道具","熔炉"]);var t=new eui.TileLayout;t.paddingTop=3,t.paddingLeft=3,t.paddingRight=3,t.paddingBottom=3,this.groupGrid.layout=t,t.horizontalGap=20,t.verticalGap=20,this.vScroll.viewport=this.groupGrid,this.tabBar.selectedIndex=0,this.onBarItemTap(null),this.updateGuide(),this._txtRecLink.htmlText="<u><a href = 'event:2'>手动回收</a></u>"},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),RedDotsModel.getInstance().addEventListener(RedDotsModel.BAG_TAB_REDDOT,this.updateTabRedDot,this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnSettle.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSettleBtnClick,this),this._txtRecLink.addEventListener(egret.TextEvent.LINK,this.onRecBtnClick,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAddHandler,this),this.addGlobalEventListener(GoodsListProxy.CHANGE_GRID,this.updateGridNumHandler,this),this.addGlobalEventListener(GoodsListProxy.CHANGE_BASEGRID,this.updateGridNumHandler,this),this.addGlobalEventListener(GoodsListProxy.CHANGE_OTHERGRID,this.updateGridNumHandler,this),this.addGlobalEventListener(EventName.UPDATE_GOODSITEM,this.changeGoodsInfo,this),this.addGlobalEventListener(RongLianEvtName.RONGLIAN_HUISHOU_SUCESS,this.updateRongLianBtn,this),this.addGlobalEventListener(RongLianEvtName.RONGLU_HUISHOU_SUCESS,this.updateRongLuInfoHandler,this),this.updateGridNumHandler(),this.updateTabRedDot(null),this.updateRongLianBtn(),this.updateRongLuInfoHandler()},n.onCloseHandler=function(){RedDotsModel.getInstance().removeEventListener(RedDotsModel.BAG_TAB_REDDOT,this.updateTabRedDot,this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnSettle.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSettleBtnClick,this),this._txtRecLink.removeEventListener(egret.TextEvent.LINK,this.onRecBtnClick,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAddHandler,this),this.removeGlobalEventListener(GoodsListProxy.CHANGE_BASEGRID,this.updateGridNumHandler,this),this.removeGlobalEventListener(GoodsListProxy.CHANGE_OTHERGRID,this.updateGridNumHandler,this),this.removeGlobalEventListener(GoodsListProxy.CHANGE_GRID,this.updateGridNumHandler,this),this.removeGlobalEventListener(EventName.UPDATE_GOODSITEM,this.changeGoodsInfo,this),this.removeGlobalEventListener(RongLianEvtName.RONGLIAN_HUISHOU_SUCESS,this.updateRongLianBtn,this),this.removeGlobalEventListener(RongLianEvtName.RONGLU_HUISHOU_SUCESS,this.updateRongLuInfoHandler,this),this.btnEffect&&(this.btnEffect.dispose(),this.btnEffect=null),this._rongluView&&this._rongluView.onCloseHandler(),this.clearGoodsList(),e.prototype.onCloseHandler.call(this)
},n.updateRongLuInfoHandler=function(){RedDotsModel.getInstance().calRongLuTabRedDot()},n.updateTabRedDot=function(e){if(this.tabBar.validateNow(),GoodsListProxy.getInstance().hasGiftGoodsInBag()?this.tabBar.getChildAt(1).showRedDot=!0:this.tabBar.getChildAt(1).showRedDot=!1,null!=e){var t=e.data.index,i=e.data.show;i?this.tabBar.getChildAt(t).showRedDot=!0:this.tabBar.getChildAt(t).showRedDot=!1}},n.changeGoodsInfo=function(){this.updateTabRedDot(null),this.updateGoods()},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_bag")},n.updateRongLianBtn=function(){var e=GoodsListProxy.getInstance().getRongLianGoods();e.length>0?null==this.btnEffect&&(this.btnEffect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("anniu"),58,28,this.btnSettle,80,!0)):this.btnEffect&&(this.btnEffect.dispose(),this.btnEffect=null)},n.updateGoods=function(){this._rongluView&&this._rongluView.onCloseHandler(),this.clearGoodsList(),0==this.tabBar.selectedIndex?(this.groupGrid.itemRenderer=BagEquipItem,this.groupGrid.dataProvider=new eui.ArrayCollection(GoodsListProxy.getInstance().getGoodsList()),this._gridContainer.visible=!0,this._txtRecLink.visible=this.btnSettle.visible=!0,this._rongLuContainer&&1==this._rongLuContainer.visible&&(this._rongLuContainer.visible=!1),0==this.vScroll.visible&&(this.vScroll.visible=!0)):1==this.tabBar.selectedIndex?(this.groupGrid.itemRenderer=BagGoodsItem,this.groupGrid.dataProvider=new eui.ArrayCollection(GoodsListProxy.getInstance().getGoodsList(GoodsType.ITEM_GIFT)),this._gridContainer.visible=!1,this._txtRecLink.visible=this.btnSettle.visible=!1,this._rongLuContainer&&1==this._rongLuContainer.visible&&(this._rongLuContainer.visible=!1),0==this.vScroll.visible&&(this.vScroll.visible=!0)):2==this.tabBar.selectedIndex&&(null==this._rongluView&&(this._rongluView=new RongLuView,this._rongLuContainer.addChild(this._rongluView)),this._rongluView.onOpenHandler(),this._txtRecLink.visible=this.btnSettle.visible=!1,0==this._rongLuContainer.visible&&(this._rongLuContainer.visible=!0),1==this.vScroll.visible&&(this.vScroll.visible=!1))},n.clearGoodsList=function(){this.groupGrid.dataProvider=null},n.onBarItemTap=function(e){this.updateGoods()},n.updateGridNumHandler=function(){this.txtGridNum.text=GoodsListProxy.getInstance().getGrid()+"/"+(GoodsListProxy.getInstance().getBaseGrid()+GoodsListProxy.getInstance().getOtherGrid())},n.onRecBtnClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(RongLianEvtName.RONGLIAN_OPEN_SELECT_VIEW,{type:1}))},n.onSettleBtnClick=function(){NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip();for(var e,t,i=[],n=GoodsListProxy.getInstance().getRongLianGoods(),s=0;s<n.length;s++)e=n[s],t=new NodeItem_ids,t.item_id=e.item_id,i.push(t);i.length>0?this.dispatchGlobalEvent(new ParamEvent(RongLianEvtName.CCMD10901,{item_ids:i})):Message.show("没有装备可回收")},n.btnAddHandler=function(){var e=new ParamEvent(EventName.OPEN_OPENGRID_VIEW);this.dispatchGlobalEvent(e)},n.openView=function(e,t){if(t)this.isPop=!0;else{var i=!this.isPop;this.isPop=i}1==this.isPop&&(this.setTabIndex(e),this.onBarItemTap(null))},n.setTabIndex=function(e){this._selectedTabIndex=e,this.tabBar.selectedIndex=this._selectedTabIndex},n.setCenter=function(){e.prototype.setCenter.call(this)},n.updateGuide=function(e){if(void 0===e&&(e=0),this._isNovice&&TaskModel.getInstance().getCurTaskXS()==NoviceGuideType.GuideRonglianTips){this._isNovice=!1;var t=new egret.Point(this.x+460,this.y+820);NoviceGuideManager.getInstance().showShadeTip(this.btnSettle,"点击回收装备",t,new egret.Point(t.x-20,t.y-85))}},t}(LayeroutWindow);egret.registerClass(BagWindow,"BagWindow",["INoviceGuide"]);var OpenGridView=function(e){function t(){e.call(this),this.min=5,this.skinName="resource/game_skins/bag/OpenGridViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("openGrid_title"),this.imageTitleTop=13},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKHandler,this),this._btnCancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelHanlder,this),GameDispatcher.getInstance().addEventListener(CustomNumberStep.CHANGE,this.onNumberChangeHandler,this),this.min=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_3).value),this._txtGold.text=this.min.toString(),this._numberStep.MinNum=this.min,this._numberStep._step=this.min,this._numberStep.setValue(this.min),this.onNumberChangeHandler()},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKHandler,this),this._btnCancel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelHanlder,this),GameDispatcher.getInstance().removeEventListener(CustomNumberStep.CHANGE,this.onNumberChangeHandler,this)},n.onNumberChangeHandler=function(){this._cost=Number(5*this._numberStep.getValue()),this._txtGold.text=this._cost.toString()},n.onOKHandler=function(){if(RoleModel.getInstance().CheckGold(this._cost)){var e=this._numberStep.getValue()/Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_3).value),t=new ParamEvent(EventName.REQUEST_BAG_STARTGRID);t.data={num:e},this.dispatchGlobalEvent(t),this.isPop=!1}},n.onCancelHanlder=function(){this.isPop=!1},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=277},t}(LayeroutWindow);egret.registerClass(OpenGridView,"OpenGridView");var BlessWindow=function(e){function t(){e.call(this),this._roleId=0,this._itemId=0,this.skinName="resource/game_skins/bless/BlessWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this._imgBuff=new PicLoader,this.addChild(this._imgBuff),this._imgBuff.x=265,this._imgBuff.y=478},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnGive.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGiveHandler,this),this._btnKiss.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onKissHandler,this),this._btnAddFriend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddFriendHandler,this)},n.onCloseHandler=function(){this._btnGive.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGiveHandler,this),this._btnKiss.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onKissHandler,this),this._btnAddFriend.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddFriendHandler,this),e.prototype.onCloseHandler.call(this)},n.setData=function(e,t,i,n){this._roleId=e,this._itemId=i;var s=new Date,a=s.getMonth()+1,o=s.getDate(),r=GoodsListProxy.getInstance().getGoodsInfoByType(i),h=ColorUtil.getGoodColor(r.quality-1);this._txtContent.htmlText=a+"月"+o+"日<font color='#00d228'>"+t+"</font>向你送出<font color='"+h+"'>"+r.name+"</font>";var l=GoodsListProxy.getInstance().findGoodNumber(i);this._txtCount.text=r.name+"："+l;var d=n[0],_=FanLiModel.getInstance().getBlessBuffVO(d.obj_id);null!=_&&(this._txtName.text=_.name,this._imgBuff.load(rURL("resource/assets/icon/bless/buff/"+_.template_id+".png")))},n.onGiveHandler=function(){this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD19700,{id:this._roleId,cfg_id:this._itemId})),this.isPop=!1},n.onKissHandler=function(){this.isPop=!1},n.onAddFriendHandler=function(){this.dispatchGlobalEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11703,this._roleId)),this.isPop=!1},t}(LayeroutWindow);egret.registerClass(BlessWindow,"BlessWindow");var BuffItem=function(e){function t(t){e.call(this),this._resTime=0,this._ind=0,this._ind=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/bless/BuffItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this._img=new PicLoader,this.addChild(this._img),this._img.x=19,this._img.y=4},s.setData=function(e,t){this._vo=e,this._node=t,this._img.load(UrlUtil.getBlessBuffIcon(""+this.vo.template_id)),this._txtName.text=this._vo.name,this._txtDesc.text=this._vo.desc,this._resTime=t.last_time,this._resTime>0&&(TimerManager.getInstance().add(1e3,this.onTimer,this),this.onTimer())},s.onTimer=function(){this._resTime--,this._resTime>0?this._txtTime.text="有效时间："+TimeUtil.getTime5(this._resTime):(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text="有效时间：已过期")},i(s,"vo",function(){return this._vo}),s.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),this.parent&&this.parent.removeChild(this),this._img&&(this._img.dispose(),this._img=null)},t}(Csprite);egret.registerClass(BuffItem,"BuffItem");var BuffView=function(e){function t(){e.call(this),this._itemArr=[],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/bless/BuffViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this._imgBG=new PicLoader,this._titContainer.addChild(this._imgBG),this._imgBG.x=24,this._imgBG.y=0,this._imgBG.load(UrlUtil.getWindowTitlePicURL("title_buffList"))},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD19710)),GameDispatcher.getInstance().addEventListener(FanLiEvtName.CCMD19710_UPDATE,this.updateItemList,this),this._btnReturn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnReturn2Handler,this),this.updateItemList()},n.updateItemList=function(){this.clearItems();for(var e,t,i,n=FanLiModel.getInstance().blessBuffList,s=0;s<n.length;s++)i=n[s],t=FanLiModel.getInstance().getBlessBuffVO(i.buff_id),e=new BuffItem(s+1),e.y=115*s,this._itemContainer.addChild(e),this._itemArr.push(e),e.setData(t,i)},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e&&(e.parent&&e.parent.removeChild(e),e.dispose(),e=null);this._itemArr=[]},n.onBtnReturn2Handler=function(){this.isPop=!1},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onCloseHandler=function(){GameDispatcher.getInstance().removeEventListener(FanLiEvtName.CCMD19710_UPDATE,this.updateItemList,this),this._btnReturn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnReturn2Handler,this),this.clearItems(),this._imgBG&&(this._imgBG.dispose(),this._imgBG=null),e.prototype.onCloseHandler.call(this)},t}(LayeroutWindow);egret.registerClass(BuffView,"BuffView");var BossAllHitItem=function(e){function t(){e.call(this),this.skinName="resource/game_skins/boss/BossAllHitItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dataChanged=function(){this.txtRank.text=(this.itemIndex+1).toString(),this.txtName.text=this.data.name,this.txtValue.text=this.data.hit.toString()},t}(eui.ItemRenderer);egret.registerClass(BossAllHitItem,"BossAllHitItem");var BossAllHitRankWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/boss/BossAllHitSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this)},n.updateData=function(e){e.sort(function(e,t){return e.hit<t.hit?1:-1});for(var t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this.bossList.dataProvider=t},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this)},t}(LayeroutWindow);egret.registerClass(BossAllHitRankWindow,"BossAllHitRankWindow");var BossAllItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/boss/BossAllItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.txtKill.htmlText="<u>击杀排行</u>",this.txtHit.htmlText="<u>伤害排行</u>",this.txtKill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowKill,this),this.txtHit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowHit,this),this.bmHead=new PicLoader,this.headGroup.addChild(this.bmHead)},n.onShowKill=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.OPEN_BOSS_ALL_KILL,this._bossData.boss_all_kills))},n.onShowHit=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.OPEN_BOSS_ALL_HIT,this._bossData.boss_all_hits))},n.onGetClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.BOSS_CCMD14410,this._bossVo.template_id))},n.dataChanged=function(){this._bossVo=this.data,this.bmHead.load(UrlUtil.getBossHead(SceneModel.getInstance().getMonsterConfig(this._bossVo.boss_id).resID.toString())),this.txtName.text=this._bossVo.boss_name;for(var e,t=0;t<this._bossVo.itemList.length;t++)e=this["item_"+t],e.data=this._bossVo.itemList[t].info;this._bossData=BossModel.getInstance().getBossAllDataById(this._bossVo.template_id),this.txtCount.text=this._bossData.boss_all_hits.length+"人",this.txtHp.text=this._bossData.hp_rate+"/100",this.hpBar.scaleX=this._bossData.hp_rate/100,RoleModel.getInstance().getRoleCommon().level<this._bossVo.open_level?(this.btnGet.visible=!1,this.txtTips.text=this._bossVo.open_level+"级开启",this.tipGroup.visible=!0):RoleModel.getInstance().getRoleCommon().round<this._bossVo.open_round?(this.btnGet.visible=!1,this.txtTips.text=this._bossVo.open_round+"转开启",this.tipGroup.visible=!0):(this.btnGet.visible=!0,this.tipGroup.visible=!1),TimerManager.getInstance().remove(1e3,this.timeComplete,this),this._bossData.last_time>0?(this.btnGet.visible=!1,this.txtTime.text=TimeUtil.getTime2(this._bossData.last_time),TimerManager.getInstance().add(1e3,this.timeComplete,this)):this._bossData.hp_rate>0&&(this.btnGet.visible=!0,this.txtTime.text="")},n.timeComplete=function(){this._bossData.last_time--,this._bossData.last_time<=0?(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.txtTime.text="",this.btnGet.visible=!0):this.txtTime.text=TimeUtil.getTime2(this._bossData.last_time)},n.dispose=function(){TimerManager.getInstance().remove(1e3,this.timeComplete,this)},t}(eui.ItemRenderer);egret.registerClass(BossAllItem,"BossAllItem");var BossAllKillItem=function(e){function t(){e.call(this),this.skinName="resource/game_skins/boss/BossAllKillItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dataChanged=function(){this.txtRank.text=(this.itemIndex+1).toString(),this.txtName.text=this.data.name,this.txtValue.text=this.data.power.toString()},t}(eui.ItemRenderer);egret.registerClass(BossAllKillItem,"BossAllKillItem");var BossAllKillRankWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/boss/BossAllKillSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this)},n.updateData=function(e){e.sort(function(e,t){return e.power<t.power?1:-1});for(var t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this.bossList.dataProvider=t},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this)},t}(LayeroutWindow);egret.registerClass(BossAllKillRankWindow,"BossAllKillRankWindow");var BossAllSetItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/boss/BossAllSetItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.checkBox.addEventListener(egret.TouchEvent.CHANGE,this.onChangeCheck,this)},n.onChangeCheck=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.BOSS_CCMD14402,{id:this._bossData.template_id,flag:this.checkBox.selected}))},n.dataChanged=function(){this._bossData=this.data,this.txtName.text=this._bossData.boss_name,this._bossData.open_round>0?this.txtLv.text=this._bossData.open_round+"转":this.txtLv.text=this._bossData.open_level+"级",this.checkBox.selected=BossModel.getInstance().getBossAllTipStautsById(this._bossData.template_id),this.itemBg.visible=this.itemIndex%2==0},t}(eui.ItemRenderer);egret.registerClass(BossAllSetItem,"BossAllSetItem");var BossAllSettingWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/boss/BossAllSettingSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.BOSS,this.setImageTitle("title_boss_tips"),this._isInit||(this._isInit=!0,this.updateData())},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_boss_tips")},n.updateData=function(){if(this._isInit){var e=BossModel.getInstance().getBossAllList();e.sort(function(e,t){return e.template_id>t.template_id?1:-1});for(var t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this.bossList.dataProvider=t}},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this),this.addGlobalEventListener(BossEvtName.BOSS_CCMD14401_UPDATE,this.updateData,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this),this.removeGlobalEventListener(BossEvtName.BOSS_CCMD14401_UPDATE,this.updateData,this)},t}(LayeroutWindow);egret.registerClass(BossAllSettingWindow,"BossAllSettingWindow");var BossAllView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/boss/BossAllViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addGlobalEventListener(BossEvtName.BOSS_CCMD14400_UPDATE,this.onUpdateBoss,this),this.txtTips.htmlText="<u>BOSS提醒设置</u>",this.txtTips.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowSetting,this),this._isInit||(this._isInit=!0,this.updateData())},n.onShowSetting=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.OPEN_BOSS_ALL_SETTING))},n.onUpdateBoss=function(e){this._bossInfo=BossModel.getInstance().bossAllInfo,this.updateData()},n.updateData=function(){if(this._isInit&&this._bossInfo){for(var e=BossModel.getInstance().getBossAllList(),t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this.bossList.dataProvider=t;var n=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_46).value);this.txtCount.text=n-this._bossInfo.bat_num+"/"+n,this._bossInfo.last_time>0?(this.txtTime.text="恢复时间："+TimeUtil.getTime(this._bossInfo.last_time),TimerManager.getInstance().remove(1e3,this.timeComplete,this),TimerManager.getInstance().add(1e3,this.timeComplete,this)):this.txtTime.text=""}},n.timeComplete=function(){this._bossInfo.last_time--,this._bossInfo.last_time<=0?(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.txtTime.text=""):this.txtTime.text="恢复时间："+TimeUtil.getTime(this._bossInfo.last_time)},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(BossEvtName.BOSS_CCMD14400_UPDATE,this.onUpdateBoss,this),this.txtTips.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowSetting,this),this._bossInfo.last_time>0&&TimerManager.getInstance().remove(1e3,this.timeComplete,this);for(var t=0;t<this.bossList.numChildren;t++){var i=this.bossList.getChildAt(t);i&&i.dispose()}},t}(BaseView);egret.registerClass(BossAllView,"BossAllView");var BossBloodView=function(e){function t(){e.call(this),this._isShow=!1,this._model=BossModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/boss/BossBloodViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._pic=new PicLoader,this.addChild(this._pic),this._btnDown.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this.addChild(this._txtLv),this.isShowList(!1),this._isInit=!0,this._tmpData&&this.updateInfo(this._tmpData)},n.onAdd=function(){e.prototype.onAdd.call(this),this._model.addEventListener(BossModel.UPDATE_BOSS_DAMAGEINFO,this.updateInfoHandler,this),null==this.parent&&(this.y=165,GameContent.gameLayers.mainUILayer.addChild(this),this.visible=!0)},n.onRemove=function(){e.prototype.onRemove.call(this),this._model.removeEventListener(BossModel.UPDATE_BOSS_DAMAGEINFO,this.updateInfoHandler,this),this.parent&&this.parent.removeChild(this),this.dispatchEvent(new ParamEvent(EventName.WINDOW_DISPOSE))},n.updateInfoHandler=function(e){var t=this._model.getBossDamageInfo();return this._isInit?(SceneModel.getInstance().isNoHitListScene()&&this.contains(this._btnDown)&&this.removeChild(this._btnDown),void this.updateInfo(t)):void(this._tmpData=t)},n.updateInfo=function(e){var t,i=SceneModel.getInstance().getMonsterConfig(e.bossID);t=SceneModel.getInstance().isClientMakeBossBloodScene()?SceneModel.getInstance().isPersonBoss()?UrlUtil.getBossHead(i.resID.toString()):UrlUtil.getBossCommonHead():UrlUtil.getBossHead(i.resID.toString());var n=this;if(n._pic.load(t),n._txtBlood.text=StringUtil.substitute("{0}/{1}",e.hp,e.maxHp),n._imageBlood.width=Math.floor(351*e.hp/e.maxHp),n._txtLv.text=i.lev.toString(),n._txtName.text=i.name,SceneModel.getInstance().isClientMakeBossBloodScene()||SceneModel.getInstance().isNoHitListScene())n._txtMyDamage.text="",n._txtFirst.text="";else{n._txtMyDamage.text=StringUtil.substitute("自己:{0}",Tools.convertNumber(e.myHit));var s=e.hitsList[0];s&&(n._txtFirst.htmlText=StringUtil.substitute("{0} {1}  {2}",1,s.name,Tools.convertNumber(s.hit))),n.createHitList(e.hitsList)}n=null},n.createHitList=function(e){var t=this;null==t._txtList&&(t._txtList=new Array),this.clearContainer();for(var i,n,s=0;s<e.length;s++)i=e[s],n=t._txtList[s],null==n&&(n=new CustomLabel,n.size=18,t._txtList.push(n)),n.text=StringUtil.substitute("{0} {1}  {2}",s+1,i.name,Tools.convertNumber(i.hit)),n.x=4,n.y=28*s+4,t._container.addChild(n)},n.clearContainer=function(){for(;this._container.numChildren>1;)this._container.removeChildAt(1)},n.onClickBtn=function(e){this.isShowList(!this._isShow)},n.isShowList=function(e){this._isShow=e,this._isShow?this.addChild(this._container):this.contains(this._container)&&this.removeChild(this._container)},n.dispose=function(){e.prototype.dispose.call(this);var t=this;if(t._txtLv&&(t._txtLv.dispose(),t._txtLv=null),t._txtName&&(t._txtName.dispose(),t._txtName=null),t._txtBlood&&(t._txtBlood.dispose(),t._txtBlood=null),t._txtMyDamage&&(t._txtMyDamage.dispose(),t._txtMyDamage=null),t._txtFirst&&(t._txtFirst.dispose(),t._txtFirst=null),t._pic&&(t._pic.dispose(),t._pic=null),t._imageBlood&&(t._imageBlood.dispose(),t._imageBlood=null),t._txtList){for(var i=0;i<t._txtList.length;i++){var n=t._txtList[i];n.dispose(),n=null}t._txtList=null}},t}(BaseView);egret.registerClass(BossBloodView,"BossBloodView");var BossEliteItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/boss/BossItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateCount,this),this.bmHead=new PicLoader,this.headGroup.addChild(this.bmHead),this.icon=new PicLoader,this.icon.x=450,this.icon.y=125,this.addChildAt(this.icon,this.getChildIndex(this.txtBack)),this.txtBack.visible=!0},n.onGetClick=function(){this._backCount>=this._tol?(BossModel.getInstance().BossID_elite=this._bossVo.template_id,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.CMD20610,this._bossVo.template_id))):GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.OPEN_GETMATERIAL_BUY_WINDOW,{typeId:this._itemId,type:"bossElite",linkStrArr:["精英BOSS"]}))},n.updateCount=function(){this._itemId=this._bossVo.con_item[0].info.template_id,this._backCount=GoodsListProxy.getInstance().findGoodNumber(this._itemId),this._tol=this._bossVo.con_item[0].num,this.txtBack.text=this._backCount+"/"+this._tol},n.dataChanged=function(){this._bossVo=this.data,this.bmHead.load(UrlUtil.getBossHead(SceneModel.getInstance().getMonsterConfig(this._bossVo.boss_id).resID.toString())),this.txtName.text=this._bossVo.boss_name;for(var e,t=0;t<this._bossVo.itemList.length;t++)e=this["item_"+t],e.data=this._bossVo.itemList[t].info;if(this._bossData=BossModel.getInstance().getBossEliteDataById(this._bossVo.template_id),this.txtCount.text=this._bossData.hit_num+"人",this.txtOwn.text=this._bossData.own_name,this.hpBar.scaleX=this._bossData.last_time/this._bossVo.flee_cd,RoleModel.getInstance().getRoleCommon().level<this._bossVo.open_level?(this.btnGet.visible=!1,this.txtTips.text=this._bossVo.open_level+"级开启",this.tipGroup.visible=!0):RoleModel.getInstance().getRoleCommon().round<this._bossVo.open_round?(this.btnGet.visible=!1,this.txtTips.text=this._bossVo.open_round+"转开启",this.tipGroup.visible=!0):(this.btnGet.visible=!0,this.tipGroup.visible=!1),this.img_go.visible=!1,this.img_sha.visible=!1,TimerManager.getInstance().remove(1e3,this.timeComplete,this),this._bossData.last_time>0)this.btnGet.visible=!0,TimerManager.getInstance().add(1e3,this.timeComplete,this),this.txtHp.text=this._bossData.last_time+"秒后逃跑",this.txtTime.visible=!1;else{this.btnGet.visible=!1,this.txtHp.text="",this._bossData.flag>0?this.img_go.visible=!0:this.img_sha.visible=!0;var i=Math.ceil(TimeUtil.getTimeByTimeZone().getTime()/1e3)%this._bossVo.refresh_cd;this.txtTime.text=Math.ceil((this._bossVo.refresh_cd-i)/60)+"分钟后刷新",this.txtTime.visible=!0}this.icon.load(UrlUtil.getSmallPic(this._bossVo.con_item[0].info.pic)),this.updateCount()},n.timeComplete=function(){this._bossData.last_time--,this._bossData.last_time<=0?(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.btnGet.visible=!1,this.txtHp.text="逃跑"):(this.hpBar.scaleX=this._bossData.last_time/this._bossVo.flee_cd,this.txtHp.text=this._bossData.last_time+"秒后逃跑")},n.dispose=function(){TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateCount,this),this.bmHead&&(this.bmHead.dispose(),this.bmHead=null),this.icon&&(this.icon.dispose(),this.icon=null)},t}(eui.ItemRenderer);egret.registerClass(BossEliteItem,"BossEliteItem");var BossEliteView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/boss/BossEliteViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addGlobalEventListener(BossEvtName.CMD20600_UPDATE,this.onUpdateData,this)},n.onUpdateData=function(e){for(var t=BossModel.getInstance().getBossEliteList(),i=new eui.ArrayCollection,n=0;n<t.length;n++)i.addItem(t[n]);this.bossList.dataProvider=i},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(BossEvtName.CMD20600_UPDATE,this.onUpdateData,this);for(var t=0;t<this.bossList.numChildren;t++){var i=this.bossList.getChildAt(t);i&&(i.dispose(),i=null)}},t}(BaseView);egret.registerClass(BossEliteView,"BossEliteView");var BossFieldItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/boss/BossItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.bmHead=new PicLoader,this.headGroup.addChild(this.bmHead)},n.onGetClick=function(){BossModel.getInstance().BossID_field=this._bossVo.template_id,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.BOSS_FIELD_ITEM_CLICK,this._bossVo.template_id))},n.dataChanged=function(){this._bossVo=this.data,this.bmHead.load(UrlUtil.getBossHead(SceneModel.getInstance().getMonsterConfig(this._bossVo.boss_id).resID.toString())),this.txtName.text=this._bossVo.boss_name;for(var e,t=0;t<this._bossVo.itemList.length;t++)e=this["item_"+t],e.data=this._bossVo.itemList[t].info;if(this._bossData=BossModel.getInstance().getBossFieldDataById(this._bossVo.template_id),this.txtCount.text=this._bossData.hit_num+"人",this.txtOwn.text=this._bossData.own_name,this.hpBar.scaleX=this._bossData.last_time/this._bossVo.flee_cd,RoleModel.getInstance().getRoleCommon().level<this._bossVo.open_level?(this.btnGet.visible=!1,this.txtTips.text=this._bossVo.open_level+"级开启",this.tipGroup.visible=!0):RoleModel.getInstance().getRoleCommon().round<this._bossVo.open_round?(this.btnGet.visible=!1,this.txtTips.text=this._bossVo.open_round+"转开启",this.tipGroup.visible=!0):(this.btnGet.visible=!0,this.tipGroup.visible=!1),this.img_go.visible=!1,this.img_sha.visible=!1,TimerManager.getInstance().remove(1e3,this.timeComplete,this),this._bossData.last_time>0)this.btnGet.visible=!0,TimerManager.getInstance().add(1e3,this.timeComplete,this),this.txtHp.text=this._bossData.last_time+"秒后逃跑",this.txtTime.visible=!1;else{this.btnGet.visible=!1,this.txtHp.text="";var i=RoleModel.getInstance().getServerDate();i.getHours()<8?this.txtTime.text="早上8点刷新":this.txtTime.text=Math.ceil((60-i.getMinutes())%15)+"分钟后刷新",this.txtTime.visible=!0}},n.timeComplete=function(){this._bossData.last_time--,this._bossData.last_time<=0?(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.btnGet.visible=!1,this.txtHp.text="逃跑"):(this.hpBar.scaleX=this._bossData.last_time/this._bossVo.flee_cd,this.txtHp.text=this._bossData.last_time+"秒后逃跑")},n.dispose=function(){TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.bmHead&&(this.bmHead.dispose(),this.bmHead=null)},t}(eui.ItemRenderer);egret.registerClass(BossFieldItem,"BossFieldItem");var BossFieldView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/boss/BossFieldViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addGlobalEventListener(BossEvtName.CMD20700_UPDATE,this.onUpdateData,this),this.addGlobalEventListener(BossEvtName.CMD20701_UPDATE,this.onUpdateBoss,this),this.txtClear.htmlText="<u>清除CD</u>",this.txtClear.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClear,this),this.addGlobalEventListener(BossEvtName.BOSS_FIELD_ITEM_CLICK,this.onItemClick,this),ConfigManager.isTencent()?(this.txtClearShare.htmlText="<u>分享清除CD</u>",this.txtClearShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClearShare,this)):this.removeShareClear(),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.updateDaily(null)},n.updateDaily=function(e){var t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_20701);
t>0&&this.removeShareClear()},n.removeShareClear=function(){this.txtClearShare.parent&&this.txtClearShare.parent.removeChild(this.txtClearShare)},n.onItemClick=function(e){this._time>0?Message.show("CD时间未到"):this.dispatchGlobalEvent(new ParamEvent(BossEvtName.CMD20710,e.data))},n.onClear=function(){var e=this,t=Math.ceil(this._time/Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_20701).value));GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"",content:"是否花费"+t+"元宝清除CD",func:function(){RoleModel.getInstance().CheckGold(t)&&e.dispatchGlobalEvent(new ParamEvent(BossEvtName.CMD20720))}}))},n.onUpdateData=function(e){this._time=e.data,TimerManager.getInstance().remove(1e3,this.timeComplete,this),this._time>0?(this.txtClear.visible=!0,this.txtClearShare.visible=!0,this.txtTime.text="我的挑战CD:"+TimeUtil.getTime2(this._time),TimerManager.getInstance().add(1e3,this.timeComplete,this)):(this.txtClear.visible=!1,this.txtClearShare.visible=!1,this.txtTime.text="")},n.timeComplete=function(){this._time--,this._time<=0?(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.txtClear.visible=!1,this.txtTime.text=""):this.txtTime.text="我的挑战CD:"+TimeUtil.getTime2(this._time)},n.onUpdateBoss=function(e){for(var t=BossModel.getInstance().getBossFieldList(),i=new eui.ArrayCollection,n=0;n<t.length;n++)i.addItem(t[n]);this.bossList.dataProvider=i},n.onClearShare=function(e){ConfigManager.isTencent()&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FuLiEvtName.SHOW_SHARENEW_VIEW,ShareNewWindow.WILD_BOSS_CD))},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(BossEvtName.CMD20700_UPDATE,this.onUpdateData,this),this.removeGlobalEventListener(BossEvtName.CMD20701_UPDATE,this.onUpdateBoss,this),this.removeGlobalEventListener(BossEvtName.BOSS_FIELD_ITEM_CLICK,this.onItemClick,this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.txtClear.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClear,this);for(var t=0;t<this.bossList.numChildren;t++){var i=this.bossList.getChildAt(t);i&&i.dispose()}},t}(BaseView);egret.registerClass(BossFieldView,"BossFieldView");var BossGuildCallWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/boss/BossGuildCallWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this);var t=this;t.setImageWindowTitle("title_bossGuildCall"),t.btnNo.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,t),t.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGetClick,t),t.checkBox.addEventListener(egret.TouchEvent.CHANGE,t.onChangeCheck,t),t.checkBox.selected=!BossModel.getInstance().isShowBossGuildCall},n.onChangeCheck=function(){var e=this;BossModel.getInstance().isShowBossGuildCall=!e.checkBox.selected},n.setData=function(e){var t=this;t._data=e,t.headItem.setHeadURLByPartner(t._data.icon),t.txtRoleName.text=t._data.name,t._vo=BossModel.getInstance().getBossGuildConfig()[t._data.template_id],t.txtName.text=t._vo.boss_name},n.onGetClick=function(){var e=this;return RoleModel.getInstance().getRoleCommon().level<e._vo.open_level?void Message.show(e._vo.open_level+"级开启"):RoleModel.getInstance().getRoleCommon().round<e._vo.open_round?void Message.show(e._vo.open_round+"转开启"):(BossModel.getInstance().guildBossID=e._data.template_id,e.dispatchGlobalEvent(new ParamEvent(BossEvtName.CMD19410,e._data.template_id)),void(e.isPop=!1))},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.btnNo.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,t),t.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onGetClick,t),t.checkBox.addEventListener(egret.TouchEvent.CHANGE,t.onChangeCheck,t)},t}(LayeroutWindow);egret.registerClass(BossGuildCallWindow,"BossGuildCallWindow");var BossGuildItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/boss/BossAllItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.txtKill.htmlText="<u>击杀排行</u>",this.txtHit.htmlText="<u>伤害排行</u>",this.txtKill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowKill,this),this.txtHit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowHit,this),this.txtHit.parent.removeChild(this.txtHit),this.bmHead=new PicLoader,this.headGroup.addChild(this.bmHead)},n.onShowKill=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.OPEN_BOSS_ALL_KILL,this._bossData.boss_guild_kills))},n.onShowHit=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.OPEN_BOSS_ALL_HIT,this._bossData.boss_guild_hits))},n.onGetClick=function(){this._bossVo&&(BossModel.getInstance().guildBossID=this._bossVo.template_id,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.CMD19410,this._bossVo.template_id)))},n.dataChanged=function(){this._bossVo=this.data,this.bmHead.load(UrlUtil.getBossHead(SceneModel.getInstance().getMonsterConfig(this._bossVo.boss_id).resID.toString())),this.txtName.text=this._bossVo.boss_name;for(var e,t=0;t<this._bossVo.itemList.length;t++)e=this["item_"+t],e.data=this._bossVo.itemList[t].info;this._bossData=BossModel.getInstance().getBossGuildDataById(this._bossVo.template_id),this.txtCount.text=this._bossData.boss_guild_hits.length+"人",this.txtHp.text=this._bossData.hp_rate+"/100",this.hpBar.scaleX=this._bossData.hp_rate/100,RoleModel.getInstance().getRoleCommon().level<this._bossVo.open_level?(this.btnGet.visible=!1,this.txtTips.text=this._bossVo.open_level+"级开启",this.tipGroup.visible=!0):RoleModel.getInstance().getRoleCommon().round<this._bossVo.open_round?(this.btnGet.visible=!1,this.txtTips.text=this._bossVo.open_round+"转开启",this.tipGroup.visible=!0):(this.btnGet.visible=!0,this.tipGroup.visible=!1),TimerManager.getInstance().remove(1e3,this.timeComplete,this),this._bossData.last_time>0?(this.btnGet.visible=!1,this.txtTime.text=TimeUtil.getTime2(this._bossData.last_time),TimerManager.getInstance().add(1e3,this.timeComplete,this)):this._bossData.hp_rate>0&&(this.btnGet.visible=!0,this.txtTime.text="")},n.timeComplete=function(){this._bossData.last_time--,this._bossData.last_time<=0?(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.txtTime.text="",this.btnGet.visible=!0):this.txtTime.text=TimeUtil.getTime2(this._bossData.last_time)},n.dispose=function(){TimerManager.getInstance().remove(1e3,this.timeComplete,this)},t}(eui.ItemRenderer);egret.registerClass(BossGuildItem,"BossGuildItem");var BossGuildView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/boss/BossGuildViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addGlobalEventListener(BossEvtName.CMD19400_UPDATE,this.updateData,this)},n.updateData=function(e){for(var t=BossModel.getInstance().getBossGuildList(),i=new eui.ArrayCollection,n=0;n<t.length;n++)i.addItem(t[n]);this.bossList.dataProvider=i,this._bossInfo=e.data;var s=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_19403).value);this.txtCount.text=this._bossInfo.bat_num+"/"+s,this._bossInfo.last_time>0?(this.txtTime.text="恢复时间："+TimeUtil.getTime(this._bossInfo.last_time),TimerManager.getInstance().remove(1e3,this.timeComplete,this),TimerManager.getInstance().add(1e3,this.timeComplete,this)):this.txtTime.text=""},n.timeComplete=function(){this._bossInfo.last_time--,this._bossInfo.last_time<=0?(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.txtTime.text=""):this.txtTime.text="恢复时间："+TimeUtil.getTime(this._bossInfo.last_time)},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(BossEvtName.CMD19400_UPDATE,this.updateData,this),this._bossInfo&&this._bossInfo.last_time>0&&TimerManager.getInstance().remove(1e3,this.timeComplete,this);for(var t=0;t<this.bossList.numChildren;t++){var i=this.bossList.getChildAt(t);i&&i.dispose()}},t}(BaseView);egret.registerClass(BossGuildView,"BossGuildView");var BossHitItem=function(e){function t(){e.call(this),this.skinName="resource/game_skins/boss/BossHitItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dataChanged=function(){this.txtRank.text=(this.itemIndex+1).toString(),this.txtName.text=this.data.name,this.txtValue.text=this.data.hit.toString()},t}(eui.ItemRenderer);egret.registerClass(BossHitItem,"BossHitItem");var BossHomeItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/boss/BossHomeItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiComplementHandler,e),e.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGetClick,e),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,e.updateCount,e),e.bmHead=new PicLoader,e.headGroup.addChild(e.bmHead),e.icon=new PicLoader,e.icon.x=450,e.icon.y=125,e.addChildAt(e.icon,e.getChildIndex(e.txtBack))},n.updateCount=function(){var e=this;e._itemId=e._bossTypeVo.con_item[0].info.template_id,e._backCount=GoodsListProxy.getInstance().findGoodNumber(e._itemId),e._tol=e._bossTypeVo.con_item[0].num,e.txtBack.text=e._backCount+"/"+e._tol},n.onGetClick=function(){var e=this;e._timeProp>0||e._backCount>=e._tol||VipModel.getInstance().getVIPLevel()>=e._bossTypeVo.vip?(BossModel.getInstance().BossID_home=e._bossVo.template_id,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.CMD20510,e._bossVo.template_id))):(Message.show("通行证不足"),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.OPEN_GETMATERIAL_BUY_WINDOW,{typeId:e._itemId,type:"bossHome",linkStrArr:[""]})))},n.dataChanged=function(){var e=this;e._bossVo=e.data,e.bmHead.load(UrlUtil.getBossHead(SceneModel.getInstance().getMonsterConfig(e._bossVo.boss_id).resID.toString())),e.txtName.text=e._bossVo.boss_name;for(var t,i=0;i<e._bossVo.itemList.length;i++)t=e["item_"+i],t.data=e._bossVo.itemList[i].info;if(e._bossData=BossModel.getInstance().getBossHomeDataById(e._bossVo.template_id),e.txtCount.text=e._bossData.hit_num+"人",e.txtOwn.text=e._bossData.own_name,e._bossTypeVo=BossModel.getInstance().getBossHomeTypeVo(e._bossVo.type),e.hpBar.scaleX=e._bossData.last_time/e._bossTypeVo.flee_cd,RoleModel.getInstance().getRoleCommon().level<e._bossVo.open_level?(e.btnGet.visible=!1,e.txtTips.text=e._bossVo.open_level+"级开启",e.tipGroup.visible=!0):RoleModel.getInstance().getRoleCommon().round<e._bossVo.open_round?(e.btnGet.visible=!1,e.txtTips.text=e._bossVo.open_round+"转开启",e.tipGroup.visible=!0):(e.btnGet.visible=!0,e.tipGroup.visible=!1),TimerManager.getInstance().remove(1e3,e.timeComplete,e),e._bossData.last_time>0)e.btnGet.visible=!0,TimerManager.getInstance().add(1e3,e.timeComplete,e),e.txtTime.visible=!1,e.txtHp.text=e._bossData.last_time+"秒后逃跑",e.img_go.visible=!1;else{e.btnGet.visible=!1;var n=RoleModel.getInstance().getServerDate().getMinutes();e.txtTime.text=Math.ceil((60-n)%(e._bossTypeVo.refresh_cd/60))+"分钟后刷新",e.txtTime.visible=!0,e.txtHp.text="",e.img_go.visible=!0}e.icon.load(UrlUtil.getSmallPic(e._bossTypeVo.con_item[0].info.pic)),e._bossTypeVo.vip>0&&VipModel.getInstance().getVIPLevel()<e._bossTypeVo.vip?(e.txtCon.text="VIP"+e._bossTypeVo.vip+"免费挑战",e.txtBack.visible=!0,e.icon.visible=!0):(e.txtCon.text="",e.txtBack.visible=!1,e.icon.visible=!1),e._timeProp=BossModel.getInstance().getBossHomeCDByType(e._bossVo.type),e._timeProp>0?(e.txtBack.visible=!1,e.icon.visible=!1,e.txtTimeProp.text="免费倒计时：\n"+TimeUtil.getTime2(e._timeProp),TimerManager.getInstance().add(1e3,e.timeCompleteProp,e)):e.txtTimeProp.text="",e.updateCount()},n.timeComplete=function(){var e=this;if(e._bossData.last_time--,e._bossData.last_time<=0)TimerManager.getInstance().remove(1e3,e.timeComplete,e),e.btnGet.visible=!1,e.txtHp.text="逃跑";else{var t=BossModel.getInstance().getBossHomeTypeVo(e._bossVo.type);e.hpBar.scaleX=e._bossData.last_time/t.flee_cd,e.txtHp.text=e._bossData.last_time+"秒后逃跑"}},n.timeCompleteProp=function(){var e=this;e._timeProp--,e._timeProp<=0?(TimerManager.getInstance().remove(1e3,this.timeCompleteProp,this),e.txtBack.visible=!0,e.icon.visible=!0,e.txtTimeProp.text=""):e.txtTimeProp.text="免费倒计时：\n"+TimeUtil.getTime2(e._timeProp)},n.dispose=function(){var e=this;TimerManager.getInstance().remove(1e3,this.timeComplete,this),TimerManager.getInstance().remove(1e3,this.timeCompleteProp,this),e.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onGetClick,e),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,e.updateCount,e),e.bmHead&&(e.bmHead.dispose(),e.bmHead=null),e.icon&&(e.icon.dispose(),e.icon=null)},t}(eui.ItemRenderer);egret.registerClass(BossHomeItem,"BossHomeItem");var BossHomeView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/boss/BossHomeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._bg=new PicLoader,this._bg.load("resource/assets/icon/boss/bossHomeBg.jpg"),this.addChildAt(this._bg,0);for(var e=BossModel.getInstance().getBossHomeTypeList(),t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this.bossList.dataProvider=t},n.dispose=function(){e.prototype.dispose.call(this),this._bg&&(this._bg.dispose(),this._bg=null)},t}(BaseView);egret.registerClass(BossHomeView,"BossHomeView");var BossItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/boss/BossItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.bmHead=new PicLoader,this.headGroup.addChild(this.bmHead)},n.onGetClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.BOSS_HOME_ITEM_CLICK,this._bossVo.template_id))},n.dataChanged=function(){this._bossVo=this.data,this.bmHead.load(UrlUtil.getBossHead(SceneModel.getInstance().getMonsterConfig(this._bossVo.boss_id).resID.toString())),this.txtName.text=this._bossVo.boss_name;for(var e,t=0;t<this._bossVo.itemList.length;t++)e=this["item_"+t],e.data=this._bossVo.itemList[t].info;if(this._bossData=BossModel.getInstance().getBossHomeDataById(this._bossVo.template_id),this.txtCount.text=this._bossData.hit_num+"人",this.txtOwn.text=this._bossData.own_name,this._bossTypeVo=BossModel.getInstance().getBossHomeTypeVo(this._bossVo.type),this.hpBar.scaleX=this._bossData.last_time/this._bossTypeVo.flee_cd,RoleModel.getInstance().getRoleCommon().level<this._bossVo.open_level?(this.btnGet.visible=!1,this.txtTips.text=this._bossVo.open_level+"级开启",this.tipGroup.visible=!0):RoleModel.getInstance().getRoleCommon().round<this._bossVo.open_round?(this.btnGet.visible=!1,this.txtTips.text=this._bossVo.open_round+"转开启",this.tipGroup.visible=!0):(this.btnGet.visible=!0,this.tipGroup.visible=!1),TimerManager.getInstance().remove(1e3,this.timeComplete,this),this._bossData.last_time>0)this.btnGet.visible=!0,TimerManager.getInstance().add(1e3,this.timeComplete,this),this.txtTime.visible=!1,this.txtHp.text=this._bossData.last_time+"秒后逃跑",this.img_go.visible=!1;else{this.btnGet.visible=!1;var i=RoleModel.getInstance().getServerDate().getMinutes();this.txtTime.text=Math.ceil((60-i)%(this._bossTypeVo.refresh_cd/60))+"分钟后刷新",this.txtTime.visible=!0,this.txtHp.text="",this.img_go.visible=!0}},n.timeComplete=function(){if(this._bossData.last_time--,this._bossData.last_time<=0)TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.btnGet.visible=!1,this.txtHp.text="逃跑";else{var e=BossModel.getInstance().getBossHomeTypeVo(this._bossVo.type);this.hpBar.scaleX=this._bossData.last_time/e.flee_cd,this.txtHp.text=this._bossData.last_time+"秒后逃跑"}},n.dispose=function(){TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.bmHead&&(this.bmHead.dispose(),this.bmHead=null)},t}(eui.ItemRenderer);egret.registerClass(BossItem,"BossItem");var BossListView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/boss/BossListViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addGlobalEventListener(BossEvtName.CMD20500_UPDATE,this.onUpdateData,this),this.addGlobalEventListener(BossEvtName.CMD20501_UPDATE,this.onUpdateBoss,this),this.txtClear.htmlText="<u>清除CD</u>",this.txtClear.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClear,this),ConfigManager.isTencent()?(this.txtClearShare.htmlText="<u>分享清除CD</u>",this.txtClearShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClearShare,this)):this.removeShareClear(),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.updateDaily(null)},n.updateDaily=function(e){var t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_20501);t>0&&this.removeShareClear()},n.removeShareClear=function(){this.txtClearShare.parent&&this.txtClearShare.parent.removeChild(this.txtClearShare)},n.onClearShare=function(e){ConfigManager.isTencent()&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FuLiEvtName.SHOW_SHARENEW_VIEW,ShareNewWindow.HOME_BOSS_CD))},n.onClear=function(){var e=this,t=Math.ceil(this._time/Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_20501).value));this.dispatchGlobalEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"",content:"是否花费"+t+"元宝清除CD",func:function(){RoleModel.getInstance().CheckGold(t)&&e.dispatchGlobalEvent(new ParamEvent(BossEvtName.CMD20520))}}))},n.onUpdateData=function(e){var t=this,i=e.data;t._time=i.last_time,TimerManager.getInstance().remove(1e3,t.timeComplete,t),t._time>0?(t.txtClear.visible=!0,t.txtClearShare.visible=!0,t.txtTime.text="我的挑战CD:"+TimeUtil.getTime2(t._time),TimerManager.getInstance().add(1e3,t.timeComplete,t)):(t.txtClear.visible=!1,t.txtClearShare.visible=!1,t.txtTime.text=""),t.onUpdateBoss()},n.timeComplete=function(){this._time--,this._time<=0?(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.txtClear.visible=!1,this.txtTime.text=""):this.txtTime.text="我的挑战CD:"+TimeUtil.getTime2(this._time)},n.onUpdateBoss=function(){for(var e=BossModel.getInstance().getBossHomeList(),t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this.bossList.dataProvider=t},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.removeGlobalEventListener(BossEvtName.CMD20500_UPDATE,this.onUpdateData,this),this.removeGlobalEventListener(BossEvtName.CMD20501_UPDATE,this.onUpdateBoss,this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.txtClear.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClear,this);for(var t=0;t<this.bossList.numChildren;t++){var i=this.bossList.getChildAt(t);i&&i.dispose()}},t}(BaseView);egret.registerClass(BossListView,"BossListView");var BossMainView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/boss/BossMainViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._arrImg=[];for(var e,t=1;6>t;t++)e=new PicLoader(PicLoader.MAPTILE),e.touchEnabled=!0,e.data=t,e.load("resource/assets/icon/boss/bossMain_"+t+".jpg",!0),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),e.y=150*(t-1),this.listGroup.addChild(e),this._arrImg.push(e)},n.onGetClick=function(e){var t=e.currentTarget;this.dispatchGlobalEvent(new ParamEvent(BossEvtName.OPEN_BOSS_WINDOW,Number(t.data)))},n.dispose=function(){e.prototype.dispose.call(this);for(var t,i=0;i<this._arrImg.length;i++)t=this._arrImg[i],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),t.dispose(),t=null;this._arrImg=null},t}(BaseView);egret.registerClass(BossMainView,"BossMainView");var BossMainWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/mainUI/MainUIBossBtnViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this)},n.onGetClick=function(){this.isPop=!1},n.setType=function(e){1==e?(this.win_bg.visible=!0,this.win_bg2.visible=!1,this.txtOpen.text=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.MEETBOSS).open_hook.toString()):(this.win_bg.visible=!1,this.win_bg2.visible=!0,this.txtOpen.text=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.MEETPLAYER).open_hook.toString())},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},t}(LayeroutWindow);egret.registerClass(BossMainWindow,"BossMainWindow");var BossPersonalItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/boss/BossPersonalItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnSao.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSaoClick,this),this.txtMonth.htmlText="<u>月卡可扫荡</u>",this.txtMonth.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMonthClick,this),this.bmHead=new PicLoader,this.headGroup.addChild(this.bmHead)},n.onGetClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.BOSS_CCMD13110,this._bossData.template_id))},n.onMonthClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(VipEvtName.OPEN_VIP_MONTH))},n.onSaoClick=function(){this.btnSao.enabled=!1,this.fubenBar.width=0,this.fubenBar.visible=!0,this.fubenBarBg.visible=!0,this._time=0,TimerManager.getInstance().remove(50,this.timeComplete,this),TimerManager.getInstance().add(50,this.timeComplete,this)},n.timeComplete=function(){this._time++,this.fubenBar.width=138*(this._time/20),this._time>=20&&(TimerManager.getInstance().remove(50,this.timeComplete,this),this.fubenBar.visible=!1,this.fubenBarBg.visible=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.BOSS_CCMD13112,this._bossData.template_id)))},n.dataChanged=function(){this._bossData=this.data;var e=UrlUtil.getBossHead(SceneModel.getInstance().getMonsterConfig(this._bossData.boss_id).resID.toString());this.bmHead.load(e),this.txtName.text=this._bossData.boss_name;for(var t,i=0;i<this._bossData.itemList.length;i++)t=this["item_"+i],t.data=this._bossData.itemList[i].info,t.num=this._bossData.itemList[i].num;var n=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_5,this._bossData.template_id),s=this._bossData.time-n,a=FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE5,this._bossData.template_id);this.txtCount.text=s+"次",this.btnSao.visible=!1,this.btnGet.enabled=!1,this.txtMonth.visible=!VipModel.getInstance().isMonth,VipModel.getInstance().isMonth&&s>0&&a>0?(this.btnSao.visible=!0,this.btnSao.enabled=!0,this.btnGet.enabled=!1):s>0&&(this.btnGet.enabled=!0),RoleModel.getInstance().getRoleCommon().level<this._bossData.open_level?(this.btnGet.visible=!1,this.txtTips.text=this._bossData.open_level+"级开启",this.tipGroup.visible=!0):RoleModel.getInstance().getRoleCommon().round<this._bossData.open_round?(this.btnGet.visible=!1,this.txtTips.text=this._bossData.open_round+"转开启",this.tipGroup.visible=!0):(this.btnGet.visible=!0,this.tipGroup.visible=!1)},t}(eui.ItemRenderer);egret.registerClass(BossPersonalItem,"BossPersonalItem");var BossPersonalView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/boss/BossPersonalViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._isInit||(this._isInit=!0,this.updateData()),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateData,this)},n.updateData=function(){if(this._isInit){for(var e=BossModel.getInstance().getBossPersonalList(),t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this.bossList.dataProvider=t}},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateData,this)},t}(BaseView);egret.registerClass(BossPersonalView,"BossPersonalView");var BossRightView=function(e){function t(){e.call(this),this._w=345,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/boss/BossRightViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._boxOthers.addEventListener(egret.Event.CHANGE,this.hideOthersHandler,this),this._boxRelive.addEventListener(egret.Event.CHANGE,this.autoReliveChangeHandler,this),this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this)},n.hideOthersHandler=function(e){SceneModel.getInstance().hideOhters=this._boxOthers.selected},n.autoReliveChangeHandler=function(e){ReliveModel.getInstance().isAuto=this._boxRelive.selected},n.onClickBtn=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.OPEN_BOSS_ROUND_REWARD))},n.showView=function(){var e=GameContent.stageWidth-this._w,t=850;this.x=e,this.y=t,GameContent.gameLayers.mainUILayer.addChild(this),this.visible=!0,this._btn.visible=SceneModel.getInstance().isRoundBoss()},n.onRemove=function(){e.prototype.onRemove.call(this),this.parent&&this.parent.removeChild(this),this._boxOthers.selected=!1,this._boxRelive.selected=!1},t}(BaseView);egret.registerClass(BossRightView,"BossRightView");var BossRoundHitRankWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/boss/BossRoundHitSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this)},n.updateData=function(e){var t=BossModel.getInstance().getRoundHitData(e);t.sort(function(e,t){return e.hit<t.hit?1:-1});for(var i=new eui.ArrayCollection,n=0;n<t.length;n++)i.addItem(t[n]);this.bossList.dataProvider=i},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this)},t}(LayeroutWindow);egret.registerClass(BossRoundHitRankWindow,"BossRoundHitRankWindow");var BossRoundItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/boss/BossRoundItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.txtRank.htmlText="<u>上次排名</u>",this.txtRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowRank,this),this.bmHead=new PicLoader,this.headGroup.addChild(this.bmHead)},n.onShowRank=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.OPEN_BOSS_ROUND_HIT,this._roundData.template_id))},n.dataChanged=function(){this._roundData=this.data,this.bmHead.load(UrlUtil.getBossHead(SceneModel.getInstance().getMonsterConfig(this._roundData.boss_id).resID.toString())),this.txtName.text=this._roundData.boss_name;for(var e,t=0;t<this._roundData.itemList.length;t++)e=this["item_"+t],e.data=this._roundData.itemList[t].info},n.dispose=function(){this.txtRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowRank,this);for(var e,t=0;t<this._roundData.itemList.length;t++)e=this["item_"+t],e.dispose(),e=null;this.parent.removeChild(this)},t}(eui.ItemRenderer);egret.registerClass(BossRoundItem,"BossRoundItem");var BossRoundRewardWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/boss/BossRoundRewardViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.BOSS,this.tabBar.dataProvider=new eui.ArrayCollection(["1-2转","3-4转","5-6转","7-12转"]),this._isInit||(this._isInit=!0,this.setSelectIndex())},n.onBarItemTap=function(e){this.setSelectIndex(this.tabBar.selectedIndex)},n.setSelectIndex=function(e){if(void 0===e&&(e=0),this._isInit){this.tabBar.selectedIndex=e;var t=BossModel.getInstance().getRoundVO(this.tabBar.selectedIndex+1);this.txtName.text=t.boss_name;for(var i,n,s=BossModel.getInstance().getRoundRewardVO(t.boss_id,1),a=1;5>a;a++){i=s[a-1];for(var o=0;4>o;o++)n=this["item_"+a+"_"+o],i.itemList[o]?(n.data=i.itemList[o].info,n.visible=!0):n.visible=!1}s=BossModel.getInstance().getRoundRewardVO(t.boss_id,2),this.item_kill.data=s[0].itemList[0].info,s=BossModel.getInstance().getRoundRewardVO(t.boss_id,3),this.item_luck.data=s[0].itemList[0].info}},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_boss_reward")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this);for(var t,i=1;5>i;i++)for(var n=0;4>n;n++)t=this["item_"+i+"_"+n],t.dispose(),t=null;this.item_kill.dispose(),this.item_kill=null,this.item_luck.dispose(),this.item_luck=null},t}(LayeroutWindow);egret.registerClass(BossRoundRewardWindow,"BossRoundRewardWindow");var BossRoundView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/boss/BossRoundViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.txtReward.htmlText="<u>查看奖励>></u>",this.txtReward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowReward,this);var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_14801).value.match(/\d+/g);this.txtTips.text="今天"+e[0]+":"+(0==Number(e[1])?"00":e[1])+"-"+e[3]+":"+(0==Number(e[4])?"00":e[4])+"开放转生BOSS挑战",this.updateData()},n.onShowReward=function(){this.dispatchGlobalEvent(new ParamEvent(BossEvtName.OPEN_BOSS_ROUND_REWARD))
},n.onGetClick=function(){this.dispatchGlobalEvent(new ParamEvent(BossEvtName.BOSS_CCMD14810))},n.updateData=function(){for(var e=1;5>e;e++)this["item_"+e].data=BossModel.getInstance().getRoundVO(e)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.txtReward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowReward,this);for(var t,i=1;5>i;i++)t=this["item_"+i],t.dispose(),t=null},t}(BaseView);egret.registerClass(BossRoundView,"BossRoundView");var BossShieldView=function(e){function t(){e.call(this),this._w=252,this._model=BossModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/boss/BossShieldViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){},n.showView=function(){var e=GameContent.stageWidth-this._w-60,t=260;this.x=e,this.y=t,this.onAdd(),GameContent.gameLayers.mainUILayer.addChild(this)},n.onAdd=function(){e.prototype.onAdd.call(this),this._model.addEventListener(BossModel.UPDATE_BOSS_DAMAGEINFO,this.updateBlood,this)},n.onRemove=function(){e.prototype.onRemove.call(this),this.parent&&this.parent.removeChild(this),this._model.removeEventListener(BossModel.UPDATE_BOSS_DAMAGEINFO,this.updateBlood,this)},n.updateBlood=function(e){var t=this._model.getBossDamageInfo();this._imageBlood.scaleX=t.shieldRate/100,this._txtValue.text=StringUtil.substitute("{0}%",t.shieldRate)},t}(BaseView);egret.registerClass(BossShieldView,"BossShieldView");var BossWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/boss/BossViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this);var t=this;t.resGroupName=GModuleResGroupName.BOSS,t.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onHelp,t),t.panelSkin.win_bg.height=810,t._btnCach=[],t.createIcons()},n.createIcons=function(){for(var e,t,i=this,n='<e:Skin class="skins.ButtonSkin" states="up,down" xmlns:e="http://ns.egret.com/eui">\n                <e:Image width="100%" height="100%"\n                         source="{0}"\n                         source.down="{0}"/>\n            </e:Skin>',s=0,a=0;7>a;a++)e=i._btnCach[a],e||(e=new CustomButton,e.addEventListener(egret.TouchEvent.TOUCH_TAP,i.clickIcon,i),i._btnCach.push(e)),e.data=a,e.x=100*s+20,e.y=15,t="resource/assets/icon/boss/bossBtn_"+a+".png",e.skinName=StringUtil.substitute(n,t),i._iconContainer.addChild(e),s++;i._iconContainer.addChild(i._selectImage),i.setSelectIndex()},n.clickIcon=function(e){var t=this,i=e.currentTarget;t.setSelectIndex(i.data)},n.setSelectIndex=function(e,t){var i=this;void 0===e&&(e=0),void 0===t&&(t=!1);var n=this;if(4==e&&RoleModel.getInstance().getRoleCommon().round<2&&VipModel.getInstance().getVIPLevel()<3)return void Message.show("2转或VIP3开启");var s=n._btnCach[e];if(n._selectImage.x=s.x-10,n._selectImage.y=s.y-17,t){var a=n._selectImage.x+100;this._timeId>0&&clearTimeout(this._timeId),this._timeId=setTimeout2(function(){i._scroller.validateNow(),a>i._scroller.width&&(i._scroller.viewport.scrollH=a-i._scroller.width)},500)}switch(n._curView&&n._curView.parent&&n._curView.parent.removeChild(n._curView),e){case-1:n._main||(n._main=new BossMainView),n._curView=n._main;break;case 0:n._personal||(n._personal=new BossPersonalView),n._personal.updateData(),n._curView=n._personal,n._helpType=HelpWindow.BOSS_Personal;break;case 1:n._all||(n._all=new BossAllView),n._all.updateData(),n._curView=n._all,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.BOSS_CCMD14400)),n._helpType=HelpWindow.BOSS_All;break;case 2:n._field||(n._field=new BossFieldView),n._curView=n._field,n.dispatchGlobalEvent(new ParamEvent(BossEvtName.CMD20700)),n._helpType=HelpWindow.BOSS_Field;break;case 3:n._list||(n._list=new BossListView),n._curView=n._list,n.dispatchGlobalEvent(new ParamEvent(BossEvtName.CMD20500)),n._helpType=HelpWindow.BOSS_Home;break;case 4:n._elite||(n._elite=new BossEliteView),n._curView=n._elite,n.dispatchGlobalEvent(new ParamEvent(BossEvtName.CMD20600)),n._helpType=HelpWindow.BOSS_Elite;break;case 5:null==n._guild&&(n._guild=new BossGuildView),n._curView=n._guild,n.dispatchGlobalEvent(new ParamEvent(BossEvtName.CMD19400)),n._helpType=HelpWindow.BOSS_Guild;break;case 6:n._round||(n._round=new BossRoundView),n._round.updateData(),n._curView=n._round,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.BOSS_CCMD14800)),n._helpType=HelpWindow.BOSS_Round}n._curView&&n.contentGroup.addChild(n._curView)},n.onHelp=function(e){var t=this;t.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,t._helpType))},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_boss")},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onHelp,t);for(var i,n=0;n<t._btnCach.length;n++)i=t._btnCach[n],i.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&i.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.clickIcon,t),i.dispose(),i=null;t._btnCach=null,this._personal&&(this._personal&&this._personal.parent&&this._personal.parent.removeChild(this._personal),this._personal.dispose(),this._personal=null),this._round&&(this._round&&this._round.parent&&this._round.parent.removeChild(this._round),this._round.dispose(),this._round=null),this._guild&&(this._guild&&this._guild.parent&&this._guild.parent.removeChild(this._guild),this._guild.dispose(),this._guild=null),this._main&&(this._main&&this._main.parent&&this._main.parent.removeChild(this._main),this._main.dispose(),this._main=null),this._home&&(this._home&&this._home.parent&&this._home.parent.removeChild(this._home),this._home.dispose(),this._home=null),this._field&&(this._field&&this._field.parent&&this._field.parent.removeChild(this._field),this._field.dispose(),this._field=null),this._elite&&(this._elite&&this._elite.parent&&this._elite.parent.removeChild(this._elite),this._elite.dispose(),this._elite=null),this._list&&(this._list&&this._list.parent&&this._list.parent.removeChild(this._list),this._list.dispose(),this._list=null),this._all&&(this._all&&this._all.parent&&this._all.parent.removeChild(this._all),this._all.dispose(),this._all=null)},t}(LayeroutWindow);egret.registerClass(BossWindow,"BossWindow");var MeetBossWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/boss/MeetBossWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.BOSS,this._btnChallenge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnBtn,this),this._isInit=!0,this._info&&this.setData(this._info)},n.OnBtn=function(e){SceneModel.getInstance().isHookSmall()?(this.dispatchGlobalEvent(new ParamEvent(BossEvtName.CHALLENGE_MEET_BOSS)),this.isPop=!1):Message.show("当前场景不能挑战遭遇BOSS")},n.setData=function(e){if(!this._isInit)return void(this._info=e);var t=BossModel.getInstance().getMeetBossConfig(e.template_id),i=SceneModel.getInstance().getMonsterConfig(t.bossID);this._txtBossName.text=i.name,this.createGoods(t.goodsList),this.addMonster(i.resID)},n.addMonster=function(e){this._monsterFigure=new MonsterFigure,this._monsterContainer.addChild(this._monsterFigure),this._monsterFigure.setRes(e)},n.createGoods=function(e){var t,i;this._itemCach=new Array;for(var n,s=0;s<e.length;s++)t=e[s],n=GoodsListProxy.getInstance().getGoodsInfoByType(t.asset_id),n.num=t.value,i=new GoodsItem,i.data=n,i.x=105*s+20,i.y=0,this._itemCach.push(i),this._goodsContainer.addChild(i)},n.clear=function(){for(var e,t=0;t<this._itemCach.length;t++)e=this._itemCach[t],this._goodsContainer.contains(e)&&this._goodsContainer.removeChild(e),e.dispose(),e=null;this._itemCach=null,this._monsterContainer.contains(this._monsterFigure)&&this._monsterContainer.removeChild(this._monsterFigure),this._monsterFigure.dispose(),this._monsterFigure=null},n.dispose=function(){e.prototype.dispose.call(this),this.clear()},t}(LayeroutWindow);egret.registerClass(MeetBossWindow,"MeetBossWindow");var BuildItem=function(e){function t(t,i,n){void 0===t&&(t=!1),void 0===i&&(i=!0),void 0===n&&(n=null),e.call(this,t,i,n),this.imageBottom=new CustomImage,this.imageBottom.horizontalCenter=0,this.imageBottom.y=15,this.addChild(this.imageBottom),this.showLv(!1),this._buildLevel=new CustomLabel,this._buildLevel.textColor=53800,this._buildLevel.size=20,this._buildLevel.textAlign="right",this._buildLevel.width=80,this._buildLevel.y=10,this.addChild(this._buildLevel)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},n.setImageBottomType=function(e){e<=GoodsType.EQUIP_NECKLACE&&e>=1?this.imageBottom.source="build_equipBottom_"+e:5==e||6==e?this.imageBottom.source="build_equipBottom_5":7==e||8==e?this.imageBottom.source="build_equipBottom_6":(this.imageBottom.source="build_equipBottom_"+e,this.imageBottom.x=-10,this.imageBottom.y=-5)},n.setBuildLevel=function(e){this._buildLevel.text="+"+e},n.clearCotent=function(){this.data=null,this.image.bitmapData=null,this.imageCareer.bitmapData=null,this.imageBorder.source=RES.getRes("itemBg"),this.txtLv.text="",this.num=0},n.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(GoodsItem);egret.registerClass(BuildItem,"BuildItem");var BuildRuneView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/build/BuildRuneViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this._pointArr=[];var e;this._itemArr=[];for(var t=7,i=1;8>=i;i++)e=this["item_"+i],e.setImageBottomType(i+39),e.setBuildLevel(0),this._itemArr.push(e),this._pointArr.push(new Point(e.x,e.y)),t--;this.proArr=[],this.iconArr=[];for(var n,s=0;4>s;s++)n=new PicLoader,n.x=195,n.y=315+30*s,this.addChild(n),this.iconArr[s]=n,this.proArr[s]=this["txtPro_"+s];this.txtlink.htmlText="<u>获得道具</u>",this.txtlink.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTxtLink,this),this.addGlobalEventListener(BuildEvtName.BUILD_CCMD11830_UPDATE,this.updateData,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toRune,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelp,this),this.addGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateCount,this)},n.setPlayerVo=function(e){this._playerVo=e,this.isShowEffect=!1,this.updateData()},n.openHelp=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.AWAKE_RUNE))},n.toRune=function(){this._tolCount>this._backCount?this.onTxtLink():(this.isShowEffect=!0,this.btnGet.enabled=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BuildEvtName.BUILD_CCMD11831,this._playerVo.parnerID)))},n.onTxtLink=function(){var e=new ParamEvent(EventName.OPEN_GETMATERIAL_BUY_WINDOW);e.data={typeId:12130001,type:"",linkStrArr:[]},this.dispatchGlobalEvent(e)},n.updateCount=function(){var e=BuildModel.getInstance().getRuneMinType(this._playerVo.parnerID),t=BuildModel.getInstance().getRuneLevelByType(e,this._playerVo.parnerID);this._tolCount=BuildModel.getInstance().getRuneCostCount(t+1),this._backCount=GoodsListProxy.getInstance().findGoodNumber(12130001);var i=this._backCount.toString();this._tolCount>this._backCount&&(i="<font color='#e31101'>"+this._backCount+"</font>"),this.txtCount.htmlText=i+"/"+this._tolCount},n.updateData=function(){this.isShowEffect&&EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("qianghua"),0,0,this);var e,t,i=0,n=BuildModel.getInstance().getRuneMinType(this._playerVo.parnerID),s=BuildModel.getInstance().getRuneLevelByType(n,this._playerVo.parnerID);this.updateCount(),this.updateFight(n,s);for(var a=0;a<this._itemArr.length;a++){e=this._itemArr[n-40],t=BuildModel.getInstance().getRuneLevelByType(n,this._playerVo.parnerID),e.setBuildLevel(t);var o=this._pointArr[a];egret.Tween.get(e).to({x:o.x,y:o.y},200).call(this.onComplete,this,[this.btnGet]),47==n?n=40:n++;var r=BuildModel.getInstance().getRuneVo(n,t);if(r){var h=new PropertyVO;h.setValue(r.att_id,r.stone_att),i+=PropertyUtil.calculateProFight(h)}}this.numFight.text=Math.floor(i).toString()},n.onComplete=function(e){e.enabled=!0},n.updateFight=function(e,t){var i=BuildModel.getInstance().getRuneVo(e,t),n=0,s="";0==t&&(s=EquipBasic.getProStr(BuildModel.getInstance().getRuneVo(e,1).att_id));for(var a,o=0,r=0;4>r;r++)i&&i.show[r]&&"0"!=i.show[r]?(n=Number(i.show[r]),a=GoodsListProxy.getInstance().getGoodsInfoByType(n),o=a.req_lv,s=EquipBasic.getProStr(i.att_id),this.iconArr[r].load("resource/assets/icon/smallPic/"+a.pic+".png"),this.iconArr[r].filters=[],this.proArr[r].htmlText="<font color='#00d228'>Lv"+o+"  "+s+"+"+i.show_att[r]+"</font>"):(this.proArr[r].text=s+"符文未激活",this.iconArr[r].load("resource/assets/icon/smallPic/12130001.png"),this.iconArr[r].filters=[Tools.GrayFilter])},n.dispose=function(){e.prototype.dispose.call(this),this._playerVo=null,this._pointArr=null,this.proArr=null,this.txtlink.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTxtLink,this),this.removeGlobalEventListener(BuildEvtName.BUILD_CCMD11830_UPDATE,this.updateData,this),this.removeGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateCount,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.toRune,this);for(var t=0;t<this.iconArr.length;t++)this.iconArr[t].filters=[];this.iconArr=null},t}(BaseView);egret.registerClass(BuildRuneView,"BuildRuneView");var BuildSoulView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/build/BuildSoulViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this._pointArr=[];var e;this._itemArr=[];for(var t=7,i=1;8>=i;i++)e=this["item_"+i],e.setImageBottomType(i),e.setBuildLevel(0),this._itemArr.push(e),this._pointArr.push(new Point(e.x,e.y)),t--;this.txtlink.htmlText="<u>获得道具</u>",this.txtlink.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTxtLink,this),this.addGlobalEventListener(BuildEvtName.BUILD_CCMD11820_UPDATE,this.updateData,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSoul,this)},n.setPlayerVo=function(e){this._playerVo=e,this.isShowEffect=!1,this.updateData()},n.updateData=function(){this.isShowEffect&&EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("qianghua"),0,0,this);var e,t,i,n=0,s=BuildModel.getInstance().getSoulMinType(this._playerVo.parnerID),a=BuildModel.getInstance().getSoulLevelByType(s,this._playerVo.parnerID);this.updateCount(a),this.updateFight(s,a);for(var o=0;o<this._itemArr.length;o++){t=this._itemArr[s-1],i=BuildModel.getInstance().getSoulLevelByType(s,this._playerVo.parnerID),t.setBuildLevel(i);var r=this._pointArr[o];egret.Tween.get(t).to({x:r.x,y:r.y},200).call(this.onComplete,this,[this.btnGet]),8==s?s=1:s++,e=new PropertyVO;for(var h=BuildModel.getInstance().getSoulVo(s),l=0,d=0,_=h;d<_.length;d++){var c=_[d];l=Math.floor(c.value1*i*c.value2),e.setValue(c.att_id,l)}n+=PropertyUtil.calculateProFight(e)}this.numFight.text=Math.floor(n).toString()},n.onComplete=function(e){e.enabled=!0},n.updateCount=function(e){this._tolCount=BuildModel.getInstance().getSoulTolCount(e),this._backCount=GoodsListProxy.getInstance().findGoodNumber(11020001);var t=this._backCount.toString();this._tolCount>this._backCount&&(t="<font color='#e31101'>"+this._backCount+"</font>"),this.txtCount.htmlText=t+"/"+this._tolCount},n.updateFight=function(e,t){var i=BuildModel.getInstance().getSoulVo(e),n=i[0],s=t+1;this.pro_1.text=BuildModel.getInstance().getSoulProStr(n,t),this.proNext_1.text=BuildModel.getInstance().getSoulProStr(n,s),2==i.length?(n=i[1],this.pro_2.visible=!0,this.iconUp_2.visible=!0,this.proNext_2.visible=!0,this.pro_2.text=BuildModel.getInstance().getSoulProStr(n,t),this.proNext_2.text=BuildModel.getInstance().getSoulProStr(n,s)):(this.pro_2.visible=!1,this.iconUp_2.visible=!1,this.proNext_2.visible=!1)},n.onSoul=function(){this._tolCount>this._backCount?this.onTxtLink():(this.isShowEffect=!0,this.btnGet.enabled=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BuildEvtName.BUILD_CCMD11821,this._playerVo.parnerID)))},n.onTxtLink=function(){var e=new ParamEvent(EventName.OPEN_GETMATERIAL_WINDOW);e.data={typeId:11020001,type:"soul",linkStrArr:["全民Boss"]},this.dispatchGlobalEvent(e)},n.dispose=function(){e.prototype.dispose.call(this),this._pointArr=null,this.txtlink.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTxtLink,this),this.removeGlobalEventListener(BuildEvtName.BUILD_CCMD11820_UPDATE,this.updateData,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSoul,this)},t}(BaseView);egret.registerClass(BuildSoulView,"BuildSoulView");var BuildStarView=function(e){function t(){e.call(this),this._type=1,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/build/BuildStarViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.txtDes.htmlText="升星降级（<font color='"+ColorUtil.COLOR_RED+"'>0级不降</font>）\n在公会BOSS场景被其他玩家杀死有概率导致升星降级，击杀者会获得对应数量的材料";var e;this._itemArr=[];for(var t=1;8>=t;t++)e=this["item_"+t],e.setImageBottomType(t),e.setBuildLevel(0),e.name="type_"+t,this._itemArr.push(e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),this._selectItem||(this._selectItem=e);this.addGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateCount,this),this.addGlobalEventListener(BuildEvtName.BUILD_CCMD21900_UPDATE,this.updateData,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStreng,this),this.updateGuildGuide()},n.onItemClick=function(e){this.onSelectItem(e.currentTarget)},n.onSelectItem=function(e){this._selectItem=e,this.img_select.x=e.x-20,this.img_select.y=e.y-20,this._type=Number(e.name.split("_")[1]),this.txtTitle.text=BuildModel.getInstance().getTypeStr(this._type)+"升星",this._lv=BuildModel.getInstance().getStarLevelByType(this._type,this._playerVo.parnerID),this.txtLv.text=this._lv.toString();var t=BuildModel.getInstance().getStarVo(this._type,this._lv);t?this.pro_1.text=t.attr_up/100+"%":this.pro_1.text="0%";var i=this._lv+1;t=BuildModel.getInstance().getStarVo(this._type,i),t?this.proNext_1.text=t.attr_up/100+"%":this.proNext_1.text="已满级",this.updateCount()},n.setPlayerVo=function(e){this._playerVo=e,this.isShowEffect=!1,this.updateData()},n.updateData=function(){this.isShowEffect&&EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("qianghua"),0,0,this),this.onSelectItem(this._selectItem);for(var e,t,i,n=0;8>n;n++)t=n+1,e=this._itemArr[n],i=BuildModel.getInstance().getStarLevelByType(t,this._playerVo.parnerID),e.setBuildLevel(i)},n.onComplete=function(e){e.enabled=!0},n.updateCount=function(){var e,t=BuildModel.getInstance().getStarVo(this._type,this._lv+1);t?(this._itemId=Number(t.con_item2[0].info.template_id),this.txtItem.text=t.con_item2[0].info.name+"：",this._tolCount=t.con_item2[0].num,this._backCount=GoodsListProxy.getInstance().findGoodNumber(this._itemId),e=ColorUtil.getColorHtmlStr(this._backCount+"/"+this._tolCount,this._tolCount>this._backCount?ColorUtil.COLOR_RED:ColorUtil.COLOR_GREEN),this.btnGet.enabled=!0,this.txtCost.text=t.con_coin.toString()):(this.btnGet.enabled=!1,e="已满级",this.txtCost.text="0"),this.txtCount.htmlText=e;for(var i,n,s,a=0,o=0,r=0,h=0,l=1;8>=l;l++)i=this["item_"+l],r=BuildModel.getInstance().getStarLevelByType(l,this._playerVo.parnerID),n=BuildModel.getInstance().getStarVo(l,r+1),s=!1,n&&(o=Number(n.con_item2[0].info.template_id),h=Number(n.con_item2[0].num),a=GoodsListProxy.getInstance().findGoodNumber(o),a>=h&&(s=!0)),i.showRedDot=s},n.onStreng=function(){if(this._tolCount>this._backCount){var e=new ParamEvent(EventName.OPEN_GETMATERIAL_WINDOW),t=[];t.push("<u><a href='event:0'>公会BOSS</a></u>"),e.data={typeId:this._itemId,type:GetMaterialItem.OPEN_BOSS,linkStrArr:t},this.dispatchGlobalEvent(e)}else RoleModel.getInstance().CheckCoin(Number(this.txtCost.text))&&(this.isShowEffect=!0,this.btnGet.enabled=!1,this.dispatchGlobalEvent(new ParamEvent(BuildEvtName.BUILD_CCMD21901,{id:this._playerVo.parnerID,type:this._type})),1==TaskModel.getInstance().isGuildGuide&&(TaskModel.getInstance().isGuildGuide=!1,NoviceGuideManager.getInstance().removeShadeTip()))},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(BuildEvtName.BUILD_CCMD21900_UPDATE,this.updateData,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStreng,this),this.removeGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateCount,this);for(var t,i=1;8>=i;i++)t=this["item_"+i],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),t.dispose(),t=null},n.updateGuildGuide=function(){var e=this;if(1==TaskModel.getInstance().isGuildGuide){var t=e.btnGet.parent.localToGlobal(e.btnGet.x+45,e.btnGet.y+120);NoviceGuideManager.getInstance().showShadeTip(e.btnGet,"点击进行升星",t,new egret.Point(t.x-20,t.y-85))}},t}(BaseView);egret.registerClass(BuildStarView,"BuildStarView");var BuildStoneView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/build/BuildStoneViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this._costIcon=new PicLoader,this._costIcon.x=225,this._costIcon.y=630,this._costIcon.load("resource/assets/icon/smallPic/12120001.png"),this.addChild(this._costIcon),this._pointArr=[];var e;this._itemArr=[];for(var t=7,i=1;8>=i;i++)e=this["item_"+i],e.setImageBottomType(i),e.setBuildLevel(0),this._itemArr.push(e),this._pointArr.push(new Point(e.x,e.y)),t--;this.proArr=[],this.iconArr=[];for(var n,s=0;4>s;s++)n=new PicLoader,n.x=195,n.y=315+30*s,this.addChild(n),this.iconArr[s]=n,this.proArr[s]=this["txtPro_"+s];this.txtlink.htmlText="<u>获得道具</u>",this.txtlink.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTxtLink,this),this.addGlobalEventListener(BuildEvtName.BUILD_CCMD11810_UPDATE,this.updateData,this),this.addGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updatePack,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStone,this)},n.setPlayerVo=function(e){this._playerVo=e,this.isShowEffect=!1,this.updateData()},n.updateData=function(){this.isShowEffect&&EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("qianghua"),0,0,this);var e,t,i=0,n=BuildModel.getInstance().getStoneMinType(this._playerVo.parnerID),s=BuildModel.getInstance().getStoneLevelByType(n,this._playerVo.parnerID);this.updatePack(),this.updateFight(n,s);for(var a=0;a<this._itemArr.length;a++){e=this._itemArr[n-1],t=BuildModel.getInstance().getStoneLevelByType(n,this._playerVo.parnerID),e.setBuildLevel(t);var o=this._pointArr[a];egret.Tween.get(e).to({x:o.x,y:o.y},200).call(this.onComplete,this,[this.btnGet]),8==n?n=1:n++;var r=BuildModel.getInstance().getStoneVo(n,t);if(r){var h=new PropertyVO;h.setValue(r.att_id,r.stone_att),i+=PropertyUtil.calculateProFight(h)}}this.numFight.text=Math.floor(i).toString()},n.onComplete=function(e){e.enabled=!0},n.updatePack=function(){var e=BuildModel.getInstance().getStoneMinType(this._playerVo.parnerID),t=BuildModel.getInstance().getStoneLevelByType(e,this._playerVo.parnerID),i=BuildModel.getInstance().getStoneVo(e,t+1);if(i){this._itemId=Number(i.con_item[0].info.template_id),this._tolCount=Number(i.con_item[0].num),this._backCount=GoodsListProxy.getInstance().findGoodNumber(this._itemId);var n=this._backCount.toString();this._tolCount>this._backCount&&(n="<font color='#e31101'>"+this._backCount+"</font>"),this.txtCount.htmlText=n+"/"+this._tolCount}},n.updateFight=function(e,t){var i=BuildModel.getInstance().getStoneVo(e,t),n=0,s="";0==t&&(s=EquipBasic.getProStr(BuildModel.getInstance().getStoneVo(e,1).att_id));for(var a,o=0,r=0;4>r;r++)i&&i.show[r]&&"0"!=i.show[r]?(n=Number(i.show[r]),a=GoodsListProxy.getInstance().getGoodsInfoByType(n),o=a.req_lv,s=EquipBasic.getProStr(i.att_id),this.iconArr[r].load("resource/assets/icon/smallPic/"+a.pic+".png"),this.iconArr[r].filters=[],this.proArr[r].htmlText="<font color='#00d228'>Lv"+o+"  "+s+"+"+i.show_att[r]+"</font>"):(this.proArr[r].text=s+"宝石未激活",this.iconArr[r].load("resource/assets/icon/smallPic/12120001.png"),this.iconArr[r].filters=[Tools.GrayFilter])},n.onStone=function(){this._tolCount>this._backCount?this.onTxtLink():(this.isShowEffect=!0,this.btnGet.enabled=!1,this.dispatchGlobalEvent(new ParamEvent(BuildEvtName.BUILD_CCMD11811,this._playerVo.parnerID)))},n.onTxtLink=function(){var e=new ParamEvent(EventName.OPEN_GETMATERIAL_BUY_WINDOW);e.data={typeId:this._itemId,type:"stone",linkStrArr:["材料副本"]},this.dispatchGlobalEvent(e)},n.dispose=function(){e.prototype.dispose.call(this),this._playerVo=null,this._pointArr=null,this.proArr=null,this.txtlink.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTxtLink,this),this.removeGlobalEventListener(BuildEvtName.BUILD_CCMD11810_UPDATE,this.updateData,this),this.removeGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updatePack,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStone,this);for(var t=0;t<this.iconArr.length;t++)this.iconArr[t].filters=[];this.iconArr=null,this._costIcon&&(this._costIcon.dispose(),this._costIcon=null)},t}(BaseView);egret.registerClass(BuildStoneView,"BuildStoneView");var BuildStrengthenView=function(e){function t(){e.call(this),this._isNovice=!0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/build/BuildStrengthenViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiComplementHandler,e),e._pointArr=[];var t;e._itemArr=[];for(var i=7,n=1;8>=n;n++)t=e["item_"+n],t.setImageBottomType(n),t.setBuildLevel(0),e._itemArr.push(t),e._pointArr.push(new Point(t.x,t.y)),i--;e.txtlink.htmlText="<u>获得道具</u>",e.txtlink.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTxtLink,e),e.addGlobalEventListener(BuildEvtName.BUILD_CCMD11800_UPDATE,e.updateData,e),e.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGet,e),e.btnGetAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGetAuto,e),e.btnStop.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onStop,e),e.addGlobalEventListener(EventName.UPDATE_GOODSITEM,e.updateCount,e)},n.setPlayerVo=function(e){var t=this;t._playerVo=e,t.isShowEffect=!1,t.updateData()},n.updateData=function(){var e=this;e.isShowEffect&&(e._effect&&(e._effect.dispose(),e._effect=null),e._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("qianghua"),0,0,e));var t,i,n=0,s=BuildModel.getInstance().getStrengMinType(e._playerVo.parnerID);e._minLv=BuildModel.getInstance().getStrengLevelByType(s,e._playerVo.parnerID);var a;e.updateCount(),e.updateFight(s,e._minLv);for(var o=0;o<e._itemArr.length;o++){i=e._itemArr[s-1],a=BuildModel.getInstance().getStrengLevelByType(s,e._playerVo.parnerID),i.setBuildLevel(a);var r=e._pointArr[o];if(egret.Tween.get(i).to({x:r.x,y:r.y},200).call(e.onComplete,e,[e.btnGet]),8==s?s=1:s++,a>0){t=new PropertyVO;for(var h=BuildModel.getInstance().getStrengVo(s),l=0,d=h;l<d.length;l++){var _=d[l];1==_.type?t.setValue(_.att_id,Math.floor((a*a+_.value1*a+_.value2)/_.value3)):t.setValue(_.att_id,Math.floor((a*a+_.value1*a+_.value2)*_.value3/_.value4))}n+=PropertyUtil.calculateProFight(t)}}e.numFight.text=Math.floor(n).toString(),this._isAuto?this.onGet():this._isAuto=!1},n.onComplete=function(e){this._isAuto||(this.btnGet.enabled=!0,this.btnGetAuto.enabled=!0,this.btnGetAuto.visible=!0,this.btnStop.visible=!1)},n.updateCount=function(){var e=this;e._tolCount=BuildModel.getInstance().getStrengthenTolCount(e._minLv),e._backCount=GoodsListProxy.getInstance().findGoodNumber(11010001);var t=e._backCount.toString();e._tolCount>e._backCount&&(t="<font color='#e31101'>"+e._backCount+"</font>"),e.txtCount.htmlText=t+"/"+e._tolCount},n.updateFight=function(e,t){var i=this,n=BuildModel.getInstance().getStrengVo(e),s=n[0],a=t+1;i.pro_1.text=BuildModel.getInstance().getStrengProStr(s,t),i.proNext_1.text=BuildModel.getInstance().getStrengProStr(s,a),2==n.length?(s=n[1],i.pro_2.visible=!0,i.iconUp_2.visible=!0,i.proNext_2.visible=!0,i.pro_2.text=BuildModel.getInstance().getStrengProStr(s,t),i.proNext_2.text=BuildModel.getInstance().getStrengProStr(s,a)):(i.pro_2.visible=!1,i.iconUp_2.visible=!1,i.proNext_2.visible=!1)},n.onGet=function(){var e=this;e._tolCount>e._backCount?e.onTxtLink():(e.isShowEffect=!0,e.btnGet.enabled=!1,this.btnGetAuto.enabled=!1,clearTimeout(this._timeIndex),this._timeIndex=setTimeout2(function(){e.dispatchGlobalEvent(new ParamEvent(BuildEvtName.BUILD_CCMD11801,e._playerVo.parnerID))},200)),e.dispatchGlobalEvent(new ParamEvent(EventName.GUILE_NEXT_BUILD_STRENGTHEN))},n.onGetAuto=function(){this.btnGet.enabled=!1,this.btnGetAuto.visible=!1,this.btnStop.visible=!0,this._isAuto=!0,this.onGet()},n.onStop=function(){this._isAuto=!1,this.btnGetAuto.visible=!0,this.btnStop.visible=!1},n.onTxtLink=function(){var e=this,t=new ParamEvent(EventName.OPEN_GETMATERIAL_WINDOW);t.data={typeId:11010001,type:"streng",linkStrArr:["回收装备"]},e.dispatchGlobalEvent(t)},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t._pointArr=null,t.removeGlobalEventListener(BuildEvtName.BUILD_CCMD11800_UPDATE,t.updateData,t),t.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onGet,t),t.btnGetAuto.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onGetAuto,t),t.btnStop.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onStop,t),t.txtlink.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onTxtLink,t),t.removeGlobalEventListener(EventName.UPDATE_GOODSITEM,t.updateCount,t),t._effect&&(t._effect.dispose(),t._effect=null)},n.updateGuide=function(){var e=this;if(0!=e._isNovice){e._isNovice=!1;var t=e.localToGlobal(e.btnGet.x+45,e.btnGet.y+120);NoviceGuideManager.getInstance().showShadeTip(e.btnGet,"点击进行强化",t,new egret.Point(t.x-20,t.y-85))}},n.getBtnStreng=function(){return this.btnGet},t}(BaseView);egret.registerClass(BuildStrengthenView,"BuildStrengthenView");var BuildWindow=function(e){function t(){e.call(this),this._isNovice=!0,this.isStep0ed=!1,this.skinName="resource/game_skins/build/BuildViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.BUILD,this.heroListTopBox=new HeroListTopBox,this.topContainer.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0,this.tabBar.dataProvider=new eui.ArrayCollection(["强化","宝石","注灵","升星","符文"]),this._isInit||(this._isInit=!0,this.tabBar.selectedIndex=0,this._playerVo=this.heroListTopBox.roleListData[0],this.setSelectIndex(0))},n.onBoxTap=function(e){e.data&&(this._playerVo=e.data,this.setSelectIndex(this.tabBar.selectedIndex))},n.onBarItemTap=function(e){this.setSelectIndex(this.tabBar.selectedIndex)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.addGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updatePack,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.updatePack,this),this.addGlobalEventListener(EventName.GUILE_NEXT_BUILD_STRENGTHEN,this.nextGuile,this),this.guideBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this),this.updatePack(),this.updateGuildGuide()
},n.dispose=function(){e.prototype.dispose.call(this),this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null,this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.removeGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updatePack,this),RoleModel.getInstance().removeEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.updatePack,this),this.removeGlobalEventListener(EventName.GUILE_NEXT_BUILD_STRENGTHEN,this.nextGuile,this),this.guideBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this),this._strengthen&&(this._strengthen.parent&&this._strengthen.parent.removeChild(this._strengthen),this._strengthen.dispose(),this._strengthen=null),this._stone&&(this._stone.parent&&this._stone.parent.removeChild(this._stone),this._stone.dispose(),this._stone=null),this._soul&&(this._soul.parent&&this._soul.parent.removeChild(this._soul),this._soul.dispose(),this._soul=null),this._star&&(this._star.parent&&this._star.parent.removeChild(this._star),this._star.dispose(),this._star=null),this._rune&&(this._rune.parent&&this._rune.parent.removeChild(this._rune),this._rune.dispose(),this._rune=null),NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip()},n.setSelectIndex=function(e){if(void 0===e&&(e=0),this._isInit){if(4==e&&RoleModel.getInstance().getRoleCommon().round<6)return void Message.show("符文6转开启");switch(this.tabBar.selectedIndex=e,this._curView&&this._curView.parent&&this._curView.parent.removeChild(this._curView),this._strengthen&&this._strengthen.onStop(),e){case 0:this._strengthen||(this._strengthen=new BuildStrengthenView),this._curView=this._strengthen,this._strengthen.setPlayerVo(this._playerVo),this.updateGuide();break;case 1:this._stone||(this._stone=new BuildStoneView),this._curView=this._stone,this._stone.setPlayerVo(this._playerVo);break;case 2:this._soul||(this._soul=new BuildSoulView),this._curView=this._soul,this._soul.setPlayerVo(this._playerVo);break;case 3:this._star||(this._star=new BuildStarView),this._curView=this._star,this._star.setPlayerVo(this._playerVo);break;case 4:this._rune||(this._rune=new BuildRuneView),this._curView=this._rune,this._rune.setPlayerVo(this._playerVo)}this._curView&&this.viewContainer.addChild(this._curView),this.onShowRedDots()}},n.onShowRedDots=function(){switch(this.tabBar.selectedIndex){case 0:this.heroListTopBox.updateStrengRedDots();break;case 1:this.heroListTopBox.updateStoneRedDots();break;case 2:this.heroListTopBox.updateSoulRedDots();break;case 3:this.heroListTopBox.updateStarRedDots();break;case 4:this.heroListTopBox.updateRuneRedDots()}},n.updatePack=function(){this.onShowRedDots(),this.tabBar.validateNow(),this.tabBar.getChildAt(0)&&(this.tabBar.getChildAt(0).showRedDot=BuildModel.getInstance().isStrengthenUpgradeAll),this.tabBar.getChildAt(1)&&(this.tabBar.getChildAt(1).showRedDot=BuildModel.getInstance().isStoneUpgradeAll),this.tabBar.getChildAt(2)&&(this.tabBar.getChildAt(2).showRedDot=BuildModel.getInstance().isSoulUpgradeAll),this.tabBar.getChildAt(3)&&(this.tabBar.getChildAt(3).showRedDot=BuildModel.getInstance().isStarUpgradeAll),this.tabBar.getChildAt(4)&&(this.tabBar.getChildAt(4).showRedDot=BuildModel.getInstance().isRuneUpgradeAll)},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_build")},n.onCloseBtnClick=function(t){e.prototype.onCloseBtnClick.call(this,t),this.getBtnReturn()&&(this.getBtnReturn().visible=!0),this.guideBtn.visible=!1,NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip(),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.GUILE_END))},n.nextGuile=function(e){NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip(),this.updateGuide(1)},n.updateGuide=function(e){if(void 0===e&&(e=0),this._isNovice&&1==NoviceGuideManager.getInstance().strenGuild){var t=TaskModel.getInstance().getCurNoviceTask();if(null==t)return;if(t.xs!=NoviceGuideType.GuideBuildStrengthenTips)return;if(1==e){this._isNovice=!1;var i=this.localToGlobal(this.guideBtn.x,this.guideBtn.y);this.getBtnReturn().visible=!1,this.guideBtn.visible=!0,NoviceGuideManager.getInstance().showShadeTip(this.guideBtn,"点击关闭",i,new egret.Point(i.x-42,i.y-68)),NoviceGuideManager.getInstance().strenGuild=!1}else if(0==this.isStep0ed){var i=this._strengthen.localToGlobal(this._strengthen.getBtnStreng().x+45,this._strengthen.getBtnStreng().y+120);NoviceGuideManager.getInstance().showShadeTip(this._strengthen.getBtnStreng(),"点击强化",i,new egret.Point(i.x-20,i.y-85)),this.isStep0ed=!0}}},n.updateGuildGuide=function(){var e=this;if(1==TaskModel.getInstance().isGuildGuide){var t=e.tabBar.getChildAt(3),i=t.parent.localToGlobal(t.x+15,t.y+30);null==e._tempBtn&&(e._tempBtn=new CustomItemRenderer,e._tempBtn.width=94,e._tempBtn.height=60,e._tempBtn.skinName="CustomTabItemSkinSkin",e._tempBtn.data="升星",e._tempBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.clickTempBtn,e)),NoviceGuideManager.getInstance().showShadeTip(e._tempBtn,"点击升星",new Point(i.x-5,i.y+14),new egret.Point(i.x-42,i.y-68))}},n.clickTempBtn=function(e){var t=this;t._tempBtn&&(t._tempBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.clickTempBtn,t),t._tempBtn.parent&&t._tempBtn.parent.removeChild(t._tempBtn),NoviceGuideManager.getInstance().removeShadeTip()),t.setSelectIndex(3)},t}(LayeroutWindow);egret.registerClass(BuildWindow,"BuildWindow");var ChargeItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/charge/ChargeItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this._btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._imageGoldType=new PicLoader,this.addChild(this._imageGoldType),this._imageGoldType.x=20,this._imageGoldType.y=6,this._imageType=new PicLoader,this.addChild(this._imageType),this._imageType.x=3,this._imageType.y=2},s.onOkHandler=function(){if(ConfigManager.isTencent()){var e=this._vo.android_id;ConfigManager.isIOS()&&(e=this._vo.ios_id),QQManager.getInstance().QQBuyGoods(e)}else{var t=Number(this._vo.num)/5e3;PhpHttpStatisticsManager.requestChargeOrder(1,t,1,"元宝",1)}},s.setData=function(e){this._vo=e,this._imageType.load(UrlUtil.getChargeURL("type_1")),this._imageGold.source=UrlUtil.getSmallPic(2),this._txtDesc.text=Number(this._vo.num)/5e3+"元="+this._vo.num+"元宝，首充送"+Number(this._vo.res_num)+"元宝",this._imageGoldType.load(UrlUtil.getChargeURL("gold_"+this._vo.template_id)),this._imageGold.x=this._txtDesc.x+this._txtDesc.textWidth+5;var t=Tools.convertNumber(Number(this._vo.num)/5e3);this._btnOk.label=t+"元",this._txtCount.text=2*Number(this._vo.num)+""},s.updateInfo=function(){var e=ChargeModel.getInstance().getServerNode(this._vo.template_id);e&&(0==e.flag?(this._imageType.load(UrlUtil.getChargeURL("type_1")),this._txtDesc.text=Number(this._vo.num)/5e3+"元="+this._vo.num+"元宝，首充送"+Number(this._vo.res_num)+"元宝",this._imageGold.x=this._txtDesc.x+this._txtDesc.textWidth+5,this._txtCount.text=2*Number(this._vo.num)+""):(this._imageType.load(UrlUtil.getChargeURL("type_2")),this._txtDesc.text=Number(this._vo.num)/5e3+"元="+this._vo.num+"元宝",this._imageGold.x=this._txtDesc.x+this._txtDesc.textWidth+5,this._txtCount.text=Number(this._vo.num)+""))},s.dispose=function(){this.parent&&this.parent.removeChild(this),this._imageType&&(this._imageType.dispose(),this._imageType=null),this._imageGoldType&&(this._imageGoldType.dispose(),this._imageGoldType=null)},i(s,"height",function(){return 112}),t}(Csprite);egret.registerClass(ChargeItem,"ChargeItem");var ChargeView=function(e){function t(){e.call(this),this._itemArr=[],this.skinName="resource/game_skins/charge/ChargeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this._imageBg.source=UrlUtil.getChargeURL("bg"),this.setImageWindowTitle("charge_title"),this._txtLink.htmlText="<u><a href = 'event:2'>前往分享可获得免费元宝</a></u>"},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this);for(var t,i=ChargeModel.getInstance().getDataList(),n=0,s=0;s<i.length;s++){var a=i[s].res_num;10>a&&!ChargeModel.getInstance().isShowTest||ConfigManager.isTencent()&&a>5e4||(t=new ChargeItem,this._itemContainer.addChild(t),this._itemArr.push(t),t.y=n*t.height,t.setData(i[s]),n++)}this.dispatchGlobalEvent(new ParamEvent(EventName.REQUEST_CHARGET_DOUBLE)),this._txtLink.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this.addGlobalEventListener(EventName.UPDATE_CHARGET_DOUBLE_INFO,this.updateInfoHandler,this)},n.onCloseHandler=function(){for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t.dispose(),t=null;this._itemArr=[],this._txtLink.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this.removeGlobalEventListener(EventName.UPDATE_CHARGET_DOUBLE_INFO,this.updateInfoHandler,this),e.prototype.onCloseHandler.call(this)},n.onTxtLinkHandler=function(){this.dispatchGlobalEvent(new ParamEvent(ShareEvtName.SHARE_WINDOW_OPEN))},n.updateInfoHandler=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e.updateInfo()},t}(LayeroutWindow);egret.registerClass(ChargeView,"ChargeView");var ChatItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/chat/ChatItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.head.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowMenu,this)},n.onShowMenu=function(e){e.stopPropagation();var t=FriendMenuView.getInstance();t.updateData(this._chatData.role_id),t.x=e.stageX,t.y=e.stageY,GameContent.gameLayers.windowLayer.addChild(t)},n.dataChanged=function(){this._chatData=this.data,this._chatData.content=ChatModel.getInstance().filtetSpecialChar(this._chatData.content),this.txtContent.htmlText=this._chatData.content,this.head.setHeadURLByPartner(this._chatData.icon);var e=0;if(this._chatData.king_lv>0){var t=KingModel.getInstance().getKingVo(this._chatData.king_lv);e=t.type}this.head.setHeadKingBg(e),this.iconVip.x=this.viplife.x,this.vipMonth.x=this.viplife.x,this._chatData.life_vip>0?(this.viplife.visible=!0,this.txtName.x=this.vipMonth.x,this.txtName.htmlText="<font color='"+ColorUtil.COLOR_GOLD+"'>"+this._chatData.name+"</font>",this.iconVip.x=this.viplife.x+40,this.vipMonth.x=this.viplife.x+40,this.txtName.x=this.viplife.x+40):(this.viplife.visible=!1,999==this._chatData.icon?this.txtName.htmlText="<font color='#ae58ca'>"+this._chatData.name+"</font>":this.txtName.htmlText="<font color='"+ColorUtil.COLOR_BLUE+"'>"+this._chatData.name+"</font>"),this._chatData.month_vip>0?(this.vipMonth.visible=!0,this.iconVip.x=this.vipMonth.x+25,this.txtName.x=this.vipMonth.x+25):this.vipMonth.visible=!1,this._chatData.vip>0?(this.vipNum.text=this._chatData.vip.toString(),this.vipNum.visible=!0,this.iconVip.visible=!0,this._chatData.vip>=6?(this._itemBg||(this._itemBg=new PicLoader),this._itemBg.load("resource/assets/icon/chat/chatItemBg_vip"+this._chatData.vip+".png"),this.addChildAt(this._itemBg,0)):this._itemBg&&this._itemBg.parent&&this._itemBg.parent.removeChild(this._itemBg),this.txtName.x=this.iconVip.x+52):(this.vipNum.visible=!1,this.iconVip.visible=!1,this._itemBg&&this._itemBg.parent&&this._itemBg.parent.removeChild(this._itemBg)),1==this._chatData.kf_bugle&&(this._itemBg||(this._itemBg=new PicLoader),this._itemBg.load("resource/assets/icon/chat/chatItemBg_laba.png"),this.addChildAt(this._itemBg,0)),this.vipNum.x=this.iconVip.x+22},t}(eui.ItemRenderer);egret.registerClass(ChatItem,"ChatItem");var ChatItemGuild=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/chat/ChatItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.head.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowMenu,this)},n.onShowMenu=function(){if(this._chatData.role_id!=RoleModel.getInstance().getRoleBaseInfo().id){var e=FriendMenuView.getInstance();e.updateData(this._chatData.role_id),e.x=this.head.x+30,e.y=this.head.y+30,this.addChild(e)}},n.dataChanged=function(){this._chatData=this.data,this.txtName.text=this._chatData.name,this.txtContent.text=this._chatData.content,this.head.setHeadURLByPartner(this._chatData.icon),this.txtName.x=120},t}(eui.ItemRenderer);egret.registerClass(ChatItemGuild,"ChatItemGuild");var ChatItemSys=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/chat/ChatSysItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.txtContent.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this)},n.onTxtLinkHandler=function(e){if(e.text){var t=e.text.split(",");TaskModel.getInstance().getTaskOpen(t[0],Number(t[1]))}},n.dataChanged=function(){this._chatData=this.data,this.txtContent.htmlText=this._chatData.content},t}(eui.ItemRenderer);egret.registerClass(ChatItemSys,"ChatItemSys");var ChatLabaWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/chat/ChatLabaWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_chat_laba"),this.txtBuy.htmlText="<u>快速购买大喇叭</u>",this.updateCount()},n.onSend=function(){if(""!=this.txtContent.text){var e=this.txtContent.text,t=0==e.indexOf("@");t||(e=FilterText.getInstance().getFilterStr(e)),Number(this.txtCount.text)<=0?this.onBuy():(PhpHttpStatisticsManager.sendChat(e,4),this.dispatchGlobalEvent(new ParamEvent(ChatEvtName.CHAT_CCMD11620,e)),this.txtContent.text="",this.isPop=!1)}},n.onBuy=function(){var e=new ParamEvent(EventName.OPEN_GETMATERIAL_BUY_WINDOW);e.data={typeId:13120001,type:"chat",linkStrArr:["跨服喇叭"]},this.dispatchGlobalEvent(e)},n.updateCount=function(){this.txtCount.text=GoodsListProxy.getInstance().findGoodNumber(13120001).toString()},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnSend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSend,this),this.txtBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.addGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateCount,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnSend.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSend,this),this.txtBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.removeGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateCount,this)},t}(LayeroutWindow);egret.registerClass(ChatLabaWindow,"ChatLabaWindow");var ChatMainUIItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/chat/ChatMainUIItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.txtContent.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this)},n.onTxtLinkHandler=function(e){if(e.text){var t=e.text.split(",");TaskModel.getInstance().getTaskOpen(t[0],Number(t[1]))}},n.dataChanged=function(){this.data&&(this.txtContent.htmlText=this.data)},t}(eui.ItemRenderer);egret.registerClass(ChatMainUIItem,"ChatMainUIItem");var ChatMainUIView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/chat/ChatMainUISkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this._dataArr=[],this.addGlobalEventListener(ChatEvtName.CHAT_SCMD11600_UPDATE,this.updateWorld,this),this.addGlobalEventListener(ChatEvtName.CHAT_SCMD11601_UPDATE,this.updateGuild,this),this.addGlobalEventListener(ChatEvtName.CHAT_SCMD11603_UPDATE,this.updateSystemData,this),this.updateWorld(),this.updateGuild(),this.updateSystemData()},n.updateWorld=function(e){void 0===e&&(e=null);var t;t=e?e.data:ChatModel.getInstance().getWorldData();var i;for(var n in t)if(t.hasOwnProperty(n)){if(i=t[n],FriendModel.getInstance().checkIsBlack(i.role_id))return;this._dataArr.push({content:"<font color='"+ColorUtil.COLOR_PURPLE+"'>[世界] </font><font color='"+ColorUtil.COLOR_BLUE+"'>["+i.name+"]</font>:"+i.content,time:i.ctime})}this.updateList()},n.updateGuild=function(e){void 0===e&&(e=null);var t;t=e?e.data:ChatModel.getInstance().getGuildData();var i;for(var n in t)if(t.hasOwnProperty(n)){if(i=t[n],FriendModel.getInstance().checkIsBlack(i.role_id))return;this._dataArr.push({content:"<font color='"+ColorUtil.COLOR_GREEN+"'>[公会] </font><font color='"+ColorUtil.COLOR_BLUE+"'>["+i.name+"]</font>:"+i.content,time:i.ctime})}this.updateList()},n.updateSystemData=function(e){void 0===e&&(e=null);var t;t=e?e.data:ChatModel.getInstance().getSystemData();var i;for(var n in t)t.hasOwnProperty(n)&&(i=t[n],this._dataArr.push({content:"<font color='"+ColorUtil.COLOR_GOLD+"'>[系统]</font>"+i.content,time:i.ctime}));this.updateList()},n.updateList=function(){var e=this;this._dataArr.sort(function(e,t){return Number(e.time)>Number(t.time)?1:-1});for(var t=new eui.ArrayCollection,i=0;i<this._dataArr.length;i++)t.addItem(this._dataArr[i].content);this.chatList.dataProvider=t,this._timeId>0&&clearTimeout(this._timeId),this._timeId=setTimeout2(function(){e.chatList.contentHeight>e.chatScroller.height&&(e.chatScroller.viewport.scrollV=e.chatList.contentHeight-e.chatScroller.height)},500)},n.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this._dataArr=null,this.removeGlobalEventListener(ChatEvtName.CHAT_SCMD11600_UPDATE,this.updateWorld,this),this.removeGlobalEventListener(ChatEvtName.CHAT_SCMD11601_UPDATE,this.updateGuild,this),this.removeGlobalEventListener(ChatEvtName.CHAT_SCMD11603_UPDATE,this.updateSystemData,this)},t}(BaseView);egret.registerClass(ChatMainUIView,"ChatMainUIView");var ChatWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/chat/ChatViewSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.CHAT,this._worldArr=new eui.ArrayCollection,this._guildArr=new eui.ArrayCollection,this._systemArr=new eui.ArrayCollection,ConfigManager.isb7724()?this.tabBar.dataProvider=new eui.ArrayCollection(["世界","公会","系统"]):this.tabBar.dataProvider=new eui.ArrayCollection(["世界","公会","系统","客服"]),this.tabBar.selectedIndex=0,this.btnLaba.visible=KuaFuModel.getInstance().isKuaFu&&RoleModel.getInstance().getRoleCommon().round>=2},n.onTap=function(e){this.dispatchGlobalEvent(new ParamEvent(FriendEvtName.FRIEND_MENU_CLOSE))},n.updateBlackList=function(){this.showWorld(),this.showGuild()},n.addJBYXPic=function(){if(ConfigManager.isyxjinbang()){if(null==this._JBYXPic){this._JBYXPic=new PicLoader(PicLoader.MAPTILE),this._JBYXPic.x=15,this._JBYXPic.y=65;var e=UrlUtil.getOtherIcon("JBYXERWEIMA","jpg");this._JBYXPic.load(e)}this.panelSkin.addChild(this._JBYXPic)}},n.removeJBYXPic=function(){this._JBYXPic&&this.panelSkin.contains(this._JBYXPic)&&this.panelSkin.removeChild(this._JBYXPic)},n.updateWorld=function(e){var t;for(var i in e.data)if(e.data.hasOwnProperty(i)){if(t=e.data[i],FriendModel.getInstance().checkIsBlack(t.role_id))return;this._worldArr.addItem(t)}this.updateDateNow()},n.updateGuild=function(e){var t;for(var i in e.data)if(e.data.hasOwnProperty(i)){if(t=e.data[i],FriendModel.getInstance().checkIsBlack(t.role_id))return;this._guildArr.addItem(t)}this.updateDateNow()},n.updateSystemData=function(e){var t;for(var i in e.data)e.data.hasOwnProperty(i)&&(t=e.data[i],this._systemArr.addItem(t));this.updateDateNow()},n.onSend=function(){var e=this;if(!ConfigManager.isDevServer&&RoleModel.getInstance().getRoleCommon().level<60&&!ConfigManager.isGMOpen)return void Message.show("60级开启发言");if(""!=e.txtInput.text){var t=e.txtInput.text;if(!ConfigManager.isDevServer&&!ConfigManager.isGMOpen||!TestManager.getInstance().checkIsTest(t)){var i=0==t.indexOf("@");i||(t=FilterText.getInstance().getFilterStr(t)),0==e.tabBar.selectedIndex?(PhpHttpStatisticsManager.sendChat(t,2),e.dispatchGlobalEvent(new ParamEvent(ChatEvtName.CHAT_CCMD11600,t))):1==e.tabBar.selectedIndex&&(PhpHttpStatisticsManager.sendChat(t,3),e.dispatchGlobalEvent(new ParamEvent(ChatEvtName.CHAT_CCMD11601,t))),e.txtInput.text="",e.btnSend.enabled=!1,e._time=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_26).value),e.txtTime.text=e._time+"",TimerManager.getInstance().add(1e3,e.timeComplete,e)}}},n.timeComplete=function(){var e=this;e._time--,e._time<=0?(TimerManager.getInstance().remove(1e3,this.timeComplete,e),e.txtTime.text="",e.btnSend.enabled=!0):e.txtTime.text=e._time+""},n.onGm=function(){var e=this;if(""!=this.txtGm.text){FilterText.getInstance().getFilterStr(this.txtGm.text);PhpHttpStatisticsManager.sendGM(this.txtGm.text),this.txtGm.text="",this.btnGm.enabled=!1,this._timeIdGM>0&&clearTimeout(this._timeIdGM),this._timeIdGM=setTimeout2(function(){e.btnGm.enabled=!0},1e4)}},n.onLaba=function(){this.dispatchGlobalEvent(new ParamEvent(ChatEvtName.CHAT_SHOW_LABA))},n.onBarItemTap=function(e){this.setIndex(this.tabBar.selectedIndex)},n.setIndex=function(e){if(void 0===e&&(e=0),1==e&&0==RoleModel.getInstance().getRoleCommon().guild_id)return void Message.show("还没有加入公会");switch(this.tabBar.selectedIndex=e,this.txtSysTips.visible=!1,this.txtInput.visible=!1,this.txtBg.visible=!1,this.btnSend.visible=!1,this.chatGroup.visible=!1,this.gmGroup.visible=!1,this.removeJBYXPic(),this.chatScroller.viewport.scrollV=0,e){case 0:this.chatList.itemRenderer=ChatItem,this.showWorld(),this.txtInput.visible=!0,this.txtBg.visible=!0,this.btnSend.visible=!0,this.chatGroup.visible=!0;break;case 1:this.chatList.itemRenderer=ChatItemGuild,this.showGuild(),this.txtInput.visible=!0,this.txtBg.visible=!0,this.btnSend.visible=!0,this.chatGroup.visible=!0;break;case 2:this.chatList.itemRenderer=ChatItemSys,this.showSys(),this.txtSysTips.visible=!0,this.chatGroup.visible=!0;break;case 3:ConfigManager.isyxjinbang()?this.addJBYXPic():this.gmGroup.visible=!0}},n.showWorld=function(){var e,t=ChatModel.getInstance().getWorldData();this._worldArr=new eui.ArrayCollection;for(var i=t.length>50?50:t.length,n=0;i>n;n++)e=t[n],FriendModel.getInstance().checkIsBlack(e.role_id)||this._worldArr.addItem(e);this.updateDateNow()},n.showGuild=function(){var e,t=ChatModel.getInstance().getGuildData();this._guildArr=new eui.ArrayCollection;for(var i=t.length>50?50:t.length,n=0;i>n;n++)e=t[n],FriendModel.getInstance().checkIsBlack(e.role_id)||this._guildArr.addItem(e);this.updateDateNow()},n.showSys=function(){var e,t=ChatModel.getInstance().getSystemData();this._systemArr=new eui.ArrayCollection;for(var i=0;i<t.length;i++)e=t[i],this._systemArr.addItem(e);this.updateDateNow()},n.updateDateNow=function(){var e=this;0==this.tabBar.selectedIndex?this.chatList.dataProvider=this._worldArr:1==this.tabBar.selectedIndex?this.chatList.dataProvider=this._guildArr:2==this.tabBar.selectedIndex&&(this.chatList.dataProvider=this._systemArr),this._timeId>0&&clearTimeout(this._timeId),this._timeId=setTimeout2(function(){e.chatList.validateNow(),e.chatList.contentHeight>e.chatScroller.height&&(e.chatScroller.viewport.scrollV=e.chatList.contentHeight-e.chatScroller.height)},500)},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_chat")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.addGlobalEventListener(ChatEvtName.CHAT_SCMD11600_UPDATE,this.updateWorld,this),this.addGlobalEventListener(ChatEvtName.CHAT_SCMD11601_UPDATE,this.updateGuild,this),this.addGlobalEventListener(ChatEvtName.CHAT_SCMD11603_UPDATE,this.updateSystemData,this),this.addGlobalEventListener(FriendEvtName.FRIEND_CCMD11701_UPDATE,this.updateBlackList,this),this.btnSend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSend,this),this.btnGm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGm,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btnLaba.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLaba,this)},n.dispose=function(){e.prototype.dispose.call(this),this.dispatchGlobalEvent(new ParamEvent(FriendEvtName.FRIEND_MENU_CLOSE)),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.removeGlobalEventListener(ChatEvtName.CHAT_SCMD11600_UPDATE,this.updateWorld,this),this.removeGlobalEventListener(ChatEvtName.CHAT_SCMD11601_UPDATE,this.updateGuild,this),this.removeGlobalEventListener(ChatEvtName.CHAT_SCMD11603_UPDATE,this.updateSystemData,this),this.removeGlobalEventListener(FriendEvtName.FRIEND_CCMD11701_UPDATE,this.updateBlackList,this),this.btnSend.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSend,this),this.btnGm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGm,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btnLaba.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLaba,this),this.removeJBYXPic(),this._JBYXPic&&(this._JBYXPic.dispose(),this._JBYXPic=null)},t}(LayeroutWindow);egret.registerClass(ChatWindow,"ChatWindow");var CheckPointBossWindow=function(e){function t(){e.call(this),this._itemIds=[1,2,17500001,17500002,17500003],this._isNovice=!0,this.skinName="resource/game_skins/checkpointboss/CheckPointBossWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.CHECKPOINTBOSS,this._txtLink.htmlText="<u><a href = 'event:2'>查看排行</a></u>",this.updateGuide()},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._txtLink.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),SceneModel.getInstance().addEventListener(SceneModel.UPDATE_SCENE_WAVE,this.setGuaJiInfo,this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.onUpdateRank,this),this.changeWaveInfo(null),this._itemArr=[];for(var t,i=0;i<this._itemIds.length;i++)t=new GoodsItem,t.x=10+115*i,this._itemContainer.addChild(t),t.data=GoodsListProxy.getInstance().getGoodsInfoByType(this._itemIds[i]),t.showLv(!1),this._itemArr.push(t);this.setGuaJiInfo(),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(RankEvtName.RANK_CCMD13500,RankModel.RANK_TYPE_11))},n.onCloseHandler=function(){this._txtLink.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),SceneModel.getInstance().removeEventListener(SceneModel.UPDATE_SCENE_WAVE,this.setGuaJiInfo,this),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.onUpdateRank,this);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t&&(t.parent&&t.parent.removeChild(t),t.data=null,t.dispose(),t=null);this._itemArr=[],this._monsterFigure&&(this._monsterFigure.dispose(),this._monsterFigure=null),e.prototype.onCloseHandler.call(this)},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("checkpointboss_json.checkpointboss_title")},n.onOkHandler=function(){NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip(),0!=GoodsListProxy.getInstance().checkBagGridResNum(20)&&(this.dispatchGlobalEvent(new ParamEvent(CheckPointBossEvtName.CHECKPOINTBOSS_ENTER)),this.isPop=!1)},n.onTxtLinkHandler=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(RankEvtName.RANK_OPEN_COMMON,RankModel.RANK_TYPE_11))},n.changeWaveInfo=function(e){var t=SceneModel.getInstance().getSceneWave(),i=t.wave_id,n=SceneModel.getInstance().getWaveConfig(i-1);if(n)this.waveTip_cur.text=n.copper.toString(),this.waveTip_cur2.text=n.exp.toString(),n=SceneModel.getInstance().getWaveConfig(i),this.waveTip_next.htmlText="<font color='"+ColorUtil.COLOR_GREEN+"'>"+n.copper+"</font>/小时",this.waveTip_next2.htmlText="<font color='"+ColorUtil.COLOR_GREEN+"'>"+n.exp+"</font>/小时";else{var n=SceneModel.getInstance().getWaveConfig(1);this.waveTip_cur.text=n.copper.toString(),this.waveTip_cur2.text=n.exp.toString(),n=SceneModel.getInstance().getWaveConfig(2),this.waveTip_next.htmlText="<font color='"+ColorUtil.COLOR_GREEN+"'>"+n.copper+"</font>/小时",this.waveTip_next2.htmlText="<font color='"+ColorUtil.COLOR_GREEN+"'>"+n.exp+"</font>/小时"}},n.setGuaJiInfo=function(){var e=SceneModel.getInstance().getSceneWave(),t=SceneModel.getInstance().getCurrentWaveID(),i=SceneModel.getInstance().getWaveConfig(t),n=SceneModel.getInstance().getSceneInfo(i.sceneID),s=SceneModel.getInstance().getSceneLevelVo(i.masterLev),a=GoodsListProxy.getInstance().getGoodsInfoByType(s.itemID),o=SceneModel.getInstance().getMonsterConfig(i.bossID);this._txtMapName.text="通关 "+n.sceneName+" 所有关卡可获得"+a.name+"奖励",this._txtItemName.text=a.name,this._txtWave.text="当前关卡数：第"+t+"关",this._item.data=a,this._txtBossName.text=o.name,this._txtProgress.text=i.masterWave+"/10";var r=i.masterWave/10;r>1&&(r=1),this._bar.scaleX=r,this.addMonster(o.resID),this._item.showLv(!1);var h=e.kill_num;h>i.passNum&&(h=i.passNum);var l=h/i.passNum;1>l?(this._txtAlert.visible=!0,this._btnOK.visible=!1,this._txtAlert.text="还需要击杀【"+Number(i.passNum-h)+"】波小怪才能挑战BOSS"):(this._txtAlert.visible=!1,this._btnOK.visible=!0)},n.addMonster=function(e){null==this._monsterFigure&&(this._monsterFigure=new MonsterFigure,this._monsterFigure.x=75,this._monsterFigure.y=175,this._monsterFigureContainer.addChild(this._monsterFigure)),this._monsterFigure.setRes(e)},n.onUpdateRank=function(e){for(var t=e.data.rank_list,i=0;i<t.length;i++)3>i&&(this["txtName"+i].text=t[i].rank+"  "+t[i].name+"("+t[i].value+"关)")},n.updateGuide=function(){if(0!=this._isNovice&&(this._isNovice=!1,TaskModel.getInstance().getCurTaskXS()==NoviceGuideType.CheckPointBoss)){this._isNovice=!1;var e=this._btnOK.parent.localToGlobal(this._btnOK.x,this._btnOK.y+60);NoviceGuideManager.getInstance().showShadeTip(this._btnOK,"挑战BOSS",e,new egret.Point(e.x-10,e.y-80))}},t}(LayeroutWindow);egret.registerClass(CheckPointBossWindow,"CheckPointBossWindow");var ChenghaoGetView=function(e){function t(){e.call(this),this.skinName="resource/game_skins/chenghao/ChenghaoGetViewSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("getTitle_title")},s.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnHandler,this)},s.updateInfoHandler=function(){},s.onCloseHandler=function(){this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnReturn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnHandler,this),this._titleMovie&&(this._titleMovie.dispose(),this._titleMovie=null),e.prototype.onCloseHandler.call(this)},i(s,"tid",void 0,function(e){this._tid=e;var t=ChenghaoModel.getInstance().getChenghaoData(this._tid);
null!=t&&(this._txtCondition.text=t.explain,this._titleMovie||(this._titleMovie=new UIEffect,this._titleMovie.showEffect(UrlUtil.getTitleResource(t.template_id),1,1,this._itemContainer,120,!0)))}),s.onOkHandler=function(){this.dispatchGlobalEvent(new ParamEvent(ChenghaoEvtName.CHENGHAO_OPEN_WINDOW)),this.isPop=!1},s.onReturnHandler=function(){this.isPop=!1},s.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=377},t}(LayeroutWindow);egret.registerClass(ChenghaoGetView,"ChenghaoGetView");var ChenghaoItem=function(e){function t(t){e.call(this),this._open=!1,this.cH=0,this._seq=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/chenghao/ChenghaoItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this._btnWear.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onWearHandler,this),this._btnArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onArrowHandler,this),this._bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onArrowHandler,this),GameDispatcher.getInstance().addEventListener(EventName.CHANGE_TITLE,this.updateTitleAppearChange,this)},n.setData=function(e){this._vo=e,this._btnWear.visible=!1,this._imageType.source=UrlUtil.getTitleQualityURL(this._vo.quality),this._titleMovie||(this._titleMovie=new PicLoader,this._titleMovie.x=68,this._titleMovie.y=18,this._titleMovie.load(UrlUtil.getTitleWinResource(this._vo.template_id)),this.addChild(this._titleMovie))},n.updateInfo=function(){this._node=ChenghaoModel.getInstance().getChenghaoServerData(this._vo.template_id),null!=this._node&&(this._btnWear.visible=!0,this._imageState.visible=!1,this.updateOpenedInfo())},n.updateTitleAppearChange=function(e){var t=e.data.id;t==FigureModel.getInstance().selectedPartnerVO.parnerID&&this.updateOpenedInfo()},n.onWearHandler=function(){var e,i=FigureModel.getInstance().selectedPartnerVO;e=new ParamEvent(this._btnWear.label==t.LABEL_WEAR?ChenghaoEvtName.CCMD12301:ChenghaoEvtName.CCMD12302),e.data={id:i.parnerID,titleId:this._vo.template_id},this.dispatchGlobalEvent(e)},n.onArrowHandler=function(){this._open=!this._open,this._open?(this._btnArrow.source=RES.getRes("share_json.share_arrowUp"),this.addContent()):(this._btnArrow.source=RES.getRes("share_json.share_arrowDown"),this.removeContent()),this.dispatchEvent(new ParamEvent(t.CLICK,{seq:this._seq,open:this._open,vgap:this.cH}))},n.addContent=function(){null==this._contentSp&&(this._contentSp=new CommonSprite,this.addChild(this._contentSp),this._contentSp.y=120);var e=0,t=this.addImage(this._contentSp,0,0);t.source=RES.getRes("chenghao_json.chenghao_hline");var i=this.addImage(this._contentSp,20,t.y+10);i.source=RES.getRes("chenghao_json.chenghao_wordBg");var n=this.addTextField(this._contentSp,i.x+10,i.y+10,"当前称号属性",155,30,18,"left",10);n.textColor=16765440;var s=this.addTextField(this._contentSp,n.x,i.y+40,"",450,30,18,"left",10);s.text=this._vo.explain;var a=this.addTextField(this._contentSp,s.x,s.y+40,"",450,68,18,"left",10),o=this.addProperty(this._vo,EquipBasic.PROPERTY_INDEX);a.htmlText=o,e=a.y+a.textHeight+22,t=this.addImage(this._contentSp,0,e+5),t.source=RES.getRes("chenghao_json.chenghao_hline"),i=this.addImage(this._contentSp,20,t.y+10),i.source=RES.getRes("chenghao_json.chenghao_wordBg"),n=this.addTextField(this._contentSp,i.x+10,i.y+10,"称号总属性",155,30,18,"left",10),n.textColor=16765440,this._txtTotalPro=this.addTextField(this._contentSp,n.x,n.y+40,"",450,68,18,"left",10),o=this.addProperty(ChenghaoModel.getInstance().getChenghaoTotalPropertyVO(),EquipBasic.PROPERTY_INDEX),this._txtTotalPro.htmlText=o,s=this.addTextField(this._contentSp,this._txtTotalPro.x,this._txtTotalPro.y+this._txtTotalPro.textHeight+11,"",450,30,18,"left",10),s.htmlText="<font color='#00ff00'>称号属性会累计为玩家的所有角色提供属性</font>",e=s.y+s.textHeight+22,this.cH=e,this.height+=this.cH},n.removeContent=function(){for(;this._contentSp&&this._contentSp.numChildren>0;){var e=this._contentSp.removeChildAt(0);e instanceof CustomImage&&(e.dispose(),e=null),e instanceof GoodsItem&&(e.dispose(),e=null)}this._txtTotalPro&&(this._txtTotalPro.parent&&this._txtTotalPro.parent.removeChild(this._txtTotalPro),this._txtTotalPro=null),this.height-=this.cH},n.updateOpenedInfo=function(){var e=RoleModel.getInstance().hasChengHao(FigureModel.getInstance().selectedPartnerVO.uid,this._vo.template_id);this._node&&(e?this._btnWear.label=t.LABEL_GETOFF:this._btnWear.label=t.LABEL_WEAR)},n.addProperty=function(e,t,i,n,s){void 0===i&&(i="#dda66b"),void 0===n&&(n="#e7d0b7"),void 0===s&&(s="#00d228");var a="";return a+="<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME.hp+" ：</font><font color='"+n+"'></font>+"+e.hp+"        ",a+="<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME.attack+" ：</font><font color='"+n+"'></font>+"+e.attack,a+="\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME.att_def+" ：</font><font color='"+n+"'></font>+"+e.att_def+"        ",a+="<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME.magic_def+" ：</font><font color='"+n+"'></font>+"+e.magic_def},n.addImage=function(e,t,i){var n=new CustomImage;return n.x=t,n.y=i,e.addChild(n),n},n.addTextField=function(e,t,i,n,s,a,o,r,h){void 0===s&&(s=200),void 0===a&&(a=20),void 0===o&&(o=20),void 0===r&&(r="left"),void 0===h&&(h=5);var l=new CustomLabel;return l.lineSpacing=h,l.width=s,l.height=a,l.size=o,l.touchEnabled=!1,l.multiline=!0,l.wordWrap=!0,l.x=t,l.y=i,n&&(l.htmlText=n),e.addChild(l),l},n.dispose=function(){this._btnWear.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onWearHandler,this),this._btnArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onArrowHandler,this),this._bg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onArrowHandler,this),GameDispatcher.getInstance().removeEventListener(EventName.CHANGE_TITLE,this.updateTitleAppearChange,this),this.parent&&this.parent.removeChild(this),e.prototype.dispose.call(this),this.removeContent(),this._titleMovie&&(this._titleMovie.dispose(),this._titleMovie=null)},t.CLICK="chenghaoItem_click",t.LABEL_WEAR="穿戴",t.LABEL_GETOFF="卸下",t}(BaseView);egret.registerClass(ChenghaoItem,"ChenghaoItem");var ChenghaoWindow=function(e){function t(){e.call(this),this._itemArr=[],this.skinName="resource/game_skins/chenghao/ChenghaoWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.FIGURE,this.heroListTopBox=new HeroListTopBox,this.topContainer.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0,FigureModel.getInstance().selectedPartnerVO=this.heroListTopBox.roleListData[0]},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_figure")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this);var t=new ParamEvent(ChenghaoEvtName.CCMD12300);this.dispatchGlobalEvent(t),this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),ChenghaoModel.getInstance().addEventListener(ChenghaoEvtName.CHENGHAO_UPDATE_INFO,this.updateInfoHandler,this)},n.updateInfoHandler=function(){function e(e,t){return Number(e.seq)-Number(t.seq)}var t=ChenghaoModel.getInstance().getChenghaoDataList();t.sort(e);for(var i,n=t.length,s=0;s<this._itemArr.length;s++)i=this._itemArr[s],i.dispose(),i=null;this._itemArr=[];for(var s=0;n>s;s++)i=new ChenghaoItem(s),i.y=122*s,i.setData(t[s]),i.addEventListener(ChenghaoItem.CLICK,this.onItemClick,this),this._itemContainer.addChild(i),this._itemArr.push(i);for(var i,n=this._itemArr.length,s=0;n>s;s++)i=this._itemArr[s],i.updateInfo()},n.onItemClick=function(e){var t=e.data.seq,i=e.data.open,n=e.data.vgap;this.layouList(t,i,n)},n.layouList=function(e,t,i){for(var n,s=0;s<this._itemArr.length;s++)n=this._itemArr[s],s>e&&(t?n.y+=i:n.y-=i)},n.onCloseHandler=function(){this.heroListTopBox&&(this.heroListTopBox.parent&&this.heroListTopBox.parent.removeChild(this.heroListTopBox),this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),ChenghaoModel.getInstance().removeEventListener(ChenghaoEvtName.CHENGHAO_UPDATE_INFO,this.updateInfoHandler,this);for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],t.dispose(),t=null;e.prototype.onCloseHandler.call(this)},n.onBoxTap=function(e){e.data&&(FigureModel.getInstance().selectedPartnerVO2=e.data,this.updateInfoHandler())},n.onPartnerChangeHandler=function(){},t}(LayeroutWindow);egret.registerClass(ChenghaoWindow,"ChenghaoWindow");var CityMapView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/city/CityMapViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturn,this),this.addGlobalEventListener(EventName.TIPSWORD_UPDATE,this.onTipsWordUpdate,this),this.addGlobalEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.onTipsWordUpdate,this),this.imageBg=new PicLoader,ConfigManager.isBigScene()?this.imageBg.load("resource/assets/icon/city/CityMap2.jpg"):this.imageBg.load("resource/assets/icon/city/CityMap.jpg"),this.addChildAt(this.imageBg,0);for(var e,t=1;8>=t;t++)e=this["npcGroup_"+t],e.name="npcGroup_"+t,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBtnDown,this),e.addEventListener(egret.TouchEvent.TOUCH_END,this.onBtnOut,this);this.onTipsWordUpdate()},n.onReturn=function(){this.dispatchEvent(new ParamEvent(EventName.WINDOW_DISPOSE)),TipsWordManager.getInstance().isCity=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_SHOW_RIGHTTOP,{state:!0})),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(SceneEvtName.MAIN_CITY_CHANGE)),this.dispose()},n.onBtnDown=function(e){var t=e.currentTarget.name,i=Number(t.split("_")[1]);this["npc_s_"+i].visible=!0},n.onBtnOut=function(e){var t=e.currentTarget.name,i=Number(t.split("_")[1]);switch(this["npc_s_"+i].visible=!1,i){case 1:this.dispatchGlobalEvent(new ParamEvent(KingEvtName.OPEN_VIEW_SELECT));break;case 2:this.onReturn(),this.dispatchGlobalEvent(new ParamEvent(KuaFuEvtName.KUAFU_OPEN_MAP));break;case 3:this.dispatchGlobalEvent(new ParamEvent(RankEvtName.RANK_OPEN_VIEW));break;case 4:if(!FunctionOpenModel.getInstance().check(FunctionOpenModel.MEETBOSS))return;this.dispatchGlobalEvent(new ParamEvent(BossEvtName.OPEN_BOSS_WINDOW,7));break;case 5:if(!FunctionOpenModel.getInstance().check(FunctionOpenModel.GUILD))return;this.onReturn(),this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_GUILD));break;case 6:this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.SHOW_CITYWAR_VIEW));break;case 7:this.dispatchGlobalEvent(new ParamEvent(FigureEvtName.FIGURE_OPEN_OPENPARTNERWINDOW));break;case 8:this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_FIGHT_UP_WINDOW))}},n.onTipsWordUpdate=function(){var e=this.btn_1;e.showRedDot=TipsWordManager.getInstance().isRedDots(TipsWord.KING),e=this.btn_5,e.showRedDot=TipsWordManager.getInstance().isRedDots(TipsWord.GUILD),e=this.btn_6,e.showRedDot=CityWarModel.getInstance().checkCityWarDailyReweard()},n.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this.btnReturn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturn,this),this.removeGlobalEventListener(EventName.TIPSWORD_UPDATE,this.onTipsWordUpdate,this),this.removeGlobalEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.onTipsWordUpdate,this);for(var t,i=1;6>=i;i++)t=this["npcGroup_"+i],t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBtnDown,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onBtnOut,this);this.imageBg&&(this.imageBg.dispose(),this.imageBg=null)},t}(BaseView);egret.registerClass(CityMapView,"CityMapView");var CWAssignItem=function(e){function t(){e.call(this),this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CWAssignItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeFromStage,this)},n.updateNum=function(){for(var e=0;e<this._goodsList.length;e++){var t=this._goodsList[e];t.num=0,t.gray()}if(null!=this._assignVo)for(var i=this._assignVo.goodsList,e=0;e<this._goodsList.length;e++)for(var t=this._goodsList[e],n=0;n<i.length;n++){var s=i[n];if(t.data.template_id==s.asset_id&&(t.num=s.value,s.value>0)){t.removeGray();break}}},n.dataChanged=function(){this._memberVo=this.data.memberVo,this._assignVo=this.data.assignVo;var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_15204),t=Tools.changeToNodeDropList(e.value);this.setGiftList(t),this.setMemberData(this._memberVo),this.updateNum()},n.setMemberData=function(e){this._memberVo=e,this._txtName.text=e.name,this._txtPosition.text=StringUtil.substitute("[{0}]",GuildModel.getInstance().getPositionStr(e.position)),this._txtGongXian.text=Tools.convertNumber(e.donate_total),this._txtFight.text=Tools.convertNumber(e.power)},n.setGiftList=function(e){if(!this._goodsList){this._goodsList=new Array;for(var t=0;t<this._goodsList.length;t++){var i=this._goodsList[t];i.parent&&i.parent.removeChild(i)}for(var t=0;t<e.length;t++){var n=e[t],s=GoodsListProxy.getInstance().getGoodsInfoByType(n.asset_id);s.num=0;var i=this._goodsList[t];null==i&&(i=new GoodsItemSmall,this._goodsList.push(i),i.showTips=!1,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this)),i.data=s,i.x=92*t+205,i.y=15,this.addChild(i)}}},n.clickIcon=function(e){var t=e.currentTarget;GameDispatcher.getInstance().dispatchEvent(new ParamEvent(CityWarEvtName.SHOW_CWASSIGNVIEW,{vo:this._memberVo,id:t.data.template_id}))},n.removeFromStage=function(){this.dispose()},n.dispose=function(){if(this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeFromStage,this),this._goodsList){for(var e=0;e<this._goodsList.length;e++){var t=this._goodsList[e];t&&(t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this),t.parent&&t.parent.removeChild(t),t.dispose(),t=null)}this._goodsList=null}},t}(eui.ItemRenderer);egret.registerClass(CWAssignItem,"CWAssignItem");var CWAssignRewardView=function(e){function t(){e.call(this),this._scrollSi=0,this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CWAssignViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.setStorageData(),this._scroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.assignGoods,this),this._btnReset.addEventListener(egret.TouchEvent.TOUCH_TAP,this.resetGoods,this)},n.setAssignList=function(e){void 0===e&&(e=null);var t=GuildModel.getInstance().getGuildMembers();null==this._assignCollection&&(this._assignCollection=new eui.ArrayCollection,this._dataGrp.dataProvider=this._assignCollection);for(var i=new Array,n=0;n<t.length;n++){var s=new Object;s.memberVo=t[n];var a=this._model.getCWStoreageAssignVo(t[n].role_id);s.assignVo=a,i.push(s)}this._assignCollection.replaceAll(i)},n.setStorageData=function(){this._storageItemList=new Array;for(var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_15204),t=Tools.changeToNodeDropList(e.value),i=0;i<t.length;i++){var n=this._storageItemList[i];null==n&&(n=new CWStroageItem,this._storageItemList.push(n)),n.setData(t[i].asset_id),n.x=i*n.width,n.setNum(100),this._giftContainer.addChild(n)}},n.onAdd=function(){e.prototype.onAdd.call(this),this._model.addEventListener(CityWarModel.UPDATE_REWARDSTORAGE,this.updateStorage,this),this.addGlobalEventListener(GuildEvtName.GUILD_CCMD12509_UPDATE,this.setAssignList,this),this._model.addEventListener(CityWarModel.UPDATE_ASSIGN_GOODS,this.setAssignList,this),this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15210)),this.dispatchGlobalEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12509))},n.updateStorage=function(e){for(var t=this._model.cityWarStorageInfo,i=t.siege_depot,n=this._storageItemList,s=0;s<n.length;s++){var a=n[s],o=i[s];null!=o?(null==a&&(a=new CWStroageItem,n.push(a)),a.x=s*a.width,a.setData(o.cfg_id),a.setNum(o.num)):a.setNum(0)}},n.onRemove=function(){e.prototype.onRemove.call(this),this._scrollSi>0&&clearTimeout(this._scrollSi),this._model.removeEventListener(CityWarModel.UPDATE_REWARDSTORAGE,this.updateStorage,this),this._model.removeEventListener(CityWarModel.UPDATE_ASSIGN_GOODS,this.setAssignList,this),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD12509_UPDATE,this.setAssignList,this)},n.assignGoods=function(e){this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15211))},n.resetGoods=function(e){this._model.clearAssignData()},n.dispose=function(){e.prototype.dispose.call(this),this.onRemove();var t=this._storageItemList;if(t)for(var i=0;i<t.length;i++){var n=t[i];n&&(n.parent&&n.parent.removeChild(n),n.dispose(),n=null)}this._storageItemList=null,this._dataGrp.dataProvider=null},t}(BaseView);egret.registerClass(CWAssignRewardView,"CWAssignRewardView");var CWAssignWindow=function(e){function t(){e.call(this),this._model=CityWarModel.getInstance(),this.skinName="resource/game_skins/cityWar/CWAssignWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.CITYWAR,this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOK,this),this._btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickReturn,this)},n.setData=function(e,t){this._vo=e,this._goodsID=t,this._num=0;var i=GoodsListProxy.getInstance().getGoodsInfoByType(t);i.num=1,this._txtAssignTo.text=e.name,this._item.data=i,this._item.showLv(!1),this._txtGoodsName.text=i.name;var n=this._model.getLeftNumOfGoods(t);this._txtLeft.text=n.toString()},n.onClickOK=function(e){this._num=this._numStep.getValue(),this._model.setMemberGoodsNum(this._vo.role_id,this._goodsID,this._num),this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.ASSIGN_GOODS,{vo:this._vo,id:this._goodsID})),this.isPop=!1},n.onClickReturn=function(e){this.isPop=!1},n.dispose=function(){e.prototype.dispose.call(this)},t}(LayeroutWindow);egret.registerClass(CWAssignWindow,"CWAssignWindow");var CWConfigRewardItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CWConfigRewardItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._itemCach=new Array,this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)},n.setData=function(e){e.max<=3?(this._imageRank.source="cityWar_json.cityWar_rankIcon"+e.max,this.contains(this._txtRank)&&this.removeChild(this._txtRank)):(this._txtRank.text=e.max.toString(),this.contains(this._imageRank)&&this.removeChild(this._imageRank)),this.clearItems();for(var t=0;t<e.goodsList.length;t++){var i=GoodsListProxy.getInstance().getGoodsInfoByType(e.goodsList[t].asset_id);i.num=e.goodsList[t].value;var n=this._itemCach[t];if(null==n){var n=new GoodsItem;this._itemCach.push(n)}n.data=i,n.x=115*t+105,n.y=6,this.addChild(n)}},n.clearItems=function(){for(var e=0;e<this._itemCach.length;e++){var t=this._itemCach[e];this.contains(t)&&this.removeChild(t)}},n.dispose=function(){e.prototype.dispose.call(this);for(var t=0;t<this._itemCach.length;t++){var i=this._itemCach[t];this.contains(i)&&this.removeChild(i),i.dispose(),i=null}this._itemCach=null},t}(BaseView);egret.registerClass(CWConfigRewardItem,"CWConfigRewardItem");var CWGetRewardWindow=function(e){function t(){e.call(this),this._model=CityWarModel.getInstance(),this.skinName="resource/game_skins/cityWar/CWGetRewardWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.CITYWAR,this.setReward(),this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this)},n.setReward=function(){if(null==this._itemCach){this._itemCach=new Array;for(var e=this._model.getTypeRewardConfigList(CityWarRewardConfigVo.ZHANLING_DAILY)[0].goodsList,t=0;t<e.length;t++){var i=e[t],n=this._itemCach[t];null==n&&(n=new GoodsItem,this._itemCach.push(n)),n.x=125*t;var s=GoodsListProxy.getInstance().getGoodsInfoByType(i.asset_id);s.num=i.value,n.data=s,this._container.addChild(n)}}},n.dispose=function(){for(var e=0;e<this._itemCach.length;e++){var t=this._itemCach[e];this._container.contains(t)&&this._container.removeChild(t),t.dispose(),t=null}this._itemCach=null},n.onClickBtn=function(e){this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15203)),this.isPop=!1},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.checkBtn(),this.addGlobalEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.rewardStatuChange,this)},n.onCloseHandler=function(){this.removeGlobalEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.rewardStatuChange,this),e.prototype.onCloseHandler.call(this)},n.rewardStatuChange=function(e){var t=e.data.data;t.type==DailyModel.DAILY_TYPE_23&&this.checkBtn()},n.checkBtn=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_23);e>0?(this._btn.enabled=!1,this._btn.label="已领取"):(this._btn.enabled=!0,this._btn.label="领取")},t}(LayeroutWindow);egret.registerClass(CWGetRewardWindow,"CWGetRewardWindow");var CWGuildRankView=function(e){function t(){e.call(this),this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CWGuildRankViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)},n.onAdd=function(){e.prototype.onAdd.call(this),this._model.addEventListener(CityWarModel.UPDATE_GUILDRANKINFO,this.update,this),this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15201))},n.onRemove=function(){e.prototype.onRemove.call(this),this._model.removeEventListener(CityWarModel.UPDATE_GUILDRANKINFO,this.update,this)},n.update=function(e){this._model.guildRankInfo;""!=this._model.occupyInfo.guild_name?(this._txtGuildName.text=this._model.occupyInfo.guild_name,1==this._model.occupyInfo.flag?this._txtReason.text="采集皇旗成功":this._txtReason.text="积分最高"):(this._txtGuildName.text="虚位以待",this._txtReason.text="虚位以待");var t=this._model.guildRankInfo.siege_scores;null==this._itemList&&(this._itemList=new Array),this.clearContainer();for(var i=0;i<t.length;i++){var n=this._itemList[i];null==n&&(n=new CWRankItem,this._itemList.push(n)),n.setData(t[i],!1),n.y=51*i,this._container.addChild(n)}},n.clearContainer=function(){for(;this._container.numChildren>0;)this._container.removeChildAt(0)},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.onRemove();var i=t._itemList;if(i)for(var n=0;n<i.length;n++){var s=i[n];this._container.contains(s)&&this._container.removeChild(s),s.dispose(),s=null}t=null},t}(BaseView);egret.registerClass(CWGuildRankView,"CWGuildRankView");var CWGuildRewardConfigView=function(e){function t(){e.call(this),this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CityWarGuildRewardViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.setMasterReward(),this.setGuildRankReward()},n.setMasterReward=function(){if(null==this._goodsCach){this._goodsCach=new Array;for(var e=this._model.getTypeRewardConfigList(CityWarRewardConfigVo.ZHANLING_MASTER),t=e[0],i=t.goodsList,n=0;n<i.length;n++){var s=GoodsListProxy.getInstance().getGoodsInfoByType(i[n].asset_id);s.num=i[n].value;var a=new GoodsItem;a.data=s,a.x=115*n,this._headContainer.addChild(a),this._goodsCach.push(a)}}},n.setGuildRankReward=function(){if(null==this._rewardItemCach){this._rewardItemCach=new Array;for(var e=this._model.getTypeRewardConfigList(CityWarRewardConfigVo.GUILDPOINT),t=0;t<e.length;t++){var i=e[t],n=new CWConfigRewardItem;n.setData(i),n.y=135*t+8,this._itemContainer.addChild(n),this._rewardItemCach.push(n)}}},n.dispose=function(){e.prototype.dispose.call(this);for(var t=this,i=t._goodsCach,n=0;n<i.length;n++){var s=i[n];s.parent&&s.parent.removeChild(s),s.dispose(),s=null}for(var a=t._rewardItemCach,n=0;n<a.length;n++){var o=a[n];o.parent&&o.parent.removeChild(o),o.dispose(),o=null}t._goodsCach=null,t._rewardItemCach=null,t=null},t}(BaseView);egret.registerClass(CWGuildRewardConfigView,"CWGuildRewardConfigView");var CWInnerRankItem=function(e){function t(){e.call(this),this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CWInnerRankItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)},n.setData=function(e){this._txtName.text=StringUtil.substitute("{0} {1}",e.rank_id,e.role_name),this._txtPoint.text=e.score.toString()},n.setData2=function(e,t){var i=SingleModel.getInstance().getSingVO(SingleModel.KEY_15206),n=300;i&&(n=parseInt(i.value)),this._txtName.text=StringUtil.substitute("{0} {1}",t,e.guild_name),this._txtPoint.text=StringUtil.substitute("{0}/{1}",e.total_time,n)},n.dispose=function(){e.prototype.dispose.call(this)},t}(BaseView);egret.registerClass(CWInnerRankItem,"CWInnerRankItem");var CWInnerRankView=function(e){function t(){e.call(this),this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CWInnerRankViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._itemCachPerson=new Array,this._itemCachGuild=new Array,this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._model.addEventListener(CityWarModel.UPDATE_INNERRANK,this.updateInnerRank,this),this.addGlobalEventListener(CityWarEvtName.CLEAR_INNER_RANK_DATA,this.clearDataHandler,this)},n.clearDataHandler=function(e){this.clearPersonData(),this.clearGuildData()},n.clearPersonData=function(){for(;this._containerPerson.numChildren>0;)this._containerPerson.removeChildAt(0)},n.clearGuildData=function(){for(;this._containerGuild.numChildren>0;)this._containerGuild.removeChildAt(0)},n.updateInnerRank=function(e){var t=this._model.innerRankInfo;this.clearPersonData(),this.clearGuildData();var i=t.siege_scores;this.setRank(i,this._containerPerson,this._itemCachPerson,1),i=t.siege_guild_times,this.setRank(i,this._containerGuild,this._itemCachGuild,2)},n.setRank=function(e,t,i,n){for(var s=0;s<e.length&&2>s;s++){var a=e[s];a.rank_id=s+1;var o=i[s];null==o&&(o=new CWInnerRankItem,i.push(o)),1==n?o.setData(a):o.setData2(a,s+1),o.y=32*s+8,o.x=5,t.addChild(o)}},n.dispose=function(){e.prototype.dispose.call(this),this._model.removeEventListener(CityWarModel.UPDATE_INNERRANK,this.updateInnerRank,this),this.removeGlobalEventListener(CityWarEvtName.CLEAR_INNER_RANK_DATA,this.clearDataHandler,this);for(var t=0;t<this._itemCachPerson.length;t++){var i=this._itemCachPerson[t];this._containerPerson.contains(i)&&this._containerPerson.removeChild(i),i.dispose(),i=null}this._itemCachPerson=null;for(var t=0;t<this._itemCachGuild.length;t++){var i=this._itemCachGuild[t];this._containerGuild.contains(i)&&this._containerGuild.removeChild(i),i.dispose(),i=null}this._itemCachGuild=null},t}(BaseView);egret.registerClass(CWInnerRankView,"CWInnerRankView");var CWInnerView=function(e){function t(){e.call(this),this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CWInnerViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this);var e=GameContent.stageWidth,t=GameContent.stageHeight,i=this;i.y=170,i._cwInnerRankView.x=0,i._cwInnerRankView.y=-120,i._cwRefreshView.x=e-i._cwRefreshView.width,i._cwRefreshView.y=100,i._cwOperateView.y=t-270-i.y,i._cwOperateView.x=e-i._cwOperateView.width>>1,i._btnCaiJi.y=t-360-i.y,i._btnCaiJi.x=e-92>>1,i._btnAttack.x=i._btnCaiJi.x+132,i._btnAttack.y=i._btnCaiJi.y,i._btnCaiJi.addEventListener(egret.TouchEvent.TOUCH_TAP,i.clickCaiJi,i),i._btnAttack.addEventListener(egret.TouchEvent.TOUCH_TAP,i.clickAttack,i),i=null},n.onAdd=function(){e.prototype.onAdd.call(this),GameContent.gameLayers.mainUILayer.addChild(this),this._model.addEventListener(CityWarModel.UPDATE_CITYWAR_POINT,this.updateMyPoint,this),this._model.addEventListener(CityWarModel.FIGHT_STATU_CHANGE,this.fightStatuChange,this),this._model.addEventListener(CityWarModel.UPDATE_FLAG_STATU,this.flagStatuChange,this)},n.onRemove=function(){e.prototype.onRemove.call(this),GameContent.gameLayers.mainUILayer.contains(this)&&GameContent.gameLayers.mainUILayer.removeChild(this),this._model.removeEventListener(CityWarModel.UPDATE_CITYWAR_POINT,this.updateMyPoint,this),this._model.removeEventListener(CityWarModel.FIGHT_STATU_CHANGE,this.fightStatuChange,this),this._model.removeEventListener(CityWarModel.UPDATE_FLAG_STATU,this.flagStatuChange,this)},n.clickCaiJi=function(e){this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15602))},n.clickAttack=function(e){this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15601))},n.updateMyPoint=function(e){if(this._cwOperateView){var t=this._model.cityWarPoint;this._cwOperateView.setMyPoint(t)}},n.changeStatu=function(e){var t=this;switch(e){case SceneInfoVo.CITYWAR_INSIDE:t.setInSideType();break;case SceneInfoVo.CITYWAR_FRONTPALACE:t.setFrontPalaceType();break;case SceneInfoVo.CITYWAR_PALACE:t.setPalacetType()}},n.setInSideType=function(){this.setFlagBtnVisible(!1),this._cwOperateView.setInSideType()},n.setFrontPalaceType=function(){this.setFlagBtnVisible(!1),this._cwOperateView.setFrontPalaceType()},n.setPalacetType=function(){this.setFlagBtnVisible(!0),this._cwOperateView.setPalacetType()},n.setFlagBtnVisible=function(e){this._btnAttack.visible=e,this._btnCaiJi.visible=e,this.flagStatuChange(null)},n.fightStatuChange=function(e){var t=this._model.isFighting;t?(this.setFlagBtnVisible(!1),this._cwOperateView.visible=!1,this._cwRefreshView.visible=!1):(SceneModel.getInstance().isCityWarPalace()&&this.setFlagBtnVisible(!0),this._cwOperateView.visible=!0,this._cwRefreshView.visible=!0)},n.flagStatuChange=function(e){var t=this._model.flagStatu;SceneModel.getInstance().isCityWarPalace()&&t&&(t.role_id>0?(this._cwOperateView.setTxt1(t.guild_name),this._btnCaiJi.visible=!1,t.guild_id==RoleModel.getInstance().getRoleCommon().guild_id?this._btnAttack.visible=!1:this._btnAttack.visible=!0):(this._cwOperateView.setTxt1("暂无"),this._btnAttack.visible=!1,this._btnCaiJi.visible=!0))},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.onRemove(),t._cwInnerRankView&&(t._cwInnerRankView.dispose(),t._cwInnerRankView=null),t._cwRefreshView&&(t._cwRefreshView.dispose(),t._cwRefreshView=null),t._cwOperateView&&(t._cwOperateView.dispose(),t._cwOperateView=null)},t}(BaseView);egret.registerClass(CWInnerView,"CWInnerView");var CWOperateView=function(e){function t(){e.call(this),this._canAttack=!0,this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CWOperateViewSkin.exml"
}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHelp,this),this._btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickBack,this),this._btnFront.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickFront,this),this._btnAttack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickAttack,this)},n.clickAttack=function(e){var t=this,i=SingleModel.getInstance().getSingVO(SingleModel.KEY_15208);this._canAttack&&(this._canAttack=!1,this._containerAttack.filters=[Tools.GrayFilter],setTimeout2(function(){t._canAttack=!0,t._containerAttack.filters=null},1e3*parseInt(i.value)),this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15400)))},n.clickHelp=function(e){this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.SHOW_HELP_VIEW))},n.clickBack=function(e){var t=SceneModel.getInstance();t.isCityWarFrontPalace()?this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15520)):t.isCityWarPalace()&&this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15630))},n.clickFront=function(e){var t=SceneModel.getInstance();t.isCityWarInside()?this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15420)):t.isCityWarFrontPalace()&&this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15521))},n.setMyPoint=function(e){this._txtPoint.text=e.toString()},n.setInSideType=function(){this._containerAttack.visible=!0,this._btnFront.visible=!0,this._txtConsume.visible=!0;var e=this._model.getCityWarSceneConfig(SceneInfoVo.CITYWAR_INSIDE);this._txtConsume.text=StringUtil.substitute("(消耗{0}积分)",e.go_point),this._txt1.visible=!1,this._btnBack.visible=!1},n.setFrontPalaceType=function(){this._containerAttack.visible=!1,this._btnFront.visible=!0,this._txtConsume.visible=!0;var e=this._model.getCityWarSceneConfig(SceneInfoVo.CITYWAR_FRONTPALACE);this._txtConsume.text=StringUtil.substitute("(消耗{0}积分)",e.go_point),this._txt1.visible=!1,this._btnBack.visible=!0},n.setPalacetType=function(){this._btnBack.visible=!0,this._btnFront.visible=!1,this._containerAttack.visible=!1,this._txt1.visible=!0},n.setTxt1=function(e){this._txtConsume.text=e},t}(BaseView);egret.registerClass(CWOperateView,"CWOperateView");var CWPersonDuiHuanItem=function(e){function t(){e.call(this),this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CWJFDHItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiCompHandler=function(){},s.setData=function(e){this._txtPoint.text=e.need_point.toString();var t=e.goodsList,i=GoodsListProxy.getInstance().getGoodsInfoByType(t[0].asset_id);i.num=t[0].value,this._goodsItem.data=i},i(s,"width",function(){return 145}),s.dispose=function(){e.prototype.dispose.call(this),this._goodsItem&&(this._goodsItem.parent&&this._goodsItem.parent.removeChild(this._goodsItem),this._goodsItem.dispose(),this._goodsItem=null)},t}(BaseView);egret.registerClass(CWPersonDuiHuanItem,"CWPersonDuiHuanItem");var CWPersonRankView=function(e){function t(){e.call(this),this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CWPersonRankViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)},n.onAdd=function(){e.prototype.onAdd.call(this),this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15202)),this._model.addEventListener(CityWarModel.UPDATE_PERSONRANKINFO,this.updateInfo,this)},n.onRemove=function(){e.prototype.onRemove.call(this),this._model.removeEventListener(CityWarModel.UPDATE_PERSONRANKINFO,this.updateInfo,this)},n.updateInfo=function(e){null==this._itemCach&&(this._itemCach=new Array),this.clearContainer();for(var t=this._model.personRankInfo,i=t.siege_scores,n=0;n<i.length;n++){var s=this._itemCach[n];null==s&&(s=new CWRankItem,this._itemCach.push(s)),s.setData(i[n],!0),s.y=51*n,this._container.addChild(s)}},n.clearContainer=function(){for(;this._container.numChildren>0;)this._container.removeChildAt(0)},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.onRemove();for(var i=t._itemCach,n=0;n<i.length;n++){var s=i[n];this._container.contains(s)&&this._container.removeChild(s),s.dispose(),s=null}t._itemCach=null,t=null},t}(BaseView);egret.registerClass(CWPersonRankView,"CWPersonRankView");var CWPersonRewardConfigView=function(e){function t(){e.call(this),this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CityWarPersonRewardViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._lrContainer=new CustomRLContainer(0,585),this._lrContainer.x=7,this._lrContainer.y=45,this._lrContainer.setBtnY(50),this.addChild(this._lrContainer),this.setPointDuiHuan(),this.setRankReward()},n.setRankReward=function(){if(null==this._duihuanItemCach){this._duihuanItemCach=new Array;for(var e=this._model.getTypeRewardConfigList(CityWarRewardConfigVo.PERSON_DABIAO),t=0;t<e.length;t++){var i=e[t],n=new CWPersonDuiHuanItem;n.setData(i),this._duihuanItemCach.push(n)}this._lrContainer.setItemList(this._duihuanItemCach,4)}},n.setPointDuiHuan=function(){if(null==this._rewardItemCach){this._rewardItemCach=new Array;for(var e=this._model.getTypeRewardConfigList(CityWarRewardConfigVo.PERSONPOINT),t=0;t<e.length;t++){var i=e[t],n=new CWConfigRewardItem;n.setData(i),n.y=135*t+8,this._itemCotainer.addChild(n),this._rewardItemCach.push(n)}}},n.dispose=function(){e.prototype.dispose.call(this);for(var t=this,i=t._rewardItemCach,n=0;n<i.length;n++){var s=i[n];s.parent&&s.parent.removeChild(s),s.dispose(),s=null}t._rewardItemCach=null;for(var a=t._duihuanItemCach,n=0;n<a.length;n++){var o=a[n];o.parent&&o.parent.removeChild(o),o.dispose(),o=null}t._duihuanItemCach=null,t=null},t}(BaseView);egret.registerClass(CWPersonRewardConfigView,"CWPersonRewardConfigView");var CWRankItem=function(e){function t(){e.call(this),this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CWRankItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){},n.setData=function(e,t){this._txtRank.htmlText=e.rank_id.toString(),t?(this._txtName1.text=e.role_name,this._txtName2.text=e.guild_name):(this._txtName1.text=e.guild_name,this._txtName2.text=e.role_name),this._txtPoint.text=e.score.toString();var i=0;switch(e.rank_id){case 1:i=16765440;break;case 2:i=11425994;break;case 3:i=173287;break;default:i=15192247}this._txtName1.textColor=i,this._txtName2.textColor=i,this._txtRank.textColor=i,this._txtPoint.textColor=i},t}(BaseView);egret.registerClass(CWRankItem,"CWRankItem");var CWRefreshItem=function(e){function t(){e.call(this),this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CWRefreshItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickThis,this)},n.setData=function(e){this._vo=e,this._txtName.text=e.name,this._headItem.setHeadURLByPartner(e.icon)},n.clickThis=function(e){SceneModel.getInstance().isCityWarInside()?this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15412,{id:this._vo.roleID})):SceneModel.getInstance().isCityWarFrontPalace()?this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15502,{id:this._vo.roleID})):SceneModel.getInstance().isCityWarPalace()&&this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15612,{id:this._vo.roleID}))},n.dispose=function(){e.prototype.dispose.call(this),this._headItem&&(this._headItem.parent&&this._headItem.parent.removeChild(this._headItem),this._headItem.dispose(),this._headItem=null)},t}(BaseView);egret.registerClass(CWRefreshItem,"CWRefreshItem");var CWRefreshView=function(e){function t(){e.call(this),this._canRefresh=!0,this._si=0,this._cd=0,this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CWRefreshViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._btnRefresh.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this._model.addEventListener(CityWarModel.UPDATE_CANATTACKLIST,this.updateAttackList,this)},n.onClickBtn=function(e){var t=this;this._canRefresh?(this._canRefresh=!1,this._btnRefresh.filters=[Tools.GrayFilter],this._btnRefresh.touchEnabled=!1,this._cd=this._model.getRefreshCD(),SceneModel.getInstance().isCityWarInside()?this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15411)):SceneModel.getInstance().isCityWarFrontPalace()?this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15501)):SceneModel.getInstance().isCityWarPalace()&&this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15611)),this._si=setTimeout2(function(){t._canRefresh=!0,t._btnRefresh.filters=null,t._btnRefresh.touchEnabled=!0},1e3*this._cd)):Message.show(StringUtil.substitute("{0}秒才可以刷新一次",this._cd))},n.updateAttackList=function(e){for(null==this._itemCach&&(this._itemCach=new Array);this._container.numChildren>0;)this._container.removeChildAt(0);for(var t=this._model.attackPlayerList,i=0;i<t.length;i++){var n=t[i],s=this._itemCach[i];null==s&&(s=new CWRefreshItem,this._itemCach.push(s)),s.setData(n),s.x=0,s.y=100*i,this._container.addChild(s)}},n.dispose=function(){e.prototype.dispose.call(this),this._model.removeEventListener(CityWarModel.UPDATE_CANATTACKLIST,this.updateAttackList,this);for(var t=0;t<this._itemCach.length;t++){var i=this._itemCach[t];this._container.contains(i)&&this._container.removeChild(i),i.dispose(),i=null}this._itemCach=null},t}(BaseView);egret.registerClass(CWRefreshView,"CWRefreshView");var CWStroageItem=function(e){function t(){e.call(this),this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CWStroageItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)},s.setData=function(e){var t=GoodsListProxy.getInstance().getGoodsInfoByType(e);t.num=1,this._goodsItem.data=t},s.setNum=function(e){var t=Tools.convertNumber(e);this._txtNum.text=StringUtil.substitute("{0}",t)},i(s,"width",function(){return 145}),s.dispose=function(){e.prototype.dispose.call(this),this._goodsItem&&this._goodsItem&&(this._goodsItem.parent&&this._goodsItem.parent.removeChild(this._goodsItem),this._goodsItem.dispose(),this._goodsItem=null)},t}(BaseView);egret.registerClass(CWStroageItem,"CWStroageItem");var CityWarHelpWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/cityWar/CityWarHelpWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.CITYWAR,this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this)},n.onClickBtn=function(e){this.isPop=!1},n.dispose=function(){e.prototype.dispose.call(this)},t}(LayeroutWindow);egret.registerClass(CityWarHelpWindow,"CityWarHelpWindow");var CityWarRewardWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/cityWar/CityWarRewardConfigWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.CITYWAR,this.setImageTitle("cityWar_json.cityWar_titleReward"),this._tab.dataProvider=new eui.ArrayCollection(["公会奖励","个人奖励"]),this._tab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTabChange,this),this.setIndex(0)},n.onTabChange=function(e){this.setIndex(this._tab.selectedIndex)},n.setIndex=function(e){var t=this;switch(t._currentView&&t._container.contains(t._currentView)&&(t._container.removeChild(t._currentView),t._currentView.onRemove()),e){case 0:null==t._guildRewardView&&(t._guildRewardView=new CWGuildRewardConfigView),t._currentView=t._guildRewardView;break;case 1:null==t._personRewardView&&(t._personRewardView=new CWPersonRewardConfigView),t._currentView=t._personRewardView}t._container.addChild(t._currentView),t._currentView.onAdd(),t=null},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t._guildRewardView&&(t._container.contains(t._guildRewardView)&&t._container.removeChild(t._guildRewardView),t._guildRewardView.dispose(),t._guildRewardView=null),t._personRewardView&&(t._container.contains(t._personRewardView)&&t._container.removeChild(t._personRewardView),t._personRewardView.dispose(),t._personRewardView=null),t._currentView=null,t=null},t}(LayeroutWindow);egret.registerClass(CityWarRewardWindow,"CityWarRewardWindow");var CityWarView=function(e){function t(){e.call(this),this.a=null,this._model=CityWarModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/cityWar/CityWarViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._bgPic=new PicLoader;var e=UrlUtil.getCityWarUrl("cityWar_bg1");if(this._bgPic.load(e),this.addChildAt(this._bgPic,0),this.setReward(),this.setTitle(),this._btnReward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnReward,this),this._btnJoin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnJoin,this),this._txtLink.htmlText=StringUtil.substitute("<font color='#00d228'><u><a href='event:'>攻城奖励</a></u></font>"),this._txtLink.addEventListener(egret.TextEvent.LINK,this.onLink,this),this._bodyContainer.touchEnabled=!1,this._bodyContainer.touchChildren=!1,this._txtTime.visible=!this._model.isOpen(),!this._model.isOpen()&&!this._model.isOpenCityWar){var t,i=SingleModel.getInstance().getSingVO(SingleModel.KEY_15202),n=i.value,s=n.match(/\d+/g);if(HuoDongDailyModel.getInstance().kaiFuDay<this._model.cwKFOpenDay){var a=this._model.cwKFOpenDay-HuoDongDailyModel.getInstance().kaiFuDay,o=1e3*(RoleModel.getInstance().serverTime+86400*a),r=new Date(o);t=""}else{var r=TimeUtil.getNextDay(this._model.cwOpenWeek),h=TimeUtil.getZero(r),l=TimeUtil.getKaiFuZero();(h-l)/864e5<this._model.cwDaysLimit&&(r=new Date(r.getTime()+6048e5)),t="(周六)"}this._txtTime.text=StringUtil.substitute("{0}月{1}日{4}{2}:{3}开启攻城战",r.getMonth()+1,r.getDate(),Tools.bu0(s[0]),Tools.bu0(s[1]),t),this._btnJoin.parent&&this._btnJoin.parent.removeChild(this._btnJoin)}},n.onAdd=function(){e.prototype.onAdd.call(this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13501_UPDATE,this.updateFigureData,this),this._model.addEventListener(CityWarModel.UPDATE_OCCUPYINFO,this.updateOccupyInfo,this),this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15200)),this.setTitle()},n.onRemove=function(){e.prototype.onRemove.call(this),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13501_UPDATE,this.updateFigureData,this),this.removeGlobalEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.rewardStatuChange,this),this._model.removeEventListener(CityWarModel.UPDATE_OCCUPYINFO,this.updateOccupyInfo,this),this.removeTitle(),this.removeBody()},n.removeTitle=function(){this._titleEffect&&(this._titleEffect.dispose(),this._titleEffect=null)},n.removeBody=function(){this._noBodyEffect&&(this._noBodyEffect.dispose(),this._noBodyEffect=null)},n.rewardStatuChange=function(e){this._btnReward.parent&&this._btnReward.parent.removeChild(this._btnReward)},n.updateOccupyInfo=function(e){var t=this._model.occupyInfo;if(t.role_id>0)this._txtGuildName.text=t.guild_name,this._txtPlayerName.text=t.role_name,t.role_id==RoleModel.getInstance().getRoleCommon().role_id?this.updateMyFigure():this.dispatchGlobalEvent(new ParamEvent(RankEvtName.RANK_CCMD13501,{id:t.role_id})),this.removeBody();else if(this._txtGuildName.text="虚位以待",this._txtPlayerName.text="虚位以待",null==this._noBodyEffect){var i=UrlUtil.getCommonEffectURL("shacheng1");this._noBodyEffect=EffectManager.getInstance().showEffect(i,92,265,this._bodyContainer,70,!0)}},n.setTitle=function(){if(!this._titleEffect){var e=UrlUtil.getTitleURL(10016);this._titleEffect=EffectManager.getInstance().showEffect(e,88,43,this._titleContainer,70,!0)}},n.setReward=function(){var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_15203),t=Tools.changeToNodeDropList(e.value);this._itemCach=new Array;for(var i=0;i<t.length;i++){var n=GoodsListProxy.getInstance().getGoodsInfoByType(t[i].asset_id);n.num=t[i].value;var s=new GoodsItem;s.data=n,s.x=101*i,s.y=0,this._itemContainer.addChild(s),this._itemCach.push(s)}},n.updateFigure=function(e,t,i,n,s){this._body||(this._body=new BigFigure,this._body.touchEnabled=!1,this._body.x=295,this._body.y=330,this.addChild(this._body)),this._body.changeBody(e,t,i),this._body.changeWeapon(e,t,n),this._body.changeWing(s)},n.updateFigureData=function(e){var t=e.data,i=t.rank_partners[0],n=AppearanceUtil.changeAppListToVo(i.appearance);this.updateFigure(i.career,i.sex,n.cloth,n.weapon,n.wing)},n.updateMyFigure=function(){var e=RoleModel.getInstance().getRoleBaseInfo();if(e){var t=e.getAppVo();this.updateFigure(e.getCareer(),e.getSex(),t.cloth,t.weapon,t.wing)}},n.onClickBtnReward=function(e){this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.SHOW_DAILYREWARDVIEW))},n.onClickBtnJoin=function(e){this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15220))},n.onLink=function(e){this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.SHOW_REWARDCONFIG_VIEW))},n.dispose=function(){var e=this;e.onRemove();for(var t=0;t<e._itemCach.length;t++)e._itemCach[t].dispose(),e._itemContainer.contains(e._itemCach[t])&&e._itemContainer.removeChild(e._itemCach[t]);e._titleEffect&&(e._titleEffect.dispose(),e._titleEffect=null),e._body&&(e._bodyContainer.contains(e._body)&&e._bodyContainer.removeChild(e._body),e._body.dispose(),e._body=null),e._bgPic&&(e._bgPic.parent&&e._bgPic.parent.removeChild(e._bgPic),e._bgPic.dispose(),e._bgPic=null)},t}(BaseView);egret.registerClass(CityWarView,"CityWarView");var CityWarWindowView=function(e){function t(){e.call(this),this.skinName="resource/game_skins/cityWar/CityWarWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.CITYWAR,this._tab.dataProvider=new eui.ArrayCollection(["沙城决战","公会排名","个人排名","奖励分配"]),this._tab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTabChange,this),this._btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this),this.setIndex(0)},n.onClickHelp=function(e){this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.SHOW_HELP_VIEW))},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this);var t=this;t.setImageTitle("cityWar_json.cityWar_title"+t._tab.selectedIndex)},n.onTabChange=function(e){this.setIndex(this._tab.selectedIndex)},n.setIndex=function(e){var t=this;switch(t.setImageTitle("cityWar_json.cityWar_title"+e),t._currentView&&t._container.contains(t._currentView)&&(t._container.removeChild(t._currentView),t._currentView.onRemove()),e){case 0:null==t._cityWarView&&(t._cityWarView=new CityWarView),t._currentView=t._cityWarView;break;case 1:null==t._guildRankView&&(t._guildRankView=new CWGuildRankView,t._guildRankView.x=-2),t._currentView=t._guildRankView;break;case 2:null==t._personRankView&&(t._personRankView=new CWPersonRankView,t._personRankView.x=-2),t._currentView=t._personRankView;break;case 3:null==t._assignView&&(t._assignView=new CWAssignRewardView),t._currentView=t._assignView}t._container.addChild(t._currentView),t._currentView.onAdd(),t=null},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this._currentView&&this._currentView.onRemove()},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._currentView&&this._currentView.onAdd()},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t._cityWarView&&(t._cityWarView.parent&&t._cityWarView.parent.removeChild(t._cityWarView),t._cityWarView.dispose(),t._cityWarView=null),t._guildRankView&&(t._guildRankView.parent&&t._guildRankView.parent.removeChild(t._guildRankView),t._guildRankView.dispose(),t._guildRankView=null),t._personRankView&&(t._personRankView.parent&&t._personRankView.parent.removeChild(t._personRankView),t._personRankView.dispose(),t._personRankView=null),t._assignView&&(t._assignView.parent&&t._assignView.parent.removeChild(t._assignView),t._assignView.dispose(),t._assignView=null),t._currentView=null},t}(LayeroutWindow);egret.registerClass(CityWarWindowView,"CityWarWindowView");var Alert=function(e){function t(){e.call(this),this._left=0,this._contentSp=new CommonSprite,this.txt=new CustomLabel,this.addChild(this.txt),this.addChild(this._contentSp),this.width=300,this.height=200}__extends(t,e);var i=(__define,t),n=i.prototype;return t.show=function(e,i,n,s,a,o,r){void 0===i&&(i=0),void 0===n&&(n=null),void 0===s&&(s=null),void 0===a&&(a=0),void 0===o&&(o="确定"),void 0===r&&(r="取消");var h=PopManager.getInstance().create(t);h.setAlert(e,i,n,s,a,o,r)},n.setAlert=function(e,t,i,n,s,a,o){void 0===t&&(t=0),void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=0),void 0===a&&(a="确定"),void 0===o&&(o="取消");for(var r=this;r._contentSp.numChildren;)r._contentSp.removeChildAt(0);null==r.txt&&(r.txt=new CustomLabel),r.txt.fontFamily="Microsoft YaHei",r.txt.size=18,r.txt.textAlign="center",r.txt.width=300,r.txt.height=50,r.txt.horizontalCenter=0,r.txt.lineSpacing=6,r.txt.y=60,r.txt.touchEnabled=!1,r.txt.wordWrap=!0,r.txt.htmlText=e,r.addChild(r.txt);var h=new CustomImage;h.source=RES.getRes("share_json.share_messageItem"),h.scale9Grid=new egret.Rectangle(12,10,160,12),r._contentSp.addChild(h),h.width=300,h.height=200;var l;0==t?(i&&(r._okFun=i),null==r.yesBtn&&(r.yesBtn=new CustomButton),r.yesBtn.label=a,r._contentSp.addChild(r.yesBtn),r.yesBtn.x=h.width-r.yesBtn.width>>1,r.yesBtn.y=r.txt.y+r.txt.textHeight+20,r.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,r.OkHandler,r)):1==t&&(i&&(r._okFun=i),n&&(r._cancelFun=n),null==r.yesBtn&&(r.yesBtn=new CustomButton),l=18,r.yesBtn.label=a,r._contentSp.addChild(r.yesBtn),r.yesBtn.x=l,r.yesBtn.y=r.txt.y+r.txt.textHeight+10,r.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,r.OkHandler,r),null==r.noBtn&&(r.noBtn=new CustomButton),r.noBtn.label=o,r._contentSp.addChild(r.yesBtn),r.noBtn.x=r.yesBtn.x+r.yesBtn.width+20,r.noBtn.y=r.yesBtn.y,r.noBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,r.cancelHandler,r),r._contentSp.addChild(r.noBtn)),s>0&&(this._left=s,this.daoJiShi(),TimerManager.getInstance().add(1e3,this.daoJiShi,this))},n.OkHandler=function(){this.close(),this._okFun&&this._okFun.apply(null),this._okFun=null},n.daoJiShi=function(){return this._left<=0?(TimerManager.getInstance().remove(1e3,this.daoJiShi,this),void this.close()):(this._left--,void(this.yesBtn.label=this._left.toString()))},n.cancelHandler=function(){this.close(),this._cancelFun&&this._cancelFun.apply(null),this._cancelFun=null},n.close=function(){this.txt&&this.txt.parent&&(this.txt.parent.removeChild(this.txt),this.txt=null);var e=PopManager.getInstance().getWindow(t);PopManager.getInstance().remove(e)},t}(CommonSprite);egret.registerClass(Alert,"Alert");var BigFigure=function(e){function t(t,i){void 0===t&&(t=!0),void 0===i&&(i="BigFigure"),e.call(this,i),this.secondAction=!1,this.hasEvtListener=!1,this._resList=[],this.secondAction=t,this.touchEnabled=!1,this.bodyContainer=new CommonSprite,this.addChild(this.bodyContainer),this._wingMovieClip=new BitmapMovieClip("BigFigure_Player_wing"),this._wingMovieClip.setDealy(120),this.bodyContainer.addChild(this._wingMovieClip),this._bodyMovieClip=new BitmapMovieClip("BigFigure_Player_body"),this.bodyContainer.addChild(this._bodyMovieClip),this._weaponMovieClip=new BitmapMovieClip("BigFigure_Player_weapon"),this.bodyContainer.addChild(this._weaponMovieClip)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.changeBody=function(e,t,i){void 0===i&&(i=1),0==i&&(i=1),this._bodyURL_a=UrlUtil.getFigureClothURL(e,t,i)+"stand",this.loadBody(this._bodyURL_a)},n.loadBody=function(e){if(null!=e&&""!=e){var t=this._resList.indexOf(this._bodyURL);t>=0&&this._resList.splice(t,1),this._bodyURL=e,SourceCache.getInstance().has(this._bodyURL)?(this._bodyMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._bodyURL)),this.redraw()):(-1==this._resList.indexOf(this._bodyURL)&&this._resList.push(this._bodyURL),this.addEvent(),0==SourceCache.getInstance().isLoading(this._bodyURL)&&SourceCache.getInstance().load(this._bodyURL,ResourceType.ANIMATION))}},n.changeWeapon=function(e,t,i){void 0===i&&(i=0),0!=i&&(this._weaponURL_a=UrlUtil.getFigureWeaponURL(i)+"stand",this.loadWeapon(this._weaponURL_a))},n.loadWeapon=function(e){if(null!=e&&""!=e){var t=this._resList.indexOf(this._weaponURL);t>=0&&this._resList.splice(t,1),this._weaponURL=e,SourceCache.getInstance().has(this._weaponURL)?(this._weaponMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._weaponURL)),this.redraw()):(-1==this._resList.indexOf(this._weaponURL)&&this._resList.push(this._weaponURL),this.addEvent(),0==SourceCache.getInstance().isLoading(this._weaponURL)&&SourceCache.getInstance().load(this._weaponURL,ResourceType.ANIMATION))}},n.changeWing=function(e){void 0===e&&(e=0),0!=e&&(this._wingURL_a=UrlUtil.getFigureWingURL(e)+"stand",this.loadWing(this._wingURL_a))},n.loadWing=function(e){if(null!=e&&""!=e){var t=this._resList.indexOf(this._wingURL);t>=0&&this._resList.splice(t,1),this._wingURL=e,SourceCache.getInstance().has(this._wingURL)?(this._wingMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._wingURL)),this.redraw()):(-1==this._resList.indexOf(this._wingURL)&&this._resList.push(this._wingURL),this.addEvent(),0==SourceCache.getInstance().isLoading(this._wingURL)&&SourceCache.getInstance().load(this._wingURL,ResourceType.ANIMATION))}},n.loadResComplete=function(e){var t=e.data.url,i=e.data.mc,n=this._resList.indexOf(t);-1!=n&&(this._resList.splice(n,1),t==this._bodyURL?(this._bodyMovieClip.setMovieClipData(i),this.redraw()):t==this._wingURL?(this._wingMovieClip.setMovieClipData(i),this.redraw()):t==this._weaponURL&&(this._weaponMovieClip.setMovieClipData(i),this.redraw()))},n.addEvent=function(){0==this.hasEvtListener&&(SourceCache.getInstance().addEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,this.loadResComplete,this),this.hasEvtListener=!0)},n.redraw=function(){null!=this._wingURL&&0==this.bodyContainer.contains(this._wingMovieClip)&&this.bodyContainer.addChild(this._wingMovieClip),null!=this._bodyURL&&0==this.bodyContainer.contains(this._bodyMovieClip)&&this.bodyContainer.addChild(this._bodyMovieClip),null!=this._weaponURL&&0==this.bodyContainer.contains(this._weaponMovieClip)&&this.bodyContainer.addChild(this._weaponMovieClip),null!=this._bodyMovieClip&&null!=this._bodyMovieClip.parent&&this._bodyMovieClip.gotoAndPlay(1,!0,1,6),null!=this._weaponMovieClip&&null!=this._weaponMovieClip.parent&&this._weaponMovieClip.gotoAndPlay(1,!0,1,6),null!=this._wingMovieClip&&null!=this._wingMovieClip.parent&&this._wingMovieClip.gotoAndPlay(1,!0,1,6),this.layoutMC()},n.layoutMC=function(){1==this.bodyContainer.contains(this._wingMovieClip)&&this.bodyContainer.setChildIndex(this._wingMovieClip,this.bodyContainer.numChildren-1),1==this.bodyContainer.contains(this._bodyMovieClip)&&this.bodyContainer.setChildIndex(this._bodyMovieClip,this.bodyContainer.numChildren-1),1==this.bodyContainer.contains(this._weaponMovieClip)&&this.bodyContainer.setChildIndex(this._weaponMovieClip,this.bodyContainer.numChildren-1)},n.isHit=function(e){return this.localPoint=e,this._bodyMovieClip&&1==this._bodyMovieClip.isHit(this.localPoint)?!0:this._weaponMovieClip&&1==this._weaponMovieClip.isHit(this.localPoint)?!0:!1},n.dispose=function(){this._wingURL=null,this._bodyURL=null,this._weaponURL=null,this._bodyMovieClip&&(this._bodyMovieClip.dispose(),1==this.bodyContainer.contains(this._bodyMovieClip)&&this.bodyContainer.removeChild(this._bodyMovieClip)),this._weaponMovieClip&&(this._weaponMovieClip.dispose(),1==this.bodyContainer.contains(this._weaponMovieClip)&&this.bodyContainer.removeChild(this._weaponMovieClip)),this._wingMovieClip&&(this._wingMovieClip.dispose(),1==this.bodyContainer.contains(this._wingMovieClip)&&this.bodyContainer.removeChild(this._wingMovieClip)),SourceCache.getInstance().removeEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,this.loadResComplete,this),this.hasEvtListener=!1},n.setTounchEnable=function(e){this.bodyContainer&&(this.bodyContainer.touchEnabled=!1,this.bodyContainer.touchChildren=!1),this._bodyMovieClip&&(this._bodyMovieClip.touchEnabled=!1),this._weaponMovieClip&&(this._weaponMovieClip.touchEnabled=!1),this._wingMovieClip&&(this._wingMovieClip.touchEnabled=!1)},t.INDEX=0,t}(CommonSprite);egret.registerClass(BigFigure,"BigFigure");var EquipItemSmall=function(e){function t(t,i,n,s,a){void 0===t&&(t=!1),void 0===i&&(i=!0),void 0===n&&(n=null),void 0===s&&(s=!1),void 0===a&&(a=!1),e.call(this,t,i,n,s,a),this.skinName="resource/game_skins/common/GoodsItemSmallSkin.exml",this._iconUrl="itemBgSmall_"}__extends(t,e);var i=(__define,t);i.prototype;return t}(EquipItem);egret.registerClass(EquipItemSmall,"EquipItemSmall");var FightValueChange=function(){function e(){this._fightValueList=new Object,this._fightValueAll=0}var t=__define,i=e,n=i.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},t(n,"selectedPartnerVO",void 0,function(e){e!=this._selectedPartnerVO&&(this._selectedPartnerVO=e)}),n.updateFigtPowerHandler=function(){var e;e=this._selectedPartnerVO?this._selectedPartnerVO.parnerID:FigureModel.getInstance().selectedPartnerVO.parnerID;var t=PlayerBaseVO.makeUid(null,e),i=RoleModel.getInstance().getPartnerInfo(t);if(this._fightValueList[i.parnerID]&&this._fightValueList[i.parnerID]>0){var n=i.getFightValue()-this._fightValueList[i.parnerID];0!=n&&(null==this._numberFloat&&(this._numberFloat=new NumberFloat,this._numberFloat.addEventListener(NumberFloat.CLOSE,this.disposeNumberFloat,this)),this._numberFloat.showNumber(i.getFightValue(),n,GameContent.stageWidth-255>>1,(GameContent.stageHeight-65>>1)+100))}this._fightValueList[i.parnerID]=i.getFightValue()},n.updateFightValue=function(){var e,t=RoleModel.getInstance().getPartnerList();for(var i in t)e=t[i],this._fightValueList[e.parnerID]=e.getFightValue()},n.startAll=function(){GameDispatcher.getInstance().addEventListener(PlayerBaseVO.CHANGE_FIGHTVALUE,this.updateFigtPowerAllHandler,this)},n.stopAll=function(){GameDispatcher.getInstance().removeEventListener(PlayerBaseVO.CHANGE_FIGHTVALUE,this.updateFigtPowerAllHandler,this)},n.updateFigtPowerAllHandler=function(){if(this._fightValueAll>0){var e=RoleModel.getInstance().getAllPartnerFight()-this._fightValueAll;0!=e&&(null==this._numberFloat&&(this._numberFloat=new NumberFloat,this._numberFloat.addEventListener(NumberFloat.CLOSE,this.disposeNumberFloat,this)),this._numberFloat.showNumber(RoleModel.getInstance().getAllPartnerFight(),e,GameContent.stageWidth-255>>1,(GameContent.stageHeight-65>>1)+100))}this._fightValueAll=RoleModel.getInstance().getAllPartnerFight()},n.updateFightValueAll=function(){this._fightValueAll=RoleModel.getInstance().getAllPartnerFight()},n.disposeNumberFloat=function(e){this._numberFloat.removeEventListener(NumberFloat.CLOSE,this.disposeNumberFloat,this),this._numberFloat&&(this._numberFloat.dispose(),this._numberFloat=null)
},e}();egret.registerClass(FightValueChange,"FightValueChange");var GetMaterialWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/common/GetMaterialWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.GET_MATERIAL},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.onCloseHandler=function(){this.btnReturn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t.dispose(),t=null;this._item&&(this._item.data&&(this._item.data=null),this._item.dispose(),this._item=null),this._itemArr=[],e.prototype.onCloseHandler.call(this)},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this)},n.setData=function(e,t,i){this._itemArr=[],this._typeId=e,this._type=t;for(var n,s=0;s<i.length;s++)n=new GetMaterialItem,this._itemContainer.addChild(n),n.y=s*n.height,1==i.length?n.setData(t,i[s]):n.setData(i[s].type,i[s].linkStr),this._itemArr.push(n);var a=this._itemContainer.y+56*i.length+20;this.panelSkin.height=a,this.setCenter(),this.goodsinfo=GoodsListProxy.getInstance().getGoodsInfoByType(e),this.goodsinfo&&(this._item.data=this.goodsinfo)},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},t}(LayeroutWindow);egret.registerClass(GetMaterialWindow,"GetMaterialWindow");var GetMaterialBuyWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/common/GetMaterialBuyWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this._item.showLv(!1)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnChong.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChong,this),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.numStep.addEventListener(CustomNumberStep2.CHANGE,this.onChange,this)},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this.btnChong.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChong,this),this.btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.numStep.removeEventListener(CustomNumberStep2.CHANGE,this.onChange,this)},n.onChange=function(){this.txtTol.text=(this._shopVo.con_gold*this.numStep.getValue()).toString()},n.onChong=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN)),this.isPop=!1},n.onBuy=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MallEvtName.MALL_CCMD11004,{id:this._shopVo.template_id,num:this.numStep.getValue()})),this.isPop=!1},n.setData=function(t,i,n){e.prototype.setData.call(this,t,i,n),this.goodsinfo&&(this._item.data=this.goodsinfo,this.txtName.htmlText="<font color='"+ColorUtil.getGoodColor(this.goodsinfo.quality-1)+"'>"+this.goodsinfo.name+"</font>",this._shopVo=MallModel.getInstance().getShopByTypeId(MallModel.MALL_TYPE_1,this.goodsinfo.template_id),this.txtCost.text=this._shopVo.con_gold.toString(),this.txtTol.text=this._shopVo.con_gold.toString(),this.numStep.setValue(1))},t}(GetMaterialWindow);egret.registerClass(GetMaterialBuyWindow,"GetMaterialBuyWindow");var GetMaterialItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/common/GetMaterialItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickThisHandler,this)},s.onClickThisHandler=function(){switch(this.parent.parent.parent.isPop=!1,this._type){case"streng":GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_PACK,{index:0,isOpen:!0}));break;case"stone":this.dispatchGlobalEvent(new ParamEvent(FubenEvtName.OPEN_FUBEN_VIEW));break;case"soul":this.dispatchGlobalEvent(new ParamEvent(BossEvtName.OPEN_BOSS_WINDOW,1));break;case t.OPEN_CHECKPOINTBOSS:this.dispatchGlobalEvent(new ParamEvent(CheckPointBossEvtName.CHECKPOINTBOSS_OPEN_WINDOW));break;case t.OPEN_MATERIAL_FUBEN:this.dispatchGlobalEvent(new ParamEvent(FubenEvtName.OPEN_FUBEN_VIEW));break;case t.OPEN_FUBEN_TIAOZHAN:this.dispatchGlobalEvent(new ParamEvent(FubenEvtName.OPEN_FUBEN_VIEW,1));break;case t.OPEN_SECRET_MALL:this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_MALL));break;case t.OPEN_ROUND_BOSS:this.dispatchGlobalEvent(new ParamEvent(BossEvtName.OPEN_BOSS_WINDOW,6));break;case t.OPEN_TREASURE:this.dispatchGlobalEvent(new ParamEvent(TreasureEvtName.TREASURE_OPEN_WINDOW,{index:0,isOpen:!0}));break;case t.OPEN_FAST_FIGHT:this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_SPEED_PK));break;case t.OPEN_PK:break;case t.OPEN_BOSS:this.dispatchGlobalEvent(new ParamEvent(BossEvtName.OPEN_BOSS_WINDOW));break;case t.OPEN_ONE_RMB:this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.SHOW_ONE_RMB_VIEW));break;case t.OPEN_SHADOW:this.dispatchGlobalEvent(new ParamEvent(ShadowEvtName.OPEN_SHADOW,2));break;case t.OPEN_PET_SHOP:this.dispatchGlobalEvent(new ParamEvent(EventName.PET_OPEN_WINDOW,2))}},s.setData=function(e,t){this._type=e,this._linkStr=t,this._txtLink.htmlText=this._linkStr},i(s,"height",function(){return 56}),s.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickThisHandler,this),this.parent&&this.parent.removeChild(this)},t.OPEN_CHECKPOINTBOSS="OPEN_CHECKPOINTBOSS",t.OPEN_MATERIAL_FUBEN="OPEN_MATERIAL_FUBEN",t.OPEN_SECRET_MALL="OPEN_SECRET_MALL",t.OPEN_ROUND_BOSS="OPEN_ROUND_BOSS",t.OPEN_TREASURE="OPEN_TREASURE",t.OPEN_BOSS="OPEN_BOSS",t.OPEN_PK="OPEN_PK",t.OPEN_FUBEN_TIAOZHAN="OPEN_FUBEN_TIAOZHAN",t.OPEN_FAST_FIGHT="OPEN_FAST_FIGHT",t.OPEN_ONE_RMB="OPEN_ONE_RMB",t.OPEN_SHADOW="OPEN_SHADOW",t.OPEN_PET_SHOP="OPEN_PET_SHOP",t}(Csprite);egret.registerClass(GetMaterialItem,"GetMaterialItem");var GoodsItemSmall=function(e){function t(t,i,n,s){void 0===t&&(t=!1),void 0===i&&(i=!0),void 0===n&&(n=null),void 0===s&&(s=!0),e.call(this,t,i,n,s),this.skinName="resource/game_skins/common/GoodsItemSmallSkin.exml",this._iconUrl="itemBgSmall_"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this)},t}(GoodsItem);egret.registerClass(GoodsItemSmall,"GoodsItemSmall");var GuildAertManager=function(){function e(){this._itemDic=new Object}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},i.add=function(e,t,i,n,s){if(null==this._itemDic[e]||void 0==this._itemDic[e]){var a=new GuildAlert(t,i,n,s);this._itemDic[e]=a}},i.remove=function(e){this._itemDic[e]&&(this._itemDic[e].dispose(),delete this._itemDic[e])},i.update=function(e,t,i){var n=this._itemDic[e];n&&(n.x=t,n.y=i)},i.show=function(e){if(this._itemDic)for(var t in this._itemDic)if(this._itemDic.hasOwnProperty(t)){var i=this._itemDic[t];i.visible=e}},e}();egret.registerClass(GuildAertManager,"GuildAertManager");var GuildAlert=function(e){function t(t,i,n,s){void 0===t&&(t=""),e.call(this);var a=new CustomImage;a.source=RES.getRes("share_json.share_guildAlertBg"),this.addChild(a),this._txt=new CustomLabel,this._txt.size=16,this._txt.x=9,this._txt.y=5,this._txt.textAlign="center",this._txt.verticalAlign="middle",this._txt.bold=!0,this._txt.width=160,this._txt.height=40,this.addChild(this._txt),this._txt.addMiaoBian(),this._txt.htmlText=t,i.addChild(this),this.x=n,this.y=s}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dispose=function(){this.parent&&this.parent.removeChild(this),e.prototype.dispose.call(this)},t}(CommonSprite);egret.registerClass(GuildAlert,"GuildAlert");var HeadItem=function(e){function t(t){void 0===t&&(t=0),e.call(this),this._headId=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/common/HeadItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._headId>0&&(this.headIcon.source=UrlUtil.getHeadURLByPartner(0,0,this._headId))},n.setHeadURLByPartner=function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=1),void 0===i&&(i=1),this._headId=e,this.headIcon.source=UrlUtil.getHeadURLByPartner(t,i,this._headId)},n.setHeadKingBg=function(e){e>0?(this.kingBg||(this.kingBg=new PicLoader,this.kingBg.x=-14,this.kingBg.y=-14),this.kingBg.load(UrlUtil.getHeadURLByKing(e)),this.addChild(this.kingBg)):this.kingBg&&(this.kingBg.dispose(),this.kingBg=null)},n.dispose=function(){e.prototype.dispose.call(this),this.headIcon.source=null,this.kingBg&&(this.kingBg.dispose(),this.kingBg=null)},t}(BaseView);egret.registerClass(HeadItem,"HeadItem");var HelpWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/common/HelpWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_wfsm"),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.setType=function(e){switch(e){case t.GUILD_FARM:this.txtContent.htmlText="<font color='#ffd200'>玩法规则：</font>\n1.加入公会后自动开启庄园农田\n2.农田随转生等级逐渐开启，最多可达12块地\n3.每块农田在收获进度满时都可获得公会贡献奖励，奖励数量受公会庄园等级影响\n<font color='#ffd200'>庄园攻略：</font>\n1.我的农田可进行施肥，施肥将加快农田收获，施肥有cd时间\n2.公会成员的农田可进行浇水，浇水将获得贡献并加快成员农田收获进度\n3.已成熟的成员农田可进行偷菜，偷菜将获得对方部分贡献";break;case t.GUILD_FUBEN:this.txtContent.htmlText="<font color='#ffd200'>玩法规则：</font>\n1.每人每天可无限次数挑战公会副本\n2.公会副本只能向上挑战，难度会逐渐增加\n3.在限定时间（30秒）内成功击杀BOSS视为通关成功\n4.公会副本产出最高橙色品质的羽翼装备\n<font color='#ffd200'>副本攻略：</font>\n1.每天可邀请本公会通关最高的玩家进行“助战”，助战每天仅限1次，可大幅提升成功率，建议在今天无法继续通关时使用\n2.每天可扫荡副本1次，建议在今天打到最高层数时再使用";break;case t.MINE:this.txtContent.htmlText="<font color='#ffd200'>玩法规则：</font>\n1.每人每天3次开采矿洞次数\n2.刷新有几率提高矿洞品质，矿洞品质越高，开采结束时获得金币和功勋越多\n3.刷新失败增加祝福值，祝福值可增加提升成功几率\n4.刷新到黄水晶和彩钻晶时可获得功勋技能礼包\n<font color='#ffd200'>矿洞攻略：</font>\n1.每天有5次掠夺其他玩家矿洞的机会，不要浪费\n2.掠夺时优先保证能够获胜，其次才是选择掠夺的矿洞品质\n3.复仇可双倍拿回自己被掠夺走的资源，记得查看矿洞记录\n4.刷新到高品质矿洞时，推荐使用加速立即完成，避免损失";break;case t.ORANGESUIT:this.txtContent.htmlText="<font color='#ffd200'>橙装说明：</font>\n1.角色自动穿戴当前战力最高的装备，普通装备有可能替换低级橙装（低级橙装不会消失）\n2.可直接合成当前等级能穿戴的最高级橙装，合成成功后自动穿戴\n3.合成橙装需要橙装碎片，可通过寻宝或分解低级橙装获得\n4.橙装碎片不会有损失，每个等级橙装合成，分解的碎片数量都是一致的\n5.若角色已经穿戴橙装，则可通过碎片升级橙装（需角色等级达到要求）\n6.橙装升级时，原来装备的橙装会自动分解为碎片并抵扣新橙装合成需要数量";break;case t.DARK:this.txtContent.htmlText="<font color='#ffd200'>玩法说明：</font>\n1.活动时间为每周一8点至每周日23点20分，周日23点30分结算排行奖励\n2.排行以本周玩家下降神殿的层数进行排名，以活动结束时的排名为准\n3.通过“点击”探索每层的坐标格子，其中一个格子可通往下一层\n4.探索格子会消耗次数，次数每隔一段时间自动恢复\n<font color='#ffd200'>玩法攻略：</font>\n1.每周活动中，每层中通往下层的格子都是固定的，不妨记录起来\n2.向公会或好友询问神殿每层的情况可以事半功倍\n3.探索格子时遇到其他玩家，可战胜对方并与之交换格子";break;case t.SHADOW:this.txtContent.htmlText="<font color='#ffd200'>光环等级：</font>\n1.消耗金币可喂养光环进行升级，提高光环加成属性\n2.喂养次数不满时随时间恢复，最多累计6次\n3.每个角色的喂养和次数相互独立\n<font color='#ffd200'>光环品阶：</font>\n1.消耗进阶丹可提升光环品阶，进阶丹可通过商城购买\n2.当进阶到每阶10星时可挑战光环守卫，战斗胜利光环进阶\n3.每个角色的光环互相独立升阶\n4.光环升阶到3阶可激活强大的光环技能\n<font color='#ffd200'>光环秘藏：</font>\n1.每人每天可开启秘藏5次\n2.秘藏花费随开启次数增加";break;case t.SKILL_FEAT:this.txtContent.htmlText="<font color='#ffd200'>技能说明：</font>\n1.功勋技能通过消耗技能书获得\n2.每个角色最多可学习8个功勋技能，技能栏随转生等级开启\n3.功勋技能可通过消耗功勋升级，最高可达10级\n4.功勋技能升级有成功几率，升级失败时技能等级会降低1级\n<font color='#ffd200'>高手进阶：</font>\n1.相同的功勋技能，效果可叠加\n2.遗忘功勋技能可获得大量功勋，可学习不需要的功勋技能再进行遗忘";break;case t.LUNHUI:this.txtContent.htmlText="<font color='#ffd200'>轮回说明：</font>\n1.轮回可令角色回到第1关，重新击杀boss获得包括元宝在内的奖励\n2.轮回有每天次数限制，vip等级越高，每天可轮回次数越多\n3.轮回需要角色通过一定数量的关卡，历史最高关卡每提高100关可轮回1次\n<font color='#ffd200'>回归说明：</font>\n1.终生卡用户可免费使用\n2.回归可使角色立即回到历史最高关卡，免去打boss的过程\n3.回归获得正常掉落的元宝，金币和材料，装备自动回收为强化石\n<font color='#ffd200'>超级轮回丹说明：</font>\n1、当背包内有超级轮回丹时，勾选后轮回自动消耗\n2、消耗超级轮回丹时，轮回无关卡需求，但是还是会提高关卡需求\n3、超级轮回丹可通过活动获得";break;case t.KING:this.txtContent.htmlText="<font color='#ffd200'>段位说明：</font>\n1.段位分为：青铜-白银-黄金-钻石，每个段位5级，每级4颗星\n2.挑战对手胜利可获得1颗星，连胜可额外再获得1颗星\n3.满星时段位等级提升，如【青铜1】晋升为【白银5】\n4.黄金和钻石段位在挑战失败时会扣除1颗星，星级扣除不会导致降级\n<font color='#ffd200'>活动规则：</font>\n1.每周一10点开启活动，每周日22点结束活动，22点30分结算奖励\n2.奖励分为段位奖励和钻石前5名奖励，均需要手动领取，领奖时效为本周结算至下周结束\n3.匹配对手成功扣除1次挑战次数，挑战次数随时间回复，也可直接元宝购买";break;case t.SHOP_CHEAP:this.txtContent.htmlText="<font color='#ffd200'>超值商店：</font>\n1.以周为单位的超值特惠商店，从周一至周日每天商品组合不同\n2.每天8款超值商品组合，购买越多折扣越大\n3.超值商品需要按照从1到8的顺序依次购买";break;case t.AWAKE:this.txtContent.htmlText="<font color='#ffd200'>玩法说明：</font>\n1.消耗真气激活觉醒星级，每个星级加成特定伙伴属性\n2.真气可通过商城购买真气酒获得\n3.每个境界的最后一级将会【觉醒技能】\n4.觉醒技能威力更加强大，特效更加华丽";break;case t.FANLI_ZHUAN:this.txtContent.htmlText="<font color='#ffd200'>活动说明：</font>\n1.活动开启期间，单笔充值指定金额，即可转动龙盘\n2.最终收益=返利元宝基数x倍率（最高倍率可达4倍）\n3.每天每个档次的单笔充值返利只能领取1次\n4.一次性单笔充值较大元宝时，自动开启小额的元宝转盘，如单笔充值200元宝，则100元宝龙盘自动开启\n";break;case t.AWAKE_RUNE:this.txtContent.htmlText="<font color='#ffd200'>觉醒符文：</font>\n1.觉醒符文加成大量属性\n觉醒符文消耗【觉醒符石】道具进行镶嵌，道具可通过商城购买\n3.觉醒符文镶嵌在觉醒装备孔位上，如果没有穿戴觉醒装备，则符文属性不会生效\n4.觉醒装备被爆时，符文不会损失";break;case t.BOSS_Guild:this.txtContent.htmlText="<font color='#ffd200'>公会boss说明：</font>\n1.公会boss被击杀后每隔一段时间刷新\n2.公会boss可无限次挑战，但每天只有10次十倍掉落次数\n3.公会boss为杀戮场景，不同公会的玩家之间会强制pk，同公会不pk\n4.击杀其他玩家时，最终击杀的玩家有几率掠夺对方身上的装备或升星材料，助攻玩家无奖励\n5.被击杀玩家可通过锻造-神炼（5转开启）来防止装备被掠夺";break;case t.MAGIC_PET:this.txtContent.htmlText="<font color='#ffd200'>说明内容：</font>\n1.消耗对应魔宠丹药进行升级，升级可提升魔宠加成属性\n2.魔宠升级到上限时，可消耗进阶石进行升阶，升级可提升魔宠等级上限\n3.魔宠加成所有伙伴属性\n4.已激活的魔宠可手动跟随，在场景中随玩家移动\n\n < font color= '#ffd200' > 互动说明：\n1.每天每个已激活魔宠可互动3次\n2.互动消耗1个体力，体力可通过好友赠送获得\n3.魔宠阶数越高，互动奖励越好\n</font>\n";break;case t.SHENLIAN:this.txtContent.htmlText="<font color= '#ffd200'> 神炼说明：</font>\n1.神炼等级大于0且装备被掠夺时，神炼等级降低1级防止装备损失\n2.击杀者可获得对应神炼等级消耗数量的红装碎片作为补偿\n3.神炼5转开启，可消耗红装碎片加成全身普通装备基础属性百分比";break;case t.MIJINGZP:this.txtContent.htmlText="<font color= '#ffd200'> 玩法说明：</font>\n1.每天充值1元宝即可获得1积分\n2.每天24点积分重置为50积分\n3.不同转盘消耗积分不同，奖励也不同\n4.外圈奖励转到“内圈”时，可免费转动1次，获得内圈珍稀奖励";break;case t.BOSS_KF:this.txtContent.htmlText="<font color= '#ffd200'> 评级限制：</font>\n1.所有伙伴身上穿戴的觉醒装备，按照等级和转数评分，共同组成评级\n2.评级达到才能进入对应的BOSS场景\n3.评级可百分比提高觉醒装备的基础属性，不提高觉醒技能\n<font color= '#ffd200'> 评级规则：</font>\n1.以60级觉醒装备为6分，每提升10级或者1转，评分提高1分\n2.评分每提高24分，评级增加1级\n<font color= '#ffd200'> 跨服荣耀令：</font>\n1.在跨服BOSS中，杀人，被杀可以获得荣耀令\n2.跨服BOSS伤害第一，跨服BOSS击杀奖励中，可以获得大量荣耀令\n3.荣耀令可在跨服荣耀商店兑换高转的觉醒装备";break;case t.DFW:this.txtContent.htmlText="<font color= '#ffd200'>活动说明：</font>\n1.每天前5次可免费使用普通骰子前进\n2.每天累计充值400元宝即可获得1个666骰子，固定前进6点\n3.每6/12/18号格子上有珍贵奖励和双倍财富值\n4.财富值达到指定数量即可领取财富奖励，每日仅限1次，24点清空财富值\n5.移动到终点即可进入下一层，每天达到指定层数可领取层数奖励，活动期间层数不重置\n6.探秘积分可在寻宝兑换商店中兑换道具，兑换不影响财富值进度\n7.未使用的666骰子将在当天24点清空";break;case t.BOSS_Personal:this.txtContent.htmlText="<font color='#ffd200'>个人boss说明：</font>\n1.个人boss每个等级每天可挑战1次\n2.个人boss随玩家角色升级开启更多\n3.个人boss为和平场景，没有玩家pk\n4.购买月卡后可免费扫荡已挑战的boss";break;case t.BOSS_All:this.txtContent.htmlText="<font color='#ffd200'世界boss说明：</font>\n1.世界boss被击杀后每隔一段时间刷新\n2.世界boss随玩家角色升级开启更多\n3.世界boss为和平场景，没有玩家pk\n4.对世界boss造成伤害最高的玩家可获得较好奖励";break;case t.BOSS_Field:this.txtContent.htmlText="<font color='#ffd200'>野外boss说明：</font>\n1.野外boss在每天8-24点的每15分钟刷新\n2.野外boss出现后会在一定时间内逃跑，请在逃跑前击杀boss\n3.野外boss为杀戮场景，必须击退其他玩家才能击杀boss\n4.野外boss奖励归属最后击杀boss的玩家，仅限1人";break;case t.BOSS_Home:this.txtContent.htmlText="<font color='#ffd200'>boss之家说明：</font>\n1.boss之家分为低中高三种，每天8-24点刷新时间分别为：10分钟、15分钟、20分钟\n2.boss之家出现后会在一定时间内逃跑，请在逃跑前击杀boss\n3.boss之家在vip达到1/2/3级时可免费挑战，否则需消耗钥匙道具\n4.boss之家为杀戮场景，必须击退其他玩家才能击杀boss\n5.boss之家奖励归属最后击杀boss的玩家，仅限1人";break;case t.BOSS_Elite:this.txtContent.htmlText="<font color='#ffd200'>精英boss说明：</font>\n1.精英boss在每天8-24点刷新，等级越高刷新越慢\n2.精英boss挑战时需要消耗“精英之证”道具，消耗可获得该boss当次出现的无限挑战\n3.boss之家为杀戮场景，必须击退其他玩家才能击杀boss\n4.boss之家奖励归属最后击杀boss的玩家，仅限1人";break;case t.BOSS_Round:this.txtContent.htmlText="<font color='#ffd200'>转生boss说明：</font>\n1.转生boss在每天21点-21点10分开启\n2.玩家只能进入对应转数的转生boss挑战\n3.转生boss为和平场景，玩家之间不pk，竞争对boss的伤害值"}},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},t.GUILD_FARM=1,t.GUILD_FUBEN=2,t.MINE=3,t.ORANGESUIT=4,t.DARK=5,t.SHADOW=6,t.SKILL_FEAT=7,t.LUNHUI=8,t.KING=9,t.FANLI_ZHUAN=10,t.SHOP_CHEAP=11,t.AWAKE=12,t.AWAKE_RUNE=13,t.BOSS_Guild=14,t.SHENLIAN=15,t.MIJINGZP=16,t.MAGIC_PET=17,t.BOSS_KF=18,t.DFW=19,t.BOSS_All=20,t.BOSS_Field=21,t.BOSS_Personal=22,t.BOSS_Elite=23,t.BOSS_Home=24,t.BOSS_Round=25,t}(LayeroutWindow);egret.registerClass(HelpWindow,"HelpWindow");var HeroListTopBox=function(e){function t(t){void 0===t&&(t=0),e.call(this),this._type=0,this._type=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/common/HeroListTopBoxSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.createList(),RoleModel.getInstance().addEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.updateData,this),this._imageSelected||(this._imageSelected=new CustomImage,this._imageSelected.touchEnabled=!1,this._imageSelected.source=RES.getRes("share_json.share_itemSelected"),this.addChild(this._imageSelected)),this.updateData()},n.createList=function(){this.itemArr=[];for(var e,t=0;3>t;t++)e=new HeroListTopItem(t+1),this.addChild(e),e.x=55+82*t,e.y=65,this.itemArr.push(e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap,this)},n.onItemTap=function(e){var i=e.currentTarget;return null==i.data?void GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_OPEN_OPENPARTNERWINDOW)):(this.dispatchEvent(new ParamEvent(t.ITEM_TAP,i.data)),void this.setSelected(i))},n.setIndex=function(e){void 0===e&&(e=0);var i=this.itemArr[e];return null==i.data?void GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_OPEN_OPENPARTNERWINDOW)):(this.dispatchEvent(new ParamEvent(t.ITEM_TAP,i.data)),void this.setSelected(i))},n.setSelected=function(e){this._selectedItem=e,this._imageSelected.x=this._selectedItem.x-17,this._imageSelected.y=this._selectedItem.y-17},n.updateData=function(){1==this._type?this.roleListData=RankModel.getInstance().getPartnerList():this.roleListData=RoleModel.getInstance().getPartnerList();for(var e,t=0;t<this.itemArr.length;t++)this.roleListData[t]&&(e=this.itemArr[t],e.data=this.roleListData[t]);this.setSelected(this.itemArr[0])},n.setOtherData=function(e){},n.getIndexByVO=function(e){for(var t,i=0;i<this.itemArr.length;i++)if(t=this.itemArr[i],t.data&&t.data.parnerID==e.parnerID)return i;return 0},n.getCurItemVo=function(){return this._selectedItem.data},n.dispose=function(){RoleModel.getInstance().removeEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.updateData,this);for(var e,t=this.itemArr.length,i=0;t>i;i++)e=this.itemArr[i],e&&(e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap,this),e.parent&&e.parent.removeChild(e),e.dispose(),e=null);this.itemArr=[],this.parent&&this.parent.removeChild(this)},n.updateFigureRedDots=function(e){for(var t,i=0;i<this.itemArr.length;i++)t=this.itemArr[i],t.data&&(0==e?t.showRedDot=FigureModel.getInstance().getEquipsCanWearByPartner(t.data)||FigureModel.getInstance().getSpecialEquipsCanUpOrActiveByPartner(t.data)||DominateModel.getInstance().getDominateSingleCanUpLevel(t.data)||DominateModel.getInstance().getDominateSingleCanUpStar(t.data):1==e?t.showRedDot=FigureModel.getInstance().getEquipsCanWearByPartner(t.data,!0)||WingModel.getInstance().getWingsCanLevelupByPartner(t.data):2==e?t.showRedDot=!1:3==e?t.showRedDot=MeridianModel.getInstance().getMeridianCanLeveupOrActiveByPartner(t.data):t.showRedDot=FigureModel.getInstance().checkShenlianCanUpByPid(t.data.parnerID))},n.updateOrangeRedDots=function(e){for(var t,i=0;i<this.itemArr.length;i++)t=this.itemArr[i],t.data&&(0==e?t.showRedDot=OrangeSuitModel.getInstance().getOrangesuitSingleDebrisCanUpOrActive(t.data):1==e?t.showRedDot=FigureModel.getInstance().getEquipsCanWearByPartner(t.data,!1,!0):2==e&&(t.showRedDot=LegendSuitModel.getInstance().getLegendsuitSingeDebrisCanUpOrActive(t.data)))},n.updateAwakeEquipSoulRedDots=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],e.showRedDot=AwakeModel.getInstance().checkAwakeEquipSoulCanUpByPid(e.data.parnerID)},n.updateDominateRedDots=function(e){for(var t,i=0;i<this.itemArr.length;i++)t=this.itemArr[i],t.data&&(0==e?t.showRedDot=DominateModel.getInstance().getDominateSingleCanUpStar(t.data):1==e&&(t.showRedDot=DominateModel.getInstance().getDominateSingleCanUpLevel(t.data)))},n.updateWingEquipWearRedDots=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],e.data&&(e.showRedDot=FigureModel.getInstance().getEquipsCanWearByPartner(e.data,!0))},n.updateFashionRedDots=function(e){for(var t,i=0;i<this.itemArr.length;i++)t=this.itemArr[i],t.data&&(t.showRedDot=FashionModel.getInstance().checkFashionCanActiveByPartnerAndType(t.data,e))},n.updateSkillRedDots=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],e.data&&(e.showRedDot=SkillModel.getInstance().isPartenerUpgrade(e.data))},n.updateSkillFeatRedDots=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],e.data&&(e.showRedDot=SkillModel.getInstance().isPartenerFeatUpgrade(e.data))},n.updateStrengRedDots=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],e.data&&(e.showRedDot=BuildModel.getInstance().isStrengthenUpgrade(e.data))},n.updateStoneRedDots=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],e.data&&(e.showRedDot=BuildModel.getInstance().isStoneUpgrade(e.data))},n.updateSoulRedDots=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],e.data&&(e.showRedDot=BuildModel.getInstance().isSoulUpgrade(e.data))},n.updateStarRedDots=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],e.data&&(e.showRedDot=BuildModel.getInstance().isStarUpgrade(e.data))},n.updateRuneRedDots=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],e.data&&(e.showRedDot=BuildModel.getInstance().isRuneUpgrade(e.data))},n.updateShadowJieRedDots=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],e.data&&(e.showRedDot=ShadowModel.getInstance().isJieUpgrade(e.data))},n.updateShadowEquipRedDots=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],e.data&&(e.showRedDot=ShadowModel.getInstance().isEquipUpgrade(e.data))},n.updateShadowLvRedDots=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],e.data},n.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},n.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.ITEM_TAP="ITEM_TAP",t}(eui.Component);egret.registerClass(HeroListTopBox,"HeroListTopBox",["eui.UIComponent"]);var HeroListTopItem=function(e){function t(t){e.call(this),this._seq=t,this.skinName="resource/game_skins/common/HeroListTopItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dataChanged=function(){this._playerVo=this.data,this.data&&(this.txtOpen.visible=!1),this.headIcon.source=UrlUtil.getHeadURLByPartner(this._playerVo.getCareer(),this._playerVo.getSex()),this.careerIcon.source=RES.getRes("share_career"+this._playerVo.getCareer())},n.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},n.dispose=function(){},n.childrenCreated=function(){if(e.prototype.childrenCreated.call(this),this._seq>=2){var t=FigureModel.getInstance().getOpenpartnerVO(this._seq);t.lv>0?this.txtOpen.text=t.lv+"级":t.round>0&&(this.txtOpen.text=t.round+"转")}},t}(CustomItemRenderer);egret.registerClass(HeroListTopItem,"HeroListTopItem",["eui.UIComponent"]);var LogItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/common/LogItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.dataChanged=function(){this.txtContent.htmlText=this.data},t}(eui.ItemRenderer);egret.registerClass(LogItem,"LogItem");var Message=function(){function e(){}var t=(__define,e);t.prototype;return e.show=function(e,t,i,n,s,a,o){if(void 0===t&&(t=16770247),void 0===i&&(i=3),void 0===n&&(n=18),void 0===s&&(s=!1),void 0===a&&(a=0),void 0===o&&(o=0),""!=e&&null!=e&&(null==this._msgList&&(this._msgList=[]),0!=GameContent.gameLayers.noticeLayer.visible)){null==this._msgContainer&&(this._msgContainer=new CommonSprite,GameContent.gameLayers.noticeLayer.addChild(this._msgContainer));var r=new MessageItem;r.init(e,t,i,n,"Microsoft YaHei",!1,2173195),r.x=GameContent.stageWidth-r.getMyWidth()>>1,r.y=GameContent.stageHeight-r.getMyHeight()>>1,this._msgList.push(r),this.updateTargetPos()}},e.updateTargetPos=function(){for(var t,i=0;i<this._msgList.length;i++)t=this._msgList[i],t.setIndex(this._msgList.length-i);this._timerIndex=TimerManager.getInstance().getTimerKey(),TimerManager.getInstance().removeForMsg(this._timerIndex),TimerManager.getInstance().addForMsg(600,function(){e.onShowRest()},this._timerIndex)},e.onShowRest=function(){this._msgList&&this._msgList.length>0?(this._startTime=getTimer(),this.onMsgTime(this._msgList.shift())):TimerManager.getInstance().removeForMsg(this._timerIndex)},e.onMsgTime=function(e){var t=this;this._msgContainer.addChild(e),egret.Tween.get(e).to({y:e.y-e.targetY},500).wait(500).call(function(){t.onCompleteFunction1(e)})},e.onCompleteFunction1=function(e){egret.Tween.get(e).to({alpha:0},500).call(function(){null!=e&&null!=e.parent&&(e.parent.removeChild(e),e.destroy())})},e._startTime=0,e.GAP=41,e}();egret.registerClass(Message,"Message");var MessageItem=function(e){function t(){e.call(this),this.speed=5,this.targetY=41,this._index=1,this._bg=new CustomImage,this._bg.source=RES.getRes("share_json.share_messageItem"),this._bg.scale9Grid=new egret.Rectangle(12,10,160,12),this.addChild(this._bg),this.touchEnabled=this.touchChildren=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(e,t,i,n,s,a,o){void 0===n&&(n=20),void 0===s&&(s="Microsoft YaHei"),void 0===a&&(a=!1),void 0===o&&(o=0),this._str=e,this._color=t,this._delay=i,this._size=n,this._font=s,this._bold=a,this._filter=o,this.configUI()},n.configUI=function(){this.txt=new CustomLabel,this.txt.fontFamily=this._font,this.txt.size=this._size,this.txt.bold=this._bold,this.txt.horizontalCenter=0,this.txt.verticalCenter=0,this.txt.wordWrap=!1,this.txt.htmlText=this._str,this.addChild(this.txt),this._bg.width=this.txt.textWidth+50,this._bg.height=this.txt.textHeight+20,this.setTxtCenter()},n.setTxtCenter=function(){this.txt.x=this._bg.width-this.txt.textWidth>>1,this.txt.y=this._bg.height-this.txt.height>>1},n.getMyWidth=function(){return this._bg.width},n.getMyHeight=function(){return this._bg.height},n.setBgHeight=function(e){this._bg.height=e},n.setBgWidth=function(e){this._bg.width=e},n.setIndex=function(e){this._index=e,this.targetY=this._index*Message.GAP},n.getIndex=function(e){return this._index},n.destroy=function(){for(null!=this.txt&&(this.txt.filters=null);this.numChildren>0;)this.removeChildAt(0)},n.remove=function(){var e=this;this.isRemove=!0,this._si=setTimeout2(function(){e.removeComplete()},1e3)},n.removeComplete=function(){clearTimeout(this._si),null!=this.parent&&this.parent.removeChild(this)},t}(CommonSprite);egret.registerClass(MessageItem,"MessageItem");var MonsterFigure=function(e){function t(i){void 0===i&&(i="MonsterFigure"),e.call(this,i),this._scale=1,this.touchEnabled=!1,this.touchChildren=!1,this._index=t.INDEX++,this._bodyMovieClip=new BitmapMovieClip("MonsterFigure_body_"+this._index),this.addChild(this._bodyMovieClip)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.setRes=function(e,t,i){void 0===t&&(t="stand"),void 0===i&&(i=2),4==i?(this._dir=6,this._scale=-1):(this._dir=i,this._scale=1),this._bodyURL=UrlUtil.getMonsterURL(e)+t+this._dir,this._action=t,SourceCache.getInstance().has(this._bodyURL)?(this._bodyMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._bodyURL)),this.play()):(SourceCache.getInstance().addEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,this.loadComplete,this),SourceCache.getInstance().load(this._bodyURL,ResourceType.ANIMATION))},n.loadComplete=function(e){if(e.data.url==this._bodyURL){var t=e.data.mc;this._bodyMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._bodyURL)),this._bodyMovieClip.setMovieClipData(t),this.play()}},n.play=function(){var e=(this._dir,1);if("stand"==this._action)var t=MonsterFrame.STAND;else if("attack"==this._action)var t=MonsterFrame.ATTACK;this._bodyMovieClip.scaleX=this._scale,this._bodyMovieClip.gotoAndPlay(e,!0,e,t)},n.stopAt=function(e){this._bodyMovieClip&&this._bodyMovieClip.gotoAndStop(e)},n.dispose=function(){this.parent&&this.parent.removeChild(this),this.contains(this._bodyMovieClip)&&(this.removeChild(this._bodyMovieClip),this._bodyMovieClip.dispose(),this._bodyMovieClip=null),this._bodyURL=null},t.INDEX=0,t}(CommonSprite);egret.registerClass(MonsterFigure,"MonsterFigure");var NumberFloat=function(e){function t(t,i,n,s,a){void 0===t&&(t="share_json.share_fpowerBg"),void 0===i&&(i="number_0_fnt"),void 0===n&&(n=100),void 0===s&&(s=22),void 0===a&&(a=!0),e.call(this),this._num=0,this._addNum=0,this._delay=0,this.startY=0,this._posX=0,this._posY=0,this._isShowResult=!0,this._isShowAddChar=!1,this.touchEnabled=this.touchChildren=!1,""!=t&&(this._imageBg=new CustomImage,this.addChild(this._imageBg),this._imageBg.source=RES.getRes(t)),this._numCell=new eui.BitmapLabel,this._numCell.font=i,this.addChild(this._numCell),this._numCell.x=n,this._numCell.y=s,this._isShowResult=a}__extends(t,e);var i=(__define,t),n=i.prototype;return n.showNumberAdd=function(e){var t=this;0!=e&&(this._numAddCell&&(egret.Tween.removeTweens(this._numAddCell),this._numAddCell.parent&&this._numAddCell.parent.removeChild(this._numAddCell),this._numAddCell=null),null==this._numAddCell&&(this._numAddCell=new eui.BitmapLabel,this._numAddCell.font="number_5_fnt"),null==this._numAddCell.parent&&(GameContent.gameLayers.topLayer.addChild(this._numAddCell),this._numAddCell.x=this.x+133,this._numAddCell.y=this.y,this.startY=this.y),e>0?this._numAddCell.text="+"+e.toString():this._numAddCell.text=e.toString(),egret.Tween.get(this._numAddCell).to({y:this.startY-35},500).wait(600).call(function(){t.onCompleteFunction1(t._numAddCell)}))},n.onCompleteFunction1=function(e){e&&egret.Tween.removeTweens(e),e&&(e.parent&&e.parent.removeChild(e),e=null),this.dispose(),this.dispatchEvent(new ParamEvent(t.CLOSE))},n.dispose=function(){e.prototype.dispose.call(this),this._numAddCell&&egret.Tween.removeTweens(this._numAddCell),this._imageBg&&(this._imageBg.parent&&this._imageBg.parent.removeChild(this._imageBg),this._imageBg.source=null,this._imageBg=null),this._numAddCell&&(this._numAddCell.parent&&this._numAddCell.parent.removeChild(this._numAddCell),this._numAddCell=null),this._numCell&&(this._numCell.parent&&this._numCell.parent.removeChild(this._numCell),this._numCell=null),clearTimeout(this._changeTimeOut),clearTimeout(this._closeTimeOut)},n.showNumber=function(e,t,i,n,s,a){var o=this;void 0===t&&(t=0),void 0===s&&(s=1e3),void 0===a&&(a=!1),1>e||(this._num=e,this._addNum=t,GameContent.gameLayers.topLayer.addChild(this),this.x=i,this.y=n,this._delay=s,this._isShowAddChar=a,clearTimeout(this._changeTimeOut),clearTimeout(this._closeTimeOut),this._changingNum=0,this._numCell.text=this._changingNum.toString(),this._changeTimeOut=setTimeout2(function(){o.onNumChange()},30))},n.onNumChange=function(){var e=this;this._changingNum+=Math.ceil(this._num/10);var t="+";0==this._isShowAddChar&&(t=""),this._changingNum<this._num?(this._numCell.text=t+this._changingNum.toString(),this._changeTimeOut=setTimeout2(function(){e.onNumChange()},30)):(this._numCell.text=t+this._num.toString(),this._closeTimeOut=setTimeout2(function(){e.onClose()},this._delay),this._isShowResult&&this.showNumberAdd(this._addNum))},n.onClose=function(){GameContent.gameLayers.topLayer.contains(this)&&GameContent.gameLayers.topLayer.removeChild(this),this.dispose(),this.dispatchEvent(new ParamEvent(t.CLOSE))
},n.showRunEffect=function(){},n.hide=function(){GameContent.gameLayers.topLayer.contains(this)&&GameContent.gameLayers.topLayer.removeChild(this)},t.CLOSE="CLOSE_NUMBERFLOAT",t}(CommonSprite);egret.registerClass(NumberFloat,"NumberFloat");var Particle=function(){function e(e,t,i,n){void 0===i&&(i=500),void 0===n&&(n=3e3),this._delay=200,this.isStop=!1,this.n=0,this.count=e,this._url=t,this.time=n,this._delay=i,this.particlesList=[]}var t=(__define,e),i=t.prototype;return i.start=function(){this.disposefun(),this.n=0,this.isStop=!1,TimerManager.getInstance().remove(this._delay,this.playerParticles,this),TimerManager.getInstance().add(this._delay,this.playerParticles,this),RenderManager.add(this.step,this),TimerManager.getInstance().remove(this.time,this.disposefun,this),TimerManager.getInstance().add(this.time,this.disposefun,this)},i.disposefun=function(){this.stop(),TimerManager.getInstance().remove(this.time,this.disposefun,this)},i.step=function(){this.n++;var e,t=0;for(t=0;t<this.particlesList.length;t++)e=this.particlesList[t],e.x+=e.speedX,e.y>GameContent.stageHeight-30?this.removeParticles(e):e.y+=e.speedY;this.isStop&&this.particlesList.length<10&&this.dispose()},i.playerParticles=function(){for(var e,t=0;t<this.count;t++)e=this.createParticles(),e.x=Math.random()*GameContent.stageWidth,e.y=40*Math.random()-60;e=null},i.createParticles=function(){var e=new ParticleBitmap;return e.source=this._url[Math.floor(7*Math.random())],e.speedY=10+Math.floor(3*Math.random()),GameContent.gameLayers.tipsLayer.addChild(e),this.particlesList.push(e),e},i.removeParticles=function(e){this.particlesList.indexOf(e)>0&&this.particlesList.splice(this.particlesList.indexOf(e),1),null!=e.parent&&(e.bitmapData=null,e.parent.removeChild(e)),e=null},i.stop=function(){TimerManager.getInstance().remove(this._delay,this.playerParticles,this),this.isStop=!0},i.dispose=function(){if(this.disposefun(),RenderManager.remove(this.step,this),this.particlesList){for(;this.particlesList.length>0;)this.removeParticles(this.particlesList.pop());this.particlesList=[]}},e}();egret.registerClass(Particle,"Particle");var CustomImage=function(e){function t(i){void 0===i&&(i="CustomImage"),e.call(this),this._type=i,void 0==t._classDic[i]||null==t._classDic[i]?t._classDic[i]=1:t._classDic[i]=t._classDic[i]+1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dispose=function(){this.parent&&this.parent.removeChild(this),t._classDic[this._type]=t._classDic[this._type]--,this.bitmapData=null,this.source=null},n.partAdded=function(e,t){},n.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t._classDic=new Object,t}(eui.Image);egret.registerClass(CustomImage,"CustomImage",["eui.UIComponent"]);var ParticleBitmap=function(e){function t(){e.call(this),this.speedY=0,this.speedX=0,this.ax=0,this.ay=0}__extends(t,e);var i=(__define,t);i.prototype;return t}(CustomImage);egret.registerClass(ParticleBitmap,"ParticleBitmap");var Bitmap=function(e){function t(t){e.call(this,t)}__extends(t,e);var i=(__define,t);i.prototype;return t}(egret.Bitmap);egret.registerClass(Bitmap,"Bitmap");var PicLoader=function(e){function t(t){void 0===t&&(t=0),e.call(this,null),this._textureW=0,this._textureH=0,this._useType=0,this._canGC=!0,this._useType=t}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.load=function(e,i){if(void 0===i&&(i=!1),this._url=e,SourceCache.getInstance().has(this._url)){var n=SourceCache.getInstance().getPicTexture(this._url);this.setTexture(n)}else SourceCache.getInstance().addEventListener(SourceCache.LOAD_PIC_COMPLETE,this.loadPicComplete,this),this._useType==t.COMMON?SourceCache.getInstance().load(this._url,ResourceType.IMAGE):this._useType==t.MAPTILE&&SourceCache.getInstance().load(this._url,ResourceType.MAPTILE,i)},s.loadByJsonName=function(e){this._url=e,this.texture=RES.getRes(this._url)},s.loadPicComplete=function(e){if(this._url==e.data.url){var t=e.data.pic;SourceCache.getInstance().removeEventListener(SourceCache.LOAD_PIC_COMPLETE,this.loadPicComplete,this);var i=t;this.setTexture(i),this._textureH>0&&this._textureW>0&&this.setWH(this._textureW,this._textureH)}},s.setTexture=function(e){this._customTexture&&this._customTexture.unUse(),this._customTexture=e,this._customTexture.use(),this._customTexture.canGC=this._canGC,this.texture=this._customTexture.texture},s.dispose=function(){this.parent&&this.parent.removeChild(this),this.data=null,this._customTexture&&this._customTexture.unUse(),this._customTexture=null,this.texture=null,this.bitmapData=null,SourceCache.getInstance().removeEventListener(SourceCache.LOAD_PIC_COMPLETE,this.loadPicComplete,this)},s.setWH=function(e,t){this.texture?(this.fillMode=egret.BitmapFillMode.SCALE,this.width=e,this.height=t):(this._textureW=e,this._textureH=t)},s.toYuanbao=function(){var e=UrlUtil.getSmallPic(WelfareType.ADD_GOLD);this.load(e)},s.setPicCanGC=function(e){this._customTexture&&(this._customTexture.canGC=e),this._canGC=e},i(s,"url",function(){return this._url}),t.COMMON=0,t.MAPTILE=1,t}(Bitmap);egret.registerClass(PicLoader,"PicLoader");var RewardItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/common/RewardItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.dataChanged=function(){this.goodItem.data=this.data.info,this.goodItem.num=this.data.num},t}(eui.ItemRenderer);egret.registerClass(RewardItem,"RewardItem");var ScreenImageEffect=function(){function e(){this._siDelay=0,this._siInterval=0}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},i.playEffect=function(e,t,i,n,s,a,o){void 0===a&&(a=3.5),void 0===o&&(o=2e3);var r=this;r._siInterval>0&&clearInterval(r._siInterval),r._siDelay>0&&clearTimeout(r._siDelay),r._effTween&&(r._img&&egret.Tween.removeTweens(r._img),r._effTween=null),null!=r._img&&(r._img.dispose(),r._img=null,clearTimeout(r._siDelay)),null==r._img&&(r._img=new PicLoader,r._img.scaleX=a,r._img.scaleY=a,r._img.load(s),GameContent.gameLayers.guideLayer.addChild(r._img),r._img.x=e,r._img.y=t),r._effTween=egret.Tween.get(r._img).to({x:r._img.x+i,y:r._img.y+n,scaleX:1,scaleY:1},200).wait(10).call(function(){r.shake(r._img,2,4,11),r._effTween&&(egret.Tween.removeTweens(r._img),r._effTween=null),r._siDelay=setTimeout2(function(){null!=r._img&&null!=r._img.parent&&(r._img.dispose(),r._img=null,clearTimeout(r._siDelay))},o)})},i.shake=function(e,t,i,n){void 0===t&&(t=2),void 0===i&&(i=4),void 0===n&&(n=32);var s=this;if(!s._isShake){s._isShake=!0;var a=new Point(e.x,e.y),o=[0,0],r=0;s._siInterval=setInterval(function(){o[r%2]=r++%4<2?0:i,r>4*t+1&&(clearInterval(s._siInterval),r=0,s._isShake=!1),e.x=o[0]+a.x,e.y=o[1]+a.y},n)}},e}();egret.registerClass(ScreenImageEffect,"ScreenImageEffect");var TipsWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/common/TipsWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this._btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btnCancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancel,this),this.setImageWindowTitle("title_tips")},n.setData=function(e,t,i,n,s){if(void 0===i&&(i=null),void 0===n&&(n=!0),void 0===s&&(s=null),this._txtTitle.htmlText=e,this._txtContent.htmlText=t,this._func=i,this._autoClose=n,this._type=s,this._type==LunhuiModel.LUNHUIBACK)if(null==this._yuanBaoPic&&(this._yuanBaoPic=new PicLoader(PicLoader.MAPTILE),this._yuanBaoPic.x=184,this._yuanBaoPic.y=311,this._yuanBaoPic.toYuanbao()),this._txtTitle.parent.addChild(this._yuanBaoPic),VipModel.getInstance().isLife)this._txtCost.text=StringUtil.substitute("花费:0");else{var a=SceneModel.getInstance().getSceneWave();a&&(this._txtCost.text=StringUtil.substitute("花费：{0}",4*(a.total_wave_id-a.wave_id)))}else this._txtDes.visible=!1,this._txtCost.visible=!1},n.setCenter=function(){e.prototype.setCenter.call(this),this.y=386},n.onCancel=function(e){this.isPop=!1},n.onClick=function(e){this._func&&this._func(),this._autoClose&&(this.isPop=!1)},n.dispose=function(){e.prototype.dispose.call(this),this._func=null,this._yuanBaoPic&&(this._yuanBaoPic.dispose(),this._yuanBaoPic=null)},t}(LayeroutWindow);egret.registerClass(TipsWindow,"TipsWindow");var BitmapFrame=function(){function e(){this.canGc=!0}var t=(__define,e),i=t.prototype;return i.draw=function(e){this._bitmapData=e},i.getBitmapData=function(){return this.lastUseTime=getTimer(),this._bitmapData},i.dispose=function(){this._bitmapData&&(this._bitmapData=null)},e}();egret.registerClass(BitmapFrame,"BitmapFrame");var BitmapMovieClip=function(e){function t(t){void 0===t&&(t="BitmapMovieClip"),e.call(this,null),this._delay=60,this._isLockFrame=!1,this._opposite=!1,this.offsetX=-395,this.offsetY=-395,this.url="default",this.canSkipFrame=!1,this.hasWeight=!0;var i=this;i.init()}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.init=function(){var e=this;t.count++,e.touchEnabled=!1,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addedToStageHandler,e)},s.addedToStageHandler=function(e){var t=this;t.render()},s.setDealy=function(e){e=30*Math.ceil(e/30);var t=this;e!=t._delay&&(t._delay=e>0?e:60)},s.getDelay=function(){var e=this;return e._delay},s.setMovieClipData=function(e){var t=this;null!=e&&e!=t._movieClipData&&(null!=t._movieClipData&&(t._movieClipData.unUseTime(),t.bitmapData=null),t._movieClipData=e,t._movieClipData.useTime(),t.totalFrames=t._movieClipData.length,t._startFrame=1,t._endFrame=t.totalFrames,t.url=t._movieClipData.url,t._isLockFrame=!1)},s.getMovieClipData=function(){var e=this;return e._movieClipData},i(s,"bitmap",function(){var e=this;return e.createBitmap(),e}),s.createBitmap=function(){},s.play=function(){var e=this;RenderManager.add(e.step,e)},s.stop=function(){var e=this;RenderManager.remove(e.step,e)},s.step=function(){var e=this;if(null==e.stage)return 0==e._isLoop&&e.dispatchEvent(new egret.Event(t.END)),!1;if(null==e._movieClipData)return!1;if(0==e._movieClipData.length)return!1;var i=1;if(1==e.hasWeight&&(i=RenderManager.frameWeight),getTimer()-e._lastTime<e._delay*i)return!1;var n=getTimer()-RenderManager.getCurrentTime();if(e.currentFrame>1&&n>15)return!0;if(0==e._opposite&&e.currentFrame>=e._endFrame||1==e._opposite&&e.currentFrame<=e._startFrame){if(0==e._isLoop)return e.dispatchEvent(new egret.Event(t.END)),e.stop(),null!=e._endFuncObj&&e.execEndFunc(),!1;e.currentFrame=0==e._opposite?e._startFrame:e._endFrame}else{if(1==e._isLoop)0==e._opposite?e.currentFrame++:e.currentFrame--;else{if(e.movieStep=(getTimer()-e._lastTime)/(e._delay*i)>>0,0==e.movieStep)return!1;0==e._opposite?e.currentFrame+=e.movieStep:e.currentFrame-=e.movieStep}0==e._opposite&&e.currentFrame>=e._endFrame?e.currentFrame=e._endFrame:e._opposite&&e.currentFrame<=e._startFrame&&(e.currentFrame=e._startFrame)}return e.setCurrentFrame(e.currentFrame),!1},s.setCurrentFrame=function(e){var t=this;if(null!=t._movieClipData){t._lastTime=getTimer();var i=t._movieClipData.length;if(0!=i)return e>i&&(e=i),t.currentFrame=e,t.bitmapFrame=t._movieClipData.bitmapFrameList[t.currentFrame-1],null==t.stage?void(t.bitmapData=null):void t.render()}},s.execEndFunc=function(){var e=this;if(e._endFuncObj){var t=e._endFuncObj.func,i=e._endFuncObj.thisObj,n=e._endFuncObj.parameters;if(!t);t.apply(i,n)}},s.getBitmapFrame=function(){var e=this;return e.bitmapFrame},s.render=function(){var e=this;if(null!=e._movieClipData&&0!=e._movieClipData.length){if(e.createBitmap(),null==e.bitmapFrame)return void(e.bitmapData=null);e.texture=e.bitmapFrame.getBitmapData(),null!=e._updateFuncObj&&e.execUpdateFunc()}},s.execUpdateFunc=function(){var e=this;if(e._updateFuncObj){var t=e._updateFuncObj.func,i=e._updateFuncObj.thisObj,n=e._updateFuncObj.parameters;t.apply(i,n)}},s.gotoAndPlay=function(e,t,i,n,s,a,o){void 0===t&&(t=!0),void 0===i&&(i=1),void 0===n&&(n=-1),void 0===s&&(s=null),void 0===a&&(a=null),void 0===o&&(o=!1);var r=this;null!=r._movieClipData&&0!=r._movieClipData.length&&1!=r._isLockFrame&&(r._isLoop=t,r._opposite=o,r.currentFrame=e,r._startFrame=i,-1==n?r._endFrame=r.totalFrames:r._endFrame=n,r._endFuncObj=s,r._updateFuncObj=a,r.setCurrentFrame(r.currentFrame),r.play())},s.gotoAndStop=function(e){var t=this;null!=t._movieClipData&&0!=t._movieClipData.length&&1!=t._isLockFrame&&(t.currentFrame=e,t.setCurrentFrame(t.currentFrame),t.stop())},s.prevFrame=function(){var e=this;e.gotoAndStop(Math.max(e.currentFrame-1,1))},s.nextFrame=function(){var e=this;e.gotoAndStop(Math.min(e.currentFrame+1,e._movieClipData.bitmapFrameList.length))},s.clearFunc=function(){var e=this;e._updateFuncObj=null,e._endFuncObj=null},s.gotoName=function(e){var t=this;null!=t._movieClipData&&null!=t._movieClipData.bitmapNameDic[e]&&(t._isLockFrame=!0,t.bitmapFrame=t._movieClipData.bitmapNameDic[e],t.bitmapFrame.canGc=!1,t.render())},s.getCurrentBitmapFrame=function(){var e=this;return null!=e.bitmapFrame?e.bitmapFrame:null},s.clearFrame=function(){var e=this;null!=e.bitmap&&(e.bitmap.bitmapData=null)},s.isHit=function(e){var t=this;if(null==t.bitmap)return!1;var i=new Point(e.x-t.bitmap.x,e.y-t.bitmap.y);return i.x>0&&i.x<t.bitmap.width&&i.y>0&&i.y<t.bitmap.height?!0:!1},s.getFrame=function(e){var t=this;return null==t._movieClipData||e>t._movieClipData.bitmapFrameList.length?null:t._movieClipData.bitmapFrameList[e-1]},s.dispose=function(){var e=this;null!=e.parent&&e.parent.removeChild(e),e.stop(),e.removeEventListener(egret.Event.ADDED_TO_STAGE,e.addedToStageHandler,e),null!=e._movieClipData&&(e._movieClipData.unUseTime(),e._movieClipData=null),e.bitmapData=null,t.count--},t.END="end",t.count=0,t}(Bitmap);egret.registerClass(BitmapMovieClip,"BitmapMovieClip");var CustomSpriteSheet=function(e){function t(i,n){void 0===n&&(n="CustomSpriteSheet"),e.call(this,i),this._type=n,void 0==t._classDic[n]||null==t._classDic[n]?t._classDic[n]=1:t._classDic[n]=t._classDic[n]+1}__extends(t,e);var i=(__define,t);i.prototype;return t._classDic=new Object,t}(egret.SpriteSheet);egret.registerClass(CustomSpriteSheet,"CustomSpriteSheet");var CustomTexture=function(){function e(){this._useTime=0,this._lastTime=0,this.canGC=!0}var t=__define,i=e,n=i.prototype;return n.setTexture=function(e){this._texture=e},t(n,"texture",function(){return this._texture}),n.use=function(){this._useTime++,this._lastTime=getTimer()},n.unUse=function(){this._useTime--},n.getTimes=function(){return this._useTime},n.getLastTime=function(){return this._lastTime},n.dispose=function(){this._texture&&(this._texture.dispose(),this._texture=null),this._useTime=0,this._lastTime=0},e}();egret.registerClass(CustomTexture,"CustomTexture");var MovieClipData=function(){function e(){this._useTime=0,this._lastTime=0,this.gcTime=1e5,this.url="",this.length=0,e.count++,this.bitmapFrameList=new Array,this.bitmapNameDic=new Object,this.length=0}var t=(__define,e),i=t.prototype;return i.setBitmapFrameList=function(e){this.bitmapFrameList=e,this.length=this.bitmapFrameList.length},e.getEmptyInstance=function(){return null==e._emptyInstance&&(e._emptyInstance=new e,e._emptyInstance.url="empty"),e._emptyInstance},i.getFrame=function(e){var t=this.bitmapNameDic[e];return null==t?null:(t.canGc=!1,t.getBitmapData())},i.dispose=function(){if(e.count--,this.bitmapFrameList)for(var t=0;t<this.bitmapFrameList.length;t++){var i=this.bitmapFrameList[t];i&&(i.canGc=!0,i.dispose(),i=null)}this.bitmapFrameList=null,this._useTime=0,this._lastTime=0,this.length=0},i.useTime=function(){this._useTime++,this._lastTime=getTimer()},i.unUseTime=function(){this._useTime>0&&this._useTime--,this._lastTime=getTimer()},i.getTimes=function(){return this._useTime},i.getLastTime=function(){return this._lastTime},e.count=0,e}();egret.registerClass(MovieClipData,"MovieClipData");var Point=function(e){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=0),e.call(this,t,i)}__extends(t,e);var i=(__define,t);i.prototype;return t.equal=function(e,t){return null==e||null==t?!1:e.x==t.x&&e.y==t.y},t}(egret.Point);egret.registerClass(Point,"Point");var CreateRole=function(e){function t(){e.call(this),this.career=1,this.sex=1,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),ConfigManager.isNewCreate()?this.skinName="resource/game_skins/createRole/createRoleSkin2.exml":this.skinName="resource/game_skins/createRole/createRoleSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._bg=new PicLoader,ConfigManager.isNewCreate()?this._bg.load("resource/assets/icon/createRole/createRoleBg2.jpg"):this._bg.load("resource/assets/icon/createRole/createRoleBg.jpg"),this.addChildAt(this._bg,0),this.roleName.text=this.getChangeRandomName(),this.btnArr=[],this._useList=[],this.btnArr.push(this.btnCareer_1_1),this.btnArr.push(this.btnCareer_1_2),this.btnArr.push(this.btnCareer_2_1),this.btnArr.push(this.btnCareer_2_2),this.btnArr.push(this.btnCareer_3_1),this.btnArr.push(this.btnCareer_3_2);for(var e=Math.floor(6*Math.random()),t=0,i=this.btnArr;t<i.length;t++){var n=i[t];n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeCareer,this),n==this.btnArr[e]?this.selectRole(n):(n.alpha=.4,n.y=238)}this.btnEnter.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnter,this),this.btnDice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDice,this),this.roleName.addEventListener(egret.TouchEvent.CHANGE,this.onTxtChange,this),this._effectNovice=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("xinshou"),this.btnEnter.x+45,this.btnEnter.y-65,this,80,!0),PhpHttpStatisticsManager.send(2),this.clearTime(),TimerManager.getInstance().add(500,this.changeUseLog,this)},n.onChangeCareer=function(e){this.selectRole(e.currentTarget),this.clearTime()},n.onTxtChange=function(){this.clearTime()},n.selectRole=function(e){var t=e.name.split("_");this.career=Number(t[1]),this.sex=Number(t[2]);for(var i=0,n=this.btnArr;i<n.length;i++){var s=n[i];s==e?(s.alpha=1,s.y=218):(s.alpha=.4,s.y=238)}},n.onEnter=function(){var e=!0;if(""==this.roleName.text?(Message.show("名字不能为空"),e=!1):FilterText.getInstance().isHaveFilterTxt(this.roleName.text)&&(this.roleName.text="",Message.show("内容包含敏感字"),e=!1),!e){if(this._time>0)return void this.clearTime();this.roleName.text=this.getChangeRandomName()}this.dispatchGlobalEvent(new ParamEvent(EventName.CREATE_ROLE_ENTER,{career:this.career,sex:this.sex,name:this.roleName.text}))},n.onDice=function(e){this.roleName.text=this.getChangeRandomName(),this.clearTime()},n.getChangeRandomName=function(){var e="",t=[];return 1==this.sex?(t=LoginLang._surnameList.concat(LoginLang._surnameList_man),e=t[Math.floor(t.length*Math.random())]+LoginLang._forenameList_man_0[Math.floor(LoginLang._forenameList_man_0.length*Math.random())]):(t=LoginLang._surnameList.concat(LoginLang._surnameList_wonman),e=t[Math.floor(t.length*Math.random())]+LoginLang._forenameList_woman_0[Math.floor(LoginLang._forenameList_woman_0.length*Math.random())]),FilterText.getInstance().isHaveFilterTxt(e)?this.getChangeRandomName():e},n.changeUseLog=function(){var e=this.getChangeRandomName(),t=Math.floor(2*Math.random()),i=0==t?"<font color='#82afe7'>♂</font> ":"<font color='#ff00a8'>♀</font> ",n=i+"<font color='#05AF24'>"+e+"</font>正在进入游戏\n";this._useList.push(n),this._useList.length>3&&this._useList.shift();var s="";for(var a in this._useList)s+=this._useList[a];this.txtUseLog.htmlText=s},n.timeComplete=function(){this._time--,this._time<=0&&(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.onEnter()),this.txtTime.text="（"+this._time+"）"},n.clearTime=function(){this._time=20,this.txtTime.text="（"+this._time+"）",TimerManager.getInstance().remove(1e3,this.timeComplete,this),TimerManager.getInstance().add(1e3,this.timeComplete,this)},n.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this._bg.parent.removeChild(this._bg),this._bg=null,TimerManager.getInstance().remove(500,this.changeUseLog,this),TimerManager.getInstance().remove(1e3,this.timeComplete,this);for(var t=0,i=this.btnArr;t<i.length;t++){var n=i[t];n.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeCareer,this)}this.btnArr=null,this._useList=null,this.btnEnter.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnter,this),this.btnDice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDice,this),this.roleName.removeEventListener(egret.TouchEvent.CHANGE,this.onTxtChange,this),this._effectNovice&&(this._effectNovice.dispose(),this._effectNovice=null)},t}(BaseView);egret.registerClass(CreateRole,"CreateRole");var DownloadClientWindow=function(e){function t(){e.call(this),this._isFirstClick=!0,this.skinName="resource/game_skins/createRole/DownloadClientWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this);var t=this;t.btnEnter.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onEnter,t),t.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClose,t),t._bg=new PicLoader,t._bg.load(UrlUtil.getFolderPic("other","DownloadClientBg")),t.contentGroup.addChild(t._bg);var i=QQManager.getInstance().weiduanRewardID,n=OrderGiftModel.getInstance().getOrderGiftRewardVo(i);if(n){var s=GoodsListProxy.getInstance().getGoodsInfoByType(n.goods_id);t.item.data=s}4==ConfigManager.getVia()&&(t.btnEnter.label="领取奖励")},n.onEnter=function(e){4==ConfigManager.getVia()?(this.dispatchGlobalEvent(new ParamEvent(QQEvtName.REQEUST_20000)),this.dispatchGlobalEvent(new ParamEvent(EventName.REQUEST_22801,{id:QQManager.getInstance().weiduanRewardID})),this.isPop=!1):this._isFirstClick?(window.open("https://m.qzone.com/l?g=3716"),this._isFirstClick=!1,this.btnEnter.label="领取奖励",QQManager.getInstance().requestWanBaWeiDuanClick(1)):Message.show("微端登录才能领取奖励哦！")},n.onClose=function(e){this.isPop=!1},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=GameContent.stageHeight-this.height>>1},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t._bg&&(t._bg.parent&&t._bg.parent.removeChild(t._bg),t._bg=null),t.btnEnter.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onEnter,t),t.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onClose,t)},t}(LayeroutWindow);egret.registerClass(DownloadClientWindow,"DownloadClientWindow");var WelcomeView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/createRole/WelcomeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){var e=this;this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),setTimeout(function(){e.btnEnter.setImageSourceUrl("resource/assets/icon/other/welcomeBtn.png"),e.btnEnter.visible=!0},500),this.btnEnter.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnter,this),this.welcomeBg.width=GameContent.stageWidth,this.welcomeBg.height=GameContent.stageHeight,this.welcome=new PicLoader,this.welcome.y=150,ConfigManager.isNewCreate()?(this.welcome.y=270,this.welcome.x=-5,this.welcome.load("resource/assets/icon/other/welcomeBg_csyx.png")):ConfigManager.isTencent()||ConfigManager.isyxjinbang()||ConfigManager.isb7724()?this.welcome.load("resource/assets/icon/other/welcomeBg_qq.png"):ConfigManager.isGuoZiZF()?this.welcome.load("resource/assets/icon/other/welcomeBg_gzzf.png"):ConfigManager.isb9cb()?this.welcome.load("resource/assets/icon/other/welcomeBg_b9cb.png"):ConfigManager.isWanZui()?this.welcome.load("resource/assets/icon/other/welcomeBg_wanzui.png"):this.welcome.load("resource/assets/icon/other/welcomeBg.png"),this.addChild(this.welcome)},n.onEnter=function(e){NoviceGuideManager.getInstance().setIsNovice(!1),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.GUILE_START)),this.dispatchEvent(new ParamEvent(EventName.WINDOW_DISPOSE))},n.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this.welcome.parent.removeChild(this.welcomeBg),this.welcome=null,this.btnEnter.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnter,this)},t}(BaseView);egret.registerClass(WelcomeView,"WelcomeView");var WelcomeView2=function(e){function t(t){void 0===t&&(t=1),e.call(this),this._type=0,this._type=t,this.skinName="resource/game_skins/createRole/WelcomeView2Skin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnter,this),this.welcome=new PicLoader,1==this._type?this.welcome.load("resource/assets/icon/novice/bg2.png"):2==this._type&&(this.welcome.load("resource/assets/icon/novice/bg3.png"),this._btnOK.setImageSource("mainUI_json.mainUI_joinGuild")),this.addChildAt(this.welcome,0)},n.onEnter=function(e){this.isPop=!1,2==this._type&&this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_GUILD))},n.setCenter=function(){this.x=GameContent.stageWidth-640>>1,this.y=(GameContent.stageHeight-491>>1)+108},n.onCloseHandler=function(){var t=this;this.parent&&this.parent.removeChild(this),t.welcome&&(t.welcome.dispose(),t.welcome=null),this.welcome=null,this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnter,this),e.prototype.onCloseHandler.call(this)},t}(LayeroutWindow);egret.registerClass(WelcomeView2,"WelcomeView2");var CustomButton=function(e){function t(i){void 0===i&&(i="CustomButton"),e.call(this),this._showRedDot=!1,this.isStopTouch=!1,this._type=i,void 0==t._classDic[i]||null==t._classDic[i]?t._classDic[i]=1:t._classDic[i]=t._classDic[i]+1}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},s.setImageSource=function(e){this.getChildAt(0).source=RES.getRes(e)},s.setImageSourceUrl=function(e){this.getChildAt(0).source=e},s.onTouchBegin=function(e){this.isStopTouch||(this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.invalidateState(),e.updateAfterEvent(),this.isPressed?(this.x-=5,this.y-=5,this.isPressed=!1):(this.x+=5,this.y+=5,this.isPressed=!0))},s.onTouchEnd=function(e){if(!this.isStopTouch){var t=e.$currentTarget;t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.contains(e.target)&&this.buttonReleased(),this.invalidateState(),this.isPressed&&(this.x-=5,this.y-=5),this.isPressed=!1}},i(s,"showRedDot",function(){return this._showRedDot},function(e){return this._showRedDot!=e?(this._showRedDot=e,1==this._showRedDot?void(null==this._imageRed&&(this._imageRed=new CustomImage,this._imageRed.source=RES.getRes("share_json.share_alert"),this.addChild(this._imageRed),this._imageRed.top=1,this._imageRed.left=1)):void(this._imageRed&&(this._imageRed.parent&&this._imageRed.parent.removeChild(this._imageRed),this._imageRed.dispose(),this._imageRed=null))):void 0}),s.setRedDotPoint=function(e,t){void 0===e&&(e=1),void 0===t&&(t=1),this._imageRed&&(this._imageRed.top=e,this._imageRed.left=t)},s.childrenCreated=function(){e.prototype.childrenCreated.call(this)},s.dispose=function(){t._classDic[this._type]=t._classDic[this._type]-1,this.showRedDot=!1},t._classDic=new Object,t}(eui.Button);egret.registerClass(CustomButton,"CustomButton",["eui.UIComponent"]);var CustomCheckBox=function(e){function t(i){void 0===i&&(i="CustomCheckBox"),e.call(this),this._type=i,void 0==t._classDic[i]||null==t._classDic[i]?t._classDic[i]=1:t._classDic[i]=t._classDic[i]+1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},n.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t._classDic=new Object,t}(eui.CheckBox);egret.registerClass(CustomCheckBox,"CustomCheckBox",["eui.UIComponent"]);var CustomCombobox=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/custom/CustomComboboxSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.label.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showList,this),this.btnShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showList,this),this.initialize()},s.initialize=function(){this._arrayBtn=[],this.list.visible=!1,this.btnShow.setImageSource(1==this._type?"comp_json.combobox_down":"comp_json.combobox_up")},i(s,"type",void 0,function(e){this._type=e,this.initialize(),this.drawLayout()}),i(s,"dataProvider",void 0,function(e){this._data=e,this.drawLayout()}),s.drawLayout=function(){if(this._data){this.clearGroup();for(var e,i=0,n=0;n<this._data.length;n++)e=this._arrayBtn[n],e||(e=new CustomButton,e.width=this.width,e.skinName="CustomButtonSkin7Skin",e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick,this)),e.y=i*e.height,e.label=this._data[n].label,e.data=this._data[n],this.list.addChild(e),i++,this._type==t.UP&&(this.list.y=-e.y-e.height)}},s.onBtnClick=function(e){var t=e.currentTarget.data;this.selectItem(t)},i(s,"selectedIndex",void 0,function(e){this._data&&this._data.length>0&&this.selectItem(this._data[e])}),s.selectItem=function(e){e&&(this.label.text=e.label,this.list.visible=!1,this.dispatchEvent(new ParamEvent(t.CHANGE,e.data)))},s.showList=function(){this.list.visible=!this.list.visible},s.clearGroup=function(){for(var e,t=0;t<this._arrayBtn.length;t++)e=this._arrayBtn[t],e&&(e.parent&&e.parent.removeChild(e),e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick,this),e.dispose(),e=null)},s.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this.label.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showList,this),this.btnShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showList,this),this.clearGroup(),this._arrayBtn=null},t.CHANGE="CustomComboboxChange",t.DOWN=1,t.UP=2,t}(Csprite);egret.registerClass(CustomCombobox,"CustomCombobox",["eui.UIComponent"]);var CustomLabel=function(e){function t(i){void 0===i&&(i="CustomLabel"),e.call(this),this._type=i,void 0==t._classDic[i]||null==t._classDic[i]?t._classDic[i]=1:t._classDic[i]=t._classDic[i]+1,this.textColor=15192247}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.dispose=function(){this.parent&&this.parent.removeChild(this),t._classDic[this._type]=t._classDic[this._type]--},s.partAdded=function(e,t){},i(s,"htmlText",void 0,function(e){if(this._htmlTextParser||(this._htmlTextParser=new egret.HtmlTextParser),null!=e)try{this.textFlow=this._htmlTextParser.parser(e)}catch(t){}}),s.addMiaoBian=function(){this.stroke=1,this.strokeColor=0},s.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t._classDic=new Object,t}(eui.Label);egret.registerClass(CustomLabel,"CustomLabel",["eui.UIComponent"]);var CustomNumberStep=function(e){function t(t){void 0===t&&(t=0),e.call(this),this._num=0,this._minNum=1,this._maxNum=99,this._step=1,this._type=0,this.skinName="resource/game_skins/custom/CustomNumberStepSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._type=t}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiCompHandler=function(){0==this._type?this.btnMin.visible=this.btnMax.visible=!1:this.btnMin.visible=this.btnMax.visible=!0,this.setValue(1)},i(s,"type",void 0,function(e){this._type!=e&&(0==this._type?this.btnMin.visible=this.btnMax.visible=!1:this.btnMin.visible=this.btnMax.visible=!0)}),s.onReduBtnClick=function(){var e=this._num;e-=this._step,e<this._minNum?e=this._minNum:e>this._maxNum&&(e=this._maxNum),this.setValue(e)},s.onAddBtnClick=function(){var e=this._num;
e+=this._step,e<this._minNum?e=this._minNum:e>this._maxNum&&(e=this._maxNum),this.setValue(e)},s.onMaxBtnClick=function(){var e=this._maxNum;this.setValue(e)},s.onMinBtnClick=function(){var e=this._minNum;this.setValue(e)},s.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i(s,"MaxNum",function(){return this._maxNum},function(e){this._maxNum=e}),i(s,"MinNum",function(){return this._minNum},function(e){this._minNum=e}),s.setValue=function(e){this._num!=e&&(this._num=e,this.txtNum&&(this.txtNum.text=this._num.toString()),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(t.CHANGE)))},s.getValue=function(){return this._num},s.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddBtnClick,this),this.btnRedu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReduBtnClick,this),this.btnMax.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMaxBtnClick,this),this.btnMin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMinBtnClick,this)},t.CHANGE="CustomNumberStepChange",t}(Csprite);egret.registerClass(CustomNumberStep,"CustomNumberStep",["eui.UIComponent"]);var CustomNumberStep2=function(e){function t(t){void 0===t&&(t=0),e.call(this),this._num=1,this._minNum=1,this._maxNum=999,this.skinName="resource/game_skins/custom/CustomNumberStepSkin2.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._type=t}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiCompHandler=function(){0==this._type?this.btnMin.visible=this.btnMax.visible=!1:this.btnMin.visible=this.btnMax.visible=!0},s.onReduBtnClick=function(){this._num--,this.updateData()},s.onAddBtnClick=function(){this._num++,this.updateData()},s.onMaxBtnClick=function(){this._num+=10,this.updateData()},s.onMinBtnClick=function(){this._num-=10,this.updateData()},s.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i(s,"MaxNum",function(){return this._maxNum},function(e){this._maxNum=e}),i(s,"MinNum",function(){return this._minNum},function(e){this._minNum=e}),s.setValue=function(e){this._num!=e&&(this._num=e,this.updateData())},s.getValue=function(){return this._num},s.onTxtNumChange=function(){this._num=Number(this.txtNum.text),this.updateData()},s.updateData=function(){this._num<this._minNum?this._num=this._minNum:this._num>this._maxNum&&(this._num=this._maxNum),this.txtNum&&(this.txtNum.text=this._num.toString()),this.dispatchEvent(new ParamEvent(t.CHANGE))},s.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddBtnClick,this),this.btnRedu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReduBtnClick,this),this.btnMax.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMaxBtnClick,this),this.btnMin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMinBtnClick,this),this.txtNum.addEventListener(egret.Event.CHANGE,this.onTxtNumChange,this)},t.CHANGE="CHANGE",t}(eui.Component);egret.registerClass(CustomNumberStep2,"CustomNumberStep2",["eui.UIComponent"]);var CustomProgressBar=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},n.childrenCreated=function(){e.prototype.childrenCreated.call(this)},n.showAnimation=function(e){this._tween=egret.Tween.get(this.thumb).to({scaleX:1},1e3*e)},n.stopAnimation=function(){this._tween&&(egret.Tween.removeTweens(this.thumb),this._tween=null)},t}(eui.ProgressBar);egret.registerClass(CustomProgressBar,"CustomProgressBar",["eui.UIComponent"]);var CustomRLContainer=function(e){function t(t,i,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=-30),e.call(this),this._type=0,this._currentIndex=0,this._showNum=0,this._gap=0,this._px=0,this._type=t,this._gap=i,this._px=n,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){var e=this;switch(e._itemContainer=new egret.Sprite,e.addChild(e._itemContainer),e._picLeft=new PicLoader,e._picLeft.touchEnabled=!0,e.addChild(e._picLeft),e._picRight=new PicLoader,e._picRight.touchEnabled=!0,e.addChild(e._picRight),e._type){case 0:e._picLeft.loadByJsonName("share_json.share_leftBtn"),e._picLeft.x=this._px,e._picRight.loadByJsonName("share_json.share_rightBtn")}e._picRight.x=e._picLeft.x+this._gap,e._picLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickLeft,e),e._picRight.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickRight,e),e=null},n.onClickLeft=function(e){this._currentIndex--,this._currentIndex<0&&(this._currentIndex=0),this.dispatchEvent(new ParamEvent(t.PAGE_CHANGE)),this.update()},n.onClickRight=function(e){this._currentIndex++,this._currentIndex>this._itemList.length-this._showNum&&(this._currentIndex=this._itemList.length-this._showNum),this.dispatchEvent(new ParamEvent(t.PAGE_CHANGE)),this.update()},n.getCurrentIndex=function(){return this._currentIndex},n.update=function(){this.clearContainer();for(var e=this._currentIndex,t=0;t<this._showNum;t++){var i=this._itemList[e+t];i.x=t*i.width,this._itemContainer.addChild(i)}},n.clearContainer=function(){for(;this._itemContainer.numChildren>0;)this._itemContainer.removeChildAt(0)},n.setItemList=function(e,t){this._itemList=e,this._showNum=t,this.update()},n.setBtnY=function(e){this._picLeft&&(this._picLeft.y=e,this._picRight.y=e)},t.PAGE_CHANGE="CustomRLContainer_PAGE_CHANGE",t}(egret.Sprite);egret.registerClass(CustomRLContainer,"CustomRLContainer");var CustomRadioButton=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},n.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.RadioButton);egret.registerClass(CustomRadioButton,"CustomRadioButton",["eui.UIComponent"]);var CustomTextField=function(e){function t(t){void 0===t&&(t="CustomTextField"),e.call(this),this._type=t,this.size=18,this.textColor=15192247,this.touchEnabled=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.addMiaoBian=function(){this.stroke=1,this.strokeColor=0},n.dispose=function(){t._classDic[this._type]=t._classDic[this._type]--,this.parent&&this.parent.removeChild(this)},t._classDic=new Object,t}(egret.TextField);egret.registerClass(CustomTextField,"CustomTextField");var CustomTextInput=function(e){function t(i){void 0===i&&(i="CustomTextInput"),e.call(this),this._type=i,void 0==t._classDic[i]||null==t._classDic[i]?t._classDic[i]=1:t._classDic[i]=t._classDic[i]+1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dispose=function(){t._classDic[this._type]=t._classDic[this._type]--},n.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},n.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t._classDic=new Object,t}(eui.TextInput);egret.registerClass(CustomTextInput,"CustomTextInput",["eui.UIComponent"]);var DailyChargeView=function(e){function t(){e.call(this),this._itemArr=[],this.skinName="resource/game_skins/dailyCharge/DailyChargeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.tabBar.dataProvider=new eui.ArrayCollection(["充值10元宝","充值99元宝"]),this.tabBar.selectedIndex=0,this.onBarItemTap();var t=new eui.TileLayout;t.paddingTop=3,t.paddingLeft=3,t.paddingRight=3,t.paddingBottom=3,this._itemContainer.layout=t,t.horizontalGap=27,t.verticalGap=27,this._itemContainer.itemRenderer=GoodsItem},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.onDailyUpdate,this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this._btnCharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChargeHandler,this),this._btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetHandler,this),this.onDailyUpdate()},n.onCloseHandler=function(){this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.onDailyUpdate,this),this._btnCharge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChargeHandler,this),this._btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetHandler,this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.clearItems(),e.prototype.onCloseHandler.call(this)},n.onChargeHandler=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.onGetHandler=function(){var e=this.tabBar.selectedIndex+1,t=HuoDongDailyModel.getInstance().getDailyChargeVo(e);this.flyGoods(t),this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQEUST_17000,{id:t.template_id}))},n.updateBtnState=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_14,0),t=this.tabBar.selectedIndex+1,i=HuoDongDailyModel.getInstance().getDailyChargeVo(t);if(e>=i.num){var n=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_34,t);this._btnCharge.visible=!1,this._btnGet.visible=!0,n>=1?(this._btnGet.enabled=!1,this._btnGet.label="已领取"):(this._btnGet.enabled=!0,this._btnGet.label="领取")}else this._btnCharge.visible=!0,this._btnGet.visible=!1},n.onDailyUpdate=function(){this.updateBtnState(),this.updateTabRedDot()},n.updateTabRedDot=function(){for(var e=1;2>=e;e++)this.tabBar.validateNow(),this.tabBar.getChildAt(e-1).showRedDot=HuoDongDailyModel.getInstance().checkDailyChargeCanGetRewardByType(e)},n.onBarItemTap=function(){this.clearItems(),this._itemArr=[];var e=[];e=0==this.tabBar.selectedIndex?HuoDongDailyModel.getInstance().getDailyChargeVo(1).goodsList:HuoDongDailyModel.getInstance().getDailyChargeVo(2).goodsList;for(var t,i,n=e.length,s=0;n>s;s++)i=new GoodsItem,t=GoodsListProxy.getInstance().getGoodsInfoByType(e[s].asset_id),t.num=e[s].value,this._itemArr.push(t),this._itemContainer.dataProvider=new eui.ArrayCollection(this._itemArr);this.updateBtnState()},n.flyGoods=function(e){for(var t=[],i=e.goodsList.length,n=0;i>n;n++){var s=e.goodsList[n].asset_id,a=GoodsListProxy.getInstance().getBasicGood(s);if(null!=a){var o=a.pic;t.push(o)}}AccessGoodFlyEffectManager.getInstance().flyArray(t)},n.clearItems=function(){this._itemContainer.dataProvider=null},t}(LayeroutWindow);egret.registerClass(DailyChargeView,"DailyChargeView");var DarkLogWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/dark/DarkLogSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_dark_log")},n.updateData=function(e){for(var t,i=e.data,n=new eui.ArrayCollection,s=0;s<i.length;s++)t=new LogVO,t.time=i[s].ctime,t.content=DarkModel.getInstance().getLogStr(i[s]),n.addItem(t);this.loglist.dataProvider=n},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.addGlobalEventListener(DarkEvtName.CCMD17101_UPDATE,this.updateData,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.removeGlobalEventListener(DarkEvtName.CCMD17101_UPDATE,this.updateData,this)},t}(LayeroutWindow);egret.registerClass(DarkLogWindow,"DarkLogWindow");var DarkRankItem=function(e){function t(){e.call(this),this.skinName="resource/game_skins/dark/DarkRankItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dataChanged=function(){this._rankData=this.data;var e="#E7D0B7";1==this._rankData.rank?e=ColorUtil.COLOR_GOLD:2==this._rankData.rank?e=ColorUtil.COLOR_PURPLE:3==this._rankData.rank&&(e=ColorUtil.COLOR_BLUE),this.txtName.htmlText=ColorUtil.getColorHtmlStr(this._rankData.name,e),this.txtRank.htmlText=ColorUtil.getColorHtmlStr(this._rankData.rank,e),this.txtValue.htmlText=ColorUtil.getColorHtmlStr(this._rankData.value+"层",e)},t}(eui.ItemRenderer);egret.registerClass(DarkRankItem,"DarkRankItem");var DarkRankWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/dark/DarkRankSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_dark_rank")},n.updateData=function(e){for(var t,i=e.data,n=i.rank_list,s=new eui.ArrayCollection,a=0;a<n.length;a++)n[a].role_id==RoleModel.getInstance().getRoleCommon().role_id&&(t=n[a]),s.addItem(n[a]);this.ranklist.dataProvider=s,t?this.txtRank.text="我的排名："+t.rank+"        "+t.value+"层":this.txtRank.text="我的排名：未上榜"},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateData,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateData,this)},t}(LayeroutWindow);egret.registerClass(DarkRankWindow,"DarkRankWindow");var DarkRewardView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/dark/DarkRewardSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this);for(var e,t,i=1;6>i;i++){e=DarkModel.getInstance().getRewardById(i);for(var n=0;4>n;n++)t=this["item_"+i+"_"+n],e.add_item[n]?(t.data=e.add_item[n].info,t.visible=!0):t.visible=!1}},n.dispose=function(){e.prototype.dispose.call(this);for(var t,i=1;6>i;i++)for(var n=0;4>n;n++)t=this["item_"+i+"_"+n],t.dispose(),t=null},t}(BaseView);egret.registerClass(DarkRewardView,"DarkRewardView");var DarkRewardView2=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/dark/DarkRewardSkin2.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this);for(var e,t=Tools.changeToItemData(SingleModel.getInstance().getSingVO(SingleModel.KEY_17103).value),i=0;4>i;i++)e=this["item_1_"+i],t[i]?(e.data=t[i].info,e.visible=!0):e.visible=!1;t=Tools.changeToItemData(SingleModel.getInstance().getSingVO(SingleModel.KEY_17105).value);for(var n=0;4>n;n++)e=this["item_4_"+n],t[n]?(e.data=t[n].info,e.visible=!0):e.visible=!1;var s=DarkModel.getInstance().getCurDataVo();t=s.null_reward;for(var a=0;4>a;a++)e=this["item_2_"+a],t[a]?(e.data=t[a].info,e.visible=!0):e.visible=!1;t=s.add_item;for(var o=0;4>o;o++)e=this["item_3_"+o],t[o]?(e.data=t[o].info,e.visible=!0):e.visible=!1},n.dispose=function(){e.prototype.dispose.call(this);for(var t,i=1;5>i;i++)for(var n=0;4>n;n++)t=this["item_"+i+"_"+n],t.dispose(),t=null},t}(BaseView);egret.registerClass(DarkRewardView2,"DarkRewardView2");var DarkRewardWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/dark/DarkRewardWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_dark_reward"),this.tabBar.dataProvider=new eui.ArrayCollection(["排行奖励","其他奖励"]),this._isInit||(this._isInit=!0,this.setSelectIndex())},n.onBarItemTap=function(e){this.setSelectIndex(this.tabBar.selectedIndex)},n.setSelectIndex=function(e){if(void 0===e&&(e=0),this._isInit)switch(this.tabBar.selectedIndex=e,this._view&&this._view.parent&&this._view.parent.removeChild(this._view),this._other&&this._other.parent&&this._other.parent.removeChild(this._other),e){case 0:this._view||(this._view=new DarkRewardView),this.contentGroup.addChild(this._view);break;case 1:this._other||(this._other=new DarkRewardView2),this.contentGroup.addChild(this._other)}},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this),this._view&&(this._view.parent&&this._view.parent.removeChild(this._view),this._view.dispose(),this._view=null),this._other&&(this._other.parent&&this._other.parent.removeChild(this._other),this._other.dispose(),this._other=null)},t}(LayeroutWindow);egret.registerClass(DarkRewardWindow,"DarkRewardWindow");var DarkRewardWindow2=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(DarkRewardWindow2,"DarkRewardWindow2");var DarkTansuoWindow=function(e){function t(){e.call(this),this._barValue=0,this.skinName="resource/game_skins/dark/DarkTansuoSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_dark_ts"),this.bg=new PicLoader,this.bg.load("resource/assets/icon/dark/darkBg3.png"),this.bgGroup.addChild(this.bg);var t=[];t.push("四周漆黑一片，野兽的吼叫从远方传来。。。\n你在神殿中摸索着，想找出前进的方向"),t.push("传说有一座失落的神殿，里面有无穷的财宝\n很多人进入了神殿，但他们都没有出来"),t.push("一阵冷风唤醒了你，看来这里也不再安全了\n是时候前往更深的地方，毕竟已经没有出路"),t.push("过去的冒险者留下了一些文字。。。\n然而除了疯言疯语外没有任何有价值的情报"),t.push("指南针失灵的次数越来越多了\n你不禁开始怀疑你在走回头路"),t.push("一个同样狼狈的冒险者不怀好意的盯着你\n但最终他消失在了远处的黑暗中"),this.txtDes.text=t[Math.floor(6*Math.random())],this.txtDes2.addMiaoBian()},n.setData=function(e){null==this._itemSp&&(this._itemSp=new Csprite),this._itemArr=[];for(var t,i=Math.floor(e/100),n=DarkModel.getInstance().getVoById(i),s=0;s<n.null_reward.length;s++)t=new GoodsItem,t.data=n.null_reward[s].info,t.x=100*s,this._itemSp.addChild(t),this._itemArr.push(t);this._itemSp.x=this.width/2-this._itemSp.width/2,this._itemSp.y=300,this._itemSp.visible=!1,this.addChild(this._itemSp),this.txtDes2.text=DarkModel.getInstance().isDoor?"谢天谢地，你发现了通往下一层的大门":"一个安全的场所，你搜索到了一些战利品",this.txtDes2.visible=!1,this.bar.visible=!0,this.bar.maximum=100,this.bar.value=0,this._barValue=0,TimerManager.getInstance().remove(100,this.timeComplete,this),TimerManager.getInstance().add(100,this.timeComplete,this)},n.timeComplete=function(){this._barValue+=10,this.bar.value=this._barValue,this._barValue>=100&&(TimerManager.getInstance().remove(100,this.timeComplete,this),this._itemSp.visible=!0,this.txtDes2.visible=!0,this.bar.visible=!1,this.imageTitle.source="darkTxt5",DarkModel.getInstance().isDoor&&null==this._effectMen&&(this._effectMen=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("anmen"),300,-100,this.bgGroup,150)))},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),TimerManager.getInstance().remove(100,this.timeComplete,this),this.bg&&(this.bg.dispose(),this.bg=null),this._itemSp&&(this._itemSp.parent.removeChild(this._itemSp),this._itemSp=null);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t.parent.removeChild(t),t.dispose(),t=null;this._itemArr=null,this._effectMen&&(this._effectMen.dispose(),this._effectMen=null)},t}(LayeroutWindow);egret.registerClass(DarkTansuoWindow,"DarkTansuoWindow");var DarkView=function(e){function t(){e.call(this),this._gridName=["暂无","A1","A2","A3","A4","B1","B2","B3","B4","C1","C2","C3","C4","D1","D2","D3","D4"],this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/dark/DarkViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.bg2=new PicLoader,this.bg2.load("resource/assets/icon/dark/darkBg2.png"),this.bg2.x=3,this.bg2.y=307,this.bg2.visible=!1,this.addChildAt(this.bg2,0),this.bg=new PicLoader,this.bg.load("resource/assets/icon/dark/darkBg.png"),this.addChildAt(this.bg,0),this.txtLook_rank.htmlText="<u>查看排名</u>",this.txtLook_reward.htmlText="<u>查看奖励</u>",this.txtLog.htmlText="<u>战斗记录</u>",this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.txtLook_rank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRankClick,this),this.txtLook_reward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRewardClick,this),this.txtLog.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLogClick,this),this.addGlobalEventListener(DarkEvtName.CCMD17100_UPDATE,this.updateData,this),this.addGlobalEventListener(DarkEvtName.CCMD17101_UPDATE,this.updateLog,this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateRank,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this._gridArr=[];for(var e,t=1;17>t;t++)e=this["map_"+t],e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGridClick,this),this._gridArr.push(e);this.roleGroup.touchEnabled=!1,this.roleGroup.touchChildren=!1,this.mapGroup.touchEnabled=!1},n.onHelp=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.DARK))},n.onGridClick=function(e){var t=e.target,i=Number(t.name.split("_")[1]);this._curGrid!=i&&this.dispatchGlobalEvent(new ParamEvent(DarkEvtName.CCMD17110,100*this._curLv+i))},n.onGetClick=function(){this._curLv++,this.roleGroup.visible=!1,this.bg2.visible=this._curLv%2==1,this.effectGroup.visible=!1;var e=DarkModel.getInstance().getVoById(this._curLv);e&&(this.txtTitle.text=e.name);for(var t,i=0;i<this._gridArr.length;i++)t=this._gridArr[i],t.alpha=0;this._effectMap=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("antu"),290,580,this.mapGroup,150)},n.onRankClick=function(){this.dispatchGlobalEvent(new ParamEvent(DarkEvtName.OPEN_RANK_VIEW))},n.onLogClick=function(){this.dispatchGlobalEvent(new ParamEvent(DarkEvtName.OPEN_LOG_VIEW))},n.onRewardClick=function(){this.dispatchGlobalEvent(new ParamEvent(DarkEvtName.OPEN_REWARD_VIEW))},n.updateData=function(e){this._data=e.data,this.txtTop.text=this._data.total_level.toString(),this._curGrid=this._data.grid_id%100,this._curLv=Math.floor(this._data.grid_id/100),0==this._curLv&&(this._curLv=1);var t=DarkModel.getInstance().getVoById(this._curLv);this.txtTitle.text=t.name,this.bg2.visible=this._curLv%2==1,this.txtCur.text="当前位置："+this._gridName[this._curGrid];var i=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_17101).value);this._data.last_time>0&&(TimerManager.getInstance().remove(1e3,this.onShowTime,this),TimerManager.getInstance().add(1e3,this.onShowTime,this)),this.txtCount.text=this._data.num+"/"+i,this.effectGroup.visible=this._data.door>0,this.effectGroup.visible?null==this._effect&&(this._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("anniu"),60,25,this.effectGroup,80,!0)):this._effect&&(this._effect.dispose(),this._effect=null);for(var n,s=0;s<this._gridArr.length;s++)n=this._gridArr[s],s+1==this._curGrid?(n.alpha=1,this.roleGroup.x=n.x+26,this.roleGroup.y=n.y-45):n.alpha=0;if(this._curGrid>0){if(this.roleGroup.visible=!0,!this.figureMovie){this.figureMovie=new BigFigure,this.figureMovie.x=75,this.figureMovie.y=50,this.figureMovie.scaleX=.6,this.figureMovie.scaleY=.6,this.roleGroup.addChild(this.figureMovie);var a=RoleModel.getInstance().getPartnerList()[0];this.figureMovie.changeBody(a.getCareer(),a.getSex(),a.getCloth()),this.figureMovie.changeWeapon(a.getCareer(),a.getSex(),a.getWeapon())}this._effectZhan||(this._effectZhan=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("anzhan"),75,140,this.roleGroup,80,!0)),this._effectJiantou&&(this._effectJiantou.dispose(),this._effectJiantou=null),this._txtGuide&&(this._txtGuide.parent.removeChild(this._txtGuide),this._txtGuide=null)}else{var o=Math.floor(16*Math.random());this.roleGroup.x=this._gridArr[o].x+26,this.roleGroup.y=this._gridArr[o].y-45,this._effectJiantou||(this._effectJiantou=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("xinshou"),-5,0,this.roleGroup,80,!0)),this._txtGuide||(this._txtGuide=new CustomLabel,this._txtGuide.htmlText=ColorUtil.getColorHtmlStr("点击探索",ColorUtil.COLOR_GREEN),this._txtGuide.x=35,this._txtGuide.y=100,this._txtGuide.size=20,this._txtGuide.addMiaoBian(),this.roleGroup.addChild(this._txtGuide)),this.figureMovie&&(this.figureMovie.parent.removeChild(this.figureMovie),this.figureMovie.dispose(),this.figureMovie=null)}},n.onShowTime=function(){this._data.last_time--;var e=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_17101).value);this._data.last_time>0?this.txtCount.htmlText=this._data.num+"/"+e+"("+ColorUtil.getColorHtmlStr("恢复倒计时："+TimeUtil.getTime(this._data.last_time),ColorUtil.COLOR_GREEN)+")":(this.txtCount.text=this._data.num+"/"+e,TimerManager.getInstance().remove(1e3,this.onShowTime,this))},n.updateLog=function(e){var t=e.data;t[0]&&(this.txtRankContent.htmlText=TimeUtil.formatTime(1e3*t[0].ctime)+"    "+DarkModel.getInstance().getLogStr(t[0])),t[1]&&(this.txtRankContent2.htmlText=TimeUtil.formatTime(1e3*t[1].ctime)+"    "+DarkModel.getInstance().getLogStr(t[1]))},n.updateRank=function(e){var t=e.data;this.txtRank.text=t.self_rank.toString()},n.dispose=function(){e.prototype.dispose.call(this),this.bg&&(this.bg.dispose(),this.bg=null),this.bg2&&(this.bg2.dispose(),this.bg2=null),this._effect&&(this._effect.dispose(),this._effect=null),this._effectZhan&&(this._effectZhan.dispose(),this._effectZhan=null),this._effectMap&&(this._effectMap.dispose(),this._effectMap=null),this.figureMovie&&(this.figureMovie.parent.removeChild(this.figureMovie),this.figureMovie.dispose(),this.figureMovie=null);for(var t,i=1;17>i;i++)t=this["map_"+i],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGridClick,this),t.dispose(),t=null;this._gridArr=null,TimerManager.getInstance().remove(1e3,this.onShowTime,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.txtLook_rank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRankClick,this),this.txtLook_reward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRewardClick,this),this.txtLog.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLogClick,this),this.removeGlobalEventListener(DarkEvtName.CCMD17100_UPDATE,this.updateData,this),this.removeGlobalEventListener(DarkEvtName.CCMD17101_UPDATE,this.updateLog,this),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateRank,this),this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this._effectJiantou&&(this._effectJiantou.dispose(),this._effectJiantou=null),this._txtGuide&&(this._txtGuide.parent.removeChild(this._txtGuide),this._txtGuide=null)},t}(Csprite);egret.registerClass(DarkView,"DarkView");var DominateItem=function(e){function t(t){e.call(this),this.type=0,this.type=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/dominate/DominateItemSkin.exml",this.updateInfo()}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this._imageState=new PicLoader,this.addChild(this._imageState),this._imageState.x=-2,this._imageState.y=82,this._imageState.load(UrlUtil.getDominateURL("dominate_"+this.type)+".png"),this.updateInfo(),this._item.showTips=!1,this._item.setImageBottomType(Number("11"+this.type))},s.updateInfo=function(){return this.nodeServerVO=DominateModel.getInstance().getDominateEquipServerData(FigureModel.getInstance().selectedpartnerVOInDominateWin.parnerID,this.type),null==this.nodeServerVO?(this._item.data=null,void this._imageState.load(UrlUtil.getDominateURL("dominate_"+this.type)+".png")):(this._imageState.load(UrlUtil.getDominateURL("type"+this.type)+".png"),this._item.data=GoodsListProxy.getInstance().getEquipInfoByType(DominateModel.dominateEquipDic[this.type-1]),void this._item.setSpecialEquipLvl(this.nodeServerVO.star))},i(s,"width",function(){return 140}),s.dispose=function(){this._imageState&&(this._imageState.dispose(),this._imageState=null),this.parent&&this.parent.removeChild(this)},t}(Csprite);egret.registerClass(DominateItem,"DominateItem");var DominateUpLevelView=function(e){function t(){e.call(this),this._itemArr=[],this._itemStarArr=[],this.curType=0,this._delaySI=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/dominate/DominateUpLevelViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this._txtLink.htmlText="<u><a href = 'event:2'>获取材料</a></u>"},n.onOpenHandler=function(){this.createList(),DominateModel.getInstance().addEventListener(DominateEvtName.DOMINATE_UPDATE_INFO,this.updateInfo,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER_IN_DOMINATE,this.onPartnerChangeHandler,this),this._txtLink.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOKHandler,this)},n.onCloseHandler=function(){this.clearItems(),DominateModel.getInstance().removeEventListener(DominateEvtName.DOMINATE_UPDATE_INFO,this.updateInfo,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER_IN_DOMINATE,this.onPartnerChangeHandler,this),this._txtLink.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOKHandler,this),clearTimeout(this._delaySI)},n.onBtnOKHandler=function(){var e=this,t=new ParamEvent(DominateEvtName.CCMD12402);t.data={id:FigureModel.getInstance().selectedpartnerVOInDominateWin.parnerID,type:this.curType},this.dispatchGlobalEvent(t),1==this._btnOK.enabled&&(this._btnOK.enabled=!1),this._delaySI=setTimeout2(function(){e.updateBtnEnable()},300)},n.updateBtnEnable=function(){0==this._btnOK.enabled&&(this._btnOK.enabled=!0)},n.onTxtLinkHandler=function(){var e=new ParamEvent(OrangeSuitEvtName.ORANGESUIT_OPEN_DECOMPOSITION_VIEW);e.data={type:3,linkStrArr:[{type:GetMaterialItem.OPEN_ROUND_BOSS,linkStr:"<u><a href = 'event:1'>获得主宰装备：转生BOSS</a></u>"},{type:GetMaterialItem.OPEN_SECRET_MALL,linkStr:"<u><a href = 'event:2'>获得主宰碎片：积分商城</a></u>"}]},this.dispatchGlobalEvent(e)},n.onPartnerChangeHandler=function(){this.requestDominate()},n.requestDominate=function(){var e=new ParamEvent(DominateEvtName.CCMD12400),t=FigureModel.getInstance().selectedpartnerVOInDominateWin;e.data={id:t.parnerID},this.dispatchGlobalEvent(e)},n.createList=function(){for(var e,t=0;4>t;t++)e=new DominateItem(t+1),this._itemContainer.addChild(e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClickHandler,this),e.x=t*e.width,this._itemArr.push(e);this.curType<=0&&(this.curType=this._itemArr[t].type),this.setSelectd()},n.updateList=function(){for(var e,t=FigureModel.getInstance().selectedpartnerVOInDominateWin,i=0;i<this._itemArr.length;i++)e=this._itemArr[i],e.updateInfo(),DominateModel.getInstance().getDominateSingleCanUpLevelByType(t,e.type)?e.showRedDot=!0:e.showRedDot=!1},n.clearItems=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e.dispose(),e=null;
this._itemArr=[]},n.onItemClickHandler=function(e){var t=e.currentTarget;this._selectedItem=t,this.curType=t.type,this.setSelectd()},n.updateStar=function(){if(this._itemStarArr.length<=0)for(var e,t=0;10>t;t++)e=new CustomImage,e.source=RES.getRes("share_json.share_star3"),this._starContainer.addChild(e),this._itemStarArr.push(e),e.x=45*t;for(var i in this._itemStarArr)this._itemStarArr[i].source=RES.getRes("share_json.share_star3");if(null!=this.nodeServerVO&&null!=this.proNextVO)for(var e,n=this.nodeServerVO.level,t=0;n>t;t++)e=this._itemStarArr[t],n>t&&(e.source=RES.getRes("share_json.share_star4"))},n.updateNum=function(){var e=0,t="#e7d0b7";this._txtConLabel.text="",this._txtCount.text="",this._txtRate.text="",this.advVONextVO&&(e=GoodsListProxy.getInstance().findGoodNumber(this.advVONextVO.con_itemid),e<this.advVONextVO.con_count&&(t="#ff0000"),this._txtConLabel.text="消耗"+GoodsListProxy.getInstance().getBasicGood(this.advVONextVO.con_itemid).name,this._txtCount.htmlText="<font color='"+t+"'>"+e+"</font>/"+this.advVONextVO.con_count,this._txtRate.text=this.advVONextVO.success/100+"%")},n.setSelectd=function(){this._selectedItem=this._itemArr[this.curType-1],this._imageSelected.x=this._itemContainer.x+this._selectedItem.x+3,this._imageSelected.y=this._itemContainer.y+this._selectedItem.y-4,this.updateInfo()},n.updateInfo=function(){function e(e,i,n,s,a){void 0===n&&(n="#e7d0b7"),void 0===s&&(s=!1),void 0===a&&(a=!1);for(var o=0,r=0,h="",l="",d=0;d<i.length;d++)l=i[d],o=null==e?0:e[l],r=d,!a&&0>=o||(s&&t.push(l),h+=r>=5?"\n<font color='"+n+"'>"+EquipBasic.PROPERTY_NAME[l]+" ：</font><font color='"+n+"'>+"+o+"%</font>":"\n<font color='"+n+"'>"+EquipBasic.PROPERTY_NAME[l]+" ：</font><font color='"+n+"'>+"+o+"</font>");return h}var t=[],i=0,n=0;RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.DOMINATE_HEROLIST_REDDOT,{index:1})),RedDotsModel.getInstance().calDominateUpLevelTabRedDot(),this.nodeServerVO=DominateModel.getInstance().getDominateEquipServerData(FigureModel.getInstance().selectedpartnerVOInDominateWin.parnerID,this.curType),null!=this.nodeServerVO?(i=this.nodeServerVO.star,n=this.nodeServerVO.level,this._startedContainer.visible=!0,this._txtState.visible=!1):(this._startedContainer.visible=!1,this._txtState.visible=!0),this.advVO=DominateModel.getInstance().getDominateAdvVO(n,this.curType),this.advVONextVO=DominateModel.getInstance().getDominateAdvVO(n+1,this.curType),this.proVO=DominateModel.getInstance().getDominateVO(i,this.curType),this.proNextVO=DominateModel.getInstance().getDominateVO(i+1,this.curType),this.proVO=this.resetPro(this.proVO,n),this.proNextVO=this.resetPro(DominateModel.getInstance().getDominateVO(i,this.curType),n+1);var s="",a="";0>=i?(s=e(this.proNextVO,EquipBasic.PROPERTY_INDEX,"#00D228",!0),a=e(this.proVO,t,"#e7d0b7",!1,!0),this._txtFpower.text="0"):(a=e(this.proVO,EquipBasic.PROPERTY_INDEX),this.proNextVO&&(s=e(this.proNextVO,EquipBasic.PROPERTY_INDEX,"#00D228")),this._txtFpower.text=Number(PropertyUtil.calculateProFight(this.proVO)).toString()),this._txtPro.htmlText=a,this._txtProNext.htmlText=s,this.updateNum(),this.updateList(),this.updateStar()},n.resetPro=function(e,t){var i=new DominateVO,n=DominateModel.getInstance().getDominateAdvVO(t,this.curType);if(null==n)return e;null!=e&&(i.template_id=e.template_id,i.con_count=e.con_count,i.con_itemid=e.con_itemid,i.con_item=e.con_item,i.type=e.type,i.star_level=e.star_level,i.player_round=e.player_round,i.show_star=e.show_star,i.success=e.success);for(var s="",a=0;a<EquipBasic.PROPERTY_INDEX.length;a++)s=EquipBasic.PROPERTY_INDEX[a],e&&(i[s]=e[s]),i[s]>0&&("crit"==s?i[s]=Math.floor(Number(n.crit)+Number(i[s])):i[s]=Math.floor(i[s]*(1+n.promote/1e4)));return i},t}(BaseView);egret.registerClass(DominateUpLevelView,"DominateUpLevelView");var DominateUpStarView=function(e){function t(){e.call(this),this._itemArr=[],this._itemStarArr=[],this.curType=0,this._delaySI=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/dominate/DominateUpStarViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this._txtLink.htmlText="<u><a href = 'event:2'>获取材料</a></u>"},n.onOpenHandler=function(){this.createList(),DominateModel.getInstance().addEventListener(DominateEvtName.DOMINATE_UPDATE_INFO,this.updateInfo,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER_IN_DOMINATE,this.onPartnerChangeHandler,this),this._txtLink.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOKHandler,this),this.updateInfo()},n.onCloseHandler=function(){this.clearItems(),DominateModel.getInstance().removeEventListener(DominateEvtName.DOMINATE_UPDATE_INFO,this.updateInfo,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER_IN_DOMINATE,this.onPartnerChangeHandler,this),this._txtLink.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOKHandler,this),clearTimeout(this._delaySI)},n.onBtnOKHandler=function(){var e=this,t=new ParamEvent(DominateEvtName.CCMD12401);t.data={id:FigureModel.getInstance().selectedpartnerVOInDominateWin.parnerID,type:this.curType},this.dispatchGlobalEvent(t),1==this._btnOK.enabled&&(this._btnOK.enabled=!1),this._delaySI=setTimeout2(function(){e.updateBtnEnable()},300)},n.updateBtnEnable=function(){0==this._btnOK.enabled&&(this._btnOK.enabled=!0)},n.onTxtLinkHandler=function(){var e=new ParamEvent(OrangeSuitEvtName.ORANGESUIT_OPEN_DECOMPOSITION_VIEW);e.data={type:3,linkStrArr:[{type:GetMaterialItem.OPEN_ROUND_BOSS,linkStr:"<u><a href = 'event:1'>获得主宰装备：转生BOSS</a></u>"},{type:GetMaterialItem.OPEN_SECRET_MALL,linkStr:"<u><a href = 'event:2'>获得主宰碎片：积分商城</a></u>"}]},this.dispatchGlobalEvent(e)},n.onPartnerChangeHandler=function(){this.requestDominate()},n.requestDominate=function(){var e=new ParamEvent(DominateEvtName.CCMD12400),t=FigureModel.getInstance().selectedpartnerVOInDominateWin;e.data={id:t.parnerID},this.dispatchGlobalEvent(e)},n.createList=function(){for(var e,t=0;4>t;t++)e=new DominateItem(t+1),this._itemContainer.addChild(e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClickHandler,this),e.x=t*e.width,this._itemArr.push(e);this.curType<=0&&(this.curType=this._itemArr[t].type),this.setSelectd()},n.onItemClickHandler=function(e){var t=e.currentTarget;this._selectedItem=t,this.curType=t.type,this.setSelectd()},n.updateList=function(){for(var e,t=FigureModel.getInstance().selectedpartnerVOInDominateWin,i=0;i<this._itemArr.length;i++)e=this._itemArr[i],e.updateInfo(),DominateModel.getInstance().getDominateSingleCanUpStarByType(t,e.type)?e.showRedDot=!0:e.showRedDot=!1},n.clearItems=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e.dispose(),e=null;this._itemArr=[]},n.updateStar=function(){if(this._itemStarArr.length<=0)for(var e,t=0;5>t;t++)e=new CustomImage,e.source=RES.getRes("share_json.share_star1"),this._starContainer.addChild(e),this._itemStarArr.push(e),e.x=127+45*t;for(var i in this._itemStarArr)this._itemStarArr[i].source=RES.getRes("share_json.share_star1");if(null!=this.nodeServerVO&&null!=this.proNextVO)for(var e,n=this.proVO.show_star,t=0;n>t;t++)e=this._itemStarArr[t],n>t&&(e.source=RES.getRes("share_json.share_star2"))},n.updateNum=function(){var e=0,t="#e7d0b7",i="#e7d0b7";this._txtCount.text="",this._txtRate.text="";var n="",s=RoleModel.getInstance().getRoleCommon().round;this.proNextVO&&(e=GoodsListProxy.getInstance().findGoodNumber(this.proNextVO.con_itemid),s<this.proNextVO.player_round&&(t="#ff0000"),e<this.proNextVO.con_count&&(i="#ff0000"),"0"==this.proNextVO.con_item?(this.proNextVO.con_count=0,n=GoodsListProxy.getInstance().getBasicGood(this.proVO.con_itemid).name):n=GoodsListProxy.getInstance().getBasicGood(this.proNextVO.con_itemid).name,this._txtConLabel.text="消耗"+n,this._txtlv.htmlText="<font color='"+t+"'>"+this.proNextVO.player_round+"转</font>",this._txtCount.htmlText="<font color='"+i+"'>"+e+"</font>/"+this.proNextVO.con_count,this._txtRate.text=this.proNextVO.success/100+"%")},n.setSelectd=function(){this._selectedItem=this._itemArr[this.curType-1],this._imageSelected.x=this._itemContainer.x+this._selectedItem.x+3,this._imageSelected.y=this._itemContainer.y+this._selectedItem.y-4,this.updateInfo()},n.updateInfo=function(){function e(e,i,n,s,a){void 0===n&&(n="#e7d0b7"),void 0===s&&(s=!1),void 0===a&&(a=!1);for(var o=0,r=0,h="",l="",d=0;d<i.length;d++)l=i[d],o=null==e?0:e[l],r=d,!a&&0>=o||(s&&t.push(l),h+=r>=5?"\n<font color='"+n+"'>"+EquipBasic.PROPERTY_NAME[l]+" ：</font><font color='"+n+"'>+"+o+"%</font>":"\n<font color='"+n+"'>"+EquipBasic.PROPERTY_NAME[l]+" ：</font><font color='"+n+"'>+"+o+"</font>");return h}var t=[],i=0;RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.DOMINATE_HEROLIST_REDDOT,{index:0})),RedDotsModel.getInstance().calDominateUpStarTabRedDot(),this.nodeServerVO=DominateModel.getInstance().getDominateEquipServerData(FigureModel.getInstance().selectedpartnerVOInDominateWin.parnerID,this.curType),null!=this.nodeServerVO&&(i=this.nodeServerVO.star),this.proVO=DominateModel.getInstance().getDominateVO(i,this.curType),this.proNextVO=DominateModel.getInstance().getDominateVO(i+1,this.curType),this.proNextVO&&(null==this.nodeServerVO?this._btnOK.label="激活":"0"==this.proNextVO.con_item?this._btnOK.label="免费升级":this._btnOK.label="升星");var n="",s="";0>=i?(n=e(this.proNextVO,EquipBasic.PROPERTY_INDEX,"#00D228",!0),s=e(this.proVO,t,"#e7d0b7",!1,!0),this._txtFpower.text="0"):(s=e(this.proVO,EquipBasic.PROPERTY_INDEX),this.proNextVO&&(n=e(this.proNextVO,EquipBasic.PROPERTY_INDEX,"#00D228")),this._txtFpower.text=Number(PropertyUtil.calculateProFight(this.proVO)).toString()),this._txtPro.htmlText=s,this._txtProNext.htmlText=n,this.updateStar(),this.updateNum(),this.updateList()},t}(BaseView);egret.registerClass(DominateUpStarView,"DominateUpStarView");var DominateWindow=function(e){function t(){e.call(this),this.curType=0,this._selectedTabIndex=0,this.skinName="resource/game_skins/dominate/DominateWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.DOMINATE,this.tabBar.dataProvider=new eui.ArrayCollection(["升级","进阶"]),this.setImageWindowTitle("dominate_title"),this.heroListTopBox=new HeroListTopBox,this.topContainer.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this);var t=FigureModel.getInstance().selectedPartnerVO;null==t&&(t=FigureModel.getInstance().selectedPartnerVO=this.heroListTopBox.roleListData[0]),FigureModel.getInstance().selectedpartnerVOInDominateWin=t,this.heroListTopBox.setIndex(this.heroListTopBox.getIndexByVO(t)),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),RedDotsModel.getInstance().addEventListener(RedDotsModel.DOMINATE_TAB_REDDOT,this.updateTabRedDot,this),RedDotsModel.getInstance().addEventListener(RedDotsModel.DOMINATE_HEROLIST_REDDOT,this.updateHeroListRedDot,this),RedDotsModel.getInstance().calDominateUpStarTabRedDot(),RedDotsModel.getInstance().calDominateUpLevelTabRedDot()},n.onCloseHandler=function(){this.heroListTopBox&&(this.heroListTopBox.parent&&this.heroListTopBox.parent.removeChild(this.heroListTopBox),this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),RedDotsModel.getInstance().removeEventListener(RedDotsModel.DOMINATE_TAB_REDDOT,this.updateTabRedDot,this),RedDotsModel.getInstance().removeEventListener(RedDotsModel.DOMINATE_HEROLIST_REDDOT,this.updateHeroListRedDot,this),this.clearContent(),e.prototype.onCloseHandler.call(this)},n.openView=function(e,t){if(t)this.isPop=!0;else{var i=!this.isPop;this.isPop=i}if(1==this.isPop){var n=FigureModel.getInstance().selectedPartnerVO;null==n&&(n=FigureModel.getInstance().selectedPartnerVO=this.heroListTopBox.roleListData[0]),FigureModel.getInstance().selectedpartnerVOInDominateWin=n,this.heroListTopBox.setIndex(this.heroListTopBox.getIndexByVO(n)),this.setTabIndex(e),this.onBarItemTap(null)}},n.onBoxTap=function(e){e.data&&(FigureModel.getInstance().selectedpartnerVOInDominateWin=e.data)},n.onBarItemTap=function(e){switch(this.clearContent(),this.tabBar.selectedIndex){case 0:this._dominateUpStarView||(this._dominateUpStarView=new DominateUpStarView),this._dominateUpStarView.curType=this.curType,this.container.addChild(this._dominateUpStarView),this._dominateUpStarView.onOpenHandler();break;case 1:this._dominateUpLevelView||(this._dominateUpLevelView=new DominateUpLevelView,this.container.addChild(this._dominateUpLevelView)),this._dominateUpLevelView.curType=this.curType,this._dominateUpLevelView.onOpenHandler()}},n.setTabIndex=function(e){this._selectedTabIndex=e,this.tabBar.selectedIndex=this._selectedTabIndex},n.updateHeroListRedDot=function(e){this.heroListTopBox.updateDominateRedDots(e.data.index)},n.updateTabRedDot=function(e){var t=e.data.index,i=e.data.show;i?(this.tabBar.validateNow(),this.tabBar.getChildAt(t).showRedDot=!0):(this.tabBar.validateNow(),this.tabBar.getChildAt(t).showRedDot=!1)},n.clearContent=function(){for(var e;this.container.numChildren>0;)e=this.container.getChildAt(0),this.container.removeChild(e),e.dispose(),e=null;this._dominateUpLevelView&&(this._dominateUpLevelView.parent&&this._dominateUpLevelView.parent.removeChild(this._dominateUpLevelView),this._dominateUpLevelView.onCloseHandler(),this._dominateUpLevelView=null),this._dominateUpStarView&&(this._dominateUpStarView.parent&&this._dominateUpStarView.parent.removeChild(this._dominateUpStarView),this._dominateUpStarView.onCloseHandler(),this._dominateUpStarView=null)},t}(LayeroutWindow);egret.registerClass(DominateWindow,"DominateWindow");var UIEffect=function(e){function t(t){void 0===t&&(t="UIEffect"),e.call(this),this.scaleX=1,this.scaleY=1,this.offsetX=100,this.offsetY=100,this.hasWeight=!0,this._startFrame=0,this._endFrame=-1,this._lastTime=0,this._delayPlaySi=0,this._targetStr="",this._rotation=0,this._showID=0,this._targetStr=t}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.getRotation=function(){return this._rotation},s.setRotation=function(e){this._rotation=e,this.content&&(this.content.rotation=this._rotation)},s.showEffect=function(e,i,n,s,a,o,r,h,l,d,_,c,u,p,g){var m=this;void 0===a&&(a=60),void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===h&&(h=0),void 0===l&&(l=!0),void 0===d&&(d=0),void 0===_&&(_=!0),void 0===c&&(c=1),void 0===u&&(u=-1),void 0===p&&(p=0),void 0===g&&(g=-1),is(s,"egret.DisplayObject")&&(t.getNum()>20||(this.stop(),this._showID=t.showID++,this._time=d,t._effectDic[this._showID]=e,t._effectDic2[this._showID]=this,this._lastTime=h,this._isLoop=o,this._startFrame=c,this.content=new BitmapMovieClip,this.content.setDealy(a),this.content.x=i,this.content.y=n,this.content.hasWeight=this.hasWeight,this.content.touchEnabled=!1,g>=0?s.addChildAt(this.content,g):s.addChild(this.content),d>0&&(this.content.visible=!1,this._time=d,TimerManager.getInstance().remove(this._time,this.canShow,this),TimerManager.getInstance().add(this._time,this.canShow,this)),_&&0==this._lastTime&&this.content.addEventListener(BitmapMovieClip.END,this.endHandler,this),this._assetURL=e,SourceCache.getInstance().has(this._assetURL)?(this.content.scaleX=this.scaleX,this.content.scaleY=this.scaleY,this.content.offsetX=this.offsetX,this.content.offsetY=this.offsetY,this.content.rotation=this._rotation,this.content.setMovieClipData(SourceCache.getInstance().getEffect(this._assetURL)),0==p?this.content.gotoAndPlay(this._startFrame,this._isLoop,this._startFrame,u):(this._delayPlaySi>0&&clearTimeout(this._delayPlaySi),this._delayPlaySi=setTimeout2(function(){m.delayToPlayEffect()},p)),this._lastTime>0&&(clearTimeout(this.delayRemoveTime),this.delayRemoveTime=setTimeout2(function(){m.stopEffect()},h))):(SourceCache.getInstance().addEventListener(SourceCache.LOAD_EFFECT_COMPLETE,this.assetLoadCompleteHandler,this),0==SourceCache.getInstance().isLoading(this._assetURL)&&SourceCache.getInstance().load(this._assetURL,ResourceType.EFFECT))))},s.delayToPlayEffect=function(){null!=this.content&&this.content.gotoAndPlay(this._startFrame,this._isLoop,this._startFrame,this._endFrame)},s.canShow=function(){this.content.visible=!0,TimerManager.getInstance().remove(this._time,this.canShow,this)},s.setEffectParent=function(e){null!=e&&null!=this.content&&e.addChild(this.content)},s.assetLoadCompleteHandler=function(e){var t=this;if(e.data.url==this._assetURL){if(SourceCache.getInstance().removeEventListener(SourceCache.LOAD_EFFECT_COMPLETE,this.assetLoadCompleteHandler,this),this._lastTime>0&&(clearTimeout(this.delayRemoveTime),this.delayRemoveTime=setTimeout2(function(){t.stopEffect()},this._lastTime)),null==this.content)return;var i=e.data.mc;this.content.scaleX=this.scaleX,this.content.scaleY=this.scaleY,this.content.offsetX=this.offsetX,this.content.offsetY=this.offsetY,this.content.rotation=this._rotation,this.content.setMovieClipData(i),this.content.gotoAndPlay(this._startFrame,this._isLoop,this._startFrame,this._endFrame)}},s.endHandler=function(e){this.stopEffect()},s.stopEffect=function(){this.stop()&&this.dispatchEvent(new ParamEvent(t.EFFECT_END))},s.stop=function(){return clearTimeout(this.delayRemoveTime),delete t._effectDic[this._showID],delete t._effectDic2[this._showID],SourceCache.getInstance().removeEventListener(SourceCache.LOAD_EFFECT_COMPLETE,this.assetLoadCompleteHandler,this),clearTimeout(this._delayPlaySi),null==this.content?!1:(this.content.removeEventListener(BitmapMovieClip.END,this.endHandler,this),null!=this.content.parent&&this.content.parent.removeChild(this.content),this.content.dispose(),this.content=null,!0)},t.disposeAll=function(){var e;for(e in t._effectDic2)t._effectDic2[e].dispose(),delete t._effectDic2[e];t._effectDic2=new Object},t.getNum=function(){var e,i=0;for(e in t._effectDic2)i++;return i},i(s,"x",function(){return this.content?this.content.x:0},function(e){this.content&&(this.content.x=e)}),i(s,"y",function(){return this.content?this.content.y:0},function(e){this.content&&(this.content.y=e)}),i(s,"height",function(){return this.content?this.content.height:0}),i(s,"width",function(){return this.content?this.content.width:0}),i(s,"visible",void 0,function(e){this.content&&(this.content.visible=e)}),s.dispose=function(){this.stopEffect()},i(s,"content",function(){return this._content},function(e){this._content=e}),s.getContentFrame=function(e){if(this._content){var t=this._content.getFrame(e);if(t)return t.getBitmapData()}return null},s.setContentScaleY=function(e){this._content.scaleY=e},t.EFFECT_END="effect_end",t._effectDic=new Object,t._effectDic2=new Object,t.showID=0,t}(egret.EventDispatcher);egret.registerClass(UIEffect,"UIEffect");var FanLiBlessView=function(e){function t(){e.call(this),this.name="FanLiBlessView"+t.K++,this._model=FanLiModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanLiBlessViewSkin.exml",this.touchEnabled=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._imgBg=new PicLoader,this.addChildAt(this._imgBg,0),this._imgBg.touchEnabled=!1,this._imgBg.load(rURL("resource/assets/icon/fanli/flbless/bg.png"))},n.onAdd=function(){e.prototype.onAdd.call(this)},n.onRemove=function(){e.prototype.onRemove.call(this)},n.setVO=function(e){this._vo=e},n.dispose=function(){e.prototype.dispose.call(this),this._imgBg&&(this._imgBg.dispose(),this._imgBg=null)},t.K=0,t}(BaseView);egret.registerClass(FanLiBlessView,"FanLiBlessView");var FanLiDailyChargeItem=function(e){function t(t){e.call(this),this._itemArr=[],this._avo=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/fanli/FanLiDailyChargeItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this._img=new PicLoader,this.addChild(this._img),this._img.x=14,this._img.y=29,this._imgName=new PicLoader,this._imgName.x=20,this._imgName.y=10,this.addChild(this._imgName),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this.addGlobalEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.updateDailyChange,this)},s.onClickBtn=function(){this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD21800,{act_id:this._vo.template_id})),this.flySucessHandler()},s.flySucessHandler=function(){for(var e,t,i=this._itemArr.length,n=0;i>n;n++)e=this._itemArr[n],t=this._itemContainer.localToGlobal(e.x,e.y),AccessGoodFlyEffectManager.getInstance().getGood(e.data.pic,AccessGoodFlyEffectManager.BAGTYPE,t)},i(s,"avo",void 0,function(e){this._avo=e}),s.setData=function(e){this._vo=e;for(var t,i,n=e.goodsList.length,s=0;n>s;s++)t=new GoodsItemSmall,t.x=(t.width+10)*s,this._itemArr.push(t),this._itemContainer.addChild(t),i=e.goodsList[s],t.data=GoodsListProxy.getInstance().getGoodsInfoByType(i.asset_id),t.num=i.value},i(s,"vo",function(){return this._vo}),s.updateDailyChange=function(e){this.updateInfo()},s.updateInfo=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_14,0),t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_21801,this._vo.template_id);this._txtGold.text="累充"+this._vo.need+"元宝",this._txtGold2.text="（"+e+"/"+this._vo.need+"）",e>=this._vo.need?(this._txtGold2.textColor=53800,0>=t?(this._btnOK.label="领取",this._btnOK.enabled=!0):(this._btnOK.enabled=!1,this._btnOK.label="已领取")):(this._txtGold2.textColor=16711680,this._btnOK.enabled=!1,this._btnOK.label="领取")},s.dispose=function(){e.prototype.dispose.call(this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this.removeGlobalEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.updateDailyChange,this),this.parent&&this.parent.removeChild(this);for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],t.parent&&t.parent.removeChild(t),t.data=null,t.dispose(),t=null;this._itemArr=[]},t}(Csprite);egret.registerClass(FanLiDailyChargeItem,"FanLiDailyChargeItem");var FanLiDailyChargeView=function(e){function t(i){e.call(this),this._itemArr=[],this._resTime=0,this._vo=i,this.name="FanLiDailyChargeView"+t.K++,this._model=FanLiModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanLiDailyChargeViewSkin.exml",this.touchEnabled=!1,this._imgBg=new PicLoader,this._imgBg.load(rURL("resource/assets/icon/fanli/fldc/bg.png")),this.addChild(this._imgBg),this._imgBg.touchEnabled=!1,this._imgBg.x=0,this._imgBg.y=0,this.setChildIndex(this._txtTime,this.numChildren-1)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.clearItems();var e=this._model.getFanliDailyChargeConfig(this._model.getFanliOpenDay(this._vo.template_id));if(null!=e)for(var t,i,n=e.length,s=0,a=0;n>a;a++)t=e[a],t.type==this._vo.template_id&&(i=new FanLiDailyChargeItem(this._vo),i.avo=this._vo,i.y=137*s,this._itemContainer.addChild(i),this._itemArr.push(i),i.setData(t),s++)},n.onAdd=function(){e.prototype.onAdd.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this.addGlobalEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.updateDailyChange,this),this.updateDailyChange();var t=this._vo.endDate,i=new Date(1e3*RoleModel.getInstance().serverTime),n=(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),(t.getTime()-i.getTime())/1e3);this._resTime=Math.ceil(n),this._resTime>0&&(TimerManager.getInstance().add(1e3,this.onTimer,this),this.onTimer())},n.onTimer=function(){this._resTime--,this._resTime>0?this._txtTime.text=TimeUtil.getTime5(this._resTime):(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text="活动已结束")},n.onRemove=function(){e.prototype.onRemove.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this.removeGlobalEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.updateDailyChange,this)},n.setVO=function(e){this._vo=e,this.clearItems();var t=this._model.getFanliDailyChargeConfig(this._model.getFanliOpenDay(this._vo.template_id));if(null!=t)for(var i,n,s=t.length,a=0,o=0;s>o;o++)i=t[o],i.type==this._vo.template_id&&(n=new FanLiDailyChargeItem(this._vo),n.avo=this._vo,n.y=137*a,this._itemContainer.addChild(n),this._itemArr.push(n),n.setData(i),a++);this.updateDailyChange()},n.updateDailyChange=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.updateInfo()},n.onOkHandler=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.dispose(),e=null;this._itemArr=[]},n.dispose=function(){e.prototype.dispose.call(this),this._imgBg&&(this._imgBg.dispose(),this._imgBg=null),TimerManager.getInstance().remove(1e3,this.onTimer,this),this.clearItems()},t.K=0,t}(BaseView);egret.registerClass(FanLiDailyChargeView,"FanLiDailyChargeView");var FanLiEggView=function(e){function t(i){e.call(this),this._itemArr1=[],this._itemArr2=[],this._eggItemArr=[],this._resTime=0,this._resTime2=0,this.imgGetedArr=[],this.itemGetedArr=[],this._vo=i,this.name="FanLiEggView"+t.K++,this._model=FanLiModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanLiEggViewSkin.exml",this.touchEnabled=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._imgBg=new PicLoader,this.addChildAt(this._imgBg,0),this._imgBg.touchEnabled=!1,this._imgBg.load(rURL("resource/assets/icon/fanli/flegg/bg.png"));for(var e,t=SingleModel.getInstance().getSingVO(SingleModel.KEY_19901),i=0;i<t.itemArr.length;i++)e=new GoodsItem,e.data=GoodsListProxy.getInstance().getGoodsInfoByType(Number(t.itemArr[i])),e.x=i*(e.width+13),e.showLv(!1),this._itemContainer1.addChild(e),this._itemArr1.push(e);var n,s=this._model.getEggNumConfig(this._vo.template_id);for(i=0;i<s.length;i++)n=s[i],e=new GoodsItem,e.data=GoodsListProxy.getInstance().getGoodsInfoByType(n.goodsList[0].asset_id),e.num=n.goodsList[0].value,e.x=i*(e.width+13),this._itemContainer2.addChild(e),this._itemArr2.push(e);this._txtGold.text=SingleModel.getInstance().getSingVO(SingleModel.KEY_19903).value+""},n.onAdd=function(){e.prototype.onAdd.call(this),this._btnCharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnAll.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAllHandler,this),this._btnRefresh.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRefreshHandler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.CCMD19900_UPDATE,this.update19900Handler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.CCMD19901_UPDATE,this.update19901Handler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.CCMD19903_UPDATE,this.update19903Handler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.EGG_NUM_CHANGE,this.onNumChangeHandler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.EGG_TIMES_CHANGE,this.onTimesChangeHandler,this),this.onNumChangeHandler(),this.onTimesChangeHandler(),this.initEgg();var t=this._vo.endDate,i=new Date(1e3*RoleModel.getInstance().serverTime),n=(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),(t.getTime()-i.getTime())/1e3);this._resTime=Math.ceil(n),this._resTime>0&&(TimerManager.getInstance().add(1e3,this.onTimer,this),this.onTimer())},n.onTimer=function(){this._resTime--,this._resTime>0?this._txtTime.text=TimeUtil.getTime5(this._resTime):(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text="活动已结束")},n.onRemove=function(){e.prototype.onRemove.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),TimerManager.getInstance().remove(1e3,this.onTimer2,this),this._btnCharge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnAll.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAllHandler,this),this._btnRefresh.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRefreshHandler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.CCMD19900_UPDATE,this.update19900Handler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.CCMD19901_UPDATE,this.update19901Handler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.CCMD19903_UPDATE,this.update19903Handler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.EGG_NUM_CHANGE,this.onNumChangeHandler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.EGG_TIMES_CHANGE,this.onTimesChangeHandler,this)},n.setVO=function(e){this._vo=e,this._fanliEggDataVO=this._model.getFanliEggDataVO(this._vo.template_id)},n.initEgg=function(){var e=this._model.getEggNumConfig(this._vo.template_id),t=0;this._fanliEggDataVO&&(t=this._fanliEggDataVO.egg_openNum);var i,n,s,a=e.length;this.clearImgGetedList();for(var o=0;a>o;o++)i=e[o],n=this._itemArr2[o],n.showName(t+"/"+i.num),t>=i.num&&(s=new CustomImage,s.name=n.data.template_id+"",s.x=21,s.y=20,s.source=RES.getRes("share_json.share_ok"),n.addChild(s),this.imgGetedArr.push(s));var r=this._fanliEggDataVO.egg_list;this.clearEggs();for(var h,l,d=-29,o=0;o<r.length;o++)l=r[o],h=new PicLoader,h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEggClick,this),h.x=d+150*o,h.y=263,0==l.flag?(h.load(rURL("resource/assets/icon/fanli/flegg/"+l.cfg_id+".png")),h.touchEnabled=!0):(h.load(rURL("resource/assets/icon/fanli/flegg/2"+l.cfg_id+".png")),h.touchEnabled=!1,h.y=241),h.name=l.slot+"",this._eggItemArr.push(h),this.addChild(h);this._resTime2=this._fanliEggDataVO.egg_LastTime,this._resTime2>0?(TimerManager.getInstance().add(1e3,this.onTimer2,this),this.onTimer2()):this._txtResFreshTime.text=""},n.onTimesChangeHandler=function(){var e=(this._fanliEggDataVO.egg_openNum,this._fanliEggDataVO.egg_freeNum);e>0?this._txtGold.text="0":this._txtGold.text=SingleModel.getInstance().getSingVO(SingleModel.KEY_19903).value+"",this._txtResTimes.text=this._fanliEggDataVO.egg_resNum+""},n.onNumChangeHandler=function(){var e,t,i,n=this._model.getEggNumConfig(this._vo.template_id),s=this._fanliEggDataVO.egg_openNum,a=n.length;this.clearImgGetedList();for(var o=0;a>o;o++)e=n[o],t=this._itemArr2[o],t.showName(s+"/"+e.num),s>=e.num&&null==this.getImgGeted(t.data.template_id+"")&&(i=new CustomImage,i.name=t.data.template_id+"",i.x=21,i.y=20,i.source=RES.getRes("share_json.share_ok"),t.addChild(i),this.imgGetedArr.push(i))},n.update19900Handler=function(e){var t=e.data.node,i=this.getEgg(t.slot+"");i&&(0==t.flag?(i.load(rURL("resource/assets/icon/fanli/flegg/"+t.cfg_id+".png")),i.touchEnabled=!0,i.y=263,this.deleteItem(i.name)):(i.load(rURL("resource/assets/icon/fanli/flegg/2"+t.cfg_id+".png")),i.touchEnabled=!1,i.y=241));var n,s,a,o=this._model.getEggNumConfig(this._vo.template_id),r=this._fanliEggDataVO.egg_openNum,h=o.length;this.clearImgGetedList();for(var l=0;h>l;l++)n=o[l],s=this._itemArr2[l],s.showName(r+"/"+n.num),r>=n.num&&null==this.getImgGeted(s.data.template_id+"")&&(a=new CustomImage,a.name=s.data.template_id+"",a.x=21,a.y=20,a.source=RES.getRes("share_json.share_ok"),s.addChild(a),this.imgGetedArr.push(a));this._resTime2=this._fanliEggDataVO.egg_LastTime,this._resTime2>0?(TimerManager.getInstance().add(1e3,this.onTimer2,this),this.onTimer2()):this._txtResFreshTime.text=""
},n.update19901Handler=function(e){for(var t,i,n,s,a,o=e.data.dataList,r=o.length,h=0;r>h;h++)t=o[h],i=this.getEgg(t.slot+""),n=new GoodsItem,s=GoodsListProxy.getInstance().getGoodsInfoByType(t.drop_list[0].asset_id),s.num=t.drop_list[0].value,n.data=s,this.addChild(n),n.x=i.x+47,n.y=i.y+30,n.name=i.name,this.itemGetedArr.push(n),a=n.parent.localToGlobal(n.x,n.y),AccessGoodFlyEffectManager.getInstance().getGood(s.pic,AccessGoodFlyEffectManager.BAGTYPE,a),EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("yaoqian"),i.x-203,i.y-282,this,80,!1)},n.getEgg=function(e){for(var t,i=this._eggItemArr.length,n=0;i>n;n++)if(t=this._eggItemArr[n],t.name==e)return t;return null},n.getImgGeted=function(e){for(var t,i=this.imgGetedArr.length,n=0;i>n;n++)if(t=this.imgGetedArr[n],t.name==e)return t;return null},n.getItem=function(e){for(var t,i=this.itemGetedArr.length,n=0;i>n;n++)if(t=this.itemGetedArr[n],t.name==e)return t;return t},n.deleteItem=function(e){for(var t,i=this.itemGetedArr.length,n=0;i>n;n++)if(t=this.itemGetedArr[n],t.name==e){t.parent&&t.parent.removeChild(t),t.dispose(),t=null,this.itemGetedArr.splice(n,1);break}},n.update19903Handler=function(e){var t=e.data.flag;1==t&&EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("shark"),297,223,this,80,!1)},n.onTimer2=function(){this._resTime2--,this._resTime2>0?this._txtResFreshTime.text="免费刷新："+TimeUtil.getTime3(this._resTime2):(TimerManager.getInstance().remove(1e3,this.onTimer2,this),this._txtResFreshTime.text="")},n.onEggClick=function(e){var t=e.currentTarget,i=Number(t.name);this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD19901,{id:this._fanliEggDataVO.egg_actId,slot:i}))},n.onAllHandler=function(){this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD19902,{id:this._fanliEggDataVO.egg_actId}))},n.onRefreshHandler=function(){this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD19903,{id:this._fanliEggDataVO.egg_actId}))},n.onOkHandler=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.clearEggs=function(){for(var e,t=this._eggItemArr.length,i=0;t>i;i++)e=this._eggItemArr[i],e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEggClick,this),e.dispose(),e=null;this._eggItemArr=[]},n.clearImgGetedList=function(){for(var e,t=this.imgGetedArr.length,i=0;t>i;i++)e=this.imgGetedArr[i],e.parent&&e.parent.removeChild(e),e.dispose(),e=null;this.imgGetedArr=[]},n.clearItemGetedList=function(){for(var e,t=this.itemGetedArr.length,i=0;t>i;i++)e=this.itemGetedArr[i],e.parent&&e.parent.removeChild(e),e.dispose(),e=null;this.itemGetedArr=[]},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),TimerManager.getInstance().remove(1e3,this.onTimer2,this),this._imgBg&&(this._imgBg.dispose(),this._imgBg=null),this.clearEggs();for(var t,i=this._itemArr1.length,n=0;i>n;n++)t=this._itemArr1[n],t.parent&&t.parent.removeChild(t),t.dispose(),t=null;for(this._itemArr1=[],i=this._itemArr2.length,n=0;i>n;n++)t=this._itemArr2[n],t.parent&&t.parent.removeChild(t),t.dispose(),t=null;this._itemArr2=[],this.clearImgGetedList(),this.clearItemGetedList()},t.K=0,t}(BaseView);egret.registerClass(FanLiEggView,"FanLiEggView");var FanLiFishView=function(e){function t(i){e.call(this),this._itemArr1=[],this._itemArr2=[],this._fishItemArr=[],this._posArr=[{x:409,y:174},{x:300,y:223},{x:167,y:305},{x:25,y:303}],this._resTime=0,this._resTime2=0,this.imgGetedArr=[],this.itemGetedArr=[],this._vo=i,this.name="FanLiFishView"+t.K++,this._model=FanLiModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanLiFishViewSkin.exml",this.touchEnabled=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._imgBg=new PicLoader,this.addChildAt(this._imgBg,0),this._imgBg.touchEnabled=!1,this._imgBg.load(rURL("resource/assets/icon/fanli/flfish/bg.png"));for(var e,t,i=this._model.getFishNumConfig(this._vo.template_id),n=0;n<i.length;n++)e=i[n],t=new GoodsItemSmall,t.data=GoodsListProxy.getInstance().getGoodsInfoByType(e.goodsList[0].asset_id),t.num=e.goodsList[0].value,t.x=n*(t.width+13),this._itemContainer2.addChild(t),this._itemArr2.push(t);this._txtGold.text=SingleModel.getInstance().getSingVO(SingleModel.KEY_19903).value+""},n.onAdd=function(){e.prototype.onAdd.call(this),this._btnCharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnAll.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAllHandler,this),this._btnRefresh.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRefreshHandler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.CCMD23700_UPDATE,this.update23700Handler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.CCMD23701_UPDATE,this.update23701Handler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.CCMD23703_UPDATE,this.update23703Handler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.FISH_NUM_CHANGE,this.onNumChangeHandler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.FISH_TIMES_CHANGE,this.onTimesChangeHandler,this),this.onNumChangeHandler(),this.onTimesChangeHandler(),this.initEgg();var t=this._vo.endDate,i=new Date(1e3*RoleModel.getInstance().serverTime),n=(t.getTime()-i.getTime())/1e3;this._resTime=Math.ceil(n),this._resTime>0&&(TimerManager.getInstance().add(1e3,this.onTimer,this),this.onTimer())},n.onTimer=function(){this._resTime--,this._resTime>0?this._txtTime.text=TimeUtil.getTime5(this._resTime):(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text="活动已结束")},n.onRemove=function(){e.prototype.onRemove.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),TimerManager.getInstance().remove(1e3,this.onTimer2,this),this._btnCharge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnAll.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAllHandler,this),this._btnRefresh.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRefreshHandler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.CCMD23700_UPDATE,this.update23700Handler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.CCMD23701_UPDATE,this.update23701Handler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.CCMD23703_UPDATE,this.update23703Handler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.FISH_NUM_CHANGE,this.onNumChangeHandler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.FISH_TIMES_CHANGE,this.onTimesChangeHandler,this)},n.setVO=function(e){this._vo=e,this._fanliFishDataVO=this._model.getFanliFishDataVO(this._vo.template_id)},n.initEgg=function(){if(null!=this._fanliFishDataVO){var e=this._model.getFishNumConfig(this._vo.template_id),t=0;this._fanliFishDataVO&&(t=this._fanliFishDataVO.fish_openNum);var i,n,s,a=e.length;this.clearImgGetedList();for(var o=0;a>o;o++)i=e[o],n=this._itemArr2[o],n.showName(t+"/"+i.num),t>=i.num&&(s=new CustomImage,s.name=n.data.template_id+"",s.x=21,s.y=20,s.source=RES.getRes("share_json.share_ok"),n.addChild(s),this.imgGetedArr.push(s));var r=this._fanliFishDataVO.fish_list;this.clearEggs();for(var h,l,o=0;o<r.length;o++)l=r[o],h=new PicLoader,h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEggClick,this),h.x=this._posArr[o].x,h.y=this._posArr[o].y,0==l.flag?(h.load(rURL("resource/assets/icon/fanli/flfish/"+l.cfg_id+".png")),h.touchEnabled=!0):h.touchEnabled=!1,h.name=l.slot+"",this._fishItemArr.push(h),this.addChild(h);this._resTime2=this._fanliFishDataVO.fish_LastTime,this._resTime2>0?(TimerManager.getInstance().add(1e3,this.onTimer2,this),this.onTimer2()):this._txtResFreshTime.text=""}},n.onTimesChangeHandler=function(){if(null!=this._fanliFishDataVO){var e=(this._fanliFishDataVO.fish_openNum,this._fanliFishDataVO.fish_freeNum);e>0?this._txtGold.text="0":this._txtGold.text=SingleModel.getInstance().getSingVO(SingleModel.KEY_19903).value+"",this._txtResTimes.text=this._fanliFishDataVO.fish_resNum+""}},n.onNumChangeHandler=function(){if(null!=this._fanliFishDataVO){var e,t,i,n=this._model.getEggNumConfig(this._vo.template_id),s=this._fanliFishDataVO.fish_openNum,a=n.length;this.clearImgGetedList();for(var o=0;a>o;o++)e=n[o],t=this._itemArr2[o],t.showName(s+"/"+e.num),s>=e.num&&null==this.getImgGeted(t.data.template_id+"")&&(i=new CustomImage,i.name=t.data.template_id+"",i.x=21,i.y=20,i.source=RES.getRes("share_json.share_ok"),t.addChild(i),this.imgGetedArr.push(i))}},n.update23700Handler=function(e){this._fanliFishDataVO=this._model.getFanliFishDataVO(this._vo.template_id);var t=e.data.node,i=this.getFish(t.slot+"");if(i&&(0==t.flag?(i.load(rURL("resource/assets/icon/fanli/flfish/"+t.cfg_id+".png")),i.touchEnabled=!0,this.deleteItem(i.name)):i.touchEnabled=!1),null!=this._fanliFishDataVO){this._fishItemArr.length<=0&&this.initEgg();var n,s,a,o=this._model.getFishNumConfig(this._vo.template_id),r=this._fanliFishDataVO.fish_openNum,h=o.length;this.clearImgGetedList();for(var l=0;h>l;l++)n=o[l],s=this._itemArr2[l],s.showName(r+"/"+n.num),r>=n.num&&null==this.getImgGeted(s.data.template_id+"")&&(a=new CustomImage,a.name=s.data.template_id+"",a.x=21,a.y=20,a.source=RES.getRes("share_json.share_ok"),s.addChild(a),this.imgGetedArr.push(a));this._resTime2=this._fanliFishDataVO.fish_LastTime,this._resTime2>0?(TimerManager.getInstance().add(1e3,this.onTimer2,this),this.onTimer2()):this._txtResFreshTime.text=""}},n.update23701Handler=function(e){for(var t,i,n,s,a,o=e.data.dataList,r=o.length,h=0;r>h;h++)t=o[h],i=this.getFish(t.slot+""),n=new GoodsItem,s=GoodsListProxy.getInstance().getGoodsInfoByType(t.drop_list[0].asset_id),s.num=t.drop_list[0].value,n.data=s,this.addChild(n),n.x=i.x+47,n.y=i.y+30,n.name=i.name,this.itemGetedArr.push(n),a=n.parent.localToGlobal(n.x,n.y),AccessGoodFlyEffectManager.getInstance().getGood(s.pic,AccessGoodFlyEffectManager.BAGTYPE,a),EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("wang"),i.x+57,i.y+34,this,80,!1)},n.getFish=function(e){for(var t,i=this._fishItemArr.length,n=0;i>n;n++)if(t=this._fishItemArr[n],t.name==e)return t;return null},n.getImgGeted=function(e){for(var t,i=this.imgGetedArr.length,n=0;i>n;n++)if(t=this.imgGetedArr[n],t.name==e)return t;return null},n.getItem=function(e){for(var t,i=this.itemGetedArr.length,n=0;i>n;n++)if(t=this.itemGetedArr[n],t.name==e)return t;return t},n.deleteItem=function(e){for(var t,i=this.itemGetedArr.length,n=0;i>n;n++)if(t=this.itemGetedArr[n],t.name==e){t.parent&&t.parent.removeChild(t),t.dispose(),t=null,this.itemGetedArr.splice(n,1);break}},n.update23703Handler=function(e){var t=e.data.flag;1==t&&EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("shark"),297,223,this,80,!1)},n.onTimer2=function(){this._resTime2--,this._resTime2>0?this._txtResFreshTime.text="免费刷新："+TimeUtil.getTime3(this._resTime2):(TimerManager.getInstance().remove(1e3,this.onTimer2,this),this._txtResFreshTime.text="")},n.onEggClick=function(e){var t=e.currentTarget,i=Number(t.name);this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD23701,{id:this._fanliFishDataVO.fish_actId,slot:i}))},n.onAllHandler=function(){this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD23702,{id:this._fanliFishDataVO.fish_actId}))},n.onRefreshHandler=function(){this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD23703,{id:this._fanliFishDataVO.fish_actId}))},n.onOkHandler=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.clearEggs=function(){for(var e,t=this._fishItemArr.length,i=0;t>i;i++)e=this._fishItemArr[i],e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEggClick,this),e.dispose(),e=null;this._fishItemArr=[]},n.clearImgGetedList=function(){for(var e,t=this.imgGetedArr.length,i=0;t>i;i++)e=this.imgGetedArr[i],e.parent&&e.parent.removeChild(e),e.dispose(),e=null;this.imgGetedArr=[]},n.clearItemGetedList=function(){for(var e,t=this.itemGetedArr.length,i=0;t>i;i++)e=this.itemGetedArr[i],e.parent&&e.parent.removeChild(e),e.dispose(),e=null;this.itemGetedArr=[]},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),TimerManager.getInstance().remove(1e3,this.onTimer2,this),this._imgBg&&(this._imgBg.dispose(),this._imgBg=null),this.clearEggs();for(var t,i=this._itemArr1.length,n=0;i>n;n++)t=this._itemArr1[n],t.parent&&t.parent.removeChild(t),t.dispose(),t=null;for(this._itemArr1=[],i=this._itemArr2.length,n=0;i>n;n++)t=this._itemArr2[n],t.parent&&t.parent.removeChild(t),t.dispose(),t=null;this._itemArr2=[],this.clearImgGetedList(),this.clearItemGetedList()},t.K=0,t}(BaseView);egret.registerClass(FanLiFishView,"FanLiFishView");var FanLiLcItem=function(e){function t(t){e.call(this),this._itemArr=[],this._avo=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/fanli/FanLiLcItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this._img=new PicLoader,this.addChild(this._img),this._img.x=14,this._img.y=29,this._imgName=new PicLoader,this._imgName.x=20,this._imgName.y=10,this.addChild(this._imgName),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this)},s.onClickBtn=function(){this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD17601,{id:this._avo.template_id,awardId:this._vo.template_id}))},i(s,"avo",void 0,function(e){this._avo=e}),s.setData=function(e){this._vo=e;for(var t,i,n=e.goodsList.length,s=0;n>s;s++)t=new GoodsItemSmall,t.x=(t.width+10)*s,this._itemArr.push(t),this._itemContainer.addChild(t),i=e.goodsList[s],t.data=GoodsListProxy.getInstance().getGoodsInfoByType(i.asset_id),t.num=i.value},i(s,"vo",function(){return this._vo}),s.updateInfo=function(){var e=FanLiModel.getInstance().lc_totalCharge,t=FanLiModel.getInstance().getFanLiLcData(this._vo.template_id,this._avo.template_id);this._txtGold.text="累充"+this._vo.need+"元宝",this._txtGold2.text="（"+e+"/"+this._vo.need+"）",e>=this._vo.need?(this._txtGold2.textColor=53800,t&&(0==t.flag?(this._btnOK.label="领取",this._btnOK.enabled=!0):(this._btnOK.enabled=!1,this._btnOK.label="已领取"))):(this._txtGold2.textColor=16711680,this._btnOK.enabled=!1,this._btnOK.label="领取")},s.dispose=function(){e.prototype.dispose.call(this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this.parent&&this.parent.removeChild(this);for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],t.parent&&t.parent.removeChild(t),t.data=null,t.dispose(),t=null;this._itemArr=[]},t}(Csprite);egret.registerClass(FanLiLcItem,"FanLiLcItem");var FanLiLcView=function(e){function t(i){e.call(this),this._itemArr=[],this._resTime=0,this._vo=i,this.name="FanLiLcView"+t.K++,this._model=FanLiModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanLiLcViewSkin.exml",this.touchEnabled=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.clearItems();for(var e,t,i=this._model.getFanLiLcConfig(),n=i.length,s=0;n>s;s++)e=i[s],e.type==this._vo.template_id&&(t=new FanLiLcItem(this._vo),t.avo=this._vo,t.y=137*s,this._itemContainer.addChild(t),this._itemArr.push(t),t.setData(e))},n.onAdd=function(){e.prototype.onAdd.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.UPDATE_LC_INFO,this.updateLcHandler,this),this.updateLcHandler();var t=this._vo.endDate,i=new Date(1e3*RoleModel.getInstance().serverTime),n=(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),(t.getTime()-i.getTime())/1e3);this._resTime=Math.ceil(n),this._resTime>0&&(TimerManager.getInstance().add(1e3,this.onTimer,this),this.onTimer())},n.onTimer=function(){this._resTime--,this._resTime>0?this._txtTime.text=TimeUtil.getTime5(this._resTime):(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text="活动已结束")},n.onRemove=function(){e.prototype.onRemove.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.UPDATE_LC_INFO,this.updateLcHandler,this)},n.setVO=function(e){this._vo=e,this.clearItems();for(var t,i,n=this._model.getFanLiLcConfig(),s=n.length,a=0,o=0;s>o;o++)t=n[o],t.type==this._vo.template_id&&(i=new FanLiLcItem(this._vo),i.avo=this._vo,i.y=137*a,this._itemContainer.addChild(i),this._itemArr.push(i),i.setData(t),a++)},n.updateLcHandler=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.updateInfo()},n.onOkHandler=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.dispose(),e=null;this._itemArr=[]},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),this.clearItems()},t.K=0,t}(BaseView);egret.registerClass(FanLiLcView,"FanLiLcView");var FanLiLoginAwardItem=function(e){function t(t){e.call(this),this._selected=!1,this._day=t,this._img=new PicLoader,this._img.load(rURL("resource/assets/icon/fanli/loginAward/fanliLoginAward_z1.png")),this.addChild(this._img),this._imgDay=new PicLoader,this._imgDay.load(rURL("resource/assets/icon/fanli/loginAward/day_"+this._day+".png")),this._imgDay.x=33,this._imgDay.y=109,this.addChild(this._imgDay),this._imgGet=new CustomImage,this._imgGet.source=RES.getRes("share_json.share_geted"),this.addChild(this._imgGet),this._imgGet.x=10,this._imgGet.y=57,this._imgGet.visible=!1}__extends(t,e);var i=__define,n=t,s=n.prototype;return i(s,"day",function(){return this._day}),s.setSelected=function(e){this._selected!=e&&(this._selected=e,e?this._img.load(rURL("resource/assets/icon/fanli/loginAward/fanliLoginAward_z2.png")):this._img.load(rURL("resource/assets/icon/fanli/loginAward/fanliLoginAward_z1.png")))},s.setGeted=function(){this._imgGet.visible=!0},s.dispose=function(){this.parent&&this.parent.removeChild(this),this._img&&(this._img.dispose(),this._img=null),this._imgDay&&(this._imgDay.dispose(),this._imgDay=null),this._imgGet&&(this._imgGet.parent&&this._imgGet.parent.removeChild(this._imgGet),this._imgGet.dispose(),this._imgGet=null)},t}(Csprite);egret.registerClass(FanLiLoginAwardItem,"FanLiLoginAwardItem");var FanLiLoginAwardView=function(e){function t(){e.call(this),this._itemAwardArr=[],this._itemArr=[],this.name="FanLiLoginAwardView"+t.K++,this._model=FanLiModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanLiLoginAwardViewSkin.exml",this.touchEnabled=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._bg=new PicLoader,this.addChildAt(this._bg,0),this._bg.touchEnabled=!1,this._bg.x=0,this._bg.y=-246,this._bg.load(rURL("resource/assets/icon/fanli/loginAward/fanliLoginAward_bg.png"));for(var e,t=0;4>t;t++)e=new FanLiLoginAwardItem(t+1),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClick,this),e.x=151*t,this._itemContainer.addChild(e),this._itemArr.push(e),e.visible=!1;for(t=0;3>t;t++)e=new FanLiLoginAwardItem(t+5),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClick,this),e.x=151*t+77,e.y=145,this._itemContainer.addChild(e),this._itemArr.push(e),e.visible=!1;var i=FanLiModel.getInstance().getLoginAwardConfig(),n=i.length;for(t=0;n>t;t++)this._itemArr[t].visible=!0;this.setSelected(this._itemArr[0])},n.onAdd=function(){e.prototype.onAdd.call(this),this._btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.UPDATE_LOGIN_INFO,this.updateActivityInfo,this),this.updateActivityInfo()},n.onRemove=function(){e.prototype.onRemove.call(this),this._btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.UPDATE_LOGIN_INFO,this.updateActivityInfo,this)},n.setVO=function(e){this._vo=e},n.itemClick=function(e){var t=e.currentTarget;this.setSelected(t)},n.setSelected=function(e){this._selectedItem=e;var t;for(var i in this._itemArr)t=this._itemArr[i],t.setSelected(!1);this._selectedItem.setSelected(!0),this.updateInfo()},n.updateInfo=function(){this.clearAwardItems();for(var e,t,i=FanLiModel.getInstance().getLoginAwardVO(this._selectedItem.day),n=i.goodsList.length,s=0;n>s;s++)e=new GoodsItem,e.x=109*s,this._itemAwardArr.push(e),this._itemAwardContainer.addChild(e),t=i.goodsList[s],e.data=GoodsListProxy.getInstance().getGoodsInfoByType(t.asset_id),e.num=t.value},n.updateActivityInfo=function(){var e=FanLiModel.getInstance().getFanLiLoginAwardServerData(this._vo.template_id);if(null==e)return this._btnGet.showRedDot=!1,void(this._btnGet.enabled=!1);e.award_id>e.awarded_id?(this._btnGet.showRedDot=!0,this._btnGet.enabled=!0):(this._btnGet.showRedDot=!1,this._btnGet.enabled=!1);for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],e.awarded_id>=t.day&&t.setGeted()},n.onOkHandler=function(){var e=FanLiModel.getInstance().getFanLiLoginAwardServerData(this._vo.template_id);return null==e?void Message.show("没有奖励可以领取"):void(e.award_id>e.awarded_id?(this.flyGoods(),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD17401,{id:this._vo.template_id}))):Message.show("没有奖励可以领取"))},n.flyGoods=function(){for(var e=[],t=FanLiModel.getInstance().getLoginAwardVO(this._selectedItem.day),i=t.goodsList.length,n=0;i>n;n++){var s=t.goodsList[n].asset_id,a=GoodsListProxy.getInstance().getBasicGood(s);if(null!=a){var o=a.pic;e.push(o)}}AccessGoodFlyEffectManager.getInstance().flyArray(e)},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.dispose(),e=null;this._itemArr=[]},n.clearAwardItems=function(){for(var e,t=this._itemAwardArr.length,i=0;t>i;i++)e=this._itemAwardArr[i],e.parent&&e.parent.removeChild(e),e.data=null,e.dispose(),e=null;this._itemAwardArr=[]},n.dispose=function(){e.prototype.dispose.call(this),this.clearItems(),this.clearAwardItems()},t.K=0,t}(BaseView);egret.registerClass(FanLiLoginAwardView,"FanLiLoginAwardView");var FanLiLuckItem=function(e){function t(t){e.call(this),this._itemArr=[],this._ind=0,this.LABEL_BUY="购买",this.LABEL_PICK="捡钱",this._delaySI=0,this._ind=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/fanli/FanLiLuckItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnOK2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOk2Handler,this)},s.setData=function(e){this._vo=e;for(var t,i,n=e.goodsList.length,s=0;n>s;s++)i=GoodsListProxy.getInstance().getGoodsInfoByType(e.goodsList[s].asset_id),i.num=e.goodsList[s].value,t=new GoodsItem,t.data=i,t.x=s*(t.width+13),this._itemContainer.addChild(t),this._itemArr.push(t)},i(s,"vo",function(){return this._vo}),s.updateServerData=function(){var e=FanLiModel.getInstance().getFanLiLuckData(this._vo.template_id);return this._imgState.visible=!1,this._btnOK.visible=!1,this._btnOK2.visible=!1,this.showBtnEffect(!1),null==e?(this._txtGold.visible=!0,this._imgGold.visible=!0,this._txtGold.text=this._vo.con_gold+"",void(this._btnOK.visible=!0)):void(e.rand_gold>0?(this._txtGold.visible=!1,this._imgGold.visible=!1,this._btnOK2.visible=!0,this.showBtnEffect(!0)):e.num>=0&&e.num<this._vo.day_limit?(this._txtGold.visible=!0,this._imgGold.visible=!0,this._txtGold.text=this._vo.con_gold+"",this._btnOK.visible=!0):e.num>=this._vo.day_limit&&(this._txtGold.visible=!1,this._imgGold.visible=!1,this._imgState.visible=!0))},s.showBtnEffect=function(e){e?null==this.btnEffect&&(this.btnEffect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("anniu"),58,28,this._btnOK2,80,!0)):this.btnEffect&&(this.btnEffect.dispose(),this.btnEffect=null)},s.onOkHandler=function(){var e=this._vo.template_id;if(this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD19601,{cfg_id:e})),RoleModel.getInstance().getRoleInfo().getGold()>=this._vo.con_gold)for(var t,i,n=this._itemArr.length,s=0;n>s;s++)t=this._itemArr[s],i=this._itemContainer.localToGlobal(t.x,t.y),AccessGoodFlyEffectManager.getInstance().getGood(t.data.pic,AccessGoodFlyEffectManager.BAGTYPE,i)},s.onOk2Handler=function(){var e=this,t=this._vo.template_id;this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD19602,{cfg_id:t})),1==this._btnOK2.enabled&&(this._btnOK2.enabled=!1),this._delaySI=setTimeout2(function(){e.updateBtnEnable()},300)},s.updateBtnEnable=function(){0==this._btnOK2.enabled&&(this._btnOK2.enabled=!0)},s.dispose=function(){e.prototype.dispose.call(this),clearTimeout(this._delaySI),this.parent&&this.parent.removeChild(this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnOK2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOk2Handler,this);for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],t.parent&&t.parent.removeChild(t),t.dispose(),t=null;this.showBtnEffect(!1),this._itemArr=[]},t}(Csprite);egret.registerClass(FanLiLuckItem,"FanLiLuckItem");var FanLiLuckView=function(e){function t(){e.call(this),this._itemArr=[],this._resTime=0,this.name="FanLiLuckView"+t.K++,this._model=FanLiModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanLiLuckViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._bg=new PicLoader,this.addChildAt(this._bg,0),this._bg.touchEnabled=!1,this._bg.load(rURL("resource/assets/icon/fanli/flluck/bg.png")),this._bg.x=2},n.onAdd=function(){e.prototype.onAdd.call(this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.UPDATE_LUCK_INFO,this.updateLuckHandler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.PICK_MONEY_SUCCESS,this.pickMoneySucessHandler,this);var t=this._vo.endDate,i=new Date(1e3*RoleModel.getInstance().serverTime),n=(t.getTime()-i.getTime())/1e3;this._resTime=Math.ceil(n),this._resTime>0&&(TimerManager.getInstance().add(1e3,this.onTimer,this),this.onTimer())},n.onRemove=function(){e.prototype.onRemove.call(this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.UPDATE_LUCK_INFO,this.updateLuckHandler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.PICK_MONEY_SUCCESS,this.pickMoneySucessHandler,this),TimerManager.getInstance().remove(1e3,this.onTimer,this)},n.onTimer=function(){this._resTime--,this._resTime>0?this._txtTime.text=TimeUtil.getTime5(this._resTime):(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text="活动已结束")},n.pickMoneySucessHandler=function(){for(var e=this.localToGlobal(295,310),t=[],i=0;20>i;i++)t.push(GoodsListProxy.getInstance().getGoodsInfoByType(2).pic);AccessGoodFlyEffectManager.getInstance().flyArray(t,e)},n.setVO=function(e){this._vo=e;for(var t,i=this._model.getFanLiLuckConfig(this._vo.template_id),n=i.length,s=0;n>s;s++)t=this._itemArr[s],t||(t=new FanLiLuckItem(s+1),this._itemArr.push(t)),t.y=132*s,t.setData(i[s]),this._itemContainer.addChild(t)},n.updateLuckHandler=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.updateServerData()},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.dispose(),e=null;this._itemArr=[]},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),this._bg&&(this._bg.dispose(),this._bg=null),this.clearItems()},t.K=0,t}(BaseView);egret.registerClass(FanLiLuckView,"FanLiLuckView");var FanLiWindow=function(e){function t(){e.call(this),this._btnCach=new Array,this._model=FanLiModel.getInstance(),this.skinName="resource/game_skins/fanli/FanLiWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_fanli"),this.createIcons(),this.windowBgBottom=-20,this.onBtnReturnSetIndex()},n.createIcons=function(){var e,t,i,n=this._model.getShowIconList(),s='<e:Skin class="skins.ButtonSkin" states="up,down" xmlns:e="http://ns.egret.com/eui">\n                <e:Image width="100%" height="100%"\n                         source="{0}"\n                         source.down="{0}"/>\n            </e:Skin>';this._btnCach=new Array;for(var a=0,o=0;o<n.length;o++)t=n[o],e=new CustomButton,e.data=t,i=UrlUtil.getFanLiDailyIcon(t.show_icon),e.skinName=StringUtil.substitute(s,i),e.x=100*a+20,e.y=15,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this),a++,this._btnCach.push(e),this._iconContainer.addChild(e);this._iconContainer.addChild(this._selectImage),this._vo=n[0],this._selectImage.x=this._btnCach[0].x-10,this._selectImage.y=this._btnCach[0].y-12,this.updateView()},n.clickIcon=function(e){var t=e.currentTarget;this._selectImage.x=t.x-10,this._selectImage.y=t.y-12,this._vo=t.data,this.updateView()},n.updateLoginAwardHandler=function(){this.updateRedDot()},n.updateXgHandler=function(){this.updateRedDot()},n.updateLcHandler=function(){this.updateRedDot()},n.updateXfhandler=function(){this.updateRedDot()},n.updateDaily=function(){FanLiModel.getInstance().checkIconRedDot(),this.updateRedDot()},n.updateZPhandler=function(){this.updateRedDot()},n.updateRedDot=function(){if(null!=this._btnCach)for(var e,t,i=0;i<this._btnCach.length;i++)e=this._btnCach[i],t=e.data,t.type==FanLiModel.LOGIN_AWARD?e.showRedDot=this._model.checkLoginAwardCanGet():t.type==FanLiModel.XIANGGOU?e.showRedDot=this._model.checkLimitGiftCanBuy():t.type==FanLiModel.LEICHANG?e.showRedDot=this._model.checkLcAwardCanGetOne(t.template_id):t.type==FanLiModel.ZHUAN?e.showRedDot=this._model.isCanZhuan:t.type==FanLiModel.LOGIN_LUCK?e.showRedDot=0==DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_45):t.type==FanLiModel.XF?e.showRedDot=this._model.checkFanliXfAwardCanGet():t.type==FanLiModel.DAILY_CHARGE?e.showRedDot=this._model.checkFanliDailyChargeRewardCanGet(this._model.getFanliOpenDay(t.template_id),t.template_id):t.type==FanLiModel.SHOP_QIZHEN_ZHUAN?e.showRedDot=MallModel.getInstance().getShopQizhenCount()>0:t.type==FanLiModel.ZP?e.showRedDot=FanLiModel.getInstance().zpData&&FanLiModel.getInstance().zpData.score>0:t.type==FanLiModel.DFW&&(e.showRedDot=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2025))},n.updateView=function(){switch(this._currentView&&this._viewContainer.contains(this._currentView)&&(this._currentView.onRemove(),this._viewContainer.removeChild(this._currentView)),this._helpButton.visible=!1,this._vo.type){case FanLiModel.LOGIN_AWARD:null==this._loginAwardView&&(this._loginAwardView=new FanLiLoginAwardView,this._loginAwardView.setVO(this._vo)),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD17400,{id:this._vo.template_id})),this._currentView=this._loginAwardView;break;case FanLiModel.XIANGGOU:null==this._xgView&&(this._xgView=new FanLiXgView(this._vo)),this._xgView.setVO(this._vo),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD17800,{id:this._vo.template_id})),this._currentView=this._xgView;break;case FanLiModel.LEICHANG:null==this._lcView&&(this._lcView=new FanLiLcView(this._vo)),this._lcView.setVO(this._vo),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD17600,{id:this._vo.template_id})),this._currentView=this._lcView;break;case FanLiModel.ZHUAN:null==this._zhuanView&&(this._zhuanView=new FanliZhuanView,this._zhuanView.setVO(this._vo)),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD17700,{id:this._vo.template_id})),this._currentView=this._zhuanView;break;case FanLiModel.LOGIN_LUCK:null==this._loginLuckView&&(this._loginLuckView=new FanliLoginLuckView,this._loginLuckView.setVO(this._vo)),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD17500,{id:this._vo.template_id})),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD17510,{id:this._vo.template_id})),this._currentView=this._loginLuckView;
break;case FanLiModel.LUCK:null==this._luckView&&(this._luckView=new FanLiLuckView,this._luckView.setVO(this._vo)),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD19600,{id:this._vo.template_id})),this._currentView=this._luckView;break;case FanLiModel.EGG:null==this._eggView&&(this._eggView=new FanLiEggView(this._vo),this._eggView.setVO(this._vo)),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD19900,{id:this._vo.template_id})),this._currentView=this._eggView;break;case FanLiModel.BLESS:null==this._blessView&&(this._blessView=new FanLiBlessView,this._blessView.setVO(this._vo)),this._currentView=this._blessView;break;case FanLiModel.XF:null==this._xfView&&(this._xfView=new FanLiXfView(this._vo),this._xfView.setVO(this._vo)),this._currentView=this._xfView;break;case FanLiModel.DAILY_CHARGE:null==this._dailyChargeView&&(this._dailyChargeView=new FanLiDailyChargeView(this._vo)),this._dailyChargeView.setVO(this._vo),this._currentView=this._dailyChargeView;break;case FanLiModel.SHOP_QIZHEN:null==this._shop_qizhen&&(this._shop_qizhen=new ShopQizhenView),this._currentView=this._shop_qizhen;break;case FanLiModel.SHOP_QIZHEN_ZHUAN:null==this._shop_qizhen_zhuan&&(this._shop_qizhen_zhuan=new ShopQizhenZhuanView),this._currentView=this._shop_qizhen_zhuan;break;case FanLiModel.JUBAO:null==this._jubao&&(this._jubao=new ActivityJubaoListView),this._jubao.setVO(this._vo),this._currentView=this._jubao,this.dispatchGlobalEvent(new ParamEvent(ActivityEvtName.CCMD22600));break;case FanLiModel.ZP:null==this._zp&&(this._zp=new FanliZPView),this._zp.setVO(this._vo),this._currentView=this._zp;break;case FanLiModel.FISH:null==this._fishView&&(this._fishView=new FanLiFishView(this._vo),this._fishView.setVO(this._vo)),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD23700,{id:this._vo.template_id})),this._currentView=this._fishView;break;case FanLiModel.SHOP:null==this._shop&&(this._shop=new FanliShopView),this._shop.setVO(this._vo),this._currentView=this._shop;break;case FanLiModel.DFW:null==this._dfw&&(this._dfw=new FanliDFWView),this._dfw.setVO(this._vo),this._currentView=this._dfw,this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD24040,this._vo.template_id)),this._helpButton.visible=!0;break;case FanLiModel.CIRCLE_CARNIVAL:null==this._circleCarnival&&(this._circleCarnival=new FanliCircleCarnivalView),this._circleCarnival.setVO(this._vo),this._currentView=this._circleCarnival,this._helpButton.visible=!1;break;case FanLiModel.PET_EXPLORE:null==this._petExplore&&(this._petExplore=new FanliPetExploreView),this._petExplore.setVO(this._vo),this._currentView=this._petExplore,this._helpButton.visible=!1}this._currentView&&(this._currentView.onAdd(),this._viewContainer.addChild(this._currentView))},n.onHelp=function(e){switch(this._vo.type){case FanLiModel.DFW:this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.DFW))}},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this);var t=this;t.removeGlobalEventListener(FanLiEvtName.UPDATE_LOGIN_INFO,t.updateLoginAwardHandler,t),t.removeGlobalEventListener(FanLiEvtName.UPDATE_XG_INFO,t.updateXgHandler,t),t.removeGlobalEventListener(FanLiEvtName.UPDATE_LC_INFO,t.updateLcHandler,t),t.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,t.updateDaily,t),t.removeGlobalEventListener(FanLiEvtName.CCMD17700_UPDATE,t.updateRedDot,t),t.removeGlobalEventListener(FanLiEvtName.CCMD21700_UPDATE,t.updateXfhandler,t),t.removeGlobalEventListener(FanLiEvtName.CCMD23400_UPDATE,t.updateZPhandler,t),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.SCMD17601,t.deleteIcon,t),t._helpButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onHelp,t),t._currentView&&t._currentView.onRemove()},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this);var t=this;t.addGlobalEventListener(FanLiEvtName.UPDATE_LOGIN_INFO,t.updateLoginAwardHandler,t),t.addGlobalEventListener(FanLiEvtName.UPDATE_XG_INFO,t.updateXgHandler,t),t.addGlobalEventListener(FanLiEvtName.UPDATE_LC_INFO,t.updateLcHandler,t),t.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,t.updateDaily,t),t.addGlobalEventListener(FanLiEvtName.CCMD17700_UPDATE,t.updateRedDot,t),t.addGlobalEventListener(FanLiEvtName.CCMD21700_UPDATE,t.updateXfhandler,t),t.addGlobalEventListener(FanLiEvtName.CCMD23400_UPDATE,t.updateZPhandler,t),GameDispatcher.getInstance().addEventListener(FanLiEvtName.SCMD17601,t.deleteIcon,t),t._helpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onHelp,t),this.updateRedDot()},n.deleteIcon=function(e){for(var t,i=0;i<this._btnCach.length;i++)if(t=this._btnCach[i],t.data.template_id==e.data.id){t.parent&&t.parent.removeChild(t),t.dispose(),t=null,this._btnCach.splice(i,1);break}},n.dispose=function(){e.prototype.dispose.call(this),this.onCloseHandler(),this._currentView&&(this._currentView.onRemove(),this._currentView.parent&&this._currentView.parent.removeChild(this._currentView),this._currentView=null),this._loginAwardView&&(this._loginAwardView.parent&&this._loginAwardView.parent.removeChild(this._loginAwardView),this._loginAwardView.dispose(),this._loginAwardView=null),this._xgView&&(this._xgView.parent&&this._xgView.parent.removeChild(this._xgView),this._xgView.dispose(),this._xgView=null),this._lcView&&(this._lcView.parent&&this._lcView.parent.removeChild(this._lcView),this._lcView.dispose(),this._lcView=null),this._zhuanView&&(this._zhuanView.parent&&this._zhuanView.parent.removeChild(this._zhuanView),this._zhuanView.dispose(),this._zhuanView=null),this._loginLuckView&&(this._loginLuckView.parent&&this._loginLuckView.parent.removeChild(this._loginLuckView),this._loginLuckView.dispose(),this._loginLuckView=null),this._luckView&&(this._luckView.parent&&this._luckView.parent.removeChild(this._luckView),this._luckView.dispose(),this._luckView=null),this._eggView&&(this._eggView.parent&&this._eggView.parent.removeChild(this._eggView),this._eggView.dispose(),this._eggView=null),this._blessView&&(this._blessView.parent&&this._blessView.parent.removeChild(this._blessView),this._blessView.dispose(),this._blessView=null),this._xfView&&(this._xfView.parent&&this._xfView.parent.removeChild(this._xfView),this._xfView.dispose(),this._xfView=null),this._dailyChargeView&&(this._dailyChargeView.parent&&this._dailyChargeView.parent.removeChild(this._dailyChargeView),this._dailyChargeView.dispose(),this._dailyChargeView=null),this._shop_qizhen&&(this._shop_qizhen.parent&&this._shop_qizhen.parent.removeChild(this._shop_qizhen),this._shop_qizhen.dispose(),this._shop_qizhen=null),this._shop_qizhen_zhuan&&(this._shop_qizhen_zhuan.parent&&this._shop_qizhen_zhuan.parent.removeChild(this._shop_qizhen_zhuan),this._shop_qizhen_zhuan.dispose(),this._shop_qizhen_zhuan=null),this._jubao&&(this._jubao.parent&&this._jubao.parent.removeChild(this._jubao),this._jubao.dispose(),this._jubao=null),this._zp&&(this._zp.parent&&this._zp.parent.removeChild(this._zp),this._zp.dispose(),this._zp=null),this._fishView&&(this._fishView.parent&&this._fishView.parent.removeChild(this._fishView),this._fishView.dispose(),this._fishView=null),this._shop&&(this._shop.parent&&this._shop.parent.removeChild(this._shop),this._shop.dispose(),this._shop=null)},t}(LayeroutWindow);egret.registerClass(FanLiWindow,"FanLiWindow");var FanLiXfItem=function(e){function t(t){e.call(this),this._itemArr=[],this._avo=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/fanli/FanLiXfItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this._img=new PicLoader,this.addChild(this._img),this._img.x=14,this._img.y=29,this._imgName=new PicLoader,this._imgName.x=20,this._imgName.y=10,this.addChild(this._imgName),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this)},s.onClickBtn=function(){this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD21701,{id:this._avo.template_id,awardId:this._vo.template_id}));var e=[],t=0;this._vo.goodsList[0].value>20&&(t=20);for(var i=0;t>i;i++){var n=this._vo.goodsList[0].asset_id,s=GoodsListProxy.getInstance().getBasicGood(n);if(null!=s){var a=s.pic;e.push(a)}}AccessGoodFlyEffectManager.getInstance().flyArray(e)},i(s,"avo",void 0,function(e){this._avo=e}),s.setData=function(e){this._vo=e;for(var t,i,n=e.goodsList.length,s=0;n>s;s++)t=new GoodsItemSmall,t.x=(t.width+10)*s,this._itemArr.push(t),this._itemContainer.addChild(t),i=e.goodsList[s],t.data=GoodsListProxy.getInstance().getGoodsInfoByType(i.asset_id),t.num=i.value},i(s,"vo",function(){return this._vo}),s.updateInfo=function(){var e=FanLiModel.getInstance().xf_totalGold,t=FanLiModel.getInstance().getXfData(this._vo.template_id);this._txtGold.text="消费"+Tools.convertNumber(this._vo.need)+"元宝",this._txtGold2.text="（"+e+"/"+this._vo.need+"）",this._txtGold2.textColor=53800,t?(this._btnOK.enabled=!1,this._btnOK.label="已领取"):e>=this._vo.need?(this._txtGold2.textColor=53800,this._btnOK.label="领取",this._btnOK.enabled=!0):(this._txtGold2.textColor=16711680,this._btnOK.enabled=!1,this._btnOK.label="领取")},s.dispose=function(){e.prototype.dispose.call(this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this.parent&&this.parent.removeChild(this);for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],t.parent&&t.parent.removeChild(t),t.data=null,t.dispose(),t=null;this._itemArr=[]},t}(Csprite);egret.registerClass(FanLiXfItem,"FanLiXfItem");var FanLiXfView=function(e){function t(i){e.call(this),this._itemArr=[],this._resTime=0,this._vo=i,this.name="FanLiXfView"+t.K++,this._model=FanLiModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanLiXfViewSkin.exml",this.touchEnabled=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.clearItems();for(var e,t,i=this._model.getFanLiXfConfig(),n=i.length,s=0;n>s;s++)e=i[s],e.type==this._vo.template_id&&(t=new FanLiXfItem(this._vo),t.avo=this._vo,t.y=137*s,this._itemContainer.addChild(t),this._itemArr.push(t),t.setData(e))},n.onAdd=function(){e.prototype.onAdd.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.CCMD21700_UPDATE,this.updateXfHandler,this),this.updateXfHandler();var t=this._vo.endDate,i=new Date(1e3*RoleModel.getInstance().serverTime),n=(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),(t.getTime()-i.getTime())/1e3);this._resTime=Math.ceil(n),this._resTime>0&&(TimerManager.getInstance().add(1e3,this.onTimer,this),this.onTimer())},n.onTimer=function(){this._resTime--,this._resTime>0?this._txtTime.text=TimeUtil.getTime5(this._resTime):(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text="活动已结束")},n.onRemove=function(){e.prototype.onRemove.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.CCMD21700_UPDATE,this.updateXfHandler,this)},n.setVO=function(e){this._vo=e,this.clearItems();for(var t,i,n=this._model.getFanLiXfConfig(),s=n.length,a=0,o=0;s>o;o++)t=n[o],t.type==this._vo.template_id&&(i=new FanLiXfItem(this._vo),i.avo=this._vo,i.y=137*a,this._itemContainer.addChild(i),this._itemArr.push(i),i.setData(t),a++)},n.updateXfHandler=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.updateInfo()},n.onOkHandler=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.dispose(),e=null;this._itemArr=[]},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),this.clearItems()},t.K=0,t}(BaseView);egret.registerClass(FanLiXfView,"FanLiXfView");var FanLiXgItem=function(e){function t(t){e.call(this),this._ind=0,this._ind=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/fanli/FanLiXgItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this._img=new PicLoader,this.addChild(this._img),this._img.x=14,this._img.y=29,this._imgName=new PicLoader,this._imgName.x=20,this._imgName.y=10,this.addChild(this._imgName)},s.setData=function(e){this._vo=e,this._img.load(UrlUtil.getFanLiXGIcon("gift_"+this.vo.template_id)),this._imgName.load(UrlUtil.getFanLiXGIcon("name_"+this.vo.template_id))},i(s,"vo",function(){return this._vo}),s.setSelected=function(e){},s.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this._img&&(this._img.dispose(),this._img=null),this._imgName&&(this._imgName.dispose(),this._imgName=null)},t}(Csprite);egret.registerClass(FanLiXgItem,"FanLiXgItem");var FanLiXgView=function(e){function t(i){e.call(this),this._itemAwardArr=[],this._itemArr=[],this._resTime=0,this._vo=i,this.name="FanLiXgView"+t.K++,this._model=FanLiModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanLiXgViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._imgGiftName=new PicLoader,this.addChild(this._imgGiftName),this._imgGiftName.touchEnabled=!1,this._imgGiftName.x=27,this._imgGiftName.y=162,this._imgGift=new PicLoader,this.addChild(this._imgGift),this._imgGift.touchEnabled=!1,this._imgGift.x=50,this._imgGift.y=258;for(var e,t=this._model.getFanLiXgConfig(this._vo.template_id),i=t.length,n=0;i>n;n++)e=new FanLiXgItem(n+1),e.x=137*n,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClick,this),this._itemContainer.addChild(e),this._itemArr.push(e),e.setData(t[n]);this.setSelected(this._itemArr[0])},n.onAdd=function(){e.prototype.onAdd.call(this),this._btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().addEventListener(FanLiEvtName.UPDATE_XG_INFO,this.updateXgHandler,this);var t=this._vo.endDate,i=new Date(1e3*RoleModel.getInstance().serverTime),n=(t.getTime()-i.getTime())/1e3;this._resTime=Math.ceil(n),this._resTime>0&&(TimerManager.getInstance().add(1e3,this.onTimer,this),this.onTimer())},n.onRemove=function(){e.prototype.onRemove.call(this),this._btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().removeEventListener(FanLiEvtName.UPDATE_XG_INFO,this.updateXgHandler,this),TimerManager.getInstance().remove(1e3,this.onTimer,this)},n.onTimer=function(){this._resTime--,this._resTime>0?this._txtTime.text=TimeUtil.getTime5(this._resTime):(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text="活动已结束")},n.setVO=function(e){this._vo=e,this.clearItems();for(var t,i=this._model.getFanLiXgConfig(this._vo.template_id),n=i.length,s=0;n>s;s++)t=new FanLiXgItem(s+1),t.x=137*s,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClick,this),this._itemContainer.addChild(t),this._itemArr.push(t),t.setData(i[s]);this.setSelected(this._itemArr[0])},n.itemClick=function(e){var t=e.currentTarget;this.setSelected(t)},n.setSelected=function(e){this._selectedItem=e,this._imgSelected.x=this._itemContainer.x+this._selectedItem.x,this._imgSelected.y=this._itemContainer.y+this._selectedItem.y,this.updateInfo()},n.updateInfo=function(){var e=this._selectedItem.vo;this._imgGiftName.load(UrlUtil.getFanLiXGIcon("name2_"+e.template_id)),this._imgGift.load(UrlUtil.getFanLiXGIcon("giftBig_"+e.template_id)),this._txtGold.text=e.con_gold+"",this._txtVip.text="VIP"+e.req_vip+"可购买",e.req_vip<=0?this._txtVip.visible=!1:this._txtVip.visible=!0,this.clearAwardItems();for(var t,i,n=e.showList.length,s=0;n>s;s++)t=new GoodsItemSmall,t.x=s%2*(t.width+25),t.y=Math.floor(s/2)*(t.height+35),this._itemAwardArr.push(t),this._itemAwardContainer.addChild(t),i=e.showList[s],t.data=GoodsListProxy.getInstance().getGoodsInfoByType(i.asset_id),t.num=i.value;this.updateXgHandler()},n.updateXgHandler=function(){var e=this._selectedItem.vo;this._imgSoldOut.visible=!1,this._btnBuy.visible=!0;var t=this._model.getFanLiXgData(e.template_id,this._vo.template_id);if(null!=t){RoleModel.getInstance().getRoleInfo().getGold();t.num>=Number(e.limit)&&(this._imgSoldOut.visible=!0,this._btnBuy.visible=!1)}},n.clearAwardItems=function(){for(var e,t=this._itemAwardArr.length,i=0;t>i;i++)e=this._itemAwardArr[i],e.parent&&e.parent.removeChild(e),e.data=null,e.dispose(),e=null;this._itemAwardArr=[]},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClick,this),e.dispose(),e=null;this._itemArr=[]},n.onOkHandler=function(){var e=RoleModel.getInstance().getRoleInfo().getGold();return e<this._selectedItem.vo.con_gold?void this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN)):void this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD17801,{id:this._vo.template_id,giftId:this._selectedItem.vo.template_id}))},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),this._bg&&(this._bg.dispose(),this._bg=null),this._imgGiftName&&(this._imgGiftName.dispose(),this._imgGiftName=null),this._imgGift&&(this._imgGift.dispose(),this._imgGift=null),this.clearAwardItems(),this.clearItems()},t.K=0,t}(BaseView);egret.registerClass(FanLiXgView,"FanLiXgView");var FanliCircleCarnivalView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanliCircleCarnivalViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._bg=new PicLoader,this.addChildAt(this._bg,0),this._bg.touchEnabled=!1,this._bg.load(rURL("resource/assets/icon/fanli/circleCarnival/circleCarnivalBg.jpg")),this._bg.x=20,this._bg.y=140},n.setVO=function(e){var t=new Date,i=e.endDate.getTime()-t.getTime();this.txtTime.text=TimeUtil.convertTime(i,"DD天hh小时mm分")},n.dispose=function(){e.prototype.dispose.call(this),this._bg&&(this._bg.dispose(),this._bg=null)},t}(BaseView);egret.registerClass(FanliCircleCarnivalView,"FanliCircleCarnivalView");var FanliDFWView=function(e){function t(){e.call(this),this._idx=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanliDFWSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiCompHandler,e),e.addGlobalEventListener(FanLiEvtName.CCMD24000_UPDATE,e.updatePoint,e),e.addGlobalEventListener(FanLiEvtName.CCMD24010_UPDATE,e.updatePoint,e),e.addGlobalEventListener(FanLiEvtName.CCMD24040_UPDATE,e.updateData,e),e.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,e.onUpdateDaily,e),e.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGet,e),e.btnGet6.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGet6,e),e.boxReward.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGetReward,e);for(var t,i=0;5>i;i++)t=e["box_"+i],t.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGetBox,e);e.imageBg=new PicLoader,e.imageBg.load("resource/assets/icon/fanli/fanli_zpBg2.jpg"),e.addChildAt(e.imageBg,0);var n=new egret.Rectangle(0,0,577,678);this.mask=n},n.updatePoint=function(e){var t=this;t._result=e.data,t.img_dice.source="fanli_json.fanli_dice_"+t._result,t.img_dice.visible=!0,t.showEffect()},n.updateData=function(e){var t=this,i=e.data;t._scmdData&&t._scmdData.floor!=i.floor&&(t.contentGroup.y=-678,egret.Tween.get(t.contentGroup).to({y:0},500)),t._scmdData=i,t.onUpdateDaily(),t.updateInfo()},n.updateInfo=function(){var e=this;if(e._scmdData){e.txtFloor.text="第"+e._scmdData.floor+"层",e._idx=e._scmdData.location;var t=this["item_"+e._scmdData.location];e.effectGroup.x=t.x,e.effectGroup.y=t.y,e.diceGroup.visible=!0,e.img_dice.visible=!1,e.updateRole(e._idx)}},n.onGet=function(){var e=this;e.img_dice.visible=!1;var t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_24001,e._vo.template_id),i=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_24001).value),n=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_24002).value);i>t&&(n=0),RoleModel.getInstance().CheckGold(n)&&(e.diceGroup.visible=!1,e.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD24000,e._vo.template_id)))},n.onGet6=function(){var e=this;return Number(e.txtCount.text)<=0?void this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN)):(e.img_dice.visible=!1,e.diceGroup.visible=!1,void e.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD24010,e._vo.template_id)))},n.onGetReward=function(){var e=this,t=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_24004).value),i=(DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_24004,e._vo.template_id),DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_24005,e._vo.template_id)),n=SingleModel.getInstance().getSingVO(SingleModel.KEY_24006).itemArr,s=new NodeDrop_list;s.asset_id=Number(n[0]),s.value=Number(n[1]);var a=new NodeDrop_list;a.asset_id=Number(n[2]),a.value=Number(n[3]),i>=t?(AccessGoodFlyEffectManager.getInstance().flyArray([GoodsListProxy.getInstance().getGoodsInfoByType(s.asset_id).pic,GoodsListProxy.getInstance().getGoodsInfoByType(a.asset_id).pic]),e.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD24020,e._vo.template_id))):this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.SHOW_KFHD_TREASURE_AWARD_VIEW,{node:[s,a],content:"达到指定财富值可领取奖励"}))},n.onGetBox=function(e){var t=this,i=e.currentTarget,n=i.data,s=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_24006,n.template_id);if(t._scmdData.floor<n.floor){var a=new NodeDrop_list;a.asset_id=n.reward[0].info.template_id,a.value=n.reward[0].num,this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.SHOW_KFHD_TREASURE_AWARD_VIEW,{node:a,content:"达到指定层数可领取奖励"}))}else 0==s&&(AccessGoodFlyEffectManager.getInstance().flyArray([n.reward[0].info.pic]),t.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD24030,n.template_id)))},n.onUpdateDaily=function(){var e=this,t=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_24004).value),i=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_24004,e._vo.template_id),n=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_24005,e._vo.template_id);e.bar.maximum=t,e.bar.value=n,n>=t&&0==i?e.boxReward.source="fanli_json.fanli_box2":e.boxReward.source="fanli_json.fanli_box",e.lq_reward.visible=i>0;for(var s,a,o,r,h,l=FanLiModel.getInstance().getConfigDFWReward()[e._vo.template_id],d=0,_=0;_<l.length;_++)s=l[_],a=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_24006,s.template_id),(0==a||_+5>=l.length||d>0)&&4>=d&&(o=e["txtFloor_"+d],r=e["box_"+d],r.source=a>0?"fanli_json.fanli_box_open":"fanli_json.fanli_box_close",r.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGetBox,e),r.data=s,h=e["lq_"+d],h.visible=a>0,a>0?o.text="已领取":e._scmdData&&e._scmdData.floor>=s.floor?o.text="可领取":o.text=s.floor+"层",d++);var c=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_24001,e._vo.template_id),u=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_24001).value);u>c?e.txtCost.text="免费"+(u-c)+"次":e.txtCost.text=SingleModel.getInstance().getSingVO(SingleModel.KEY_24002).value;var p=Math.floor(DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_14)/Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_24003).value)),g=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_24003,e._vo.template_id);e.txtCount.text=(p-g).toString()},n.setVO=function(e){var t=this;t._vo=e,t._picArr||(t._picArr=[]);for(var i,n,s,a,o=FanLiModel.getInstance().getConfigDFW()[t._vo.template_id],r=0;r<o.length;r++)i=t._picArr[r],n=o[r],s=t["item_"+r],a=t["txtNum_"+r],i||(i=new PicLoader,t._picArr[r]=i,t.contentGroup.addChild(i)),n.reward_item&&n.reward_item.length>0?(i.load(UrlUtil.getGoodsImageURL(n.reward_item[0].info.pic)),a.text=n.reward_item[0].num+""):n.reward_wealth>0&&(i.load(UrlUtil.getFanliDFWPic(n.reward_wealth)),a.text=n.reward_wealth+""),a&&t.contentGroup.setChildIndex(a,t.contentGroup.numChildren-1),i.x=s.x,i.y=s.y},n.showEffect=function(){TimerManager.getInstance().remove(200,this.showTime,this),TimerManager.getInstance().add(200,this.showTime,this)},n.showTime=function(){var e=this;e._idx++,e._result--;var t=FanLiModel.getInstance().getConfigDFW()[e._vo.template_id];if(e._idx>=t.length||e._result<0){TimerManager.getInstance().remove(200,this.showTime,this),e.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD24040,e._vo.template_id));var i=e._picArr[e._idx-1];i&&AccessGoodFlyEffectManager.getInstance().fly(i.url,new Point(i.x+30,i.y+230),new Point(e.bar.x+250,e.bar.y+300),!0)}else{var n=this["item_"+e._idx];e.effectGroup.x=n.x,e.effectGroup.y=n.y,e.updateRole(e._idx)}},n.updateRole=function(e){var t=this,i="",n=30;6>e?i="right":11>e?i="up":(i="left",n=50),t._effectRoleUrl!=i&&(t._effectRoleUrl=i,t._effectRole&&(t._effectRole.dispose(),t._effectRole=null),t._effectRole=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL(i),n,30,t.effectGroup,60,!0),t.setChildIndex(t.effectGroup,t.numChildren-1))},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.removeGlobalEventListener(FanLiEvtName.CCMD24000_UPDATE,t.updatePoint,t),t.removeGlobalEventListener(FanLiEvtName.CCMD24010_UPDATE,t.updatePoint,t),t.removeGlobalEventListener(FanLiEvtName.CCMD24040_UPDATE,t.updateData,t),t.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,t.onUpdateDaily,t),t.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onGet,t),t.btnGet6.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onGet6,t),t.boxReward.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onGetReward,t),clearTimeout(this._timeIndex);for(var i,n=0;5>n;n++)i=t["box_"+n],i.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onGetBox,t);t.imageBg&&(t.imageBg.dispose(),t.imageBg=null),t._effect&&(t._effect.dispose(),t._effect=null),t._effectRole&&(t._effectRole.dispose(),t._effectRole=null)},t}(BaseView);egret.registerClass(FanliDFWView,"FanliDFWView");var FanliLoginLuckView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanliLoginLuckSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addGlobalEventListener(FanLiEvtName.CCMD17500_UPDATE,this.updateData,this),this.addGlobalEventListener(FanLiEvtName.CCMD17510_UPDATE,this.updateLog,this),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnGet10.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet10,this),this.btnChou.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChou,this),this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/fanli/FanliLoginLuckBg.png"),this.addChildAt(this.imageBg,0),this._itemArr=[],this._flyArr=[];for(var e,t,i,n,s,a,o=FanLiModel.getInstance().getLoginLuckArr(),r=0;r<o.length;r++)n=r+1,a=o[r],s=GoodsListProxy.getInstance().getGoodsInfoByType(a.item_id),i=this["txtName_"+n],i.text=s.name+"×"+a.num,e=this["itemBg_"+n],e.source="fanliColor_"+(s.quality-1),t=new PicLoader,t.x=e.x+31,t.y=e.y+29,t.load(UrlUtil.getGoodsImageURL(s.pic)),this.addChild(t),this._itemArr.push(t),this._flyArr.push(s.pic)},n.setVO=function(e){this._vo=e},n.onGet=function(){this.flyItem(),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD17502,{id:this._vo.template_id,type:1}))},n.onGet10=function(){this.flyItem(),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD17502,{id:this._vo.template_id,type:2}))},n.onChou=function(){var e=this;this._award_id=0,this._isChou=!0,this.btnChou.enabled=!1,this.showEffect(),clearTimeout(this._timeIndex),this._timeIndex=setTimeout2(function(){e.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD17501,{id:e._vo.template_id}))},1e3)},n.updateData=function(e){this._data=e.data;for(var t,i=FanLiModel.getInstance().getLoginLuckArr(),n=0;n<i.length;n++)if(t=i[n],t.template_id==this._data.award_id){if(this._award_id=n+1,!this._isChou){var s=this["itemBg_"+this._award_id];this.image_select.x=s.x,this.image_select.y=s.y}this.txtCost.text=t.cost.toString()}this.updateDaily()},n.updateDaily=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_45);if(this.btnChou.enabled=!0,this.btnChou.visible=0==e,this.group_lq.visible=e>0&&0==this._data.flag,this.image_lq.visible=e>0&&1==this._data.flag,ConfigManager.isTencent()){var t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_17301,this._vo.template_id);t>0&&(this.btnGet.label="双倍",this.btnGet10.label="十五倍")}},n.updateLog=function(e){for(var t,i="",n=new eui.ArrayCollection,s=e.data,a=0;a<s.length;a++)t=GoodsListProxy.getInstance().getGoodsInfoByType(s[a].item_id),i=s[a].name+" <font color='#ffd200'>十倍领取</font>了 <font color='#00d228'>"+t.name+"×"+s[a].num+"，</font>真是羡煞旁人",n.addItem(i);this.logList.dataProvider=n},n.showEffect=function(){this._idx=this._award_id,TimerManager.getInstance().add(50,this.showTime,this)},n.showTime=function(){this._idx++,this._idx>10&&(this._idx=1);var e=this["itemBg_"+this._idx];this.image_select.x=e.x,this.image_select.y=e.y,this._idx==this._award_id&&(TimerManager.getInstance().remove(50,this.showTime,this),ConfigManager.isTencent()&&(GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FuLiEvtName.SHOW_SHARENEW_VIEW,ShareNewWindow.FANLI_LOGIN)),FanLiModel.getInstance().fanliShareID=this._vo.template_id))},n.flyItem=function(){for(var e=[],t=20,i=0;t>i;i++)e.push(this._flyArr[this._idx-1]);AccessGoodFlyEffectManager.getInstance().flyArray(e)},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(FanLiEvtName.CCMD17500_UPDATE,this.updateData,this),this.removeGlobalEventListener(FanLiEvtName.CCMD17510_UPDATE,this.updateLog,this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.btnGet10.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet10,this),this.btnChou.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChou,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),TimerManager.getInstance().remove(50,this.showTime,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t.dispose(),t=null;this._itemArr=null},t}(BaseView);egret.registerClass(FanliLoginLuckView,"FanliLoginLuckView");var FanliPetExploreView=function(e){function t(){e.call(this),this._itemArr2=[],this._model=HuoDongDailyModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDTreasureViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._imgGold1.source=UrlUtil.getSmallPic(2),this._imgGold2.source=UrlUtil.getSmallPic(2)},n.setVO=function(e){this._vo=e},n.onAdd=function(){e.prototype.onAdd.call(this),GameDispatcher.getInstance().addEventListener(DailyEvtName.DAILY_UPDATE,this.updateTimes,this),GameDispatcher.getInstance().addEventListener(TreasureEvtName.TREASURE__CCMD24500_UPDATE,this.flyGoods,this),this._btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnGet10.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOk10Handler,this),this.config=FanLiModel.getInstance().getPetExploreConfig();for(var t,i,n,s=this.config.show,a=0;7>a;a++)i=this["_item"+a],t=s[a],t&&(n=GoodsListProxy.getInstance().getGoodsInfoByType(t.info.template_id),i.data=n),1==a&&(null==this._effect&&(this._effect=new UIEffect),this._effect.showEffect(UrlUtil.getCommonEffectURL("color_6"),-270,-390,i,80,!0));for(this._txtCon1.text=this.config.con_gold1+"",this._txtCon2.text=this.config.con_gold2+"",a=0;a<this.config.show_time.length;a++)i=new GoodsItem,i.name=a+"",i.x=a*(i.width+15),i.data=GoodsListProxy.getInstance().getGoodsInfoByType(this.config.show_time[a].info.template_id),i.showLv(!0),i.showName(this.config.times_reward[a].num+"次"),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItem,this),i.showTips=!1,this._itemContainer2.addChild(i),this._itemArr2.push(i);
this.updateTimes()},n.onRemove=function(){e.prototype.onRemove.call(this),GameDispatcher.getInstance().removeEventListener(TreasureEvtName.TREASURE__CCMD24500_UPDATE,this.flyGoods,this),GameDispatcher.getInstance().removeEventListener(DailyEvtName.DAILY_UPDATE,this.updateTimes,this),this._btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnGet10.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOk10Handler,this),this._effect&&(this._effect.dispose(),this._effect=null);for(var t,i=0;i<this._itemArr2.length;i++)t=this._itemArr2[i],t.parent&&t.parent.removeChild(t),t.data=null,t.dispose(),t=null;this._itemArr2=[]},n.onItem=function(e){for(var t=0;t<this._itemArr2.length;t++){var i=e.currentTarget;if(this._itemArr2[t]==i){var n=new NodeDrop_list;n.asset_id=i.data.template_id,n.value=i.data.num;var s=[n];GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HuoDongDailyEvtName.SHOW_KFHD_TREASURE_AWARD_VIEW,{node:s}))}}},n.onOkHandler=function(){var e=new ParamEvent(TreasureEvtName.TREASURE__CCMD24500,{type:this._vo.template_id,num:1});this.dispatchGlobalEvent(e)},n.onOk10Handler=function(){var e=new ParamEvent(TreasureEvtName.TREASURE__CCMD24500,{type:this._vo.template_id,num:10});this.dispatchGlobalEvent(e)},n.updateTimes=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_24501,this._vo.template_id);this._txtCount.htmlText="每日寻宝达到指定次数<font color='#00ff0c'>（"+e+"）</font>可领取奖励"},n.flyGoods=function(e){for(var t,i=e.data.arr,n=this.localToGlobal(227,8),s=[],a=0;a<i.length;a++){t=i[a];for(var o=0;o<t.value;o++)s.push(GoodsListProxy.getInstance().getGoodsInfoByType(t.asset_id).pic)}AccessGoodFlyEffectManager.getInstance().flyArray(s,n)},n.dispose=function(){e.prototype.dispose.call(this);for(var t,i=0;7>i;i++)t=this["_item"+i],t&&(t.parent&&t.parent.removeChild(t),t.data=null,t.dispose(),t=null)},t.K=1,t}(BaseView);egret.registerClass(FanliPetExploreView,"FanliPetExploreView");var FanliShopItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/fanli/FanLiShopItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiComplementHandler,e),e.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGet,e),e._isInit||(e._isInit=!0,e._vo&&e.updateContent())},n.onGet=function(){var e=this,t=GoodsListProxy.getInstance().getGoodsInfoByType(e._vo.shop_id);AccessGoodFlyEffectManager.getInstance().flyArray([t.pic],null,new Point(150,900)),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.CCMD23600,{id:e._vo.client_id,shop_id:e._vo.template_id}))},n.dataChanged=function(){var e=this;e._vo=e.data,e._isInit&&e.updateContent()},n.updateContent=function(){var e=this,t=GoodsListProxy.getInstance().getGoodsInfoByType(e._vo.shop_id);e.txtName.text=t.name,e.txtName.textColor=ColorUtil.getGoodColorNumber(t.quality-1);for(var i,n,s=!0,a=0;4>a;a++)i=e["item_"+a],e._vo.con_item[a]?(i.data=e._vo.con_item[a].info,n=GoodsListProxy.getInstance().findGoodNumber(e._vo.con_item[a].info.template_id),i.showName("("+n+"/"+e._vo.con_item[a].num+")"),n<e._vo.con_item[a].num&&(s=!1),i.visible=!0):i.visible=!1;var o=e._vo.limit_num-DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_23601,e._vo.template_id);e.txtCount.htmlText="（"+ColorUtil.getColorHtmlStr(o+"/"+e._vo.limit_num,o>0?ColorUtil.COLOR_GREEN:ColorUtil.COLOR_RED)+"）",e.btnGet.visible=s&&o>0},n.dispose=function(){var e=this;e.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onGet,e)},t}(eui.ItemRenderer);egret.registerClass(FanliShopItem,"FanliShopItem");var FanliShopView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanLiShopViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiCompHandler,e),e.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,e.updateData,e),e.imageBg=new PicLoader,e.imageBg.load("resource/assets/icon/fanli/FanliShopBg.jpg"),e.addChildAt(e.imageBg,0),e._isInit||(e._isInit=!0,e.updateData()),e._arrItem=[]},n.updateData=function(){var e=this;if(e._isInit&&e._data){for(var t,i,n=0;n<e._data.length;n++)t=e._data[n],t.client_id=e._vo.template_id,i=e._arrItem[n],i||(i=new FanliShopItem,e._arrItem.push(i)),i.data=t,i.y=132*n,e.datalist.addChild(i);var s=TimeUtil.getTimeByTimeZone(),a=24-s.getHours(),o=s.getMinutes();e._time=60*a*60-60*o,e.timeComplete(),TimerManager.getInstance().add(1e3,e.timeComplete,e)}},n.timeComplete=function(){var e=this;e._time--,e._time<=0?(TimerManager.getInstance().remove(1e3,e.timeComplete,e),e.txtTime.text="00:00"):e.txtTime.text=TimeUtil.getTime2(e._time)},n.setVO=function(e){var t=this;t._vo=e,t._data=FanLiModel.getInstance().getShopList(t._vo.template_id),t.updateData()},n.dispose=function(){e.prototype.dispose.call(this);var t=this;TimerManager.getInstance().remove(1e3,t.timeComplete,t),t.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,t.updateData,t),t.imageBg&&(t.imageBg.dispose(),t.imageBg=null);for(var i,n=0;n<t._arrItem.length;n++)i=t._arrItem[n],i&&i.parent&&(i.parent.removeChild(i),i.dispose(),i=null);t._arrItem=null},t}(BaseView);egret.registerClass(FanliShopView,"FanliShopView");var FanliZPView=function(e){function t(){e.call(this),this._result=-1,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanliZPSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addGlobalEventListener(FanLiEvtName.CCMD23400_UPDATE,this.updateData,this),this.addGlobalEventListener(FanLiEvtName.CCMD23401_UPDATE,this.updateWai,this),this.addGlobalEventListener(FanLiEvtName.CCMD23402_UPDATE,this.updateNei,this),this.addGlobalEventListener(FanLiEvtName.CCMD23410_UPDATE,this.updateLog,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/fanli/fanli_zpBg.jpg"),this.addChildAt(this.imageBg,0),this.tabBar.dataProvider=new eui.ArrayCollection(["小转怡情","大转强身","猛转兴运","豪转富国"]),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this._helpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this._helpButton.x=-10,this._helpButton.y=-160},n.onBarItemTap=function(e){this.image_select.visible=!1,this.setSelectIndex(this.tabBar.selectedIndex)},n.setSelectIndex=function(e){void 0===e&&(e=0),this._typeVo=FanLiModel.getInstance().getConfigZP()[this._vo.template_id][e+1];for(var t,i,n=FanLiModel.getInstance().getConfigZPWai()[this._typeVo.template_id],s=0;s<n.length;s++)i=n[s],t=this["item_"+s],t&&i.reward&&i.reward.length>0&&(t.data=i.reward[0].info,t.showLv(!1));for(var a=FanLiModel.getInstance().getConfigZPNei()[this._typeVo.template_id],o=0;o<a.length;o++)i=a[o],t=this["item_n_"+o],t&&i.reward&&i.reward.length>0&&(t.data=i.reward[0].info,t.setItemBg("share_json.itemBg_5"),t.showLv(!1));this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD23400,this._typeVo.type)),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD23410,this._typeVo.type))},n.setVO=function(e){this._vo=e,this.setSelectIndex()},n.onGet=function(){var e=this;return this._scmdData.score<Number(this.txtCost.text)?void this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN)):(this.image_select.visible=!0,this.btnGet.enabled=!1,this._idx=0,this._result=-1,this._isNei=this._data&&this._data.is_nei>0,this.showEffect(),clearTimeout(this._timeIndex),void(this._timeIndex=setTimeout2(function(){e._data&&e._data.is_nei>0?e.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD23402,{act_id:e._typeVo.type,t_id:e._typeVo.template_id})):e.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD23401,{act_id:e._typeVo.type,t_id:e._typeVo.template_id}))},800)))},n.updateData=function(e){if(this._scmdData=e.data,this.txtCount.text="充值得积分（我的积分："+this._scmdData.score+")",this._data=null,this._scmdData.act_id==this._typeVo.type)for(var t=0;t<this._scmdData.act_flzp_list.length;t++)if(this._scmdData.act_flzp_list[t].type_id==this._typeVo.template_id){this._data=this._scmdData.act_flzp_list[t];break}var i=0;if(this._data&&this._data.is_nei>0){var n=this.item_10;this.image_select.x=n.x-11,this.image_select.y=n.y-12}else i=this._typeVo.need;this.txtCost.text=i.toString(),this.btnGet.enabled=!0},n.updateWai=function(e){for(var t,i,n=e.data,s=FanLiModel.getInstance().getConfigZPWai()[this._typeVo.template_id],a=0;a<s.length;a++)i=s[a],t=this["item_"+a],i.template_id==n.cfg_id&&(this._result=a);trace("wai========"+n.cfg_id)},n.updateNei=function(e){for(var t,i,n=e.data,s=FanLiModel.getInstance().getConfigZPNei()[this._typeVo.template_id],a=0;a<s.length;a++)i=s[a],t=this["item_n_"+a],i.template_id==n.cfg_id&&(this._result=a);trace("nei========"+n.cfg_id)},n.updateLog=function(e){for(var t=e.data,i=t.act_flzp_logs,n=new eui.ArrayCollection,s=0;s<i.length;s++)n.addItem(i[s].content);this.logList.dataProvider=n},n.showEffect=function(){TimerManager.getInstance().remove(50,this.showTime,this),TimerManager.getInstance().add(50,this.showTime,this)},n.showTime=function(){this._idx++;var e;if(this._isNei?(this._idx>7&&(this._idx=0),e=this["item_n_"+this._idx]):(this._idx>15&&(this._idx=0),e=this["item_"+this._idx]),this.image_select.x=e.x-11,this.image_select.y=e.y-12,this._result==this._idx){this._result=-1,TimerManager.getInstance().remove(50,this.showTime,this);var t=e.data;if(t){for(var i=[],n=20,s=0;n>s;s++)i.push(t.pic);AccessGoodFlyEffectManager.getInstance().flyArray(i)}}},n.onHelp=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.MIJINGZP))},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(FanLiEvtName.CCMD23400_UPDATE,this.updateData,this),this.removeGlobalEventListener(FanLiEvtName.CCMD23401_UPDATE,this.updateWai,this),this.removeGlobalEventListener(FanLiEvtName.CCMD23402_UPDATE,this.updateNei,this),this.removeGlobalEventListener(FanLiEvtName.CCMD23410_UPDATE,this.updateLog,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),TimerManager.getInstance().remove(50,this.showTime,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null)},t}(BaseView);egret.registerClass(FanliZPView,"FanliZPView");var FanliZhuanView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fanli/FanliZhuanViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnChongzhi.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChong,this),this.addGlobalEventListener(FanLiEvtName.CCMD17700_UPDATE,this.updateData,this),this.addGlobalEventListener(FanLiEvtName.CCMD17701_UPDATE,this.updateResult,this),this.txtHelp.htmlText="<u>玩法说明</u>",this.txtHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this.txtLink.htmlText="<u>详细收益</u>",this.txtLink.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLink,this),this.imageBg=new PicLoader,this.imageBg.x=-276,this.imageBg.y=-273,this.imageBg.load("resource/assets/icon/shadow/shadow_zhuanBg.png"),this.zhuanBg.addChildAt(this.imageBg,0),this.imageBg2=new PicLoader,this.imageBg2.load("resource/assets/icon/fanli/fanli_zhuanBg.png"),this.contentGroup.addChildAt(this.imageBg2,0)},n.onLink=function(e){this.contentGroup.visible=!1,this.helpGroup.visible=!0},n.onHelp=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.FANLI_ZHUAN))},n.onChong=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.onGet=function(){this.start()},n.start=function(){var e=this;this.btnGet.enabled=!1,this.onRotation(3),clearTimeout(this._timeIndex),this._timeIndex=setTimeout2(function(){e.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD17701,{id:e._vo.template_id}))},2e3)},n.updateResult=function(e){var t=e.data;this._data.awarded_id=t.cfg_id;for(var i=0;i<this._arrMuVo.length;i++)if(this._arrMuVo[i].template_id==t.cfg_id){this.onComplete(i);for(var n=[],s=20,a=0;s>a;a++)n.push(2);AccessGoodFlyEffectManager.getInstance().flyArray(n);break}},n.updateData=function(e){this._data=e.data,this.init()},n.onRotation=function(e){this.RotationLong=Tools.getRotationLong(8,-.5,60,60,e,.5),this.zhuanBg.rotation=0,egret.Tween.get(this.zhuanBg).to({rotation:this.RotationLong},3e4)},n.onComplete=function(e){var t=this;egret.Tween.removeTweens(this.zhuanBg),this.RotationLong=Tools.getRotationLong(8,-.5,1,1,e,.5),this.zhuanBg.rotation=this.RotationLong,clearTimeout(this._timeIndex),this._timeIndex=setTimeout2(function(){t.init()},1e3)},n.init=function(){this.btnGet.enabled=this._data.awarded_id<this._data.award_id;var e=this._data.awarded_id;0==e?e=100001:e!=this._data.award_id&&e++,this._arrVo=FanLiModel.getInstance().getNumArr();for(var t,i=0;i<this._arrVo.length;i++)t=this._arrVo[i],e==t.template_id&&(this.txtCost.text=t["double"].toString());this._arrMuVo=FanLiModel.getInstance().getMuArr();for(var n,s,a=0;a<this._arrMuVo.length;a++)n=this["txt_"+a],n.addMiaoBian(),n.text="×"+this._arrMuVo[a]["double"]/1e4,s=this["icon_"+a],s.source=UrlUtil.getGoodsImageURL(this._arrMuVo[a].show);this.contentGroup.visible=!0,this.helpGroup.visible=!1},n.setVO=function(e){this._vo=e},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(FanLiEvtName.CCMD17700_UPDATE,this.updateData,this),this.removeGlobalEventListener(FanLiEvtName.CCMD17701_UPDATE,this.updateResult,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnChongzhi.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChong,this),this.txtHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this.txtLink.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLink,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null),this.imageBg2&&(this.imageBg2.dispose(),this.imageBg2=null)},t}(BaseView);egret.registerClass(FanliZhuanView,"FanliZhuanView");var FashionItem=function(e){function t(t){void 0===t&&(t=0),e.call(this),this._ind=0,this._ind=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/fashion/FashionItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this._item.showLv(!1),this._item.showTips=!1},s.setData=function(e){this._vo=e;var t=GoodsListProxy.getInstance().getGoodsInfoByType(this._vo.goodsList[0].asset_id);t&&(this._txtName.text=t.name,this._item.data=t)},s.updateServerData=function(){var e=FigureModel.getInstance().selectedpartnerVOInFashionWin,t=FashionModel.getInstance().getFashionServerData(e.parnerID,this._vo.template_id);null==t?this._imgFlag.visible=!1:this._imgFlag.visible=!0},s.updateShowRedDot=function(){var e=FigureModel.getInstance().selectedpartnerVOInFashionWin;this.showRedDot=FashionModel.getInstance().checkFashionCanActiveByEquip(this._vo,e)},i(s,"vo",function(){return this._vo}),s.setSelected=function(e){},s.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this._item&&(this._item.parent&&this._item.parent.removeChild(this._item),this._item.data=null,this._item.dispose(),this._item=null),this._imgFlag&&this._imgFlag.parent&&this._imgFlag.parent.removeChild(this._imgFlag)},t}(Csprite);egret.registerClass(FashionItem,"FashionItem");var FashionRoleView=function(e){function t(){e.call(this),this._itemArr=[],this.LABEL_WEAR="穿戴",this.LABEL_GETOFF="卸下",this._resTime=0,this._model=FashionModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/fashion/FashionRoleViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this._figure=new BigFigure,this.figureMovieContainer.addChild(this._figure)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnAct.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onActHandler,this),this._btnWear.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onWearHandler,this),GameDispatcher.getInstance().addEventListener(PlayerBaseVO.CHANGE_CLOTH,this.updateClothHandler,this),GameDispatcher.getInstance().addEventListener(PlayerBaseVO.CHANGE_WEAPON,this.updateWeaponHandler,this),GameDispatcher.getInstance().addEventListener(PlayerBaseVO.CHANGE_WING,this.updateWingHandler,this),FashionModel.getInstance().addEventListener(FashionEvtName.FASHION_UPDATE_INFO,this.updateServerData,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateItemsRedDot,this),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER_IN_FASHION,this.onPartnerChangeHandler,this)},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this._btnAct.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onActHandler,this),this._btnWear.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onWearHandler,this),GameDispatcher.getInstance().removeEventListener(PlayerBaseVO.CHANGE_CLOTH,this.updateClothHandler,this),GameDispatcher.getInstance().removeEventListener(PlayerBaseVO.CHANGE_WEAPON,this.updateWeaponHandler,this),GameDispatcher.getInstance().removeEventListener(PlayerBaseVO.CHANGE_WING,this.updateWingHandler,this),FashionModel.getInstance().removeEventListener(FashionEvtName.FASHION_UPDATE_INFO,this.updateServerData,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateItemsRedDot,this),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER_IN_FASHION,this.onPartnerChangeHandler,this),this._imgSelected&&(this._imgSelected.parent.removeChild(this._imgSelected),this._imgSelected.dispose(),this._imgSelected=null),this.clearItems(),this._figure&&(this._figure.parent.removeChild(this._figure),this._figure.dispose(),this._figure=null),this.updateBtnEffect(!1),TimerManager.getInstance().remove(1e3,this.onTimer,this)},n.onPartnerChangeHandler=function(){var e=new ParamEvent(FashionEvtName.CCMD13600),t=FigureModel.getInstance().selectedpartnerVOInFashionWin;e.data={id:t.parnerID},this.dispatchGlobalEvent(e)},n.updateServerData=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.updateServerData();this.updateInfo(),this.updateItemsRedDot(),RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.FASHION_HEROLIST_REDDOT,{index:this._type})),RedDotsModel.getInstance().calFashionTabRedDot(this._type)},n.updateItemsRedDot=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.updateShowRedDot()},n.updateClothHandler=function(e){var t=FigureModel.getInstance().selectedpartnerVOInFashionWin;this._type==FashionModel.ROLE&&t.parnerID==e.data.id&&this.updateBtnWear()},n.updateWeaponHandler=function(e){var t=FigureModel.getInstance().selectedpartnerVOInFashionWin;this._type==FashionModel.WEAPON&&t.parnerID==e.data.id&&this.updateBtnWear()},n.updateWingHandler=function(e){var t=FigureModel.getInstance().selectedpartnerVOInFashionWin;this._type==FashionModel.WING&&t.parnerID==e.data.id&&this.updateBtnWear()},n.onActHandler=function(){var e=new ParamEvent(FashionEvtName.CCMD13601),t=FigureModel.getInstance().selectedpartnerVOInFashionWin;e.data={id:t.parnerID,template_id:this._vo.template_id},this.dispatchGlobalEvent(e)},n.onWearHandler=function(){if(this._btnWear.label==this.LABEL_WEAR){var e=new ParamEvent(FashionEvtName.CCMD13602),t=FigureModel.getInstance().selectedpartnerVOInFashionWin;e.data={id:t.parnerID,template_id:this._vo.template_id},this.dispatchGlobalEvent(e)}else{var e=new ParamEvent(FashionEvtName.CCMD13603),t=FigureModel.getInstance().selectedpartnerVOInFashionWin;e.data={id:t.parnerID,template_id:this._vo.template_id},this.dispatchGlobalEvent(e)}},n.setType=function(e){0==e?this._type=FashionModel.ROLE:1==e?this._type=FashionModel.WEAPON:2==e&&(this._type=FashionModel.WING),this.clearItems();var t,i=this._model.getFashionConfig(this._type),n=i.length;if(!(0>=n)){for(var s=0;n>s;s++)t=new FashionItem,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),t.setData(i[s]),t.x=113*s,this._itemArr.push(t),this._itemContainer.addChild(t);this._itemArr.length>0&&(this.setSelected(this._itemArr[0]),this._imgSelected.visible=!0),this.updateServerData(),this.updateItemsRedDot()}},n.onItemClick=function(e){var t=e.currentTarget;this.setSelected(t)},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),e.dispose(),e=null;this._itemArr=[]},n.setSelected=function(e){this._selectedItem=e,null==this._imgSelected&&(this._imgSelected=new CustomImage,this._imgSelected.source=RES.getRes("fashion_json.fashion_selected")),this._imgSelected.parent&&this._imgSelected.parent.removeChild(this._imgSelected),this._selectedItem.addChild(this._imgSelected),this._imgSelected.x=6,this._imgSelected.y=6,this.updateInfo()},n.updateInfo=function(){function e(e,i,n,s,a){void 0===n&&(n="#e7d0b7"),void 0===s&&(s=!1),void 0===a&&(a=!1);for(var o=0,r=0,h="",l="",d=0;d<i.length;d++)l=i[d],o=null==e?0:e[l],r=d,!a&&0>=o||(s&&t.push(l),h+=r>=5?"\n<font color='"+n+"'>"+EquipBasic.PROPERTY_NAME[l]+" ：</font><font color='"+n+"'>+"+o+"%</font>":"\n<font color='"+n+"'>"+EquipBasic.PROPERTY_NAME[l]+" ：</font><font color='"+n+"'>+"+o+"</font>");return h}var t=[],i=this._selectedItem.vo;this._vo=i;var n=FigureModel.getInstance().selectedpartnerVOInFashionWin,s=this._model.getFashionServerData(n.parnerID,i.template_id),a=e(i,EquipBasic.PROPERTY_INDEX,"#00D228");if(this._txtPro.htmlText=a,TimerManager.getInstance().remove(1e3,this.onTimer,this),null==s){var o="#00d228",r=GoodsListProxy.getInstance().findGoodNumber(i.goodsList[0].asset_id),h=GoodsListProxy.getInstance().getGoodsInfoByType(i.goodsList[0].asset_id);r<i.goodsList[0].value&&(o="#ff0000"),this._txtConName.htmlText="需要：<font color='"+o+"'>"+h.name+"X"+i.goodsList[0].value+"</font>",this._btnAct.visible=!0,this._btnWear.visible=!1,this._txtFpower.text="0"}else this._btnAct.visible=!1,this._btnWear.visible=!0,s.last_time<=0?this._txtConName.htmlText="有效时间：<font color='#00d228'>永久</font>":(this._resTime=s.last_time,TimerManager.getInstance().add(1e3,this.onTimer,this),this.onTimer()),this._txtFpower.text=GoodsListProxy.getInstance().getProVOFightValue(this._vo)+"";this.updateBtnWear(),this._figure&&this._figure.dispose(),this._figure||(this._figure=new BigFigure,this._figure.setTounchEnable(!1),this.figureMovieContainer.addChild(this._figure)),this._figure.changeBody(n.getCareer(),n.getSex(),n.getCloth()),this._figure.changeWeapon(n.getCareer(),n.getSex(),n.getWeapon()),this._figure.changeWing(n.getWingID()),this._type==FashionModel.ROLE?(this._figure.changeBody(n.getCareer(),n.getSex(),this._vo.template_id),this._figure.changeWeapon(n.getCareer(),n.getSex(),n.getWeapon()),this._figure.changeWing(n.getWingID())):this._type==FashionModel.WEAPON?(this._figure.changeBody(n.getCareer(),n.getSex(),n.getCloth()),this._figure.changeWeapon(n.getCareer(),n.getSex(),this._vo.template_id),this._figure.changeWing(n.getWingID())):this._type==FashionModel.WING&&(this._figure.changeBody(n.getCareer(),n.getSex(),n.getCloth()),this._figure.changeWeapon(n.getCareer(),n.getSex(),n.getWeapon()),this._figure.changeWing(this._vo.template_id))},n.updateBtnWear=function(){var e=FigureModel.getInstance().selectedpartnerVOInFashionWin,t=!1;this._type==FashionModel.ROLE?t=RoleModel.getInstance().hasFashionCloth(e.uid,this._vo.template_id):this._type==FashionModel.WEAPON?t=RoleModel.getInstance().hasFashionWeapon(e.uid,this._vo.template_id):this._type==FashionModel.WING&&(t=RoleModel.getInstance().hasFashionWing(e.uid,this._vo.template_id)),t?(this._btnWear.label=this.LABEL_GETOFF,this.updateBtnEffect(!1)):(this._btnWear.label=this.LABEL_WEAR,this.updateBtnEffect(!0))},n.updateBtnEffect=function(e){e?null==this.btnEffect&&(this.btnEffect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("anniu"),54,27,this._btnWear,80,!0)):this.btnEffect&&(this.btnEffect.dispose(),this.btnEffect=null)},n.onTimer=function(){this._resTime--,this._resTime>0?this._txtConName.text="有效期："+TimeUtil.getTime3(this._resTime):(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtConName.text="已过期")},t}(BaseView);egret.registerClass(FashionRoleView,"FashionRoleView");var FashionWindow=function(e){function t(){e.call(this),this._selectedTabIndex=0,this.skinName="resource/game_skins/fashion/FashionWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.tabBar.dataProvider=new eui.ArrayCollection(["角色","武器"]),this.setImageWindowTitle("title_fashion"),this.heroListTopBox=new HeroListTopBox,this.topContainer.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0,null==this._fashionRoleView&&(this._fashionRoleView=new FashionRoleView,this.addChild(this._fashionRoleView),this._viewContainer.addChild(this._fashionRoleView))},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.initPartner(),this._fashionRoleView.onOpenHandler(),this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),RedDotsModel.getInstance().addEventListener(RedDotsModel.FASHION_TAB_REDDOT,this.updateTabRedDot,this),RedDotsModel.getInstance().addEventListener(RedDotsModel.FASHION_HEROLIST_REDDOT,this.updateHeroListRedDot,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.onPackUpdate,this),FashionModel.getInstance().addEventListener(FashionEvtName.FASHION_UPDATE_INFO,this.onFashionUpdate,this),this.onPackUpdate(),this.onFashionUpdate()},n.dispose=function(){e.prototype.dispose.call(this),this.heroListTopBox&&(this.heroListTopBox.parent&&this.heroListTopBox.parent.removeChild(this.heroListTopBox),this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),RedDotsModel.getInstance().removeEventListener(RedDotsModel.FASHION_TAB_REDDOT,this.updateTabRedDot,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.onPackUpdate,this),FashionModel.getInstance().removeEventListener(FashionEvtName.FASHION_UPDATE_INFO,this.onFashionUpdate,this),RedDotsModel.getInstance().removeEventListener(RedDotsModel.FASHION_HEROLIST_REDDOT,this.updateHeroListRedDot,this),this.clearContent()},n.openView=function(e,t){if(t)this.isPop=!0;else{var i=!this.isPop;this.isPop=i}1==this.isPop&&(this.initPartner(),this.setTabIndex(e),this.onBarItemTap(null))},n.initPartner=function(){var e=FigureModel.getInstance().selectedPartnerVO;null==e&&(e=FigureModel.getInstance().selectedPartnerVO=this.heroListTopBox.roleListData[0]),FigureModel.getInstance().selectedpartnerVOInFashionWin=e,this.heroListTopBox.setIndex(this.heroListTopBox.getIndexByVO(e))},n.onBoxTap=function(e){e.data&&(FigureModel.getInstance().selectedpartnerVOInFashionWin=e.data)},n.onBarItemTap=function(e){this._fashionRoleView.setType(this.tabBar.selectedIndex)},n.setTabIndex=function(e){this._selectedTabIndex=e,this.tabBar.selectedIndex=this._selectedTabIndex},n.updateHeroListRedDot=function(e){this.heroListTopBox.updateFashionRedDots(e.data.index)},n.updateTabRedDot=function(e){var t=e.data.index,i=e.data.show;i?(this.tabBar.validateNow(),this.tabBar.getChildAt(t).showRedDot=!0):(this.tabBar.validateNow(),this.tabBar.getChildAt(t).showRedDot=!1)},n.onPackUpdate=function(){RedDotsModel.getInstance().calFashionTabRedDot(FashionModel.ROLE),RedDotsModel.getInstance().calFashionTabRedDot(FashionModel.WEAPON)},n.onFashionUpdate=function(){RedDotsModel.getInstance().calFashionTabRedDot(FashionModel.ROLE),RedDotsModel.getInstance().calFashionTabRedDot(FashionModel.WEAPON)},n.clearContent=function(){this._fashionRoleView&&(this._fashionRoleView.parent&&this._fashionRoleView.parent.removeChild(this._fashionRoleView),this._fashionRoleView.onCloseHandler(),this._fashionRoleView.dispose(),this._fashionRoleView=null)},t}(LayeroutWindow);egret.registerClass(FashionWindow,"FashionWindow");var FightFailWindow=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/fightResult/FightResultFailSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this._itemCach=new Array,this.resGroupName=GModuleResGroupName.FIGHTRESULT,this._isInit||this.setData(this._tmpList),this._isInit=!0,this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this._btnStone.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnStone,this),this._btnStrength.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnStrength,this),this._btnDragon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnDragon,this),this._btnLiLian.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnLiLian,this),this._btnRole.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGoto,this)},n.onClickBtn=function(e){this.closeView()},n.closeView=function(){this._leftTime=0,TimerManager.getInstance().remove(1e3,this.addDaoJiShi,this),this.clear(),this.isPop=!1,SceneModel.getInstance().isBossScene()||SceneModel.getInstance().isGuildFuben()||SceneModel.getInstance().isMaterialFuBen()||SceneModel.getInstance().isChanllengeFuBen()||SceneModel.getInstance().isMineFuBen()||SceneModel.getInstance().isUnKnowPalace()||SceneModel.getInstance().isShadowFuben()||SceneModel.getInstance().isWZZB()||SceneModel.getInstance().isKFBossScene()||SceneModel.getInstance().isEquipFuBen()?this.dispatchGlobalEvent(new ParamEvent(EventName.EXIT_SCENE)):MeetPlayerModel.getInstance().meetPlayerReward>0?MeetPlayerModel.getInstance().meetPlayerReward=0:this.dispatchGlobalEvent(new ParamEvent(EventName.MEET_BOSS_FINISH))},n.addDaoJiShi=function(){this._leftTime--,this._leftTime>=0?this._btn.label=StringUtil.substitute("退出({0}s)",this._leftTime):this.closeView()},n.clear=function(){for(var e,t=0;t<this._itemCach.length;t++)e=this._itemCach[t],this._goodsContainer.contains(e)&&this._goodsContainer.removeChild(e),e.dispose(),e=null;this._itemCach=[]},n.setData=function(e){if(this._tmpList=e,this._isInit){this.setType(e&&e.length>0);var i,n,s;if(e)for(var a=0;a<e.length;a++)i=new GoodsItem,n=e[a],s=GoodsListProxy.getInstance().getGoodsInfoByType(n.asset_id),s.num=n.value,i.data=s,i.x=a%4*120,i.y=120*Math.floor(a/4),this._itemCach.push(i),this._goodsContainer.addChild(i);TimerManager.getInstance().remove(1e3,this.addDaoJiShi,this),TimerManager.getInstance().add(1e3,this.addDaoJiShi,this),this._leftTime=t.TOTALTIME,this.addDaoJiShi();var o=RoleModel.getInstance().getPartnerList().length;o>=3?this._openPartnerGroup.visible=!1:this._openPartnerGroup.visible=!0}},n.setType=function(e){e?(this.contains(this._imageHead)||this.addChild(this._imageHead),this._allContainer.y=345):(this.contains(this._imageHead)&&this.removeChild(this._imageHead),this._allContainer.y=245)},n.onClickBtnStone=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_BUILD,1))},n.onClickBtnStrength=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_BUILD,0))
},n.onClickBtnDragon=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_OPEN_SPECIALEQUIPWINDOW,{state:!0,type:3}))},n.onClickBtnLiLian=function(){var e=new ParamEvent(ArtifactEvtName.ARTIFACT_OPEN_WINDOW);e.data={index:0,isOpen:!0},GameDispatcher.getInstance().dispatchEvent(e)},n.onClickGoto=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_OPEN_OPENPARTNERWINDOW))},n.dispose=function(){e.prototype.dispose.call(this),this.clear(),TimerManager.getInstance().remove(1e3,this.addDaoJiShi,this)},t.TOTALTIME=3,t}(LayeroutWindow);egret.registerClass(FightFailWindow,"FightFailWindow");var FightResultTips=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fightResult/FightResultTipsSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.touchChildren=!1,this.touchEnabled=!1,this.head=new PicLoader,this.head.x=52,this.head.y=31,this.addChildAt(this.head,0),this.head2=new PicLoader,this.head2.x=372,this.head2.y=31,this.addChildAt(this.head2,0),this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/other/fightResultTipBg.png"),this.addChildAt(this.imageBg,0),this.titleImg=new PicLoader,this.addChild(this.titleImg)},n.setData=function(e){this.head.load(UrlUtil.getHeadURL(1,e.kill_icon)),this.txtName.text=e.kill_name,this.head2.load(UrlUtil.getHeadURL(1,e.bekill_icon)),this.txtName2.text=e.bekill_name,this.showEffect(),e.double_kill>1?(this.txtCount.x=200,e.double_kill>9&&(this.txtCount.x=156),this.txtCount.text=e.double_kill.toString(),this.txtCount.visible=!0,this.titleImg.load("resource/assets/icon/other/fightResultTipTxt2.png"),this.titleImg.x=271,this.titleImg.y=60):(this.txtCount.visible=!1,this.titleImg.x=171,this.titleImg.y=53,this.titleImg.load("resource/assets/icon/other/fightResultTipTxt.png"))},n.showEffect=function(){EffectManager.getInstance().showEffect(UrlUtil.getSkillEffectURL("xue"),420,88,this.effectGroup,80)},n.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null),this.head&&(this.head.dispose(),this.head=null),this.head2&&(this.head2.dispose(),this.head2=null),this.titleImg&&(this.titleImg.dispose(),this.titleImg=null)},t}(BaseView);egret.registerClass(FightResultTips,"FightResultTips");var FightSuccessWindow=function(e){function t(){e.call(this,"FightSuccessWindow"),this.skinName="resource/game_skins/fightResult/FightResultSuccess.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._itemCach=new Array,this.resGroupName=GModuleResGroupName.FIGHTRESULT,this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._isInit||(this._isInit=!0),this._tmpList&&this.setData(this._tmpList)},n.onClick=function(e){this.closeView()},n.setData=function(e){if(this._tmpList=e,this._isInit){for(var i,n,s,a=0;a<e.length;a++)i=new GoodsItem,n=e[a],s=GoodsListProxy.getInstance().getGoodsInfoByType(n.asset_id),s.num=n.value,i.data=s,i.x=a%4*120,i.y=120*Math.floor(a/4),this._itemCach.push(i),this._goodsContainer.addChild(i);TimerManager.getInstance().add(1e3,this.addDaoJiShi,this),this._leftTime=t.TOTALTIME,this.addDaoJiShi()}},n.showEffect=function(e,i){var n;i==t.SHADOW?n=UrlUtil.getFigureRingURL(e):i==t.WING&&(n=UrlUtil.getFigureWingURL(e)+"stand"),this.disposeEffect(),this._effect=EffectManager.getInstance().showEffect(n,300,480,this,70,!0),TimerManager.getInstance().add(1e3,this.addDaoJiShi,this),this._leftTime=t.TOTALTIME,this.addDaoJiShi()},n.disposeEffect=function(){this._effect&&(this._effect.dispose(),this._effect=null)},n.addDaoJiShi=function(){this._leftTime--,this._leftTime>=0?this._btn.label=StringUtil.substitute("领取奖励({0}s)",this._leftTime):this.closeView()},n.closeView=function(){this._leftTime=0,TimerManager.getInstance().remove(1e3,this.addDaoJiShi,this),this.clear(),this.isPop=!1,SceneModel.getInstance().isHookWaveBoss()||SceneModel.getInstance().isMineFuBen()?this.dispatchGlobalEvent(new ParamEvent(EventName.EXIT_SCENE)):SceneModel.getInstance().toFightBossMeet?this.dispatchGlobalEvent(new ParamEvent(EventName.MEET_BOSS_FINISH)):SceneModel.getInstance().isPersonBoss()?(this.dispatchGlobalEvent(new ParamEvent(BossEvtName.BOSS_CCMD13111,BossModel.getInstance().currentPersonBoss)),this.dispatchGlobalEvent(new ParamEvent(EventName.EXIT_SCENE))):SceneModel.getInstance().isChanllengeFuBen()?(this.dispatchGlobalEvent(new ParamEvent(FubenEvtName.FUBEN_CCMD14502)),this.dispatchGlobalEvent(new ParamEvent(EventName.EXIT_SCENE))):SceneModel.getInstance().isMaterialFuBen()?(this.dispatchGlobalEvent(new ParamEvent(FubenEvtName.FUBEN_CCMD13201,FubenModel.getInstance().fuBenID)),this.dispatchGlobalEvent(new ParamEvent(EventName.EXIT_SCENE))):SceneModel.getInstance().isPeopleBoss()||SceneModel.getInstance().isRoundBoss()?this.dispatchGlobalEvent(new ParamEvent(EventName.EXIT_SCENE)):SceneModel.getInstance().isGuildFuben()?(this.dispatchGlobalEvent(new ParamEvent(GuildEvtName.CCMD16311)),this.dispatchGlobalEvent(new ParamEvent(EventName.EXIT_SCENE))):SceneModel.getInstance().isUnKnowPalace()?this.dispatchGlobalEvent(new ParamEvent(EventName.EXIT_SCENE)):SceneModel.getInstance().isEquipFuBen()?(this.dispatchGlobalEvent(new ParamEvent(FubenEvtName.CMD21001)),this.dispatchGlobalEvent(new ParamEvent(EventName.EXIT_SCENE))):SceneModel.getInstance().isShadowFuben()||SceneModel.getInstance().isWZZB()||SceneModel.getInstance().isGuildBoss()||SceneModel.getInstance().isKFBossScene()||SceneModel.getInstance().isBossHome()||SceneModel.getInstance().isEliteBoss()||SceneModel.getInstance().isWildBoss()?this.dispatchGlobalEvent(new ParamEvent(EventName.EXIT_SCENE)):MeetPlayerModel.getInstance().meetPlayerReward>0&&(MeetPlayerModel.getInstance().meetPlayerReward=0)},n.clear=function(){for(var e,t=0;t<this._itemCach.length;t++)e=this._itemCach[t],this._goodsContainer.contains(e)&&this._goodsContainer.removeChild(e),e.dispose(),e=null;this._itemCach=[]},n.dispose=function(){e.prototype.dispose.call(this),this.clear(),TimerManager.getInstance().remove(1e3,this.addDaoJiShi,this)},t.TOTALTIME=3,t.SHADOW=1,t.WING=2,t}(LayeroutWindow);egret.registerClass(FightSuccessWindow,"FightSuccessWindow");var OfflineRewardWindow=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/fightResult/OfflineRewardViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.FIGHTRESULT,this.setImageTitle("title_offline")},n.updateData=function(e){this.txtTime.text=TimeUtil.getTime3(e.offline_time),this.txtCon.text=e.coin.toString(),this.txtCon2.text=e.coin_month.toString(),this.txtCon3.text=e.coin_artifact.toString(),this.txtExt.text=e.exp.toString(),this.txtExt2.text=e.exp_month.toString(),this.txtExt3.text=e.exp_artifact.toString(),this.txtCount.text=e.equip_count.toString(),this.txtBag.htmlText=e.sell_count>0?"背包不足，自动出售<font color='#ffd200'> "+e.sell_count+"</font>件装备":""},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_offline")},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},t}(LayeroutWindow);egret.registerClass(OfflineRewardWindow,"OfflineRewardWindow");var SpeedPKWindow=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/fightResult/SpeedPKViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.FIGHTRESULT,this.setImageTitle("title_speedPK"),this._isInit||(this._isInit=!0,this.updateData()),ConfigManager.isTencent()?(this._txtShare.htmlText="<font color='#00ff00'><u><a href='event:''>分享可获得额外次数，前往分享</a></u></font>",this._txtShare.addEventListener(egret.TextEvent.LINK,this.onShareLink,this),this._txtShareFree.htmlText="<font color='#00ff00'><u><a href='event:''>分享可获得免费加速一次</a></u></font>",this._txtShareFree.addEventListener(egret.TextEvent.LINK,this.onShareFreeLink,this)):(this._txtShare&&this._txtShare.parent&&this._txtShare.parent.removeChild(this._txtShare),this._txtShareFree&&this._txtShareFree.parent&&this._txtShareFree.parent.removeChild(this._txtShareFree))},n.showTxtShare=function(e){var t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_50);0==t?this._txtShare.visible=e:this._txtShare.visible=!1},n.onShareLink=function(e){QQManager.getInstance().shareForSpeed()},n.onShareFreeLink=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FuLiEvtName.SHOW_SHARENEW_VIEW,ShareNewWindow.SPEED))},n.updateData=function(e){if(void 0===e&&(e=null),this._isInit){if(e)this.contentGroup.visible=!1,this.contentGroup2.visible=!0;else{this.txtCost.text=SingleModel.getInstance().getSingVO(SingleModel.KEY_42).value;var t=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_44).value)+VipModel.getInstance().getVipVoByLv().vip_speed;if(ConfigManager.isTencent()){t+=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_50);var i=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_13002),n=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_13003);i>0?(this._txtShareFree.visible=!1,0==n?this.txtCost.text="0":this.txtCost.text=SingleModel.getInstance().getSingVO(SingleModel.KEY_42).value):this._txtShareFree.visible=!0}var s=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_4);this.txtDay.text=t-s+"次",s>=t?(this.btnGet.enabled=!1,this.showTxtShare(!0)):(this.btnGet.enabled=!0,this.showTxtShare(!1));var a=VipModel.getInstance().getVIPLevel()+1;10>=a?this.txtVip.text="成为VIP"+a+"可额外获得"+VipModel.getInstance().getVipVoByLv(a).vip_speed+"次加速战斗":this.txtVip.text="";var o=ArtifactModel.getInstance().checkArrifactIsActive(5),r=ArtifactModel.getInstance().checkArrifactIsActive(4),h=ArtifactModel.getInstance().checkArrifactIsActive(6),l=0;r&&(l+=.05),h&&(l+=.05),e=new SCMD13000,e.coin=3*SceneModel.getInstance().getWaveCoin();var d=0;VipModel.getInstance().isMonth&&(d+=.1),VipModel.getInstance().isLife&&(d+=.2),e.coin_month=Math.floor(e.coin*d),e.coin_artifact=Math.floor(e.coin*l),e.exp=3*SceneModel.getInstance().getWaveExp(),e.exp_month=Math.floor(e.exp*d),e.exp_artifact=Math.floor(e.exp*(o?.05:0)),e.equip_count=100,this.contentGroup.visible=!0,this.contentGroup2.visible=!1}this.txtCon.text=e.coin.toString(),this.txtCon2.text=e.coin_month.toString(),this.txtCon3.text=e.coin_artifact.toString(),this.txtExt.text=e.exp.toString(),this.txtExt2.text=e.exp_month.toString(),this.txtExt3.text=e.exp_artifact.toString(),this.txtCount.text=e.equip_count.toString(),this.txtBag.htmlText=e.sell_count>0?"由于背包不足，自动出售<font color='#ffd200'> "+e.sell_count+"</font>件装备":""}},n.onGetClick=function(){RoleModel.getInstance().CheckGold(Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_42).value))&&(this.btnGet.enabled=!1,EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("jiasu"),310,230,this.effectGroup,200),this._timeId>0&&clearTimeout(this._timeId),this._timeId=setTimeout(function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.REQUEST_SPEED_PK))},2e3))},n.onOkClick=function(){this.updateData()},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_speedPK")},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.updateDailyData=function(e){this.updateData()},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkClick,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.addGlobalEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.updateDailyData,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.btnOk.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkClick,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.removeGlobalEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.updateDailyData,this)},t}(LayeroutWindow);egret.registerClass(SpeedPKWindow,"SpeedPKWindow");var FigureEquipOtherView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/figure/FigureEquipOtherViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){function e(e,t){return Number(e.name)-Number(t.name)}this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this);var t;this._itemArr=[],this._itemSpecialArr=[],this._itemDominateArr=[];for(var i=0;i<this.equipItemContainer.numChildren;i++)t=this.equipItemContainer.getChildAt(i),t.showLv(!1),t.setImageBottomType(Number(t.name)),-1!=EquipmentVO.SPECIALEQUIP_GRID.indexOf(Number(t.name))?(t.isSpecial=!0,t.showLv(!0),this._itemSpecialArr.push(t)):-1!=EquipmentVO.DOMINATEEQUIP_GRID.indexOf(Number(t.name))?(t.isSpecial=!0,t.showLv(!0),t.showName("未激活"),this._itemDominateArr.push(t)):Number(t.name)==EquipmentVO.EQUIP_PART9?this._itemArr.push(t):(t.isWeared=!0,this._itemArr.push(t));this._itemArr.sort(e),this._itemSpecialArr.sort(e),this._itemDominateArr.sort(e)},n.setData=function(e){this._data=e,this._txtFpower.text=e.power.toString(),this.updateFigure(),this.updateSpecialEquipHandler(),this.updateDominateEquipHandler(),this.onChangeEquipListHandler()},n.updateFigure=function(){if(this._data){var e=AppearanceUtil.changeAppListToVo(this._data.appearance);this.figureMovie&&this.figureMovie.dispose(),this.figureMovie||(this.figureMovie=new BigFigure,this.figureMovie.setTounchEnable(!1),this.figureMovieContainer.addChild(this.figureMovie)),this.figureMovie.changeBody(this._data.career,this._data.sex,e.cloth),this.figureMovie.changeWeapon(this._data.career,this._data.sex,e.weapon),this.figureMovie.changeWing(e.wing)}},n.updateSpecialEquipHandler=function(){for(var e,t,i,n,s,a=this._data.spec_equips,o=this._itemSpecialArr.length,r=0;o>r;r++){e=this._itemSpecialArr[r],n=Number(e.name.substr(2,1)),s=FigureModel.specialEquipDic[r],t=GoodsListProxy.getInstance().getEquipInfoByType(s),t.type=r+1,i=null;for(var h=0;h<a.length;h++)if(a[h].type==t.type){i=a[h];break}i?(t.level=i.level,e.data=t,e.setSpecialEquipLvl(t.level)):e.data=null}},n.updateDominateEquipHandler=function(){for(var e,t,i,n,s,a,o=this._data.dominate_list,r=this._itemDominateArr.length,h=0;r>h;h++){e=this._itemDominateArr[h],s=Number(e.name.substr(2,1)),a=DominateModel.dominateEquipDic[h],t=GoodsListProxy.getInstance().getEquipInfoByType(a),t.type=h+1,n=DominateModel.getInstance().getDominateVO(1,s),i=null;for(var l=0;l<o.length;l++)if(o[l].type_id==t.type){i=o[l];break}i?(e.data=t,e.setSpecialEquipLvl(i.star),e.showName(t.name)):(e.data=null,e.showName(n.player_round+"转激活"))}},n.onChangeEquipListHandler=function(){for(var e,t,i,n=this._data.rank_equips,s=this._data.forge_streng,a=this._itemArr.length,o=1;a>=o;o++){e=this._itemArr[o-1],t=null,i=0;for(var r=0;r<n.length;r++)if(n[r].slot==o){t=GoodsListProxy.getInstance().getGoodsInfoByType(n[r].item_id),t.slot=n[r].slot,t.partner_id=this._data.partner_id,t.quality==GoodsType.QUALITY_5||t.quality==GoodsType.QUALITY_6?t.rand_attr=Math.floor(n[r].rand_attr/100):t.rand_attr=n[r].rand_attr;break}for(var h=0;h<s.length;h++)if(s[h].type==o){i=s[h].level;break}t?(e.strenthLvl=i,e.data=t,e.showLv(!0),Number(e.name)==EquipmentVO.EQUIP_PART9&&e.showName(t.name)):e&&e.data&&(e.data=null)}},n.dispose=function(){e.prototype.dispose.call(this),this.figureMovie&&(this.figureMovie.dispose(),this.figureMovie=null);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t&&(t.parent&&t.parent.removeChild(t),t.data&&(t.data=null),t.dispose(),t=null);for(var i=0;i<this._itemSpecialArr.length;i++)t=this._itemSpecialArr[i],t&&(t.parent&&t.parent.removeChild(t),t.data&&(t.data=null),t.dispose(),t=null);for(var i=0;i<this._itemDominateArr.length;i++)t=this._itemDominateArr[i],t&&(t.parent&&t.parent.removeChild(t),t.data&&(t.data=null),t.dispose(),t=null);this._itemArr=null,this._itemSpecialArr=null,this._itemDominateArr=null},t}(BaseView);egret.registerClass(FigureEquipOtherView,"FigureEquipOtherView");var FigureEquipView=function(e){function t(){e.call(this),this._selectedPartnerID=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/figure/FigureEquipViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){function e(e,t){return Number(e.name)-Number(t.name)}function t(e){var t;"103"==e?t=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_15):"104"==e&&(t=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_16)),t?HuoDongDailyModel.getInstance().kaiFuDay>=t.open_day?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_OPEN_SPECIALEQUIPWINDOW,{state:!0,type:Number(e.substr(2,1))})):Message.show("开服第"+t.open_day+"天开启"):GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FigureEvtName.FIGURE_OPEN_SPECIALEQUIPWINDOW,{state:!0,type:Number(e.substr(2,1))}))}function i(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(DominateEvtName.DOMINATE_OPEN_WINDOW,{index:0,state:!0,type:Number(e.substr(2,1))}))}this.figureMovieContainer.touchEnabled=!1,this._txtLink.htmlText="<u><a href = 'event:2'>查看属性</a></u>";var n;this._itemArr=[],this._itemSpecialArr=[],this._itemDominateArr=[];for(var s=0;s<this.equipItemContainer.numChildren;s++)n=this.equipItemContainer.getChildAt(s),n.showLv(!1),n.setImageBottomType(Number(n.name)),-1!=EquipmentVO.SPECIALEQUIP_GRID.indexOf(Number(n.name))?(n.isSpecial=!0,n.showLv(!0),n.addCallBack(function(e){t(e)},n.name),this._itemSpecialArr.push(n)):-1!=EquipmentVO.DOMINATEEQUIP_GRID.indexOf(Number(n.name))?(n.isSpecial=!0,n.showLv(!0),n.showName("未激活"),n.addCallBack(function(e){i(e)},n.name),this._itemDominateArr.push(n)):Number(n.name)==EquipmentVO.EQUIP_PART9?this._itemArr.push(n):(n.isWeared=!0,this._itemArr.push(n));this._itemArr.sort(e),this._itemSpecialArr.sort(e),this._itemDominateArr.sort(e)},n.onOpenHandler=function(){this._selectedPartnerID=FigureModel.getInstance().selectedPartnerVO.parnerID,this.updateFigure(),ForgemindModel.getInstance().addEventListener(ForgemindEvtName.FORGEMIND_UPDATE_INFO,this.updateForgmindHandler,this),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_UPDATE_SPECIALEQUIP,this.updateSpecialEquipHandler,this),DominateModel.getInstance().addEventListener(DominateEvtName.DOMINATE_UPDATE_INFO,this.updateDominateEquipHandler,this),this.addGlobalEventListener(EventName.EQUIP_LIST_CHANGE,this.onChangeEquipListHandler,this),FashionModel.getInstance().addEventListener(FashionEvtName.FASHION_UPDATE_INFO,this.updateFashionHandler,this),this.onChangeEquipListHandler(null),GameDispatcher.getInstance().addEventListener(PlayerBaseVO.CHANGE_CLOTH,this.updateFigure,this),this.requestSpeicalEquip(),this.requestForgmind(),this.requestDominate(),this.requestFashion(),this.dispatchGlobalEvent(new ParamEvent(BuildEvtName.BUILD_CCMD11800,{id:FigureModel.getInstance().selectedPartnerVO.parnerID})),this.dispatchGlobalEvent(new ParamEvent(BuildEvtName.BUILD_CCMD11810,{id:FigureModel.getInstance().selectedPartnerVO.parnerID})),this.dispatchGlobalEvent(new ParamEvent(BuildEvtName.BUILD_CCMD11820,{id:FigureModel.getInstance().selectedPartnerVO.parnerID})),this._btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeButtonHandler,this),this._btnForgemind.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onForgemindHandler,this),this._btnChenghao.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCHenghaoHandler,this),this._btnFashion.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFashionHandler,this),this._btnOrangeSuit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOrangeSuitHandler,this),this._txtLink.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),GameDispatcher.getInstance().addEventListener(PlayerBaseVO.CHANGE_FIGHTVALUE,this.updateFigtPowerHandler,this),this.addGlobalEventListener(BuildEvtName.BUILD_CCMD11800_UPDATE,this.updateStrengthHandler,this),GameDispatcher.getInstance().addEventListener(AwakeEquipEvtName.AWAKEEQUIPCOMPOSE_SUCCESS,this.onSucessHandler,this),this.onSucessHandler(),this.updateFigtPowerHandler()},n.onCloseHandler=function(){this.dispose();for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e&&(e.parent&&e.parent.removeChild(e),e.data&&(e.data=null),e.dispose(),e=null);for(var t=0;t<this._itemSpecialArr.length;t++)e=this._itemSpecialArr[t],e&&(e.parent&&e.parent.removeChild(e),e.data&&(e.data=null),e.dispose(),e=null);for(var t=0;t<this._itemDominateArr.length;t++)e=this._itemDominateArr[t],e&&(e.parent&&e.parent.removeChild(e),e.data&&(e.data=null),e.dispose(),e=null);this._itemArr=null,this._itemSpecialArr=null,this._itemDominateArr=null,ForgemindModel.getInstance().removeEventListener(ForgemindEvtName.FORGEMIND_UPDATE_INFO,this.updateForgmindHandler,this),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_UPDATE_SPECIALEQUIP,this.updateSpecialEquipHandler,this),DominateModel.getInstance().removeEventListener(DominateEvtName.DOMINATE_UPDATE_INFO,this.updateDominateEquipHandler,this),this.removeGlobalEventListener(EventName.EQUIP_LIST_CHANGE,this.onChangeEquipListHandler,this),FashionModel.getInstance().removeEventListener(FashionEvtName.FASHION_UPDATE_INFO,this.updateFashionHandler,this),GameDispatcher.getInstance().removeEventListener(PlayerBaseVO.CHANGE_CLOTH,this.updateFigure,this),this._btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeButtonHandler,this),this._btnForgemind.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onForgemindHandler,this),this._btnChenghao.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCHenghaoHandler,this),this._btnFashion.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onFashionHandler,this),this._btnOrangeSuit.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOrangeSuitHandler,this),this._txtLink.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),GameDispatcher.getInstance().removeEventListener(PlayerBaseVO.CHANGE_FIGHTVALUE,this.updateFigtPowerHandler,this),this.removeGlobalEventListener(BuildEvtName.BUILD_CCMD11800_UPDATE,this.updateStrengthHandler,this),GameDispatcher.getInstance().removeEventListener(AwakeEquipEvtName.AWAKEEQUIPCOMPOSE_SUCCESS,this.onSucessHandler,this)},n.updateFigtPowerHandler=function(){var e=FigureModel.getInstance().selectedPartnerVO.uid,t=RoleModel.getInstance().getPartnerInfo(e);this._txtFpower.text=t.getFightValue()+""},n.updateFigure=function(){var e=FigureModel.getInstance().selectedPartnerVO.uid,t=RoleModel.getInstance().getPartnerInfo(e);this.figureMovie&&this.figureMovie.dispose(),this.figureMovie||(this.figureMovie=new BigFigure,this.figureMovie.setTounchEnable(!1),this.figureMovieContainer.addChild(this.figureMovie)),this.figureMovie.changeBody(t.getCareer(),t.getSex(),t.getCloth()),this.figureMovie.changeWeapon(t.getCareer(),t.getSex(),t.getWeapon()),this.figureMovie.changeWing(t.getWingID())},n.dispose=function(){this.figureMovie&&(this.figureMovie.parent.removeChild(this.figureMovie),this.figureMovie.dispose(),this.figureMovie=null)},n.onTxtLinkHandler=function(e){for(var t,i=0,n=RoleModel.getInstance().getPartnerList(),s=0;s<n.length;s++)if(t=n[s],t.parnerID==FigureModel.getInstance().selectedPartnerVO.parnerID){i=s;break}var a,o=[];for(var r in n)a={},a.career=n[r].getCareer(),a.propertyVO=n[r].getPropertyVo(),o.push(a);var h=new ParamEvent(FigureEvtName.FIGURE_OPEN_PARTNERPROPERTYVIEW);h.data={index:i,dataList:o},this.dispatchGlobalEvent(h)},n.onCHenghaoHandler=function(){var e=new ParamEvent(ChenghaoEvtName.CHENGHAO_OPEN_WINDOW);this.dispatchGlobalEvent(e)},n.onFashionHandler=function(){this.dispatchGlobalEvent(new ParamEvent(FashionEvtName.OPEN_WINDOW))},n.onForgemindHandler=function(){var e=new ParamEvent(ForgemindEvtName.FORGEMIND_OPEN_WINDOW);e.data={state:!0},this.dispatchGlobalEvent(e)},n.onOrangeSuitHandler=function(){var e=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.ORANGESUIT);if(e&&RoleModel.getInstance().getRoleCommon().level<e.open_level)return void Message.show(e.open_level+"级开启神装功能");var t=new ParamEvent(FigureEvtName.ORANGE_OPEN);t.data={index:0,isOpen:!0},this.dispatchGlobalEvent(t)},n.requestSpeicalEquip=function(){var e=new ParamEvent(FigureEvtName.CCMD11100);e.data={id:FigureModel.getInstance().selectedPartnerVO.parnerID},this.dispatchGlobalEvent(e)},n.requestForgmind=function(){var e=new ParamEvent(ForgemindEvtName.CCMD12200),t=FigureModel.getInstance().selectedPartnerVO;e.data={id:t.parnerID},this.dispatchGlobalEvent(e)},n.requestDominate=function(){var e=new ParamEvent(DominateEvtName.CCMD12400),t=FigureModel.getInstance().selectedPartnerVO;e.data={id:t.parnerID},this.dispatchGlobalEvent(e)},n.requestFashion=function(){var e=new ParamEvent(FashionEvtName.CCMD13600),t=FigureModel.getInstance().selectedPartnerVO;e.data={id:t.parnerID},this.dispatchGlobalEvent(e)},n.onChangeButtonHandler=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.GUILE_NEXT_FIGURE_EQUIP));var e=GoodsListProxy.getInstance().checkCanWearEquip(FigureModel.getInstance().selectedPartnerVO);if(!e)return void Message.show("没有装备可以换");var t=new ParamEvent(EventName.REQUEST_CHANGEEQUIP),i=FigureModel.getInstance().selectedPartnerVO;t.data={pId:i.parnerID},this.dispatchGlobalEvent(t);for(var n,s,a=GoodsListProxy.getInstance().equipWearSlotList,o=0;o<a.length;o++)s=a[o],n=this._itemArr[s.slot-1],EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("shark"),44,40,n,120,!1)},n.onPartnerChangeHandler=function(){this._selectedPartnerID=FigureModel.getInstance().selectedPartnerVO.parnerID,this.updateFigure(),this.onChangeEquipListHandler(null),this.updateSpecialEquipHandler(),this.updateDominateEquipHandler(),this.updateFashionHandler(),this.requestSpeicalEquip(),this.requestForgmind(),this.requestDominate(),this.requestFashion(),this.updateFigtPowerHandler(),this.updateForgmindHandler()},n.updateFashionHandler=function(){var e=FigureModel.getInstance().selectedPartnerVO;this._btnFashion.showRedDot=FashionModel.getInstance().checkFashionCanActiveByPartnerAndType(e,0)},n.updateForgmindHandler=function(){if(this._selectedPartnerID==FigureModel.getInstance().selectedPartnerVO.parnerID){for(var e,t,i=0;i<this._itemArr.length;i++)e=this._itemArr[i],Number(e.name)>8||(t=ForgemindModel.getInstance().isActived(Number(e.name),FigureModel.getInstance().selectedPartnerVO.parnerID),t?e.showForgmineBg(!0):e.showForgmineBg(!1));this._btnForgemind.showRedDot=ForgemindModel.getInstance().getForemindCanLevelupOrActive()}},n.updateSpecialEquipHandler=function(){if(this._selectedPartnerID==FigureModel.getInstance().selectedPartnerVO.parnerID){for(var e,t,i,n,s,a=this._itemSpecialArr.length,o=PlayerBaseVO.makeUid(null,FigureModel.getInstance().selectedPartnerVO.parnerID),r=RoleModel.getInstance().getPartnerInfo(o),h=0;a>h;h++)e=this._itemSpecialArr[h],n=Number(e.name.substr(2,1)),s=FigureModel.specialEquipDic[h],t=GoodsListProxy.getInstance().getEquipInfoByType(s),t.type=h+1,i=FigureModel.getInstance().getSpecialEquipServerData(r.parnerID,t.type),i&&(t.level=i.level),i?(e.data=t,e.setSpecialEquipLvl(t.level)):e.data=null,FigureModel.getInstance().getSpecialEquipSingleCanUpOrActive(r,n)?e.showRedDot=!0:e.showRedDot=!1;RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.FIGURE_HEROLIST_REDDOT,{index:0}))}},n.updateDominateEquipHandler=function(){if(this._selectedPartnerID==FigureModel.getInstance().selectedPartnerVO.parnerID){for(var e,t,i,n,s,a,o=this._itemDominateArr.length,r=PlayerBaseVO.makeUid(null,FigureModel.getInstance().selectedPartnerVO.parnerID),h=RoleModel.getInstance().getPartnerInfo(r),l=0;o>l;l++)e=this._itemDominateArr[l],s=Number(e.name.substr(2,1)),a=DominateModel.dominateEquipDic[l],t=GoodsListProxy.getInstance().getEquipInfoByType(a),t.type=l+1,n=DominateModel.getInstance().getDominateVO(1,s),i=DominateModel.getInstance().getDominateEquipServerData(h.parnerID,t.type),i?(e.data=t,e.setSpecialEquipLvl(i.star),e.showName(t.name)):(e.data=null,e.showName(n.player_round+"转激活")),DominateModel.getInstance().getDominateSingleCanUpLevelByType(h,s)||DominateModel.getInstance().getDominateSingleCanUpStarByType(h,s)?e.showRedDot=!0:e.showRedDot=!1;RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.FIGURE_HEROLIST_REDDOT,{index:0}))}},n.onChangeEquipListHandler=function(e){if(this._selectedPartnerID==FigureModel.getInstance().selectedPartnerVO.parnerID){var t=PlayerBaseVO.makeUid(null,FigureModel.getInstance().selectedPartnerVO.parnerID),i=RoleModel.getInstance().getPartnerInfo(t),n=GoodsListProxy.getInstance().getEquipPartnerByPartnerId(i.parnerID);if(null!=n){for(var s,a,o=this._itemArr.length,r=0,h=0;o>h;h++)s=this._itemArr[h],a=n["the_"+(h+1)+"_Grid"],a?(r=BuildModel.getInstance().getStrengLevelByType(a.slot,FigureModel.getInstance().selectedPartnerVO.parnerID),s.strenthLvl=r,s.data=a,s.showLv(!0),Number(s.name)==EquipmentVO.EQUIP_PART9&&s.showName(a.name)):s&&s.data&&(s.data=null);this._btnChange.showRedDot=FigureModel.getInstance().getEquipsCanWearByPartner(i),this._btnOrangeSuit.showRedDot=RedDotsModel.getInstance().calOrangesuitTabRedDot()||AwakeModel.getInstance().checkCanComposeAwakeEquip()||AwakeModel.getInstance().checkAwakeEquipSoulCanUp()||RedDotsModel.getInstance().calLegendsuitTabRedDot()||FigureModel.getInstance().getEquipsCanWear(!1,!1,!0),RedDotsModel.getInstance().calRoleTabRedDot(),RedDotsModel.getInstance().calWingTabRedDot(),RedDotsModel.getInstance().calMeridianTabRedDot(),RedDotsModel.getInstance().calRoundTabRedDot(),RedDotsModel.getInstance().calShenlianTabRedDot(),RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.FIGURE_HEROLIST_REDDOT,{index:0}))}}},n.updateStrengthHandler=function(){for(var e,t=this._itemArr.length,i=0,n=0;t>n;n++)e=this._itemArr[n],e.data&&(i=BuildModel.getInstance().getStrengLevelByType(e.data.slot,FigureModel.getInstance().selectedPartnerVO.parnerID),e.strenthLvl=i,e.setStrenthLvl(i))},n.onSucessHandler=function(){this._btnOrangeSuit.showRedDot=RedDotsModel.getInstance().calOrangesuitTabRedDot()||AwakeModel.getInstance().checkCanComposeAwakeEquip()||RedDotsModel.getInstance().calLegendsuitTabRedDot()||FigureModel.getInstance().getEquipsCanWear(!1,!1,!0)},n.getBtnChange=function(){return this._btnChange},t}(BaseView);egret.registerClass(FigureEquipView,"FigureEquipView");
var FigureOtherWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/figure/FigureOtherViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.tabBar.dataProvider=new eui.ArrayCollection(["角色"]),this.heroListTopBox=new HeroListTopBox(1),this.topContainer.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0,this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.setSelectIndex(),this.txtName.text=RankModel.getInstance().getOtherRoleData().name,this.setData(this.heroListTopBox.getCurItemVo())},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.heroListTopBox&&(this.heroListTopBox.parent&&this.heroListTopBox.parent.removeChild(this.heroListTopBox),this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null),this._equipView&&(this._equipView.parent&&this._equipView.parent.removeChild(this._equipView),this._equipView.dispose(),this._equipView=null)},n.setSelectIndex=function(e){switch(void 0===e&&(e=0),this.tabBar.visible=!0,this.tabBar.selectedIndex=e,e){case 0:this._equipView||(this._equipView=new FigureEquipOtherView),this.container.addChild(this._equipView)}},n.onBoxTap=function(e){if(e.data){var t=e.data;this.setData(t)}},n.setData=function(e){this._equipView&&this._equipView.setData(RankModel.getInstance().getOtherRoleByParnerID(e.parnerID))},n.onBarItemTap=function(e){},t}(LayeroutWindow);egret.registerClass(FigureOtherWindow,"FigureOtherWindow");var FigureWindow=function(e){function t(){e.call(this),this._selectedTabIndex=0,this._isNovice=!0,this.skinName="resource/game_skins/figure/FigureViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.FIGURE,this.tabBar.dataProvider=new eui.ArrayCollection(["角色","羽翼","转生","经脉","神炼"]),this.tabBar.x=30,this.tabBar.y=790,this.heroListTopBox=new HeroListTopBox,this.topContainer.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0,FigureModel.getInstance().selectedPartnerVO=this.heroListTopBox.roleListData[0]},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_figure")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.guideBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this),GameDispatcher.getInstance().addEventListener(EventName.GUILE_NEXT_FIGURE_EQUIP,this.nextGuile,this),this.heroListTopBox.setIndex(0),RedDotsModel.getInstance().addEventListener(RedDotsModel.FIGURE_TAB_REDDOT,this.updateTabRedDot,this),RedDotsModel.getInstance().addEventListener(RedDotsModel.FIGURE_HEROLIST_REDDOT,this.updateHeroListRedDot,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this)},n.onCloseHandler=function(){this.clearContent(),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.heroListTopBox&&(this.heroListTopBox.parent&&this.heroListTopBox.parent.removeChild(this.heroListTopBox),this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null),this.guideBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this),GameDispatcher.getInstance().removeEventListener(EventName.GUILE_NEXT_FIGURE_EQUIP,this.nextGuile,this),RedDotsModel.getInstance().removeEventListener(RedDotsModel.FIGURE_TAB_REDDOT,this.updateTabRedDot,this),RedDotsModel.getInstance().removeEventListener(RedDotsModel.FIGURE_HEROLIST_REDDOT,this.updateHeroListRedDot,this),this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),e.prototype.onCloseHandler.call(this)},n.onHelp=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.SHENLIAN))},n.openView=function(e,t){if(t)this.isPop=!0;else{var i=!this.isPop;this.isPop=i}1==this.isPop&&(this.setTabIndex(e),this.onBarItemTap(null))},n.onBoxTap=function(e){e.data&&(FigureModel.getInstance().selectedPartnerVO=e.data)},n.onBarItemTap=function(e){var t,i=0;if(null==e||e.itemIndex!=this._selectedTabIndex){if(e&&(this._selectedTabIndex=e.itemIndex),1==this.tabBar.selectedIndex||2==this.tabBar.selectedIndex||3==this.tabBar.selectedIndex){if(1==this.tabBar.selectedIndex?i=FunctionOpenModel.WING:2==this.tabBar.selectedIndex?i=FunctionOpenModel.ROUND:3==this.tabBar.selectedIndex&&(i=FunctionOpenModel.MERIDIAN),t=FunctionOpenModel.getInstance().getFunctionOpenVO(i),RoleModel.getInstance().getRoleCommon().level<t.open_level)return void Message.show(t.open_level+"级开启"+t.name+"功能")}else if(4==this.tabBar.selectedIndex&&!FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_51))return;switch(this.clearContent(),0==this.heroListTopBox.visible&&(this.heroListTopBox.visible=!0),this.tabBar.selectedIndex){case 0:this.figureEquipView||(this.figureEquipView=new FigureEquipView,this.container.addChild(this.figureEquipView),this.figureEquipView.onOpenHandler(),this.setImageTitle("title_figure")),this.btnHelp.visible=!1,this.updateGuide();break;case 1:this.wingView||(this.wingView=new WingView,this.container.addChild(this.wingView)),this.wingView.onOpenHandler(),this.setImageTitle("title_wing"),this.btnHelp.visible=!1;break;case 2:this.zhuanShengView||(this.zhuanShengView=new ZhuanShengView,this.container.addChild(this.zhuanShengView)),this.zhuanShengView.onOpenHandler(),this.setImageTitle("title_zhuansheng"),this.heroListTopBox.visible=!1,this.btnHelp.visible=!1;break;case 3:this.meridiansView||(this.meridiansView=new MeridiansView,this.container.addChild(this.meridiansView)),this.meridiansView.onOpenHandler(),this.setImageTitle("title_meridians"),this.heroListTopBox.visible=!0,this.btnHelp.visible=!1;break;case 4:this.shenlianView||(this.shenlianView=new ShenlianView,this.container.addChild(this.shenlianView)),this.shenlianView.onOpenHandler(),this.setImageTitle("title_figure"),this.heroListTopBox.visible=!0,this.btnHelp.visible=!0}}},n.setTabIndex=function(e){this._selectedTabIndex=e,this.tabBar.selectedIndex=this._selectedTabIndex},n.clearContent=function(){for(var e;this.container.numChildren>0;)e=this.container.getChildAt(0),this.container.removeChild(e),e.dispose(),e=null;this.figureEquipView&&(this.figureEquipView.parent&&this.figureEquipView.parent.removeChild(this.figureEquipView),this.figureEquipView.onCloseHandler(),this.figureEquipView=null),this.wingView&&(this.wingView.parent&&this.wingView.parent.removeChild(this.wingView),this.wingView.onCloseHandler(),this.wingView=null),this.zhuanShengView&&(this.zhuanShengView.parent&&this.zhuanShengView.parent.removeChild(this.zhuanShengView),this.zhuanShengView.onCloseHandler(),this.zhuanShengView=null),this.meridiansView&&(this.meridiansView.parent&&this.meridiansView.parent.removeChild(this.meridiansView),this.meridiansView.onCloseHandler(),this.meridiansView=null),this.shenlianView&&(this.shenlianView.parent&&this.shenlianView.parent.removeChild(this.shenlianView),this.shenlianView.onCloseHandler(),this.shenlianView=null)},n.onCloseBtnClick=function(t){e.prototype.onCloseBtnClick.call(this,t),this.getBtnReturn()&&(this.getBtnReturn().visible=!0),this.guideBtn.visible=!1,NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip(),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.GUILE_END))},n.updateTabRedDot=function(e){var t=e.data.index,i=e.data.show;i?(this.tabBar.validateNow(),this.tabBar.getChildAt(t).showRedDot=!0):(this.tabBar.validateNow(),this.tabBar.getChildAt(t).showRedDot=!1)},n.updateHeroListRedDot=function(e){this.heroListTopBox.updateFigureRedDots(e.data.index)},n.nextGuile=function(e){NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip(),this.updateGuide(1)},n.updateGuide=function(e){if(void 0===e&&(e=0),0==e){var t=RoleModel.getInstance().getPartnerList()[0];if(0==FigureModel.getInstance().getEquipsCanWearByPartner(t))return}if(this._isNovice){var i=TaskModel.getInstance().getCurNoviceTask();if(null==i)return;if(i.xs!=NoviceGuideType.GuideFigureTips)return;if(1==e){this._isNovice=!1;var n=this.localToGlobal(this.guideBtn.x,this.guideBtn.y);this.getBtnReturn().visible=!1,this.guideBtn.visible=!0,NoviceGuideManager.getInstance().showShadeTip(this.guideBtn,"点击关闭",n,new egret.Point(n.x-42,n.y-68))}else{var n=this.figureEquipView.localToGlobal(this.figureEquipView.getBtnChange().x,this.figureEquipView.getBtnChange().y);NoviceGuideManager.getInstance().showShadeTip(this.figureEquipView.getBtnChange(),"点击穿上装备",n,new egret.Point(n.x-15,n.y-85))}}},t}(LayeroutWindow);egret.registerClass(FigureWindow,"FigureWindow",["INoviceGuide"]);var OrangeWindow=function(e){function t(){e.call(this),this._selectedTabIndex=0,this.skinName="resource/game_skins/figure/OrangeWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.tabBar.dataProvider=new eui.ArrayCollection(["神装","觉醒","百战"]),this.heroListTopBox=new HeroListTopBox,this.topContainer.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0,FigureModel.getInstance().selectedPartnerVO=this.heroListTopBox.roleListData[0]},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),RedDotsModel.getInstance().addEventListener(RedDotsModel.ORANGE_TAB_REDDOT,this.updateTabRedDot,this),RedDotsModel.getInstance().addEventListener(RedDotsModel.ORANGE_HEROLIST_REDDOT,this.updateHeroListRedDot,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateGoods,this),this.addGlobalEventListener(EventName.EQUIP_LIST_CHANGE,this.onChangeEquipListHandler,this),AwakeModel.getInstance().addEventListener(AwakeEquipEvtName.CCMD21600_UPDATE,this.updateSoulHandler,this),GameDispatcher.getInstance().addEventListener(AwakeEquipEvtName.AWAKEEQUIPCOMPOSE_SUCCESS,this.onSucessHandler,this),this.onSucessHandler(),this.onChangeEquipListHandler(),this.updateGoods(null),this.updateSoulHandler()},n.dispose=function(){e.prototype.dispose.call(this),this.heroListTopBox&&(this.heroListTopBox.parent&&this.heroListTopBox.parent.removeChild(this.heroListTopBox),this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),RedDotsModel.getInstance().removeEventListener(RedDotsModel.ORANGE_TAB_REDDOT,this.updateTabRedDot,this),RedDotsModel.getInstance().removeEventListener(RedDotsModel.ORANGE_HEROLIST_REDDOT,this.updateHeroListRedDot,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateGoods,this),this.removeGlobalEventListener(EventName.EQUIP_LIST_CHANGE,this.onChangeEquipListHandler,this),AwakeModel.getInstance().removeEventListener(AwakeEquipEvtName.CCMD21600_UPDATE,this.updateSoulHandler,this),GameDispatcher.getInstance().removeEventListener(AwakeEquipEvtName.AWAKEEQUIPCOMPOSE_SUCCESS,this.onSucessHandler,this),this.clearContent()},n.openView=function(e,t){if(t)this.isPop=!0;else{var i=!this.isPop;this.isPop=i}1==this.isPop&&(this.setTabIndex(e),this.onBarItemTap(null))},n.onBoxTap=function(e){e.data&&(FigureModel.getInstance().selectedPartnerVO=e.data)},n.onBarItemTap=function(e){var t,i=0;if(0==this.tabBar.selectedIndex?i=FunctionOpenModel.ORANGESUIT:1==this.tabBar.selectedIndex?i=FunctionOpenModel.KEY_48:2==this.tabBar.selectedIndex&&(i=FunctionOpenModel.LEGENDSUIT),t=FunctionOpenModel.getInstance().getFunctionOpenVO(i),0==this.tabBar.selectedIndex){if(t&&RoleModel.getInstance().getRoleCommon().level<t.open_level)return void Message.show(t.open_level+"级开启橙装功能")}else if(1==this.tabBar.selectedIndex){if(t&&RoleModel.getInstance().getRoleCommon().round<t.open_round)return void Message.show(t.open_round+"转开启觉醒装备")}else if(2==this.tabBar.selectedIndex&&t&&RoleModel.getInstance().getRoleCommon().round<t.open_level)return void Message.show(t.open_level+"转开启百战装备功能");switch(this.clearContent(),0==this.heroListTopBox.visible&&(this.heroListTopBox.visible=!0),this.tabBar.selectedIndex){case 0:this._orangeView||(this._orangeView=new OrangesuitView,this.container.addChild(this._orangeView)),this._orangeView.onOpenHandler(),this.setImageWindowTitle("orangesuit_title"),this.topContainer.visible=!0;break;case 1:this._awakeEquipView||(this._awakeEquipView=new AwakeEquipView,this.container.addChild(this._awakeEquipView)),this._awakeEquipView.onOpenHandler(),this.setImageWindowTitle("orangesuit_title"),this.topContainer.visible=!0;break;case 2:this._legendSuitView||(this._legendSuitView=new LegendSuitView,this.container.addChild(this._legendSuitView)),this._legendSuitView.onOpenHandler(),this.setImageWindowTitle("orangesuit_title"),this.topContainer.visible=!0}},n.setTabIndex=function(e){var t,i=0;if(0==e?i=FunctionOpenModel.ORANGESUIT:1==e?i=FunctionOpenModel.KEY_48:2==e&&(i=FunctionOpenModel.LEGENDSUIT),t=FunctionOpenModel.getInstance().getFunctionOpenVO(i),0==e){if(t&&RoleModel.getInstance().getRoleCommon().level<t.open_level)return void Message.show(t.open_level+"级开启橙装功能")}else if(1==e){if(RoleModel.getInstance().getRoleCommon().round<t.open_round)return void Message.show(t.open_round+"转开启觉醒装备")}else if(2==e&&RoleModel.getInstance().getRoleCommon().round<t.open_level)return void Message.show(t.open_level+"转开启百战装备功能");this._selectedTabIndex=e,this.tabBar.selectedIndex=this._selectedTabIndex},n.updateHeroListRedDot=function(e){this.heroListTopBox.updateOrangeRedDots(e.data.index)},n.updateTabRedDot=function(e){var t=e.data.index,i=e.data.show;i?(this.tabBar.validateNow(),this.tabBar.getChildAt(t).showRedDot=!0):(this.tabBar.validateNow(),this.tabBar.getChildAt(t).showRedDot=!1)},n.updateGoods=function(e){RedDotsModel.getInstance().calAwakeEquipTabRedDot()},n.onChangeEquipListHandler=function(){RedDotsModel.getInstance().calOrangesuitTabRedDot(),RedDotsModel.getInstance().calLegendsuitTabRedDot(),RedDotsModel.getInstance().calAwakeEquipTabRedDot()},n.updateSoulHandler=function(){RedDotsModel.getInstance().calAwakeEquipTabRedDot()},n.onSucessHandler=function(){RedDotsModel.getInstance().calAwakeEquipTabRedDot()},n.clearContent=function(){for(var e;this.container.numChildren>0;)e=this.container.getChildAt(0),this.container.removeChild(e),e.dispose(),e=null;this._orangeView&&(this._orangeView.parent&&this._orangeView.parent.removeChild(this._orangeView),this._orangeView.onCloseHandler(),this._orangeView=null),this._legendSuitView&&(this._legendSuitView.parent&&this._legendSuitView.parent.removeChild(this._legendSuitView),this._legendSuitView.onCloseHandler(),this._legendSuitView=null),this._awakeEquipView&&(this._awakeEquipView.parent&&this._awakeEquipView.parent.removeChild(this._awakeEquipView),this._awakeEquipView.onCloseHandler(),this._awakeEquipView=null)},t}(LayeroutWindow);egret.registerClass(OrangeWindow,"OrangeWindow");var PartnerPropertyView=function(e){function t(){e.call(this),this._sIndex=0,this._dataList=[],e.call(this),this.skinName="resource/game_skins/figure/PartnerPropertyViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.PARTNERPROPERTY},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftHandler,this),this._btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRightHandler,this),this._btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnHandler,this),this.updateInfo(),this.updateBtn()},n.onCloseHandler=function(){this._btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftHandler,this),this._btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRightHandler,this),this._btnReturn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnHandler,this),e.prototype.onCloseHandler.call(this)},n.onLeftHandler=function(){this._sIndex--,this.updateInfo()},n.onRightHandler=function(){this._sIndex++,this.updateInfo()},n.onReturnHandler=function(){this.isPop=!1},n.updateBtn=function(){},n.updateInfo=function(){var e=this._dataList[this._sIndex];this._txtHp.text=e.propertyVO.hp.toString()+"+"+e.propertyVO.hp_up/100+"%",this._txtMp.text=e.propertyVO.mp.toString(),this._txtAttack.text=e.propertyVO.attack.toString(),this.txtAttDef.text=e.propertyVO.att_def.toString(),this._txtMagicDef.text=e.propertyVO.magic_def.toString(),this._txtCrit.text=e.propertyVO.crit/100+"%",this._txtCritHurt.text=e.propertyVO.crit_hurt/100+"%",this._txtCritDef.text=e.propertyVO.crit_def/100+"%",this._txtPalsyRate.text=e.propertyVO.palsy_rate/100+"%",this._txtPalsyDef.text=e.propertyVO.palsy_def/100+"%",this._txtHurtDef.text=e.propertyVO.hurt_def/100+"%",this._txtHurtUp.text=e.propertyVO.hurt_up/100+"%",this._imageCareer.source=RES.getRes("share_json.share_title_career"+e.career),null==this._dataList[this._sIndex-1]||void 0==this._dataList[this._sIndex-1]?this._btnLeft.visible=!1:this._btnLeft.visible=!0,null==this._dataList[this._sIndex+1]||void 0==this._dataList[this._sIndex+1]?this._btnRight.visible=!1:this._btnRight.visible=!0},t}(LayeroutWindow);egret.registerClass(PartnerPropertyView,"PartnerPropertyView");var ShenlianView=function(e){function t(){e.call(this),this.skinName="resource/game_skins/figure/ShenlianViewSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this._txtRecLink.htmlText="<u><a href = 'event:2'>获取红装碎片</a></u>"},n.onOpenHandler=function(){function e(e,t){return Number(e.name)-Number(t.name)}this._imageSelected.visible=!1,null==this._imageBg&&(this._imageBg=new PicLoader,this.addChildAt(this._imageBg,0),this._imageBg.x=0,this._imageBg.y=0,this._imageBg.load(UrlUtil.getShanlianURL("bg")+".png")),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._txtRecLink.addEventListener(egret.TextEvent.LINK,this.onTxtRecLinkHandler,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),GameDispatcher.getInstance().addEventListener(FigureEvtName.CCMD23000_UPDATE,this.updateInfoHandler,this),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this);var t;this._itemArr=[];for(var i=0;i<this._itemContainer.numChildren;i++)t=this._itemContainer.getChildAt(i),t.showLv(!1),t.setImageBottomType(Number(t.name)),this._itemArr.push(t);this._itemArr.sort(e),this.setSelected(this._itemArr[0]),this.onPartnerChangeHandler()},n.onCloseHandler=function(){this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._txtRecLink.removeEventListener(egret.TextEvent.LINK,this.onTxtRecLinkHandler,this),GameDispatcher.getInstance().removeEventListener(FigureEvtName.CCMD23000_UPDATE,this.updateInfoHandler,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),this._imageBg&&(this._imageBg.dispose(),this._imageBg=null);for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e&&(e.parent&&e.parent.removeChild(e),e.data&&(e.data=null),e.dispose(),e=null);this.dispose()},n.onPartnerChangeHandler=function(){var e=new ParamEvent(FigureEvtName.CCMD23000),t=FigureModel.getInstance().selectedPartnerVO;e.data={id:t.parnerID},this.dispatchGlobalEvent(e)},n.onTxtRecLinkHandler=function(){var e=new ParamEvent(OrangeSuitEvtName.ORANGESUIT_OPEN_DECOMPOSITION_VIEW);e.data={type:1,linkStrArr:[{type:GetMaterialItem.OPEN_TREASURE,linkStr:"<u><a href = 'event:1'>获得神装：寻宝</a></u>"},{type:GetMaterialItem.OPEN_BOSS,linkStr:"<u><a href = 'event:2'>获得神装：前往BOSS</a></u>"},{type:GetMaterialItem.OPEN_MATERIAL_FUBEN,linkStr:"<u><a href = 'event:3'>获得神装：挑战副本</a></u>"}]},this.dispatchGlobalEvent(e)},n.onCallBack=function(e,t){t.setSelected(e)},n.setSelected=function(e){},n.onOkHandler=function(){var e=new ParamEvent(FigureEvtName.CCMD23010),t=FigureModel.getInstance().selectedPartnerVO;e.data={id:t.parnerID},this.dispatchGlobalEvent(e)},n.updateNum=function(){var e,t=61474;if(this._voNext){e=GoodsListProxy.getInstance().getGoodsInfoByType(this._voNext.goodsList[0].asset_id);var t=61474,i=GoodsListProxy.getInstance().findGoodNumber(this._voNext.goodsList[0].asset_id);i<this._voNext.goodsList[0].value&&(t=16711680),this._txtName.text="消耗"+e.name,this._txtRecLink.htmlText="<u><a href = 'event:2'>获取"+e.name+"</a></u>",this._txtCount.text=i+"/"+this._voNext.goodsList[0].value}else this._txtCount.text="0/0";this._txtCount.textColor=t,RedDotsModel.getInstance().calShenlianTabRedDot(),RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.FIGURE_HEROLIST_REDDOT,{index:4}))},n.updateInfoHandler=function(){var e=FigureModel.getInstance().getShenlianLevel(FigureModel.getInstance().selectedPartnerVO.parnerID),t=FigureModel.getInstance().getShenlianVO(e),i=FigureModel.getInstance().getShenlianVO(e+1);this._vo=t,this._voNext=i,null==t?this._txtPro.text="0%":this._txtPro.text=t.grow_up/100+"%",i?this._txtProNext.text=i.grow_up/100+"%":this._txtProNext.text="已满级",this._txtlvl.text=e+"",this.updateNum()},t}(BaseView);egret.registerClass(ShenlianView,"ShenlianView");var SpecialEquipWindow=function(e){function t(){e.call(this),this.type=0,this.skinName="resource/game_skins/figure/SpecialEquipWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.SPECIAL,this._item.showLv(!1),this._item.showTips=!1,this.heroListTopBox=new HeroListTopBox,this.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0,this.heroListTopBox.y=-3},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this._btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseHandler,this),this._btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnReturnHandler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOkHandler,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_UPDATE_SPECIALEQUIP,this.updateInfo,this);var t=FigureModel.getInstance().selectedPartnerVO;null==t&&(t=FigureModel.getInstance().selectedPartnerVO=this.heroListTopBox.roleListData[0]),FigureModel.getInstance().selectedpartnerVOInSpeicalWin=t,this.heroListTopBox.setIndex(this.heroListTopBox.getIndexByVO(t)),this.requestSpeicalEquip(),this.updateInfo()},n.onCloseHandler=function(){this.heroListTopBox&&(this.heroListTopBox.parent&&this.heroListTopBox.parent.removeChild(this.heroListTopBox),this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null),this._item&&(this._item.data&&(this._item.data=null),this._item.dispose()),this._btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseHandler,this),this._btnReturn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnReturnHandler,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOkHandler,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_UPDATE_SPECIALEQUIP,this.updateInfo,this),e.prototype.onCloseHandler.call(this)},n.requestSpeicalEquip=function(){var e=new ParamEvent(FigureEvtName.CCMD11100);e.data={id:FigureModel.getInstance().selectedpartnerVOInSpeicalWin.parnerID},this.dispatchGlobalEvent(e)},n.updateNum=function(){var e,i=0;this._nextProVO?(i=GoodsListProxy.getInstance().findGoodNumber(this._nextProVO.con_itemid),e=GoodsListProxy.getInstance().getGoodsInfoByType(this._nextProVO.con_itemid),this._txtCon.text="消耗"+e.name+"：",this._txtConCount.text=i+"/"+this._nextProVO.con_count,i>=this._nextProVO.con_count?(this._btnOK.label=t.LABEL_2,this._txtConCount.textColor=16765440):(this._btnOK.label=t.LABEL_1,this._txtConCount.textColor=16711680)):(e=GoodsListProxy.getInstance().getGoodsInfoByType(this.proVO.con_itemid),this._txtCon.text="消耗"+e.name+"：",this._txtConCount.text="",this._btnOK.label="已升至最高级")},n.updateInfo=function(){function e(e,t,i,n,s){void 0===i&&(i="#e7d0b7"),void 0===n&&(n=!1),void 0===s&&(s=!1);for(var a=0,o=0,r="",h="",l=0;l<t.length;l++)h=t[l],a=null==e?0:e[h],o=l,!s&&0>=a||(n&&_.push(h),r+=o>=5?"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+a/100+"%</font>":"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+a+"</font>");return r}var t,i,n=FigureModel.specialEquipDic[this.type-1];t=GoodsListProxy.getInstance().getEquipInfoByType(n),t.type=this.type,i=FigureModel.getInstance().getSpecialEquipServerData(FigureModel.getInstance().selectedpartnerVOInSpeicalWin.parnerID,t.type),i&&(t.level=i.level),this._item.data=t,this._txtName.text=t.name+" Lv"+t.level,this._txtDesc.text=t.desc,this._equipInfo=t;var s=t.level,a=s+1,o=t.type,r=FigureModel.getInstance().getSpecialEquipData(o,s),h=FigureModel.getInstance().getSpecialEquipData(o,a),l="",d="",_=[];0>=s?(l=e(h,EquipBasic.PROPERTY_INDEX,"#00D228",!0),d=e(r,_,"#e7d0b7",!1,!0)):(d=e(r,EquipBasic.PROPERTY_INDEX),h&&(l=e(h,EquipBasic.PROPERTY_INDEX,"#00D228"))),this._txtPro.htmlText=d,this._txtProNext.htmlText=l,this.proVO=r,this._nextProVO=h,this.updateNum()},n.onBoxTap=function(e){e.data&&(FigureModel.getInstance().selectedpartnerVOInSpeicalWin=e.data,this.updateInfo())},n.onBtnCloseHandler=function(){this.isPop=!1},n.onBtnReturnHandler=function(){this.isPop=!1},n.onBtnOkHandler=function(){if(this._btnOK.label==t.LABEL_1){var e,i="",n="";1==this.type?(i=GetMaterialItem.OPEN_CHECKPOINTBOSS,n="通关章节获得",e=new ParamEvent(EventName.OPEN_GETMATERIAL_WINDOW)):2==this.type?(i=GetMaterialItem.OPEN_CHECKPOINTBOSS,n="通关章节获得",e=new ParamEvent(EventName.OPEN_GETMATERIAL_WINDOW)):3==this.type?(i=GetMaterialItem.OPEN_MATERIAL_FUBEN,n="材料副本获得",e=new ParamEvent(EventName.OPEN_GETMATERIAL_BUY_WINDOW)):4==this.type&&(i=GetMaterialItem.OPEN_MATERIAL_FUBEN,n="材料副本获得",e=new ParamEvent(EventName.OPEN_GETMATERIAL_WINDOW)),e.data={typeId:this._nextProVO.con_itemid,type:i,linkStrArr:["<a href='event:"+i+"'>"+n+"</a>"]},this.dispatchGlobalEvent(e)}else{var e=new ParamEvent(FigureEvtName.CCMD11101),s=FigureModel.getInstance().selectedpartnerVOInSpeicalWin;e.data={id:s.parnerID,type:this.type},this.dispatchGlobalEvent(e)}},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=110},t.LABEL_1="获得材料",t.LABEL_2="升级",t}(LayeroutWindow);egret.registerClass(SpecialEquipWindow,"SpecialEquipWindow");var FirstChargeFiveItem=function(e){function t(t){void 0===t&&(t=0),e.call(this),this._ind=0,this._ind=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/firstCharge/FirstChargeFiveItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this._img=new PicLoader,this.addChild(this._img),this._img.load(rURL("resource/assets/icon/firstChargeFive/"+(this._ind+1)+".png")),this._img.x=114,this._img.y=41},s.setData=function(e){this._vo=e,this._txtGold.text=this._vo.num+this._vo.re_num+"元宝",this._txtRmb.text=this._vo.template_id+"",this._txtCount.htmlText=this._vo.num+"元宝+<font color='#00fd00'>送"+this._vo.re_num+"元宝</font>"},i(s,"vo",function(){return this._vo}),s.setSelected=function(e){},s.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this._img&&(this._img.dispose(),this._img=null)},t}(Csprite);egret.registerClass(FirstChargeFiveItem,"FirstChargeFiveItem");var FirstChargeFiveWindow=function(e){function t(){e.call(this),this._itemArr1=[],this._itemArr2=[],this._model=FirstChargeModel.getInstance(),this.skinName="resource/game_skins/firstCharge/FirstChargeFiveWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.onBtnReturnSetIndex(),this._txtLink.htmlText="<u><a href = 'event:2'>前往分享可获得免费元宝</a></u>";var t=new eui.TileLayout;t.paddingTop=3,t.paddingLeft=3,t.paddingRight=3,t.paddingBottom=3,this._itemContainer1.layout=t,t.horizontalGap=20,t.verticalGap=1;var i=this._model.getChargeFiveConfig();this._item=new FirstChargeFiveItem(5),this._item.x=174,this._item.y=233,this.panelSkin.addChild(this._item),this._item.setData(i[i.length-1]),this._item.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickFirstItem,this),this.setImageWindowTitle("title_firstCharge")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this);for(var t,i=this._model.getChargeFiveConfig(),n=0,s=0;s<i.length-1;s++)0!=s&&(t=new FirstChargeFiveItem(s),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),t.setData(i[s]),this._itemContainer1.addChild(t),this._itemArr1.push(t),n++);var a=SingleModel.getInstance().getSingVO(SingleModel.KEY_21302);if(a)for(var o,r,h=Tools.changeToNodeDropList(a.value),s=0;s<h.length;s++)r=GoodsListProxy.getInstance().getGoodsInfoByType(h[s].asset_id),r.num=h[s].value,o=new GoodsItem,o.x=s*(o.width+25),o.data=r,this._itemContainer2.addChild(o),this._itemArr2.push(o);this._txtLink.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this)},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this);for(var t,i=0;i<this._itemArr1.length;i++)t=this._itemArr1[i],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),t.dispose(),t=null;this._itemArr1=[];for(var n,i=0;i<this._itemArr2.length;i++)n=this._itemArr2[i],n.parent&&n.parent.removeChild(n),n.dispose(),n=null;this._itemArr2=[],this._item.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickFirstItem,this),this._txtLink.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this)},n.clickFirstItem=function(e){var t=e.currentTarget,i=t.vo;if(ConfigManager.isTencent()){var n=i.android_id;ConfigManager.isIOS()&&(n=i.ios_id),QQManager.getInstance().QQBuyGoods(n)}else{var s=i.template_id;PhpHttpStatisticsManager.requestChargeOrder(1,s,8,"元宝",1)}},n.onItemClick=function(e){var t=e.currentTarget,i=t.vo;if(ConfigManager.isTencent()){var n=i.android_id;ConfigManager.isIOS()&&(n=i.ios_id),QQManager.getInstance().QQBuyGoods(n)}else{var s=i.template_id;PhpHttpStatisticsManager.requestChargeOrder(1,s,8,"元宝",1)}},n.onTxtLinkHandler=function(){this.dispatchGlobalEvent(new ParamEvent(ShareEvtName.SHARE_WINDOW_OPEN))},n.dispose=function(){e.prototype.dispose.call(this)},t}(LayeroutWindow);egret.registerClass(FirstChargeFiveWindow,"FirstChargeFiveWindow");var FirstChargeWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/firstCharge/FirstChargeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.FIRST_CHARGE,this.tabBar.dataProvider=new eui.ArrayCollection(["充值10元宝","累充99元宝"]),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btn_lq.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onlingquClick,this),this.addGlobalEventListener(FirstChargeEvtName.FIRST_CHARGE_CCMD12800_UPDATE,this.updateData,this),this._guideshade=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("shouchong1"),245,200,this.effGroup,80,!0),this.bm_bg=new PicLoader,this.picGroup.addChild(this.bm_bg),this.updateList()
},n.onBarItemTap=function(e){this.updateList(this.tabBar.selectedIndex),this.changeBtn()},n.updateList=function(e){void 0===e&&(e=0),this._award_id=1001;var t="resource/assets/icon/firstCharge/firstChargeReward.png",i="resource/assets/icon/firstCharge/firstChargeRewardTile.png";e>0?(this._award_id=2001,t="resource/assets/icon/firstCharge/firstChargeReward2.png",i="resource/assets/icon/firstCharge/firstChargeRewardTile2.png",this._guideshade.showEffect(UrlUtil.getCommonEffectURL("shouchong2"),245,200,this.effGroup,80,!0)):this._guideshade.showEffect(UrlUtil.getCommonEffectURL("shouchong1"),245,200,this.effGroup,80,!0),this._itemFly=[],this.bm_bg.load(t),this.bm_title.source=i;for(var n,s=FirstChargeModel.getInstance().getItemListById(this._award_id),a=0;10>a;a++)n=this["item_"+(a+1)],s[a]?(n.data=s[a].info,n.num=s[a].num,n.visible=!0,this._itemFly.push(s[a].info.pic)):n.visible=!1},n.updateData=function(e){this.changeBtn()},n.changeBtn=function(){var e=FirstChargeModel.getInstance().getData();if(e.length>0){for(var t,i=!1,n=0;n<e.length;n++)t=this.tabBar.getChildAt(2001==e[n].award_id?1:0),t&&(t.showRedDot=0==e[n].flag),e[n].award_id==this._award_id&&(i=!0,e[n].flag>0?(this.btn_lq.enabled=!1,this.btn_lq.label="已领取"):(this.btn_lq.enabled=!0,this.btn_lq.label="领取奖励"));i?(this.btn_lq.visible=!0,this.btnGet.visible=!1):(this.btnGet.visible=!0,this.btn_lq.visible=!1)}else this.btnGet.visible=!0,this.btn_lq.visible=!1},n.onlingquClick=function(){AccessGoodFlyEffectManager.getInstance().flyArray(this._itemFly),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FirstChargeEvtName.FIRST_CHARGE_CCMD12801,this._award_id))},n.onGetClick=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btn_lq.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onlingquClick,this),this.removeGlobalEventListener(FirstChargeEvtName.FIRST_CHARGE_CCMD12800_UPDATE,this.updateData,this),this._guideshade.dispose(),this._guideshade=null;for(var t,i=0;10>i;i++)t=this["item_"+(i+1)],t.dispose(),t=null;this.bm_bg&&(this.bm_bg.parent&&this.bm_bg.parent.removeChild(this.bm_bg),this.bm_bg.dispose(),this.bm_bg=null)},t}(LayeroutWindow);egret.registerClass(FirstChargeWindow,"FirstChargeWindow");var FollowRewardWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/followReward/FollowRewardWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("followReward"),this.btnFollow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toFollow,this),this.update(),this.setReward()},n.update=function(){return ConfigManager.isb7724()||ConfigManager.isB9g()?void(this.btnFollow.label="领取"):void(this.btnFollow.label=0==JinbangModel.getInstance().isFollow?"点我关注":"领取")},n.setReward=function(){var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_20001);if(e)var t=e.value.match(/\d+/g),i=parseInt(t[0]),n=parseInt(t[1]);var s=GoodsListProxy.getInstance().getGoodsInfoByType(i);s.num=n;var a=new GoodsItem;a.data=s,this.rewardCon.addChild(a)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),ConfigManager.isyxjinbang()&&TimerManager.getInstance().add(3e3,this.onTimer,this)},n.onTimer=function(){PhpHttpStatisticsManager.getJBYXPayAttentionInfo()},n.toFollow=function(){ConfigManager.isyxjinbang()&&0==JinbangModel.getInstance().isFollow?window.payAttention():this.getRewardClose()},n.getRewardClose=function(){this.isPop=!1,getAttentionReward()},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(3e3,this.onTimer,this)},t}(LayeroutWindow);egret.registerClass(FollowRewardWindow,"FollowRewardWindow");var ForgemindWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/forgemind/ForgemindWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){function t(e,t){return Number(e.name)-Number(t.name)}e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.FORGEMIND,this._txtGetLink.htmlText="<u><a href = 'event:2'>获取道具</a></u>",this._txtRecLink.htmlText="<u><a href = 'event:2'>回收战魂</a></u>",this.heroListTopBox=new HeroListTopBox,this.topContainer.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0,FigureModel.getInstance().selectedPartnerVO=this.heroListTopBox.roleListData[0];var i;this._itemArr=[];for(var n=0;n<this._itemContainer.numChildren;n++)i=this._itemContainer.getChildAt(n),i.showLv(!1),i.setImageBottomType(Number(i.name)),i.addCallBack(this.onCallBack,i,this),this._itemArr.push(i);this._itemArr.sort(t),this.setSelected(this._itemArr[0])},n.onCallBack=function(e,t){t.setSelected(e)},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("forgemind_json.forgemind_title")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.onPartnerChangeHandler(),ForgemindModel.getInstance().addEventListener(ForgemindEvtName.FORGEMIND_UPDATE_INFO,this.updateInfoHandler,this),this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this._txtGetLink.addEventListener(egret.TextEvent.LINK,this.onTxtGetLinkHandler,this),this._txtRecLink.addEventListener(egret.TextEvent.LINK,this.onTxtRecLinkHandler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOKHandler,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this)},n.onCloseHandler=function(){for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t&&(t.parent&&t.parent.removeChild(t),t.data&&(t.data=null),t.dispose(),t=null);this.heroListTopBox&&(this.heroListTopBox.parent&&this.heroListTopBox.parent.removeChild(this.heroListTopBox),this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null),ForgemindModel.getInstance().removeEventListener(ForgemindEvtName.FORGEMIND_UPDATE_INFO,this.updateInfoHandler,this),this._txtGetLink.removeEventListener(egret.TextEvent.LINK,this.onTxtGetLinkHandler,this),this._txtRecLink.removeEventListener(egret.TextEvent.LINK,this.onTxtRecLinkHandler,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOKHandler,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),e.prototype.onCloseHandler.call(this)},n.onPartnerChangeHandler=function(){var e=new ParamEvent(ForgemindEvtName.CCMD12200),t=FigureModel.getInstance().selectedPartnerVO;e.data={id:t.parnerID},this.dispatchGlobalEvent(e)},n.onBoxTap=function(e){e.data&&(FigureModel.getInstance().selectedPartnerVO2=e.data,this.onPartnerChangeHandler())},n.setSelected=function(e){this._selectedItem=e,this._imageSelected.x=this._itemContainer.x+this._selectedItem.x-13,this._imageSelected.y=this._itemContainer.y+this._selectedItem.y-13,this.updateInfoHandler()},n.onTxtGetLinkHandler=function(){var e=new ParamEvent(EventName.OPEN_GETMATERIAL_WINDOW);e.data={typeId:this._vo.con_itemid,type:GetMaterialItem.OPEN_SECRET_MALL,linkStrArr:["<a href='event:"+GetMaterialItem.OPEN_SECRET_MALL+"'>神秘商店几率获得</a>"]},this.dispatchGlobalEvent(e)},n.onTxtRecLinkHandler=function(){var e=new ParamEvent(ForgemindEvtName.CCMD12202);this.dispatchGlobalEvent(e)},n.onBtnOKHandler=function(){var e=new ParamEvent(ForgemindEvtName.CCMD12201),t=FigureModel.getInstance().selectedPartnerVO;e.data={id:t.parnerID,slot:Number(this._selectedItem.name)},this.dispatchGlobalEvent(e)},n.updateNum=function(){var e=ForgemindModel.getInstance().getDataVO(Number(this._selectedItem.name)),t=GoodsListProxy.getInstance().findGoodNumber(e.con_itemid);this._txtCount.text=t+"/"+e.con_count},n.updateState=function(){for(var e,t,i,n=0,s=0;s<this._itemArr.length;s++)e=this._itemArr[s],t=ForgemindModel.getInstance().isActived(Number(e.name),FigureModel.getInstance().selectedPartnerVO.parnerID),i=ForgemindModel.getInstance().getDataPropertyVO(Number(e.name)),t?(e.showLv(!0),e.showName("<font color='#34c800'>已激活</font>"),e.showForgmineBg(!0),n+=PropertyUtil.calculateProFight(i)):(e.showLv(!1),e.showForgmineBg(!1));this._txtFPower.text=n.toString()},n.updateInfoHandler=function(){function e(e,t,i,n,s){void 0===i&&(i="#e7d0b7"),void 0===n&&(n=!1),void 0===s&&(s=!1);for(var a=0,o=0,r="",h="",l=0;l<t.length;l++)h=t[l],a=e[h],0>=a||(o=l,r+=o>=5?"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+a/100+"%</font>":"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+a+"</font>");return r}var t=ForgemindModel.getInstance().getDataVO(Number(this._selectedItem.name)),i=ForgemindModel.getInstance().getDataPropertyVO(Number(this._selectedItem.name));this._vo=t;var n=ForgemindModel.getInstance().isActived(Number(this._selectedItem.name),FigureModel.getInstance().selectedPartnerVO.parnerID),s="",a="";a=n?"#00ff00":"#a7aca5",s=e(i,EquipBasic.PROPERTY_INDEX,a),this._txtPro.htmlText=s,this._txtName.text=GoodsListProxy.getInstance().getBasicGood(t.con_itemid).name,this.updateNum(),this.updateState()},t}(LayeroutWindow);egret.registerClass(ForgemindWindow,"ForgemindWindow");var FriendAddWindow=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/friend/FriendAddViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.FRIEND,this.setImageTitle("title_friend_add")},n.onTxtFocus=function(){this.txtName.text=""},n.onBtnTap=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11702,this.txtName.text)),this.txtName.text="",Message.show("发送成功"),this.isPop=!1},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnTap,this),this.txtName.addEventListener(egret.TouchEvent.FOCUS_IN,this.onTxtFocus,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnTap,this),this.txtName.removeEventListener(egret.TouchEvent.FOCUS_IN,this.onTxtFocus,this)},t}(LayeroutWindow);egret.registerClass(FriendAddWindow,"FriendAddWindow");var FriendBlackWindow=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/friend/FriendBlackViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.FRIEND,this.setImageTitle("title_friend_black"),this.updateFriendList()},n.updateFriendList=function(){for(var e=new eui.ArrayCollection,t=FriendModel.getInstance().getBlackList(),i=0;i<t.length;i++)e.addItem(t[i]);this.friendList.dataProvider=e,this.txtCount.text=t.length+"/100"},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.addGlobalEventListener(FriendEvtName.FRIEND_CCMD11701_UPDATE,this.updateFriendList,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.removeGlobalEventListener(FriendEvtName.FRIEND_CCMD11701_UPDATE,this.updateFriendList,this)},t}(LayeroutWindow);egret.registerClass(FriendBlackWindow,"FriendBlackWindow");var FriendCheckWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/friend/FriendCheckViewSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.FRIEND,this.setImageTitle("title_friend_check"),this.updateFriendList()},n.onYesClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11706,1))},n.onNoClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11706,2))},n.updateFriendList=function(){for(var e=new eui.ArrayCollection,t=FriendModel.getInstance().getCheckList(),i=0;i<t.length;i++)e.addItem(t[i]);this.friendList.dataProvider=e,t.length>0?(this.bd_noBg.visible=!1,this.txtNo.visible=!1):(this.bd_noBg.visible=!0,this.txtNo.visible=!0)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.btnAllYes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesClick,this),this.btnAllNo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNoClick,this),this.addGlobalEventListener(FriendEvtName.FRIEND_CCMD11702_UPDATE,this.updateFriendList,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.btnAllYes.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesClick,this),this.btnAllNo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onNoClick,this),this.removeGlobalEventListener(FriendEvtName.FRIEND_CCMD11702_UPDATE,this.updateFriendList,this)},t}(LayeroutWindow);egret.registerClass(FriendCheckWindow,"FriendCheckWindow");var FriendItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/friend/FriendItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.headitem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowMenu,this),this.btnFeedChance.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendChance,this)},n.sendChance=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_FRIENDS_SEND_CHANCE,this._friendData.role_id))},n.onShowMenu=function(e){e.stopPropagation();var t=FriendMenuView.getInstance();t.updateData(this._friendData.role_id),t.x=e.stageX,t.y=e.stageY,GameContent.gameLayers.windowLayer.addChild(t)},n.dataChanged=function(){this._friendData=this.data;var e=this._friendData.name+"(";this._friendData.round>0&&(e+=this._friendData.round+"转"),e+=this._friendData.level+"级)",this.txtName.text=e,this.txtFight.text=this._friendData.power.toString(),this.txtTime.text=TimeUtil.formatTime(1e3*this._friendData.LogoffTime,"YYYY-MM-DD"),this.headitem.setHeadURLByPartner(this._friendData.icon)},t}(eui.ItemRenderer);egret.registerClass(FriendItem,"FriendItem");var FriendItemBlack=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/friend/FriendItemBlackSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.btnDel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnTap,this)},n.onBtnTap=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11708,this._friendData.role_id))},n.dataChanged=function(){this._friendData=this.data;var e=this._friendData.name+"(";this._friendData.round>0&&(e+=this._friendData.round+"转"),e+=this._friendData.level+"级)",this.txtName.text=e,this.bmHead.setHeadURLByPartner(this._friendData.icon)},t}(eui.ItemRenderer);egret.registerClass(FriendItemBlack,"FriendItemBlack");var FriendItemCheck=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/friend/FriendItemCheckSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.btnYes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesBtnTap,this),this.btnNo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNoBtnTap,this)},n.onYesBtnTap=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11705,{id:this._friendData.role_id,type:1}))},n.onNoBtnTap=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11705,{id:this._friendData.role_id,type:2}))},n.dataChanged=function(){this._friendData=this.data;var e=this._friendData.name+"(";this._friendData.round>0&&(e+=this._friendData.round+"转"),e+=this._friendData.level+"级)",this.txtName.text=e,this.txtFight.text=this._friendData.power.toString(),this.bmHead.setHeadURLByPartner(this._friendData.icon)},t}(eui.ItemRenderer);egret.registerClass(FriendItemCheck,"FriendItemCheck");var FriendItemLast=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/friend/FriendItemLastSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.headitem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowMenu,this)},n.onShowMenu=function(e){e.stopPropagation();var t=FriendMenuView.getInstance();t.updateData(this._friendData.role_id),t.x=e.stageX,t.y=e.stageY,GameContent.gameLayers.windowLayer.addChild(t)},n.dataChanged=function(){this._friendData=this.data;var e=this._friendData.name+"(";this._friendData.round>0&&(e+=this._friendData.round+"转"),e+=this._friendData.level+"级)",this.txtName.text=e;var t=ChatModel.getInstance().getPrivateData(this._friendData.role_id);t.length>0?this.txtContent.text=t[t.length-1].content:this.txtContent.text="",this.headitem.setHeadURLByPartner(this._friendData.icon)},t}(eui.ItemRenderer);egret.registerClass(FriendItemLast,"FriendItemLast");var FriendMenuView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/friend/FriendMenu.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnSl.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSl,this),this.btnDel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDel,this),this.btnPb.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPb,this),this.btnFriend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFriend,this),this.btnBless.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBless,this),this.addGlobalEventListener(FriendEvtName.FRIEND_MENU_CLOSE,this.dispose,this),this._btnArr=[],this._btnArr.push(this.btnSl),this._btnArr.push(this.btnDel),this._btnArr.push(this.btnPb),this._btnArr.push(this.btnFriend),this._btnArr.push(this.btnBless)},n.onSl=function(){this.dispatchGlobalEvent(new ParamEvent(FriendEvtName.FRIEND_OPEN_PRIVATE,this._roleId)),this.dispose()},n.onDel=function(){this.dispatchGlobalEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11708,this._roleId)),this.dispose()},n.onPb=function(){this.dispatchGlobalEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11707,this._roleId)),this.dispose()},n.onFriend=function(){this.dispatchGlobalEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11703,this._roleId)),this.dispose()},n.onBless=function(){var e=FanLiModel.getInstance().getBlessConfig()[0].template_id;this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD19700,{id:this._roleId,cfg_id:e})),this.dispose()},n.updateData=function(e){this._roleId=e;var t=null!=FriendModel.getInstance().getFriendData(this._roleId);this.btnSl.visible=t,this.btnFriend.visible=!t,this.btnDel.visible=t;var i=FanLiModel.getInstance().getBlessConfig()[0].template_id;this.btnBless.visible=GoodsListProxy.getInstance().findGoodNumber(i)>0;for(var n=0,s=0;s<this._btnArr.length;s++)this._btnArr[s].visible&&(this._btnArr[s].y=6+50*n,n++);this.menuBg.height=10+50*n},n.dispose=function(){this.parent&&this.parent.removeChild(this)},t}(BaseView);egret.registerClass(FriendMenuView,"FriendMenuView");var FriendMsgItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/friend/FriendMsgItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.dataChanged=function(){this._msgData=this.data,this.txtMsg.text=this._msgData.content,this.txtMsg.width=this.txtMsg.width>430?430:this.txtMsg.width,this._msgData.ctime&&this._msgData.ctime>0?(this.txtTime.text=TimeUtil.formatTime(1e3*this._msgData.ctime),this.timeBg.visible=!0,this.txtTime.visible=!0):(this.timeBg.visible=!1,this.txtTime.visible=!1),this.msgBg.width=this.txtMsg.width+50,this._msgData.name==RoleModel.getInstance().getRoleBaseInfo().name?(this.bmHead.setHeadURLByPartner(0,RoleModel.getInstance().getRoleBaseInfo().getCareer(),RoleModel.getInstance().getRoleBaseInfo().getSex()),this.bmHead.x=493,this.msgBg.source="friendMsgBg2",this.msgBg.x=this.bmHead.x-this.msgBg.width-10,this.txtMsg.x=this.msgBg.x+12):(this.bmHead.setHeadURLByPartner(this._msgData.icon),this.msgBg.source="friendMsgBg",this.msgBg.x=91,this.bmHead.x=20,this.txtMsg.x=124)},t}(eui.ItemRenderer);egret.registerClass(FriendMsgItem,"FriendMsgItem");var FriendPrivateWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/friend/FriendPrivateViewSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.FRIEND,this.setImageTitle("title_friend_sl")},n.updateData=function(e){this._role_id>0&&this.updateList()},n.onSend=function(){if(""!=this.txtInput.text){var e=FilterText.getInstance().getFilterStr(this.txtInput.text);PhpHttpStatisticsManager.sendChat(e,1,this._role_id,this._freindData.name),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ChatEvtName.CHAT_CCMD11602,{content:e,id:this._role_id})),this.txtInput.text="";var t=new SCMD11602;t.send_role_id=this._role_id,t.name=RoleModel.getInstance().getRoleBaseInfo().name,t.content=e,t.ctime=TimeUtil.getTimeNow(),ChatModel.getInstance().updatePrivateData(t),this.updateList()}},n.setFriend=function(e){this._role_id=e,this._freindData=FriendModel.getInstance().getFriendData(this._role_id),this.txtTitle.htmlText="正在与<font color='#02a4e7'>"+this._freindData.name+"</font>聊天",this.updateList()},n.updateList=function(){for(var e=new eui.ArrayCollection,t=ChatModel.getInstance().getPrivateData(this._role_id),i=0;i<t.length;i++)e.addItem(t[i]);this.msgList.dataProvider=e},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnSend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSend,this),this.addGlobalEventListener(ChatEvtName.CHAT_SCMD11602_UPDATE,this.updateData,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnSend.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSend,this),this.removeGlobalEventListener(ChatEvtName.CHAT_SCMD11602_UPDATE,this.updateData,this)},t}(LayeroutWindow);egret.registerClass(FriendPrivateWindow,"FriendPrivateWindow");var FriendWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/friend/FriendViewSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.FRIEND,this.tabBar.dataProvider=new eui.ArrayCollection(["最近","好友"]),this.updateFriendList()},n.onTap=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_MENU_CLOSE))},n.onBarItemTap=function(e){this.updateFriendList()},n.updateRedDots=function(){this.btnCheck.showRedDot=FriendModel.getInstance().getCheckList().length>0},n.setIndex=function(e){void 0===e&&(e=0),this.tabBar.selectedIndex=e,this.updateFriendList(),this.updateRedDots()},n.updateFriendList=function(){var e,t=new eui.ArrayCollection;this.tabBar.selectedIndex>0?(e=FriendModel.getInstance().getFriendList(),this.friendList.itemRenderer=FriendItem):(e=FriendModel.getInstance().getFriendLastList(),this.friendList.itemRenderer=FriendItemLast);for(var i=0;i<e.length;i++)t.addItem(e[i]);this.friendList.dataProvider=t,this.txtCount.text=e.length+"/100"},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_friend")},n.onBtnAddTap=function(e){this._addView||(this._addView=new FriendAddWindow,this._addView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._addView.isPop2=!0},n.disposeView=function(e){this._addView&&(this._addView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._addView.dispose(),this._addView=null)},n.onBtnCheckTap=function(e){this._checkView||(this._checkView=new FriendCheckWindow,this._checkView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeCheckView,this)),this._checkView.isPop2=!0,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11704))},n.disposeCheckView=function(e){this._checkView&&(this._checkView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeCheckView,this),this._checkView.dispose(),this._checkView=null)},n.onBtnBlackTap=function(e){this._blackView||(this._blackView=new FriendBlackWindow,this._blackView.addEventListener(EventName.WINDOW_DISPOSE,this.disposeBlackView,this)),this._blackView.isPop2=!0,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FriendEvtName.FRIEND_CCMD11701))},n.disposeBlackView=function(e){this._blackView&&(this._blackView.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeBlackView,this),this._blackView.dispose(),this._blackView=null)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnAddTap,this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCheckTap,this),this.btnBlack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnBlackTap,this),this.addGlobalEventListener(FriendEvtName.FRIEND_CCMD11700_UPDATE,this.updateFriendList,this),this.addGlobalEventListener(FriendEvtName.FRIEND_CCMD11702_UPDATE,this.updateRedDots,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnAddTap,this),this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCheckTap,this),this.btnBlack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnBlackTap,this),this.removeGlobalEventListener(FriendEvtName.FRIEND_CCMD11700_UPDATE,this.updateFriendList,this),this.removeGlobalEventListener(FriendEvtName.FRIEND_CCMD11702_UPDATE,this.updateRedDots,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t}(LayeroutWindow);egret.registerClass(FriendWindow,"FriendWindow");var FubenCailiaoItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/fuben/FubenCailiaoItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnSao.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSaoClick,this),this.btnSao2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSaoClick2,this),this.txtMonth.htmlText="<u>月卡可扫荡</u>",this.txtMonth.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMonthClick,this),this._imageTitle||(this._imageTitle=new PicLoader,this._imageTitle.x=35,this._imageTitle.y=27,this.addChild(this._imageTitle))},n.onGetClick=function(){FunctionOpenModel.getInstance().check(22+this._fubenInfo.template_id)&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FubenEvtName.FUBEN_CCMD13200,this._fubenInfo.template_id))},n.onMonthClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(VipEvtName.OPEN_VIP_MONTH))},n.onSaoClick=function(){RoleModel.getInstance().CheckGold(Number(this.txtCost.text))&&(this.btnSao.enabled=!1,this.fubenBar.width=0,this.fubenBar.visible=!0,this.fubenBarBg.visible=!0,this._time=0,TimerManager.getInstance().remove(50,this.timeComplete,this),TimerManager.getInstance().add(50,this.timeComplete,this))},n.onSaoClick2=function(){this.btnSao2.enabled=!1,this.fubenBar.width=0,this.fubenBar.visible=!0,this.fubenBarBg.visible=!0,this._time2=0,TimerManager.getInstance().remove(50,this.timeComplete2,this),TimerManager.getInstance().add(50,this.timeComplete2,this)},n.timeComplete=function(){this._time++,this.fubenBar.width=138*(this._time/20),this._time>=20&&(TimerManager.getInstance().remove(50,this.timeComplete,this),this.fubenBar.visible=!1,this.fubenBarBg.visible=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FubenEvtName.FUBEN_CCMD13202,this._fubenInfo.template_id)))},n.timeComplete2=function(){this._time2++,this.fubenBar.width=138*(this._time2/20),this._time2>=20&&(TimerManager.getInstance().remove(50,this.timeComplete2,this),this.fubenBar.visible=!1,this.fubenBarBg.visible=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FubenEvtName.FUBEN_CCMD13203,this._fubenInfo.template_id)))},n.dataChanged=function(){this._fubenInfo=this.data;var e=this._fubenInfo.template_id;this.item.showLv(!1),this.item.data=this._fubenInfo.itemList[0].info,this.txtCost.text=this._fubenInfo.sweep.toString(),this._imageTitle.load("resource/assets/icon/fuben/fubenTitle_"+e+".png");var t=this._fubenInfo.time,i=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_6,e);if(this.txtCount.text=t-i+"次",this.btnGet.visible=!1,this.btnSao.visible=!1,this.btnSao2.visible=!1,this.txtMonth.visible=!VipModel.getInstance().isMonth,t>i){this.txtCost.visible=!1,this.iconCost.visible=!1;var n=FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE6,e);VipModel.getInstance().isMonth&&n>0?this.btnSao2.visible=!0:this.btnGet.visible=!0}else{this.txtCost.visible=!0,this.iconCost.visible=!0,this.btnSao.visible=!0,t=this._fubenInfo.time+VipModel.getInstance().getVipVoByLv().vip_fuben_material;var s=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_7,e);this.btnSao.enabled=t>s,this.txtCount.text=t-s+"次"}var a=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.FUBEN_CAILIAO+e-1).open_level;RoleModel.getInstance().getRoleCommon().level>=a?this.tipGroup.visible=!1:(this.txtTips.text=a+"级开启",this.tipGroup.visible=!0)},n.dispose=function(){this.parent&&this.parent.removeChild(this),this._imageTitle&&(this._imageTitle.parent&&this._imageTitle.parent.removeChild(this._imageTitle),this._imageTitle.dispose(),this._imageTitle=null),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnSao.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSaoClick,this),this.btnSao2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSaoClick2,this),TimerManager.getInstance().remove(50,this.timeComplete,this),TimerManager.getInstance().remove(50,this.timeComplete2,this)},t}(eui.ItemRenderer);egret.registerClass(FubenCailiaoItem,"FubenCailiaoItem");var FubenCailiaoView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fuben/FubenCailiaoViewSkin.exml"
}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateData,this),this._itemArr=[],this._isInit||(this._isInit=!0,this.updateData())},n.updateData=function(){if(this._isInit)for(var e,t,i=0;4>i;i++)e=FubenModel.getInstance().getInfoById(i+1),t=this._itemArr[i],null==t&&(t=new FubenCailiaoItem,t.y=188*i),t.data=e,this.addChild(t)},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateData,this);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t.dispose(),t=null;this._itemArr=null},t}(BaseView);egret.registerClass(FubenCailiaoView,"FubenCailiaoView");var FubenEquipItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/fuben/FubenEquipItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddClick,this),GameDispatcher.getInstance().addEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this)},n.onAddClick=function(){var e=this,t=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_21002).value);GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"",content:"是否花费"+t+"元宝购买次数",func:function(){RoleModel.getInstance().CheckGold(t)&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FubenEvtName.CMD21010,e._fubenInfo.template_id))}}))},n.onGetClick=function(){var e=GoodsListProxy.getInstance().findGoodNumber(this._fubenInfo.con_item[0].info.template_id);e>=this._fubenInfo.con_item[0].num?(FubenModel.getInstance().fuBenID_equip=this._fubenInfo.template_id,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FubenEvtName.CMD21000,this._fubenInfo.template_id))):GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.OPEN_GETMATERIAL_BUY_WINDOW,{typeId:this._fubenInfo.con_item[0].info.template_id,type:"FubenEquip",linkStrArr:[""]}))},n.dataChanged=function(){this._fubenInfo=this.data;for(var e,t=(this._fubenInfo.template_id,0);t<this._fubenInfo.itemList.length;t++)e=this["item_"+t],e.data=this._fubenInfo.itemList[t].info;this.txtName.text=this._fubenInfo.name,RoleModel.getInstance().getRoleCommon().level<this._fubenInfo.open_level?(this.btnGet.visible=!1,this.txtTips.text=this._fubenInfo.open_level+"级开启",this.tipGroup.visible=!0):RoleModel.getInstance().getRoleCommon().round<this._fubenInfo.open_round?(this.btnGet.visible=!1,this.txtTips.text=this._fubenInfo.open_round+"转开启",this.tipGroup.visible=!0):(this.btnGet.visible=!0,this.tipGroup.visible=!1),this.updateDaily()},n.updateDaily=function(){var e=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_21001).value),t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_53,this._fubenInfo.template_id);this.btnAdd.visible=e>t;var i=this._fubenInfo.time+t,n=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_52,this._fubenInfo.template_id);this.txtCount.text=i-n+"次",this.btnGet.visible=i>n},n.dispose=function(){this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddClick,this),GameDispatcher.getInstance().removeEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this)},t}(eui.ItemRenderer);egret.registerClass(FubenEquipItem,"FubenEquipItem");var FubenEquipView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fuben/FubenEquipViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateCount,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddClick,this),this.onUpdateList()},n.updateCount=function(){this._itemId=17520005,this._backCount=GoodsListProxy.getInstance().findGoodNumber(this._itemId),this.txtCount.text=this._backCount.toString()},n.onAddClick=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_GETMATERIAL_BUY_WINDOW,{typeId:this._itemId,type:"FubenEquip",linkStrArr:[""]}))},n.onUpdateList=function(){for(var e=FubenModel.getInstance().getEquipList(),t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this.list.dataProvider=t,this.updateCount()},n.dispose=function(){e.prototype.dispose.call(this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddClick,this),this.removeGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateCount,this);for(var t=0;t<this.list.numChildren;t++){var i=this.list.getChildAt(t);i&&i.dispose()}},t}(BaseView);egret.registerClass(FubenEquipView,"FubenEquipView");var FubenTiaozhanView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fuben/FubenTiaozhanViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addGlobalEventListener(FubenEvtName.FUBEN_CCMD14500_UPDATE,this.updateData,this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.onUpdateRank,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.txtRank.htmlText="<u>查看排行榜</u>",this.txtRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowRank,this)},n.onShowRank=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(RankEvtName.RANK_OPEN_COMMON,RankModel.RANK_TYPE_12))},n.updateData=function(e){var t=Number(e.data)+1,i=FubenModel.getInstance().getTiaozhanVo(t),n=!1;i||(t-=1,n=!0);var s,a,o;this.point_1.source="fuben_pointBg",this.point_2.source="fuben_pointBg",this.point_3.source="fuben_pointBg";var r=t%3;1==r?(s=t,a=t+1,o=t+2,this.point_1.source="fuben_point",this.icon_1.visible=!1,this.icon_2.visible=!1,this.icon_3.visible=!1,this.guild_bar.width=this.point_1.x):2==r?(s=t-1,a=t,o=t+1,this.point_1.source="fuben_point",this.point_2.source="fuben_point",this.icon_1.visible=!0,this.icon_2.visible=!1,this.icon_3.visible=!1,this.guild_bar.width=this.point_2.x):0==r&&(s=t-2,a=t-1,o=t,this.point_1.source="fuben_point",this.point_2.source="fuben_point",this.point_3.source="fuben_point",this.icon_1.visible=!0,this.icon_2.visible=!0,this.icon_3.visible=!1,this.guild_bar.width=this.point_3.x),n&&(this.point_1.source="fuben_point",this.point_2.source="fuben_point",this.point_3.source="fuben_point",this.icon_1.visible=!0,this.icon_2.visible=!0,this.icon_3.visible=!0,this.guild_bar.width=570),i=FubenModel.getInstance().getTiaozhanVo(s);var h=SceneModel.getInstance().getMonsterConfig(i.boss_id);null==this._monsterFigure&&(this._monsterFigure=new MonsterFigure,this._monsterFigure.x=105,this._monsterFigure.y=115),this.monsterFigureContainer.addChild(this._monsterFigure),this._monsterFigure.setRes(h.resID),this.item_1.data=i.show[0].info,this.item_2.data=i.show[1].info,this.txtGuan_1.text=s.toString(),i=FubenModel.getInstance().getTiaozhanVo(a),h=SceneModel.getInstance().getMonsterConfig(i.boss_id),null==this._monsterFigure2&&(this._monsterFigure2=new MonsterFigure,this._monsterFigure2.x=288,this._monsterFigure2.y=115),this.monsterFigureContainer.addChild(this._monsterFigure2),this._monsterFigure2.setRes(h.resID),this.item_3.data=i.show[0].info,this.item_4.data=i.show[1].info,this.txtGuan_2.text=a.toString(),i=FubenModel.getInstance().getTiaozhanVo(o),h=SceneModel.getInstance().getMonsterConfig(i.boss_id),null==this._monsterFigure3&&(this._monsterFigure3=new MonsterFigure,this._monsterFigure3.x=473,this._monsterFigure3.y=115),this.monsterFigureContainer.addChild(this._monsterFigure3),this._monsterFigure3.setRes(h.resID),this.item_5.data=i.show[0].info,this.item_6.data=i.show[1].info,this.txtGuan_3.text=o.toString(),this.txtPro.text=FubenModel.getInstance().getProStr(i),this.btnGet.visible=!n,this.txtTips.visible=n},n.onUpdateRank=function(e){this._rankData=e.data;for(var t=this._rankData.rank_list,i=0;3>i;i++)t[i]?this["txtName"+i].text=t[i].rank+"  "+t[i].name+"("+t[i].value+"关)":this["txtName"+i].text=""},n.onGetClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FubenEvtName.FUBEN_CCMD14501))},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(FubenEvtName.FUBEN_CCMD14500_UPDATE,this.updateData,this),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.onUpdateRank,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.txtRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowRank,this),this._monsterFigure&&(this._monsterFigure.dispose(),this._monsterFigure=null),this._monsterFigure2&&(this._monsterFigure2.dispose(),this._monsterFigure2=null),this._monsterFigure3&&(this._monsterFigure3.dispose(),this._monsterFigure3=null),this.item_1.dispose(),this.item_1=null,this.item_2.dispose(),this.item_2=null,this.item_3.dispose(),this.item_3=null,this.item_4.dispose(),this.item_4=null,this.item_5.dispose(),this.item_5=null,this.item_6.dispose(),this.item_6=null},t}(BaseView);egret.registerClass(FubenTiaozhanView,"FubenTiaozhanView");var FubenWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/fuben/FubenViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.FUBEN,this.tabBar.dataProvider=new eui.ArrayCollection(["材料副本","副本挑战","装备副本"]),this._isInit||(this._isInit=!0,this.setSelectIndex())},n.onBarItemTap=function(e){this.setSelectIndex(this.tabBar.selectedIndex)},n.setSelectIndex=function(e){if(void 0===e&&(e=0),this._isInit){if(1==e){var t=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_27).open_level;if(RoleModel.getInstance().getRoleCommon().level<t)return Message.show(t+"级开启"),void(this.tabBar.selectedIndex=0)}switch(this.tabBar.selectedIndex=e,this._curView&&this._curView.parent&&this._curView.parent.removeChild(this._curView),e){case 0:this._cailiao||(this._cailiao=new FubenCailiaoView),this._curView=this._cailiao,this.contentGroup.addChild(this._curView);break;case 1:this._tiaozhan||(this._tiaozhan=new FubenTiaozhanView),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FubenEvtName.FUBEN_CCMD14500)),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(RankEvtName.RANK_CCMD13500,RankModel.RANK_TYPE_12)),this._curView=this._tiaozhan,this.contentGroup.addChild(this._curView);break;case 2:this._equip||(this._equip=new FubenEquipView),this._curView=this._equip,this.contentGroup.addChild(this._equip)}}},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.tabBar.validateNow(),this.tabBar.getChildAt(0).showRedDot=FubenModel.getInstance().isHasCailao},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this._cailiao&&(this._cailiao.parent&&this._cailiao.parent.removeChild(this._cailiao),this._cailiao.dispose(),this._cailiao=null),this._tiaozhan&&(this._tiaozhan.parent&&this._tiaozhan.parent.removeChild(this._tiaozhan),this._tiaozhan.dispose(),this._tiaozhan=null),this._equip&&(this._equip.parent&&this._equip.parent.removeChild(this._equip),this._equip.dispose(),this._equip=null)},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_fuben")},t}(LayeroutWindow);egret.registerClass(FubenWindow,"FubenWindow");var FuliHuoDongView=function(e){function t(){e.call(this),this._leftTime=0,this._currentActivityType=0,this._system=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fuli/FuliHuoDongViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiCompHandler,e),e._model=HuoDongDailyModel.getInstance(),e._pic=new PicLoader,e._imageContainer.addChildAt(e._pic,0),e._btnGoTo.addEventListener(egret.TouchEvent.TOUCH_TAP,e.clickGoTo,e),e._model.addEventListener(HuoDongDailyModel.UPDATE_HDDAILY_CONSUME,e.updateRewardHandler,e),e._model.addEventListener(HuoDongDailyModel.UPDATE_HDDAILYTARGET_CONSUME,e.updateRewardHandler,e)},n.updateView=function(e){var t=this;t._vo=e,t._scroll.stopAnimation();var i=UrlUtil.getHuoDongDailyPic(e.show_icon+"_pic");t._pic.load(i);var n=e.activityList;if(t._system=t._vo.type,t._currentActivityType=0,t.setCurrentActvietyType(n),t.setTimer(),0==t._currentActivityType)return void Message.show("没有找到对应的活动配置");var s=t._model.getDailyValue(t._system,t._currentActivityType);switch(t._currentActivityType==HuoDongDailyModel.LEVEL&&t._system==HuoDongDailyModel.TARGET?(t._txtValue.textAlign="right",t._txtValue.width=130,t._txtValue.text=Tools.convertRoundLv(RoleModel.getInstance().getRoleCommon().level,RoleModel.getInstance().getRoleCommon().round)):(t._txtValue.textAlign="center",t._txtValue.width=84,t._txtValue.text=Tools.convertNumber(s)),t._system){case HuoDongDailyModel.CONSUME:t.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQUEST_14100,{type:t._currentActivityType}));break;case HuoDongDailyModel.TARGET:t._currentActivityType==HuoDongDailyModel.LEVEL&&t.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQUEST_14200,{type:HuoDongDailyModel.ROUND})),t.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQUEST_14200,{type:t._currentActivityType}))}t.updateTxtValue()},n.createActivityItems=function(e){for(var t,i,n,s=this,a=new Array,o=(new Array,0);o<e.length&&a.length<10;o++)s._system==HuoDongDailyModel.CONSUME?t=s._model.getHDDailyConsume(e[o]):s._system==HuoDongDailyModel.TARGET&&(t=s._model.getHDDailyTarget(e[o])),i=HuoDongDailyModel.getInstance().getRewardStatu(t.template_id,s._system),i>0?n=t:a.push(t);var r=a;n&&r.push(n);var h=new Array;for(o=0;o<r.length;o++)t=r[o],h.push({vo:t,system:s._system});null==s._dataGrpArr&&(s._dataGrpArr=new eui.ArrayCollection,s._itemContainer.dataProvider=s._dataGrpArr),s._dataGrpArr.source=h},n.setCurrentActvietyType=function(e){var t=this;t._currentActivityType=0;for(var i,n=0;n<e.length;n++){if(t._system==HuoDongDailyModel.CONSUME){i=t._model.getHDDailyConsume(e[n]);break}if(t._system==HuoDongDailyModel.TARGET){i=t._model.getHDDailyTarget(e[n]);break}}i.type&&(t._currentActivityType=i.type)},n.setTimer=function(){var e=this,t=(e._vo.endDate.getTime()-(new Date).getTime())/1e3;t=Math.ceil(t),TimerManager.getInstance().remove(1e3,e.addDJS,e),t>0?(e._leftTime=t,TimerManager.getInstance().add(1e3,e.addDJS,e),e.addDJS(),e._imageContainer.contains(e._txtTime)||e._imageContainer.addChild(e._txtTime)):e._imageContainer.contains(e._txtTime)&&e._imageContainer.removeChild(e._txtTime)},n.addDJS=function(){var e=this;return e._leftTime<=0?(TimerManager.getInstance().remove(1e3,e.addDJS,e),void(e._leftTime=0)):(e._leftTime--,void(e._txtTime.text=TimeUtil.getTime2(e._leftTime)))},n.updateRewardHandler=function(e){var t=this,i=t._vo.activityList;t.createActivityItems(i),t.updateTxtValue(),t=null},n.updateTxtValue=function(){var e=this;e._currentActivityType==HuoDongDailyModel.DAYDAY_CHARGE&&(e._txtValue.textAlign="center",e._txtValue.width=84,e._txtValue.text=e._model.getDayDayChargeDay()+"")},n.clickGoTo=function(e){var t=this;if(null!=t._vo)switch(t._vo.template_id){case HuoDongDailyModel.XIAOFEI2:t.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_MALL));break;case HuoDongDailyModel.TREASURE2:t.dispatchGlobalEvent(new ParamEvent(TreasureEvtName.TREASURE_OPEN_WINDOW));break;case HuoDongDailyModel.DAYDAY_CHARGE2:case HuoDongDailyModel.CHARGE2:t.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN));break;case HuoDongDailyModel.WAVE2:t.dispatchGlobalEvent(new ParamEvent(CheckPointBossEvtName.CHECKPOINTBOSS_OPEN_WINDOW));break;case HuoDongDailyModel.FIGHT2:t.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_BUILD));break;case HuoDongDailyModel.FAST2:case HuoDongDailyModel.LEVEL2:t.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_SPEED_PK))}},n.dispose=function(){e.prototype.dispose.call(this);var t=this;TimerManager.getInstance().remove(1e3,this.addDJS,this),t._pic&&(t._pic.parent&&t._pic.parent.removeChild(t._pic),t._pic.dispose(),t._pic=null),t._btnGoTo&&(t._btnGoTo.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.clickGoTo,t),t._btnGoTo.parent&&t._btnGoTo.parent.removeChild(t._btnGoTo),t._btnGoTo=null),t._itemContainer=null,t._imageContainer=null,t._scroll=null,t._txtTime.dispose(),t._txtTime=null,t._txtValue.dispose(),t._txtValue=null,t._model.removeEventListener(HuoDongDailyModel.UPDATE_HDDAILY_CONSUME,t.updateRewardHandler,t),t._model.removeEventListener(HuoDongDailyModel.UPDATE_HDDAILYTARGET_CONSUME,t.updateRewardHandler,t),t._model=null,t=null},t}(BaseView);egret.registerClass(FuliHuoDongView,"FuliHuoDongView");var FuliJihuoView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fuli/FuliJihuoViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addGlobalEventListener(VipEvtName.VIP_CCMD11910,this.updateData,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},n.onGetClick=function(){var e=this._txtCode.text;null!=e&&""!=e&&PhpHttpStatisticsManager.exchangeActivationCode(e)},n.clearCode=function(){this._txtCode.text=""},n.updateData=function(){},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(VipEvtName.VIP_CCMD11910,this.updateData,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},t}(BaseView);egret.registerClass(FuliJihuoView,"FuliJihuoView");var FuliJijinItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fuli/FuliJijinItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.icon=new PicLoader,this.icon.x=166,this.icon.y=23,this.addChild(this.icon)},n.onGet=function(){FuliModel.getInstance().isBuyJijin?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FuLiEvtName.CCMD15701,this._jijinData.template_id)):PhpHttpStatisticsManager.requestChargeOrder(1,Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_15701).value),3,"成长基金",1)},n.dataChanged=function(){this._jijinData=this.data,this.icon.load(UrlUtil.getSmallPic(this._jijinData.itemList[0].info.pic)),this.txtCost.text=this._jijinData.itemList[0].num.toString(),this.txtContent.htmlText="通关<font color='"+ColorUtil.COLOR_GREEN+"'>"+this._jijinData.req_hook+"关</font>即可领取",this.btnGet.visible=!1,this.iconLq.visible=!1,FuliModel.getInstance().isJijinGetReward(this._jijinData.template_id)?this.iconLq.visible=!0:SceneModel.getInstance().getCurrentWaveID()>=this._jijinData.req_hook&&(this.btnGet.visible=!0)},t}(eui.ItemRenderer);egret.registerClass(FuliJijinItem,"FuliJijinItem");var FuliJijinView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fuli/FuliJijinViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.jijinBg=new PicLoader,this.jijinBg.load(rURL("resource/assets/icon/fuli/fuli_jijinBg.png")),this.addChildAt(this.jijinBg,0),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.addGlobalEventListener(FuLiEvtName.CCMD15700_UPDATE,this.updateData,this),this.updateData()},n.updateData=function(){for(var e=FuliModel.getInstance().getJijinArr(),t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this.itemList.dataProvider=t,this.btnBuy.visible=!FuliModel.getInstance().isBuyJijin,this.iconBuy.visible=!this.btnBuy.visible},n.onBuy=function(){ConfigManager.isTencent()?ConfigManager.isIOS()?QQManager.getInstance().QQBuyGoods(QQManager.FOUND_IOS):QQManager.getInstance().QQBuyGoods(QQManager.FOUND_ANDROID):PhpHttpStatisticsManager.requestChargeOrder(1,Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_15701).value),3,"成长基金",1)},n.dispose=function(){e.prototype.dispose.call(this),this.btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.removeGlobalEventListener(FuLiEvtName.CCMD15700_UPDATE,this.updateData,this),this.jijinBg&&(this.jijinBg.parent&&this.jijinBg.parent.removeChild(this.jijinBg),this.jijinBg.dispose(),this.jijinBg=null)},t}(BaseView);egret.registerClass(FuliJijinView,"FuliJijinView");var FuliLoginView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fuli/FuliLoginViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.addGlobalEventListener(LoginRewardEvtName.LOGIN_REWARD_CCMD12700_UPDATE,this.updateData,this),this.imageBg=new PicLoader,this.addChildAt(this.imageBg,0),this.imageBg.load("resource/assets/icon/fanli/fanli_LoginBg.png");var e=new eui.HorizontalLayout;e.gap=10,this.rewardList.layout=e},n.updateData=function(e){this._day=e.data.day,this._award_id=e.data.award_id,this.txtDay.text=this._day.toString();for(var t,i,n=1;8>=n;n++)t=this["box_"+n],t.name="box_"+n,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBoxClick,this),i=this["lingqu_"+n],this._award_id>=n&&(i.visible=!0,2!=n&&7!=n&&8!=n&&(t.source="loginRewardBox_open"));var s=LoginRewardModel.getInstance().getIdByDay(this._day);this._award_id<s?(this.btnGet.label="领取奖励",this.btnGet.enabled=!0):(this.btnGet.label="已领取",this.btnGet.enabled=!1),this.updateReward(8==this._award_id?8:this._award_id+1)},n.onBoxClick=function(e){var t=e.currentTarget.name.split("_")[1];this.updateReward(t)},n.updateReward=function(e){this._vo=LoginRewardModel.getInstance().getRewardVoById(e),this._itemFly=[];for(var t=new eui.ArrayCollection,i=0;i<this._vo.itemList.length;i++)t.addItem(this._vo.itemList[i]),this._itemFly.push(this._vo.itemList[i].info.pic);this.rewardList.dataProvider=t},n.onGetClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(LoginRewardEvtName.LOGIN_REWARD_CCMD12701)),null!=this._itemFly&&void 0!=this._itemFly&&AccessGoodFlyEffectManager.getInstance().flyArray(this._itemFly)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.removeGlobalEventListener(LoginRewardEvtName.LOGIN_REWARD_CCMD12700_UPDATE,this.updateData,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null)},t}(BaseView);egret.registerClass(FuliLoginView,"FuliLoginView");var FuliVipView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fuli/FuliVipViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addGlobalEventListener(VipEvtName.VIP_CCMD11910_UPDATE,this.updateData,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},n.onGetClick=function(){var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_11901),t=0;e&&(ConfigManager.isTencent()?ConfigManager.isIOS()?QQManager.getInstance().QQBuyGoods(QQManager.MONTH_IOS):QQManager.getInstance().QQBuyGoods(QQManager.MONTH_ANDROID):(t=Number(e.value),PhpHttpStatisticsManager.requestChargeOrder(1,t,2,"月卡",1)))},n.updateData=function(e){this._last_time=Number(e.data),this._last_time>0?(this.txtTimeTitle.visible=!0,this.txtTime.visible=!0,this.txtTime.text=TimeUtil.getTime3(this._last_time),TimerManager.getInstance().remove(1e3,this.onShowTime,this),TimerManager.getInstance().add(1e3,this.onShowTime,this)):(this.txtTimeTitle.visible=!1,this.txtTime.visible=!1,TimerManager.getInstance().remove(1e3,this.onShowTime,this))},n.onShowTime=function(){this._last_time--,this._last_time>0?this.txtTime.text=TimeUtil.getTime3(this._last_time):(this.txtTime.text="0",TimerManager.getInstance().remove(1e3,this.onShowTime,this))},n.dispose=function(){e.prototype.dispose.call(this),this.txtTime.text="0",TimerManager.getInstance().remove(1e3,this.onShowTime,this),this.removeGlobalEventListener(VipEvtName.VIP_CCMD11910_UPDATE,this.updateData,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},t}(BaseView);egret.registerClass(FuliVipView,"FuliVipView");var FuliWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/fuli/FuliViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this);var t=this;t.resGroupName=GModuleResGroupName.FULI,t._btnCach=[],t.createIcons(),t.updateRewardHandler()},n.createIcons=function(){for(var e,t,i,n=this,s=HuoDongDailyModel.getInstance().getClientData(HuoDongDailyModel.DAILY),a='<e:Skin class="skins.ButtonSkin" states="up,down" xmlns:e="http://ns.egret.com/eui">\n                <e:Image width="100%" height="100%"\n                         source="{0}"\n                         source.down="{0}"/>\n            </e:Skin>',o=0,r=5+s.length,h=0;r>h;h++)t=n._btnCach[h],t||(t=new CustomButton,t.addEventListener(egret.TouchEvent.TOUCH_TAP,n.clickIcon,n),n._btnCach.push(t)),t.data=h,t.x=100*o+20,t.y=15,5>h?i=UrlUtil.getFolderPic("fuli","fuliBtn_"+h):(e=s[h-5],i=UrlUtil.getHuoDongDailyIcon(e.show_icon)),t.skinName=StringUtil.substitute(a,i),n._iconContainer.addChild(t),o++;n._iconContainer.addChild(n._selectImage),n.setIndex()},n.clickIcon=function(e){var t=this,i=e.currentTarget;t.setIndex(i.data)},n.setIndex=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var i=this,n=i._btnCach[e];if(i._selectImage.x=n.x-10,i._selectImage.y=n.y-17,t){var s=i._selectImage.x+100;i._timeId>0&&clearTimeout(i._timeId),i._timeId=setTimeout2(function(){i._scroller.validateNow(),s>i._scroller.width&&(i._scroller.viewport.scrollH=s-i._scroller.width)},500)}switch(i._curView&&i._curView.parent&&(i._curView.onCloseHandler(),i._curView.parent.removeChild(i._curView)),WeiXinSDKManager.getInstance().clearTimeLine(),e){case 0:i._loginView||(i._loginView=new FuliLoginView),i._curView=i._loginView,i._selectImage.x=n.x-18,i.dispatchGlobalEvent(new ParamEvent(LoginRewardEvtName.LOGIN_REWARD_CCMD12700));break;case 1:i._jihuoView||(i._jihuoView=new FuliJihuoView),i._jihuoView.clearCode(),i._curView=i._jihuoView,i._selectImage.x=n.x-20;break;case 2:i._noticeView||(i._noticeView=new NoticeView),i._curView=i._noticeView,i._selectImage.x=n.x-13;break;case 3:i._functionNoticeView||(i._functionNoticeView=new FunctionNoticeView),i._functionNoticeView.onOpenHandler(),i._curView=i._functionNoticeView,i._selectImage.x=n.x-18;break;case 4:i._treeView||(i._treeView=new MoneyTreeView),i._curView=i._treeView,i._selectImage.x=n.x-18;break;default:var a=HuoDongDailyModel.getInstance().getClientData(HuoDongDailyModel.DAILY),o=a[e-5];i._huodongView||(i._huodongView=new FuliHuoDongView),o&&i._huodongView.updateView(o),i._curView=i._huodongView,i._selectImage.x=n.x-18}i._curView&&i.contentGroup.addChild(i._curView),i.onBtnReturnSetIndex()},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this);var t=this;t.setImageTitle("title_fuli")},n.onCloseBtnClick=function(e){var t=this,i=e.data.type;0==i?t.isPop=!1:t._curView==t._functionNoticeView?0==t._functionNoticeView.isOpen?t.isPop=!1:t._functionNoticeView.changeState():t.isPop=!1},n.updateFixedNumHandler=function(){var e=this;e._btnCach[2].showRedDot=HuoDongDailyModel.getInstance().checkCanGetFunctionNoticeAwardAll()},n.updateRewardHandler=function(){for(var e,t,i=this,n=HuoDongDailyModel.getInstance().getClientData(HuoDongDailyModel.DAILY),s=5;s<i._btnCach.length;s++)e=i._btnCach[s],e.showRedDot=!1,t=n[s-5],t&&HuoDongDailyModel.getInstance().checkOneIcon(t)&&(e.showRedDot=!0)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this);var t=this;t.addGlobalEventListener(DailyEvtName.FIXED_DATA_CHANGE,t.updateFixedNumHandler,t),HuoDongDailyModel.getInstance().addEventListener(HuoDongDailyModel.UPDATE_HDDAILY_CONSUME,t.updateRewardHandler,t),HuoDongDailyModel.getInstance().addEventListener(HuoDongDailyModel.UPDATE_HDDAILYTARGET_CONSUME,t.updateRewardHandler,t),t.updateFixedNumHandler()},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.removeGlobalEventListener(DailyEvtName.FIXED_DATA_CHANGE,t.updateFixedNumHandler,t),HuoDongDailyModel.getInstance().removeEventListener(HuoDongDailyModel.UPDATE_HDDAILY_CONSUME,this.updateRewardHandler,this),HuoDongDailyModel.getInstance().removeEventListener(HuoDongDailyModel.UPDATE_HDDAILYTARGET_CONSUME,this.updateRewardHandler,this),WeiXinSDKManager.getInstance().clearTimeLine();for(var i,n=0;n<t._btnCach.length;n++)i=t._btnCach[n],i.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&i.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.clickIcon,t),i.dispose(),i=null;t._btnCach=null,t._jihuoView&&(t._jihuoView.parent&&t._jihuoView.parent.removeChild(t._jihuoView),t._jihuoView.dispose(),t._jihuoView=null),t._noticeView&&(t._noticeView.parent&&t._noticeView.parent.removeChild(t._noticeView),t._noticeView.dispose(),t._noticeView=null),t._treeView&&(t._treeView.parent&&t._treeView.parent.removeChild(t._treeView),t._treeView.dispose(),t._treeView=null),t._functionNoticeView&&(t._functionNoticeView.parent&&t._functionNoticeView.parent.removeChild(t._functionNoticeView),t._functionNoticeView.dispose(),t._functionNoticeView=null),t._loginView&&(t._loginView.parent&&t._loginView.parent.removeChild(t._loginView),t._loginView.dispose(),t._loginView=null)},t}(LayeroutWindow);egret.registerClass(FuliWindow,"FuliWindow");var FunctionNoticeDayItem=function(e){function t(t){e.call(this),this.nameArr=["羽翼","龙魂","宝石","充值","光环","关卡","等级","战力"],this._day=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fuli/FunctionNoticeDayItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiCompHandler=function(){this._imgSelected.visible=!1,this._imgItem=new PicLoader,this.addChild(this._imgItem),this._imgItem.x=29,this._imgItem.y=43,this._imgItem.load(UrlUtil.getFunctionNoticeURL(this._day+"")),this._imgBox=new PicLoader,this.addChild(this._imgBox),this._imgBox.x=40,this._imgBox.y=45,this._imgDay=new PicLoader,this.addChild(this._imgDay),this._imgDay.x=39,this._imgDay.y=6,this._imgDay.load(UrlUtil.getFunctionNoticeURL("day_"+this._day)),this.updateFixedNumHandler(),this.addGlobalEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.updateFixedNumHandler,this)},s.updateFixedNumHandler=function(){var e=HuoDongDailyModel.getInstance().kaiFuDay,t=FixedNumModel.getInstance().getFixedNumNode(FixedNumModel.FIXED_NUM_TYPE3,this._day);this._day>e?(this._day-e==1?(this._imgItem.visible=!1,this._imgDisable.visible=!1,this._imgBox.visible=!0,this._imgBox.load(UrlUtil.getFunctionNoticeURL("functionNotice_box1")),this._txtName.text="第"+this._day+"日可领取",this.touchEnabled=this.touchChildren=!0):(this._imgItem.visible=!1,this._imgDisable.visible=!0,this._imgBox.visible=!0,this._imgBox.load(UrlUtil.getFunctionNoticeURL("functionNotice_box2")),this._txtName.text="第"+this._day+"日可领取",this.touchEnabled=this.touchChildren=!1),this.showEff(!1)):(this._imgItem.visible=!0,this._imgDisable.visible=!1,this._imgBox.visible=!0,this._imgBox.load(UrlUtil.getFunctionNoticeURL("functionNotice_box1")),this._txtName.text=this.nameArr[this._day-1],this.touchEnabled=this.touchChildren=!0,null==t||t.value<=0?(this.showEff(!0),this._imgBox.visible=!0,this.showRedDot=!0):(this.showEff(!1),this._imgBox.visible=!1,this.showRedDot=!1))
},i(s,"day",function(){return this._day}),s.setSelected=function(e){this._imgSelected.visible=e},s.showEff=function(e){},s.dispose=function(){this.parent&&this.parent.removeChild(this),this._imgItem&&(this._imgItem.dispose(),this._imgItem=null),this._imgDay&&(this._imgDay.dispose(),this._imgDay=null),this.showEff(!1),this.removeGlobalEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.updateFixedNumHandler,this)},t}(Csprite);egret.registerClass(FunctionNoticeDayItem,"FunctionNoticeDayItem");var FunctionNoticeView=function(e){function t(){e.call(this),this._itemArr=[],this.isOpen=!1,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fuli/FunctionNoticeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this);var e=new eui.TileLayout;e.paddingTop=3,e.paddingLeft=3,e.paddingRight=3,e.paddingBottom=3,this._itemContainer.layout=e,e.horizontalGap=3,e.verticalGap=8;for(var t,i=0;8>i;i++)t=new FunctionNoticeDayItem(i+1),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClickHandler,this),this._itemContainer.addChild(t),this._itemArr.push(t);HuoDongDailyModel.getInstance().kaiFuDay;this._imgBottom=new PicLoader,this._group1.addChild(this._imgBottom),this._imgBottom.x=0,this._imgBottom.y=413,this._imgBottom.load(UrlUtil.getFunctionNoticeURL("bottom")),this._scroller.visible=!1},n.onOpenHandler=function(){},n.itemClickHandler=function(e){var t=e.currentTarget;1==this._group1.visible&&(this._group1.visible=!1),0==this._scroller.visible&&(this._scroller.visible=!0),null==this._imgContent&&(this._imgContent=new CustomImage,this._group2.addChild(this._imgContent),this._imgContent.x=0,this._imgContent.y=0),this.isOpen=!0,this._imgContent.source=UrlUtil.getFunctionNoticeURL("bg"+t.day),t.day<=HuoDongDailyModel.getInstance().kaiFuDay&&this.getAward(t.day)},n.changeState=function(){this.isOpen=!1,0==this._group1.visible&&(this._group1.visible=!0),1==this._scroller.visible&&(this._scroller.visible=!1)},n.getAward=function(e){if(1==HuoDongDailyModel.getInstance().checkCanGetFunctionNoticeAward(e)){var t=HuoDongDailyModel.getInstance().getFunctionNoticeAwardVo(e);this.dispatchGlobalEvent(new ParamEvent(FuLiEvtName.CCMD17900,{id:e}));for(var i,n=t.goodsList,s=this.localToGlobal(227,97),a=[],o=0;o<n.length;o++){i=n[o];for(var r=0;r<i.value;r++)a.push(GoodsListProxy.getInstance().getGoodsInfoByType(i.asset_id).pic)}AccessGoodFlyEffectManager.getInstance().flyArray(a,s)}},n.dispose=function(){e.prototype.dispose.call(this),this._imgBottom&&(this._imgBottom.dispose(),this._imgBottom=null),this._imgContent&&(this._imgContent.dispose(),this._imgContent=null);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t.dispose(),t=null;this._itemArr=[]},t}(BaseView);egret.registerClass(FunctionNoticeView,"FunctionNoticeView");var LoginNoticeView=function(e){function t(){e.call(this),this.mSkin='<?xml version="1.0" encoding="utf-8"?>\n<e:Skin class="LoginNoticeViewSkin" xmlns:e="http://ns.egret.com/eui" xmlns:ns1="*" xmlns:w="http://ns.egret.com/wing">\n    <ns1:LayeroutWindowSkin id="panelSkin">\n        <e:Scroller id="_scroll" width="581" height="745" x="16" y="70" anchorOffsetX="0" anchorOffsetY="0">\n            <e:Group id="_contentContainer"  x="1"/>\n        </e:Scroller>\n    </ns1:LayeroutWindowSkin>\n</e:Skin>',this.skinName=this.mSkin,this.uiCompHandler()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.windowBgBottom=-20,this.setImageWindowTitle("notice_title");var t=new CustomImage;t.source=rURL("resource/assets/icon/notice/notice.png"),t.y=7,this._contentContainer.addChild(t)},n.onOpenHandler=function(){},n.onCloseHandler=function(){},t}(LayeroutWindow);egret.registerClass(LoginNoticeView,"LoginNoticeView");var MoneyTreeView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fuli/MoneyTreeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){var e=this;this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/fuli/moneyTreeBg.png"),this.addChildAt(this.imageBg,0),this.addGlobalEventListener(FuLiEvtName.CCMD16900_UPDATE,this.updateData,this),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.box.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBoxClick,this),this.txtVip.htmlText="<u>提高VIP次数可增加次数</u>",this.txtVip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onVipClick,this),this.bar.maximum=5,setTimeout2(function(){e.bar.validateNow(),e.bar.labelDisplay&&(e.bar.labelDisplay.visible=!1)},50),this.updateDaily(),this.effectGroup.touchEnabled=!1,this.effectGroup2.touchEnabled=!1,this.txtDes.addMiaoBian(),this.txtDes.text="摇钱有几率暴击，受vip等级影响\n暴击可获得双倍金币",ConfigManager.isTencent()?(this._txtShare.htmlText="<font color='#00ff00'><u><a href='event:''>分享可获得额外次数，前往分享</a></u></font>",this._txtShare.addEventListener(egret.TextEvent.LINK,this.onShareLink,this),this._txtShare.lineSpacing=5):this._txtShare&&this._txtShare.parent&&this._txtShare.parent.removeChild(this._txtShare)},n.onShareLink=function(e){QQManager.getInstance().shareForMoneyTree()},n.showTxtShare=function(e){var t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_16901);this._txtShare&&(0==t?this._txtShare.visible=e:this._txtShare.visible=!1)},n.onGetClick=function(){RoleModel.getInstance().CheckGold(Number(this.txtCost.text))&&(this.btnGet.enabled=!1,this._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("yaoqian"),-190,-250,this.effectGroup2,80),this.dispatchGlobalEvent(new ParamEvent(FuLiEvtName.CCMD16900)))},n.onBoxClick=function(){if(this._dayCount>=this._need)this.dispatchGlobalEvent(new ParamEvent(FuLiEvtName.CCMD16901));else{var e=new NodeDrop_list;e.asset_id=this._goodInfo.template_id,e.value=this._goodInfo.num,this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.SHOW_KFHD_TREASURE_AWARD_VIEW,{node:e,content:"每日摇钱达到指定次数即可领取奖励"}))}},n.onVipClick=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_VIP))},n.updateData=function(e){var t=e.data;t.flag>0&&(this._effect2||(this._effect2=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("baoji"),140,130,this.effectGroup2,150)))},n.updateDaily=function(e){void 0===e&&(e=null);var t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_31);this._dayCount=t,this.bar.value=t%5,this.txtAdd.text=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_32)+"%";var i=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16901).value),n=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16902).value),s=ColorUtil.getColorHtmlStr(Math.floor((i+n*t)/1e3)/10+"万",ColorUtil.COLOR_GOLD);s+=ColorUtil.getColorHtmlStr("(+"+this.txtAdd.text+")",ColorUtil.COLOR_GREEN)+"金币",this.txtReward.htmlText=s;var a=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_16901),o=VipModel.getInstance().getVipVoByLv().money_tree_time,r=a+o;0==a?this.txtCount.text=(o-t).toString():this.txtCount.text=(r-t).toString(),this.btnGet.enabled=r>t,o>t?this.showTxtShare(!1):this.showTxtShare(!0);var h=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16907).value),l=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16908).value),d=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16909).value),_=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16910).value),c=h+Math.floor(t/l)*d;c>_&&(c=_),this.txtCost.text=c.toString();var u=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_33),p=FuliModel.getInstance().getTreeVo(u+1);p?(this._need=FuliModel.getInstance().getTreeVo(u+1).need,this._goodInfo=FuliModel.getInstance().getTreeVo(u+1).itemList[0].info,this.txtBox.text=this._need+"次奖励",this.txtBoxCount.text=this._dayCount+"/"+this._need,this._dayCount>=this._need?this._effect_box||(this._effect_box=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("huodong"),-150,-130,this.effectGroup,80,!0)):this._effect_box&&(this._effect_box.dispose(),this._effect_box=null)):(this.box.visible=!1,this.txtBox.visible=!1,this.txtBoxCount.visible=!1)},n.dispose=function(){e.prototype.dispose.call(this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null),this._effect_box&&(this._effect_box.dispose(),this._effect_box=null),this._effect&&(this._effect.dispose(),this._effect=null),this._effect2&&(this._effect2.dispose(),this._effect2=null),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.removeGlobalEventListener(FuLiEvtName.CCMD16900_UPDATE,this.updateData,this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.txtVip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onVipClick,this),this.box.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBoxClick,this)},t}(BaseView);egret.registerClass(MoneyTreeView,"MoneyTreeView");var NoticeView=function(e){function t(){e.call(this),this._cuPage=1,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fuli/NoticeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_21101);this._singleVO=e;Number(e.value);this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._content=new CustomImage,this._content.x=0,this._content.y=7,this._contentContainer.addChild(this._content),this.setNoticeImage(),this._btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeft,this),this._btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRight,this),this.updateBtn()},n.setNoticeImage=function(){this._content.source=rURL("resource/assets/icon/notice/notice"+this._cuPage+".png")},n.onLeft=function(){this._cuPage--,this._cuPage<1&&(this._cuPage=1),this.setNoticeImage(),this.updateBtn()},n.onRight=function(){this._cuPage++,this._cuPage>Number(this._singleVO.value)&&(this._cuPage=Number(this._singleVO.value)),this.setNoticeImage(),this.updateBtn()},n.updateBtn=function(){this._cuPage<=1?this._btnLeft.visible=!1:this._btnLeft.visible=!0,this._cuPage>=Number(this._singleVO.value)?this._btnRight.visible=!1:this._btnRight.visible=!0},n.dispose=function(){e.prototype.dispose.call(this),this._btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeft,this),this._btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRight,this),this._content.parent.removeChild(this._content),this._content.dispose(),this._content=null},t}(BaseView);egret.registerClass(NoticeView,"NoticeView");var ShareView=function(e){function t(){e.call(this),this._itemArr=[],this.LABEL_SHARE="分享",this.LABEL_GET="领取奖励",this.isFirst=!0,this._time=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/fuli/ShareViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._imageHead=new PicLoader,this._imageHead.x=19,this._imageHead.y=7,this._imageHead.load(rURL("resource/assets/icon/share/image_share.png")),this.addChild(this._imageHead),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this.addGlobalEventListener(ShareEvtName.SHARE_UPDATEINFO,this.updateInfoHandler,this),this.dispatchGlobalEvent(new ParamEvent(ShareEvtName.CCMD15100)),this._singleAwardVO=SingleModel.getInstance().getSingVO(SingleModel.KEY_15103),this._item=new GoodsItem,this._item.data=GoodsListProxy.getInstance().getGoodsInfoByType(2),this._itemContainer.addChild(this._item),this._imageDesc=new PicLoader,this._imageDesc.load(rURL("resource/assets/icon/share/fuliShareDesc.png")),this.addChild(this._imageDesc),this._imageDesc.touchEnabled=!1,this._imageDesc.x=1,this._imageDesc.y=463,this.updateInfoHandler(),this._btnAddToDesktop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddToDesktop,this),this._btnAddToDesktop.visible=!1,this._txtDesc.htmlText="<font size='20'>分享奖励说明：</font>\n第1次分享：50元宝\n第2次分享：60元宝\n第3次分享：70元宝\n第4次分享：80元宝\n第5次分享：90元宝\n每日满5次分享可获得额外奖励：50元宝，分享达人称号（邮件发放）\n"},n.onOpenHandler=function(){if(ConfigManager.isGuoZi()||ConfigManager.isGuoZiZF()){PhpHttpStatisticsManager.requestShowShare();ShareModel.getInstance().isShowShare;0==ShareModel.getInstance().isShowShare&&1==this.isFirst&&(this.dispatchGlobalEvent(new ParamEvent(ShareEvtName.CCMD15101)),this.isFirst=!1)}},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.removeGlobalEventListener(ShareEvtName.SHARE_UPDATEINFO,this.updateInfoHandler,this),this._txtResTime.text="",this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._imageDesc&&(this._imageDesc.dispose(),this._imageDesc=null),this._imageHead&&(this._imageHead.dispose(),this._imageHead=null)},n.onOkHandler=function(){var e=this._item.parent.localToGlobal(this._item.x,this._item.y),t=ShareModel.getInstance().last_time,i=(ShareModel.getInstance().share_num,ShareModel.getInstance().isShowShare);if(this._btnOK.label==this.LABEL_SHARE){if(t>0)return void Message.show("分享还在冷却中");if(ConfigManager.isTencent()){if(QQManager.getInstance().isWeiXin())return void Message.show("请点击右上角···进行分享");QQManager.getInstance().shareToQQZone()}else{if(ConfigManager.isb9cb())return Message.show("请点击右上角···进行分享"),void shareSuccessSendMsgToServer(0);if(ConfigManager.isyxjinbang()||ConfigManager.isQunHei()||ConfigManager.is37())return void Message.show("请点击右上角···进行分享");if(ConfigManager.isLeDu())return void window.showShareView();if(ConfigManager.isB9g()||ConfigManager.isYuMeng())return void window.showShare();if(ConfigManager.isb7724()){var n=B7724Manager.getInstance().b7724Sdk;return void n.share(function(){shareSuccessSendMsgToServer(0)},{cp_p1:"",cp_p2:""})}1==i?PhpHttpStatisticsManager.requestShare(""):2==i?PhpHttpStatisticsManager.requestShare(""):0==i&&this.dispatchGlobalEvent(new ParamEvent(ShareEvtName.CCMD15101))}}else this.dispatchGlobalEvent(new ParamEvent(ShareEvtName.CCMD15102)),AccessGoodFlyEffectManager.getInstance().getGood(2,AccessGoodFlyEffectManager.GOLDTYPE,e)},n.updateInfoHandler=function(){var e=ShareModel.getInstance().last_time,t=ShareModel.getInstance().share_num,i=ShareModel.getInstance().share_award;this._singleAwardVO.itemArr[t]&&(this._item.num=Number(this._singleAwardVO.itemArr[t])),this._txtTimes.text="今日已分享：("+t+"/"+SingleModel.getInstance().getSingVO(SingleModel.KEY_15102).value+")",e>0?(this._time=e,this._txtResTime.text=TimeUtil.getTime2(this._time),TimerManager.getInstance().add(1e3,this.timeComplete,this)):(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this._txtResTime.text=""),0==i?this._btnOK.label=this.LABEL_SHARE:this._btnOK.label=this.LABEL_GET},n.timeComplete=function(){this._time--,this._time<=0?(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this._txtResTime.text=""):this._txtResTime.text=TimeUtil.getTime2(this._time)},n.onAddToDesktop=function(e){QQManager.getInstance().addShortCut()},t}(BaseView);egret.registerClass(ShareView,"ShareView");var ShareWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/fuli/ShareWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.windowBgBottom=-20,this._shareView=new ShareView,this._container.addChild(this._shareView),this._shareView.onOpenHandler()},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this)},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this._shareView&&(this._shareView.parent.removeChild(this._shareView),this._shareView.dispose(),this._shareView=null)},t}(LayeroutWindow);egret.registerClass(ShareWindow,"ShareWindow");var GuildCheckItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/guild/GuildCheckItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.btnYes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesClick,this),this.btnNo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNoClick,this)},n.onYesClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12505,{type:1,id:this.itemData.role_id}))},n.onNoClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12505,{type:2,id:this.itemData.role_id}))},n.dataChanged=function(){this.itemData=this.data,this.txtName.text=this.itemData.name,this.txtFight.text=this.itemData.power.toString(),this.bmHead.setHeadURLByPartner(this.itemData.icon)},t}(eui.ItemRenderer);egret.registerClass(GuildCheckItem,"GuildCheckItem");var GuildCreateWindow=function(e){function t(){e.call(this),this._selectLv=1,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildCreateSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.GUILD,this.setImageTitle("guild_title_create");var t=GuildModel.getInstance().getGuildBaseByLv(1),i=GuildModel.getInstance().getGuildBaseByLv(2);this.txtCost1.text=t.con_gold.toString(),this.txtCost2.text=i.con_gold.toString();var n="容纳<font color='#00d228'>"+t.member+"</font>公会成员";t.add_gx>0&&(n+="<br>返还"+t.add_gx+"公会贡献"),this.txtContent.htmlText=n;var s="容纳<font color='#00d228'>"+i.member+"</font>公会成员";i.add_gx>0&&(s+="<br>返还"+i.add_gx+"公会贡献"),this.txtContent2.htmlText=s},n.onGetClick=function(){""!=this.txtName.text&&VipModel.getInstance().getVIPLevel()>=this._selectLv&&(this.isPop=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12501,{name:this.txtName.text,level:this._selectLv})))},n.onLeft=function(){this._selectLv=1,this.bm_select.x=this.leftGroup.x-38},n.onRight=function(){this._selectLv=2,this.bm_select.x=this.rightGroup.x-38},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.leftGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeft,this),this.rightGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRight,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.leftGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeft,this),this.rightGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRight,this)},t}(LayeroutWindow);egret.registerClass(GuildCreateWindow,"GuildCreateWindow");var GuildEndWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildEndSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.GUILD,this.setImageTitle("guild_title_js"),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnCanel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCanelClick,this)},n.onGetClick=function(){""!=this.txtContent.text&&"解散公会"==this.txtContent.text&&(GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12502,GuildModel.getInstance().getGuildInfo().guild_name)),this.isPop=!1)},n.onCanelClick=function(){this.isPop=!1},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+250},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnCanel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCanelClick,this)},t}(LayeroutWindow);egret.registerClass(GuildEndWindow,"GuildEndWindow");var GuildFightEditWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildFightEditSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.addGlobalEventListener(GuildEvtName.GUILD_CCMD12504_UPDATE,this.updateData,this),this.btnYes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesClick,this),this.btnNo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNoClick,this),this.checkBox.addEventListener(egret.TouchEvent.CHANGE,this.onChangeCheck,this)},n.updateData=function(){for(var e=GuildModel.getInstance().getApplysList(),t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this.checkList.dataProvider=t,this.txtFight.text=GuildModel.getInstance().getGuildInfo().req_power.toString(),this.checkBox.selected=1==GuildModel.getInstance().getGuildInfo().req_auto,e.length>0?(this.bd_noBg.visible=!1,this.txtNo.visible=!1,this.btnYes.visible=!0,this.btnNo.visible=!0):(this.bd_noBg.visible=!0,this.txtNo.visible=!0,this.btnYes.visible=!1,this.btnNo.visible=!1)},n.onYesClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12506,1)),this.isPop=!1},n.onNoClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12506,2)),this.isPop=!1},n.onChangeFight=function(){var e=0;""!=this.txtFight.text&&(e=Number(this.txtFight.text)),e!=GuildModel.getInstance().getGuildInfo().req_power&&(GuildModel.getInstance().setReqPower(e),this.dispatchGlobalEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12511,e)))},n.onChangeCheck=function(){GuildModel.getInstance().setReqAuto(this.checkBox.selected?1:0),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12512,GuildModel.getInstance().getGuildInfo().req_auto))},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.dispose=function(){e.prototype.dispose.call(this),this.onChangeFight(),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD12504_UPDATE,this.updateData,this),this.btnYes.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesClick,this),this.btnNo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onNoClick,this),this.checkBox.removeEventListener(egret.TouchEvent.CHANGE,this.onChangeCheck,this)},t}(LayeroutWindow);egret.registerClass(GuildFightEditWindow,"GuildFightEditWindow");var GuildGonggaoEditWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildGonggaoEditSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.GUILD,this.setImageTitle("title_gonggao"),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},n.updateData=function(){""!=GuildModel.getInstance().getGuildInfo().notice&&(this.txtContent.text=GuildModel.getInstance().getGuildInfo().notice)},n.onGetClick=function(){""!=this.txtContent.text&&(GuildModel.getInstance().setNotice(this.txtContent.text),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12514,this.txtContent.text)),this.isPop=!1)},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},t}(LayeroutWindow);egret.registerClass(GuildGonggaoEditWindow,"GuildGonggaoEditWindow");var GuildGonggaoWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildGonggaoSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.GUILD,this.setImageTitle("title_gonggao"),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},n.onGetClick=function(){""!=this.txtContent.text&&(this.isPop=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12514,this.txtContent.text)))},t}(LayeroutWindow);egret.registerClass(GuildGonggaoWindow,"GuildGonggaoWindow");var GuildInfoView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildInfoViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.txtEditName.htmlText="<u>改名</>",this.txtEditFight.htmlText="<u>查看申请</>",this.addGlobalEventListener(GuildEvtName.GUILD_CCMD12513_UPDATE,this.updateData,this),this.addGlobalEventListener(GuildEvtName.GUILD_CCMD12515_UPDATE,this.updateLogs,this),this.addGlobalEventListener(GuildEvtName.GUILD_CCMD12519_UPDATE,this.updateData,this),this.txtEditName.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNameClick,this),this.txtEditFight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFightClick,this),this.txtNotice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNoticeClick,this),this.btnGx.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGxClick,this)},n.onGxClick=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_VIEW,5))},n.onNameClick=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_VIEW,11))},n.onFightClick=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_VIEW,12))},n.onNoticeClick=function(e){RoleModel.getInstance().getRoleCommon().guild_position<=GuildModel.POSITION_TYPE_2&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_VIEW,13))},n.updateData=function(e){var t=GuildModel.getInstance().getGuildInfo();this.txtGuildName.text=t.guild_name,this.txtLv.text=t.guild_level.toString(),this.txtNum.text=t.guild_num+"/"+GuildModel.getInstance().getGuildBaseByLv(t.guild_level).member,this.txtCost.text=t.guild_money.toString(),this.txtFight.text=t.req_power.toString(),this.txtName.text="会长："+t.chief_role_name,this.txtEditName.visible=RoleModel.getInstance().getRoleCommon().guild_position<=GuildModel.POSITION_TYPE_1,this.txtEditFight.visible=RoleModel.getInstance().getRoleCommon().guild_position<=GuildModel.POSITION_TYPE_2,""!=t.notice&&(this.txtNotice.text=t.notice),this.bmHead.setHeadURLByPartner(t.icon),this.txtGx.text=RoleModel.getInstance().getRoleInfo().getGx().toString(),RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2012)?this._effect||(this._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("anniu"),40,20,this.effectSp,80,!0)):this._effect&&(this._effect.dispose(),this._effect=null)},n.updateLogs=function(e){for(var t,i=e.data,n=new eui.ArrayCollection,s=0;s<i.length;s++)t=new LogVO,t.time=i[s].ctime,t.content=i[s].content,n.addItem(t);this.logList.dataProvider=n},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD12513_UPDATE,this.updateData,this),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD12515_UPDATE,this.updateLogs,this),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD12519_UPDATE,this.updateData,this),this.txtEditName.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onNameClick,this),this.txtEditFight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onFightClick,this),this.txtNotice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onNoticeClick,this),this.btnGx.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGxClick,this),this._effect&&(this._effect.dispose(),this._effect=null)},t}(BaseView);egret.registerClass(GuildInfoView,"GuildInfoView");var GuildListItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/guild/GuildListItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},n.onGetClick=function(){this.btnGet.enabled=!1,this.btnGet.label="已申请",GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12503,this._vo.guild_id))},n.dataChanged=function(){this._vo=this.data,this.txtIndex.text=(this.itemIndex+1).toString(),this.txtName.htmlText=this._vo.name+"<font color='#00D228'>(Lv."+this._vo.level+")</font>",this.txtRoleName.text=this._vo.chief_role_name;var e=GuildModel.getInstance().getGuildBaseByLv(this._vo.level);this.txtNum.text=this._vo.num+"/"+e.member,this.txtFight.text=this._vo.power.toString(),this.btnGet.visible=0==RoleModel.getInstance().getRoleCommon().guild_id,this.btnGet.enabled=!0,this.btnGet.label="申请"},t}(eui.ItemRenderer);egret.registerClass(GuildListItem,"GuildListItem");var GuildListView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildListSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.addGlobalEventListener(GuildEvtName.GUILD_CCMD12500_UPDATE,this.updateData,this)},n.updateData=function(){var e=GuildModel.getInstance().getGuildList();if(e){for(var t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this.guildList.dataProvider=t}},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD12500_UPDATE,this.updateData,this)},t}(BaseView);egret.registerClass(GuildListView,"GuildListView");var GuildListWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildListViewSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.GUILD,this.btnCreate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this._list=new GuildListView,this.listGroup.addChild(this._list)},n.onGetClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_VIEW,9))},n.updateData=function(){VipModel.getInstance().getVIPLevel()>0?this.btnCreate.enabled=!0:this.btnCreate.enabled=!1},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_guild")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnCreate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnCreate.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this._list&&this._list.parent&&(this._list.parent.removeChild(this._list),this._list.dispose(),this._list=null)},t}(LayeroutWindow);egret.registerClass(GuildListWindow,"GuildListWindow");var GuildLogItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/guild/GuildLogItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.dataChanged=function(){var e=this.data;this.txtTime.text=TimeUtil.formatTime(1e3*e.time),this.txtContent.htmlText=e.content},t}(eui.ItemRenderer);egret.registerClass(GuildLogItem,"GuildLogItem");var GuildManagerWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildManagerViewSkin.exml"
}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.GUILD,this.setImageTitle("guild_title_gl"),this.tabBar.dataProvider=new eui.ArrayCollection(["基础","建造","成员","列表"]),this._isInit||(this._isInit=!0,this.setIndex())},n.onBarItemTap=function(e){this.setIndex(this.tabBar.selectedIndex)},n.setIndex=function(e){if(void 0===e&&(e=0),this._isInit){switch(this.tabBar.selectedIndex=e,this._curView&&this._curView.parent&&this._curView.parent.removeChild(this._curView),e){case 0:this._guildInfoView||(this._guildInfoView=new GuildInfoView),this._curView=this._guildInfoView;break;case 1:this._guildUpgrade||(this._guildUpgrade=new GuildUpgradeView),this._guildUpgrade.x=5,this._guildUpgrade.y=5,this._curView=this._guildUpgrade,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12516));break;case 2:this._guildMember||(this._guildMember=new GuildMembersView),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12509)),this._guildMember.x=5,this._guildMember.y=5,this._curView=this._guildMember;break;case 3:this._guildList||(this._guildList=new GuildListView),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12500)),this._guildList.x=5,this._guildList.y=5,this._curView=this._guildList}this.contentGroup.addChild(this._curView)}},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.addGlobalEventListener(GuildEvtName.GUILD_CCMD12507_UPDATE,e.prototype.onReturnButtonClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD12507_UPDATE,e.prototype.onReturnButtonClick,this),this._guildInfoView&&(this._guildInfoView.parent&&this._guildInfoView.parent.removeChild(this._guildInfoView),this._guildInfoView.dispose(),this._guildInfoView=null),this._guildUpgrade&&(this._guildUpgrade.parent&&this._guildUpgrade.parent.removeChild(this._guildUpgrade),this._guildUpgrade.dispose(),this._guildUpgrade=null),this._guildMember&&(this._guildMember.parent&&this._guildMember.parent.removeChild(this._guildMember),this._guildMember.dispose(),this._guildMember=null),this._guildList&&(this._guildList.parent&&this._guildList.parent.removeChild(this._guildList),this._guildList.dispose(),this._guildList=null)},t}(LayeroutWindow);egret.registerClass(GuildManagerWindow,"GuildManagerWindow");var GuildMapView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildMapViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturn,this),this.imageBg=new PicLoader,ConfigManager.isBigScene()?this.imageBg.load("resource/assets/icon/guild/guildMap2.jpg"):this.imageBg.load("resource/assets/icon/guild/guildMap.jpg"),this.addChildAt(this.imageBg,0);for(var e,t,i=1;8>=i;i++)e=this["Btn_"+i],e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick,this),t=this["down_"+i],t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBtnDown,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onBtnOut,this),t.alpha=0;this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2012,this.updateData,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2015,this.updateData,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2017,this.updateData,this)},n.onReturn=function(){this.dispatchEvent(new ParamEvent(EventName.WINDOW_DISPOSE)),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_SHOW_RIGHTTOP,{state:!0})),GuildModel.getInstance().isGuildMapShow=!1,this.dispose()},n.onBtnClick=function(e){var t=e.currentTarget;GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_VIEW,Number(t.name.split("_")[1])))},n.onBtnDown=function(e){e.currentTarget.alpha=1},n.onBtnOut=function(e){var t=e.currentTarget;t.alpha=0,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_VIEW,Number(t.name.split("_")[1])))},n.updateData=function(){var e=this.Btn_2;e.showRedDot=CityWarModel.getInstance().checkCityWarDailyReweard();var t=this.Btn_3;t.showRedDot=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2012);var i=this.Btn_8;i.showRedDot=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2015);var e=this.Btn_6;e.showRedDot=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2017)},n.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this.btnReturn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturn,this);for(var t,i,n=1;8>=n;n++)t=this["Btn_"+n],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick,this),i=this["down_"+n],i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBtnDown,this),i.removeEventListener(egret.TouchEvent.TOUCH_END,this.onBtnOut,this);this.removeGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2012,this.updateData,this),this.removeGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2015,this.updateData,this),this.removeGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2017,this.updateData,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null)},t}(BaseView);egret.registerClass(GuildMapView,"GuildMapView");var GuildMemberItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/guild/GuildMemberItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.btnOpt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOptClick,this),this.btnTan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTanClick,this)},n.onOptClick=function(){GuildModel.getInstance().optRole=this._itemData,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_VIEW,14))},n.onTanClick=function(){var e=this,t=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_12506).value);RoleModel.getInstance().CheckGold(t)&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"",content:"是否花费"+t+"元宝弹劾会长",func:function(){e.btnTan.visible=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12521))}}))},n.dataChanged=function(){this._itemData=this.data,this.txtName.htmlText="["+GuildModel.getInstance().getPositionStr(this._itemData.position)+"]<font color='#e7d0b7'>"+this._itemData.name+"</font>",this.txtGx.text=this._itemData.donate_total.toString(),this.txtFight.text=this._itemData.power.toString(),this.bmHead.setHeadURLByPartner(this._itemData.icon),this._itemData.offline_time>0?this.txtTime.htmlText="≤"+TimeUtil.getTimeHour(this._itemData.offline_time)+"小时":this.txtTime.htmlText="<font color='#00D228'>在线</font>",this._itemData.role_id!=RoleModel.getInstance().getRoleCommon().role_id&&GuildModel.getInstance().getMemberInfo().position<GuildModel.POSITION_TYPE_4&&this._itemData.position!=GuildModel.POSITION_TYPE_1?this.btnOpt.visible=!0:this.btnOpt.visible=!1;var e=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_12505).value);this._itemData.role_id!=RoleModel.getInstance().getRoleCommon().role_id&&this._itemData.position==GuildModel.POSITION_TYPE_1&&this._itemData.offline_time>=e?this.btnTan.visible=!0:this.btnTan.visible=!1},t}(eui.ItemRenderer);egret.registerClass(GuildMemberItem,"GuildMemberItem");var GuildMembersView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildMembersViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.addGlobalEventListener(GuildEvtName.GUILD_CCMD12509_UPDATE,this.updateData,this),this.btnEnd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEndClick,this),this.btnOut.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOutClick,this),this.btnUnit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUnitClick,this)},n.onEndClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_VIEW,16))},n.onOutClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_VIEW,15))},n.onUnitClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12520))},n.updateData=function(){var e=GuildModel.getInstance().getGuildMembers();if(e){for(var t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]),e[i].role_id==RoleModel.getInstance().getRoleCommon().role_id&&(this._itemData=e[i]);this.contentList.dataProvider=t}GuildModel.getInstance().setMemberInfo(this._itemData),this.txtPos.text=GuildModel.getInstance().getPositionStr(this._itemData.position),this.txtGxLog.text=this._itemData.donate_total.toString(),this._itemData.position==GuildModel.POSITION_TYPE_1?(this.btnEnd.visible=!0,this.btnOut.visible=!1,this.btnUnit.visible=!1):this._itemData.position==GuildModel.POSITION_TYPE_4?(this.btnOut.x=231,this.btnOut.visible=!0,this.btnEnd.visible=!1,this.btnUnit.visible=!1):(this.btnOut.x=350,this.btnOut.visible=!0,this.btnEnd.visible=!1,this.btnUnit.visible=!0)},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD12509_UPDATE,this.updateData,this),this.btnEnd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEndClick,this),this.btnOut.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOutClick,this),this.btnUnit.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onUnitClick,this)},t}(BaseView);egret.registerClass(GuildMembersView,"GuildMembersView");var GuildNameEditWindow=function(e){function t(){e.call(this),this._itemId=13080002,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildNameEditSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.GUILD,this.setImageTitle("title_ghgm"),this.txtBuy.htmlText="<u>立即购买</>",this.txtBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyClick,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.addGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateData,this)},n.updateData=function(){this._backCount=GoodsListProxy.getInstance().findGoodNumber(this._itemId);var e=GoodsListProxy.getInstance().getGoodsInfoByType(this._itemId).name;e+=0==this._backCount?"<font color='#e31101'>("+this._backCount+")</font>/1":"("+this._backCount+")/1",this.txtGood.htmlText=e,this.btnGet.enabled=this._backCount>0},n.onGetClick=function(){""!=this.txtName.text&&this._backCount>0&&(GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12513,this.txtName.text)),this.isPop=!1)},n.onBuyClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.OPEN_BUY_WINDOW,this._itemId))},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.txtBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyClick,this),this.removeGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateData,this)},t}(LayeroutWindow);egret.registerClass(GuildNameEditWindow,"GuildNameEditWindow");var GuildOptWindow=function(e){function t(){e.call(this),this._type=0,this.skinName="resource/game_skins/guild/GuildOptSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this._radioGroup=new eui.RadioButtonGroup,this.radio_1.value=1,this.radio_1.group=this._radioGroup,this.radio_1.addEventListener(egret.Event.CHANGE,this.onChange,this),this.radio_2.value=2,this.radio_2.group=this._radioGroup,this.radio_2.addEventListener(egret.Event.CHANGE,this.onChange,this),this.radio_3.value=3,this.radio_3.group=this._radioGroup,this.radio_3.addEventListener(egret.Event.CHANGE,this.onChange,this),this.radio_4.value=4,this.radio_4.group=this._radioGroup,this.radio_4.addEventListener(egret.Event.CHANGE,this.onChange,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnTi.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTiClick,this)},n.updateData=function(){this.radio_2.label="副会长"+GuildModel.getInstance().getPositionNum(GuildModel.POSITION_TYPE_2)+"/"+GuildModel.getInstance().getGuildBaseInfo().guild_deputy,this.radio_3.label="长老"+GuildModel.getInstance().getPositionNum(GuildModel.POSITION_TYPE_3)+"/"+GuildModel.getInstance().getGuildBaseInfo().guild_elder},n.onChange=function(e){var t=e.target;this._type=t.value},n.onGetClick=function(){0!=this._type&&(this._type==GuildModel.POSITION_TYPE_2&&GuildModel.getInstance().getPositionNum(GuildModel.POSITION_TYPE_2)>=GuildModel.getInstance().getGuildBaseInfo().guild_deputy||this._type==GuildModel.POSITION_TYPE_3&&GuildModel.getInstance().getPositionNum(GuildModel.POSITION_TYPE_3)>=GuildModel.getInstance().getGuildBaseInfo().guild_elder||(GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12510,{pos:this._type,id:GuildModel.getInstance().optRole.role_id})),this.isPop=!1,GuildModel.getInstance().optRole=null))},n.onTiClick=function(){var e=this,t=StringUtil.substitute("是否将{0}踢出公会？",GuildModel.getInstance().optRole.name);Alert.show(t,1,function(){e.onTi()})},n.onTi=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12507,GuildModel.getInstance().optRole.role_id)),this.isPop=!1,GuildModel.getInstance().optRole=null},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+250},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnTi.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTiClick,this),this._radioGroup=null,this.radio_1.removeEventListener(egret.Event.CHANGE,this.onChange,this),this.radio_2.removeEventListener(egret.Event.CHANGE,this.onChange,this),this.radio_3.removeEventListener(egret.Event.CHANGE,this.onChange,this),this.radio_4.removeEventListener(egret.Event.CHANGE,this.onChange,this)},t}(LayeroutWindow);egret.registerClass(GuildOptWindow,"GuildOptWindow");var GuildOutWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildOutSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.GUILD,this.setImageTitle("guild_title_tc"),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnCanel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCanelClick,this)},n.onGetClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12508)),this.isPop=!1},n.onCanelClick=function(){this.isPop=!1},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+250},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnCanel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCanelClick,this)},t}(LayeroutWindow);egret.registerClass(GuildOutWindow,"GuildOutWindow");var GuildUpgradeItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/guild/GuildUpgradeItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},n.onGetClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12517,this._vo.type))},n.dataChanged=function(){this._vo=this.data,this.txtTitle.text=this._vo.title,this.txtNeed.htmlText=this._vo.up_word,this.txtDes.text=this._vo.show_word;var e=GuildModel.getInstance().getBuildInfo(this._vo.type,this._vo.level+1);if(e){var t=GuildModel.getInstance().getGuildInfo().guild_money;this.bar.maximum=e.need,this.bar.value=t,this.btnGet.visible=RoleModel.getInstance().getRoleCommon().guild_position<=GuildModel.POSITION_TYPE_1&&t>=e.need}else this.bar.maximum=100,this.bar.value=100,this.btnGet.visible=!1},t}(eui.ItemRenderer);egret.registerClass(GuildUpgradeItem,"GuildUpgradeItem");var GuildUpgradeView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildUpgradeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.addGlobalEventListener(GuildEvtName.GUILD_CCMD12516_UPDATE,this.updateData,this)},n.updateData=function(){for(var e,t,i=new eui.ArrayCollection,n=1;6>n;n++)t=GuildModel.getInstance().getBuildLv(n),e=GuildModel.getInstance().getBuildInfo(n,t),i.addItem(e);this.upgradeList.dataProvider=i},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD12516_UPDATE,this.updateData,this)},t}(BaseView);egret.registerClass(GuildUpgradeView,"GuildUpgradeView");var GuildDonateInfoView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildDonateInfoSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.image_ding=new PicLoader,this.image_ding.y=65,this.addChildAt(this.image_ding,0),this.addChildAt(this.bm_bg,0),this.btnGet_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnGet_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet2Click,this),this.btnGet_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet3Click,this),this.addGlobalEventListener(GuildEvtName.GUILD_CCMD13400_UPDATE,this.updateData,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEGX,this.updateGX,this),this._isInit||(this._isInit=!0,this.updateData())},n.onGetClick=function(){RoleModel.getInstance().CheckCoin(Number(this._coin))&&(EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("yaoqian"),-30,0,this),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD13401,1)))},n.onGet2Click=function(){RoleModel.getInstance().CheckGold(Number(this._gold))&&(EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("yaoqian"),-30,0,this),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD13401,2)))},n.onGet3Click=function(){RoleModel.getInstance().CheckGold(Number(this._gold2))&&(EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("yaoqian"),-30,0,this),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD13401,3)))},n.updateData=function(){if(this._isInit){var e=GuildModel.getInstance().donateData;if(e){var t=GuildModel.getInstance().getRedVoByLv(e.level);this.txtZijin.text=e.guild_money.toString(),this._effect&&this._effect.dispose();var i="",n=e.red_exp/t.redpacket_limit;n>1&&(n=1),n>=.3&&.6>n?i="resource/assets/icon/guild/donate/donate_2.png":n>=.6&&.9>n?i="resource/assets/icon/guild/donate/donate_3.png":n>=.3?(i="",this._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("yaoqian2"),170,220,this.effectSp,80,!0)):i="resource/assets/icon/guild/donate/donate_1.png",this.image_ding.load(i),this.txtCost.text=t.redpacket_num.toString(),this.txtCount.text=t.people+"人分抢",this.goodItem.data=t.itemList[0].info;var s=GuildModel.getInstance().getDonateVoByLvType(e.level,1);this.txtNeed_1.text=Math.floor(s.con_coin/1e4)+"万",this._coin=s.con_coin;var a=GuildModel.getInstance().getDonateVoByLvType(e.level,2);this.txtNeed_2.text=a.con_gold.toString(),this._gold=a.con_gold;var o=GuildModel.getInstance().getDonateVoByLvType(e.level,3);this.txtNeed_3.text=o.con_gold.toString(),this._gold2=o.con_gold;var r=VipModel.getInstance().getVipVoByLv(),h=Number(SingleModel.getInstance().getSingVO(61).value),l=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_17,1);this.txtDaily_1.htmlText="今日剩余<font color='#00D228'>"+(h-l)+"</font>次",this.btnGet_1.enabled=h>l,l=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_17,2),r.donate_2>0?(this.txtDaily_2.htmlText="今日剩余<font color='#00D228'>"+(r.donate_2-l)+"</font>次",this.btnGet_2.enabled=r.donate_2>l):(this.txtDaily_2.htmlText="达到<font color='#FFD200'>VIP1</font>可用",this.btnGet_2.enabled=!1),l=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_17,3),r.donate_3>0?(this.txtDaily_3.htmlText="今日剩余<font color='#00D228'>"+(r.donate_3-l)+"</font>次",this.btnGet_3.enabled=r.donate_3>l):(this.txtDaily_3.htmlText="达到<font color='#FFD200'>VIP3</font>可用",this.btnGet_3.enabled=!1),this.updateGX()}}},n.updateGX=function(){this.txtCur_gx.text=RoleModel.getInstance().getRoleInfo().getGx().toString()},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnGet_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet2Click,this),this.btnGet_3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet3Click,this),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD13400_UPDATE,this.updateData,this),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGEGX,this.updateGX,this),this._effect&&(this._effect.dispose(),this._effect=null),this.image_ding&&(this.image_ding.parent&&this.image_ding.parent.removeChild(this.image_ding),this.image_ding.dispose(),this.image_ding=null)},t}(BaseView);egret.registerClass(GuildDonateInfoView,"GuildDonateInfoView");var GuildDonateLogView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildDonateLogSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){var e=new eui.VerticalLayout;e.paddingTop=3,e.paddingLeft=3,e.paddingRight=3,e.paddingBottom=3,this.itemList.layout=e,this.addGlobalEventListener(GuildEvtName.GUILD_CCMD13410_UPDATE,this.updateData,this),this.addGlobalEventListener(GuildEvtName.GUILD_CCMD13411_UPDATE,this.updateData2,this)},n.updateData=function(e){var t=e.data;t.sort(function(e,t){return e.id<t.id?1:-1});for(var i,n=new eui.ArrayCollection,s=0;s<t.length;s++)i=new LogVO,i.time=t[s].ctime,i.content=t[s].content,n.addItem(i);this.itemList.dataProvider=n},n.updateData2=function(e){var t=e.data;t.sort(function(e,t){return e.id<t.id?1:-1});for(var i,n=new eui.ArrayCollection,s=0;s<t.length;s++)i=new LogVO,i.time=t[s].ctime,i.content=t[s].content,n.addItem(i);this.itemList2.dataProvider=n},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD13410_UPDATE,this.updateData,this),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD13411_UPDATE,this.updateData2,this)},t}(BaseView);egret.registerClass(GuildDonateLogView,"GuildDonateLogView");var GuildDonateRedInfoView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildDonateRedInfoSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiCompHandler=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.addGlobalEventListener(GuildEvtName.GUILD_CCMD13420_UPDATE,this.updateData,this),this.addGlobalEventListener(GuildEvtName.GUILD_CCMD13421_UPDATE,this.onRedCount,this),this._isInit||(this._isInit=!0,this.updateData())},s.onGetClick=function(){this.btnGet.visible=!1,this._redInfo&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD13421,this._redInfo.id))},s.updateData=function(){this._isInit&&(GuildModel.getInstance().getRedArr().length>0&&(this._redInfo=GuildModel.getInstance().getRedArr()[0]),this._redInfo&&(this.txtCost.text=this._redInfo.last_coin.toString(),this.txtCount.text=this._redInfo.last_num+"人分抢",this.headItem.setHeadURLByPartner(this._redInfo.icon),this.txtName.text=this._redInfo.name,this.redGroup.visible=!1,this.btnGet.visible=!0))},s.onRedCount=function(e){void 0===e&&(e=null),this._redCount=e.data,this._time=20,this.redGroup.visible=!0,TimerManager.getInstance().remove(50,this.timeComplete,this),TimerManager.getInstance().add(50,this.timeComplete,this)},s.timeComplete=function(){this._time--,this._time<=0?(TimerManager.getInstance().remove(50,this.timeComplete,this),this.txtRed.text=this._redCount.toString()):this.txtRed.text=(1e6*Math.random()).toString()},s.getRedId=function(){return this._redInfo?this._redInfo.id:0},i(s,"isShowContent",void 0,function(e){this.redGroup.visible=e,this.contentGroup.visible=e}),s.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD13420_UPDATE,this.updateData,this),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD13421_UPDATE,this.onRedCount,this)},t}(BaseView);egret.registerClass(GuildDonateRedInfoView,"GuildDonateRedInfoView");var GuildDonateRedLogItem=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildDonateRedLogItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dataChanged=function(){this._huodongVo=this.data,this.head.setHeadURLByPartner(this._huodongVo.icon),this.txtName.text=this._huodongVo.name,this.txtCost.text="金币："+this._huodongVo.coin,this.tipsGroup.visible=0==this.itemIndex},t}(eui.ItemRenderer);egret.registerClass(GuildDonateRedLogItem,"GuildDonateRedLogItem");var GuildDonateRedLogView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildDonateRedLogSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.addGlobalEventListener(GuildEvtName.GUILD_CCMD13422_UPDATE,this.updateData,this)},n.updateData=function(e){var t=e.data;t.length>1&&t.sort(function(e,t){return e.coin>t.coin?-1:1});for(var i=new eui.ArrayCollection,n=0;n<t.length;n++)i.addItem(t[n]);this.itemList.dataProvider=i},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD13422_UPDATE,this.updateData,this)},t}(BaseView);egret.registerClass(GuildDonateRedLogView,"GuildDonateRedLogView");var GuildDonateRedWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildDonateRedViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.GUILD_DONATE,this.setImageTitle("title_guild_red"),this.tabBar.dataProvider=new eui.ArrayCollection(["红包","记录"]),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this)},n.onBarItemTap=function(e){this.setIndex(this.tabBar.selectedIndex)},n.setIndex=function(e){switch(void 0===e&&(e=0),this.tabBar.selectedIndex=e,this._logView&&this._logView.parent&&this._logView.parent.removeChild(this._logView),e){case 0:this._redInfoView||(this._redInfoView=new GuildDonateRedInfoView),this._redInfoView.isShowContent=!0,this._redInfoView.updateData(),this.contentGroup.addChild(this._redInfoView);break;case 1:this._logView||(this._logView=new GuildDonateRedLogView,this._logView.y=380),this._redInfoView.isShowContent=!1,this.contentGroup.addChild(this._logView),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD13422,this._redInfoView.getRedId()))}},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_guild_red")},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this._redInfoView&&(this._redInfoView.parent&&this._redInfoView.parent.removeChild(this._redInfoView),this._redInfoView.dispose(),this._redInfoView=null),this._logView&&(this._logView.parent&&this._logView.parent.removeChild(this._logView),this._logView.dispose(),this._logView=null)},t}(LayeroutWindow);egret.registerClass(GuildDonateRedWindow,"GuildDonateRedWindow");var GuildDonateWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildDonateViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.GUILD_DONATE,this.setImageTitle("title_guild_donate"),this.tabBar.dataProvider=new eui.ArrayCollection(["金库","记录"]),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this._isInit||(this._isInit=!0,this.setIndex())},n.onBarItemTap=function(e){this.setIndex(this.tabBar.selectedIndex)},n.setIndex=function(e){if(void 0===e&&(e=0),this._isInit){switch(this.tabBar.selectedIndex=e,this._curView&&this._curView.parent&&this._curView.parent.removeChild(this._curView),e){case 0:this._infoView||(this._infoView=new GuildDonateInfoView),this._curView=this._infoView,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD13400));break;case 1:this._logView||(this._logView=new GuildDonateLogView),this._curView=this._logView,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD13410)),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD13411))}this.contentGroup.addChild(this._curView)}},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_guild_donate")},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this._infoView&&(this._infoView.parent&&this._infoView.parent.removeChild(this._infoView),this._infoView.dispose(),this._infoView=null),this._logView&&(this._logView.parent&&this._logView.parent.removeChild(this._logView),this._logView.dispose(),this._logView=null)},t}(LayeroutWindow);egret.registerClass(GuildDonateWindow,"GuildDonateWindow");var GuildFarmInfoView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildFarmInfoSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){var e=new eui.HorizontalLayout;e.gap=10,this.roleList.layout=e,GameDispatcher.getInstance().addEventListener(DailyEvtName.DAILY_UPDATE,this.updateDailyNum,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEGX,this.updateGX,this),this.addGlobalEventListener(GuildEvtName.CCMD14900_UPDATE,this.updateData,this),this.btn_tou.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouClick,this),this.btn_shui.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShuiClick,this),this.btn_fei.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFeiClick,this),this.btn_shou.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShouClick,this),this.btn_my.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMyClick,this),null==this._monsterFigure&&(this._monsterFigure=new MonsterFigure,this._monsterFigure.x=105,this._monsterFigure.y=115),this.monsterFigureContainer.addChild(this._monsterFigure),this._monsterFigure.setRes(10033,"stand",4),this._talkArr=["我是种田小能手","今天的收成不错","主人，小心有人偷菜","别点我，点了也没用","嫌慢就施肥","嫌少就偷菜"],this._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("shou"),50,50,this.effectGroup,80,!0)
},n.onTouClick=function(){this._type=2,this.showShouEffect()},n.onShuiClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD14905,this._data.role_id))},n.onFeiClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD14903))},n.onShouClick=function(){this._type=1,this.showShouEffect()},n.onMyClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD14900))},n.updateData=function(e){this._data=e.data,GuildModel.getInstance().farmSelectRole_id=this._data.role_id,this.txtLv.text="庄园等级："+this._data.level+"级";var t=GuildModel.getInstance().getFarmVo(this._data.level);this.txtGx.text=t.gain_gx+"贡献/块田地",this._data.last_time>t.harvest_sec?this._data.last_time=t.harvest_sec:(TimerManager.getInstance().remove(1e3,this.updateBar,this),TimerManager.getInstance().add(1e3,this.updateBar,this)),this.txtBar.text=this._data.last_time+"/"+t.harvest_sec;var i=this._data.last_time/t.harvest_sec;i>1&&(i=1),0>i&&(i=0),this.guild_bar.scaleX=i;var n="guild_farm_stauts_1";i>=.4&&.7>i?n="guild_farm_stauts_2":i>=.7&&1>i?n="guild_farm_stauts_3":i>=1&&(n="guild_farm_stauts_4");var s,a,o,r=0,h=!1;this.effectPointArr=[];for(var l=1;13>l;l++)s=GuildModel.getInstance().getFarmRound(l),a=this["map_"+l],o=this["shu_"+l],o.source=n,this._data.round>=s?(o.visible=!0,a.source="guild_farm_map2",this.effectPointArr.push(o),r++):(o.visible=!1,a.source="guild_farm_map",h||(h=!0,this.txtOpen.text=s+"转开启",this.openGroup.x=o.x,this.openGroup.y=o.y));this.openGroup.visible=h;for(var d,_=RoleModel.getInstance().getRoleCommon().role_id,c=GuildModel.getInstance().getFarmdata(_).guild_farms,u=new eui.ArrayCollection,p=this.roleList.scrollH,l=0;l<c.length;l++)c[l].role_id==this._data.role_id&&(d=c[l]),c[l].role_id!=_&&u.addItem(c[l]);this.roleList.dataProvider=u,this.roleList.scrollH=p,this.btn_tou.visible=!1,this.btn_shui.visible=!1,this.btn_fei.visible=!1,this.btn_shou.visible=!1,this.btn_my.visible=!1,this.txtTime.visible=!1,this.txtCount.visible=!1,_==this._data.role_id?(i>=1?this.btn_shou.visible=!0:this.btn_fei.visible=!0,this._data.man_time>0?(this.txtTime.visible=!0,this.txtTime.text="冷却时间："+TimeUtil.getTime(this._data.man_time),TimerManager.getInstance().remove(1e3,this.onShowTime,this),TimerManager.getInstance().add(1e3,this.onShowTime,this),this.btn_fei.enabled=!1):this.btn_fei.enabled=!0,this.txtName.text="我自己"):d&&(this.txtName.text=d.name,this.btn_my.visible=!0,this.btn_tou.visible=1==d.is_steal,1==d.is_water&&(this.btn_shui.visible=!0,this.txtCount.visible=!0,this.updateDailyNum())),this.updateGX()},n.showShouEffect=function(){TimerManager.getInstance().remove(300,this.onEffectComplete,this),this.onEffectComplete(),this.effectGroup.visible=!0,TimerManager.getInstance().add(300,this.onEffectComplete,this)},n.onEffectComplete=function(){if(this.effectPointArr.length>0){var e=this.effectPointArr.shift();this.effectGroup.x=e.x,this.effectGroup.y=e.y,1==this._type&&(e.source="guild_farm_stauts_1")}else TimerManager.getInstance().remove(300,this.onEffectComplete,this),this.effectGroup.visible=!1,1==this._type?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD14902)):2==this._type&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD14904,this._data.role_id))},n.onShowTime=function(){this._data.man_time--,this._data.man_time>0?this.txtTime.text="冷却时间："+TimeUtil.getTime(this._data.man_time):(this.txtTime.visible=!1,TimerManager.getInstance().remove(1e3,this.onShowTime,this))},n.updateDailyNum=function(){this.txtCount.text="今天使用次数："+DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_20)+"/"+SingleModel.getInstance().getSingVO(SingleModel.KEY_14902).value},n.updateGX=function(){this.txtHas.text="我的贡献："+RoleModel.getInstance().getRoleInfo().getGx().toString()},n.showTalk=function(){var e=this;this.talkGroup.visible=!0,this.txtTalk.text=this._talkArr[Math.floor(6*Math.random())],this._timeId>0&&clearTimeout(this._timeId),this._timeId=setTimeout2(function(){e.talkGroup.visible=!1},5e3)},n.updateBar=function(){this._data.last_time++;var e=GuildModel.getInstance().getFarmVo(this._data.level);this.txtBar.text=this._data.last_time+"/"+e.harvest_sec;var t=this._data.last_time/e.harvest_sec;t>1&&(t=1),0>t&&(t=0),this.guild_bar.scaleX=t,this._data.last_time>=e.harvest_sec&&(TimerManager.getInstance().remove(1e3,this.updateBar,this),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD14901,this._data.role_id)))},n.dispose=function(){e.prototype.dispose.call(this),GameDispatcher.getInstance().removeEventListener(DailyEvtName.DAILY_UPDATE,this.updateDailyNum,this),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGEGX,this.updateGX,this),this.removeGlobalEventListener(GuildEvtName.CCMD14900_UPDATE,this.updateData,this),this.btn_tou.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouClick,this),this.btn_shui.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShuiClick,this),this.btn_fei.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onFeiClick,this),this.btn_shou.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShouClick,this),this.btn_my.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMyClick,this),this._monsterFigure&&(this._monsterFigure.dispose(),this._monsterFigure=null),TimerManager.getInstance().remove(1e3,this.updateBar,this),TimerManager.getInstance().remove(1e3,this.onShowTime,this),TimerManager.getInstance().remove(300,this.onEffectComplete,this),this._effect&&(this._effect.dispose(),this._effect=null)},t}(BaseView);egret.registerClass(GuildFarmInfoView,"GuildFarmInfoView");var GuildFarmLogView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildFarmLogSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){var e=new eui.VerticalLayout;e.paddingTop=3,e.paddingLeft=3,e.paddingRight=3,e.paddingBottom=3,this.itemList.layout=e,this.addGlobalEventListener(GuildEvtName.CCMD14910_UPDATE,this.updateData,this)},n.updateData=function(e){var t=e.data;t.length>0&&t.sort(function(e,t){return e.ctime<t.ctime?1:-1});for(var i,n=new eui.ArrayCollection,s=0;s<t.length;s++)i=new LogVO,i.time=t[s].ctime,i.content=t[s].content,n.addItem(i);this.itemList.dataProvider=n},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(GuildEvtName.CCMD14910_UPDATE,this.updateData,this)},t}(BaseView);egret.registerClass(GuildFarmLogView,"GuildFarmLogView");var GuildFarmRoleItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/guild/GuildFarmRoleItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},n.onGetClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD14901,this._info.role_id))},n.dataChanged=function(){this._info=this.data,this.txtName.text=this._info.name,this.iconShui.visible=1==this._info.is_water,this.iconTou.visible=1==this._info.is_steal,this.head.setHeadURLByPartner(this._info.icon),this.iconSelect.visible=this._info.role_id==GuildModel.getInstance().farmSelectRole_id},t}(eui.ItemRenderer);egret.registerClass(GuildFarmRoleItem,"GuildFarmRoleItem");var GuildFarmWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildFarmWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.GUILD_FARM,this.setImageTitle("title_guild_farm"),this.tabBar.dataProvider=new eui.ArrayCollection(["农田","记录"]),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this._isInit||(this._isInit=!0,this.setIndex())},n.onHelp=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.GUILD_FARM))},n.onBarItemTap=function(e){this.setIndex(this.tabBar.selectedIndex)},n.setIndex=function(e){if(void 0===e&&(e=0),this._isInit){switch(this.tabBar.selectedIndex=e,this._curView&&this._curView.parent&&this._curView.parent.removeChild(this._curView),e){case 0:this._infoView||(this._infoView=new GuildFarmInfoView),this._curView=this._infoView,this._infoView.showTalk(),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD14900));break;case 1:this._logView||(this._logView=new GuildFarmLogView),this._curView=this._logView,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD14910))}this.contentGroup.addChild(this._curView)}},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_guild_farm")},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this._infoView&&(this._infoView.parent&&this._infoView.parent.removeChild(this._infoView),this._infoView.dispose(),this._infoView=null),this._logView&&(this._logView.parent&&this._logView.parent.removeChild(this._logView),this._logView.dispose(),this._logView=null)},t}(LayeroutWindow);egret.registerClass(GuildFarmWindow,"GuildFarmWindow");var GuildFubenHuodongItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildFubenHuodongItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},n.onGetClick=function(){},n.dataChanged=function(){this._huodongVo=this.data,this.head.setHeadURLByPartner(this._huodongVo.icon),this.txtTitle.text=this._huodongVo.name,this.txtTime.text=this._huodongVo.time,this.txtReward.text=this._huodongVo.reward,this.txtSheng.text="1/1",this.txtCount.text="0/5"},t}(eui.ItemRenderer);egret.registerClass(GuildFubenHuodongItem,"GuildFubenHuodongItem");var GuildFubenHuodongView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildFubenHuodongSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this);for(var e=GuildModel.getInstance().getHuodongArr(),t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this.itemList.dataProvider=t},n.dispose=function(){e.prototype.dispose.call(this)},t}(BaseView);egret.registerClass(GuildFubenHuodongView,"GuildFubenHuodongView");var GuildFubenInfoView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/guild/GuildFubenInfoSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnSao.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSaoClick,this),this.btnZhu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onZhuClick,this),this.btnZhu2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onZhuClick2,this),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.addGlobalEventListener(GuildEvtName.CCMD16300_UPDATE,this.updateData,this),this.addGlobalEventListener(GuildEvtName.CCMD16301_UPDATE,this.updateRoleInfo,this),this.addGlobalEventListener(GuildEvtName.CCMD16302_UPDATE,this.updateRank,this)},n.onGetClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD16310))},n.onSaoClick=function(){this.btnSao.enabled=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_FUBEN_SAO))},n.onZhuClick=function(){return this._rankData&&this._rankData.length>0&&this._rankData[0].role_id==RoleModel.getInstance().getRoleCommon().role_id?void Message.show("第一名无法请自己助战"):(this.btnZhu.visible=!1,this.btnZhu2.visible=!0,void GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD16303,1)))},n.onZhuClick2=function(){this.btnZhu.visible=!0,this.btnZhu2.visible=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD16303,0))},n.updateData=function(e){this._data=e.data,this.txtCur.text="第"+this._data.level+"关";var t=GuildModel.getInstance().getFubenVo(this._data.level+1);if(t){this.txtNext.text="第"+(this._data.level+1)+"关";var i=SceneModel.getInstance().getMonsterConfig(t.mon_id);null==this._monsterFigure&&(this._monsterFigure=new MonsterFigure,this._monsterFigure.x=150,this._monsterFigure.y=115),this.monsterGroup.addChild(this._monsterFigure),this._monsterFigure.setRes(i.resID),this.item.data=t.itemList[0].info,t=GuildModel.getInstance().getFubenVo(this._data.level+2),t&&(i=SceneModel.getInstance().getMonsterConfig(t.mon_id),null==this._monsterFigure2&&(this._monsterFigure2=new MonsterFigure,this._monsterFigure2.x=150,this._monsterFigure2.y=115),this.monsterGroup2.addChild(this._monsterFigure2),this._monsterFigure2.setRes(i.resID))}else this.btnGet.enabled=!1,this.txtNext.text="已达最高关卡";this.updateDaily()},n.updateRoleInfo=function(e){var t=e.data;t.icon>0&&(this.head.setHeadURLByPartner(t.icon),this.txtTitle.text="本公会第一名",this.txtRole_p.text="["+GuildModel.getInstance().getPositionStr(t.position)+"]",this.txtFight.text="战斗力："+t.power)},n.updateRank=function(e){this._rankData=e.data;var t=this._rankData;this.txtRank.text="",this.txtRank2.text="",this.txtRank3.text="",this.txtGuan.text="",this.txtGuan2.text="",this.txtGuan3.text="",t.length>0&&(t.sort(function(e,t){return e.rank>t.rank?1:-1}),t[0]&&(this.txtRank.text=t[0].rank+" "+t[0].Name,this.txtGuan.text=t[0].pass_num+"关"),t[1]&&(this.txtRank2.text=t[1].rank+" "+t[1].Name,this.txtGuan2.text=t[1].pass_num+"关"),t[2]&&(this.txtRank3.text=t[2].rank+" "+t[2].Name,this.txtGuan3.text=t[2].pass_num+"关"))},n.updateDaily=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_27),t=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16302).value);this.txtZhu.htmlText="<font color='"+(e>=t?ColorUtil.COLOR_RED:ColorUtil.COLOR_GREEN)+"'>"+(t-e)+"/"+t+"</font>",this.btnZhu.visible=0==this._data.is_assist&&t>e,this.btnZhu2.visible=1==this._data.is_assist&&t>e,e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_28),t=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16301).value),this.txtSao.htmlText="<font color='"+(e>=t?ColorUtil.COLOR_RED:ColorUtil.COLOR_GREEN)+"'>"+(t-e)+"/"+t+"</font>",this.btnSao.enabled=this._data.level>e},n.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnSao.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSaoClick,this),this.btnZhu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onZhuClick,this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.removeGlobalEventListener(GuildEvtName.CCMD16300_UPDATE,this.updateData,this),this.removeGlobalEventListener(GuildEvtName.CCMD16301_UPDATE,this.updateRoleInfo,this),this.removeGlobalEventListener(GuildEvtName.CCMD16302_UPDATE,this.updateRank,this),this._monsterFigure&&(this._monsterFigure.dispose(),this._monsterFigure=null),this._monsterFigure2&&(this._monsterFigure2.dispose(),this._monsterFigure2=null),this.item.dispose(),this.item=null},t}(BaseView);egret.registerClass(GuildFubenInfoView,"GuildFubenInfoView");var GuildFubenSaoItem=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildFubenSaoItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dataChanged=function(){var e=this.data;this.txtTitle.text="第"+e.level+"关",this.goodItem.data=GoodsListProxy.getInstance().getGoodsInfoByType(e.drop_list[0].asset_id),this.goodItem.num=e.drop_list[0].value},t}(eui.ItemRenderer);egret.registerClass(GuildFubenSaoItem,"GuildFubenSaoItem");var GuildFubenSaoWindow=function(e){function t(){e.call(this),this._index=0,this.skinName="resource/game_skins/guild/GuildFubenSaoViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.addGlobalEventListener(GuildEvtName.CCMD16304_UPDATE,this.updateData,this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnClick,this),this._itemArr=new eui.ArrayCollection},n.onReturnClick=function(){this.isPop=!1},n.updateData=function(e){var t=this;this._itemArr.addItem(e.data),this.itemList.dataProvider=this._itemArr,this._timeId>0&&clearTimeout(this._timeId),this._timeId=setTimeout2(function(){t.itemList.contentHeight>t.scroller.height&&(t.scroller.viewport.scrollV=t.itemList.contentHeight-t.scroller.height),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD16304))},300)},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(GuildEvtName.CCMD16304_UPDATE,this.updateData,this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnClick,this)},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=GameContent.stageHeight-this.height>>1},t}(LayeroutWindow);egret.registerClass(GuildFubenSaoWindow,"GuildFubenSaoWindow");var GuildFubenWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildFubenWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_guild_fuben"),this.tabBar.dataProvider=new eui.ArrayCollection(["公会副本"]),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this.setIndex()},n.onHelp=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.GUILD_FUBEN))},n.onBarItemTap=function(e){this.setIndex(this.tabBar.selectedIndex)},n.setIndex=function(e){switch(void 0===e&&(e=0),this.tabBar.selectedIndex=e,this._curView&&this._curView.parent&&this._curView.parent.removeChild(this._curView),e){case 0:this._infoView||(this._infoView=new GuildFubenInfoView),this._curView=this._infoView;break;case 1:this._huodong||(this._huodong=new GuildFubenHuodongView,this._huodong.x=5),this._curView=this._huodong}this.contentGroup.addChild(this._curView)},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this._infoView&&(this._infoView.dispose(),this._infoView=null),this._huodong&&(this._huodong.dispose(),this._huodong=null),this._curView=null},t}(LayeroutWindow);egret.registerClass(GuildFubenWindow,"GuildFubenWindow");var GuildShopLogWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildShopLogWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_guild_shopLog");var t=new eui.VerticalLayout;t.paddingTop=3,t.paddingLeft=3,t.paddingRight=3,t.paddingBottom=3,this.itemList.layout=t},n.updateData=function(e){var t=e.data;t.length>0&&t.sort(function(e,t){return e.ctime<t.ctime?1:-1});for(var i,n,s=new eui.ArrayCollection,a=0;a<t.length;a++)i=new LogVO,i.time=t[a].ctime,n=GoodsListProxy.getInstance().getGoodsInfoByType(t[a].item_id),i.content="<font color='"+ColorUtil.COLOR_GREEN+"'>"+t[a].name+"</font>获得<font color='"+ColorUtil.getGoodColor(n.quality-1)+"'>"+n.name+"</font>",s.addItem(i);this.itemList.dataProvider=s},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.addGlobalEventListener(GuildEvtName.CCMD13710_UPDATE,this.updateData,this),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD13710))},n.dispose=function(){e.prototype.dispose.call(this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.removeGlobalEventListener(GuildEvtName.CCMD13710_UPDATE,this.updateData,this)},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},t}(LayeroutWindow);egret.registerClass(GuildShopLogWindow,"GuildShopLogWindow");var GuildShopWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildShopWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_guild_shop"),this.txtLog.htmlText="<u>更多记录>></u>"},n.updateData=function(e){this._data=e.data,this._shopVo=GuildModel.getInstance().getShopVo(this._data.level),this._data.icon>0&&(this.head.source=UrlUtil.getHeadURL(1,this._data.icon)),this.updateDailyNum(),this.updateGX();for(var t,i=0;i<this._shopVo.itemList.length;i++)t=this["item_"+i],t.data=this._shopVo.itemList[i].info,t.showLv(!1);if(t=this.item,t.data=this._shopVo.add_item[0].info,t.showLv(!1),this.txtName.visible=this._data.role_id>0,this._data.item_id>0){var n=GoodsListProxy.getInstance().getGoodsInfoByType(this._data.item_id);this.txtName.htmlText="<font color='"+ColorUtil.COLOR_GREEN+"'>"+this._data.name+"</font>获得<font color='"+ColorUtil.getGoodColor(n.quality-1)+"'>"+n.name+"</font>×"+this._data.item_num}},n.onGet=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD13701))},n.onLog=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_VIEW,17))},n.onHead=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_10);0==e&&this._data.role_id>0&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD13702))},n.updateGX=function(){var e=RoleModel.getInstance().getRoleInfo().getGx();this.txtGx.htmlText="<font color='"+(e>=this._shopVo.con_gx?ColorUtil.COLOR_GREEN:ColorUtil.COLOR_RED)+"'>"+e+"/"+this._shopVo.con_gx+"</font>"},n.updateDailyNum=function(){if(null!=this._data&&null!=this._shopVo){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_9);this.txtCount.text=this._shopVo.times-e+"/"+this._shopVo.times,this.tipsGroup.visible=0==DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_10)&&this._data.role_id>0,this.icon_lq.visible=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_10)>0&&this._data.role_id>0}},n.onSuccess=function(e){var t=this,i=e.data;if(i.flag>0){var n=this.item_result;n.data=GoodsListProxy.getInstance().getGoodsInfoByType(i.drop_list[0].asset_id),n.num=i.drop_list[0].value,this.resultGroup.visible=!0,this._timeId>0&&clearTimeout(this._timeId),this._timeId=setTimeout(function(){t.resultGroup.visible=!1},3e3)}},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.CCMD13700)),this.txtLog.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLog,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.head.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHead,this),this.addGlobalEventListener(GuildEvtName.CCMD13700_UPDATE,this.updateData,this),this.addGlobalEventListener(GuildEvtName.CCMD13701_UPDATE,this.onSuccess,this),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDailyNum,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEGX,this.updateGX,this)},n.dispose=function(){e.prototype.dispose.call(this),this.txtLog.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLog,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.head.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHead,this),this.removeGlobalEventListener(GuildEvtName.CCMD13700_UPDATE,this.updateData,this),this.removeGlobalEventListener(GuildEvtName.CCMD13701_UPDATE,this.onSuccess,this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDailyNum,this),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGEGX,this.updateGX,this)},t}(LayeroutWindow);egret.registerClass(GuildShopWindow,"GuildShopWindow");var GuildSkillItem=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildSkillItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.dataChanged=function(){this._skillVo=this.data,this.txtName.text=this._skillVo.name,this.txtLv.addMiaoBian(),this.txtLv.text=this._skillVo.skill_lv.toString(),this.skillIcon=new PicLoader,this.skillIcon.x=20,this.skillIcon.y=24,this.skillIcon.load(UrlUtil.getSkillGuildURL(this._skillVo.skill_id)),this.addChild(this.skillIcon),this.addChild(this.txtLv),this.addChild(this.iconSelect)},s.setSelect=function(e){this.selected=e,this.iconSelect.visible=e},i(s,"showName",void 0,function(e){this.txtName.visible=e,this.nameBg.visible=e}),t}(eui.ItemRenderer);egret.registerClass(GuildSkillItem,"GuildSkillItem",["eui.UIComponent"]);var GuildSkillWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/guild/GuildSkillViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.GUILD_SKILL,this.setImageTitle("title_guild_skill"),this.onBtnReturnSetIndex(),this.heroListTopBox=new HeroListTopBox,this.topContainer.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0,this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.itemShow.showName=!1,this._skillItemArr=[];for(var t,i=1;6>i;i++)t=this["item_"+i],t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSkillTap,this),this._skillItemArr.push(t);this.addGlobalEventListener(GuildEvtName.GUILD_CCMD12600_UPDATE,this.updateData,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEGX,this.updateGX,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this)},n.onGet=function(){this._selectVo&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12601,{skill_id:this._selectVo.skill_id,id:this._playerVo.parnerID}))},n.onSkillTap=function(e){this._selectVo=e.currentTarget.data,this.onSelectSkill()},n.onSelectSkill=function(){for(var e,t=0;t<this._skillItemArr.length;t++)e=this._skillItemArr[t],e.data==this._selectVo?e.setSelect(!0):e.setSelect(!1);this.itemShow.data=this._selectVo,this.txtName.text=this._selectVo.name+"（Lv."+this._selectVo.skill_lv+"）",0===this._selectVo.skill_lv?this.txtCur.text="未学习":this.txtCur.text=GuildModel.getInstance().getSkillProStr(this._selectVo);var i=this._selectVo.skill_lv+1,n=GuildModel.getInstance().getSkillByLv(this._selectVo.skill_id,i);if(n)if(this.txtNext.text=GuildModel.getInstance().getSkillProStr(n),this.txtgx.htmlText=RoleModel.getInstance().getRoleInfo().getGx()>=n.con_gx?n.con_gx.toString():"<font color='"+ColorUtil.COLOR_RED+"'>"+n.con_gx+"</font>",this.txtCoin.htmlText=RoleModel.getInstance().getRoleInfo().getCoin()>=n.con_coin?n.con_coin.toString():"<font color='"+ColorUtil.COLOR_RED+"'>"+n.con_coin+"</font>",n.up==n.luck)this.barGroup.visible=!1,this.txtPro.visible=!0,1==n.skill_id&&(this.txtPro.text="加成角色生命"),2==n.skill_id&&(this.txtPro.text="加成角色攻击"),3==n.skill_id&&(this.txtPro.text="加成角色防御");else{this.txtPro.visible=!1,this.txtBar.text=this._selectVo.exp+"/"+this._selectVo.luck;var s=this._selectVo.exp/this._selectVo.luck;s>1&&(s=1),this.guild_bar.scaleX=s,this.barGroup.visible=!0}else this.barGroup.visible=!1},n.onUpdateSkill=function(){this._skillDataArr=GuildModel.getInstance().getPartnerSkillList(this._playerVo.parnerID),this._skillDataArr||(this._skillDataArr=[]);for(var e,t,i,n,s=1;6>s;s++){e=this._skillItemArr[s-1],i=0,n=0;for(var a=0;a<this._skillDataArr.length;a++)this._skillDataArr[a].skill_id==s&&(i=this._skillDataArr[a].level,n=this._skillDataArr[a].exp);t=GuildModel.getInstance().getSkillByLv(s,0==i?1:i),t.skill_lv=i,t.exp=n,e.data=t,(1==s&&null==this.itemShow.data||this._selectVo&&this._selectVo.skill_id==t.skill_id)&&(this._selectVo=t)}},n.onBoxTap=function(e){e.data&&(this._playerVo=e.data,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12600,this._playerVo.parnerID)))},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._playerVo=this.heroListTopBox.roleListData[0],GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_CCMD12600,this._playerVo.parnerID))},n.updateData=function(){this.onUpdateSkill(),this.onSelectSkill(),this.updateGX()},n.updateGX=function(){this.txtCur_gx.text=RoleModel.getInstance().getRoleInfo().getGx().toString()},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_guild_skill")},n.dispose=function(){e.prototype.dispose.call(this),this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null,this.removeGlobalEventListener(GuildEvtName.GUILD_CCMD12600_UPDATE,this.updateData,this),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGEGX,this.updateGX,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this);for(var t,i=1;6>i;i++)t=this["item_"+i],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSkillTap,this)},t}(LayeroutWindow);egret.registerClass(GuildSkillWindow,"GuildSkillWindow");var HFBossPointItem=function(e){function t(){e.call(this),this._img=new PicLoader,this._img.load(rURL("resource/assets/icon/hefu/HFboss/HFBossPoint_box.png")),this.addChild(this._img),this._imgGet=new CustomImage,this._imgGet.source=RES.getRes("share_json.share_geted"),this.addChild(this._imgGet),this._imgGet.x=-12,this._imgGet.y=10,this._imgGet.visible=!1,this._txtPoint=new CustomLabel,this.addChild(this._txtPoint),this._txtPoint.size=20,this._txtPoint.x=10,this._txtPoint.y=81,this._txtPoint.textAlign="center"}__extends(t,e);var i=__define,n=t,s=n.prototype;return i(s,"width",function(){return 109}),s.setPoint=function(){var e=this.data;this._txtPoint.text=e.need+"积分"},s.setGeted=function(){this._imgGet.visible=!0},s.dispose=function(){this.parent&&this.parent.removeChild(this._img),this._img.dispose(),this._img=null,this._imgGet&&(this._imgGet.parent&&this._imgGet.parent.removeChild(this._imgGet),this._imgGet.dispose(),this._imgGet=null)},t}(Csprite);egret.registerClass(HFBossPointItem,"HFBossPointItem");var HFBossPointView=function(e){function t(){e.call(this),this._itemAwardArr=[],this._itemArr=[],this.name="HFBossPointView"+t.K++,this._model=HeFuModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/hefu/HFBossPointViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._bg=new PicLoader,this._bg.load(rURL("resource/assets/icon/hefu/HFboss/bg.png")),this.addChildAt(this._bg,0),this._lrContainer=new CustomRLContainer(0,522,-80),this._lrContainer.x=64,this._lrContainer.y=6,this._lrContainer.setBtnY(13),this._itemContainer.addChild(this._lrContainer);for(var e,t=this._model.getHFbossRewardConfig(),i=t.length,n=0;i>n;n++)e=new HFBossPointItem,e.data=t[n],e.setPoint(),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),this._itemArr.push(e);this._lrContainer.setItemList(this._itemArr,4)},n.onAdd=function(){e.prototype.onAdd.call(this),this._txtPoint.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().addEventListener(HeFuEvtName.UPDATE_BOSSPOINT_INFO,this.updateServerData,this)
},n.onRemove=function(){e.prototype.onRemove.call(this),this._txtPoint.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().removeEventListener(HeFuEvtName.UPDATE_BOSSPOINT_INFO,this.updateServerData,this)},n.setVO=function(e){this._vo=e},n.onTxtLinkHandler=function(){this.dispatchGlobalEvent(new ParamEvent(BossEvtName.OPEN_BOSS_WINDOW))},n.onItemClick=function(e){var t=e.currentTarget;this.setSelected(t)},n.setSelected=function(e){this._selectedItem=e,this._imgSelected1.x=this._itemContainer.x+this._lrContainer.x+this._selectedItem.x+30,this._imgSelected2.x=this._itemContainer.x+this._lrContainer.x+this._selectedItem.x+21,this.updateInfo()},n.updateInfo=function(){this.clearAwardItems();for(var e,t,i=this._selectedItem.data,n=i.goodsList,s=n.length,a=0;s>a;a++)t=n[a],e=new GoodsItemSmall,e.x=a*(e.width+10),e.data=GoodsListProxy.getInstance().getGoodsInfoByType(t.asset_id),e.num=t.value,this._itemAwardArr.push(e),this._itemAwardContainer.addChild(e);this.updateNeedPoint()},n.updateNeedPoint=function(){var e=this._model.hfBoss_point,t=this._selectedItem.data.need,i="#00d228";t>e&&(i="#ff0000"),this._txtNeedPoint.htmlText="BOSS积分达到<font color='"+i+"'>"+t+"</font>可领取"},n.updateServerData=function(){var e=this._model.hfBoss_point,t=this._model.hfBoss_awardId,i=this._model.hfBoss_awardedId;this._itemArr[i]?this.setSelected(this._itemArr[i]):this.setSelected(this._itemArr[0]);this._selectedItem.data.need;t>i?this._btnOK.enabled=!0:this._btnOK.enabled=!1,this._txtPoint.htmlText=e+"<font color='#00d228'><u><a href = 'event:2'>前往击杀</a></u></font>",this.updateNeedPoint();for(var n,s=this._itemArr.length,a=0;s>a;a++)n=this._itemArr[a],i>=n.data.template_id&&n.setGeted()},n.clearAwardItems=function(){for(var e,t=this._itemAwardArr.length,i=0;t>i;i++)e=this._itemAwardArr[i],e.parent&&e.parent.removeChild(e),e.data=null,e.dispose(),e=null;this._itemAwardArr=[]},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),e.dispose(),e=null;this._itemArr=[]},n.onOkHandler=function(){this.dispatchGlobalEvent(new ParamEvent(HeFuEvtName.CCMD18601))},n.dispose=function(){e.prototype.dispose.call(this),this._bg&&(this._bg.dispose(),this._bg=null),this.clearAwardItems(),this.clearItems()},t.K=0,t}(BaseView);egret.registerClass(HFBossPointView,"HFBossPointView");var HFChargeItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/hefu/HFChargeItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this)},s.setData=function(e){this.vo=e,null==this._imgDay&&(this._imgDay=new PicLoader,this._imgDay.x=21,this._imgDay.y=8,this.addChild(this._imgDay));var t=GoodsListProxy.getInstance().getGoodsInfoByType(e.rewardList[0].asset_id);this._imgItem.source=UrlUtil.getGoodsImageURL(t.pic),this._imgDay.load(UrlUtil.getHFChargeURL("day_"+e.template_id));var i=HeFuModel.getInstance().hefuDay;this.vo.template_id>i?(this._imgShader.visible=!0,this._imgLock.visible=!0,this.touchEnabled=this.touchChildren=!1):(this._imgShader.visible=!1,this._imgLock.visible=!1,this.touchEnabled=this.touchChildren=!0),this.vo.template_id==i?this._imgIsToday.visible=!0:this._imgIsToday.visible=!1},s.updateRedDot=function(){null!=this.vo&&(this.showRedDot=HeFuModel.getInstance().checkHFChargeCanGetAwardOneDay(this.vo.template_id))},s.updateInfo=function(e){},s.setSelected=function(e){this._imgSelected.visible=e},i(s,"width",function(){return 116}),s.dispose=function(){this._imgDay&&(this._imgDay.dispose(),this._imgDay=null),this.parent&&this.parent.removeChild(this),e.prototype.dispose.call(this)},t}(Csprite);egret.registerClass(HFChargeItem,"HFChargeItem");var HFChargeView=function(e){function t(){e.call(this),this._itemArr=[],this.name="HFChargeView"+t.K++,this._model=HeFuModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/hefu/HFChargeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)},n.setVO=function(e){this._vo=e},n.onAdd=function(){e.prototype.onAdd.call(this),this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQEUST_16600)),this._lrContainer=new CustomRLContainer(0,518,-60),this._lrContainer.x=64,this._lrContainer.y=6,this._lrContainer.setBtnY(30),this.addChild(this._lrContainer);for(var t,i=this._model.getHFchargeConfig(),n=i.length,s=0;n>s;s++)t=new HFChargeItem,t.setData(i[s]),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),this._itemArr.push(t);this._lrContainer.setItemList(this._itemArr,4),this.setSelectedItem(this._itemArr[0]),this._btnCharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChargeHandler,this),this._btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetHandler,this),this.addGlobalEventListener(HeFuEvtName.UPDATE_HF_CHARGE_INFO,this.updateInfoHandler,this)},n.onRemove=function(){e.prototype.onRemove.call(this),this._btnCharge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChargeHandler,this),this._btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetHandler,this),this.removeGlobalEventListener(HeFuEvtName.UPDATE_HF_CHARGE_INFO,this.updateInfoHandler,this);for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),t.dispose(),t=null;this._itemArr=[]},n.onChargeHandler=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.onGetHandler=function(){var e=new ParamEvent(HeFuEvtName.CCMD19101);e.data={id:this._selectedItem.vo.template_id},this.dispatchGlobalEvent(e)},n.onItemClick=function(e){var t=e.currentTarget;this.setSelectedItem(t)},n.setSelectedItem=function(e){for(var t,i=HeFuModel.getInstance().hefuDay,n=this._model.getChargeData(e.vo.template_id),s=this._itemArr.length,a=0;s>a;a++)t=this._itemArr[a],t.setSelected(!1);this._selectedItem=e,this._selectedItem.setSelected(!0),this._txtReward.htmlText="元宝x<font color='#ffd200'>"+this._selectedItem.vo.limitRewardList[0].value+"</font>";var o=this._selectedItem.vo.rewardList[0].asset_id,r=GoodsListProxy.getInstance().getGoodsInfoByType(o);r.num=Number(this._selectedItem.vo.rewardList[0].value),this._item.data=r,this._item.showName(r.name),this._txtDay.text=this._selectedItem.vo.template_id+"",this._txtChargeNum.text=this._selectedItem.vo.need_gold+"",this._imgState.visible=!1,this._txtAlert.visible=!0,this._selectedItem.vo.template_id<i?n?0==n.spec_flag?(this._imgState.visible=!0,this._txtAlert.visible=!1,this._imgState.source=RES.getRes("share_json.share_overdue")):1==n.spec_flag&&(this._imgState.visible=!0,this._imgState.source=RES.getRes("share_json.share_geted")):(this._imgState.visible=!0,this._txtAlert.visible=!1,this._imgState.source=RES.getRes("share_json.share_overdue")):n&&(0==n.spec_flag?(this._imgState.visible=!1,this._txtAlert.visible=!0,this._imgState.source=RES.getRes("share_json.share_overdue")):1==n.spec_flag&&(this._imgState.visible=!0,this._imgState.source=RES.getRes("share_json.share_geted"))),this.updateChargeCount()},n.setData=function(e){},n.updateChargeCount=function(){var e=this._model.getHFTotalCharge();this._txtCount.text="活动期间累计充值:"+e,this.updateBtnGetState(e),this.updateItemsRedDot()},n.updateBtnGetState=function(e){if(null!=this._selectedItem&&null!=this._selectedItem.vo){var t=this._model.getChargeData(this._selectedItem.vo.template_id);t?0==t.flag?(this._btnGet.enabled=!0,this._btnGet.label="领取奖励"):(this._btnGet.enabled=!1,this._btnGet.label="已领取"):e>=this._selectedItem.vo.need_gold?(this._selectedItem.vo&&(this._btnGet.enabled=!0),this._btnGet.label="领取奖励"):(this._btnGet.enabled=!1,this._btnGet.label="领取奖励")}},n.updateInfoHandler=function(){for(var e,t,i=this._itemArr.length,n=0;i>n;n++)e=this._itemArr[n],t=this._model.getChargeData(e.vo.template_id),t&&e.updateInfo(t);this._selectedItem&&this.setSelectedItem(this._selectedItem),this.updateChargeCount()},n.updateItemsRedDot=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.updateRedDot()},n.dispose=function(){e.prototype.dispose.call(this)},t.K=1,t}(BaseView);egret.registerClass(HFChargeView,"HFChargeView");var HFDlItem=function(e){function t(t){e.call(this),this._selected=!1,this._day=t,this._img=new PicLoader,this._img.load(rURL("resource/assets/icon/hefu/HFDl/loginAward_z1.png")),this.addChild(this._img),this._imgDay=new PicLoader,this._imgDay.load(rURL("resource/assets/icon/hefu/HFDl/day_"+this._day+".png")),this._imgDay.x=33,this._imgDay.y=109,this.addChild(this._imgDay),this._imgGet=new CustomImage,this._imgGet.source=RES.getRes("share_json.share_geted"),this.addChild(this._imgGet),this._imgGet.x=10,this._imgGet.y=57,this._imgGet.visible=!1}__extends(t,e);var i=__define,n=t,s=n.prototype;return i(s,"day",function(){return this._day}),s.setGeted=function(){this._imgGet.visible=!0},s.setSelected=function(e){this._selected!=e&&(this._selected=e,e?this._img.load(rURL("resource/assets/icon/hefu/HFDl/loginAward_z2.png")):this._img.load(rURL("resource/assets/icon/hefu/HFDl/loginAward_z1.png")))},s.dispose=function(){this.parent&&this.parent.removeChild(this),this._img&&(this._img.dispose(),this._img=null),this._imgDay&&(this._imgDay.dispose(),this._imgDay=null),this._imgGet&&(this._imgGet.parent&&this._imgGet.parent.removeChild(this._imgGet),this._imgGet.dispose(),this._imgGet=null)},t}(Csprite);egret.registerClass(HFDlItem,"HFDlItem");var HFDlView=function(e){function t(){e.call(this),this._itemAwardArr=[],this._itemArr=[],this.name="HFDlView"+t.K++,this._model=HeFuModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/hefu/HFDlViewSkin.exml",this.touchEnabled=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._bg=new PicLoader,this.addChildAt(this._bg,0),this._bg.touchEnabled=!1,this._bg.x=0,this._bg.y=-246,this._bg.load(rURL("resource/assets/icon/hefu/HFDl/loginAward_bg.png"));for(var e,t=0;4>t;t++)e=new HFDlItem(t+1),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClick,this),e.x=151*t,this._itemContainer.addChild(e),this._itemArr.push(e),e.visible=!1;for(t=0;4>t;t++)e=new HFDlItem(t+5),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClick,this),e.x=151*t,e.y=145,this._itemContainer.addChild(e),this._itemArr.push(e),e.visible=!1;var i=this._model.getHFdlConfig(),n=i.length;for(t=0;n>t;t++)this._itemArr[t].visible=!0;this.setSelected(this._itemArr[0])},n.onAdd=function(){e.prototype.onAdd.call(this),this._btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().addEventListener(HeFuEvtName.UPDATE_HF_LOGIN_INFO,this.updateActivityInfo,this),this.updateActivityInfo()},n.onRemove=function(){e.prototype.onRemove.call(this),this._btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().removeEventListener(HeFuEvtName.UPDATE_HF_LOGIN_INFO,this.updateActivityInfo,this)},n.setVO=function(e){this._vo=e},n.itemClick=function(e){var t=e.currentTarget;this.setSelected(t)},n.setSelected=function(e){this._selectedItem=e;var t;for(var i in this._itemArr)t=this._itemArr[i],t.setSelected(!1);this._selectedItem.setSelected(!0),this.updateInfo()},n.updateInfo=function(){this.clearAwardItems();for(var e,t,i=this._model.getHFdlVO(this._selectedItem.day),n=i.goodsList.length,s=0;n>s;s++)e=new GoodsItem,e.x=109*s,this._itemAwardArr.push(e),this._itemAwardContainer.addChild(e),t=i.goodsList[s],e.data=GoodsListProxy.getInstance().getGoodsInfoByType(t.asset_id),e.num=t.value},n.updateActivityInfo=function(){var e=this._model.loginAwardId,t=this._model.loginAwardedId,i=this._model.getHFdlVO(t+1);e>t&&i?(this._btnGet.showRedDot=!0,this._btnGet.enabled=!0):(this._btnGet.showRedDot=!1,this._btnGet.enabled=!1);for(var n,s=this._itemArr.length,a=0;s>a;a++)n=this._itemArr[a],t>=n.day&&n.setGeted()},n.onOkHandler=function(){var e=this._model.loginAwardId,t=this._model.loginAwardedId;e>t?(this.flyGoods(),this.dispatchGlobalEvent(new ParamEvent(HeFuEvtName.CCMD18501))):Message.show("没有奖励可以领取")},n.flyGoods=function(){for(var e=[],t=HeFuModel.getInstance().getHFdlVO(this._selectedItem.day),i=t.goodsList.length,n=0;i>n;n++){var s=t.goodsList[n].asset_id,a=GoodsListProxy.getInstance().getBasicGood(s);if(null!=a){var o=a.pic;e.push(o)}}AccessGoodFlyEffectManager.getInstance().flyArray(e)},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.dispose(),e=null;this._itemArr=[]},n.clearAwardItems=function(){for(var e,t=this._itemAwardArr.length,i=0;t>i;i++)e=this._itemAwardArr[i],e.parent&&e.parent.removeChild(e),e.data=null,e.dispose(),e=null;this._itemAwardArr=[]},n.dispose=function(){e.prototype.dispose.call(this),this.clearItems(),this.clearAwardItems()},t.K=0,t}(BaseView);egret.registerClass(HFDlView,"HFDlView");var HFExchangeItem=function(e){function t(t){e.call(this),this._avo=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/hefu/HFExchangeItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this)},s.onClickBtn=function(){this.dispatchGlobalEvent(new ParamEvent(HeFuEvtName.CCMD19001,{id:this._vo.template_id}))},s.setData=function(e){this._vo=e;var t=GoodsListProxy.getInstance().getGoodsInfoByType(this._vo.goodsList[0].asset_id),i=GoodsListProxy.getInstance().getGoodsInfoByType(this._vo.need);i.num=this._vo.need_num,this._item.data=t,this._item.num=this._vo.goodsList[0].value;var n="#00d228",s=GoodsListProxy.getInstance().findGoodNumber(i.template_id);s<this._vo.need_num&&(n="#ff0000"),this._txtCount.htmlText="兑换消耗：<font color='"+n+"'>"+i.name+"X"+this._vo.need_num+"</font>",this.updateInfo(),this.updateDailyTimes()},i(s,"vo",function(){return this._vo}),s.updateInfo=function(){var e=HeFuModel.getInstance().getHFExchangeData(this._vo.template_id),t=0;e&&(t=e.num),this._txtAllTimes.text="全服仅剩："+(this._vo.limit_all-t),this._btnOK.enabled=HeFuModel.getInstance().checkExchangeOne(this._vo.template_id)},s.updateDailyTimes=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_44,this._vo.template_id);this._vo.limit_day-e;this._txtTimes.htmlText="今日可兑换：<font color='#00d228'>"+e+"/"+this._vo.limit_day+"</font>",this._btnOK.enabled=HeFuModel.getInstance().checkExchangeOne(this._vo.template_id)},s.dispose=function(){e.prototype.dispose.call(this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this.parent&&this.parent.removeChild(this)},t}(Csprite);egret.registerClass(HFExchangeItem,"HFExchangeItem");var HFExchangeView=function(e){function t(){e.call(this),this._itemArr=[],this._resTime=0,this.name="HFExchangeView"+t.K++,this._model=HeFuModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/hefu/HFExchangeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._bg=new PicLoader,this._bg.load(rURL("resource/assets/icon/hefu/HFexchange/bg.png")),this.addChildAt(this._bg,0);for(var e,t=this._model.getHFexchangeConfig(),i=t.length,n=0;i>n;n++)e=new HFExchangeItem(null),e.y=160*n,e.setData(t[n]),this._itemArr.push(e),this._itemContainer.addChild(e);this._btnOK.visible=!1,this._txtTime.visible=!1},n.onAdd=function(){e.prototype.onAdd.call(this),GameDispatcher.getInstance().addEventListener(DailyEvtName.DAILY_UPDATE,this.updateTimes,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),GameDispatcher.getInstance().addEventListener(HeFuEvtName.UPDATE_HF_EXCHANGE_INFO,this.updateServerData,this);var t=this._vo.endDate,i=new Date(1e3*RoleModel.getInstance().serverTime),n=(t.getTime()-i.getTime())/1e3;this._resTime=Math.ceil(n),this._resTime>0&&(TimerManager.getInstance().add(1e3,this.onTimer,this),this.onTimer()),this.updateNum()},n.onRemove=function(){e.prototype.onRemove.call(this),GameDispatcher.getInstance().removeEventListener(DailyEvtName.DAILY_UPDATE,this.updateTimes,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),GameDispatcher.getInstance().removeEventListener(HeFuEvtName.UPDATE_HF_EXCHANGE_INFO,this.updateServerData,this),TimerManager.getInstance().remove(1e3,this.onTimer,this)},n.setVO=function(e){this._vo=e},n.onTimer=function(){this._resTime--,this._resTime>0?this._txtTime.text=TimeUtil.getTime5(this._resTime):(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text="活动已结束")},n.updateServerData=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.updateInfo()},n.updateTimes=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.updateDailyTimes()},n.updateNum=function(){var e=this._model.getHFexchangeConfig(),t=e[0],i=GoodsListProxy.getInstance().getGoodsInfoByType(t.need),n=GoodsListProxy.getInstance().findGoodNumber(t.need);this._txtCount.htmlText="当前拥有：<font color='#00d228'>"+i.name+"X"+n+"</font>"},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),this._bg&&(this._bg.dispose(),this._bg=null);for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],t.dispose(),t=null;this._itemArr=[]},t.K=0,t}(BaseView);egret.registerClass(HFExchangeView,"HFExchangeView");var HFPaiMingView=function(e){function t(){e.call(this),this._leftTime=0,this._model=HeFuModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/hefu/HFPaiMingViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._bigBg=new PicLoader;var e=UrlUtil.getHFPic("HF_daBiaoBg","png");this._bigBg.load(e),this.addChildAt(this._bigBg,0),this._pic=new PicLoader,this._imageContainer.addChildAt(this._pic,0),this._secondItem=new HFRankMingCiItem,this._secondItem.x=14,this._secondItem.y=460,this.addChild(this._secondItem),this._thirdItem=new HFRankMingCiItem,this._thirdItem.x=294,this._thirdItem.y=this._secondItem.y,this.addChild(this._thirdItem)},n.onClickBtn=function(e){this.dispatchGlobalEvent(new ParamEvent(HeFuEvtName.SHOW_HF_RANKVIEW))},n.setVO=function(e){var t=this;t._rankClientVo=e;var i=t._rankClientVo.activityList[0];t._rankVo=t._model.getHFrankVO(i);var n=UrlUtil.getHFPic(e.show_icon+"_"+e.show_title);t._pic.load(n),t.setTimer(),t.requestRankData(),t.createRewardIcon(),null==t._rewardPic&&(t._rewardPic=new PicLoader,n=UrlUtil.getHFPic("HFRankReward_"+t._rankClientVo.template_id,"png"),t._rewardPic.load(n),t._rewardPic.x=15,t._rewardPic.y=160,t.addChild(t._rewardPic))},n.createRewardIcon=function(){if(null==this._goodsCach){this._goodsCach=new Array;for(var e=this._rankVo.goodsList,t=0;t<e.length;t++){var i=e[t],n=GoodsListProxy.getInstance().getGoodsInfoByType(i.asset_id);n.num=i.value;var s=new GoodsItem;s.data=n,s.x=33+114*t,s.y=330,this.addChild(s),this._goodsCach.push(s)}}},n.onAdd=function(){e.prototype.onAdd.call(this),this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateRankInfo,this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13501_UPDATE,this.updateFigureData,this)},n.onRemove=function(){e.prototype.onRemove.call(this),this._btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this.removeTimer(),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateRankInfo,this),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13501_UPDATE,this.updateFigureData,this)},n.removeTimer=function(){TimerManager.getInstance().remove(1e3,this.addDJS,this)},n.requestRankData=function(){this.dispatchGlobalEvent(new ParamEvent(RankEvtName.RANK_CCMD13500,this._rankVo.type))},n.setTimer=function(){var e=(this._rankClientVo.endDate.getTime()-(new Date).getTime())/1e3;e=Math.ceil(e),this.removeTimer(),e>0?(this._leftTime=e,TimerManager.getInstance().remove(1e3,this.addDJS,this),TimerManager.getInstance().add(1e3,this.addDJS,this),this.addDJS(),this._imageContainer.contains(this._txtTime)||this._imageContainer.addChild(this._txtTime)):this._imageContainer.contains(this._txtTime)&&this._imageContainer.removeChild(this._txtTime)},n.addDJS=function(){return this._leftTime<=0?(TimerManager.getInstance().remove(1e3,this.addDJS,this),void(this._leftTime=0)):(this._leftTime--,void(this._txtTime.text=TimeUtil.getTime2(this._leftTime)))},n.updateRankInfo=function(e){for(var t,i,n,s,a,o=e.data,r=o.rank_list,h=0;h<r.length;h++)t=r[h],1==t.rank?n=t:2==t.rank?s=t:3==t.rank?a=t:4==t.rank&&(i=t);null==i&&(i=new NodeRank_list,i.rank=4),null==s&&(s=new NodeRank_list,s.rank=2,s.name="虚位以待",s.round=0,s.level=0,s.value=-1),null==a&&(a=new NodeRank_list,a.rank=3,a.name="虚位以待",a.round=0,a.level=0,a.value=-1),null==n&&(n=new NodeRank_list,n.rank=1,n.name="虚位以待",n.round=0,n.level=0,n.value=-1),this.setFirstData(n),this._secondItem.setData(this._rankVo.type,s),this._thirdItem.setData(this._rankVo.type,a)},n.setFirstData=function(e){var t=this;if(t._txtPlayerName.text=e.name,e.value>0){if(t._txtLv.text=HuoDongDailyModel.getInstance().getHDRankStr(e,this._rankVo.type),e.role_id==RoleModel.getInstance().getRoleCommon().role_id){var i=RoleModel.getInstance().getRoleCommon().icon;t.setFirstImage(i)}else t.dispatchGlobalEvent(new ParamEvent(RankEvtName.RANK_CCMD13501,{id:e.role_id}));t._firstRound.visible=!0}else t._txtLv.text="",t._firstImage&&t.contains(t._firstImage)&&t.removeChild(t._firstImage),t._firstRound.visible=!1},n.setFirstImage=function(e){var t=this;null==t._firstImage&&(t._firstImage=new PicLoader,t._firstImage.x=384,t._firstImage.y=252);var i=UrlUtil.getHeadURL(1,e);t._firstImage.load(i),t.addChild(t._firstImage)},n.updateFigureData=function(e){var t=e.data;this.setFirstImage(t.icon)},n.dispose=function(){var t=this;e.prototype.dispose.call(this),t.onRemove(),t.parent&&t.parent.removeChild(t),t._bigBg&&(t._bigBg.dispose(),t._bigBg=null),t._pic&&(t._pic.dispose(),t._pic=null),t._firstImage&&(t._firstImage.dispose(),t._firstImage=null),t._rewardPic&&(t._rewardPic.dispose(),t._rewardPic=null),t._secondItem&&(t._secondItem.dispose(),t._secondItem=null),t._thirdItem&&(t._thirdItem.dispose(),t._thirdItem=null);for(var i=t._goodsCach,n=0;n<i.length;n++){var s=i[n];s.dispose(),s=null}},t}(BaseView);egret.registerClass(HFPaiMingView,"HFPaiMingView");var HFRandkItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/hefu/HFRandkItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)},n.setData=function(e,t){var i=this;null==i._goodsCach&&(i._goodsCach=new Array),i.clearGoods();for(var n,s,a=HeFuModel.getInstance().getRankVoByRank(t,e.rank),o=a.goodsList,r=0;r<o.length;r++)n=i._goodsCach[r],null==n&&(n=new GoodsItem,i._goodsCach.push(n)),s=GoodsListProxy.getInstance().getGoodsInfoByType(o[r].asset_id),s.num=o[r].value,n.data=s,n.x=100*r+110,n.y=18,i.addChild(n);i._txtRank.text=StringUtil.substitute("名次\n{0}",e.rank),i._txtName.text=e.name,i._txtLv.text=HuoDongDailyModel.getInstance().getHDRankStr(e,t),i=null},n.clearGoods=function(){for(var e,t=0;t<this._goodsCach.length;t++)e=this._goodsCach[t],this.contains(e)&&this.removeChild(e)},n.dispose=function(){e.prototype.dispose.call(this);for(var t,i=0;i<this._goodsCach.length;i++)t=this._goodsCach[i],this.contains(t)&&this.removeChild(t),t.dispose(),t=null;this._goodsCach=null},t}(BaseView);egret.registerClass(HFRandkItem,"HFRandkItem");var HFRandkView=function(e){function t(){e.call(this),this._model=HeFuModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/hefu/HFRandkViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._itemCach=new Array,this._btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickClose,this)},n.setData=function(e){this._vo=e},n.onAdd=function(){e.prototype.onAdd.call(this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateRankInfo,this),this.dispatchGlobalEvent(new ParamEvent(RankEvtName.RANK_CCMD13500,this._vo.type))},n.onRemove=function(){e.prototype.onRemove.call(this),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateRankInfo,this)},n.onClickClose=function(e){this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REMOVE_KFHD_RANKVIEW))},n.updateRankInfo=function(e){for(var t,i,n=e.data,s=n.rank_list,a=0;a<s.length&&20>a;a++)i=this._itemCach[a],null==i&&(i=new HFRandkItem,this._itemCach.push(i)),t=s[a],i.setData(t,this._vo.type),i.x=0,i.y=151*a,this._container.addChild(i);0==n.self_rank?this._txtDes.text=StringUtil.substitute("我的{0}:{1}",this._vo.name,"20名以外"):this._txtDes.text=StringUtil.substitute("我的{0}:{1}",this._vo.name,n.self_rank)},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.onRemove();for(var i,n=0;n<this._itemCach.length;n++)i=this._itemCach[n],i.parent&&i.parent.removeChild(i),i.dispose(),i=null;this._itemCach=null},t}(BaseView);egret.registerClass(HFRandkView,"HFRandkView");var HFRankMingCiItem=function(e){function t(){e.call(this),this._model=HeFuModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/hefu/HFRankMingCiItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)},n.setData=function(e,t){var i=this,n=i._model.getRankVoByRank(e,t.rank);if(null==i._itemCach){i._itemCach=new Array;for(var s,a,o=0;o<n.goodsList.length;o++)s=GoodsListProxy.getInstance().getGoodsInfoByType(n.goodsList[o].asset_id),s.num=n.goodsList[o].value,a=i._itemCach[o],null==a&&(a=new GoodsItem,i._itemCach.push(a)),a.data=s,a.x=160,a.y=13,this.addChild(a)}t.rank<4?(t.value>0?i._txtLv.text=HuoDongDailyModel.getInstance().getHDRankStr(t,e):i._txtLv.text="",i._txtMingCi.text=StringUtil.substitute("第{0}名",t.rank),i._txtName.text=t.name):(i._txtLv.text="",i._txtName.text=StringUtil.substitute("第{0}到{1}名",n.min,n.max),i._txtMingCi.text=""),i=null},n.dispose=function(){e.prototype.dispose.call(this);for(var t=this._itemCach,i=0;i<t.length;i++){var n=t[i];n&&n.dispose()}},t}(BaseView);egret.registerClass(HFRankMingCiItem,"HFRankMingCiItem");var HFSiegeItem=function(e){function t(t){e.call(this),this._itemArr=[],this._avo=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/hefu/HFSiegeItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this)},s.onClickBtn=function(){this._vo.template_id==SingleModel.KEY_18701?this.dispatchGlobalEvent(new ParamEvent(HeFuEvtName.CCMD18700)):this._vo.template_id==SingleModel.KEY_18702?this.dispatchGlobalEvent(new ParamEvent(HeFuEvtName.CCMD18701)):this._vo.template_id==SingleModel.KEY_18703&&this.dispatchGlobalEvent(new ParamEvent(HeFuEvtName.CCMD18702))},s.setData=function(e){this._vo=e;for(var t,i,n=this._vo.goodsList,s=n.length,a=0;s>a;a++)i=n[a],t=new GoodsItemSmall,t.showLv(!1),t.x=a*(t.width+3),t.data=GoodsListProxy.getInstance().getGoodsInfoByType(i.asset_id),t.num=i.value,this._itemArr.push(t),this._itemContainer.addChild(t);this._txtDesc.text=this._vo.desc},i(s,"vo",function(){return this._vo}),s.updateInfo=function(){},s.dispose=function(){e.prototype.dispose.call(this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this.parent&&this.parent.removeChild(this);for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],t.parent&&t.parent.removeChild(t),t.data=null,t.dispose(),t=null;this._itemArr=[]},t}(Csprite);egret.registerClass(HFSiegeItem,"HFSiegeItem");var HFSiegeView=function(e){function t(){e.call(this),this._itemArr=[],this.name="HFSiegeView"+t.K++,this._model=HeFuModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/hefu/HFSiegeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._bg=new PicLoader,this._bg.load(rURL("resource/assets/icon/hefu/HFsiege/bg.png")),this.addChildAt(this._bg,0);for(var e,t=this._model.getHFsiegeCOnfig(),i=t.length,n=0;i>n;n++)e=new HFSiegeItem(null),e.y=160*n,e.setData(t[n]),this._itemArr.push(e),this._itemContainer.addChild(e)},n.onAdd=function(){e.prototype.onAdd.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this)},n.onRemove=function(){e.prototype.onRemove.call(this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this)},n.setVO=function(e){this._vo=e},n.onOkHandler=function(){return RoleModel.getInstance().getRoleCommon().guild_id<=0?void Message.show("请先加入公会"):void this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.SHOW_CITYWAR_VIEW))},n.dispose=function(){e.prototype.dispose.call(this),this._bg&&(this._bg.dispose(),this._bg=null);for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],t.dispose(),t=null;this._itemArr=[]},t.K=0,t}(BaseView);egret.registerClass(HFSiegeView,"HFSiegeView");var HFSpeedView=function(e){function t(){e.call(this),this.name="HFSpeedView"+t.K++,this._model=HeFuModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/hefu/HFSpeedViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._bg=new PicLoader,this._bg.load(rURL("resource/assets/icon/hefu/HFSpeed/bg.png")),this.addChildAt(this._bg,0)},n.onAdd=function(){e.prototype.onAdd.call(this)},n.onRemove=function(){e.prototype.onRemove.call(this)},n.setVO=function(e){this._vo=e},n.dispose=function(){e.prototype.dispose.call(this),this._bg&&(this._bg.dispose(),this._bg=null)},t.K=0,t}(BaseView);egret.registerClass(HFSpeedView,"HFSpeedView");var HFTitleItem=function(e){function t(t){e.call(this),this._day=0,this._day=t,this._img=new PicLoader,this._img.load(UrlUtil.getHFTITLEIcon("title_"+this._day)),this.addChild(this._img)}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this._img&&(this._img.dispose(),this._img=null)},i(s,"width",function(){return 470}),t}(Csprite);egret.registerClass(HFTitleItem,"HFTitleItem");var HFTitleView=function(e){function t(){e.call(this),this._itemArr=[],this.name="HFTitleView"+t.K++,this._model=HeFuModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/hefu/HFTitleViewSkin.exml"}__extends(t,e);
var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._bg=new PicLoader,this._bg.load(UrlUtil.getHFTITLEIcon("HFTitle_bg")),this.addChildAt(this._bg,0),this._txtDays=new PicLoader,this._txtDays.load(UrlUtil.getHFTITLEIcon("day_1")),this.addChild(this._txtDays),this._txtDays.x=177,this._txtDays.y=497,this._lrContainer=new CustomRLContainer(0,522,-52),this._lrContainer.x=47,this._lrContainer.y=6,this._lrContainer.setBtnY(-2),this._itemContainer.addChild(this._lrContainer);var e=this._model.getHFTitleVO(1),t=FashionModel.getInstance().getFashionConfigVO(e.show),i=GoodsListProxy.getInstance().getGoodsInfoByType(e.goodsList[0].asset_id);i.num=e.goodsList[0].value,this._item.data=GoodsListProxy.getInstance().getGoodsInfoByType(e.goodsList[0].asset_id),this._txtFpower.text=PropertyUtil.calculateProFight(t)+"";for(var n,s=0;8>s;s++)n=new HFTitleItem(s+1),this._itemArr.push(n);this._lrContainer.setItemList(this._itemArr,1);var a=RoleModel.getInstance().getPartnerList()[0];this._figure||(this._figure=new BigFigure,this._figure.setTounchEnable(!1),this._bodyContainer.addChild(this._figure)),this._figure.changeBody(a.getCareer(),a.getSex(),t.template_id),this._figure.changeWeapon(a.getCareer(),a.getSex(),a.getWeapon()),this._figure.changeWing(a.getWingID())},n.onAdd=function(){e.prototype.onAdd.call(this),this._lrContainer.addEventListener(CustomRLContainer.PAGE_CHANGE,this.pageChange,this)},n.onRemove=function(){e.prototype.onRemove.call(this),this._lrContainer.addEventListener(CustomRLContainer.PAGE_CHANGE,this.pageChange,this)},n.pageChange=function(){var e=this._lrContainer.getCurrentIndex()+1;this._txtDays.load(UrlUtil.getHFTITLEIcon("day_"+e))},n.dispose=function(){e.prototype.dispose.call(this),this._figure&&(this._figure.parent.removeChild(this._figure),this._figure.dispose(),this._figure=null),this._bg&&(this._bg.dispose(),this._bg=null),this._txtDays&&(this._txtDays.dispose(),this._txtDays=null);for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],t.dispose(),t=null;this._itemArr=[]},t.K=1,t}(BaseView);egret.registerClass(HFTitleView,"HFTitleView");var HFTreasureView=function(e){function t(){e.call(this),this._itemArr2=[],this.name="HFTreasureView"+t.K++,this._model=HeFuModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/hefu/HFTreasureViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._imgGold1.source=UrlUtil.getSmallPic(2),this._imgGold2.source=UrlUtil.getSmallPic(2)},n.setVO=function(e){this._vo=e},n.onAdd=function(){e.prototype.onAdd.call(this),GameDispatcher.getInstance().addEventListener(DailyEvtName.DAILY_UPDATE,this.updateTimes,this),GameDispatcher.getInstance().addEventListener(HeFuEvtName.UPDATE_HF_TREASURE_INFO,this.flyGoods,this),this._btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnGet10.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOk10Handler,this);var t=this._model.getHFtreasureVO(this._model.hefuDay);if(null!=t){this._tvo=t;for(var i,n,s,a=t.showList,o=0;7>o;o++)n=this["_item"+o],i=a[o],i&&(s=GoodsListProxy.getInstance().getGoodsInfoByType(i.asset_id),n.data=s,n.num=i.value),1==o&&(null==this._effect&&(this._effect=new UIEffect),this._effect.showEffect(UrlUtil.getCommonEffectURL("color_6"),-270,-390,n,80,!0));for(this._txtCon1.text=t.con_gold1+"",this._txtCon2.text=t.con_gold2+"",o=0;o<t.timesRewardList.length;o++)n=new GoodsItem,n.name=o+"",n.x=o*(n.width+15),n.data=GoodsListProxy.getInstance().getGoodsInfoByType(t.timesRewardList[o].asset_id),n.showLv(!0),n.showName(t.timesRewardList[o].value+"次"),n.addCallBack(this.callBackF,n,this),this._itemContainer2.addChild(n),this._itemArr2.push(n);this.updateTimes()}},n.onRemove=function(){e.prototype.onRemove.call(this),GameDispatcher.getInstance().removeEventListener(HeFuEvtName.UPDATE_HF_TREASURE_INFO,this.flyGoods,this),GameDispatcher.getInstance().removeEventListener(DailyEvtName.DAILY_UPDATE,this.updateTimes,this),this._btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnGet10.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOk10Handler,this),this._effect&&(this._effect.dispose(),this._effect=null);for(var t,i=0;i<this._itemArr2.length;i++)t=this._itemArr2[i],t.parent&&t.parent.removeChild(t),t.data=null,t.dispose(),t=null;this._itemArr2=[]},n.callBackF=function(e,t){t.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.SHOW_KFHD_TREASURE_AWARD_VIEW,{node:t._vo.showTimesList[Number(e.name)]}))},n.onOkHandler=function(){var e=new ParamEvent(HeFuEvtName.CCMD18900,{type:1});this.dispatchGlobalEvent(e)},n.onOk10Handler=function(){var e=new ParamEvent(HeFuEvtName.CCMD18900,{type:2});this.dispatchGlobalEvent(e)},n.updateTimes=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_41,0);this._txtCount.htmlText="每日寻宝达到指定次数<font color='#00ff0c'>（"+e+"）</font>可领取奖励"},n.flyGoods=function(e){for(var t,i=e.data.arr,n=this.localToGlobal(227,8),s=[],a=0;a<i.length;a++){t=i[a];for(var o=0;o<t.value;o++)s.push(GoodsListProxy.getInstance().getGoodsInfoByType(t.asset_id).pic)}AccessGoodFlyEffectManager.getInstance().flyArray(s,n)},n.dispose=function(){e.prototype.dispose.call(this);for(var t,i=0;7>i;i++)t=this["_item"+i],t&&(t.parent&&t.parent.removeChild(t),t.data=null,t.dispose(),t=null)},t.K=1,t}(BaseView);egret.registerClass(HFTreasureView,"HFTreasureView");var HFXgItem=function(e){function t(t){e.call(this),this._ind=0,this._ind=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/hefu/HFXgItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this._img=new PicLoader,this.addChild(this._img),this._img.x=14,this._img.y=29,this._imgName=new PicLoader,this._imgName.x=20,this._imgName.y=10,this.addChild(this._imgName)},s.setData=function(e){this._vo=e,this._img.load(UrlUtil.getHFXGIcon("gift_"+this.vo.template_id)),this._imgName.load(UrlUtil.getHFXGIcon("name_"+this.vo.template_id))},i(s,"vo",function(){return this._vo}),s.setSelected=function(e){},s.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this._img&&(this._img.dispose(),this._img=null),this._imgName&&(this._imgName.dispose(),this._imgName=null)},t}(Csprite);egret.registerClass(HFXgItem,"HFXgItem");var HFXgView=function(e){function t(){e.call(this),this._itemAwardArr=[],this._itemArr=[],this._resTime=0,this.name="HFXgView"+t.K++,this._model=HeFuModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/hefu/HFXgViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._imgGiftName=new PicLoader,this.addChild(this._imgGiftName),this._imgGiftName.touchEnabled=!1,this._imgGiftName.x=27,this._imgGiftName.y=162,this._imgGift=new PicLoader,this.addChild(this._imgGift),this._imgGift.touchEnabled=!1,this._imgGift.x=50,this._imgGift.y=258;for(var e,t=this._model.getHFgiftConfig(),i=t.length,n=0;i>n;n++)e=new HFXgItem(n+1),e.x=137*n,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClick,this),this._itemContainer.addChild(e),this._itemArr.push(e),e.setData(t[n]);this.setSelected(this._itemArr[0]),this._txtTime.visible=!1},n.onAdd=function(){e.prototype.onAdd.call(this),this._btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().addEventListener(HeFuEvtName.UPDATE_HF_XG_INFO,this.updateXgHandler,this);var t=this._vo.endDate,i=new Date(1e3*RoleModel.getInstance().serverTime),n=(t.getTime()-i.getTime())/1e3;this._resTime=Math.ceil(n),this._resTime>0&&(TimerManager.getInstance().add(1e3,this.onTimer,this),this.onTimer())},n.onRemove=function(){e.prototype.onRemove.call(this),this._btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().removeEventListener(HeFuEvtName.UPDATE_HF_XG_INFO,this.updateXgHandler,this),TimerManager.getInstance().remove(1e3,this.onTimer,this)},n.onTimer=function(){this._resTime--,this._resTime>0?this._txtTime.text=TimeUtil.getTime5(this._resTime):(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text="活动已结束")},n.setVO=function(e){this._vo=e},n.itemClick=function(e){var t=e.currentTarget;this.setSelected(t)},n.setSelected=function(e){this._selectedItem=e,this._imgSelected.x=this._itemContainer.x+this._selectedItem.x,this._imgSelected.y=this._itemContainer.y+this._selectedItem.y,this.updateInfo()},n.updateInfo=function(){var e=this._selectedItem.vo;this._imgGiftName.load(UrlUtil.getHFXGIcon("name2_"+e.template_id)),this._imgGift.load(UrlUtil.getHFXGIcon("giftBig_"+e.template_id)),this._txtGold.text=e.con_gold+"",this._txtVip.text="VIP"+e.req_vip+"可购买",e.req_vip<=0?this._txtVip.visible=!1:this._txtVip.visible=!0,this.clearAwardItems();for(var t,i,n=e.goodsList.length,s=0;n>s;s++)t=new GoodsItemSmall,t.x=s%2*(t.width+25),t.y=Math.floor(s/2)*(t.height+35),this._itemAwardArr.push(t),this._itemAwardContainer.addChild(t),i=e.goodsList[s],t.data=GoodsListProxy.getInstance().getGoodsInfoByType(i.asset_id),t.num=i.value;this.updateXgHandler()},n.updateXgHandler=function(){var e=this._selectedItem.vo;this._imgSoldOut.visible=!1,this._btnBuy.visible=!0;var t=this._model.getHFXgData(e.template_id);if(null!=t){RoleModel.getInstance().getRoleInfo().getGold();t.num>=Number(e.limit)&&(this._imgSoldOut.visible=!0,this._btnBuy.visible=!1)}},n.clearAwardItems=function(){for(var e,t=this._itemAwardArr.length,i=0;t>i;i++)e=this._itemAwardArr[i],e.parent&&e.parent.removeChild(e),e.data=null,e.dispose(),e=null;this._itemAwardArr=[]},n.clearItems=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClick,this),e.dispose(),e=null;this._itemArr=[]},n.onOkHandler=function(){var e=RoleModel.getInstance().getRoleInfo().getGold();return e<this._selectedItem.vo.con_gold?void this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN)):void this.dispatchGlobalEvent(new ParamEvent(HeFuEvtName.CCMD18801,{giftId:this._selectedItem.vo.template_id}))},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),this._bg&&(this._bg.dispose(),this._bg=null),this._imgGiftName&&(this._imgGiftName.dispose(),this._imgGiftName=null),this._imgGift&&(this._imgGift.dispose(),this._imgGift=null),this.clearAwardItems(),this.clearItems()},t.K=0,t}(BaseView);egret.registerClass(HFXgView,"HFXgView");var HeFuWindow=function(e){function t(){e.call(this),this._btnCach=new Array,this._model=HeFuModel.getInstance(),this.skinName="resource/game_skins/hefu/HeFuWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_hefu"),this.createIcons(),this.windowBgBottom=-20,this.onBtnReturnSetIndex()},n.createIcons=function(){var e,t,i,n=this._model.getHefuIconList(),s='<e:Skin class="skins.ButtonSkin" states="up,down" xmlns:e="http://ns.egret.com/eui">\n                <e:Image width="100%" height="100%"\n                         source="{0}"\n                         source.down="{0}"/>\n            </e:Skin>';this._btnCach=new Array;for(var a=0,o=0;o<n.length;o++)t=n[o],e=new CustomButton,e.data=t,i=UrlUtil.getHeFuIcon(t.show_icon),e.skinName=StringUtil.substitute(s,i),e.x=115*a+20,e.y=15,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this),a++,this._btnCach.push(e),this._iconContainer.addChild(e);this._iconContainer.addChild(this._selectImage),this._vo=n[0],this._selectImage.x=this._btnCach[0].x-1,this._selectImage.y=this._btnCach[0].y-1,this.updateView()},n.clickIcon=function(e){var t=e.currentTarget;this._selectImage.x=t.x-1,this._selectImage.y=t.y-1,this._vo=t.data,this.updateView()},n.updateLoginAwardHandler=function(){this.updateRedDot()},n.updateBossPointHandler=function(){this.updateRedDot()},n.updateLcHandler=function(){this.updateRedDot()},n.updateXgHandler=function(){this.updateRedDot()},n.updateExchangeHandler=function(){this.updateRedDot()},n.updateChargehandler=function(){this.updateRedDot()},n.updateSiegeRedDotHandler=function(){this.updateRedDot()},n.updateRedDot=function(){if(null!=this._btnCach)for(var e,t,i=0;i<this._btnCach.length;i++)e=this._btnCach[i],t=e.data,t.type==HeFuModel.HFdl?e.showRedDot=this._model.checkLoginAwardCanGet():t.type==HeFuModel.HFboss?e.showRedDot=this._model.checkBossPointAwardCanGet():t.type==HeFuModel.HFgift?e.showRedDot=this._model.checkLimitGiftCanBuy():t.type==HeFuModel.HFexchange?e.showRedDot=this._model.checkExchange():t.type==HeFuModel.HFcharge?e.showRedDot=this._model.checkHFChargeCanGetAward():t.type==HeFuModel.HFsiege&&(e.showRedDot=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2023))},n.updateView=function(){switch(this._currentView&&this._viewContainer.contains(this._currentView)&&(this._currentView.onRemove(),this._viewContainer.removeChild(this._currentView)),this.removeRankView(),this._vo.type){case HeFuModel.HFboss:null==this._hfBossPointView&&(this._hfBossPointView=new HFBossPointView,this._hfBossPointView.setVO(this._vo)),this.dispatchGlobalEvent(new ParamEvent(HeFuEvtName.CCMD18600)),this._currentView=this._hfBossPointView;break;case HeFuModel.HFspeed:null==this._speedView&&(this._speedView=new HFSpeedView,this._speedView.setVO(this._vo)),this._currentView=this._speedView;break;case HeFuModel.HFexchange:null==this._exchangeView&&(this._exchangeView=new HFExchangeView,this._exchangeView.setVO(this._vo)),this.dispatchGlobalEvent(new ParamEvent(HeFuEvtName.CCMD19000)),this._currentView=this._exchangeView;break;case HeFuModel.HFsiege:null==this._siegeView&&(this._siegeView=new HFSiegeView,this._siegeView.setVO(this._vo)),this._currentView=this._siegeView;break;case HeFuModel.HFcharge:null==this._chargeView&&(this._chargeView=new HFChargeView,this._chargeView.setVO(this._vo)),this.dispatchGlobalEvent(new ParamEvent(HeFuEvtName.CCMD19100)),this._currentView=this._chargeView;break;case HeFuModel.HFdl:null==this._dlView&&(this._dlView=new HFDlView,this._dlView.setVO(this._vo)),this.dispatchGlobalEvent(new ParamEvent(HeFuEvtName.CCMD18500)),this._currentView=this._dlView;break;case HeFuModel.HFtreasure:null==this._treasureView&&(this._treasureView=new HFTreasureView,this._treasureView.setVO(this._vo)),this._currentView=this._treasureView;break;case HeFuModel.HFgift:null==this._xgView&&(this._xgView=new HFXgView,this._xgView.setVO(this._vo)),this.dispatchGlobalEvent(new ParamEvent(HeFuEvtName.CCMD18800)),this._currentView=this._xgView;break;case HeFuModel.HFrank:null==this._paiMingView&&(this._paiMingView=new HFPaiMingView),this._paiMingView.setVO(this._vo),this._currentView=this._paiMingView;break;case HeFuModel.HFTitle:null==this._hfTitleView&&(this._hfTitleView=new HFTitleView),this._currentView=this._hfTitleView}this._currentView&&(this._currentView.onAdd(),this._viewContainer.addChild(this._currentView))},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this.removeGlobalEventListener(HeFuEvtName.SHOW_HF_RANKVIEW,this.showRankView,this),this.removeGlobalEventListener(HeFuEvtName.UPDATE_HF_LOGIN_INFO,this.updateLoginAwardHandler,this),this.removeGlobalEventListener(HeFuEvtName.UPDATE_BOSSPOINT_INFO,this.updateBossPointHandler,this),this.removeGlobalEventListener(HeFuEvtName.UPDATE_HF_XG_INFO,this.updateXgHandler,this),this.removeGlobalEventListener(HeFuEvtName.UPDATE_HF_EXCHANGE_INFO,this.updateExchangeHandler,this),this.removeGlobalEventListener(HeFuEvtName.UPDATE_HF_CHARGE_INFO,this.updateChargehandler,this),this.removeGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2023,this.updateSiegeRedDotHandler,this)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.addGlobalEventListener(HeFuEvtName.SHOW_HF_RANKVIEW,this.showRankView,this),this.addGlobalEventListener(HeFuEvtName.UPDATE_HF_LOGIN_INFO,this.updateLoginAwardHandler,this),this.addGlobalEventListener(HeFuEvtName.UPDATE_BOSSPOINT_INFO,this.updateBossPointHandler,this),this.addGlobalEventListener(HeFuEvtName.UPDATE_HF_XG_INFO,this.updateXgHandler,this),this.addGlobalEventListener(HeFuEvtName.UPDATE_HF_EXCHANGE_INFO,this.updateExchangeHandler,this),this.addGlobalEventListener(HeFuEvtName.UPDATE_HF_CHARGE_INFO,this.updateChargehandler,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2023,this.updateSiegeRedDotHandler,this),this.updateRedDot()},n.showRankView=function(e){null==this._rankView&&(this._rankView=new HFRandkView),this._currentView&&this._viewContainer.contains(this._currentView)&&(this._currentView.onRemove(),this._viewContainer.removeChild(this._currentView));var t=this._model.getCurrentRankVo(),i=t.activityList[0],n=this._model.getHFrankVO(i);this._rankView.setData(n),this._rankView.onAdd(),this._viewContainer.addChild(this._rankView)},n.removeRankView=function(){this._rankView&&this._viewContainer.contains(this._rankView)&&(this._rankView.onRemove(),this._viewContainer.removeChild(this._rankView))},n.dispose=function(){e.prototype.dispose.call(this),this.onCloseHandler(),this._currentView&&(this._currentView.onRemove(),this._currentView.parent&&this._currentView.parent.removeChild(this._currentView),this._currentView=null),this._hfBossPointView&&(this._hfBossPointView.parent&&this._hfBossPointView.parent.removeChild(this._hfBossPointView),this._hfBossPointView.dispose(),this._hfBossPointView=null),this._speedView&&(this._speedView.parent&&this._speedView.parent.removeChild(this._speedView),this._speedView.dispose(),this._speedView=null),this._exchangeView&&(this._exchangeView.parent&&this._exchangeView.parent.removeChild(this._exchangeView),this._exchangeView.dispose(),this._exchangeView=null),this._siegeView&&(this._siegeView.parent&&this._siegeView.parent.removeChild(this._siegeView),this._siegeView.dispose(),this._siegeView=null),this._chargeView&&(this._chargeView.parent&&this._chargeView.parent.removeChild(this._chargeView),this._chargeView.dispose(),this._chargeView=null),this._dlView&&(this._dlView.parent&&this._dlView.parent.removeChild(this._dlView),this._dlView.dispose(),this._dlView=null),this._treasureView&&(this._treasureView.parent&&this._treasureView.parent.removeChild(this._treasureView),this._treasureView.dispose(),this._treasureView=null),this._xgView&&(this._xgView.parent&&this._xgView.parent.removeChild(this._xgView),this._xgView.dispose(),this._xgView=null),this._paiMingView&&(this._paiMingView.parent&&this._paiMingView.parent.removeChild(this._paiMingView),this._paiMingView.dispose(),this._paiMingView=null),this._rankView&&(this._rankView.parent&&this._rankView.parent.removeChild(this._rankView),this._rankView.dispose(),this._rankView=null),this._hfTitleView&&(this._hfTitleView.parent&&this._hfTitleView.parent.removeChild(this._hfTitleView),this._hfTitleView.dispose(),this._hfTitleView=null),this._selectImage&&(this._selectImage.parent&&this._selectImage.parent.removeChild(this._selectImage),this._selectImage.dispose(),this._selectImage=null);for(var t,i=0;i<this._btnCach.length;i++)t=this._btnCach[i],t.parent&&t.parent.removeChild(t),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this),t.dispose(),t=null;this._btnCach=null,this._viewContainer=null,this._iconContainer=null,this._model=null},t}(LayeroutWindow);egret.registerClass(HeFuWindow,"HeFuWindow");var HuoDongDailyItem=function(e){function t(){e.call(this),this._system=0,this._goodsCach=new Array,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/huodongDaily/HuodongDailyItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this)},n.dataChanged=function(){this._vo=this.data.vo,this._system=this.data.system,this.setData(this._vo,this._system);var e=HuoDongDailyModel.getInstance().getRewardStatu(this._vo.template_id,this._system);this.updateRewardStatu(e)},n.setData=function(e,t){this._vo=e,this._system=t,this.clearItems();for(var i,n,s,a=e.goodsList,o=0;o<a.length;o++)i=a[o],s=GoodsListProxy.getInstance().getGoodsInfoByType(i.asset_id),s.num=i.value,n=this._goodsCach[o],null==n&&(n=new GoodsItem,this._goodsCach.push(n)),n.data=s,n.x=105*o+20,n.y=8,this.addChild(n);this._txtType.text=e.name},n.flyGoods=function(){if(null!=this._vo){for(var e=[],t=0;t<this._vo.goodsList.length;t++){var i=this._vo.goodsList[t].asset_id,n=GoodsListProxy.getInstance().getBasicGood(i);if(null!=n){var s=n.pic;e.push(s)}}AccessGoodFlyEffectManager.getInstance().flyArray(e)}},n.onClickBtn=function(e){this.flyGoods(),this._system==HuoDongDailyModel.CONSUME?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HuoDongDailyEvtName.REQUEST_14101,{id:this._vo.template_id,type:this._vo.type})):this._system==HuoDongDailyModel.TARGET&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HuoDongDailyEvtName.REQUEST_14201,{id:this._vo.template_id,type:this._vo.type}));var t=this._vo.type;this._system==HuoDongDailyModel.TARGET&&(t==HuoDongDailyModel.WAVE||t==HuoDongDailyModel.FIGHT||t==HuoDongDailyModel.LEVEL||t==HuoDongDailyModel.ROUND)&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FuLiEvtName.SHOW_SHARENEW_VIEW,{vo:this._vo}))},n.updateRewardStatu=function(e){if(e>0)this._btnGet.enabled=!1,this._btnGet.label="已领取",this.contains(this._btnGet)||this.addChild(this._btnGet);else{var t=HuoDongDailyModel.getInstance().getDailyValue(this._system,this._vo.type);t>=this._vo.value?this._vo.type==HuoDongDailyModel.DAYDAY_CHARGE?null!=HuoDongDailyModel.getInstance().getDayDayChargeRewardNode(this._vo.template_id)?(this.contains(this._btnGet)||this.addChild(this._btnGet),this._btnGet.enabled=!0,this._btnGet.label="领取"):(this.contains(this._btnGet)&&this.removeChild(this._btnGet),this.contains(this._txtType)||this.addChild(this._txtType)):(this.contains(this._btnGet)||this.addChild(this._btnGet),this._btnGet.enabled=!0,this._btnGet.label="领取"):(this.contains(this._btnGet)&&this.removeChild(this._btnGet),this.contains(this._txtType)||this.addChild(this._txtType))}},n.clearItems=function(){var e,t=this;t._goodsCach||(this._goodsCach=[]);for(var i=0;i<this._goodsCach.length;i++)e=this._goodsCach[i],this.contains(e)&&this.removeChild(e)},n.dispose=function(){var e=this;e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,e.dispose,e),e._txtType&&(e._txtType.parent&&e._txtType.parent.removeChild(e._txtType),e._txtType.dispose(),e._txtType=null),e._btnGet&&(e._btnGet.parent&&e._btnGet.parent.removeChild(e._btnGet),e._btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickBtn,e));for(var t=0;t<e._goodsCach.length;t++){var i=e._goodsCach[t];i.dispose(),i.parent&&i.parent.removeChild(i),i=null}e._goodsCach=null,e=null},t}(eui.ItemRenderer);egret.registerClass(HuoDongDailyItem,"HuoDongDailyItem");var HuoDongDailyWindow=function(e){function t(){e.call(this),this._leftTime=0,this._currentActivityType=0,this._system=0,this._model=HuoDongDailyModel.getInstance(),this.skinName="resource/game_skins/huodongDaily/HuodongDailyWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.HUODONGDAILY,this._pic=new PicLoader,this._imageContainer.addChildAt(this._pic,0),this.createIcons(),this._btnGoTo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickGoTo,this)},n.onReGroupLoadComplete=function(){this.setImageTitle("hdDaily_headTxt")},n.createIcons=function(){var e,t,i,n=this._model.getClientData(HuoDongDailyModel.DAILY),s='<e:Skin class="skins.ButtonSkin" states="up,down" xmlns:e="http://ns.egret.com/eui">\n                <e:Image width="100%" height="100%"\n                         source="{0}"\n                         source.down="{0}"/>\n            </e:Skin>';this._btnCach=new Array;for(var a=0;a<n.length;a++)t=n[a],e=new CustomButton,e.isStopTouch=!0,e.data=t,i=UrlUtil.getHuoDongDailyIcon(t.show_icon),e.skinName=StringUtil.substitute(s,i),e.x=100*a+20,e.y=15,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this),this._btnCach.push(e),this._iconContainer.addChild(e);this._iconContainer.addChildAt(this._selectImage,0),this._vo=n[0],this.updateView(this._vo),this._selectImage.x=this._btnCach[0].x-18},n.clickIcon=function(e){var t=e.currentTarget;this._selectImage.x=t.x-18,this._vo=t.data,this.updateView(this._vo)},n.updateView=function(e){this._vo=e,this._scroll.stopAnimation();var t=UrlUtil.getHuoDongDailyPic(e.show_icon+"_pic");this._pic.load(t);var i=e.activityList;if(this._system=this._vo.type,this._currentActivityType=0,this.setCurrentActvietyType(i),this.setTimer(),0==this._currentActivityType)return void Message.show("没有找到对应的活动配置");var n=this._model.getDailyValue(this._system,this._currentActivityType);switch(this._currentActivityType==HuoDongDailyModel.LEVEL&&this._system==HuoDongDailyModel.TARGET?(this._txtValue.textAlign="right",this._txtValue.width=130,this._txtValue.text=Tools.convertRoundLv(RoleModel.getInstance().getRoleCommon().level,RoleModel.getInstance().getRoleCommon().round)):(this._txtValue.textAlign="center",this._txtValue.width=84,this._txtValue.text=Tools.convertNumber(n)),this._system){case HuoDongDailyModel.CONSUME:this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQUEST_14100,{type:this._currentActivityType}));break;case HuoDongDailyModel.TARGET:this._currentActivityType==HuoDongDailyModel.LEVEL&&this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQUEST_14200,{type:HuoDongDailyModel.ROUND})),this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQUEST_14200,{type:this._currentActivityType}))}},n.createActivityItems=function(e){for(var t,i,n,s=new Array,a=(new Array,0);a<e.length&&s.length<10;a++)this._system==HuoDongDailyModel.CONSUME?t=this._model.getHDDailyConsume(e[a]):this._system==HuoDongDailyModel.TARGET&&(t=this._model.getHDDailyTarget(e[a])),i=HuoDongDailyModel.getInstance().getRewardStatu(t.template_id,this._system),i>0?n=t:s.push(t);var o=s;n&&o.push(n);var r=new Array;for(a=0;a<o.length;a++)t=o[a],r.push({vo:t,system:this._system});null==this._dataGrpArr&&(this._dataGrpArr=new eui.ArrayCollection,this._itemContainer.dataProvider=this._dataGrpArr),this._dataGrpArr.source=r},n.setCurrentActvietyType=function(e){this._currentActivityType=0;for(var t,i=0;i<e.length;i++){if(this._system==HuoDongDailyModel.CONSUME){t=this._model.getHDDailyConsume(e[i]);break}if(this._system==HuoDongDailyModel.TARGET){t=this._model.getHDDailyTarget(e[i]);break}}t.type&&(this._currentActivityType=t.type)},n.setTimer=function(){var e=(this._vo.endDate.getTime()-(new Date).getTime())/1e3;e=Math.ceil(e),TimerManager.getInstance().remove(1e3,this.addDJS,this),e>0?(this._leftTime=e,TimerManager.getInstance().add(1e3,this.addDJS,this),this.addDJS(),this._imageContainer.contains(this._txtTime)||this._imageContainer.addChild(this._txtTime)):this._imageContainer.contains(this._txtTime)&&this._imageContainer.removeChild(this._txtTime)},n.addDJS=function(){return this._leftTime<=0?(TimerManager.getInstance().remove(1e3,this.addDJS,this),void(this._leftTime=0)):(this._leftTime--,void(this._txtTime.text=TimeUtil.getTime2(this._leftTime)))},n.updateRewardHandler=function(e){var t=this,i=t._vo.activityList;t.createActivityItems(i),t.removeAllRedDot(),t.checkRedDot(),this.updateTxtValue(),t=null},n.updateTxtValue=function(){this._currentActivityType==HuoDongDailyModel.DAYDAY_CHARGE&&(this._txtValue.textAlign="center",this._txtValue.width=84,this._txtValue.text=this._model.getDayDayChargeDay()+"")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this);var t=this;t._model.addEventListener(HuoDongDailyModel.UPDATE_HDDAILY_CONSUME,this.updateRewardHandler,this),t._model.addEventListener(HuoDongDailyModel.UPDATE_HDDAILYTARGET_CONSUME,this.updateRewardHandler,this),this._vo&&this.updateView(this._vo),this.updateTxtValue()},n.removeAllRedDot=function(){for(var e,t=this,i=t._btnCach,n=0;n<i.length;n++)e=i[n],e.showRedDot=!1},n.checkRedDot=function(){for(var e,t,i=this,n=i._btnCach,s=0;s<n.length;s++)e=n[s],e.showRedDot=!1,t=e.data,i._model.checkOneIcon(t)&&(e.showRedDot=!0)},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this)},n.clickGoTo=function(e){if(null!=this._vo)switch(this._vo.template_id){case HuoDongDailyModel.XIAOFEI2:this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_MALL));break;case HuoDongDailyModel.TREASURE2:this.dispatchGlobalEvent(new ParamEvent(TreasureEvtName.TREASURE_OPEN_WINDOW));break;case HuoDongDailyModel.DAYDAY_CHARGE2:case HuoDongDailyModel.CHARGE2:this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN));break;case HuoDongDailyModel.WAVE2:this.dispatchGlobalEvent(new ParamEvent(CheckPointBossEvtName.CHECKPOINTBOSS_OPEN_WINDOW));break;case HuoDongDailyModel.FIGHT2:this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_BUILD));break;case HuoDongDailyModel.FAST2:case HuoDongDailyModel.LEVEL2:this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_SPEED_PK))}},n.dispose=function(){e.prototype.dispose.call(this);var t=this,i=0;for(TimerManager.getInstance().remove(1e3,this.addDJS,this),i=0;i<t._btnCach.length;i++){var n=t._btnCach[i];n.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this),n.dispose(),n=null}t._btnCach=null,t._pic&&(t._pic.parent&&t._pic.parent.removeChild(t._pic),t._pic.dispose(),t._pic=null),t._selectImage&&(t._selectImage.parent&&t._selectImage.parent.removeChild(t._selectImage),t._selectImage.dispose(),t._selectImage=null),t._btnGoTo&&(t._btnGoTo.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.clickGoTo,t),t._btnGoTo.parent&&t._btnGoTo.parent.removeChild(t._btnGoTo),t._btnGoTo=null),t._iconContainer=null,t._itemContainer=null,t._imageContainer=null,t._scroll=null,t._txtTime.dispose(),t._txtTime=null,t._txtValue.dispose(),t._txtValue=null,t._model.removeEventListener(HuoDongDailyModel.UPDATE_HDDAILY_CONSUME,t.updateRewardHandler,t),t._model.removeEventListener(HuoDongDailyModel.UPDATE_HDDAILYTARGET_CONSUME,t.updateRewardHandler,t),t._model=null,t=null},t}(LayeroutWindow);egret.registerClass(HuoDongDailyWindow,"HuoDongDailyWindow");var KFHDChargeItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDChargeItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){},s.setData=function(e){this.vo=e,null==this._imgDay&&(this._imgDay=new PicLoader,this._imgDay.x=21,this._imgDay.y=8,this.addChild(this._imgDay));var t=GoodsListProxy.getInstance().getGoodsInfoByType(e.rewardList[0].asset_id);this._imgItem.source=UrlUtil.getGoodsImageURL(t.pic),this._imgDay.load(UrlUtil.getKFHDChargeURL("day_"+e.template_id));var i=HuoDongDailyModel.getInstance().kaiFuDay;this.vo.template_id>i?(this._imgShader.visible=!0,this._imgLock.visible=!0,this.touchEnabled=this.touchChildren=!1):(this._imgShader.visible=!1,this._imgLock.visible=!1,this.touchEnabled=this.touchChildren=!0),this.vo.template_id==i?this._imgIsToday.visible=!0:this._imgIsToday.visible=!1},s.updateRedDot=function(){null!=this.vo&&(this.showRedDot=HuoDongDailyModel.getInstance().checkKfhdChargeCanGetAwardOneDay(this.vo.template_id))},s.updateInfo=function(e){},s.setSelected=function(e){this._imgSelected.visible=e},i(s,"width",function(){return 116}),s.dispose=function(){this._imgDay&&(this._imgDay.dispose(),this._imgDay=null),this.parent&&this.parent.removeChild(this),e.prototype.dispose.call(this)
},t}(Csprite);egret.registerClass(KFHDChargeItem,"KFHDChargeItem");var KFHDChargeSingleItem=function(e){function t(){e.call(this),this._system=0,this._goodsCach=new Array,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDChargeSingleItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),GameDispatcher.getInstance().addEventListener(DailyEvtName.DAILY_UPDATE,this.updateBtnState,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.dispose,this)},n.dataChanged=function(){this._vo=this.data.vo,this._system=this.data.system,this.setData(this._vo,this._system)},n.setData=function(e,t){this._vo=e,this._system=t,this.clearItems();for(var i,n,s,a=e.rewardList,o=0;o<a.length;o++)i=a[o],s=GoodsListProxy.getInstance().getGoodsInfoByType(i.asset_id),s.num=i.value,n=this._goodsCach[o],null==n&&(n=new GoodsItem,this._goodsCach.push(n)),n.data=s,n.x=105*o+20,n.y=8,this.addChild(n);this._txtType.text=e.name,this.updateBtnState()},n.updateBtnState=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_56,this._vo.template_id),t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_57,this._vo.template_id);1==t?(this._btnGet.enabled=!1,this._btnGet.label="已领取"):1==e?(this._btnGet.enabled=!0,this._btnGet.label="领取"):(this._btnGet.enabled=!1,this._btnGet.label="领取")},n.flyGoods=function(){if(null!=this._vo){for(var e=[],t=0;t<this._vo.rewardList.length;t++){var i=this._vo.rewardList[t].asset_id,n=GoodsListProxy.getInstance().getBasicGood(i);if(null!=n){var s=n.pic;e.push(s)}}AccessGoodFlyEffectManager.getInstance().flyArray(e)}},n.onClickBtn=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HuoDongDailyEvtName.REQEUST_21500,{id:this._vo.template_id})),this.flyGoods()},n.updateRewardStatu=function(e){},n.clearItems=function(){for(var e,t=0;t<this._goodsCach.length;t++)e=this._goodsCach[t],this.contains(e)&&this.removeChild(e)},n.dispose=function(){var e=this;e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,e.dispose,e),GameDispatcher.getInstance().removeEventListener(DailyEvtName.DAILY_UPDATE,this.updateBtnState,this),e._txtType&&(e._txtType.parent&&e._txtType.parent.removeChild(e._txtType),e._txtType.dispose(),e._txtType=null),e._btnGet&&(e._btnGet.parent&&e._btnGet.parent.removeChild(e._btnGet),e._btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickBtn,e));for(var t=0;t<e._goodsCach.length;t++){var i=e._goodsCach[t];i.dispose(),i.parent&&i.parent.removeChild(i),i=null}e._goodsCach=null,e=null},t}(eui.ItemRenderer);egret.registerClass(KFHDChargeSingleItem,"KFHDChargeSingleItem");var KFHDChargeSingleView=function(e){function t(){e.call(this),this.name="KFHDChargeSingleView"+t.K++,this._model=HuoDongDailyModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDChargeSingleViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._pic=new PicLoader,this._imageContainer.addChildAt(this._pic,0),this._pic.load(rURL("resource/assets/icon/kfhdCharge_db/bg.jpg"))},n.onAdd=function(){e.prototype.onAdd.call(this);for(var t,i=this._model.getKFHDChargeSingleConfig(),n=new Array,s=0;s<i.length;s++)t=i[s],n.push({vo:t,system:1});null==this._dataGrpArr&&(this._dataGrpArr=new eui.ArrayCollection,this._itemContainer.dataProvider=this._dataGrpArr),this._dataGrpArr.source=n,this._btnGoTo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this)},n.onRemove=function(){e.prototype.onRemove.call(this),this._dataGrpArr=null,this._itemContainer.dataProvider=null,this._btnGoTo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this)},n.onOkHandler=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.dispose=function(){e.prototype.dispose.call(this),this._pic&&(this._pic.dispose(),this._pic=null)},t.K=1,t}(BaseView);egret.registerClass(KFHDChargeSingleView,"KFHDChargeSingleView");var KFHDChargeView=function(e){function t(){e.call(this),this._itemArr=[],this.name="KFHDChargeView"+t.K++,this._model=HuoDongDailyModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDChargeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){},n.onAdd=function(){e.prototype.onAdd.call(this),this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQEUST_16600)),this._lrContainer=new CustomRLContainer(0,518,-60),this._lrContainer.x=64,this._lrContainer.y=6,this._lrContainer.setBtnY(30),this.addChild(this._lrContainer);for(var t,i=this._model.getKFHDChargeConfig(),n=i.length,s=0;n>s;s++)t=new KFHDChargeItem,t.setData(i[s]),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),this._itemArr.push(t);this._lrContainer.setItemList(this._itemArr,4),this.setSelectedItem(this._itemArr[0]),this._btnCharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChargeHandler,this),this._btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetHandler,this),this.addGlobalEventListener(HuoDongDailyEvtName.UPDATE_16600,this.updateInfoHandler,this),this.addGlobalEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.updateChargeCount,this)},n.onRemove=function(){e.prototype.onRemove.call(this),this._btnCharge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChargeHandler,this),this._btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetHandler,this),this.removeGlobalEventListener(HuoDongDailyEvtName.UPDATE_16600,this.updateInfoHandler,this),this.removeGlobalEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.updateChargeCount,this);for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),t.dispose(),t=null;this._itemArr=[]},n.onChargeHandler=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.onGetHandler=function(){var e=new ParamEvent(HuoDongDailyEvtName.REQEUST_16601);e.data={day:this._selectedItem.vo.template_id},this.dispatchGlobalEvent(e)},n.onItemClick=function(e){var t=e.currentTarget;this.setSelectedItem(t)},n.setSelectedItem=function(e){for(var t,i=HuoDongDailyModel.getInstance().kaiFuDay,n=this._model.getKfhdChargeInfoByDay(e.vo.template_id),s=this._itemArr.length,a=0;s>a;a++)t=this._itemArr[a],t.setSelected(!1);this._selectedItem=e,this._selectedItem.setSelected(!0),this._txtReward.htmlText="元宝x<font color='#ffd200'>"+this._selectedItem.vo.limit_rewardList[0].value+"</font>";var o=this._selectedItem.vo.rewardList[0].asset_id,r=GoodsListProxy.getInstance().getGoodsInfoByType(o);r.num=Number(this._selectedItem.vo.rewardList[0].value),this._item.data=r,this._item.showName(r.name),this._txtDay.text=this._selectedItem.vo.template_id+"",this._txtChargeNum.text=this._selectedItem.vo.need_gold+"",this._imgState.visible=!1,this._txtAlert.visible=!0,this._selectedItem.vo.template_id<i?n?0==n.spec_flag?(this._imgState.visible=!0,this._txtAlert.visible=!1,this._imgState.source=RES.getRes("share_json.share_overdue")):1==n.spec_flag&&(this._imgState.visible=!0,this._imgState.source=RES.getRes("share_json.share_geted")):(this._imgState.visible=!0,this._txtAlert.visible=!1,this._imgState.source=RES.getRes("share_json.share_overdue")):n&&(0==n.spec_flag?(this._imgState.visible=!1,this._txtAlert.visible=!0,this._imgState.source=RES.getRes("share_json.share_overdue")):1==n.spec_flag&&(this._imgState.visible=!0,this._imgState.source=RES.getRes("share_json.share_geted"))),this.updateChargeCount()},n.setData=function(e){},n.updateChargeCount=function(){var e=FixedNumModel.getInstance().getFixedNumNode(FixedNumModel.FIXED_NUM_TYPE1,0),t=0;e&&(t=e.value),this._txtCount.text="活动期间累计充值:"+t,this.updateBtnGetState(t),this.updateItemsRedDot()},n.updateBtnGetState=function(e){if(null!=this._selectedItem&&null!=this._selectedItem.vo){var t=this._model.getKfhdChargeInfoByDay(this._selectedItem.vo.template_id);t?0==t.flag?this._btnGet.enabled=!0:this._btnGet.enabled=!1:e>=this._selectedItem.vo.need_gold?this._selectedItem.vo&&(this._btnGet.enabled=!0):this._btnGet.enabled=!1}},n.updateInfoHandler=function(){for(var e,t,i=this._itemArr.length,n=0;i>n;n++)e=this._itemArr[n],t=this._model.getKfhdChargeInfoByDay(e.vo.template_id),t&&e.updateInfo(t);this._selectedItem&&this.setSelectedItem(this._selectedItem),this.updateChargeCount()},n.updateItemsRedDot=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e.updateRedDot()},n.dispose=function(){e.prototype.dispose.call(this)},t.K=1,t}(BaseView);egret.registerClass(KFHDChargeView,"KFHDChargeView");var KFHDMrtItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDMrtItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)},s.setData=function(e){this._index=e,this.day.source="resource/assets/icon/kfhdmrt/kaifu_mrtDay_"+e+".png"},i(s,"index",function(){return this._index}),s.setSelect=function(e){this.select.visible=e},t}(BaseView);egret.registerClass(KFHDMrtItem,"KFHDMrtItem");var KFHDMrtRankView=function(e){function t(){e.call(this),this._model=HuoDongDailyModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDMrtRankViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickClose,this)},n.setData=function(e){this._list=e;var t,i=new eui.ArrayCollection;if(this._list.length>0)for(var n=0;n<this._list.length&&(this._list[n].role_id==RoleModel.getInstance().getRoleCommon().role_id&&(t=this._list[n]),i.addItem(this._list[n]),!(n>=19));n++);this._container.dataProvider=i,this._txtNoPlayer.visible=0==this._list.length,t?this._txtDes.text="我的排名："+t.rank:this._txtDes.text="我的排名：20名以外"},n.onClickClose=function(e){this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REMOVE_KFHD_MRT_RANKVIEW))},n.dispose=function(){e.prototype.dispose.call(this)},t}(BaseView);egret.registerClass(KFHDMrtRankView,"KFHDMrtRankView");var KFHDMrtView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDMrtViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.imageBg=new PicLoader,this.addChildAt(this.imageBg,0),this.imageBg.load("resource/assets/icon/kfhdmrt/kaifu_mrtBg.png"),this.txtLink.htmlText="<u>查看完整榜单</u>",this.txtLink.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLink,this),this.addGlobalEventListener(HuoDongDailyEvtName.UPDATE_16400,this.updateData,this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13501_UPDATE,this.updateFigureData,this),this._titleArr=[],this._titleArr.push("10019"),this._titleArr.push("10022"),this._titleArr.push("10025"),this._titleArr.push("10028"),this._titleArr.push("10031"),this._titleArr.push("10034"),this._titleArr.push("10037"),this._titleArr.push("10040"),this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._lrContainer=new CustomRLContainer(0,500,-50),this._lrContainer.x=65,this._lrContainer.y=525,this._lrContainer.setBtnY(20),this.addChild(this._lrContainer),this._itemList=[];for(var e=1;9>e;e++){var t=new KFHDMrtItem;t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickDay,this),t.setData(e),this._itemList.push(t)}this._lrContainer.setItemList(this._itemList,5),this.setDay(1)},n.onLink=function(e){this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.SHOW_KFHD_MRT_RANKVIEW,this._data.famous_ranks))},n.updateData=function(e){this._data=e.data;var t=this._data.famous_ranks,i="";if(this.txtName.text="虚位以待",this.disposeFigure(),t.length>0){t.sort(function(e,t){return e.rank>t.rank?1:-1});for(var n=0;5>n;n++)t[n]&&(1==t[n].rank?(this.txtName.text=t[n].role_name,this.dispatchGlobalEvent(new ParamEvent(RankEvtName.RANK_CCMD13501,{id:t[n].role_id}))):i+=t[n].rank+"."+t[n].role_name+"\n")}this.txtRank.text=i},n.updateFigureData=function(e){var t=e.data;if(0!=t.rank_partners.length){var i,n=0;if(n>0)for(var s=0;s<t.rank_partners.length;s++)t.rank_partners[s].career==n&&(i=t.rank_partners[s]);else i=t.rank_partners[0];if(i){var a=AppearanceUtil.changeAppListToVo(i.appearance);this.updateFigure(i.career,i.sex,a.cloth,a.weapon,a.wing)}}},n.updateFigure=function(e,t,i,n,s){this.figureMovie||(this.figureMovie=new BigFigure,this.figureMovie.x=155,this.figureMovie.y=100,this.roleGroup.touchEnabled=!1,this.roleGroup.addChildAt(this.figureMovie,0)),this.figureMovie.changeBody(e,t,i),this.figureMovie.changeWeapon(e,t,n),this.figureMovie.changeWing(s)},n.clickDay=function(e){var t=e.currentTarget;this.setDay(t.index)},n.setDay=function(e){this._day=e,this.iconRank.source="resource/assets/icon/kfhdmrt/kaifu_mrtRank_"+e+".png",this.iconTitle.source="resource/assets/mapAssets/title/"+this._titleArr[e-1]+".png",this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQEUST_16400,e));for(var t=0;t<this._itemList.length;t++)t+1==e?this._itemList[t].setSelect(!0):this._itemList[t].setSelect(!1)},n.dispose=function(){e.prototype.dispose.call(this),this.txtLink.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLink,this),this.removeGlobalEventListener(HuoDongDailyEvtName.UPDATE_16400,this.updateData,this),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13501_UPDATE,this.updateFigureData,this),this.disposeFigure(),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null)},n.disposeFigure=function(){this.figureMovie&&(this.figureMovie.dispose(),this.figureMovie=null)},t}(BaseView);egret.registerClass(KFHDMrtView,"KFHDMrtView");var KFHDPaiMingView=function(e){function t(){e.call(this),this._leftTime=0,this._model=HuoDongDailyModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDPaiMingSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this._bigBg=new PicLoader;var e=UrlUtil.getHuoDongDailyPic("kfhd_daBiaoBg","png");this._bigBg.load(e),this.addChildAt(this._bigBg,0),this._pic=new PicLoader,this._imageContainer.addChildAt(this._pic,0),this._secondItem=new KFHDRankMingCiItem,this._secondItem.x=14,this._secondItem.y=460,this.addChild(this._secondItem),this._thirdItem=new KFHDRankMingCiItem,this._thirdItem.x=294,this._thirdItem.y=this._secondItem.y,this.addChild(this._thirdItem)},n.onClickBtn=function(e){this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.SHOW_KFHD_RANKVIEW))},n.setData=function(e){var t=this;t._rankClientVo=e;var i=t._rankClientVo.activityList[0];t._rankVo=t._model.getKFHDRankVo(i);var n=UrlUtil.getHuoDongDailyPic(e.show_icon+"_"+e.show_title);t._pic.load(n),t.setTimer(),t.requestRankData(),t.createRewardIcon(),null==t._rewardPic&&(t._rewardPic=new PicLoader,n=UrlUtil.getHuoDongDailyPic("kfhdRankReward_"+t._rankClientVo.template_id,"png"),t._rewardPic.load(n),t._rewardPic.x=15,t._rewardPic.y=160,t.addChild(t._rewardPic))},n.createRewardIcon=function(){if(null==this._goodsCach){this._goodsCach=new Array;for(var e=this._rankVo.goods,t=33*(e.length-1),i=0;i<e.length;i++){var n=e[i],s=GoodsListProxy.getInstance().getGoodsInfoByType(n.asset_id);s.num=n.value;var a=new GoodsItem;a.data=s,a.x=t+114*i,a.y=330,this.addChild(a),this._goodsCach.push(a)}}},n.onAdd=function(){e.prototype.onAdd.call(this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateRankInfo,this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13501_UPDATE,this.updateFigureData,this)},n.onRemove=function(){e.prototype.onRemove.call(this),this.removeTimer(),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateRankInfo,this),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13501_UPDATE,this.updateFigureData,this)},n.removeTimer=function(){TimerManager.getInstance().remove(1e3,this.addDJS,this)},n.requestRankData=function(){this.dispatchGlobalEvent(new ParamEvent(RankEvtName.RANK_CCMD13500,this._rankVo.type))},n.setTimer=function(){var e=(this._rankClientVo.endDate.getTime()-(new Date).getTime())/1e3;e=Math.ceil(e),this.removeTimer(),e>0?(this._leftTime=e,TimerManager.getInstance().remove(1e3,this.addDJS,this),TimerManager.getInstance().add(1e3,this.addDJS,this),this.addDJS(),this._imageContainer.contains(this._txtTime)||this._imageContainer.addChild(this._txtTime)):this._imageContainer.contains(this._txtTime)&&this._imageContainer.removeChild(this._txtTime)},n.addDJS=function(){return this._leftTime<=0?(TimerManager.getInstance().remove(1e3,this.addDJS,this),void(this._leftTime=0)):(this._leftTime--,void(this._txtTime.text=TimeUtil.getTime2(this._leftTime)))},n.updateRankInfo=function(e){for(var t,i,n,s,a,o=e.data,r=o.rank_list,h=0;h<r.length;h++)t=r[h],1==t.rank?n=t:2==t.rank?s=t:3==t.rank?a=t:4==t.rank&&(i=t);null==i&&(i=new NodeRank_list,i.rank=4),null==s&&(s=new NodeRank_list,s.rank=2,s.name="虚位以待",s.round=0,s.level=0,s.value=-1),null==a&&(a=new NodeRank_list,a.rank=3,a.name="虚位以待",a.round=0,a.level=0,a.value=-1),null==n&&(n=new NodeRank_list,n.rank=1,n.name="虚位以待",n.round=0,n.level=0,n.value=-1),this.setFirstData(n),this._secondItem.setData(this._rankVo.type,s),this._thirdItem.setData(this._rankVo.type,a)},n.setFirstData=function(e){var t=this;if(t._txtPlayerName.text=e.name,e.value>0){if(t._txtLv.text=this._model.getHDRankStr(e,this._rankVo.type),e.role_id==RoleModel.getInstance().getRoleCommon().role_id){var i=RoleModel.getInstance().getRoleCommon().icon;t.setFirstImage(i)}else t.dispatchGlobalEvent(new ParamEvent(RankEvtName.RANK_CCMD13501,{id:e.role_id}));t._firstRound.visible=!0}else t._txtLv.text="",t._firstImage&&t.contains(t._firstImage)&&t.removeChild(t._firstImage),t._firstRound.visible=!1},n.setFirstImage=function(e){var t=this;null==t._firstImage&&(t._firstImage=new PicLoader,t._firstImage.x=384,t._firstImage.y=252);var i=UrlUtil.getHeadURL(1,e);t._firstImage.load(i),t.addChild(t._firstImage)},n.updateFigureData=function(e){var t=e.data;this.setFirstImage(t.icon)},n.dispose=function(){var t=this;e.prototype.dispose.call(this),t.onRemove(),t.parent&&t.parent.removeChild(t),t._bigBg&&(t._bigBg.dispose(),t._bigBg=null),t._pic&&(t._pic.dispose(),t._pic=null),t._firstImage&&(t._firstImage.dispose(),t._firstImage=null),t._rewardPic&&(t._rewardPic.dispose(),t._rewardPic=null),t._secondItem&&(t._secondItem.dispose(),t._secondItem=null),t._thirdItem&&(t._thirdItem.dispose(),t._thirdItem=null);for(var i=t._goodsCach,n=0;n<i.length;n++){var s=i[n];s.dispose(),s=null}},t}(BaseView);egret.registerClass(KFHDPaiMingView,"KFHDPaiMingView");var KFHDRankMingCiItem=function(e){function t(){e.call(this),this._model=HuoDongDailyModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDRankMingCiSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){},n.setData=function(e,t){var i=this,n=i._model.getRankVoByRank(e,t.rank);if(null==i._itemCach){i._itemCach=new Array;for(var s,a,o=0;o<n.goods.length;o++)s=GoodsListProxy.getInstance().getGoodsInfoByType(n.goods[o].asset_id),s.num=n.goods[o].value,a=i._itemCach[o],null==a&&(a=new GoodsItem,i._itemCach.push(a)),a.data=s,a.x=160,a.y=13,this.addChild(a)}t.rank<4?(t.value>0?i._txtLv.text=HuoDongDailyModel.getInstance().getHDRankStr(t,e):i._txtLv.text="",i._txtMingCi.text=StringUtil.substitute("第{0}名",t.rank),i._txtName.text=t.name):(i._txtLv.text="",i._txtName.text=StringUtil.substitute("第{0}到{1}名",n.min,n.max),i._txtMingCi.text=""),i=null},n.dispose=function(){e.prototype.dispose.call(this);for(var t=this._itemCach,i=0;i<t.length;i++){var n=t[i];n&&n.dispose()}},t}(BaseView);egret.registerClass(KFHDRankMingCiItem,"KFHDRankMingCiItem");var KFHDReChargeItem=function(e){function t(){e.call(this),this._system=0,this._goodsCach=new Array,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDReChargeItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),GameDispatcher.getInstance().addEventListener(HuoDongDailyEvtName.UPDATE_18200,this.updateBtnState,this),GameDispatcher.getInstance().addEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.updateBtnState,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.dispose,this)},n.dataChanged=function(){this._vo=this.data.vo,this._system=this.data.system,this.setData(this._vo,this._system)},n.setData=function(e,t){this._vo=e,this._system=t,this.clearItems();for(var i,n,s,a=e.rewardList,o=0;o<a.length;o++)i=a[o],s=GoodsListProxy.getInstance().getGoodsInfoByType(i.asset_id),s.num=i.value,n=this._goodsCach[o],null==n&&(n=new GoodsItem,this._goodsCach.push(n)),n.data=s,n.x=105*o+20,n.y=8,this.addChild(n);this._txtType.text=e.name,this.updateBtnState()},n.updateBtnState=function(){var e=HuoDongDailyModel.getInstance().getKFHDReChargeNode(this._vo.template_id),t=FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE1,0);null==e?t>=this._vo.need_gold?(this._btnGet.label="领取",this._btnGet.enabled=!0):(this._btnGet.label="领取",this._btnGet.enabled=!1):1==e.flag?(this._btnGet.label="已领取",this._btnGet.enabled=!1):0==e.flag&&(this._btnGet.label="领取",this._btnGet.enabled=!0)},n.flyGoods=function(){if(null!=this._vo){for(var e=[],t=0;t<this._vo.rewardList.length;t++){var i=this._vo.rewardList[t].asset_id,n=GoodsListProxy.getInstance().getBasicGood(i);if(null!=n){var s=n.pic;e.push(s)}}AccessGoodFlyEffectManager.getInstance().flyArray(e)}},n.onClickBtn=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(HuoDongDailyEvtName.REQEUST_18201,{day:this._vo.template_id})),this.flyGoods()},n.updateRewardStatu=function(e){},n.clearItems=function(){for(var e,t=0;t<this._goodsCach.length;t++)e=this._goodsCach[t],this.contains(e)&&this.removeChild(e)},n.dispose=function(){var e=this;e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,e.dispose,e),GameDispatcher.getInstance().removeEventListener(HuoDongDailyEvtName.UPDATE_18200,this.updateBtnState,this),GameDispatcher.getInstance().removeEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.updateBtnState,this),e._txtType&&(e._txtType.parent&&e._txtType.parent.removeChild(e._txtType),e._txtType.dispose(),e._txtType=null),e._btnGet&&(e._btnGet.parent&&e._btnGet.parent.removeChild(e._btnGet),e._btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickBtn,e));for(var t=0;t<e._goodsCach.length;t++){var i=e._goodsCach[t];i.dispose(),i.parent&&i.parent.removeChild(i),i=null}e._goodsCach=null,e=null},t}(eui.ItemRenderer);egret.registerClass(KFHDReChargeItem,"KFHDReChargeItem");var KFHDReChargeView=function(e){function t(){e.call(this),this.name="KFHDReChargeView"+t.K++,this._model=HuoDongDailyModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KaiFuReChargeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._pic=new PicLoader,this._imageContainer.addChildAt(this._pic,0),this._pic.load(rURL("resource/assets/icon/kfhdReCharge/bg.jpg"))},n.onAdd=function(){e.prototype.onAdd.call(this);for(var t,i=this._model.getKFHDReChargeConfig(),n=new Array,s=0;s<i.length;s++)t=i[s],n.push({vo:t,system:1});null==this._dataGrpArr&&(this._dataGrpArr=new eui.ArrayCollection,this._itemContainer.dataProvider=this._dataGrpArr),this._dataGrpArr.source=n,this._btnGoTo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().addEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.updateTxtGold,this),this.updateTxtGold()},n.onRemove=function(){e.prototype.onRemove.call(this),this._dataGrpArr=null,this._itemContainer.dataProvider=null,this._btnGoTo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().removeEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.updateTxtGold,this)},n.updateTxtGold=function(){var e=FixedNumModel.getInstance().getFixedNum(FixedNumModel.FIXED_NUM_TYPE1,0);this._txtValue.text=""+e},n.onOkHandler=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.dispose=function(){e.prototype.dispose.call(this),this._pic&&(this._pic.dispose(),this._pic=null)},t.K=1,t}(BaseView);egret.registerClass(KFHDReChargeView,"KFHDReChargeView");var KFHDRobShopItem=function(e){function t(){e.call(this),this._model=HuoDongDailyModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDRobShopItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buyGoodsHandler,this)},n.setData=function(e){if(this._vo=e,4002==this._vo.template_id&&(this._rmbVo=MallModel.getInstance().getRmbShopVo(2)),null==this._itemCach&&(this._itemCach=new Array,this._zheKouList=new Array,this.addGoodsIcon(),this.addPriceTypeIcon()),null==this._picBg){this._picBg=new PicLoader;var t=UrlUtil.getHuoDongDailyPic("kfhd_shopItemBg_"+e.template_id%1e3,"png");this._picBg.load(t),this.addChildAt(this._picBg,0)}this.setBuyTimes()},n.addGoodsIcon=function(){var e,t,i=this._vo;t=this._rmbVo?this._rmbVo.add_item:this._vo.goods,e=t.length>1?152:208;for(var n,s,a,o,r=0;r<t.length;r++){this._rmbVo?(n=t[r].info,n.num=t[r].num):(n=GoodsListProxy.getInstance().getGoodsInfoByType(t[r].asset_id),n.num=t[r].value),s=this._itemCach[r],null==s&&(s=new GoodsItem,this._itemCach.push(s)),s.data=n,s.x=e+118*r,s.y=35,this.addChild(s),this._rmbVo||i.show_discount>0&&(a=this._zheKouList[r],null==a&&(a=new PicLoader,this._zheKouList.push(a)),o=UrlUtil.getMallPic("mall_zhe_"+i.show_discount),a.load(o),a.x=s.x-18,a.y=s.y-13,this.addChild(a))}},n.addPriceTypeIcon=function(){if(this._rmbVo)return void(this._txtPrice.text=StringUtil.substitute("{0}元",this._rmbVo.rmb));this._priceTypeIcon=new PicLoader,this._priceTypeIcon.x=407,this._priceTypeIcon.y=30,this.addChild(this._priceTypeIcon);var e,t;this._vo.con_coin>0?(e=UrlUtil.getSmallPic(WelfareType.ADD_COIN),t=this._vo.con_coin):(e=UrlUtil.getSmallPic(WelfareType.ADD_GOLD),t=this._vo.con_gold),this._priceTypeIcon.load(e),this._txtPrice.text=t.toString()},n.setBuyTimes=function(){if(this._rmbVo)var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_40,this._rmbVo.template_id),t=1-e;else var i=this._vo,e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_19,i.template_id),t=i.day_limit-e;this._txtBuyTimes.text=StringUtil.substitute("今日购买次数：{0}",t),this._btnBuy.enabled=t>0},n.buyGoodsHandler=function(e){if(this._rmbVo)ConfigManager.isTencent()?ConfigManager.isIOS()?QQManager.getInstance().QQBuyGoods(QQManager.CHARGEDABIAO_IOS,this._rmbVo.template_id):QQManager.getInstance().QQBuyGoods(QQManager.CHARGEDABIAO_ANDROID,this._rmbVo.template_id):PhpHttpStatisticsManager.requestChargeOrder(1,this._rmbVo.rmb,7,"RMB商城",1,this._rmbVo.template_id);else{if(this._vo.con_gold>RoleModel.getInstance().getRoleInfo().getGold())return void this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN));this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQEUST_14320,{id:this._vo.template_id}))}},n.onAdd=function(){e.prototype.onAdd.call(this),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.update,this)},n.onRemove=function(){e.prototype.onRemove.call(this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.update,this)},n.update=function(e){this.setBuyTimes()},n.dispose=function(){e.prototype.dispose.call(this),this.onRemove(),this._priceTypeIcon&&(this._priceTypeIcon.dispose(),this._priceTypeIcon=null);for(var t,i=0;i<this._itemCach.length;i++)t=this._itemCach[i],t.parent&&t.parent.removeChild(t),t.dispose(),t=null;this._itemCach=null;for(var n,i=0;i<this._zheKouList.length;i++)n=this._zheKouList[i],n.dispose(),n=null;this._zheKouList=null},t}(BaseView);egret.registerClass(KFHDRobShopItem,"KFHDRobShopItem");var KFHDRobShopView=function(e){function t(){e.call(this),this._model=HuoDongDailyModel.getInstance()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.setData=function(e){if(!this._isInit){this._vo=e,this._itemCach=new Array;for(var t,i,n=0;n<e.activityList.length;n++)i=this._model.getKFHDRobShopVo(e.activityList[n]),t=new KFHDRobShopItem,t.setData(i),t.x=0,t.y=203*n,this.addChild(t),this._itemCach.push(t);this._isInit=!0}},n.onAdd=function(){e.prototype.onAdd.call(this);for(var t,i=0;i<this._itemCach.length;i++)t=this._itemCach[i],t.onAdd()},n.onRemove=function(){e.prototype.onRemove.call(this);for(var t,i=0;i<this._itemCach.length;i++)t=this._itemCach[i],t.onRemove()},n.dispose=function(){e.prototype.onRemove.call(this);for(var t,i=0;i<this._itemCach.length;i++)t=this._itemCach[i],t.dispose();this._itemCach=null},t}(Csprite);egret.registerClass(KFHDRobShopView,"KFHDRobShopView");var KFHDStandardView=function(e){function t(){e.call(this),this._leftTime=0,this._model=HuoDongDailyModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KaiFuStandardViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._bigBg=new PicLoader;var e=UrlUtil.getHuoDongDailyPic("kfhd_daBiaoBg","png");this._bigBg.load(e),this.addChildAt(this._bigBg,0),this._bigBg2=new PicLoader,this._bigBg2.x=13,this._bigBg2.y=464,e=UrlUtil.getHuoDongDailyPic("kfhd_standardBg3","png"),this._bigBg2.load(e),this.addChildAt(this._bigBg2,1),this._pic=new PicLoader,this._imageContainer.addChildAt(this._pic,0),this._yuanBao=new PicLoader,this._yuanBao.toYuanbao(),this._yuanBao.x=356,this._yuanBao.y=519,this._btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnHandler,this),this._btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuyHandler,this),this._btnUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUpHandler,this)},n.onClickUpHandler=function(e){switch(this._standardConfigVo.type){case 1:this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_FIGURE,{isOpen:!0,index:1}));break;case 2:this.dispatchGlobalEvent(new ParamEvent(FigureEvtName.FIGURE_OPEN_SPECIALEQUIPWINDOW,{state:!0,type:3}));break;case 3:this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_BUILD,1));break;case 4:this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_MALL));break;case 5:this.dispatchGlobalEvent(new ParamEvent(MeetPlayerEvtName.SHOW_MEETPLAYER_VIEW));break;case 6:this.dispatchGlobalEvent(new ParamEvent(CheckPointBossEvtName.CHECKPOINTBOSS_OPEN_WINDOW));break;case 7:this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_FIGURE,{isOpen:!0,index:2}));break;case 8:this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_BUILD,1));break;case 9:this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN));break;case 10:this.dispatchGlobalEvent(new ParamEvent(ShadowEvtName.OPEN_SHADOW,0))}},n.onAdd=function(){e.prototype.onAdd.call(this),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateBtn,this),this.addGlobalEventListener(HuoDongDailyEvtName.UPDATE_MY_STANDARD,this.updateMyStandard,this)
},n.onRemove=function(){e.prototype.onRemove.call(this),this.removeTimer(),this.removeGlobalEventListener(HuoDongDailyEvtName.UPDATE_MY_STANDARD,this.updateMyStandard,this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateBtn,this)},n.setData=function(e){var t=this,i=e.activityList[0];t._standardClientVo=e,t._standardConfigVo=t._model.getKFHDStandardVo(i);var n=UrlUtil.getHuoDongDailyPic("kaifuStandard_"+e.show_title);t._pic.load(n),t.setTimer(),t.requestRankData(),9==t._standardConfigVo.type?t.setRmbShopData():(t.setShopData(),this.addChild(this._yuanBao)),null==t._rewardPic&&(t._rewardPic=new PicLoader,n=UrlUtil.getHuoDongDailyPic("kfhdStandardReward_"+e.show_title,"png"),t._rewardPic.load(n),t._rewardPic.x=15,t._rewardPic.y=160,t.addChild(t._rewardPic))},n.setShopData=function(){var e=this;if(!e._robShopVo){e._shopCach=new Array,e._robShopVo=e._model.getKFHDRobShopVo(e._standardConfigVo.robShopID),e._txtCost.text=e._robShopVo.con_gold.toString();var t=e._robShopVo.goods,i=45;t.length>1&&(i=0);for(var n=0;n<t.length;n++){var s=t[n],a=GoodsListProxy.getInstance().getGoodsInfoByType(s.asset_id);a.num=s.value;var o=new GoodsItemSmall;o.data=a,o.x=95*n+i,e._shopContainer.addChild(o),e._shopCach.push(o)}e.setBuyBtnStatu()}},n.setRmbShopData=function(){var e=this;if(!e._rmbShopVo){e._shopCach=new Array,e._rmbShopVo=MallModel.getInstance().getRmbShopVo(2),e._txtCost.text=StringUtil.substitute("{0}元",e._rmbShopVo.rmb);var t=e._rmbShopVo.add_item,i=45;t.length>1&&(i=0);for(var n=0;n<t.length;n++){var s=t[n],a=GoodsListProxy.getInstance().getGoodsInfoByType(s.info.template_id);a.num=s.num;var o=new GoodsItemSmall;o.data=a,o.x=95*n+i,e._shopContainer.addChild(o),e._shopCach.push(o)}e.setBuyBtnStatu()}},n.setTimer=function(){var e=(this._standardClientVo.endDate.getTime()-(new Date).getTime())/1e3;e=Math.ceil(e),this.removeTimer(),e>0?(this._leftTime=e,TimerManager.getInstance().remove(1e3,this.addDJS,this),TimerManager.getInstance().add(1e3,this.addDJS,this),this.addDJS(),this._imageContainer.contains(this._txtTime)||this._imageContainer.addChild(this._txtTime)):this._imageContainer.contains(this._txtTime)&&this._imageContainer.removeChild(this._txtTime)},n.addDJS=function(){return this._leftTime<=0?(TimerManager.getInstance().remove(1e3,this.addDJS,this),void(this._leftTime=0)):(this._leftTime--,void(this._txtTime.text=TimeUtil.getTime2(this._leftTime)))},n.removeTimer=function(){TimerManager.getInstance().remove(1e3,this.addDJS,this)},n.requestRankData=function(){this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQEUST_14311,{type:this._standardConfigVo.type}))},n.setStandard=function(e){if(null==this._myGoodsCach){this._myGoodsCach=new Array;for(var t,i,n=this._standardConfigVo.goods,s=0;s<n.length;s++)t=GoodsListProxy.getInstance().getGoodsInfoByType(n[s].asset_id),t.num=n[s].value,i=this._myGoodsCach[s],null==i&&(i=new GoodsItemSmall,this._myGoodsCach.push(i)),i.data=t,i.x=100*s,i.y=5,this._myGoodsContainer.addChild(i)}var a,o;switch(this._standardConfigVo.type){case 1:a=StringUtil.substitute("翅膀达到{0}阶",this._standardConfigVo.value),o=StringUtil.substitute("我的翅膀{0}阶",e);break;case 2:a=StringUtil.substitute("龙魂总等级达到{0}级",this._standardConfigVo.value),o=StringUtil.substitute("我的龙魂总等级{0}级",e);break;case 3:a=StringUtil.substitute("宝石总等级达到{0}级",this._standardConfigVo.value),o=StringUtil.substitute("我的宝石总等级{0}级",e);break;case 4:a=StringUtil.substitute("消费{0}元宝",this._standardConfigVo.value),o=StringUtil.substitute("我消费的元宝{0}",e);break;case 5:a=StringUtil.substitute("获得{0}声望",this._standardConfigVo.value),o=StringUtil.substitute("我获得的声望{0}",e);break;case 6:a=StringUtil.substitute("历史最高通关{0}关",this._standardConfigVo.value),o=StringUtil.substitute("我的最大通关{0}关",e);break;case 7:a=StringUtil.substitute("转数达到{0}转",this._standardConfigVo.value),o=StringUtil.substitute("我的转数{0}转",e);break;case 8:a=StringUtil.substitute("战力达到{0}",Tools.convertNumber(this._standardConfigVo.value)),o=StringUtil.substitute("我的战力{0}",Tools.convertNumber(e));break;case 9:a=StringUtil.substitute("充值{0}元宝",this._standardConfigVo.value),o=StringUtil.substitute("我充值的元宝{0}",e);break;case 10:a=StringUtil.substitute("光环达到{0}阶",this._standardConfigVo.value),o=StringUtil.substitute("我的光环{0}阶",e)}this._txtCondition.text=a,this._txtValue.text=o,DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_18)>0?(this.showBtn(),this._btnGet.enabled=!1,this._btnGet.label="已领取",this._imageComplete.visible=!0,this._btnUp.visible=!1):e>=this._standardConfigVo.value?(this._btnGet.enabled=!0,this._btnGet.label="领取奖励",this.showBtn(),this._imageComplete.visible=!0,this._btnUp.visible=!1):this.hideBtn()},n.showBtn=function(){this.contains(this._btnGet)||this.addChild(this._btnGet)},n.hideBtn=function(){this.contains(this._btnGet)&&this.removeChild(this._btnGet),this._imageComplete.visible=!1,this._btnUp.visible=!0},n.onClickBtnHandler=function(e){this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQEUST_14310,{id:this._standardConfigVo.template_id}))},n.onClickBuyHandler=function(e){if(this._robShopVo){if(this._robShopVo.con_gold>RoleModel.getInstance().getRoleInfo().getGold())return void this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN));this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQEUST_14320,{id:this._robShopVo.template_id}))}else this._rmbShopVo&&(ConfigManager.isTencent()?ConfigManager.isIOS()?QQManager.getInstance().QQBuyGoods(QQManager.CHARGEDABIAO_IOS,this._rmbShopVo.template_id):QQManager.getInstance().QQBuyGoods(QQManager.CHARGEDABIAO_ANDROID,this._rmbShopVo.template_id):PhpHttpStatisticsManager.requestChargeOrder(1,this._rmbShopVo.rmb,7,"RMB商城",1,this._rmbShopVo.template_id))},n.updateMyStandard=function(e){var t=this._model.myValue;this.setStandard(t)},n.updateBtn=function(e){DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_18)>0&&(this.showBtn(),this._btnGet.enabled=!1,this._btnGet.label="已领取"),this.setBuyBtnStatu()},n.setBuyBtnStatu=function(){if(this._robShopVo)var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_19,this._robShopVo.template_id),t=this._robShopVo.day_limit-e;else if(this._rmbShopVo)var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_40,this._rmbShopVo.template_id),t=1-e;0>=t?this._btnBuy.label="已购买":this._btnBuy.label="购买",this._btnBuy.enabled=t>0},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.onRemove(),t._pic&&(t._pic.dispose(),t._pic=null),t._bigBg&&(t._bigBg.dispose(),t._bigBg=null),t._bigBg2&&(t._bigBg2.dispose(),t._bigBg2=null),t._yuanBao&&(t._yuanBao.dispose(),t._yuanBao=null),t._rewardPic&&(t._rewardPic.dispose(),t._rewardPic=null),TimerManager.getInstance().remove(1e3,t.addDJS,t),t._leftTime=0,t._titleEffect&&(t._titleEffect.dispose(),t._titleEffect=null);for(var i=t._myGoodsCach,n=0;n<i.length;n++){var s=i[n];s.dispose()}i=t._shopCach;for(var n=0;n<i.length;n++){var s=i[n];s.dispose()}t=null},t}(BaseView);egret.registerClass(KFHDStandardView,"KFHDStandardView");var KFHDTitleItem=function(e){function t(t){e.call(this),this._day=0,this._day=t,this._img=new PicLoader,this._img.load(UrlUtil.getKFHDTITLEIcon("title_"+this._day)),this.addChild(this._img)}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this._img&&(this._img.dispose(),this._img=null)},i(s,"width",function(){return 470}),t}(Csprite);egret.registerClass(KFHDTitleItem,"KFHDTitleItem");var KFHDTitleView=function(e){function t(){e.call(this),this._itemArr=[],this.name="KFHDTitleView"+t.K++,this._model=HuoDongDailyModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDTitleViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._model.kaiFuDay;this._bg=new PicLoader,this._bg.load(UrlUtil.getKFHDTITLEIcon("kfhdTitle_bg")),this.addChildAt(this._bg,0),this._txtDays=new PicLoader,this._txtDays.load(UrlUtil.getKFHDTITLEIcon("day_1")),this.addChild(this._txtDays),this._txtDays.x=177,this._txtDays.y=497,this._lrContainer=new CustomRLContainer(0,522,-52),this._lrContainer.x=47,this._lrContainer.y=6,this._lrContainer.setBtnY(-2),this._itemContainer.addChild(this._lrContainer);var e=this._model.getKFHDTitleVO(1),t=FashionModel.getInstance().getFashionConfigVO(e.show),i=GoodsListProxy.getInstance().getGoodsInfoByType(e.goodsList[0].asset_id);i.num=e.goodsList[0].value,this._item.data=GoodsListProxy.getInstance().getGoodsInfoByType(e.goodsList[0].asset_id),this._txtFpower.text=PropertyUtil.calculateProFight(t)+"";for(var n,s=0;8>s;s++)n=new KFHDTitleItem(s+1),this._itemArr.push(n);this._lrContainer.setItemList(this._itemArr,1);var a=RoleModel.getInstance().getPartnerList()[0];this._figure||(this._figure=new BigFigure,this._figure.setTounchEnable(!1),this._bodyContainer.addChild(this._figure)),this._figure.changeBody(a.getCareer(),a.getSex(),t.template_id),this._figure.changeWeapon(a.getCareer(),a.getSex(),a.getWeapon()),this._figure.changeWing(a.getWingID())},n.onAdd=function(){e.prototype.onAdd.call(this),this._lrContainer.addEventListener(CustomRLContainer.PAGE_CHANGE,this.pageChange,this)},n.onRemove=function(){e.prototype.onRemove.call(this),this._lrContainer.addEventListener(CustomRLContainer.PAGE_CHANGE,this.pageChange,this)},n.pageChange=function(){var e=this._lrContainer.getCurrentIndex()+1;this._txtDays.load(UrlUtil.getKFHDTITLEIcon("day_"+e))},n.dispose=function(){e.prototype.dispose.call(this),this._figure&&(this._figure.parent.removeChild(this._figure),this._figure.dispose(),this._figure=null),this._bg&&(this._bg.dispose(),this._bg=null),this._txtDays&&(this._txtDays.dispose(),this._txtDays=null);for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],t.dispose(),t=null;this._itemArr=[]},t.K=1,t}(BaseView);egret.registerClass(KFHDTitleView,"KFHDTitleView");var KFHDTreasureAwardView=function(e){function t(){e.call(this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDTreasureAwardViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this);var t=this;t._itemArr=[]},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this)},n.onCloseHandler=function(){for(var t,i=this,n=0;n<i._itemArr.length;n++)t=i._itemArr[n],t&&(t.data=null,t.dispose(),t=null);i._itemArr=null,e.prototype.onCloseHandler.call(this)},n.setData=function(e,t){void 0===t&&(t="");var i,n=this;e instanceof NodeDrop_list?i=[e]:e instanceof Array&&(i=e);for(var s,a,o,r=0;r<i.length;r++)s=i[r],o=GoodsListProxy.getInstance().getGoodsInfoByType(s.asset_id),o&&(a=n._itemArr[r],a||(a=new GoodsItemSmall),a.data=o,a.num=s.value>0?s.value:1,a.x=110*r,n.itemGroup.addChild(a));""!=t&&null!=t&&(this.txtDes.htmlText=t)},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},t}(LayeroutWindow);egret.registerClass(KFHDTreasureAwardView,"KFHDTreasureAwardView");var KFHDTreasureView=function(e){function t(){e.call(this),this._itemArr2=[],this.name="KFHDTreasureView"+t.K++,this._model=HuoDongDailyModel.getInstance(),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFHDTreasureViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._imgGold1.source=UrlUtil.getSmallPic(2),this._imgGold2.source=UrlUtil.getSmallPic(2)},n.onAdd=function(){e.prototype.onAdd.call(this),GameDispatcher.getInstance().addEventListener(DailyEvtName.DAILY_UPDATE,this.updateTimes,this),GameDispatcher.getInstance().addEventListener(TreasureEvtName.TREASURE__CCMD16500_UPDATE,this.flyGoods,this),this._btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnGet10.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOk10Handler,this);var t=this._model.kaiFuDay,i=this._model.getKFHDTreasureVo(t);if(this._vo=i,null!=i){for(var n,s,a,o=i.showList,r=0;7>r;r++)s=this["_item"+r],n=o[r],n&&(a=GoodsListProxy.getInstance().getGoodsInfoByType(n.asset_id),s.data=a,s.num=n.value),1==r&&(null==this._effect&&(this._effect=new UIEffect),this._effect.showEffect(UrlUtil.getCommonEffectURL("color_6"),-270,-390,s,80,!0));for(this._txtCon1.text=i.con_gold1+"",this._txtCon2.text=i.con_gold2+"",r=0;r<i.timesRewardList.length;r++)s=new GoodsItem,s.name=r+"",s.x=r*(s.width+15),s.data=GoodsListProxy.getInstance().getGoodsInfoByType(i.timesRewardList[r].asset_id),s.showLv(!0),s.showName(i.timesRewardList[r].value+"次"),s.addCallBack(this.callBackF,s,this),this._itemContainer2.addChild(s),this._itemArr2.push(s);this.updateTimes()}},n.onRemove=function(){e.prototype.onRemove.call(this),GameDispatcher.getInstance().removeEventListener(TreasureEvtName.TREASURE__CCMD16500_UPDATE,this.flyGoods,this),GameDispatcher.getInstance().removeEventListener(DailyEvtName.DAILY_UPDATE,this.updateTimes,this),this._btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnGet10.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOk10Handler,this),this._effect&&(this._effect.dispose(),this._effect=null);for(var t,i=0;i<this._itemArr2.length;i++)t=this._itemArr2[i],t.parent&&t.parent.removeChild(t),t.data=null,t.dispose(),t=null;this._itemArr2=[]},n.callBackF=function(e,t){t.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.SHOW_KFHD_TREASURE_AWARD_VIEW,{node:t._vo.showTimesList[Number(e.name)]}))},n.onOkHandler=function(){var e=new ParamEvent(TreasureEvtName.TREASURE__CCMD16500,{type:1});this.dispatchGlobalEvent(e)},n.onOk10Handler=function(){var e=new ParamEvent(TreasureEvtName.TREASURE__CCMD16500,{type:2});this.dispatchGlobalEvent(e)},n.updateTimes=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_29,0);this._txtCount.htmlText="每日寻宝达到指定次数<font color='#00ff0c'>（"+e+"）</font>可领取奖励"},n.flyGoods=function(e){for(var t,i=e.data.arr,n=this.localToGlobal(227,8),s=[],a=0;a<i.length;a++){t=i[a];for(var o=0;o<t.value;o++)s.push(GoodsListProxy.getInstance().getGoodsInfoByType(t.asset_id).pic)}AccessGoodFlyEffectManager.getInstance().flyArray(s,n)},n.dispose=function(){e.prototype.dispose.call(this);for(var t,i=0;7>i;i++)t=this["_item"+i],t&&(t.parent&&t.parent.removeChild(t),t.data=null,t.dispose(),t=null)},t.K=1,t}(BaseView);egret.registerClass(KFHDTreasureView,"KFHDTreasureView");var KFShopEquipItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFShopEquipItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},n.onGetClick=function(){if(RoleModel.getInstance().CheckGold(this._vo.price)){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MallEvtName.MALL_CCMD11004,{id:this._vo.template_id,num:1}));var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_3,this._vo.template_id)+1,t=MallModel.getInstance().getShopVo(this._vo.template_id);this.btnGet.visible=e<t.buy_limit,this.bm_over.visible=!this.btnGet.visible}},n.dataChanged=function(){this._vo=this.data,this.item.data=this._vo.show[0].info,this.txtCost.text=this._vo.price+"元宝";var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_3,this._vo.template_id),t=MallModel.getInstance().getShopVo(this._vo.template_id);this.btnGet.visible=e<t.buy_limit,this.bm_over.visible=!this.btnGet.visible},n.dispose=function(){this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},t}(eui.ItemRenderer);egret.registerClass(KFShopEquipItem,"KFShopEquipItem");var KFShopEquipView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kaiFuHuoDong/KFShopEquipViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._bg=new PicLoader,this._bg.x=8,this.addChildAt(this._bg,0)},n.onAdd=function(){},n.onRemove=function(){},n.setType=function(e){this._bg.load(UrlUtil.getHuoDongDailyPic(e,"png"));var t;t=e==HuoDongDailyModel.KF_SHOP_EQUIP_1?HuoDongDailyModel.getInstance().getShopEquipConfig():HuoDongDailyModel.getInstance().getShopEquipConfig2();for(var i=new eui.ArrayCollection,n=0;n<t.length;n++)i.addItem(t[n]);this.listGroup.dataProvider=i},n.dispose=function(){e.prototype.dispose.call(this),this._bg&&(this._bg.dispose(),this._bg=null)},t}(BaseView);egret.registerClass(KFShopEquipView,"KFShopEquipView");var KFShopEquipWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/kaiFuHuoDong/KFShopEquipWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_zbsd");var t='<e:Skin class="skins.ButtonSkin" states="up,down" xmlns:e="http://ns.egret.com/eui">\n                <e:Image width="100%" height="100%"\n                         source="{0}"\n                         source.down="{0}"/>\n            </e:Skin>';this._btn=new CustomButton,this._btn.y=15,this._btn.skinName=StringUtil.substitute(t,"resource/assets/icon/huoDongDaily/kaifushop1.png"),this._iconContainer.addChild(this._btn),this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this),this._btn.data=HuoDongDailyModel.KF_SHOP_EQUIP_1,this._btn2=new CustomButton,this._btn2.x=135,this._btn2.y=15,this._btn2.skinName=StringUtil.substitute(t,"resource/assets/icon/huoDongDaily/kaifushop2.png"),this._iconContainer.addChild(this._btn2),this._btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this),this._btn2.data=HuoDongDailyModel.KF_SHOP_EQUIP_2,this._selectImage.x=this._btn.x-8,this._selectImage.y=this._btn.y-18,this.updateView(8001)},n.clickIcon=function(e){var t=e.currentTarget;this._selectImage.x=t.x-8,this._selectImage.y=t.y-18,this.updateView(t.data)},n.updateView=function(e){this._shopEquipView||(this._shopEquipView=new KFShopEquipView,this._viewContainer.addChild(this._shopEquipView)),this._shopEquipView.setType(e)},n.dispose=function(){e.prototype.dispose.call(this)},t}(LayeroutWindow);egret.registerClass(KFShopEquipWindow,"KFShopEquipWindow");var KaiFuHuoDongWindow=function(e){function t(){e.call(this),this._btnCach=new Array,this._model=HuoDongDailyModel.getInstance(),this.skinName="resource/game_skins/kaiFuHuoDong/KaiFuHuoDongWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.KAIFUHUODONG,this.createIcons(),this.onBtnReturnSetIndex()},n.onReGroupLoadComplete=function(){this.setImageTitle("kaiFuHuoDong_json.kfhd_title")},n.createIcons=function(){var e,t,i,n=this._model.getKaiFuIconList(),s='<e:Skin class="skins.ButtonSkin" states="up,down" xmlns:e="http://ns.egret.com/eui">\n                <e:Image width="100%" height="100%"\n                         source="{0}"\n                         source.down="{0}"/>\n            </e:Skin>';this._btnCach=new Array;for(var a=0,o=0;o<n.length;o++)t=n[o],e=new CustomButton,e.data=t,i=UrlUtil.getHuoDongDailyIcon(t.show_icon),e.skinName=StringUtil.substitute(s,i),e.x=115*a+20,e.y=15,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this),a++,this._btnCach.push(e),this._iconContainer.addChild(e);this._iconContainer.addChild(this._selectImage),this._vo=n[0],this._selectImage.x=this._btnCach[0].x-18},n.clickIcon=function(e){var t=e.currentTarget;this._selectImage.x=t.x-18,this._vo=t.data,this.updateView()},n.updateView=function(){switch(this._currentView&&this._viewContainer.contains(this._currentView)&&(this._currentView.onRemove(),this._viewContainer.removeChild(this._currentView)),this.removeRankView(),this._vo.type){case HuoDongDailyModel.KFSTANDARD:null==this._standardView&&(this._standardView=new KFHDStandardView),this._standardView.setData(this._vo),this._currentView=this._standardView;break;case HuoDongDailyModel.KFRANK:null==this._mingCiView&&(this._mingCiView=new KFHDPaiMingView),this._mingCiView.setData(this._vo),this._currentView=this._mingCiView;break;case HuoDongDailyModel.KFROBSHOP:null==this._robShopView&&(this._robShopView=new KFHDRobShopView),this._robShopView.setData(this._vo),this._currentView=this._robShopView;break;case HuoDongDailyModel.KFCHARGE:null==this._chargeView&&(this._chargeView=new KFHDChargeView),this._chargeView.setData(this._vo),this._currentView=this._chargeView;break;case HuoDongDailyModel.KFMINGRENTANG:null==this._mrtView&&(this._mrtView=new KFHDMrtView),this._currentView=this._mrtView;break;case HuoDongDailyModel.KFTREASURE:null==this._treasureView&&(this._treasureView=new KFHDTreasureView),this._currentView=this._treasureView;break;case HuoDongDailyModel.KFRECHARGE:null==this._reChargeView&&(this._reChargeView=new KFHDReChargeView),this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQEUST_18200)),this._currentView=this._reChargeView;break;case HuoDongDailyModel.KFTITLE:null==this._titleView&&(this._titleView=new KFHDTitleView),this._currentView=this._titleView;break;case HuoDongDailyModel.KFCHARGE_SINGLE:null==this._chargeSingleView&&(this._chargeSingleView=new KFHDChargeSingleView),this._currentView=this._chargeSingleView;break;case HuoDongDailyModel.KF_TYPE_13:null==this._shopEquipView1&&(this._shopEquipView1=new KFShopEquipView),this._shopEquipView1.setType(this._vo.template_id),this._currentView=this._shopEquipView1;break;case HuoDongDailyModel.KF_TYPE_14:null==this._shopEquipView2&&(this._shopEquipView2=new KFShopEquipView),this._shopEquipView2.setType(this._vo.template_id),this._currentView=this._shopEquipView2;break;case HuoDongDailyModel.KF_TYPE_15:null==this._sendGold&&(this._sendGold=new ActivitySendGoldView),this._sendGold.setVO(this._vo),this._currentView=this._sendGold}this._currentView&&(this._currentView.onAdd(),this._viewContainer.addChild(this._currentView))},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this._currentView&&this._currentView.onRemove(),this.removeRankView(),this.removeGlobalEventListener(HuoDongDailyEvtName.SHOW_KFHD_RANKVIEW,this.showRankView,this),this.removeGlobalEventListener(HuoDongDailyEvtName.REMOVE_KFHD_RANKVIEW,this.removeRankViewHandler,this),this.removeGlobalEventListener(HuoDongDailyEvtName.UPDATE_MY_STANDARD,this.updateMyStandard,this),this.removeGlobalEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.updateDailyHandler,this),this.removeGlobalEventListener(HuoDongDailyEvtName.UPDATE_16600,this.updateKfhdChargeInfoHandler,this),this.removeGlobalEventListener(HuoDongDailyEvtName.UPDATE_18200,this.updateKfhdReChargeInfoHandler,this),this.removeGlobalEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.updateFixedNumHandler,this),this.removeGlobalEventListener(HuoDongDailyEvtName.SHOW_KFHD_MRT_RANKVIEW,this.showMrtRankView,this),this.removeGlobalEventListener(HuoDongDailyEvtName.REMOVE_KFHD_MRT_RANKVIEW,this.removeMrtRankView,this)},n.onOpenHandler=function(){this.addGlobalEventListener(HuoDongDailyEvtName.SHOW_KFHD_RANKVIEW,this.showRankView,this),this.addGlobalEventListener(HuoDongDailyEvtName.REMOVE_KFHD_RANKVIEW,this.removeRankViewHandler,this),this.addGlobalEventListener(DailyEvtName.DAILY_DATA_CHANGE,this.updateDailyHandler,this),this.addGlobalEventListener(HuoDongDailyEvtName.UPDATE_MY_STANDARD,this.updateMyStandard,this),this.addGlobalEventListener(HuoDongDailyEvtName.UPDATE_16600,this.updateKfhdChargeInfoHandler,this),this.addGlobalEventListener(HuoDongDailyEvtName.UPDATE_18200,this.updateKfhdReChargeInfoHandler,this),this.addGlobalEventListener(DailyEvtName.FIXED_DATA_CHANGE,this.updateFixedNumHandler,this),this.addGlobalEventListener(HuoDongDailyEvtName.SHOW_KFHD_MRT_RANKVIEW,this.showMrtRankView,this),this.addGlobalEventListener(HuoDongDailyEvtName.REMOVE_KFHD_MRT_RANKVIEW,this.removeMrtRankView,this),e.prototype.onOpenHandler.call(this),this._vo&&this.updateView(),this.updateRedDot()},n.showRankView=function(e){null==this._rankView&&(this._rankView=new KFHDRandkView),this._currentView&&this._viewContainer.contains(this._currentView)&&(this._currentView.onRemove(),this._viewContainer.removeChild(this._currentView));var t=this._model.getCurrentRankVo();e.data&&e.data.clientID&&(t=this._model.getKFHDClientVo(parseInt(e.data.clientID)));var i=t.activityList[0],n=this._model.getKFHDRankVo(i);this._rankView.setData(n),this._rankView.onAdd(),this._viewContainer.addChild(this._rankView)},n.showMrtRankView=function(e){null==this._rankMrtView&&(this._rankMrtView=new KFHDMrtRankView),this._currentView&&this._viewContainer.contains(this._currentView)&&(this._currentView.onRemove(),this._viewContainer.removeChild(this._currentView)),this._rankMrtView.setData(e.data),this._viewContainer.addChild(this._rankMrtView)},n.removeRankViewHandler=function(e){this.removeRankView(),this.updateView()},n.removeRankView=function(){this._rankView&&this._viewContainer.contains(this._rankView)&&(this._rankView.onRemove(),this._viewContainer.removeChild(this._rankView))},n.removeMrtRankViewHandler=function(e){this.removeMrtRankView(),this.updateView()},n.removeMrtRankView=function(){this._rankMrtView&&this._viewContainer.contains(this._rankMrtView)&&(this._rankMrtView.onRemove(),this._viewContainer.removeChild(this._rankMrtView))},n.updateDailyHandler=function(e){var t=e.data.data;(t.type==DailyModel.DAILY_TYPE_19||t.type==DailyModel.DAILY_TYPE_18||t.type==DailyModel.DAILY_TYPE_14||t.type==DailyModel.DAILY_TYPE_34||t.type==DailyModel.DAILY_TYPE_56||t.type==DailyModel.DAILY_TYPE_57)&&this.updateRedDot()},n.updateKfhdChargeInfoHandler=function(e){this.updateRedDot()},n.updateKfhdReChargeInfoHandler=function(e){this.updateRedDot()},n.updateFixedNumHandler=function(e){this.updateRedDot()},n.updateRedDot=function(){if(null!=this._btnCach)for(var e,t,i=0;i<this._btnCach.length;i++)e=this._btnCach[i],t=e.data,t.type==HuoDongDailyModel.KFSTANDARD?e.showRedDot=this._model.checkStandardOk(t):t.type==HuoDongDailyModel.KFROBSHOP?e.showRedDot=this._model.checkRobShopOk(t):t.type==HuoDongDailyModel.KFCHARGE?e.showRedDot=this._model.checkKfhdChargeCanGetAward():t.type==HuoDongDailyModel.KFTREASURE?e.showRedDot=this._model.checkKfhdTreasureCanGetAward():t.type==HuoDongDailyModel.KFRECHARGE?e.showRedDot=this._model.checkKFHDReChargeCanGetReward():t.type==HuoDongDailyModel.KFCHARGE_SINGLE&&(e.showRedDot=this._model.checkKFHDChargeSingleCanGetReward())},n.updateMyStandard=function(e){this.updateRedDot()},n.dispose=function(){e.prototype.dispose.call(this),this.onCloseHandler(),this._currentView&&(this._currentView.onRemove(),this._currentView.parent&&this._currentView.parent.removeChild(this._currentView),this._currentView=null),this._standardView&&(this._standardView.parent&&this._standardView.parent.removeChild(this._standardView),this._standardView.dispose(),this._standardView=null),this._robShopView&&(this._robShopView.parent&&this._robShopView.parent.removeChild(this._robShopView),this._robShopView.dispose(),this._robShopView=null),this._rankView&&(this._rankView.parent&&this._rankView.parent.removeChild(this._rankView),this._rankView.dispose(),this._rankView=null),this._chargeView&&(this._chargeView.parent&&this._chargeView.parent.removeChild(this._chargeView),this._chargeView.dispose(),this._chargeView=null),this._treasureView&&(this._treasureView.parent&&this._treasureView.parent.removeChild(this._treasureView),this._treasureView.dispose(),this._treasureView=null),this._mrtView&&(this._mrtView.parent&&this._mrtView.parent.removeChild(this._mrtView),this._mrtView.dispose(),this._mrtView=null),this._mingCiView&&(this._mingCiView.dispose(),this._mingCiView=null),this._titleView&&(this._titleView.parent&&this._titleView.parent.removeChild(this._titleView),this._titleView.dispose(),this._titleView=null),this._chargeSingleView&&(this._chargeSingleView.parent&&this._chargeSingleView.parent.removeChild(this._chargeSingleView),this._chargeSingleView.dispose(),this._chargeSingleView=null),this._shopEquipView1&&(this._shopEquipView1.parent&&this._shopEquipView1.parent.removeChild(this._shopEquipView1),this._shopEquipView1.dispose(),this._shopEquipView1=null),this._shopEquipView2&&(this._shopEquipView2.parent&&this._shopEquipView2.parent.removeChild(this._shopEquipView2),this._shopEquipView2.dispose(),this._shopEquipView2=null),this._sendGold&&(this._sendGold.parent&&this._sendGold.parent.removeChild(this._sendGold),this._sendGold.dispose(),this._sendGold=null)},t}(LayeroutWindow);egret.registerClass(KaiFuHuoDongWindow,"KaiFuHuoDongWindow");var KfKillerGuildRankItem=function(e){function t(){e.call(this),this._itemArr=[],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/kfKiller/KfKillerGuildRankItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){for(var e,t=0;2>t;t++)e=new GoodsItemSmall,e.data=GoodsListProxy.getInstance().getGoodsInfoByType(2),e.x=t*(e.width+10),e.showLv(!1),this._itemContainer.addChild(e),this._itemArr.push(e);this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this)},s.setData=function(e){this._vo=e},i(s,"vo",function(){return this._vo}),s.onOkHandler=function(e){},s.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t.parent&&t.parent.removeChild(t),t.dispose(),t=null;this._itemArr=[],this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this)},t}(Csprite);egret.registerClass(KfKillerGuildRankItem,"KfKillerGuildRankItem");var KfKillerGuildRankView=function(e){function t(){e.call(this),this._itemArr=[],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/kfKiller/KfKillerGuildRankViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){for(var e,t=0;10>t;t++)e=new KfKillerGuildRankItem,e.y=118*t,this._itemContainer.addChild(e),this._itemArr.push(e)},n.onOpenHandler=function(){},n.onCloseHandler=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e.dispose(),e=null;this._itemArr=[],this.dispose()},n.onOkHandler=function(){},t}(BaseView);egret.registerClass(KfKillerGuildRankView,"KfKillerGuildRankView");var KfKillerRankItem=function(e){function t(t){e.call(this),this._itemArr=[],this._ind=0,this._ind=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/kfKiller/KfKillerRankItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){for(var e,t=0;4>t;t++)e=new GoodsItemSmall,e.data=GoodsListProxy.getInstance().getGoodsInfoByType(2),e.x=t*(e.width+10),this._itemContainer.addChild(e),this._itemArr.push(e)},s.setData=function(e){this._vo=e},i(s,"vo",function(){return this._vo}),s.setSelected=function(e){},s.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t.parent&&t.parent.removeChild(t),t.dispose(),t=null;this._itemArr=[]},t}(Csprite);egret.registerClass(KfKillerRankItem,"KfKillerRankItem");var KfKillerSceneBottomInfo=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/kfKiller/KfKillerSceneBottomInfoSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.onOkHandler=function(){},n.dispose=function(){e.prototype.dispose.call(this)},t}(BaseView);egret.registerClass(KfKillerSceneBottomInfo,"KfKillerSceneBottomInfo");
var KfKillerSceneEnemyItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/fanli/KfKillerSceneEnemyItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.dispose=function(){e.prototype.dispose.call(this)},t}(Csprite);egret.registerClass(KfKillerSceneEnemyItem,"KfKillerSceneEnemyItem");var KfKillerSceneLeftInfo=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/kfKiller/KfKillerSceneLeftInfoSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.onOkHandler=function(){},n.dispose=function(){e.prototype.dispose.call(this)},t}(BaseView);egret.registerClass(KfKillerSceneLeftInfo,"KfKillerSceneLeftInfo");var KfKillerSceneRightInfo=function(e){function t(){e.call(this),this._itemArr=[],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/kfKiller/KfKillerSceneRightInfoSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.onOkHandler=function(){},n.dispose=function(){e.prototype.dispose.call(this)},t}(BaseView);egret.registerClass(KfKillerSceneRightInfo,"KfKillerSceneRightInfo");var KfKillerTenRankItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/kfKiller/KfKillerTenRankItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){},s.setData=function(e){this._vo=e},i(s,"vo",function(){return this._vo}),s.setSelected=function(e){},s.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this)},t}(Csprite);egret.registerClass(KfKillerTenRankItem,"KfKillerTenRankItem");var KfKillerTenRankView=function(e){function t(){e.call(this),this._itemArr=[],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/kfKiller/KfKillerTenRankViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=new eui.TileLayout;e.paddingTop=1,e.paddingLeft=1,e.paddingRight=1,e.paddingBottom=1,this._itemContainer.layout=e;for(var t,i=0;9>i;i++)t=new KfKillerTenRankItem,this._itemContainer.addChild(t),this._itemArr.push(t)},n.onOpenHandler=function(){},n.onCloseHandler=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e.dispose(),e=null;this._itemArr=[],this.dispose()},n.onOkHandler=function(){},t}(BaseView);egret.registerClass(KfKillerTenRankView,"KfKillerTenRankView");var KfKillerView=function(e){function t(){e.call(this),this._itemArr=[],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/kfKiller/KfKillerViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){for(var e,t=0;4>t;t++)e=new GoodsItemSmall,e.data=GoodsListProxy.getInstance().getGoodsInfoByType(2),e.x=t*(e.width+10),this._itemContainer.addChild(e),this._itemArr.push(e)},n.onOpenHandler=function(){this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this)},n.onCloseHandler=function(){this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this);for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e.parent&&e.parent.removeChild(e),e.dispose(),e=null;this._itemArr=[],this.dispose()},n.onOkHandler=function(){},t}(BaseView);egret.registerClass(KfKillerView,"KfKillerView");var KfKillerWindow=function(e){function t(){e.call(this),this._selectedTabIndex=0,this.skinName="resource/game_skins/kfKiller/KfKillerWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_kfKiller"),this.tabBar.dataProvider=new eui.ArrayCollection(["杀戮战场","排行奖励","十大杀神","公会奖励"])},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this)},n.onCloseHandler=function(){this.clearContent(),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),e.prototype.onCloseHandler.call(this)},n.onHelp=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.SHENLIAN))},n.openView=function(e,t){if(t)this.isPop=!0;else{var i=!this.isPop;this.isPop=i}1==this.isPop&&(this.setTabIndex(e),this.onBarItemTap(null))},n.onBoxTap=function(e){e.data&&(FigureModel.getInstance().selectedPartnerVO=e.data)},n.onBarItemTap=function(e){var t=this;if(null==e||e.itemIndex!=this._selectedTabIndex)switch(e&&(this._selectedTabIndex=e.itemIndex),t.clearContent(),t.tabBar.selectedIndex){case 0:t._kfKillerView||(t._kfKillerView=new KfKillerView,t.container.addChild(t._kfKillerView),t._kfKillerView.onOpenHandler());break;case 1:t._kfKillRankView||(t._kfKillRankView=new kfKillerRankView,t.container.addChild(t._kfKillRankView),t._kfKillRankView.onOpenHandler());break;case 2:t._kfKillTenRankView||(t._kfKillTenRankView=new KfKillerTenRankView,t.container.addChild(t._kfKillTenRankView),t._kfKillTenRankView.onOpenHandler());break;case 3:t._kfKillGuildRankView||(t._kfKillGuildRankView=new KfKillerGuildRankView,t.container.addChild(t._kfKillGuildRankView),t._kfKillGuildRankView.onOpenHandler());break;case 4:}},n.setTabIndex=function(e){this._selectedTabIndex=e,this.tabBar.selectedIndex=this._selectedTabIndex},n.clearContent=function(){for(var e,t=this;t.container.numChildren>0;)e=t.container.getChildAt(0),this.container.removeChild(e),e.dispose(),e=null;t._kfKillerView&&(t._kfKillerView.parent&&t._kfKillerView.parent.removeChild(t._kfKillerView),t._kfKillerView.onCloseHandler(),t._kfKillerView=null),this._kfKillRankView&&(this._kfKillRankView.parent&&this._kfKillRankView.parent.removeChild(this._kfKillRankView),this._kfKillRankView.onCloseHandler(),this._kfKillRankView=null),this._kfKillTenRankView&&(this._kfKillTenRankView.parent&&this._kfKillTenRankView.parent.removeChild(this._kfKillTenRankView),this._kfKillTenRankView.onCloseHandler(),this._kfKillTenRankView=null),this._kfKillGuildRankView&&(this._kfKillGuildRankView.parent&&this._kfKillGuildRankView.parent.removeChild(this._kfKillGuildRankView),this._kfKillGuildRankView.onCloseHandler(),this._kfKillGuildRankView=null)},n.updateTabRedDot=function(e){var t=e.data.index,i=e.data.show;i?(this.tabBar.validateNow(),this.tabBar.getChildAt(t).showRedDot=!0):(this.tabBar.validateNow(),this.tabBar.getChildAt(t).showRedDot=!1)},t}(LayeroutWindow);egret.registerClass(KfKillerWindow,"KfKillerWindow");var kfKillerRankView=function(e){function t(){e.call(this),this._itemArr=[],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/kfKiller/kfKillerRankViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){for(var e,t=0;5>t;t++)e=new KfKillerRankItem(0),e.y=133*t,this._itemContainer.addChild(e),this._itemArr.push(e)},n.onOpenHandler=function(){},n.onCloseHandler=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e.dispose(),e=null;this._itemArr=[],this.dispose()},n.onOkHandler=function(){},t}(BaseView);egret.registerClass(kfKillerRankView,"kfKillerRankView");var KingRankItem=function(e){function t(){e.call(this),this.skinName="resource/game_skins/king/KingRankItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dataChanged=function(){this._rankData=this.data,this.txtName.text=this._rankData.role_name,this.txtRank.text=this._rankData.rank.toString(),this.txtValue.text=this._rankData.win_num+"场",this.itemBg.source=this._rankData.rank%2==0?"share_lineBg":"share_lineBg2";var e=KingModel.getInstance().getKingVo(this._rankData.level);this.icon.source="kingType_s_"+e.type,this.txtLv.text=e.lv.toString()},t}(eui.ItemRenderer);egret.registerClass(KingRankItem,"KingRankItem");var KingRankView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/king/KingRankViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.addGlobalEventListener(KingEvtName.CCMD18320_UPDATE,this.updateData,this)},n.updateData=function(e){var t=e.data,i=t.king_ranks;i.length>0&&i.sort(function(e,t){return e.rank<t.rank?-1:1});for(var n=new eui.ArrayCollection,s=0,a=0;a<i.length;a++)i[a].role_id==RoleModel.getInstance().getRoleCommon().role_id&&(s=i[a].rank),n.addItem(i[a]);this.ranklist.dataProvider=n,this.txtRank.text=s>0?s.toString():"未上榜",this.txtCount.text=t.win_num.toString();var o=KingModel.getInstance().getKingVo(t.level);this.icon.source="kingType_s_"+o.type,this.txtLv.text=o.lv.toString()},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(KingEvtName.CCMD18320_UPDATE,this.updateData,this)},t}(BaseView);egret.registerClass(KingRankView,"KingRankView");var KingSelectWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/king/KingSelectWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_king_pp"),this.item.setHeadURLByPartner(RoleModel.getInstance().getRoleBaseInfo().getHeadIcon()),this.txtName.text=RoleModel.getInstance().getRoleBaseInfo().name},n.onCloseBtnClick=function(e){},n.setData=function(e){this._data=e,this._timeId=20,this.txtTime.text="匹配对手中......",TimerManager.getInstance().remove(100,this.onSelectTime,this),TimerManager.getInstance().add(100,this.onSelectTime,this)},n.onSelectTime=function(){this._timeId--;var e;if(this._timeId<=0)TimerManager.getInstance().remove(100,this.onSelectTime,this),e=this._data.name,this.item2.setHeadURLByPartner(this._data.icon),this._timeId=3,this.txtTime.text="进入倒计时："+this._timeId+"秒",TimerManager.getInstance().remove(1e3,this.onShowTime,this),TimerManager.getInstance().add(1e3,this.onShowTime,this);else{var t=Math.ceil(3*Math.random()),i=Math.ceil(2*Math.random());this.item2.setHeadURLByPartner(0,t,i),e=LoginLang.getChangeRandomName()}this.txtName2.text=e},n.onShowTime=function(){this._timeId--,this._timeId<=0?(TimerManager.getInstance().remove(1e3,this.onShowTime,this),this.dispatchGlobalEvent(new ParamEvent(KingEvtName.CCMD18311)),this.isPop=!1):this.txtTime.text="进入倒计时："+this._timeId+"秒"},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(100,this.onSelectTime,this),TimerManager.getInstance().remove(1e3,this.onShowTime,this)},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},t}(LayeroutWindow);egret.registerClass(KingSelectWindow,"KingSelectWindow");var KingStarView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/king/KingStarSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.updateData()},n.updateData=function(){var e=KingModel.getInstance().getData();this._data=e;var t=KingModel.getInstance().getKingVo(e.level);this.imageIcon.source="kingType_"+t.type,this.txtLv.text=t.lv.toString();for(var i,n,s=1;5>s;s++)i=this["star_"+s],n=2>=s?"kingStar_l":"kingStar_r",s<=e.exp&&(n+=2),i.source=n;this._effect&&(this._effect.dispose(),this._effect=null)},n.showEffect=function(e){var t=this;this._effect&&(this._effect.dispose(),this._effect=null);var i=KingModel.getInstance().getKingVo(e.level);this.imageIcon.source="kingType_"+i.type,this.txtLv.text=i.lv.toString();for(var n,s,a=1;5>a;a++)n=this["star_"+a],s=2>=a?"kingStar_l":"kingStar_r",a<=e.exp&&(s+=2),n.source=s;e.flag>0?this._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("star"),this.txtLv.x+15,this.txtLv.y+15,this.effectSp,80):this._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("star2"),this.txtLv.x+15,this.txtLv.y+50,this.effectSp,80),clearTimeout(this._timeIdx),this._timeIdx=setTimeout2(function(){var i=KingModel.getInstance().getKingVo(e.new_level);t.imageIcon.source="kingType_"+i.type,t.txtLv.text=i.lv.toString();for(var a=1;5>a;a++)n=t["star_"+a],s=2>=a?"kingStar_l":"kingStar_r",a<=e.new_exp&&(s+=2),n.source=s},1500),clearTimeout(this._timeIdx2),this._timeIdx2=setTimeout2(function(){t.dispose()},2e3)},n.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this)},t}(BaseView);egret.registerClass(KingStarView,"KingStarView");var KingTiaozhanView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/king/KingTiaozhanSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.addGlobalEventListener(KingEvtName.CCMD18300_UPDATE,this.updateData,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.txtBuy.htmlText="<u>购买次数>></u>",this.txtBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this)},n.updateData=function(e){var t=e.data;this._data=t;var i=KingModel.getInstance().getKingVo(t.level);this.txtName.text=i.name,this.txtSheng.text="净胜场："+t.win_num,this.item.data=KingModel.getInstance().getKingLvVo(i.type).info;var n=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18301).value);this._data.rec_time>0?(this.txtCount.text="剩余次数："+this._data.num+"/"+n+"（恢复计时："+TimeUtil.getTime(this._data.rec_time)+"）",TimerManager.getInstance().remove(1e3,this.onShowTime,this),TimerManager.getInstance().add(1e3,this.onShowTime,this)):this.txtCount.text="剩余次数："+this._data.num+"/"+n,this.btnGet.enabled=this._data.num>0,this._starView?this._starView.updateData():(this._starView=new KingStarView,this._starView.x=140,this.addChild(this._starView))},n.onShowTime=function(){this._data.rec_time--;var e=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18301).value);this._data.rec_time>0?this.txtCount.text="剩余次数："+this._data.num+"/"+e+"（恢复计时："+TimeUtil.getTime(this._data.rec_time)+"）":(this.btnGet.enabled=!0,this.txtCount.text="剩余次数："+this._data.num+"/"+e,TimerManager.getInstance().remove(1e3,this.onShowTime,this))},n.onGet=function(){return SceneModel.getInstance().isHookSmall()||SceneModel.getInstance().isMainCity()?void this.dispatchGlobalEvent(new ParamEvent(KingEvtName.CCMD18310)):void Message.show("只有在挂机场景或主城才能匹配")},n.onBuy=function(){var e=this,t=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18308).value);if(RoleModel.getInstance().CheckGold(t)){var i=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18307).value),n=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_38),s="确定花费"+ColorUtil.getColorHtmlStr(t,ColorUtil.COLOR_GOLD)+"元宝购买1次王者争霸挑战次数吗?\n今日已购买："+n+"/"+i;GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"",content:s,func:function(){e.dispatchGlobalEvent(new ParamEvent(KingEvtName.CCMD18301))}}))}},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(KingEvtName.CCMD18300_UPDATE,this.updateData,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.txtBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),TimerManager.getInstance().remove(1e3,this.onShowTime,this),this._starView&&(this._starView.parent&&this._starView.parent.removeChild(this._starView),this._starView=null)},t}(BaseView);egret.registerClass(KingTiaozhanView,"KingTiaozhanView");var KingWeekItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/king/KingWeekItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this)},n.onGet=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(KingEvtName.CCMD18332,this._rankData.rank))},n.dataChanged=function(){this._rankData=this.data,this.txtName.text=this._rankData.role_name;var e=KingModel.getInstance().getKingVo(this._rankData.level);this.icon.source="kingType_s_"+e.type,this.txtLv.text=e.lv.toString(),this.item.data=KingModel.getInstance().getKingTopVo(this._rankData.rank).info,this.btnGet.visible=this._rankData.role_id==RoleModel.getInstance().getRoleCommon().role_id&&4==e.type&&this._rankData.rank<=5,this._rankData.rank<=3&&this._rankData.rank>0?(this.rankIcon||(this.rankIcon=new PicLoader,this.rankIcon.x=35,this.rankIcon.y=35),this.addChild(this.rankIcon),this.rankIcon.load("resource/assets/icon/king/rankIcon_"+this._rankData.rank+".png"),this.txtRank.text=""):(this.txtRank.text=this._rankData.rank.toString(),this.rankIcon&&(this.rankIcon.dispose(),this.rankIcon=null))},t}(eui.ItemRenderer);egret.registerClass(KingWeekItem,"KingWeekItem");var KingWeekItem2=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/king/KingWeekItemSkin2.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.head.setHeadURLByPartner(0,1,1)},n.dataChanged=function(){var e=["","青铜级别","白银级别","黄金级别","钻石级别"],t=this.data;this.txtName.text=e[t],this.icon.source="kingType_s_"+t,this.item.data=KingModel.getInstance().getKingLvVo(t).info,this.head.setHeadKingBg(t)},t}(eui.ItemRenderer);egret.registerClass(KingWeekItem2,"KingWeekItem2");var KingWeekView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/king/KingWeekViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.addGlobalEventListener(KingEvtName.CCMD18330_UPDATE,this.updateData,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this);for(var e=new eui.ArrayCollection,t=4;t>0;t--)e.addItem(t);this.ranklist2.dataProvider=e},n.onGet=function(){this.dispatchGlobalEvent(new ParamEvent(KingEvtName.CCMD18331))},n.updateData=function(e){var t=e.data,i=t.king_ranks;i.length>0&&i.sort(function(e,t){return e.rank<t.rank?-1:1});for(var n=new eui.ArrayCollection,s=0;s<i.length;s++)i[s].rank<=5&&n.addItem(i[s]);this.ranklist.dataProvider=n,this.txtTips.visible=0==i.length;var a=KingModel.getInstance().getKingVo(t.level);a?(this.icon2.source="kingType_s_"+a.type,this.txtLv2.text=a.lv.toString(),this.icon2.visible=!0,this.txtLv2.visible=!0,this.btnGet.visible=!0):(this.icon2.visible=!1,this.txtLv2.visible=!1,this.btnGet.visible=!1);var o=KingModel.getInstance().getData(),r=KingModel.getInstance().getKingVo(o.level);this.icon.source="kingType_s_"+r.type,this.txtLv.text=r.lv.toString()},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(KingEvtName.CCMD18330_UPDATE,this.updateData,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this)},t}(BaseView);egret.registerClass(KingWeekView,"KingWeekView");var KingWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/king/KingWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_king"),this.tabBar.dataProvider=new eui.ArrayCollection(["挑战","排名","上周"]),this.setSelectIndex()},n.onBarItemTap=function(e){this.setSelectIndex(this.tabBar.selectedIndex)},n.onHelp=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.KING))},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2021,this.onShowRedDots,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2022,this.onShowRedDots,this),this.tabBar.validateNow(),this.onShowRedDots()},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this.removeGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2021,this.onShowRedDots,this),this.removeGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2022,this.onShowRedDots,this),this._view&&(this._view.parent&&this._view.parent.removeChild(this._view),this._view.dispose(),this._view=null),this._tiaozhan&&(this._tiaozhan.parent&&this._tiaozhan.parent.removeChild(this._tiaozhan),this._tiaozhan.dispose(),this._tiaozhan=null),this._rank&&(this._rank.parent&&this._rank.parent.removeChild(this._rank),this._rank.dispose(),this._rank=null),this._week&&(this._week.parent&&this._week.parent.removeChild(this._week),this._week.dispose(),this._week=null)},n.setSelectIndex=function(e){switch(void 0===e&&(e=0),this.tabBar.selectedIndex=e,this._view&&this._view.parent&&this._view.parent.removeChild(this._view),e){case 0:this._tiaozhan||(this._tiaozhan=new KingTiaozhanView),this._view=this._tiaozhan,this.dispatchGlobalEvent(new ParamEvent(KingEvtName.CCMD18300));break;case 1:this._rank||(this._rank=new KingRankView),this._view=this._rank,this.dispatchGlobalEvent(new ParamEvent(KingEvtName.CCMD18320));break;case 2:this._week||(this._week=new KingWeekView),this._view=this._week,this.dispatchGlobalEvent(new ParamEvent(KingEvtName.CCMD18330))}this.viewContainer.addChild(this._view)},n.onShowRedDots=function(){this.tabBar.getChildAt(0).showRedDot=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2021),this.tabBar.getChildAt(2).showRedDot=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2022)},t}(LayeroutWindow);egret.registerClass(KingWindow,"KingWindow");var KuaFuBossAwakeItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/boss/BossAllItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=this;e.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGetClick,e),e.txtKill.htmlText="<u>击杀排行</u>",e.txtHit.htmlText="<u>伤害排行</u>",e.txtKill.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onShowKill,e),e.txtHit.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onShowHit,e),e.txtKill.visible=!1,e.txtHit.visible=!1,e.bmHead=new PicLoader,e.headGroup.addChild(e.bmHead),e.txtPoint.visible=!0,e.txtHp.visible=!1,e.hpBg.visible=!1,e.hpBar.visible=!1},n.onShowKill=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.OPEN_BOSS_ALL_KILL,this._bossData.kfboss_awake_kills))},n.onShowHit=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.OPEN_BOSS_ALL_HIT,this._bossData.kfboss_awake_hits))},n.onGetClick=function(){this._bossVo&&(BossModel.getInstance().kfBossID=this._bossVo.template_id,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.CMD20110,this._bossVo.template_id)))},n.dataChanged=function(){this._bossVo=this.data;var e=AwakeModel.getInstance().getLevelByScore();this.txtPoint.htmlText=ColorUtil.getColorHtmlStr("评级限制："+this._bossVo.limit_class,this._bossVo.limit_class>e?ColorUtil.COLOR_RED:ColorUtil.COLOR_GREEN),this.bmHead.load(UrlUtil.getBossHead(SceneModel.getInstance().getMonsterConfig(this._bossVo.boss_id).resID.toString())),this.txtName.text=this._bossVo.boss_name;for(var t,i=0;i<this._bossVo.itemList.length;i++)t=this["item_"+i],t.data=this._bossVo.itemList[i].info;this._bossData=BossModel.getInstance().getBossAwakeDataById(this._bossVo.template_id),this._bossData?(this.txtCount.text=this._bossData.kfboss_awake_hits.length+"人",this.txtHp.text=this._bossData.hp_rate+"/100",this.hpBar.scaleX=this._bossData.hp_rate/100):(this.txtCount.text="0人",this.txtHp.text="100/100",this.hpBar.scaleX=1),RoleModel.getInstance().getRoleCommon().level<this._bossVo.open_level?(this.btnGet.visible=!1,this.txtTips.text=this._bossVo.open_level+"级开启",this.tipGroup.visible=!0):RoleModel.getInstance().getRoleCommon().round<this._bossVo.open_round?(this.btnGet.visible=!1,this.txtTips.text=this._bossVo.open_round+"转开启",this.tipGroup.visible=!0):(this.btnGet.visible=!0,this.tipGroup.visible=!1),this._bossData&&this._bossData.hp_rate>0?(this.btnGet.visible=!0,this.txtTime.text=""):(this.btnGet.visible=!1,this.txtTime.htmlText="下次刷新时间\n"+ColorUtil.getColorHtmlStr((new Date).getHours()+1+"点整",ColorUtil.COLOR_GREEN))},n.dispose=function(){},t}(eui.ItemRenderer);egret.registerClass(KuaFuBossAwakeItem,"KuaFuBossAwakeItem");var KuaFuBossAwakeView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kuafu/KuaFuBossAwakeViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiCompHandler,e),e.addGlobalEventListener(BossEvtName.CMD20100_UPDATE,e.updateData,e),e.addGlobalEventListener(BossEvtName.CMD20101_UPDATE,e.updateList,e);var t=GoodsListProxy.getInstance().findGoodNumber(17520006);e.txtBack.htmlText="挑战令（"+t+"/1）"},n.updateList=function(){for(var e=BossModel.getInstance().getBossAwakeList(),t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this.bossList.dataProvider=t},n.updateData=function(e){this._bossInfo=e.data;var t=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_20104).value);this.txtCount.text=this._bossInfo.bat_num+"/"+t,this._bossInfo.last_time>0?(this.txtTime.text="恢复时间："+TimeUtil.getTime(this._bossInfo.last_time),TimerManager.getInstance().remove(1e3,this.timeComplete,this),TimerManager.getInstance().add(1e3,this.timeComplete,this)):this.txtTime.text=""},n.timeComplete=function(){this._bossInfo.last_time--,this._bossInfo.last_time<=0?(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.txtTime.text=""):this.txtTime.text="恢复时间："+TimeUtil.getTime(this._bossInfo.last_time)},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(BossEvtName.CMD20100_UPDATE,this.updateData,this),this.removeGlobalEventListener(BossEvtName.CMD20101_UPDATE,this.updateList,this),this._bossInfo&&this._bossInfo.last_time>0&&TimerManager.getInstance().remove(1e3,this.timeComplete,this);for(var t=0;t<this.bossList.numChildren;t++){var i=this.bossList.getChildAt(t);i&&i.dispose()}},t}(BaseView);egret.registerClass(KuaFuBossAwakeView,"KuaFuBossAwakeView");var KuaFuBossWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/kuafu/KuaFuBossWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this);this.setImageWindowTitle("title_kfboss"),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this.tabBar.dataProvider=new eui.ArrayCollection(["觉醒"]),this._isInit||(this._isInit=!0,this.setSelectIndex())},n.onHelp=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.BOSS_KF))},n.onBarItemTap=function(e){this.setSelectIndex(this.tabBar.selectedIndex)},n.setSelectIndex=function(e){if(void 0===e&&(e=0),this._isInit){switch(this.tabBar.selectedIndex=e,this._curView&&this._curView.parent&&this._curView.parent.removeChild(this._curView),e){case 0:null==this._guild&&(this._guild=new KuaFuBossAwakeView),this._curView=this._guild}this.contentGroup.addChild(this._curView)}},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.tabBar.validateNow()},n.dispose=function(){e.prototype.dispose.call(this),this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this._guild&&(this._guild&&this._guild.parent&&this._guild.parent.removeChild(this._guild),this._guild.dispose(),this._guild=null)},t}(LayeroutWindow);egret.registerClass(KuaFuBossWindow,"KuaFuBossWindow");var KuaFuMapView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/kuafu/KuaFuMapViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturn,this),this.imageBg=new PicLoader,ConfigManager.isBigScene()?this.imageBg.load("resource/assets/icon/kuafu/KuaFuMap2.jpg"):this.imageBg.load("resource/assets/icon/kuafu/KuaFuMap.jpg"),this.addChildAt(this.imageBg,0);for(var e,t=1;6>=t;t++)e=this["Btn_"+t],e.data=t,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick,this)},n.onReturn=function(){this.dispatchEvent(new ParamEvent(EventName.WINDOW_DISPOSE)),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_SHOW_RIGHTTOP,{state:!0})),KuaFuModel.getInstance().isKuaFuShow=!1,this.dispose()},n.onBtnClick=function(e){var t=e.$currentTarget;GameDispatcher.getInstance().dispatchEvent(new ParamEvent(KuaFuEvtName.KUAFU_OPEN_VIEW,t.data))},n.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this.btnReturn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturn,this);for(var t,i=1;6>=i;i++)t=this["Btn_"+i],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick,this);this.imageBg&&(this.imageBg.dispose(),this.imageBg=null)},t}(BaseView);egret.registerClass(KuaFuMapView,"KuaFuMapView");var KuaFuShopWindow=function(e){function t(){e.call(this);var t=this;t.skinName="resource/game_skins/kuafu/KuaFuShopWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this);var t=this;t.setImageWindowTitle("title_kuafu_shop"),t._shopView||(t._shopView=new MallContent2),t.contentGroup.addChild(this._shopView),t._shopView.updateData(MallModel.MALL_TYPE_5)},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t._shopView&&(t._shopView.parent&&t._shopView.parent.removeChild(t._shopView),t._shopView.onCloseHandler(),t._shopView=null)},t}(LayeroutWindow);egret.registerClass(KuaFuShopWindow,"KuaFuShopWindow");var GameStartView=function(e){function t(){e.call(this),this.mSkin='<?xml version="1.0" encoding="utf-8"?>\n<e:Skin class="StartGameViewSkin" width="640" height="1136" xmlns:e="http://ns.egret.com/eui" xmlns:ns1="*" xmlns:w="http://ns.egret.com/wing">\n	<ns1:CustomButton id="_btnNotice" label="" x="499" y="14">\n		<ns1:skinName>\n			<e:Skin states="up,down,disabled">\n			<e:Image width="100%" height="100%" source="gameStart_json.gameStart_notice" source.down="gameStart_json.gameStart_notice" source.disabled="gameStart_json.gameStart_notice"/>\n			<e:Label id="labelDisplay" horizontalCenter="0" verticalCenter="0"/>\n			</e:Skin>\n		</ns1:skinName>\n	</ns1:CustomButton>\n	<ns1:CustomLabel id="_txtServerName" text="" x="113" y="916" size="25" textColor="0xE7D0B7" fontFamily="Microsoft YaHei" width="245" textAlign="right"/>\n	<ns1:CustomLabel id="_txtLink" text="选区" x="385" y="916" size="25" fontFamily="Microsoft YaHei" width="88" textColor="0x31d968"/>\n	<ns1:CustomButton id="_btnStart" label="" x="192" y="994">\n		<ns1:skinName>\n			<e:Skin states="up,down,disabled">\n			<e:Image width="100%" height="100%" source="gameStart_json.gameStart_btnStart" source.down="gameStart_json.gameStart_btnStart" source.disabled="gameStart_json.gameStart_btnStart"/>\n			<e:Label id="labelDisplay" horizontalCenter="0" verticalCenter="0"/>\n			</e:Skin>\n		</ns1:skinName>\n	</ns1:CustomButton>\n</e:Skin>',this.skinName=this.mSkin,this.uiCompHandler()
}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._btnNotice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNoticeHandler,this),this._btnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartHandler,this),this._txtLink.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this.updateInfoHandler(),this._txtLink.htmlText="<u><a href = 'event:2'>选区</a></u>"},n.onTxtLinkHandler=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.SHOW_SERVER_LIST))},n.onNoticeHandler=function(){null==this._noticeView&&(this._noticeView=new LoginNoticeView),this._noticeView.isPop2=!0},n.updateInfoHandler=function(){var e;e=LoginModel.getInstance().last_login_server>0?LoginModel.getInstance().getLoginServerVO(LoginModel.getInstance().last_login_server):LoginModel.getInstance().getBestNewServerVO(),this._vo=e,e&&(ConfigManager.server_id=e.server_id),e&&(this._txtServerName.text=e.server_name)},n.onStartHandler=function(e){if(this._vo){if(2==this._vo.status)return;LoginModel.getInstance().enterGameHandler(this._vo)}},t}(BaseView);egret.registerClass(GameStartView,"GameStartView");var LoginView=function(e){function t(){e.call(this),this.mSkin='<?xml version="1.0" encoding="utf-8"?>\n<e:Skin class="login" xmlns:e="http://ns.egret.com/eui" xmlns:ns1="*" xmlns:w="http://ns.egret.com/wing">\n	<!--<e:Image source="bg_jpg" x="0" y="0"/>-->\n	<e:TextInput id="plat_id" width="200" height="50" x="260" y="58" text=""/>\n	<e:TextInput id="plat_ip" width="200" height="50" x="260" y="166" text="192.168.0.120"/>\n	<e:TextInput id="plat_port" width="200" height="50" x="260" y="262" text="8030"/>\n	<e:TextInput id="txtServerID" width="200" height="50" x="260" y="329" text="1"/>\n	<e:Button id="btnEnter" label="开始游戏" x="294" y="398" anchorOffsetX="0" width="142"/>\n	<e:Label id="txt1" text="用户ID" x="94" y="68" anchorOffsetX="0" width="160" anchorOffsetY="0" height="30" textColor="0xef1023" bold="true" size="30" textAlign="left"/>\n	<e:Label id="txt2" text="服务器IP" x="94" y="176" anchorOffsetX="0" width="160" anchorOffsetY="0" height="30" textColor="0xEF1023" bold="true" size="30" textAlign="left"/>\n	<e:Label id="txt3" text="服务器端口" x="94" y="272" anchorOffsetX="0" width="160" anchorOffsetY="0" height="30" textColor="0xEF1023" bold="true" size="30" textAlign="left"/>\n	<e:Label id="txt4" text="服务器ID" x="94" y="342" anchorOffsetX="0" width="160" anchorOffsetY="0" height="30" textColor="0xEF1023" bold="true" size="30" textAlign="left"/>\n</e:Skin>',this.skinName="resource/game_skins/login/login.exml",this.uiCompHandler()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.btnEnter.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this),this.plat_ip.text=AllParamObj.ip,this.plat_port.text=AllParamObj.port,ConfigManager.server_id>0&&(this.txtServerID.text=ConfigManager.server_id+"");var e=Tools.getPageParams("clear");"1"==e&&this.clear()},n.onButtonClick=function(e){var t=this.plat_id.text;return""==t||"请输入ID"==t?void(this.plat_id.text="请输入ID"):(ConfigManager.plat_id=t,ConfigManager.plat_ip=this.plat_ip.text,ConfigManager.plat_port=Number(this.plat_port.text),ConfigManager.server_id=parseInt(this.txtServerID.text),ConfigManager.isHttpPostMode?(PhpHttpStatisticsManager.requestServerList(),this.parent&&this.parent.removeChild(this),void this.onCloseHandler()):(LoginControl.getInstance(),CreateControl.getInstance(),RenderManager.start(),void GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.START_LOADGAME_RESOURCE))))},n.clear=function(){var e=this;e.plat_ip.visible=!1,e.txtServerID.visible=!1,e.plat_port.visible=!1,e.txt2.visible=!1,e.txt3.visible=!1,e.txt4.visible=!1,e.btnEnter.y=198},t}(BaseView);egret.registerClass(LoginView,"LoginView");var SelectServerView=function(e){function t(){e.call(this),this._itemArr=[],this._selectedTabIndex=0,this.mSkin='<?xml version="1.0" encoding="utf-8"?>\n<e:Skin class="SelectServerViewSkin" width="620" height="979" xmlns:e="http://ns.egret.com/eui" xmlns:ns1="*" xmlns:w="http://ns.egret.com/wing">\n	<ns1:LayeroutWindowSkin id="panelSkin" width="100%" height="100%" x="0" y="0">\n		<ns1:CustomImage source="share_json.share_vline2" x="206" y="75" height="918"/>\n		\n		<e:TabBar id="_tabBar" width="166" height="55" x="23" y="92" anchorOffsetY="0" itemRenderer="CustomItemRenderer" itemRendererSkinName="CustomTabItemSkin3Skin"/>\n		<e:Scroller id="_scroller" width="367" height="898" x="233" y="84" anchorOffsetY="0" anchorOffsetX="0">\n			<e:Group id="_itemContainer" x="2" y="-6"/>\n		</e:Scroller>\n	</ns1:LayeroutWindowSkin>\n	\n	\n	\n	\n</e:Skin>',this.skinName=this.mSkin,this.uiCompHandler()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this._tabBar.dataProvider=new eui.ArrayCollection(["201-400服","201-400服"]);var t=new eui.VerticalLayout;this._tabBar.layout=t,this._tabBar.selectedIndex=0;var i=new eui.VerticalLayout;this._itemContainer.layout=i,this.windowBgBottom=-20,this.getBtnReturn().visible=!1,this.setImageWindowTitle("serverSelect_title")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_SERVER_LIST,this.updateTabInfoHandler,this),this.updateTabInfoHandler()},n.onCloseHandler=function(){GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_SERVER_LIST,this.updateTabInfoHandler,this),this._tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.clearItems(),e.prototype.onCloseHandler.call(this)},n.onBarItemTap=function(e){this.updateRightInfoHandler()},n.clearItems=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e.dispose();this._itemArr=[]},n.updateRightInfoHandler=function(){this.clearItems();var e,t,i,n=this._tabBar.selectedItem;i=0==n.flag?LoginModel.getInstance().getLastServerVOList():LoginModel.getInstance().server_info;for(var s=0;s<i.length;s++)t=i[s],e=new ServerListItem,e.setData(t),this._itemArr.push(e),this._itemContainer.addChild(e)},n.updateTabInfoHandler=function(){var e=[];null!=LoginModel.getInstance().last_login_server_list&&LoginModel.getInstance().getLastServerVOList().length>0&&e.push({label:"最近登录",flag:0});for(var t=LoginModel.getInstance().server_group_count,i=0;t>i;i++){var n=i*LoginModel.getInstance().server_gap+1;e.push({label:n+"区-"+n*LoginModel.getInstance().server_gap+"区",flag:n})}this._tabBar.dataProvider=new eui.ArrayCollection(e),this.setTabIndex(0),this.onBarItemTap(null)},n.setTabIndex=function(e){this._selectedTabIndex=e,this._tabBar.selectedIndex=this._selectedTabIndex},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=77},t}(LayeroutWindow);egret.registerClass(SelectServerView,"SelectServerView");var ServerListItem=function(e){function t(){e.call(this),this.mSkin='<?xml version="1.0" encoding="utf-8"?>\n<e:Skin class="ServerListItemSkin" width="343" height="59" xmlns:e="http://ns.egret.com/eui" xmlns:ns1="*" xmlns:w="http://ns.egret.com/wing">\n<ns1:CustomImage id="_imgBg"  source="comp_json.comp_btn10"/>\n<ns1:CustomImage id="_imageState" source="gameStart_json.gameStart_hot"/>\n	<ns1:CustomLabel id="_txtName" text="传世英雄333服" x="22" y="16" width="300" textAlign="center" textColor="0xdbc7b0" fontFamily="Microsoft YaHei" size="26"/>\n</e:Skin>',this.skinName=this.mSkin,this.uiCompHandler()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this)},n.setData=function(e){this._vo=e,this._txtName.text=this._vo.server_name,1==this._vo.status?(this._imageState.source=RES.getRes("gameStart_json.gameStart_hot"),this._imgBg.filters=[],this._txtName.filters=[]):2==this._vo.status&&(this._imageState.source=RES.getRes("gameStart_json.gameStart_maintenance"),this._imgBg.filters=[Tools.GrayFilter],this._txtName.filters=[Tools.GrayFilter])},n.onClickHandler=function(){2!=this._vo.status&&LoginModel.getInstance().enterGameHandler(this._vo)},n.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),this.parent&&this.parent.removeChild(this)},t}(Csprite);egret.registerClass(ServerListItem,"ServerListItem");var LoginRewardWindow=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/loginReward/LoginRewardSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.LOGIN_REWARD,this.windowBgBottom=-20},n.updateData=function(e){this._day=e.data.day,this._award_id=e.data.award_id,this.txtDay.text=this._day.toString();for(var t,i,n=1;8>=n;n++)t=this["box_"+n],t.name="box_"+n,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBoxClick,this),i=this["lingqu_"+n],this._award_id>=n&&(i.visible=!0,2!=n&&7!=n&&8!=n&&(t.source="loginRewardBox_open"));var s=LoginRewardModel.getInstance().getIdByDay(this._day);this._award_id<s?(this.btnGet.label="领取奖励",this.btnGet.enabled=!0):(this.btnGet.label="已领取",this.btnGet.enabled=!1),this.updateReward(8==this._award_id?8:this._award_id+1)},n.onBoxClick=function(e){var t=e.currentTarget.name.split("_")[1];this.updateReward(t)},n.updateReward=function(e){this._vo=LoginRewardModel.getInstance().getRewardVoById(e),this._itemFly=[];for(var t=new eui.ArrayCollection,i=0;i<this._vo.itemList.length;i++)t.addItem(this._vo.itemList[i]),this._itemFly.push(this._vo.itemList[i].info.pic);this.rewardList.dataProvider=t},n.onGetClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(LoginRewardEvtName.LOGIN_REWARD_CCMD12701)),AccessGoodFlyEffectManager.getInstance().flyArray(this._itemFly)},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_loginReward")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.addGlobalEventListener(LoginRewardEvtName.LOGIN_REWARD_CCMD12700_UPDATE,this.updateData,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.removeGlobalEventListener(LoginRewardEvtName.LOGIN_REWARD_CCMD12700_UPDATE,this.updateData,this)},t}(LayeroutWindow);egret.registerClass(LoginRewardWindow,"LoginRewardWindow");var LunhuiWindow=function(e){function t(){e.call(this),this._strArr=["一","股","神","秘","力","量\n","将","你","送","回","第","一","关"],this._strArr2=["小","心！","这","是","一","款\n","利","用","轮","回，","无","限\n","送","元","宝","的","游","戏！"],this.skinName="resource/game_skins/lunhui/LunhuiViewSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiCompHandler=function(){e.prototype.uiCompHandler.call(this);var t=this;t.resGroupName=GModuleResGroupName.LUNHUI,t._isInit||(t._isInit=!0,t.updateData()),t._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("lunhui"),0,0,t.effectSp,80,!0)},s.updateData=function(){var e=this;if(e._isInit){var t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_11),i=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_48).value)+VipModel.getInstance().getVipVoByLv().vip_circle;FanLiModel.getInstance().isCircleCarnivalOpen()&&(i+=FanLiModel.getInstance().getCircleAddTimeByVip(VipModel.getInstance().getVIPLevel())),e.txtDay.htmlText="今日可轮回<font color='#00d228'>"+(i-t)+"</font>次";var n,s=VipModel.getInstance().getVIPLevel();n=6>s?6:s>9?10:s+1,e.txtVip.htmlText="成为<font color='#ffd200'>VIP"+n+"</font>每日可额外轮回<font color='#00d228'>"+VipModel.getInstance().getVipVoByLv(n).vip_circle+"</font>次";var a=SceneModel.getInstance().getCurrentWaveID(),o=LunhuiModel.getInstance().getVoById(SceneModel.getInstance().getSceneWave().total_circle+1).need_hook,r="本次轮回需通过关卡数："+ColorUtil.getColorHtmlStr(a+"/"+o,o>a?ColorUtil.COLOR_RED:ColorUtil.COLOR_GOLD);a>=o&&(r+="<font color='#00d228'>（已达标）</font>"),e.txtCount.htmlText=r;var h=LunhuiModel.getInstance().getVoById(1).need_hook,l=GoodsListProxy.getInstance().getGoodsInfoByType(13100002),d=GoodsListProxy.getInstance().findGoodNumber(13100002);e.checkBox.label=l.name+"（"+d+"/1）",e.checkBox.enabled=d>0&&a>=h&&i>t,e.btnGet.enabled=(a>=o||e.checkBox.enabled&&e.checkBox.selected)&&i>t}},s.onClick=function(e){var t=this;t.btnGet.enabled=!1,t.dispatchGlobalEvent(new ParamEvent(EventName.REQUEST_LUNHUI,t.checkBox.selected?1:0)),t.showEffect(2),t.dispatchGlobalEvent(new ParamEvent(EventName.CLOSE_CITY_VIEW)),t.dispatchGlobalEvent(new ParamEvent(FuLiEvtName.SHOW_SHARENEW_VIEW,1))},s.showEffect=function(e){void 0===e&&(e=1);var t=this;t._effBg||(t._effBg=new CustomImage,t._effBg.source="share_black",t._effBg.width=GameContent.stageWidth,t._effBg.height=GameContent.stageHeight,t._effBg.scale9Grid=new egret.Rectangle(1,1,48,48)),GameContent.gameLayers.topLayer.addChild(t._effBg),t._effTxt||(t._effTxt=new CustomLabel,t._effTxt.size=70,t._effTxt.textColor=16765440,t._effTxt.bold=!0,t._effTxt.textAlign="center",t._effTxt.width=600,t._effTxt.height=500),t._effTxt.y=GameContent.stageHeight/2-t._effTxt.height/2,GameContent.gameLayers.topLayer.addChild(t._effTxt),t._time=0,t._effecStr="",2==e?TimerManager.getInstance().add(300,t.timeComplete,t):TimerManager.getInstance().add(300,t.timeComplete2,t)},s.timeComplete=function(){var e=this;e._time<=12&&(e._effecStr+=e._strArr[e._time],e._effTxt.text=e._effecStr),e._time>=20&&(TimerManager.getInstance().remove(300,e.timeComplete,e),e._effBg&&e._effBg.parent&&e._effBg.parent.removeChild(e._effBg),e._effTxt&&e._effTxt.parent&&e._effTxt.parent.removeChild(e._effTxt),e.isPop=!1),e._time++},s.timeComplete2=function(){var e=this;e._time<=17&&(e._effecStr+=e._strArr2[e._time],e._effTxt.text=e._effecStr),e._time>=21&&(TimerManager.getInstance().remove(300,e.timeComplete2,e),e._effBg&&e._effBg.parent&&e._effBg.parent.removeChild(e._effBg),e._effTxt&&e._effTxt.parent&&e._effTxt.parent.removeChild(e._effTxt)),e._time++},i(s,"width",function(){return 620}),s.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this);var t=this;t.setImageTitle("title_lunhui")},s.onHelp=function(e){var t=this;t.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.LUNHUI))},s.onChangeCheck=function(){var e=this;e.updateData()},s.onOpenHandler=function(){e.prototype.onOpenHandler.call(this);var t=this;t.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick,t),t.btnBack.enabled=t.checkBack(),t.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClickBack,t),t.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,t.updateData,t),t.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onHelp,t),t.checkBox.addEventListener(egret.TouchEvent.CHANGE,t.onChangeCheck,t)},s.dispose=function(){e.prototype.dispose.call(this);var t=this;t.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick,t),t.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onClickBack,t),t.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,t.updateData,t),t.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onHelp,t),t.checkBox.removeEventListener(egret.TouchEvent.CHANGE,t.onChangeCheck,t),t._effect&&(t._effect.dispose(),t._effect=null),t._effBg=null,t._effTxt=null},s.checkBack=function(){var e=SceneModel.getInstance().getSceneWave();return e.wave_id<e.total_wave_id},s.onClickBack=function(e){SceneModel.getInstance().lunHuiBack()},t}(LayeroutWindow);egret.registerClass(LunhuiWindow,"LunhuiWindow");var MagicView=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.update=function(){},t}(BaseView);egret.registerClass(MagicView,"MagicView");var MagicPetAttrView=function(e){function t(){e.call(this),this.skinName="resource/game_skins/magicPet/MagicPetAttrViewSkin.exml",this.btnActive&&this.btnActive.parent&&this.btnActive.parent.removeChild(this.btnActive),this.btnActive.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toActive,this),this.btnGrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toGrade,this),this.btnLevel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toLevel,this),this.txtCon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toTargetView,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.update=function(){e.prototype.update.call(this);var t=MagicPetModel.getInstance().getCurPetData(),i=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_23303).value),n=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_23306).value);if(t.active){if(this.txtCon.visible=!1,this.btnActive.visible=!1,this.txtGrade.visible=!0,this.txtItem.visible=!0,this.btnGrade.visible=!0,this.btnLevel.visible=!0,t.level<i){var s=MagicPetModel.getInstance().getLevelConfigById(t.pet_id,t.level+1),a=s.con_item.match(/\d+/g);this.levelItemId=Number(a[0]);var o=GoodsListProxy.getInstance().getGoodsInfoByType(this.levelItemId),r=GoodsListProxy.getInstance().findGoodNumber(o.template_id);this.levelEnough=r>=Number(a[1]),this.txtItem.htmlText=HtmlUtil.font(o.name+"："+HtmlUtil.font(r+"/"+a[1],r>=Number(a[1])?ColorUtil.COLOR_GREEN:ColorUtil.COLOR_RED),ColorUtil.COLOR_ORANGE)}else this.txtItem.htmlText=HtmlUtil.font("当前已是最高级",ColorUtil.COLOR_ORANGE);if(t.calss<n){var h=MagicPetModel.getInstance().getConfigByGrade(t.pet_id,t.calss),l=MagicPetModel.getInstance().getConfigByGrade(t.pet_id,t.calss+1);if(t.level==h.limit_lv){this.gradeAble=t.level==h.limit_lv;var a=l.con_item.match(/\d+/g);this.gradeItemId=Number(a[0]);var o=GoodsListProxy.getInstance().getGoodsInfoByType(this.gradeItemId),d=GoodsListProxy.getInstance().findGoodNumber(o.template_id);this.gradeEnough=d>Number(a[1]);var _=HtmlUtil.font("消耗升阶石："+HtmlUtil.font(d+"/"+a[1],d>Number(a[1])?ColorUtil.COLOR_GREEN:ColorUtil.COLOR_RED),ColorUtil.COLOR_ORANGE);this.txtGrade.htmlText=_}else this.txtGrade.htmlText=HtmlUtil.font("等级未到，无法升阶",ColorUtil.COLOR_GOLD);this.txtCon.y=162}else this.txtGrade.htmlText=HtmlUtil.font("已满阶",ColorUtil.COLOR_GOLD)}else{this.txtCon.visible=!0,this.btnActive.visible=!0,this.txtGrade.visible=!1,this.txtItem.visible=!1,this.btnGrade.visible=!1,this.btnLevel.visible=!1;var _="",c=PKSkillModel.getInstance().getNeedByPetID(t.pet_id);_=StringUtil.substitute("目标点达到{0}   <u>前往获得目标点</u>",c),this.txtCon.htmlText=_,this.txtCon.y=190}var u=MagicPetModel.getInstance().getLevelConfigById(t.pet_id,t.level);if(this.txtCur.htmlText=this.addProperty(u,EquipBasic.PROPERTY_INDEX,"#FFE68E",!0),t.level<i){var p=MagicPetModel.getInstance().getLevelConfigById(t.pet_id,t.level+1);this.txtNext.htmlText=this.addProperty(p,EquipBasic.PROPERTY_INDEX,"#4EF700",!0)}else this.txtNext.htmlText="当前已是最高级"},n.addProperty=function(e,t,i,n,s){void 0===i&&(i="#e7d0b7"),void 0===n&&(n=!1),void 0===s&&(s=!1);for(var a=0,o=0,r="",h="",l=0;l<t.length;l++)h=t[l],a=null==e?0:e[h],o=l,!s&&0>=a||(r+=o>=5?"<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+a/100+"%</font>\n":"<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+a+"</font>\n");return r},n.toActive=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_ACTIVE))},n.toGrade=function(){if(this.gradeAble)GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_GRADE));else if(this.gradeEnough){var e=new ParamEvent(EventName.OPEN_GETMATERIAL_WINDOW);e.data={typeId:this.gradeItemId,type:GetMaterialItem.OPEN_PET_SHOP,linkStrArr:["魔宠特惠"]},this.dispatchGlobalEvent(e)}else Message.show("未满足升阶条件")},n.toLevel=function(){if(this.levelEnough)this.btnLevel.enabled=!1,egret.Tween.get(this.btnLevel).to({x:this.btnLevel.x},200).call(this.onComplete,this,[this.btnLevel]),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_LEVEL));else if(13130001==this.levelItemId){var e=new ParamEvent(EventName.OPEN_GETMATERIAL_BUY_WINDOW);e.data={typeId:this.levelItemId,type:"",linkStrArr:[""]},this.dispatchGlobalEvent(e)}else{var e=new ParamEvent(EventName.OPEN_GETMATERIAL_WINDOW);e.data={typeId:this.levelItemId,type:GetMaterialItem.OPEN_PET_SHOP,linkStrArr:["魔宠特惠"]},this.dispatchGlobalEvent(e)}},n.onComplete=function(e){e.enabled=!0},n.toTargetView=function(e){var t=new ParamEvent(ArtifactEvtName.ARTIFACT_OPEN_WINDOW);t.data={index:0,isOpen:!0},this.dispatchGlobalEvent(t)},t}(MagicView);egret.registerClass(MagicPetAttrView,"MagicPetAttrView");var MagicPetEquipView=function(e){function t(){e.call(this),this.headState=[1,0,0],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/magicPet/MagicPetEquipViewSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.txtLink.htmlText=HtmlUtil.link("获得途径"),this.txtLink.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toLink,this),this.btnShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toShow,this),this.btnUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toUp,this),this.btnAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toAuto,this),this.btnActive.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toActive,this),this.btnUpGrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toGrade,this),this.curStar=-1,this.headList=[];for(var e=0;3>e;e++){var t=new MagicPetWeaponItem(e+1);t.x=192*e,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHead,this),this.headCon.addChild(t),this.headList.push(t)}this.imgMark||(this.imgMark=new PicLoader,this.imgMark.x=500,this.imgMark.y=120,this.addChild(this.imgMark)),MagicPetModel.getInstance().curIndex=1,this.setFocus(this.curIndex),this.update()},s.onHead=function(e){this.setFocus(e.currentTarget.index)},s.setFocus=function(e){MagicPetModel.getInstance().curIndex=e;for(var t=0;t<this.headList.length;t++)this.headList[t].setFocus(this.headList[t].index==e);this.update()},s.update=function(){var e=MagicPetModel.getInstance().weaponList;if(e)for(var t=0;t<this.headList.length;t++)for(var i=0;i<e.length;i++)this.headList[t].index==e[i].weapon_type&&this.headList[t].update(e[i].stage);this.setEffect(),this.imgPoem||(this.imgPoem=new PicLoader,this.imgPoem.x=60,this.imgPoem.y=120,this.addChild(this.imgPoem)),this.imgPoem.load("resource/assets/icon/pet/poem"+this.curIndex+".png");var n=MagicPetModel.getInstance().getWeaponDate(this.curIndex);0!=n.stage&&this.imgMark.load("resource/assets/icon/pet/mark_"+n.stage+".png"),this.btnShow.label=1==n.is_show?"隐藏":"显示",this.btnActive.visible=0==n.stage,0==n.stage&&(this.txtCur.text=this.txtNext.text=""),this.proBar.visible=this.proBar.visible=this.txtCur.visible=this.txtNext.visible=this.txtItem.visible=this.txtLink.visible=this.btnUp.visible=this.btnAuto.visible=this.btnShow.visible=this.starCon.visible=!0,this.btnUpGrade.visible=!1;var s=!0,a=MagicPetModel.getInstance().getWeaponConfig(n.weapon_type,n.stage+1,0);if((10==n.star&&a||0==n.stage)&&(this.proBar.visible=this.proBar.visible=this.txtCur.visible=this.txtNext.visible=this.txtItem.visible=this.txtLink.visible=this.btnUp.visible=this.btnAuto.visible=this.btnShow.visible=this.starCon.visible=!1,this.btnUpGrade.visible=a&&10==n.star,s=!1),s){this.btnAuto.label=MagicPetModel.getInstance().weaponUpAuto?"停止":"自动进阶",this.setStar(n.star);var o=MagicPetModel.getInstance().getWeaponConfig(n.weapon_type,n.stage,n.star);if(o){this.proBar.maximum=o.luck_limit,this.proBar.value=n.exp;var r=MagicPetModel.getInstance().getWeaponConfig(n.weapon_type,n.stage,n.star+1);this.txtCur.htmlText=this.addProperty(o,EquipBasic.PROPERTY_INDEX,"#FFE68E",!0),this.txtNext.htmlText=r?this.addProperty(r,EquipBasic.PROPERTY_INDEX,"#31DB0A",!0):"已满级",this.numFight.text=PropertyUtil.calculateProFight(o).toString(),o.con_item[0]?(this.hasNum=GoodsListProxy.getInstance().findGoodNumber(o.con_item[0].info.template_id),this.need=o.con_item[0].info.num,this.txtItem.htmlText="喂养【"+o.con_item[0].info.name+"】: "+HtmlUtil.font(this.hasNum+"",this.hasNum>=this.need?ColorUtil.COLOR_GREEN:ColorUtil.COLOR_RED)+"/"+HtmlUtil.font(this.need+"",ColorUtil.COLOR_GOLD)):this.txtItem.htmlText="已满级"}}},s.addProperty=function(e,t,i,n,s){void 0===i&&(i="#e7d0b7"),void 0===n&&(n=!1),void 0===s&&(s=!1);for(var a=0,o=0,r="",h="",l=0;l<t.length;l++)h=t[l],a=null==e?0:e[h],o=l,!s&&0>=a||(r+=o>=5?"<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+a/100+"%</font>\n":"<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+a+"</font>\n");return r},s.setEffect=function(){null==this.weaponEffect&&(this.weaponEffect=new UIEffect);var e=MagicPetModel.getInstance().getWeaponDate(this.curIndex).stage;this.weaponEffect.showEffect(UrlUtil.getPetWeaponEffectURL(this.curIndex,0==e?1:e),0,0,this.weaponClip,120,!0)},s.setStar=function(e){if(this.curStar!=e){this.curStar=e,this.starCon.removeChildren();for(var t=0;e>t;t++){var i=new PicLoader;i.load("resource/assets/icon/pet/star1.png"),i.x=46*t,this.starCon.addChild(i)}for(;10>t;t++){var n=new PicLoader;n.load("resource/assets/icon/pet/star0.png"),n.x=46*t,this.starCon.addChild(n)}}},s.toLink=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FanLiEvtName.OPEN_FANLI_WINDOW))},s.toSetTarget=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_WEAPON_SET_TARGET,this.curIndex))},s.toShow=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_WEAPON_SHOW,this.curIndex))},s.toUp=function(){var e=this;if(this.hasNum>=this.need)this.btnUp.enabled=!1,this.recoverTime=setTimeout2(function(){e.recover()},250),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_WEAPON_UP,this.curIndex));else if(2==this.curIndex){var t=new ParamEvent(EventName.OPEN_GETMATERIAL_BUY_WINDOW);t.data={typeId:13150002,type:"",linkStrArr:[]},this.dispatchGlobalEvent(t)}else Message.show("物品数量不足")},s.toAuto=function(){if(this.hasNum>=this.need)MagicPetModel.getInstance().weaponUpAuto?(MagicPetModel.getInstance().weaponUpAuto=!1,this.btnAuto.label="自动进阶"):(MagicPetModel.getInstance().weaponUpAuto=!0,this.btnAuto.label="停止",this.btnUp.enabled=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_WEAPON_UP,this.curIndex)));else if(2==this.curIndex){var e=new ParamEvent(EventName.OPEN_GETMATERIAL_BUY_WINDOW);e.data={typeId:13150002,type:"",linkStrArr:[]},this.dispatchGlobalEvent(e)}else Message.show("物品数量不足")},s.recover=function(){if(clearTimeout(this.recoverTime),this.btnUp.enabled=!0,MagicPetModel.getInstance().weaponUpAuto){var e=MagicPetModel.getInstance().getWeaponDate(this.curIndex);10==e.star?MagicPetModel.getInstance().weaponUpAuto=!1:GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_WEAPON_UP,this.curIndex))}},s.playWeaponBtnEnable=function(){var e=this;this.btnUp.enabled=!1,this.recoverTime=setTimeout2(function(){e.recover()},250)},s.toActive=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_WEAPON_ACTIVE,this.curIndex))},s.toGrade=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_WEAPON_GRADE,this.curIndex))},i(s,"curIndex",function(){return MagicPetModel.getInstance().curIndex}),s.dispose=function(){e.prototype.dispose.call(this),this.weaponEffect&&(this.weaponEffect.dispose(),this.weaponEffect=null),this.imgPoem&&(this.imgPoem.dispose(),this.imgPoem=null),this.imgMark&&(this.imgMark.dispose(),this.imgMark=null)},t}(MagicView);egret.registerClass(MagicPetEquipView,"MagicPetEquipView");var MagicPetFeedView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/magicPet/MagicPetFeedViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.btnFeed1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toInteract,this),this.btnFeed2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toInteract,this)},n.update=function(){e.prototype.update.call(this),this.updateChance();for(var t="",i=0,n=MagicPetModel.getInstance().petLogList;2>i&&n.length>0;){var s=n.pop();t+=TimeUtil.formatTime(1e3*s.ctime,"YYYY-MM-DD hh:mm:ss")+"  "+s.tar_tole_name+"赠送你一点体力\n",i++}this.txtLog.text=t},n.updateChance=function(){this.timeCon.removeChildren();for(var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_23302),t=0;(5>e?e:5)>t;t++){var i=new PicLoader;i.load(rURL("resource/assets/icon/pet/heart1.png")),i.x=45*t,this.timeCon.addChild(i)}for(;5>t;t++){var i=new PicLoader;i.load(rURL("resource/assets/icon/pet/heart0.png")),i.x=45*t,this.timeCon.addChild(i)}},n.toInteract=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_23304,MagicPetModel.getInstance().curPetId);e>=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_23307).value)?Message.show("今日互动次数已用完"):DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_23302)>0?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_INTERACT)):Message.show("互动次数不足")},n.dispose=function(){this.removeEventListener(DailyEvtName.DAILY_UPDATE,this.update,this)},t}(MagicView);egret.registerClass(MagicPetFeedView,"MagicPetFeedView");var MagicPetHeadItem=function(e){function t(t){e.call(this),this.petId=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/magicPet/MagicPetHeadItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.setIndex()},n.setIndex=function(){var e=rURL("resource/assets/icon/head/pethead/pethead_"+this.petId+".png");this.imgHead.source=e},n.setData=function(e){this.txtReq.visible=this.txtBg.visible=!e.active},n.dispose=function(){e.prototype.dispose.call(this),this.imgHead.dispose(),this.imgHead=null},t}(BaseView);egret.registerClass(MagicPetHeadItem,"MagicPetHeadItem");var MagicPetShopView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/magicPet/MagicPetShopViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/pet/MagicPetShopBg.png"),this.addChildAt(this.imageBg,1),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnGet2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet2,this),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this);var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_23304).itemArr,t=Number(e[0]),i=Number(e[1]);this._goodsinfo=GoodsListProxy.getInstance().getGoodsInfoByType(t),this.item_0.data=this._goodsinfo,this.item_0.num=i,t=Number(e[2]),i=Number(e[3]),this.item_1.data=GoodsListProxy.getInstance().getGoodsInfoByType(t),this.item_1.num=i,e=SingleModel.getInstance().getSingVO(SingleModel.KEY_23305).itemArr,t=Number(e[0]),i=Number(e[1]),this.item_3.data=GoodsListProxy.getInstance().getGoodsInfoByType(t),this.item_3.num=i,t=Number(e[2]),i=Number(e[3]),this.item_4.data=GoodsListProxy.getInstance().getGoodsInfoByType(t),this.item_4.num=i,this.updateDaily()},n.onGet=function(){var e=MallModel.getInstance().getRmbShopVo(MallModel.MALL_RMB_5);e&&(ConfigManager.isTencent()?ConfigManager.isIOS()?QQManager.getInstance().QQBuyGoods(e.ios,e.template_id):QQManager.getInstance().QQBuyGoods(e.android,e.template_id):PhpHttpStatisticsManager.requestChargeOrder(1,e.rmb,7,"RMB商城",1,e.template_id))},n.onGet2=function(){var e=MallModel.getInstance().getRmbShopVo(MallModel.MALL_RMB_6);e&&(ConfigManager.isTencent()?ConfigManager.isIOS()?QQManager.getInstance().QQBuyGoods(e.ios,e.template_id):QQManager.getInstance().QQBuyGoods(e.android,e.template_id):PhpHttpStatisticsManager.requestChargeOrder(1,e.rmb,7,"RMB商城",1,e.template_id))
},n.updateDaily=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_40,MallModel.MALL_RMB_5);this.btnGet.visible=0==e,e>0&&(this.lingqu||(this.lingqu=new PicLoader,this.lingqu.load("resource/assets/icon/mall/mallIcon_over.png"),this.lingqu.x=this.btnGet.x+40,this.lingqu.y=this.btnGet.y+10),this.addChild(this.lingqu));var t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_40,MallModel.MALL_RMB_6);this.btnGet2.visible=0==t,t>0&&(this.lingqu2||(this.lingqu2=new PicLoader,this.lingqu2.load("resource/assets/icon/mall/mallIcon_over.png"),this.lingqu2.x=this.btnGet2.x+40,this.lingqu2.y=this.btnGet2.y+10),this.addChild(this.lingqu2))},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnGet2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet2,this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null),this.lingqu&&(this.lingqu.dispose(),this.lingqu=null),this.lingqu2&&(this.lingqu2.dispose(),this.lingqu2=null)},n.update=function(){},t}(MagicView);egret.registerClass(MagicPetShopView,"MagicPetShopView");var MagicPetWeaponItem=function(e){function t(t){e.call(this),this.index=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/magicPet/MagicPetWeaponItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.imgHead=new PicLoader,this.imgHead.load("resource/assets/icon/pet/head"+this.index+".png"),this.imgHead.x=19,this.imgHead.y=25,this.addChild(this.imgHead),this.imgName=new PicLoader,this.imgName.load("resource/assets/icon/pet/imgName"+this.index+".png"),this.imgName.x=90,this.imgName.y=30,this.addChild(this.imgName)},n.update=function(e){this.txtLevel.text=e+"阶",this.showRedDot=MagicPetModel.getInstance().checkWeaponUpableByType(this.index)},n.setFocus=function(e){this.bgLight.visible=e},n.setState=function(e){0==e?this.imgEnable||(this.imgEnable=new PicLoader,this.imgEnable.load("resource/assets/icon/pet/enable"+this.index+".png"),this.imgEnable.x=13,this.imgEnable.y=13,this.addChild(this.imgEnable)):this.imgEnable&&(this.imgEnable.dispose(),this.imgEnable=null)},t}(BaseView);egret.registerClass(MagicPetWeaponItem,"MagicPetWeaponItem");var MagicPetWindow=function(e){function t(){e.call(this),this.LABEL_FOLLOW="跟随",this.LABEL_HIDE="隐藏",this.skinName="resource/game_skins/magicPet/MagicPetWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_magicPet"),this.tabbar.dataProvider=new eui.ArrayCollection(["魔宠","互动","魔武","商店"]),this.tabbar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelp,this),this.btnShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toShow,this),RoleModel.getInstance().addEventListener(EventName.PETFIGURE_CHANGE,this.petShowChange,this)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.update()},n.updateChance=function(){is(this.curView,"MagicPetFeedView")&&this.curView.updateChance()},n.update=function(){var e=this;this.setHeadList(),this.setPetFigure(),this.curView&&this.curView.update(),setTimeout2(function(){e.checkRedDot()},1500);var t=MagicPetModel.getInstance().getCurPetData(),i=MagicPetModel.getInstance().getPetConfigById(t.pet_id);this.btnShow.visible=t.active,this.btnShow.label=RoleModel.getInstance().hasPet(i.show)?this.LABEL_HIDE:this.LABEL_FOLLOW,this.txtName.text=i.name;var n=MagicPetModel.getInstance().getConfigByGrade(t.pet_id,t.calss);this.txtGrade.text=t.calss+"阶 · 魔宠",this.txtLevel.text="魔宠等级："+t.level+"/"+n.limit_lv},n.checkRedDot=function(){if(this.tabbar&&this.tabbar.numChildren>0){var e=this.tabbar.getChildAt(2);e.showRedDot=MagicPetModel.getInstance().checkWeaponUpable()}},n.petShowChange=function(){var e=MagicPetModel.getInstance().getCurPetData(),t=MagicPetModel.getInstance().getPetConfigById(e.pet_id);this.btnShow.label=RoleModel.getInstance().hasPet(t.show)?this.LABEL_HIDE:this.LABEL_FOLLOW},n.onBarItemTap=function(e){this.setIndex(this.tabbar.selectedIndex)},n.setIndex=function(e){switch(MagicPetModel.getInstance().weaponUpAuto=!1,this.viewCon.removeChildren(),e){case 0:this.curView=new MagicPetAttrView,this.curView.y=0;break;case 1:this.curView=new MagicPetFeedView,this.curView.y=0;break;case 2:this.curView=new MagicPetEquipView,this.curView.x=-22,this.curView.y=-522,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_WEAPON_INFO));break;case 3:this.curView=new MagicPetShopView,this.curView.x=-10,this.curView.y=-510}this.curView.update(),this.viewCon.addChild(this.curView)},n.toShow=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.PET_SHOW_OR_HIDE))},n.openHelp=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.MAGIC_PET))},n.setHeadList=function(){if(!this.headList){this.headList=[];for(var e=MagicPetModel.getInstance().getPetConfig(),t=0;t<e.length;t++){var i=new MagicPetHeadItem(e[t].template_id);i.y=105*t,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),this.headCon.addChild(i),this.headList.push(i)}}for(var n=0;n<this.headList.length;n++)this.headList[n].setData(MagicPetModel.getInstance().getPetDataById(this.headList[n].petId))},n.onItemClick=function(e){var t=e.currentTarget;this.imgSelect.x=t.x+6,this.imgSelect.y=t.y-4,MagicPetModel.getInstance().curPetId=t.petId,this.setPetFigure(),this.update()},n.setPetFigure=function(){null==this.petEffect&&(this.petEffect=new UIEffect),this.petEffect.showEffect(UrlUtil.getPetEffectURL(MagicPetModel.getInstance().curPetId,"stand"),0,0,this.petClip,120,!0);var e=MagicPetModel.getInstance().equipedWeapon;null==this.weaponEffect&&(this.weaponEffect=new UIEffect),e&&this.weaponEffect.showEffect(UrlUtil.getPetWeaponEffectURL2(e.weapon_type,e.stage),0,0,this.weaponClip,120,!0),this.weaponEffect.visible=null!=e;var t=MagicPetModel.getInstance().getCurPetData();t.active?this.coverEffect&&(this.coverEffect.dispose(),this.coverEffect=null):(null==this.coverEffect&&(this.coverEffect=new UIEffect),this.coverEffect.showEffect(UrlUtil.getCommonEffectURL("shenqi2"),-10,-50,this.coverClip,120,!0))},n.playEffect=function(e){null==this.coverEffect&&(this.coverEffect=new UIEffect),this.coverEffect.addEventListener(UIEffect.EFFECT_END,this.onPlayOver,this),this.coverEffect.showEffect(UrlUtil.getCommonEffectURL(1==e?"jihuo":"tisheng"),-10,-50,this.coverClip,120,!1)},n.onPlayOver=function(e){this.coverEffect.removeEventListener(UIEffect.EFFECT_END,this.onDanceOver,this),this.coverEffect.dispose(),this.coverEffect=null},n.playFeedEffect=function(){this.petEffect.addEventListener(UIEffect.EFFECT_END,this.onDanceOver,this),this.petEffect.showEffect(UrlUtil.getPetEffectURL(MagicPetModel.getInstance().curPetId,"stand_s"),0,0,this.petClip,120,!1)},n.onDanceOver=function(e){this.petEffect.removeEventListener(UIEffect.EFFECT_END,this.onDanceOver,this),this.setPetFigure()},n.dispose=function(){if(e.prototype.dispose.call(this),RoleModel.getInstance().removeEventListener(EventName.PETFIGURE_CHANGE,this.petShowChange,this),this.curView&&(this.curView.dispose(),this.curView=null),this.headList){for(var t=0;t<this.headList.length;t++)this.headList[t].dispose();this.headList=null}this.petEffect&&(this.petEffect.dispose(),this.petEffect=null),this.coverEffect&&(this.coverEffect.dispose(),this.coverEffect=null),this.headCon&&this.headCon.removeChildren(),this.viewCon&&this.viewCon.removeChildren(),this.tabbar&&(this.tabbar=null),this.panelSkin&&(this.panelSkin.dispose(),this.panelSkin=null)},n.playWeaponBtnEnable=function(){is(this.curView,"MagicPetEquipView")&&this.curView.playWeaponBtnEnable()},t}(LayeroutWindow);egret.registerClass(MagicPetWindow,"MagicPetWindow");var MailContentWindow=function(e){function t(){e.call(this),this._goodArr=[],this.skinName="resource/game_skins/mail/MailContentViewSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.MAIL,this.setImageTitle("title_mailContent");for(var t,i=0;4>i;i++)t=this["good_"+i],this._goodArr.push(t)},n.onGetClick=function(){this.btnGet.visible=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MAILEvtName.MAIL_CCMD11502,this._mailData.mail_id))},n.updateData=function(e){if(this._mailData=e,this.txtContent.htmlText=e.mail_content,this._mailData.accessorys.length>0){for(var t,i,n=0;4>n;n++)i=this._goodArr[n],t=this._mailData.accessorys[n],t?(i.visible=!0,i.data=GoodsListProxy.getInstance().getGoodsInfoByType(t.type),i.num=t.value):i.visible=!1;this._mailData.mail_award>0?this.btnGet.visible=!1:this.btnGet.visible=!0}else this.btnGet.visible=!1},n.onTxtLinkHandler=function(e){if(e.text){var t=e.text.split(",");TaskModel.getInstance().getTaskOpen(t[0],Number(t[1]))}},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.txtContent.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.txtContent.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this)},t}(LayeroutWindow);egret.registerClass(MailContentWindow,"MailContentWindow");var MailListItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/mail/MailListItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap,this)},n.onItemTap=function(e){0==this._mailData.mail_read&&(this.mailIcon.source="mailIcon_yes",GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MAILEvtName.MAIL_CCMD11501,this._mailData.mail_id))),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MAILEvtName.MAIL_OPEN_CONTENT,this._mailData))},n.dataChanged=function(){this._mailData=this.data,this.txtTime.text=TimeUtil.formatTime(1e3*this._mailData.ctime);var e=this._mailData.mail_title;this._mailData.mail_read>0?(this.mailIcon.source="mailIcon_yes",e+="<font color='#e31101'>（已读）</font>"):(this.mailIcon.source="mailIcon_no",e+="<font color='#00d228'>（未读）</font>"),this.txtName.htmlText=e,this.txtNo.visible=0==MailModel.getInstance().isGetReward(this._mailData)},t}(eui.ItemRenderer);egret.registerClass(MailListItem,"MailListItem");var MailWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/mail/MailViewSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.MAIL},n.onGetClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MAILEvtName.MAIL_CCMD11503))},n.updateData=function(e){this._mailData=MailModel.getInstance().mailData,this.updateList()},n.updateList=function(){this._isGet=!1;for(var e=new eui.ArrayCollection,t=0;t<this._mailData.length;t++)e.addItem(this._mailData[t]),!this._isGet&&this._mailData[t].accessorys.length>0&&(this._isGet=0==this._mailData[t].mail_award);this.mailList.dataProvider=e,this.btnGetAll.visible=this._isGet},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_mail")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnGetAll.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.addGlobalEventListener(MAILEvtName.MAIL_CCMD11500_UPDATE,this.updateData,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGetAll.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.removeGlobalEventListener(MAILEvtName.MAIL_CCMD11500_UPDATE,this.updateData,this)},t}(LayeroutWindow);egret.registerClass(MailWindow,"MailWindow");var MainUIBossBtnView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/mainUI/MainUIBossBtnSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.btn_boss.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBossBtn,this),this.btn_meet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBossBtn,this)},n.onBossBtn=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(BossEvtName.OPEN_BOSS_MAINUI,this._type))},n.setType=function(e){this._type=e,1==e?(this.btn_boss.visible=!0,this.btn_meet.visible=!1,this.txtOpen.text=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.MEETBOSS).open_hook+"关开启"):(this.btn_boss.visible=!1,this.btn_meet.visible=!0,this.txtOpen.text=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.MEETPLAYER).open_hook+"关开启")},t}(BaseView);egret.registerClass(MainUIBossBtnView,"MainUIBossBtnView");var SideUIFunItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/mainUI/SideUIFunItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=this;e._pic=new PicLoader,e.addChild(e._pic),e._imgShade=new PicLoader,e.addChild(e._imgShade),e._imgShade.load("resource/assets/icon/mainUIBtn/other/0.png"),e.setChildIndex(e._txtAlert,e.numChildren-1),e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.clickItem,e)},n.getVO=function(){return this._vo},n.clickItem=function(e){var t=this,i=t._vo.event.split(",");TaskModel.getInstance().getTaskOpen(i[0],Number(i[1])),this.dispatchGlobalEvent(new ParamEvent(EventName.CLOSE_SIDEUI_FUN))},n.setData=function(e){var t=this;t._vo=e,t._pic.load("resource/assets/icon/mainUIBtn/other/"+e.template_id+".jpg");var i=RoleModel.getInstance().getRoleCommon().level,n=RoleModel.getInstance().getRoleCommon().round,s=HuoDongDailyModel.getInstance().kaiFuDay;t._imgShade.visible=t._txtAlert.visible=!1,this.touchEnabled=this.touchChildren=!0;var a="";if(e.open_lv>0&&e.open_lv>i&&(t._imgShade.visible=!0,t._txtAlert.visible=!0,a+=e.open_lv+"级",this.touchEnabled=this.touchChildren=!1),e.open_round>0&&e.open_round>n&&(t._imgShade.visible=!0,t._txtAlert.visible=!0,a+=e.open_round+"转",this.touchEnabled=this.touchChildren=!1),e.open_day>0&&s<e.open_day&&(t._imgShade.visible=!0,t._txtAlert.visible=!0,a+="开服第"+e.open_day+"天",this.touchEnabled=this.touchChildren=!1),a+="开启",t._txtAlert.text=a,101==t._vo.template_id){var o=MeetPlayerModel.getInstance().getPkInfo(),r=!0;(null==o||0==o.meet_roles.length)&&(r=!1),t.showRedDot=r}else if(102==t._vo.template_id){var h=!1;if(FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_46,!1)){var l=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2021),d=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2022);h=l||d}else h=!1;t.showRedDot=h}else if(103==t._vo.template_id){var _=!1,c=HuoDongDailyModel.getInstance().kaiFuDay>=Number(FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_42).open_day);_=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2016)&&c,t.showRedDot=_}else if(104==t._vo.template_id){var u=!1,p=HuoDongDailyModel.getInstance().kaiFuDay>=Number(FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_44).open_day);u=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2018)&&p,t.showRedDot=u}else if(201==t._vo.template_id)t.showRedDot=ArtifactModel.getInstance().getArtifactsCanupOrActive();else if(202==t._vo.template_id){var g=!1;g=FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_45,!1)?RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2020)||ShadowModel.getInstance().isEquipUpgradeAll||ShadowModel.getInstance().isJieUpgradeAll:!1,t.showRedDot=g}else 203==t._vo.template_id?t.showRedDot=AwakeModel.getInstance().isUpAwake:204==t._vo.template_id&&(t.showRedDot=MagicPetModel.getInstance().checkWeaponUpable())},n.dispose=function(){var e=this;e.parent&&e.parent.removeChild(e),e.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.clickItem,e),e._imgShade&&(e._imgShade.dispose(),e._imgShade=null),e._pic&&(e._pic.dispose(),e._pic=null)},t}(Csprite);egret.registerClass(SideUIFunItem,"SideUIFunItem");var SideUIFunView=function(e){function t(t){e.call(this),this._itemArr=[],this._type=0,this._type=t,this.skinName="resource/game_skins/mainUI/SideUIFunViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this);for(var t,i,n=this,s=TipsWordModel.getInstance().getSideUIConfig(n._type),a=0;a<s.length;a++)t=s[a],i=new SideUIFunItem,i.y=169*a,i.setData(t),n.container.addChild(i),n._itemArr.push(i);1==n._type?n.setImageWindowTitle("title_ath"):n.setImageWindowTitle("title_train"),n.windowBgBottom=-20},n.onReGroupLoadComplete=function(){},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this)},n.onCloseHandler=function(){for(var t,i=this._itemArr.length,n=0;i>n;n++)t=this._itemArr[n],t.dispose(),t=null;this._itemArr=[],e.prototype.onCloseHandler.call(this)},n.clickItem=function(e){var t=e.currentTarget,i=t.getVO().event.split(",");TaskModel.getInstance().getTaskOpen(i[0],Number(i[1]))},t}(LayeroutWindow);egret.registerClass(SideUIFunView,"SideUIFunView");var TopBar=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/mainUI/topBarSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){RoleModel.getInstance().addEventListener(RoleModel.ROLE_ROUND_CHANGE,this.updateRoundHandler,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_EXP_CHANGE,this.updateLvlAndExpHandler,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEGOLD,this.updateGoldHandler,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGECOIN,this.updateCoinHandler,this),this.btnAddCopper.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddCopperHandler,this),this.btnAddGold.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddGoldHandler,this),this.skin.width=GameContent.stageWidth,this.updatePlayerInfo()},n.onAddCopperHandler=function(){var e=new ParamEvent(EventName.OPEN_GETMATERIAL_WINDOW);e.data={typeId:1,type:0,linkStrArr:[{type:GetMaterialItem.OPEN_PK,linkStr:"<u><a href = 'event:1'>遭遇pk</a></u>"},{type:GetMaterialItem.OPEN_FUBEN_TIAOZHAN,linkStr:"<u><a href = 'event:2'>打开副本--挑战副本</a></u>"},{type:GetMaterialItem.OPEN_CHECKPOINTBOSS,linkStr:"<u><a href = 'event:2'>打开关卡boss</a></u>"},{type:GetMaterialItem.OPEN_FAST_FIGHT,linkStr:"<u><a href = 'event:2'>快速战斗</a></u>"}]},GameDispatcher.getInstance().dispatchEvent(e)},n.onAddGoldHandler=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.updatePlayerInfo=function(){var e=RoleModel.getInstance().getRoleBaseInfo();this.txtName.text=e.name,this.updateLvlAndExpHandler(),this.updateCoinHandler(),this.updateGoldHandler()},n.updateRoundHandler=function(){var e=RoleModel.getInstance().getRoleCommon().round;e>0?this.txtLvl.text=e+"转"+RoleModel.getInstance().getRoleCommon().level+"级":this.txtLvl.text=RoleModel.getInstance().getRoleCommon().level+"级"},n.updateLvlAndExpHandler=function(){this.updateRoundHandler()},n.updateCoinHandler=function(){var e=RoleModel.getInstance().getRoleInfo().getCoin();this.txtCopper.text=Tools.convertNumber(e)},n.updateGoldHandler=function(){var e=RoleModel.getInstance().getRoleInfo().getGold();this.txtGold.text=Tools.convertNumber(e)},t}(BaseView);egret.registerClass(TopBar,"TopBar");var mainUI=function(e){function t(){e.call(this),this._isNovice=!0,this._time=-1,this._time2=-1,this._timeId_top=0,this._chatSysArr=[],this._chatSysArr2=[],this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/mainUI/mainUISkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._imageTop.width=GameContent.stageWidth,this.topGroup.width=GameContent.stageWidth,this.resGroupName=GModuleResGroupName.MAINUI,ConfigManager.isBigScene()&&(this._imageBottom.source=RES.getRes("mainUI_json.bg_bottom2"),this.bottomGroup2.x+=30)},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.updateMainCityBtnIcon()},n.initData=function(){var e=this;this.btnVip.setRedDotPoint(6,6),this._txtResetName.htmlText="<u><a href = 'event:2'>改名</a></u>",this._btnMainCity.isStopTouch=!0,this._btnMainCityMask.isStopTouch=!0,this.btnTarget.isStopTouch=!0,this._imageHead=new PicLoader(PicLoader.MAPTILE),this.topGroup.addChild(this._imageHead),this.topGroup.setChildIndex(this._txtLv,this.topGroup.numChildren-1),this.topGroup.setChildIndex(this._imgLvl,this.topGroup.numChildren-2),this._imageHead.x=7,this._imageHead.y=2,this._imageHead.width=80,this._imageHead.height=80,this._imageHead.touchEnabled=!0,this._imageHead.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHead,this),this._txtResetName.addEventListener(egret.TextEvent.LINK,this.onTxtLinkResetNameHandler,this),this.btnPack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnPack,this),this.btnFigure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnFigure,this),this.btnSkill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnSkill,this),this.btnMail.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnMail,this),this.btnBuff.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuff,this),this.btnFriend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnFriend,this),this.btnAddGold.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddGoldHandler,this),this._btnCharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnCharge,this),this._btnAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnAuto,this),this._btnAth.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnAth,this),this._btnTrain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnTrain,this),this._btnGongHui.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnGongHui,this),this.btn_speekPK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnSpeedPK,this),this._btnCheckPointBoss.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnCheckPointBoss,this),this._btnMonthCard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnMonthCardBoss,this),this._btnLifeCard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnLifeCardBoss,this),this.btnBuild.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnBuild,this),this.btnVip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnVip,this),this._btnMeetBoss.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMeetBoss,this),this.btn_guildRed.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGuildRed,this),this.btn_guildRed.visible=!1,this.btnRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnRank,this),this.btnBoss.x=GameContent.stageWidth-127,this._containerKill.x=GameContent.stageWidth-145,this._rightBtnGoup.x=GameContent.stageWidth-130,this.btnMail.x=GameContent.stageWidth-79,this.btnBoss.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnBoss,this),this.btnTarget.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnTarget,this),this.addGlobalEventListener(GuildEvtName.GUILD_SHOW_RED_ICON,this.onGuildRedIconShow,this),this.addGlobalEventListener(EventName.WINDOW_CHANGE,this.onWindowStateChange,this),this.addGlobalEventListener(EventName.SHOW_MAINUI_TOPBAR,this.onShowTopBarHandler,this),this.addGlobalEventListener(VipEvtName.VIP_UPDATE,this.onVipUpdate,this),this.addGlobalEventListener(BossEvtName.ADD_BOSS_OF_MEET,this.addMeetBossIcon,this),GameDispatcher.getInstance().addEventListener(PlayerBaseVO.CHANGE_FIGHTVALUE,this.updateFigtPowerHandler,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_ROUND_CHANGE,this.updateRoundHandler,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_EXP_CHANGE,this.updateLvlAndExpHandler,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_CHANGE,this.updateLvHandler,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_HEAD_CHANGE,this.updateHead,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEGOLD,this.updateGoldHandler,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGECOIN,this.updateCoinHandler,this),GameDispatcher.getInstance().addEventListener(EventName.CHANGE_ROLE_HP,this.onChangeHpHandler,this),GameDispatcher.getInstance().addEventListener(EventName.CHANGE_ROLE_MP,this.onChangeMpHandler,this),GameDispatcher.getInstance().addEventListener(EventName.MAINUI_SHOW_RIGHTTOP,this.onShowRightTopHandler,this),GameDispatcher.getInstance().addEventListener(EventName.GM_SHOW_MAINUI,this.onGMShowMainUI,this),this.addGlobalEventListener(TaskEvtName.TASK_CCMD11400_UPDATE,this.updateTask,this),this.addGlobalEventListener(EventName.GUILE_START,this.updateGuide,this),TaskModel.getInstance().isNovicePlayer()?(this.addGlobalEventListener(DailyEvtName.FIXED_DATA_UPDATE,this.updateNoviceTask,this),this.showNoviceTaskView(),this._btnMainCityMask.visible=!0):(this.showTaskView(),this._btnMainCityMask.visible=!1),this.addGlobalEventListener(EventName.GUILD_GUIDE_START,this.guildGuideStart,this),this.addGlobalEventListener(ChatEvtName.CHAT_SCMD11603_UPDATE,this.updateSystemData,this),this.addGlobalEventListener(ChatEvtName.CHAT_SHOW_TOP,this.showTopChat,this),this.onShowBtnBuffHandler(),this.addGlobalEventListener(FanLiEvtName.CCMD19710_UPDATE,this.onShowBtnBuffHandler,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2001,this.onVipRedDotsHandler,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2002,this.onMailRedDotsHandler,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2016,this.updateBtnAthRedDot,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2018,this.updateBtnAthRedDot,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2021,this.updateBtnAthRedDot,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2022,this.updateBtnAthRedDot,this),this.addGlobalEventListener(AwakeEvtName.CCMD_19800_UPDATE,this.updateBtnTrainRedDot,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2020,this.updateBtnTrainRedDot,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGAWAKE,this.updateBtnTrainRedDot,this),ArtifactModel.getInstance().addEventListener(ArtifactEvtName.ARTIFACT_UPDATE_INFO,this.updateBtnTrainRedDot,this),this.addGlobalEventListener(EventName.RED_DOTS,this.onRedDotsHandler,this),RedDotsModel.getInstance().addEventListener(RedDotsModel.MAIN_ROLE_ICON_REDDOT,this.onFigureRedDotsHandler,this),RedDotsModel.getInstance().addEventListener(RedDotsModel.MAIN_BAG_ICON_REDDOT,this.onBagRedDotsHandler,this),RedDotsModel.getInstance().addEventListener(RedDotsModel.MAIN_ARTIFACT_ICON_REDDOT,this.onTargetRedDotsHandler,this),MeetPlayerModel.getInstance().addEventListener(MeetPlayerModel.UPDATE_MPPK_INFO,this.updateBtnAthRedDot,this),this.topBar||(this.topBar=new TopBar,this.topBarContainer.addChild(this.topBar)),this.initHpMp(),this.onChangeHpHandler(),this.onChangeMpHandler(),this.onWindowStateChange(),this._fpowerEffectContainer.touchChildren=!1,this._fpowerEffectContainer.touchEnabled=!1,setTimeout2(function(){EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("mainfire"),-56,-50,e._fpowerEffectContainer,120,!0)},5e3),this._isInit||(this._isInit=!0,this.setGuaJiInfo(),this.updatePlayerInfo()),SceneModel.getInstance().addEventListener(SceneModel.UPDATE_SCENE_WAVE,this.updateWaveInfo,this),this._txtSceneDes.visible=!1,SceneModel.getInstance().addEventListener(SceneModel.SCENEWAVE_CHANGE,this.changeWaveInfo,this),SceneModel.getInstance().addEventListener(SceneModel.SCENEKILL_CHANGE,this.ShowWaveEffect,this),this.addGlobalEventListener(EventName.AUTOBOSSCHANGE,this.autoBossChange,this),this.addGlobalEventListener(EventName.MEET_BOSS_FINISH,this.meetBossFinish,this),this.meetBossFinish(null),MainUIModel.getInstance().bagRect=this.btnPack.parent.localToGlobal(this.btnPack.x+14,this.btnPack.y+11),MainUIModel.getInstance().goldRect=this.topBar.parent.localToGlobal(this.topBar.x+445,this.topBar.y+11),MainUIModel.getInstance().guildRect=this._btnGongHui.parent.localToGlobal(this._btnGongHui.x,this._btnGongHui.y),this.updateLvHandler(),this.updateBossBtn(),this.addGlobalEventListener(CityWarEvtName.ADD_CITYWAR_ICON,this.addCityWarIconHandler,this),this.addGlobalEventListener(EventName.SCENE_CHANGE,this.sceneChange,this),RoleModel.getInstance().addEventListener(RoleModel.UPDATE_ROLE_NAME,this.updateRoleNameHandler,this),this._btnMainCity.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnMainCity,this),this.addGlobalEventListener(EventName.TIPSWORD_UPDATE,this.onTipsWordUpdate,this),this.addGlobalEventListener(BossEvtName.CMD19430_UPDATE,this.updateBtnAthRedDot,this),this.onTipsWordUpdate();var t=new egret.Rectangle(0,0,400,40);t.x=100,this.chatSysContentGroup.mask=t,this.chatSysContentGroup2.mask=t,this.chatView=new ChatMainUIView,this.chatView.x=110,this.chatView.y=948,this.chatView.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickChatView,this),this.addChild(this.chatView)},n.onClickBtnRank=function(){this.dispatchGlobalEvent(new ParamEvent(RankEvtName.RANK_OPEN_VIEW))},n.onClickHead=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_HEAD))},n.onVipUpdate=function(){this.txtVip.text=VipModel.getInstance().getVIPLevel().toString(),this.btnVip.iconDisplay.source=rURL("resource/assets/icon/vip/"+VipModel.getInstance().getVIPLevel()+".png")},n.onWindowStateChange=function(){GuildModel.getInstance().isGuildMapShow&&KuaFuModel.getInstance().isKuaFuShow||(this.topGroup.visible=!PopManager.getInstance().hasPopWindow(),this.topBarContainer.visible=PopManager.getInstance().hasPopWindow())},n.onShowTopBarHandler=function(e){var t=e.data.state;this.topGroup.visible=!t,this.topBarContainer.visible=t},n.onClickBtnPack=function(){NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip(),this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_PACK))},n.onTxtLinkResetNameHandler=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_NAME))},n.onClickBtnFigure=function(){NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip(),this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_FIGURE))},n.onClickBtnSkill=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_SKILL))},n.onClickBtnMainCity=function(){if(1==TaskModel.getInstance().isNoviceTaskExit&&this.dispatchGlobalEvent(new ParamEvent(EventName.SHOW_WELCOME2)),TaskModel.getInstance().isNoviceTaskExit=!1,NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip(),SceneModel.getInstance().isHookSmall()||SceneModel.getInstance().isMainCity()){0==TipsWordManager.getInstance().isCity?this.dispatchGlobalEvent(new ParamEvent(EventName.ENTER_MAINCITY)):this.dispatchGlobalEvent(new ParamEvent(EventName.EXIT_MAINCITY));
var e=!TipsWordManager.getInstance().isCity;TipsWordManager.getInstance().isCity=e,this.showCity(1),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(SceneEvtName.MAIN_CITY_CHANGE))}else Message.show("该场景不能回主城")},n.showCity=function(e){var t,i,n=TipsWordManager.getInstance().isCity;this.updateMainCityBtnIcon(),n||SceneModel.getInstance().isHookSmall()||(e=3),1==e?(n?this.removeCityWarIcon():CityWarModel.getInstance().isOpen()&&this.addCityWarIcon(),t=!n,i=!0,this.dispatchGlobalEvent(new ParamEvent(KuaFuEvtName.KUAFU_CLOSE_MAP))):(t=2==e,i=t,t?(CityWarModel.getInstance().isOpen()&&this.addCityWarIcon(),this.dispatchGlobalEvent(new ParamEvent(KuaFuEvtName.KUAFU_CLOSE_MAP))):this.removeCityWarIcon(),this.topGroup.visible=t,this.topBarContainer.visible=!t),t?this.setGuaJiInfo():this.btnBoss.visible=SceneModel.getInstance().isMainCity()||SceneModel.getInstance().isHookSmall(),this._containerKill.visible=t&&!SceneModel.getInstance().isMainCity(),this._rightBtnGoup.visible=t,this.btnFriend.visible=this.btnMail.visible=t,this.mainUI_task&&this.mainUI_task.isShow(t&&0==TaskModel.getInstance().isNovicePlayer()),(0==t||0==TaskModel.getInstance().isNovicePlayer())&&this.removeNoviceTaskView(),this.chatGroup.visible=t&&0==TaskModel.getInstance().curTaskId,this.changeChatView(this.chatGroup.visible),TipsWordManager.getInstance().show(i),GuildAertManager.getInstance().show(t),this.updateGuideBoss(),t?this.dispatchGlobalEvent(new ParamEvent(GuildEvtName.GUILD_CLOSE_VIEW)):(this.dispatchGlobalEvent(new ParamEvent(CheckPointBossEvtName.NOVICECG_CLOSE_WINDOW)),this.dispatchGlobalEvent(new ParamEvent(EventName.CLOSE_WINDOW)),this.removeMeetBossEffect())},n.updateMainCityBtnIcon=function(){var e=TipsWordManager.getInstance().isCity;this._btnMainCity.setImageSource(e?"mainUI_json.mainUI_btnWild":"mainUI_json.mainUI_btnMainCity")},n.onShowRightTopHandler=function(e){var t=e.data.state;this.showCity(t?2:3)},n.onTipsWordUpdate=function(){this._btnMainCity.showRedDot=TipsWordManager.getInstance().getCityRedDots(),this._btnMainCity.setRedDotPoint(24,1),this._btnGongHui.showRedDot=TipsWordManager.getInstance().isRedDots(TipsWord.GUILD)},n.onClickBtnMall=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_MALL))},n.onClickBtnMail=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_MAIL))},n.onClickBuff=function(){this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.BUFF_OPEN_VIEW))},n.onClickBtnFriend=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_FRIEND)),this.btnFriend.showRedDot=!1},n.onClickBtnChat=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_CHAT))},n.onClickBtnBuild=function(){(NoviceGuideManager.getInstance().isNovice()||TaskModel.getInstance().isGuildGuide)&&NoviceGuideManager.getInstance().removeShadeTip(),this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_BUILD))},n.onAddGoldHandler=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.onClickBtnVip=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_VIP))},n.onClickBtnCharge=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.onClickBtnAuto=function(e){NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip();var t=SceneModel.getInstance().getSceneWave(),i=t.total_wave_id;return 10>i&&VipModel.getInstance().getVIPLevel()<2?void Message.show("通关到第10关开启或者VIP到达2级"):(SceneModel.getInstance().isAutoKillBoss=!SceneModel.getInstance().isAutoKillBoss,SceneModel.getInstance().isAutoKillBoss&&0==GoodsListProxy.getInstance().checkBagGridResNum(20)?void(SceneModel.getInstance().isAutoKillBoss=!1):void 0)},n.onClickBtnAth=function(e){var t=SceneModel.getInstance().getSceneWave(),i=t.total_wave_id;return 20>i?void Message.show("通关到第20关开启"):void this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_SIDEUI_FUN,{type:1}))},n.onClickBtnTrain=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_SIDEUI_FUN,{type:2}))},n.onClickBtnGongHui=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_GUILD))},n.onClickBtnPK=function(e){this.dispatchGlobalEvent(new ParamEvent(MeetPlayerEvtName.SHOW_MEETPLAYER_VIEW))},n.onClickBtnSpeedPK=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_SPEED_PK))},n.onClickBtnCheckPointBoss=function(){NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip();var e=SceneModel.getInstance().getSceneWave();e.award_id>e.awarded_id?this.dispatchGlobalEvent(new ParamEvent(CheckPointBossEvtName.NOVICECG_OPEN_WINDOW)):this.dispatchGlobalEvent(new ParamEvent(CheckPointBossEvtName.CHECKPOINTBOSS_OPEN_WINDOW))},n.onClickBtnMonthCardBoss=function(){this.dispatchGlobalEvent(new ParamEvent(VipEvtName.OPEN_VIP_MONTH,0))},n.onClickBtnLifeCardBoss=function(){this.dispatchGlobalEvent(new ParamEvent(VipEvtName.OPEN_VIP_MONTH,1))},n.onChatViewShow=function(){this.changeChatView(!0)},n.onChatViewHide=function(){this.changeChatView(!1)},n.updatePlayerInfo=function(){RoleModel.getInstance().getRoleCommon();this.updateRoleNameHandler(null),this.updateHead(),this.updateLvlAndExpHandler(),this.updateRoundHandler(),this.updateCoinHandler(),this.updateGoldHandler(),FightValueChange.getInstance().updateFightValueAll(),this.updateFigtPowerHandler()},n.updateHead=function(){var e=UrlUtil.getHeadURL(1,RoleModel.getInstance().getRoleCommon().icon);this._imageHead.load(e)},n.updateCoinHandler=function(){var e=RoleModel.getInstance().getRoleInfo().getCoin();this._txtTopCopper.text=Tools.convertNumber(e)},n.updateRoundHandler=function(){var e=RoleModel.getInstance().getRoleCommon().round;e>0?this._txtLv.text=e+"转"+RoleModel.getInstance().getRoleCommon().level:this._txtLv.text=""+RoleModel.getInstance().getRoleCommon().level},n.updateLvlAndExpHandler=function(){this.updateRoundHandler();var e=RoleModel.getInstance().getExpMax(),t=RoleModel.getInstance().getRoleCommon().exp,i=t/e;i>1&&(i=1),this._txtTopExp.text=t+"v"+e,this._imageExp.scaleX=i},n.updateLvHandler=function(){this.btn_speekPK.visible=RoleModel.getInstance().getRoleCommon().level>=FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.SPEED_PK).open_level,this.addCityWarIcon()},n.updateGoldHandler=function(){var e=RoleModel.getInstance().getRoleInfo().getGold();this._txtGold.text=Tools.convertNumber(e)},n.updateFigtPowerHandler=function(){this._txtFpower.text=RoleModel.getInstance().getAllPartnerFight()+"",FightValueChange.getInstance().startAll()},n.updateWaveInfo=function(e){this._txtSceneDes.visible=!1,this._containerShouYi.visible=!0,this._txtGuanQia.textAlign="right",this.setGuaJiInfo(),this.updateBossBtn(),this.updateLvHandler(),this.updateGuideBoss()},n.updateBossBtn=function(){var e=SceneModel.getInstance().getSceneWave().total_wave_id;e<FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.MEETPLAYER).open_hook?(this._bossBtnView||(this._bossBtnView=new MainUIBossBtnView,this._bossBtnView.x=80,this._bossBtnView.y=280),this._bossBtnView.setType(e<FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.MEETBOSS).open_hook?1:2)):this._bossBtnView&&this._bossBtnView.parent&&this._bossBtnView.parent.removeChild(this._bossBtnView)},n.changeWaveInfo=function(e){var t=this;if(this.addCityWarIcon(),SceneModel.getInstance().isHookWaveBoss()){var i=SceneModel.getInstance().getSceneWave(),n=i.wave_id,s=SceneModel.getInstance().getWaveConfig(n-1);s?(this.waveTip_cur.text=s.copper.toString(),this.waveTip_cur2.text=s.exp.toString(),s=SceneModel.getInstance().getWaveConfig(n),this.waveTip_next.htmlText="<font color='"+ColorUtil.COLOR_GREEN+"'>"+s.copper+"</font>/小时",this.waveTip_next2.htmlText="<font color='"+ColorUtil.COLOR_GREEN+"'>"+s.exp+"</font>/小时",this.waviTips.visible=!0,egret.Tween.get(this.waviTips).to({alpha:.99},3e3),this._timeId>0&&clearTimeout(this._timeId),this._timeId=setTimeout2(function(){t.waviTips.visible=!1},5e3)):(this.waviTips.visible=!1,this.waviTips.alpha=1),this.updateBtnAthRedDot(null)}},n.setGuaJiInfo=function(){var e=SceneModel.getInstance().getSceneWave(),t=e.wave_id,i=SceneModel.getInstance().getWaveConfig(t),n=(SceneModel.getInstance().getSceneInfo(i.sceneID),SceneModel.getInstance().getSceneLevelVo(i.masterLev));this._txtGuanQia.text="第"+t+"关 "+n.name+i.masterWave,this._txtCopper.text=i.copper+"/小时",this._txtExp.text=i.exp+"/小时";var s=e.kill_num;s>i.passNum&&(s=i.passNum),this._txtKillBossPro.text=s+"/"+i.passNum;var a=(-180+s/i.passNum*180,s/i.passNum);a>1&&(a=1),this._imagePro.scaleX=a,a>=1?this.showAutoEffect(!0):this.showAutoEffect(!1),e.total_wave_id>=10&&(SceneModel.getInstance().isMainCity()||SceneModel.getInstance().isHookSmall())?this.btnBoss.visible=!0:this.btnBoss.visible=!1,e.award_id>e.awarded_id?(this._btnCheckPointBoss.showRedDot=!0,this._btnCheckPointBoss.setRedDotPoint(31,7)):this._btnCheckPointBoss.showRedDot=!1},n.setSceneInfo=function(){var e=SceneModel.getInstance().id,t=SceneModel.getInstance().getSceneInfo(e),i=SceneModel.getInstance().getCurrentWaveID();if(t){if(SceneModel.getInstance().isHookWaveBoss())this._txtGuanQia.text=StringUtil.substitute("第{0}关守卫",i);else if(SceneModel.getInstance().isGuildFuben()){var n=GuildModel.getInstance().getFubenLv();this._txtGuanQia.text=StringUtil.substitute("第{0}关公会副本",n+1)}else this._txtGuanQia.text=t.sceneName;this._txtSceneDes.text=t.desc,this._txtGuanQia.textAlign="center"}},n.ShowWaveEffect=function(){EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("jindu"),140,115,this._containerKill,150)},n.autoBossChange=function(e){SceneModel.getInstance().isAutoKillBoss?this._btnAuto.setImageSource("mainUI_json.mainUI_auto2"):this._btnAuto.setImageSource("mainUI_json.mainUI_auto")},n.onMeetBoss=function(e){this.dispatchGlobalEvent(new ParamEvent(BossEvtName.OPEN_MEET_BOSS_WINDOW))},n.onGuildRed=function(e){this.dispatchGlobalEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_RED))},n.onGuildRedIconShow=function(e){this.btn_guildRed.visible=e.data},n.addMeetBossIcon=function(e){if(SceneModel.getInstance().isHookSmall()){var t=BossModel.getInstance().getMeetBossInfo();null!=t&&(this._btnMeetBoss.parent||this.addChild(this._btnMeetBoss),this.removeMeetBossEffect(),this.addMeetBossEffect())}},n.addMeetBossEffect=function(){var e=UrlUtil.getCommonEffectURL("huodong2");EffectManager.getInstance().showEffect(e,27,30,this._btnMeetBoss,70,!0,!0,2e5)},n.removeMeetBossEffect=function(){this._meetBossEffect&&(this._meetBossEffect.dispose(),this._meetBossEffect=null)},n.meetBossFinish=function(e){this._btnMeetBoss.parent&&this._btnMeetBoss.parent.removeChild(this._btnMeetBoss),this.removeMeetBossEffect()},n.initHpMp=function(){this.hpEffectMask=new egret.Rectangle(0,0,56,114),this._imgHp.mask=this.hpEffectMask,this.mpEffectMask=new egret.Rectangle(0,0,58,114),this._imgMp.mask=this.mpEffectMask},n.onChangeHpHandler=function(){var e=RoleModel.getInstance().getAllHP(),t=RoleModel.getInstance().getAllMaxHP(),i=e/t;i>1&&(i=1),this.hpEffectMask.y=114-114*i,this._imgHp.mask=this.hpEffectMask},n.onChangeMpHandler=function(){var e=RoleModel.getInstance().getAllMP(),t=RoleModel.getInstance().getAllMaxMP(),i=e/t;i>1&&(i=1),this.mpEffectMask.y=114-114*i,this._imgMp.mask=this.mpEffectMask},n.onVipRedDotsHandler=function(e){this.btnVip.showRedDot=e.data,this.btnVip.setRedDotPoint(1,-3)},n.onMailRedDotsHandler=function(e){this.btnMail.showRedDot=e.data},n.onRedDotsHandler=function(e){var t=e.data.type,i=e.data.flag;switch(t){case"skill":this.btnSkill.showRedDot=i;break;case"build":this.btnBuild.showRedDot=i;break;case"friend":this.btnFriend.showRedDot=i}},n.updateSystemData=function(e){if(!ChatModel.getInstance().isInit)return void(ChatModel.getInstance().isInit=!0);var t;for(var i in e.data)if(e.data.hasOwnProperty(i)){t=e.data[i];break}t&&(-1!=t.type_str.indexOf("2")&&(this._chatSysArr.push(t.content),this.showChatSys()),-1!=t.type_str.indexOf("3")&&(this._chatSysArr2.push(t.content),this.showChatSys2()))},n.showChatSys=function(){this._time<0&&(this._chatSysArr.length>0&&(this.mainuiChatSys.visible=!0,this.txtChatSys.htmlText=this._chatSysArr.shift(),this.txtChatSys.x=GameContent.stageWidth/2),this._time=0,RenderManager.remove(this.timeComplete,this),RenderManager.add(this.timeComplete,this))},n.showChatSys2=function(){this._time2<0&&(this._chatSysArr2.length>0&&(this.mainuiChatSys2.visible=!0,this.txtChatSys2.htmlText=this._chatSysArr2.shift(),this.txtChatSys2.x=GameContent.stageWidth/2),this._time2=0,RenderManager.remove(this.timeComplete2,this),RenderManager.add(this.timeComplete2,this))},n.timeComplete=function(){this._time++,this.mainuiChatSys.visible&&(this.txtChatSys.x-=3),this.txtChatSys.x<0&&this.txtChatSys.x+this.txtChatSys.textWidth+240<GameContent.stageWidth&&(0==this._chatSysArr.length?(this._time=-1,RenderManager.remove(this.timeComplete,this),this.mainuiChatSys.visible=!1):(this._time=0,this._chatSysArr.length>0&&(this.mainuiChatSys.visible=!0,this.txtChatSys.htmlText=this._chatSysArr.shift(),this.txtChatSys.x=GameContent.stageWidth/2)))},n.timeComplete2=function(){this._time2++,this.mainuiChatSys2.visible&&(this.txtChatSys2.x-=3),this.txtChatSys2.x<0&&this.txtChatSys2.x+this.txtChatSys2.textWidth+240<GameContent.stageWidth&&(0==this._chatSysArr2.length?(this._time2=-1,RenderManager.remove(this.timeComplete2,this),this.mainuiChatSys2.visible=!1):(this._time2=0,this._chatSysArr2.length>0&&(this.mainuiChatSys2.visible=!0,this.txtChatSys2.htmlText=this._chatSysArr2.shift(),this.txtChatSys2.x=GameContent.stageWidth/2)))},n.showTopChat=function(e){var t=this;this.txtChatSys2.x=0,this.txtChatSys2.width=GameContent.stageWidth,this.txtChatSys2.htmlText=ChatModel.getInstance().filtetSpecialChar(e.data),this.txtChatSys2.touchEnabled=!1,this.chatBg.touchEnabled=!1,this.mainuiChatSys2.visible=!0,this.mainuiChatSys2.touchEnabled=!1,this.mainuiChatSys2.touchChildren=!1,this._timeId_top>0&&clearTimeout(this._timeId_top),this._timeId_top=setTimeout(function(){t.mainuiChatSys2.visible=!1},3e3)},n.updateTask=function(e){var t=e.data;this.chatGroup.visible=0==t.task_id,this.changeChatView(this.chatGroup.visible),this._isNovice=!0,this.updateGuide()},n.changeChatView=function(e){},n.updateGuide=function(e){if(void 0===e&&(e=0),this._isNovice&&!NoviceGuideManager.getInstance().isNovice())if(TaskModel.getInstance().getCurTaskXS()==NoviceGuideType.GuideFigureTips){this._isNovice=!1;var t=this.btnFigure.parent.localToGlobal(this.btnFigure.x,this.btnFigure.y);NoviceGuideManager.getInstance().showShadeTip(this.btnFigure,"点击这里，查看人物",t,new egret.Point(t.x-50,t.y-70))}else if(TaskModel.getInstance().getCurTaskXS()==NoviceGuideType.GuideRonglianTips){this._isNovice=!1;var t=this.btnPack.parent.localToGlobal(this.btnPack.x,this.btnPack.y);NoviceGuideManager.getInstance().showShadeTip(this.btnPack,"点击打开背包",t,new egret.Point(t.x-50,t.y-70))}else if(0==SceneModel.getInstance().isAutoKillBoss&&TaskModel.getInstance().getCurTaskXS()==NoviceGuideType.AUTO_FIGHT){this._isNovice=!1;var t=this._btnAuto.parent.localToGlobal(this._btnAuto.x,this._btnAuto.y);NoviceGuideManager.getInstance().showShadeTip(this._btnAuto,"自动挑战，解放双手",t,new egret.Point(t.x-50,t.y-90))}else if(TaskModel.getInstance().getCurTaskXS()==NoviceGuideType.CheckPointBoss){this._isNovice=!1;var t=this._containerKill.parent.localToGlobal(this._containerKill.x,this._containerKill.y);NoviceGuideManager.getInstance().showShadeTip(this._containerKill,"打开BOSS",t,new egret.Point(t.x+6,t.y-45))}},n.updateNoviceTask=function(e){var t=this;this._isNovice=!0,t.updateNoviceGuide()},n.updateNoviceGuide=function(e){if(void 0===e&&(e=0),this._isNovice&&!NoviceGuideManager.getInstance().isNovice())if(TaskModel.getInstance().isNovicePlayer()){var t=TaskModel.getInstance().getCurNoviceTask();if(null==t)return;if(t.xs==NoviceGuideType.GuideFigureTips){this._isNovice=!1;var i=RoleModel.getInstance().getPartnerList()[0];if(FigureModel.getInstance().getEquipsCanWearByPartner(i)){var n=this.btnFigure.parent.localToGlobal(this.btnFigure.x,this.btnFigure.y);NoviceGuideManager.getInstance().showShadeTip(this.btnFigure,"点击这里，查看人物",n,new egret.Point(n.x-50,n.y-70))}else SceneModel.getInstance().createNoviceSceneMonster(t.template_id)}else if(t.xs==NoviceGuideType.GuideBuildStrengthenTips){this._isNovice=!1;var n=this.btnBuild.parent.localToGlobal(this.btnBuild.x,this.btnBuild.y);NoviceGuideManager.getInstance().showShadeTip(this.btnBuild,"打开强化",n,new egret.Point(n.x-47,n.y-70))}}else{this.removeGlobalEventListener(DailyEvtName.FIXED_DATA_UPDATE,this.updateNoviceTask,this);var n=this._btnMainCity.parent.localToGlobal(this._btnMainCity.x,this._btnMainCity.y);this.removeNoviceTaskView(),this.showTaskView(),TaskModel.getInstance().isNoviceTaskExit=!0,this._btnMainCityMask.visible=!1,this._isNovice=!1,NoviceGuideManager.getInstance().showShadeTip(this._btnMainCity,"点击这里，挂机",n,new egret.Point(n.x-33,n.y-53))}},n.guildGuideStart=function(e){var t=this.btnBuild.parent.localToGlobal(this.btnBuild.x,this.btnBuild.y);NoviceGuideManager.getInstance().showShadeTip(this.btnBuild,"打开强化",t,new egret.Point(t.x-47,t.y-70))},n.updateGuideBoss=function(){},n.showAutoEffect=function(e){},n.onFigureRedDotsHandler=function(){this.btnFigure.showRedDot=RedDotsModel.getInstance().main_roleIconRedDot},n.onBagRedDotsHandler=function(){this.btnPack.showRedDot=RedDotsModel.getInstance().main_bagIconRedDot},n.onTargetRedDotsHandler=function(){this.btnTarget.showRedDot=RedDotsModel.getInstance().main_artifactIconRedDot,this.btnTarget.setRedDotPoint(15,1)},n.updatePKinfo=function(e){},n.updateBtnAthRedDot=function(e){var t=this,i=!1,n=!1,s=!1,a=!1;if(FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_46,!1)){var o=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2021),r=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2022);n=o||r}else n=!1;var h=SceneModel.getInstance().getSceneWave(),l=h.total_wave_id;l>=20&&(i=!0);var d=MeetPlayerModel.getInstance().getPkInfo(),_=!0;(null==d||0==d.meet_roles.length)&&(_=!1);var c=HuoDongDailyModel.getInstance().kaiFuDay>=Number(FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_42).open_day),u=HuoDongDailyModel.getInstance().kaiFuDay>=Number(FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_44).open_day);s=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2016)&&c,a=RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2018)&&u,t._btnAth.showRedDot=(n||s||a||_)&&i},n.updateBtnTrainRedDot=function(e){var t=this,i=ArtifactModel.getInstance().getArtifactsCanupOrActive(),n=AwakeModel.getInstance().isUpAwake,s=MagicPetModel.getInstance().checkWeaponUpable(),a=!1;a=FunctionOpenModel.getInstance().check(FunctionOpenModel.KEY_45,!1)?RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2020)||ShadowModel.getInstance().isEquipUpgradeAll||ShadowModel.getInstance().isJieUpgradeAll:!1,t._btnTrain.showRedDot=i||n||s||a},n.addCityWarIconHandler=function(e){this.addCityWarIcon()},n.addCityWarIcon=function(){if((CityWarModel.getInstance().isOpen()||CityWarModel.getInstance().isOpenCityWar)&&!(RoleModel.getInstance().getRoleCommon().level<70)){var e=SceneModel.getInstance().getSceneWave();if(null!=e){var t=e.total_wave_id;if(!(20>t)&&SceneModel.getInstance().isHookSmall()){var i=this;if(null==i._cityWarIcon){null==i._effContainer&&(i._effContainer=new egret.Sprite),i._effContainer.x=574,i._effContainer.y=388,i._effContainer.touchEnabled=!0,i._effContainer.touchChildren=!0,i._pic=new PicLoader,i._effContainer.addChild(i._pic);var n=UrlUtil.getOtherIcon("jzsc");i._pic.load(n),i._pic.x=-55,i._pic.y=-120,i._pic.touchEnabled=!0,i._cityWarIcon=new UIEffect,n=UrlUtil.getCommonEffectURL("shacheng"),i._cityWarIcon.showEffect(n,0,0,i._effContainer,70,!0),i._pic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCityWarIcon,this)}i.addChildAt(i._effContainer,0)}}}},n.removeCityWarIcon=function(){var e=this;e._effContainer&&e._effContainer.parent&&(e._effContainer.parent.removeChild(e._effContainer),e._effContainer.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickCityWarIcon,e),e._cityWarIcon&&(e._cityWarIcon.dispose(),e._cityWarIcon=null),e._pic&&e._effContainer.contains(e._pic)&&(e._effContainer.removeChild(e._pic),e._pic.dispose(),e._pic=null),e._effContainer=null)},n.onClickCityWarIcon=function(e){this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.SHOW_CITYWAR_VIEW))},n.sceneChange=function(e){var t=this;if(SceneModel.getInstance().isHookSmall()){if(t.btn_guildRed){var i=GuildModel.getInstance().getRedArr();i&&i.length>0?t.btn_guildRed.visible=!0:t.btn_guildRed.visible=!1}if(t._btnMeetBoss){var n=BossModel.getInstance().getMeetBossInfo();t._btnMeetBoss.visible=!(null==n)}}else t.setSceneInfo(),t.btn_speekPK.visible=!1,t._containerShouYi.visible=!1,t._txtSceneDes.visible=!0,t._btnMeetBoss&&(t._btnMeetBoss.visible=!1),t.btn_guildRed&&(t.btn_guildRed.visible=!1)},n.onOpenEditName=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.MAINUI_CLICK_NAME))},n.updateRoleNameHandler=function(e){this._txtName.htmlText=""+RoleModel.getInstance().getRoleCommon().name,this._txtResetName.x=this._txtName.x+this._txtName.textWidth+5},n.onShowBtnBuffHandler=function(){this.btnBuff.visible=FanLiModel.getInstance().blessBuffList.length>0},n.onClickBtnBoss=function(){this.dispatchGlobalEvent(new ParamEvent(BossEvtName.OPEN_BOSS_WINDOW))},n.onClickBtnKillBoss=function(){0!=GoodsListProxy.getInstance().checkBagGridResNum(20)&&this.dispatchGlobalEvent(new ParamEvent(CheckPointBossEvtName.CHECKPOINTBOSS_ENTER))},n.onClickBtnFuben=function(){this.dispatchGlobalEvent(new ParamEvent(FubenEvtName.OPEN_FUBEN_VIEW))},n.onClickBtnTarget=function(){var e=new ParamEvent(ArtifactEvtName.ARTIFACT_OPEN_WINDOW);e.data={index:0,isOpen:!0},this.dispatchGlobalEvent(e)},n.onClickChatView=function(e){var t=this;t.onClickBtnChat()},n.onGMShowMainUI=function(e){var t=e.data.type;this.visible=t},n.showTaskView=function(){var e=this;null==e.mainUI_task&&(e.mainUI_task=new TaskView,e.addChild(e.mainUI_task),e.mainUI_task.horizontalCenter=0,e.mainUI_task.y=837)},n.showNoviceTaskView=function(){var e=this;e._noviceTaskView=new NoviceTaskView,e.addChild(e._noviceTaskView),e._noviceTaskView.horizontalCenter=0,e._noviceTaskView.y=837},n.removeNoviceTaskView=function(){var e=this;e._noviceTaskView&&(e._noviceTaskView.parent&&e._noviceTaskView.parent.removeChild(e._noviceTaskView),e._noviceTaskView.dispose(),e._noviceTaskView=null)},t}(BaseView);egret.registerClass(mainUI,"mainUI",["INoviceGuide"]);var BuyWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/mall/BuyWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.GET_MATERIAL,this.setImageTitle("title_buy"),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.numStep.addEventListener(CustomNumberStep2.CHANGE,this.onChange,this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.onChange=function(){this.txtTol.text=(this._shopVo.con_gold*this.numStep.getValue()).toString()},n.onBuy=function(){RoleModel.getInstance().CheckGold(Number(this.txtTol.text))&&(GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MallEvtName.MALL_CCMD11004,{id:this._shopVo.template_id,num:this.numStep.getValue()})),this.isPop=!1)},n.setData=function(e){var t=GoodsListProxy.getInstance().getGoodsInfoByType(e);t&&(this.item.data=t,this.txtName.htmlText="<font color='"+ColorUtil.getGoodColor(t.quality-1)+"'>"+t.name+"</font>",this._shopVo=MallModel.getInstance().getShopByTypeId(MallModel.MALL_TYPE_1,t.template_id),this.txtCost.text=this._shopVo.con_gold.toString(),this.txtTol.text=this._shopVo.con_gold.toString())},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_buy")},n.dispose=function(){e.prototype.dispose.call(this),this.btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.numStep.removeEventListener(CustomNumberStep2.CHANGE,this.onChange,this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},t}(LayeroutWindow);egret.registerClass(BuyWindow,"BuyWindow");var LevelSellItem=function(e){function t(t){e.call(this),this._ind=0,this._ind=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/mall/LevelSellItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_UP,this.checkEnable,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_ROUND_CHANGE,this.checkEnable,this)},s.setData=function(e){this._vo=e,0==this._vo.lv?this._imgType.source=RES.getRes("share_json.share_word_round"):this._imgType.source=RES.getRes("share_json.share_word_lvl"),this._vo.lv>0?this._txtNum.text=this._vo.lv+"":this._vo.round>0&&(this._txtNum.text=this._vo.round+""),this.checkEnable()},s.checkEnable=function(){var e=RoleModel.getInstance().getRoleCommon().level,t=RoleModel.getInstance().getRoleCommon().round;this._vo.lv>0?e<this._vo.lv?(this.filters=[Tools.GrayFilter],this.touchEnabled=this.touchChildren=!1):(this.filters=[],this.touchEnabled=this.touchChildren=!0):this._vo.round>0&&(t<this._vo.round?(this.filters=[Tools.GrayFilter],this.touchEnabled=this.touchChildren=!1):(this.filters=[],this.touchEnabled=this.touchChildren=!0))},i(s,"vo",function(){return this._vo}),s.setSelected=function(e){},s.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),RoleModel.getInstance().removeEventListener(RoleModel.ROLE_LV_UP,this.checkEnable,this),RoleModel.getInstance().removeEventListener(RoleModel.ROLE_ROUND_CHANGE,this.checkEnable,this)},t}(Csprite);egret.registerClass(LevelSellItem,"LevelSellItem");var LevelSellWindow=function(e){function t(t){void 0===t&&(t=0),e.call(this),this._itemArr=[],this._itemAwardArr=[],this._sid=0,this._delaySI=0,this._resTime=0,this._sid=t,this.skinName="resource/game_skins/mall/LevelSellWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this);var t=new eui.TileLayout;t.paddingTop=3,t.paddingLeft=3,t.paddingRight=3,t.paddingBottom=3,this._itemContainer.layout=t,t.horizontalGap=20,t.verticalGap=6;var i=new eui.TileLayout;i.paddingTop=3,i.paddingLeft=3,i.paddingRight=3,i.paddingBottom=3,this._itemAwardContainer.layout=i,i.horizontalGap=20,i.verticalGap=20,this.setImageWindowTitle("title_levelSell"),this.onBtnReturnSetIndex();for(var n,s=MallModel.getInstance().getShopLevelConfig(),a=0;a<s.length;a++)n=new LevelSellItem(a+1),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemLinkClick,this),n.setData(s[a]),this._itemContainer.addChild(n),this._itemArr.push(n);if(0==this._sid)this.setSelected(this._itemArr[0]);else{var o;for(var r in this._itemArr)if(this._itemArr[r].vo.template_id==this._sid){o=this._itemArr[r];break}o&&this.setSelected(o)}this.delayH(),this.dispatchGlobalEvent(new ParamEvent(MallEvtName.CCMD22700))},n.delayH=function(){var e=this;this._selectedItem.x>0||this._selectedItem.y>0?(this._imgSelected.x=this._itemContainer.x+this._selectedItem.x-13,this._imgSelected.y=this._itemContainer.y+this._selectedItem.y-13):this._delaySI=setTimeout2(function(){e.delayH()},300)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().addEventListener(MallEvtName.CCMD22700_UPDATE,this.updateInfo,this)},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().removeEventListener(MallEvtName.CCMD22700_UPDATE,this.updateInfo,this),clearTimeout(this._delaySI),TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text=""},n.itemLinkClick=function(e){this.setSelected(e.currentTarget)},n.setSelected=function(e){this._selectedItem=e,this._imgSelected.x=this._itemContainer.x+this._selectedItem.x-13,this._imgSelected.y=this._itemContainer.y+this._selectedItem.y-13,this.updateInfo()},n.clearAward=function(){for(var e,t=this._itemAwardArr.length,i=0;t>i;i++)e=this._itemAwardArr[i],e.parent&&e.parent.removeChild(e),e.data=null,e.dispose(),e=null;this._itemAwardArr=[]},n.onOkHandler=function(){return this._node&&this._node.last_time<=0?void Message.show("已过期，无法购买"):RoleModel.getInstance().getRoleInfo().getGold()<this._selectedItem.vo.con_gold?void this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN)):void this.dispatchGlobalEvent(new ParamEvent(MallEvtName.CCMD22710,{shop_id:this._selectedItem.vo.template_id}))},n.updateInfo=function(){var e=MallModel.getInstance().getShopLevelData(this._selectedItem.vo.template_id);this._node=e;var t=this._selectedItem.vo;this._txtCon.text=t.con_gold+"",this._txtOrCon.text="原价："+t.original_price,this.clearAward();for(var i,n=t.goodsList,s=0;s<n.length;s++)i=new GoodsItemSmall,i.data=GoodsListProxy.getInstance().getGoodsInfoByType(n[s].asset_id),i.num=n[s].value,this._itemAwardContainer.addChild(i),this._itemAwardArr.push(i);null!=e&&(0==e.flag?(this._stateGroup.visible=!0,this._btnOK.visible=!0,this._txtState.visible=!1,this._resTime=e.last_time,this._resTime>0?(TimerManager.getInstance().add(1e3,this.onTimer,this),this.onTimer()):(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text="已过期")):(this._stateGroup.visible=!1,this._btnOK.visible=!1,this._txtState.visible=!0,TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text=""))},n.onTimer=function(){this._resTime--,this._resTime>0?this._txtTime.text=TimeUtil.getTime5(this._resTime)+"后，将痛失购买机会":(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text="已过期")},t}(LayeroutWindow);egret.registerClass(LevelSellWindow,"LevelSellWindow");var MallContent=function(e){function t(){e.call(this),this._flushCost=0,this._coinCost=0,this._goldCost=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/mall/MallContentSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.addGlobalEventListener(MallEvtName.MALL_CCMD11000_UPDATE,this.updateData,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEMALLPOINT,this.updatePointHandler,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEGOLD,this.updateGoldHandler,this),this.btnBuyAll.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.btnFlush.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFlush,this),this._flushCost=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_13).value),this.txtCost.text=this._flushCost.toString(),this.txtPoint.text=RoleModel.getInstance().getRoleInfo().getMallPoint().toString()},n.onBuy=function(){RoleModel.getInstance().CheckGold(this._goldCost)&&RoleModel.getInstance().CheckCoin(this._coinCost)&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MallEvtName.MALL_REQUEST,11002))},n.onFlush=function(){RoleModel.getInstance().CheckGold(this._flushCost)&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MallEvtName.MALL_REQUEST,11003))},n.updatePointHandler=function(){this.txtPoint.text=RoleModel.getInstance().getRoleInfo().getMallPoint().toString()},n.updateGoldHandler=function(){this.txtCost2.text=RoleModel.getInstance().getRoleInfo().getGold().toString()},n.updateData=function(e){this.txtCost2.text=RoleModel.getInstance().getRoleInfo().getGold().toString(),this._last_time=e.data.last_time,this._listData=e.data.shop_smlist;
var t,i=new eui.ArrayCollection;this._coinCost=0,this._goldCost=0;for(var n=0;n<this._listData.length;n++)t=new MallSmVo,t.mallInfo=MallModel.getInstance().getSMBasic(this._listData[n].template_id),t.goodsInfo=GoodsListProxy.getInstance().getGoodsInfoByType(t.mallInfo.id),t.discount=this._listData[n].discount,i.addItem(t),this.updateCost(t);this.mallList.dataProvider=i,this._last_time>0&&(this.txtTime.text=TimeUtil.getTime(this._last_time),TimerManager.getInstance().remove(1e3,this.onShowTime,this),TimerManager.getInstance().add(1e3,this.onShowTime,this))},n.onShowTime=function(){this._last_time--,this._last_time>0?this.txtTime.text=TimeUtil.getTime(this._last_time):(this.txtTime.text="0",TimerManager.getInstance().remove(1e3,this.onShowTime,this))},n.updateCost=function(e){var t=1;e.discount>0&&(t=e.discount/10),e.mallInfo.con_coin>0?this._coinCost+=Math.ceil(e.mallInfo.con_coin*t):this._goldCost+=Math.ceil(e.mallInfo.con_gold*t)},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(1e3,this.onShowTime,this),this.removeGlobalEventListener(MallEvtName.MALL_CCMD11000_UPDATE,this.updateData,this),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGEMALLPOINT,this.updatePointHandler,this),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGEGOLD,this.updateGoldHandler,this),this.btnBuyAll.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.btnFlush.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onFlush,this)},t}(BaseView);egret.registerClass(MallContent,"MallContent");var MallContent2=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/mall/MallContentSkin2.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiComplementHandler,e),e.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,e.updateDailyNum,e),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEMALLPOINT,e.updatePointHandler,e),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEGOLD,e.updateGoldHandler,e),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEFEAT,e.updateFeatHandler,e),e.txtlink.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTxtLink,e),e.mallIcon=new PicLoader,e.mallIcon.x=86,e.mallIcon.y=3,e.contentGroup.addChild(e.mallIcon),e._arrItem=[]},n.updateGoldHandler=function(){var e=this;e._type==MallModel.MALL_TYPE_1&&(e.txtCount.text=RoleModel.getInstance().getRoleInfo().getGold().toString())},n.updatePointHandler=function(){var e=this;e._type==MallModel.MALL_TYPE_2&&(e.txtCount.text=RoleModel.getInstance().getRoleInfo().getMallPoint().toString())},n.updateFeatHandler=function(){var e=this;e._type==MallModel.MALL_TYPE_3&&(e.txtCount.text=RoleModel.getInstance().getRoleInfo().getFeat().toString())},n.updateDailyNum=function(){var e=this;e.updateData(e._type)},n.updateData=function(e){var t=this;t._type!=e&&(t.mallScroller.viewport.scrollV=0),t._type=e;var i,n,s=MallModel.getInstance().getShopByType(e),a=0;t.mallList.removeChildren();for(var o=0;o<s.length;o++)i=new MallVo,i.mallInfo=s[o],i.goodsInfo=GoodsListProxy.getInstance().getGoodsInfoByType(i.mallInfo.id),i.mallType=e,(e==MallModel.MALL_TYPE_1&&0==s[o].hide||e!=MallModel.MALL_TYPE_1)&&(n=t._arrItem[a],n||(n=new MallListItem2,t._arrItem.push(n)),n.data=i,n.y=118*a,t.mallList.addChild(n),a++);var r;switch(e){case MallModel.MALL_TYPE_1:t.txtMy.text="我的元宝：",t.txtCount.text=RoleModel.getInstance().getRoleInfo().getGold().toString(),t.mallIcon.load(UrlUtil.getSmallPic(2)),t.txtlink.htmlText="<u>获取元宝</u>",t.txtlink.visible=!0,t.contentGroup.x=95;break;case MallModel.MALL_TYPE_2:t.txtMy.text="我的积分：",t.txtCount.text=RoleModel.getInstance().getRoleInfo().getMallPoint().toString(),t.mallIcon.load(UrlUtil.getSmallPic(7)),t.txtlink.htmlText="神秘商店元宝购买或刷新道具获得",t.txtlink.visible=!0,t.contentGroup.x=10;break;case MallModel.MALL_TYPE_3:t.txtMy.text="我的功勋：",t.txtCount.text=RoleModel.getInstance().getRoleInfo().getFeat().toString(),t.mallIcon.load(UrlUtil.getSmallPic(8)),t.txtlink.htmlText="<u>获取道具</u>",t.txtlink.visible=!1,t.contentGroup.x=95;break;case MallModel.MALL_TYPE_4:t.txtMy.text="我的令牌：",t.txtCount.text=GoodsListProxy.getInstance().findGoodNumber(17510002).toString(),t.mallIcon.load(UrlUtil.getSmallPic(17510002)),t.txtlink.htmlText="令牌通过寻宝获得",t.txtlink.visible=!0,t.contentGroup.x=95;break;case MallModel.MALL_TYPE_5:r=GoodsListProxy.getInstance().getGoodsInfoByType(17530001),t.txtMy.text="我的"+r.name+"：",t.txtCount.text=GoodsListProxy.getInstance().findGoodNumber(r.template_id).toString(),t.mallIcon.load(UrlUtil.getSmallPic(r.pic)),t.txtlink.htmlText="",t.txtlink.visible=!0,t.contentGroup.x=95}},n.onTxtLink=function(){var e=this;e._type==MallModel.MALL_TYPE_1&&e.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,t.updateDailyNum,t),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGEMALLPOINT,t.updatePointHandler,t),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGEGOLD,t.updateGoldHandler,t),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGEFEAT,t.updateFeatHandler,t),t.txtlink.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onTxtLink,t),t.mallIcon&&(t.mallIcon.parent&&t.mallIcon.parent.removeChild(t.mallIcon),t.mallIcon.dispose(),t.mallIcon=null);for(var i,n=0;n<t._arrItem.length;n++)i=t._arrItem[n],i&&i.parent&&(i.parent.removeChild(i),i.dispose(),i=null);t._arrItem=null},t}(BaseView);egret.registerClass(MallContent2,"MallContent2");var MallListItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/mall/MallListItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.item.showLv(!1),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.iconZhe=new PicLoader,this.addChild(this.iconZhe)},n.onBuy=function(){(0==this._vo.mallInfo.con_coin&&RoleModel.getInstance().CheckGold(this._sale)||this._vo.mallInfo.con_coin>0&&RoleModel.getInstance().CheckCoin(this._sale))&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MallEvtName.MALL_CCMD11001,this._vo.mallInfo.template_id))},n.dataChanged=function(){this._vo=this.data;var e=this._vo.mallInfo.name.split("(");this.itemName.htmlText="<font color='"+ColorUtil.getGoodColor(this._vo.goodsInfo.quality-1)+"'>"+e[0]+"</font>("+e[1],this.item.data=this._vo.goodsInfo,this.item.num=this._vo.mallInfo.num,this.nameBg.source="mallNameBg_"+(this._vo.goodsInfo.quality-1);var t=1;this._vo.discount>0?(t=this._vo.discount/10,this.iconZhe.load("resource/assets/icon/mall/mall_zhe_"+this._vo.discount+".png"),this.iconZhe.visible=!0):this.iconZhe.visible=!1,this._vo.mallInfo.con_coin>0?(this._sale=Math.ceil(this._vo.mallInfo.con_coin*t),this.mallIcon.source="image_copper"):(this._sale=Math.ceil(this._vo.mallInfo.con_gold*t),this.mallIcon.source="mainUI_json.image_gold2"),this.txtSale.text=this._sale>=1e5?Math.ceil(this._sale/1e4)+"万":this._sale.toString()},t}(eui.ItemRenderer);egret.registerClass(MallListItem,"MallListItem");var MallListItem2=function(e){function t(){e.call(this);var t=this;t.addEventListener(eui.UIEvent.COMPLETE,t.uiComplementHandler,t),t.skinName="resource/game_skins/mall/MallListItemSkin2.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiComplementHandler,e),e.item.showLv(!1),e.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onBuy,e),e.mallIcon=new PicLoader,e.mallIcon.x=129,e.mallIcon.y=75,e.addChild(e.mallIcon),e.mallIcon2=new PicLoader,e.mallIcon2.x=275,e.mallIcon2.y=72,e.mallIcon.load(UrlUtil.getSmallPic(7)),e.addChild(e.mallIcon2)},n.onBuy=function(){var e=this;e._vo.mallType==MallModel.MALL_TYPE_1?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.OPEN_BUY_WINDOW,e._vo.goodsInfo.template_id)):(AccessGoodFlyEffectManager.getInstance().flyArray([e._vo.goodsInfo.pic],null,new Point(150,900)),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MallEvtName.MALL_CCMD11004,{id:e._vo.mallInfo.template_id,num:1})))},n.dataChanged=function(){var e=this;if(e._vo=e.data,e.itemName.htmlText="<font color='"+ColorUtil.getGoodColor(e._vo.goodsInfo.quality-1)+"'>"+e._vo.mallInfo.name+"</font>",e.item.data=e._vo.goodsInfo,e.item.num=e._vo.mallInfo.num,e.nameBg.source="mallNameBg_"+(e._vo.goodsInfo.quality-1),e._vo.mallInfo.con_feats>0?(e.txtSale.text=e._vo.mallInfo.con_feats.toString(),e.mallIcon.load(UrlUtil.getSmallPic(8))):(e.txtSale.text=e._vo.mallInfo.con_gold.toString(),e.mallIcon.load(UrlUtil.getSmallPic(2))),e._vo.mallInfo.con_mallpoint>0?(e.txtSale2.text=e._vo.mallInfo.con_mallpoint.toString(),e.txtSale2.visible=!0,e.mallIcon2.visible=!0):(e.txtSale2.text="0",e.txtSale2.visible=!1,e.mallIcon2.visible=!1),e._vo.mallInfo.con_item){var t=e._vo.mallInfo.con_item[0].info,i=e._vo.mallInfo.con_item[0].num,n=GoodsListProxy.getInstance().findGoodNumber(t.template_id);e.txtSale.htmlText=ColorUtil.getColorHtmlStr(i,i>n?ColorUtil.COLOR_RED:ColorUtil.COLOR_GREEN),e.txtSale2.text="",e.mallIcon.load(UrlUtil.getSmallPic(t.pic)),e.mallIcon.visible=!0,e.mallIcon2.visible=!1}if(e._vo.mallType>=MallModel.MALL_TYPE_3&&e._vo.mallInfo.buy_limit>0){var s=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_3,e._vo.mallInfo.template_id);e.txtCount.text="今日已兑换："+s+"/"+e._vo.mallInfo.buy_limit,e.txtCount.visible=!0,s>=e._vo.mallInfo.buy_limit?(e.bm_over.visible=!0,e.btnBuy.visible=!1):(e.bm_over.visible=!1,e.btnBuy.visible=!0)}else e.txtCount.visible=!1,e.bm_over.visible=!1,e.btnBuy.visible=!0},n.dispose=function(){var e=this;e.btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onBuy,e),e.mallIcon&&(e.mallIcon.parent&&e.mallIcon.parent.removeChild(e.mallIcon),e.mallIcon.dispose(),e.mallIcon=null),e.mallIcon2&&(e.mallIcon2.parent&&e.mallIcon2.parent.removeChild(e.mallIcon2),e.mallIcon2.dispose(),e.mallIcon2=null)},t}(eui.ItemRenderer);egret.registerClass(MallListItem2,"MallListItem2");var MallWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/mall/MallViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.tabBar.dataProvider=new eui.ArrayCollection(["神秘商城","道具商城","积分商城","功勋商城"])},n.onBarItemTap=function(e){this.showIndex(this.tabBar.selectedIndex)},n.showIndex=function(e){switch(void 0===e&&(e=0),this.tabBar.selectedIndex=e,this._selectContent&&this._selectContent.parent&&this._selectContent.parent.removeChild(this._selectContent),e>0?(this._other||(this._other=new MallContent2),this.mallContent.addChild(this._other),this._selectContent=this._other):(this._sm||(this._sm=new MallContent),this.mallContent.addChild(this._sm),this._selectContent=this._sm),e){case 0:this.dispatchGlobalEvent(new ParamEvent(MallEvtName.MALL_REQUEST,11e3));break;case 1:this._other.updateData(MallModel.MALL_TYPE_1);break;case 2:this._other.updateData(MallModel.MALL_TYPE_2);break;case 3:this._other.updateData(MallModel.MALL_TYPE_3)}},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this)},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this._sm&&(this._sm.parent&&this._sm.parent.removeChild(this._sm),this._sm.dispose(),this._sm=null),this._other&&(this._other.parent&&this._other.parent.removeChild(this._other),this._other.dispose(),this._other=null)},t}(LayeroutWindow);egret.registerClass(MallWindow,"MallWindow");var ShopCheapWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/mall/ShopCheapWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),e.prototype.onBtnReturnSetIndex.call(this),this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/shopCheap/shopCheapBg.png"),this._viewContainer.addChildAt(this.imageBg,0),this.imageBg2=new PicLoader,this.imageBg2.touchEnabled=!1,this.imageBg2.y=-50,this.imageBg2.load("resource/assets/icon/shopCheap/shopCheap_title.png"),this.titleGroup.addChild(this.imageBg2),this.imageContent=new PicLoader,this.imageContent.load("resource/assets/icon/shopCheap/shopCheapTitle_1.png"),this._viewContainer.addChild(this.imageContent),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this._btnCach=[],this.createIcons(),this.txtNum.addMiaoBian(),this.txtNum.touchEnabled=!1,this.txtNum2.addMiaoBian(),this.txtNum2.touchEnabled=!1},n.createIcons=function(){this._dataArr=MallModel.getInstance().getShowIconList(),this._isKaifu=HuoDongDailyModel.getInstance().kaiFuDay<=8;var e;e=this._isKaifu?DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_54):DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_46);var t,i,n,s='<e:Skin class="skins.ButtonSkin" states="up,down" xmlns:e="http://ns.egret.com/eui">\n                <e:Image width="100%" height="100%"\n                         source="{0}"\n                         source.down="{0}"/>\n            </e:Skin>',a=0;this._nextId=0;for(var o=0;o<this._dataArr.length;o++)i=this._dataArr[o],t=this._btnCach[o],t||(t=new CustomButton,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this),t.data=i,this._btnCach.push(t)),t.x=100*a+20,t.y=15,this._nextId=1e3*i.type+e+1,i.template_id<=this._nextId?(n="resource/assets/icon/shopCheap/shopCheapBtn_"+i.show+".png",this._nextId==i.template_id&&(this._vo=i,this._selectImage.x=t.x-17,this._selectImage.y=t.y-17)):n="shopCheap_lock",t.skinName=StringUtil.substitute(s,n),a++,this._iconContainer.addChild(t);this._iconContainer.addChild(this._selectImage),this._vo?e>4&&(this._scroller.viewport.scrollH=115*(e-4)):(this._vo=this._dataArr[0],this._selectImage.x=this._btnCach[0].x-17,this._selectImage.y=this._btnCach[0].y-17),this.updateView()},n.clickIcon=function(e){var t=e.currentTarget;return t.data.template_id>this._nextId?void Message.show("请先购买前一个礼包"):(this._selectImage.x=t.x-17,this._selectImage.y=t.y-17,this._vo=t.data,void this.updateView())},n.updateView=function(){for(var e,t=this._vo.show_item,i=0;8>i;i++)e=this["item_"+i],t[i]?(e.data=t[i].info,e.visible=!0):e.visible=!1;this.txtNum.text=this._vo.cost.toString(),this.txtNum2.text=this._vo.con_gold.toString(),this.txtCost.text=Math.floor(100*this._vo.cost/this._vo.con_gold).toString();var n;this._isKaifu?(this.imageContent.load("resource/assets/icon/shopCheap/shopCheapTitle_"+this._vo.show_pic+"s.png"),n=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_54)):(this.imageContent.load("resource/assets/icon/shopCheap/shopCheapTitle_"+this._vo.show_pic+".png"),n=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_46)),this.btnGroup.visible=1e3*this._vo.type+n<this._vo.template_id,this.image_over.visible=!this.btnGroup.visible},n.onBuy=function(){if(RoleModel.getInstance().CheckGold(Number(this.txtNum2.text))){this._isKaifu?this.dispatchGlobalEvent(new ParamEvent(MallEvtName.CCMD21200)):this.dispatchGlobalEvent(new ParamEvent(MallEvtName.CCMD19500));for(var e=[],t=new eui.ArrayCollection,i=0;i<this._vo.show_item.length;i++)t.addItem(this._vo.show_item[i]),e.push(this._vo.show_item[i].info.pic);AccessGoodFlyEffectManager.getInstance().flyArray(e)}},n.updateDaily=function(){this.createIcons()},n.onHelp=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.SHOP_CHEAP))},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null),this.imageBg2&&(this.imageBg2.dispose(),this.imageBg2=null),this.imageContent&&(this.imageContent.dispose(),this.imageContent=null);for(var t,i=0;i<this._btnCach.length;i++)t=this._btnCach[i],t.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this),t.dispose(),t=null;this._btnCach=null;for(var n,s=0;8>s;s++)n=this["item_"+s],n.data=null,n.dispose()},t}(LayeroutWindow);egret.registerClass(ShopCheapWindow,"ShopCheapWindow");var MPRecordItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/meetPlayer/MPRecordItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._goodsItemCach=new Array},n.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.setData(t)},n.setData=function(e){var t=StringUtil.substitute("<font color='#CA9862'>遭遇玩家:</font><font color='#0396d3'>{0}</font>",e.name);this._txtName.htmlText=t,this._txtTime.text=TimeUtil.formatTime(1e3*e.ctime),0==e.flag?(this._imageColor.source=RES.getRes("meetPlayer_json.mp_record_gray"),this._imageTxt.source=RES.getRes("meetPlayer_json.mp_record_fail"),this._imageXX.source=RES.getRes("meetPlayer_json.mp_record_xx2")):(this._imageColor.source=RES.getRes("meetPlayer_json.mp_record_red"),this._imageTxt.source=RES.getRes("meetPlayer_json.mp_record_success"),this._imageXX.source=RES.getRes("meetPlayer_json.mp_record_xx"));for(var i,n=e.drop_list,s=0;s<n.length;s++){i=this._goodsItemCach[s],null==i&&(i=new GoodsItem,this._goodsItemCach.push(i));var a=GoodsListProxy.getInstance().getGoodsInfoByType(n[s].asset_id);a.num=n[s].value,i.data=a,i.x=60+125*s,i.y=97,this.addChild(i)}},n.dispose=function(){for(var e,t=0;t<this._goodsItemCach.length;t++)e=this._goodsItemCach[t],this.contains(e)&&this.removeChild(e),e.dispose(),e=null},t}(eui.ItemRenderer);egret.registerClass(MPRecordItem,"MPRecordItem");var MPRecordWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/meetPlayer/MeetPlayerRecordSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this._model=MeetPlayerModel.getInstance(),this._itemCach=new Array,this.resGroupName=GModuleResGroupName.MEETPLAYER,this.setImageTitle("meetPlayer_json.mp_record_head"),this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseView,this)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._model.addEventListener(MeetPlayerEvtName.UPDATE_MP_RECORD,this.update,this),this.dispatchGlobalEvent(new ParamEvent(MeetPlayerEvtName.REQUEST_13303))},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this._model.removeEventListener(MeetPlayerEvtName.UPDATE_MP_RECORD,this.update,this)},n.update=function(e){var t=this._model.getPKLog(),i=t.meet_pk_logs;null==this._dataGrpArr&&(this._dataGrpArr=new eui.ArrayCollection,this._container.dataProvider=this._dataGrpArr),this._dataGrpArr.replaceAll(i)},n.clear=function(){for(;this._container.numChildren>0;)this._container.removeChildAt(0)},n.onCloseView=function(e){this.isPop=!1},t}(LayeroutWindow);egret.registerClass(MPRecordWindow,"MPRecordWindow");var MPWildView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/meetPlayer/MPWildViewSkin.exml",this._model=MeetPlayerModel.getInstance(),this._itemCach=new Array}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._btnRecord.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRecord,this),this._txtSeeRank.htmlText="<font color='#16B716'><u><a href='event:'>查看排名</a></u></font>",this._txtSeeRank.addEventListener(egret.TextEvent.LINK,this.onClickLink,this),this._imageJMD.source=UrlUtil.getSmallPic(11020001),this._isInit=!0,this._tmpData&&this.updateInfo()},n.onClickRecord=function(e){this.dispatchGlobalEvent(new ParamEvent(MeetPlayerEvtName.SHOW_MEETPLAYER_RECORDVIEW))},n.updateInfo=function(){var e=this._model.getPkInfo();if(this._tmpData=e,this._isInit){this.setMyInfo(e);var t,i,n=e.meet_roles;this.clearAllItem();var s=0;for(s=0;s<n.length;s++)i=n[s],t=this._itemCach[s],null==t&&(t=new MeetPlayerItem,this._itemCach.push(t)),t.setData(i),t.x=0,t.y=8+117*s,this._container.addChild(t);(e.reflash_time>0||n.length<4)&&(t=this._itemCach[n.length],null==t&&null==t&&(t=new MeetPlayerItem,this._itemCach.push(t)),0==e.reflash_time?t.setFindEnermy(1800):t.setFindEnermy(e.reflash_time),t.x=0,t.y=8+117*s,this._container.addChild(t))}},n.clearAllItem=function(){for(;this._container.numChildren>0;)this._container.removeChildAt(0)},n.setMyInfo=function(e){var t=RoleModel.getInstance().getRoleCommon();this._imageHead.setHeadURLByPartner(t.icon,t.career,t.sex);var i=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_15);this._txtHonor.htmlText=StringUtil.substitute("<font color='#ffff00'>{0}</font><font color='#28ff28'>({1}名)</font>",i,e.rank_num);var n=RankModel.getInstance().getPkVo(e.rank_num);e.rank_num>200||0==e.rank_num?(this._txtTong.text="0",this._txtNum.text="0"):(this._txtTong.text=n.add_coin/1e4+"万",this._txtNum.text=n.item_num.toString());var s=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_16);this._txtLianSheng.htmlText=StringUtil.substitute("<font color='#CA9862'>今日胜利场次:</font><font color='#28ff28'>{0}</font>",s),this._txtNext.htmlText=StringUtil.substitute("<font color='#28ff28'>下次胜利声望+{0}</font>",s)},n.onClickLink=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(RankEvtName.RANK_OPEN_VIEW,RankModel.RANK_TYPE_4))},n.onAdd=function(){e.prototype.onAdd.call(this),this._model.addEventListener(MeetPlayerModel.UPDATE_MPPK_INFO,this.updateInfo,this),this.dispatchGlobalEvent(new ParamEvent(MeetPlayerEvtName.REQUEST_13300))},n.onRemove=function(){e.prototype.onRemove.call(this),this.itemsOnRemove(),this._model.removeEventListener(MeetPlayerModel.UPDATE_MPPK_INFO,this.updateInfo,this)},n.itemsOnRemove=function(e){if(void 0===e&&(e=!1),this._itemCach)for(var t,i=0;i<this._itemCach.length;i++)t=this._itemCach[i],t.onRemove(),e&&(t.dispose(),t=null)},n.dispose=function(){e.prototype.dispose.call(this),e.prototype.onRemove.call(this);var t=this;t._model.removeEventListener(MeetPlayerModel.UPDATE_MPPK_INFO,t.updateInfo,t),t.itemsOnRemove(!0),t._itemCach=null,t._txtLianSheng&&(t._txtLianSheng.dispose(),t._txtLianSheng=null),t._txtNext&&(t._txtNext.dispose(),t._txtNext=null),t._txtTong&&(t._txtTong.dispose(),t._txtTong=null),t._txtNum&&(t._txtNum.dispose(),t._txtNum=null),t._txtSeeRank&&(t._txtSeeRank.dispose(),t._txtSeeRank=null),t._imageHead&&(t._imageHead.dispose(),t._imageHead=null),t._imageJMD&&(t._imageJMD.dispose(),t._imageJMD=null),t.skinName=null,t=null},t}(Csprite);egret.registerClass(MPWildView,"MPWildView");var MeetPlayerItem=function(e){function t(){e.call(this),this._leftTime=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/meetPlayer/MeetPlayerItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtn,this),this._imageCoin.source=UrlUtil.getSmallPic(WelfareType.ADD_COIN),this._imageExp.source=UrlUtil.getSmallPic(WelfareType.ADD_EXP),this._imageJMD.source=UrlUtil.getSmallPic(11020001)},n.onBtn=function(e){var t=this;if(this._leftTime>0){var i=StringUtil.substitute("是否花费{0}元宝寻找敌人",SingleModel.getInstance().getSingVO(SingleModel.FIND_ENERMY).value);Alert.show(i,1,function(){t.findEnermy()})}else{if(GoodsListProxy.getInstance().getResGridNum()<20)return void Message.show("需至少20格背包才能挑战");if(MeetPlayerModel.getInstance().gotoFightMeetPlayerID>0)return void Message.show("正在挑战中");if(!SceneModel.getInstance().isHookSmall())return void Message.show("当前场景不能挑战");this.dispatchGlobalEvent(new ParamEvent(MeetPlayerEvtName.SHOW_MEETPLAYER_VIEW,{isShow:!1})),this.dispatchGlobalEvent(new ParamEvent(MeetPlayerEvtName.FIGHT_MEET_PLAYER,{vo:this._vo,id:this._vo.partner_list[0].partner_id}))}},n.findEnermy=function(){RoleModel.getInstance().CheckGold(Number(SingleModel.getInstance().getSingVO(SingleModel.FIND_ENERMY).value))&&this.dispatchGlobalEvent(new ParamEvent(MeetPlayerEvtName.REQUEST_13304))},n.setData=function(e){this._vo=e,this._leftTime=0,TimerManager.getInstance().remove(1e3,this.onTimer,this);var t=MeetPlayerModel.getInstance().getMeetPlayerConfig(e.round,e.level);this._txtName.text=StringUtil.substitute("{0}		{1}",e.name,Tools.convertRoundLv(e.level,e.round)),this._txtExp.text=t.exp.toString(),this._txtCoin.text=t.coin.toString(),this._txtJMD.text=t.goodsList[0].value.toString(),this._btn.label="挑战",this._imageHead.setHeadURLByPartner(e.icon,e.partner_list[0].career,e.partner_list[0].sex),this.contains(this._txtName)||this.addChild(this._txtName),this.contains(this._txtExp)||this.addChild(this._txtExp),this.contains(this._txtCoin)||this.addChild(this._txtCoin),this.contains(this._txtJMD)||this.addChild(this._txtJMD),this.contains(this._imageCoin)||this.addChild(this._imageCoin),this.contains(this._imageExp)||this.addChild(this._imageExp),this.contains(this._imageJMD)||this.addChild(this._imageJMD),this.contains(this._imageHead)||this.addChild(this._imageHead),this.contains(this._txtLeftTime)&&this.removeChild(this._txtLeftTime)},n.setFindEnermy=function(e){this.contains(this._txtName)&&this.removeChild(this._txtName),this.contains(this._txtExp)&&this.removeChild(this._txtExp),this.contains(this._txtCoin)&&this.removeChild(this._txtCoin),this.contains(this._txtJMD)&&this.removeChild(this._txtJMD),this.contains(this._imageJMD)&&this.removeChild(this._imageJMD),this.contains(this._imageExp)&&this.removeChild(this._imageExp),this.contains(this._imageCoin)&&this.removeChild(this._imageCoin),this.contains(this._imageHead)&&this.removeChild(this._imageHead),this.contains(this._txtLeftTime)||this.addChild(this._txtLeftTime),this._leftTime=e,TimerManager.getInstance().remove(1e3,this.onTimer,this),TimerManager.getInstance().add(1e3,this.onTimer,this),this._btn.label="索敌"},n.onTimer=function(){return this._leftTime<=0?(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._btn.label="挑战",void this.dispatchGlobalEvent(new ParamEvent(MeetPlayerEvtName.REQUEST_13300))):(this._txtLeftTime.htmlText=StringUtil.substitute("<font color='#e31101'>{0}</font>后出现新的敌人",TimeUtil.getTime2(this._leftTime)),void this._leftTime--)},n.onRemove=function(){e.prototype.onRemove.call(this),TimerManager.getInstance().remove(1e3,this.onTimer,this)},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t._txtName&&(t._txtName.dispose(),t._txtName=null),t._txtExp&&(t._txtExp.dispose(),t._txtExp=null),t._txtCoin&&(t._txtCoin.dispose(),t._txtCoin=null),t._txtJMD&&(t._txtJMD.dispose(),t._txtJMD=null),t._txtLeftTime&&(t._txtLeftTime.dispose(),t._txtLeftTime=null),t._imageCoin&&(t._imageCoin.dispose(),t._imageCoin=null),t._imageJMD&&(t._imageJMD.dispose(),t._imageJMD=null),t._imageExp&&(t._imageExp.dispose(),t._imageExp=null),t._imageHead&&(t._imageHead.dispose(),t._imageHead=null)},t}(Csprite);egret.registerClass(MeetPlayerItem,"MeetPlayerItem");var MeetPlayerWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/meetPlayer/MeetPlayerWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.MEETPLAYER,this._tabBar.dataProvider=new eui.ArrayCollection(["野外","矿洞","暗战"]),this._tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTabChange,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2016,this.showMineRedDot,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2018,this.showDarkRedDot,this),this.setIndex(0)},n.onReGroupLoadComplete=function(){this.setImageTitle("meetPlayer_json.mp_headTxt"),this.panelSkin.imageTitle.top=15},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._currentView&&this._currentView.onAdd(),this._tabBar.validateNow(),this.showMineRedDot(),this.showDarkRedDot()},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this.dispatchGlobalEvent(new ParamEvent(MeetPlayerEvtName.CLOSE_MEETPLAYER_RECORDVIEW))},n.onTabChange=function(e){var t=Number(FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_42).open_day),i=Number(FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_44).open_day),n=Number(FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_44).open_level);if(1==this._tabBar.selectedIndex&&HuoDongDailyModel.getInstance().kaiFuDay<t)return Message.show("开服第"+t+"天开启"),void(this._tabBar.selectedIndex=0);if(2==this._tabBar.selectedIndex&&HuoDongDailyModel.getInstance().kaiFuDay<i)return Message.show("开服第"+i+"天开启"),void(this._tabBar.selectedIndex=0);if(2==this._tabBar.selectedIndex&&RoleModel.getInstance().getRoleCommon().level<n)return Message.show(n+"级开启"),void(this._tabBar.selectedIndex=0);var s=this._tabBar.selectedIndex;this.setIndex(s)},n.clearContent=function(){this._currentView&&this._container.contains(this._currentView)&&(this._container.removeChild(this._currentView),this._currentView.onRemove())},n.setIndex=function(e){switch(this.clearContent(),this._tabBar.selectedIndex=e,e){case 0:this._meetPlayerView||(this._meetPlayerView=new MPWildView),this.setImageTitle("meetPlayer_json.mp_headTxt"),this._currentView=this._meetPlayerView,this.disposeMine();break;case 1:this._mine||(this._mine=new MineView),this.setImageWindowTitle("title_mine"),this.dispatchGlobalEvent(new ParamEvent(MinesEvtName.CCMD16200)),this._currentView=this._mine;break;case 2:this._dark||(this._dark=new DarkView),this.setImageWindowTitle("title_dark"),this.dispatchGlobalEvent(new ParamEvent(DarkEvtName.CCMD17100)),this.dispatchGlobalEvent(new ParamEvent(DarkEvtName.CCMD17101)),this.dispatchGlobalEvent(new ParamEvent(RankEvtName.RANK_CCMD13500,RankModel.RANK_TYPE_13)),this._currentView=this._dark}this._container.addChild(this._currentView),this._currentView.onAdd()},n.showMineRedDot=function(e){void 0===e&&(e=null);var t=HuoDongDailyModel.getInstance().kaiFuDay>=Number(FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_42).open_day);this._tabBar.getChildAt(1).showRedDot=t&&RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2016)},n.showDarkRedDot=function(e){void 0===e&&(e=null);var t=HuoDongDailyModel.getInstance().kaiFuDay>=Number(FunctionOpenModel.getInstance().getFunctionOpenVO(FunctionOpenModel.KEY_44).open_day);this._tabBar.getChildAt(2).showRedDot=t&&RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2018)},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t._meetPlayerView&&(t._meetPlayerView.parent&&t._meetPlayerView.parent.removeChild(t._meetPlayerView),t._meetPlayerView.dispose(),t._meetPlayerView=null),t._dark&&(t._dark.parent&&t._dark.parent.removeChild(t._dark),t._dark.dispose(),t._dark=null),t._model=null,t._currentView=null,t=null,this.removeGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2016,this.showMineRedDot,this),this.removeGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2018,this.showDarkRedDot,this),this.disposeMine()},n.disposeMine=function(){this._mine&&(this._mine.parent&&this._mine.parent.removeChild(this._mine),this._mine.dispose(),this._mine=null)},t}(LayeroutWindow);egret.registerClass(MeetPlayerWindow,"MeetPlayerWindow");
var MeridianNodeItem=function(e){function t(){e.call(this),this.skinName="resource/game_skins/meridians/MeridianNodeItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},n.dataChanged=function(){var e="meridians_json.meridians_itemBg"+this.data.id,t="meridians_json.meridians_item"+this.data.id;this.imageBg.source=RES.getRes(e),this.imageContent.source=RES.getRes(t)},n.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.ItemRenderer);egret.registerClass(MeridianNodeItem,"MeridianNodeItem",["eui.UIComponent"]);var MeridiansView=function(e){function t(){e.call(this),this._delaySI=0,this.LABEL_1="获得材料",this.LABEL_2="升级",this.skinName="resource/game_skins/meridians/MeridiansViewSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.onReGroupLoadComplete=function(){this.updateNodeInfo()},n.onOpenHandler=function(){function e(e,t){return Number(e.name)-Number(t.name)}null==this._imageBg&&(this._imageBg=new PicLoader,this.addChildAt(this._imageBg,0),this._imageBg.x=5,this._imageBg.y=-7),null==this._imageMec&&(this._imageMec=new PicLoader,this.addChild(this._imageMec),this._imageMec.x=280,this._imageMec.y=651,this._imageMec.load(UrlUtil.getSmallPic(13040001))),this.resGroupName=GModuleResGroupName.MERIDIANS,this.itemLineArr=[];for(var t=0;t<this.linesContainer.numChildren;t++)this.itemLineArr.push(this.linesContainer.getChildAt(t));this.itemLineArr.sort(e),this._btnFast.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFastHandler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this.addGlobalEventListener(MeridianEvtName.MERIDIAN_UPDATE_INFO,this.updateInfoHandler,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),this.onPartnerChangeHandler(),MeridianModel.getInstance().addEventListener(MeridianEvtName.MERIDIAN_SUCCESS,this.onSuccessHandler,this),this._effect1=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("jinmai1"),211,588,this,80,!0)},n.onCloseHandler=function(){this._btnFast.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onFastHandler,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this.removeGlobalEventListener(MeridianEvtName.MERIDIAN_UPDATE_INFO,this.updateInfoHandler,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),MeridianModel.getInstance().removeEventListener(MeridianEvtName.MERIDIAN_SUCCESS,this.onSuccessHandler,this),this._imageBg&&(this._imageBg.dispose(),this._imageBg=null),this._imageMec&&(this._imageMec.dispose(),this._imageMec=null),this._effect1&&(this._effect1.dispose(),this._effect1=null),clearTimeout(this._delaySI),this.dispose()},n.onPartnerChangeHandler=function(){var e=new ParamEvent(MeridianEvtName.CCMD12000),t=FigureModel.getInstance().selectedPartnerVO;e.data={id:t.parnerID},this.dispatchGlobalEvent(e),1==t.getSex()?this._imageBg.load(UrlUtil.getMeridiansURL("meridians_bg1")+".png"):this._imageBg.load(UrlUtil.getMeridiansURL("meridians_bg2")+".png")},n.onFastHandler=function(){var e=new ParamEvent(MeridianEvtName.CCMD12002),t=FigureModel.getInstance().selectedPartnerVO;e.data={id:t.parnerID},this.dispatchGlobalEvent(e)},n.onOkHandler=function(){var e=this;if(this._btnOK.label==this.LABEL_1){if(null==this.proNextVO)return;var t=new ParamEvent(EventName.OPEN_GETMATERIAL_WINDOW);return t.data={typeId:this.proNextVO.con_itemid,type:GetMaterialItem.OPEN_MATERIAL_FUBEN,linkStrArr:["<a href='event:"+GetMaterialItem.OPEN_MATERIAL_FUBEN+"'>材料副本获得</a>"]},void this.dispatchGlobalEvent(t)}var t=new ParamEvent(MeridianEvtName.CCMD12001),i=FigureModel.getInstance().selectedPartnerVO;t.data={id:i.parnerID},this.dispatchGlobalEvent(t),1==this._btnOK.enabled&&(this._btnOK.enabled=!1),this._delaySI=setTimeout2(function(){e.updateBtnEnable()},500)},n.updateNum=function(){if(this.meridianServerVO=MeridianModel.getInstance().getMeridianServerVO(FigureModel.getInstance().selectedPartnerVO.parnerID),null!=this.meridianServerVO){var e,t=this.meridianServerVO.level,i=this.meridianServerVO.star,n=0,s=0,a=GoodsListProxy.getInstance().findGoodNumber(MeridianModel.ITEM_FAST);0>=t?(n=t+1,s=0):8>i?(n=t,s=i+1):(n=t+1,s=0),this.proNextVO=MeridianModel.getInstance().getMeridianDataVO(n,s),this.proNextVO?(e=GoodsListProxy.getInstance().findGoodNumber(this.proNextVO.con_itemid),this._txtCount.text=e+"/"+this.proNextVO.con_count,this.proNextVO.con_count<=0&&(this._txtCount.text="免费"),e>=this.proNextVO.con_count?(this._txtCount.textColor=15192247,this._btnOK.label=this.LABEL_2):(this._txtCount.textColor=16711680,this._btnOK.label=this.LABEL_1),a>0?this._btnFast.showRedDot=!0:this._btnFast.showRedDot=!1):this._btnFast.showRedDot=!1,RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.FIGURE_HEROLIST_REDDOT,{index:3})),RedDotsModel.getInstance().calMeridianTabRedDot()}},n.updateNodeInfo=function(){if(this.itemArr=[],this.meridianServerVO=MeridianModel.getInstance().getMeridianServerVO(FigureModel.getInstance().selectedPartnerVO.parnerID),null!=this.meridianServerVO){for(var e,t=this.meridianServerVO.star,i=0;i<this.itemContainer.numChildren;i++)e=this.itemContainer.getChildAt(i),e.data={id:i+1},e.imageContent.visible=!1,this.itemArr.push(e);for(var n in this.itemArr)Number(n)<t&&(this.itemArr[n].imageContent.visible=!0);for(var n in this.itemLineArr)this.itemLineArr[n].visible=!1;for(var n in this.itemLineArr)Number(n)<t-1&&(this.itemLineArr[n].visible=!0)}},n.onSuccessHandler=function(e){var t=e.data.star;null==this.successEff&&(this.successEff=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("jinmai2"),24,21,this.itemArr[t-1],80,!1),this.successEff.addEventListener(UIEffect.EFFECT_END,this.effectEndHandler,this))},n.effectEndHandler=function(){this.successEff.removeEventListener(UIEffect.EFFECT_END,this.effectEndHandler,this),this.successEff=null},n.updateBtnEnable=function(){0==this._btnOK.enabled&&(this._btnOK.enabled=!0)},n.updateInfoHandler=function(){function e(e,t,i,n,s){void 0===i&&(i="#e7d0b7"),void 0===n&&(n=!1),void 0===s&&(s=!1);for(var a=0,o=0,r="",h="",d=0;d<t.length;d++)h=t[d],a=null==e?0:e[h],o=d,!s&&0>=a||(n&&l.push(h),r+=o>=5?"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+a/100+"%</font>":"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+a+"</font>");return r}if(this.meridianServerVO=MeridianModel.getInstance().getMeridianServerVO(FigureModel.getInstance().selectedPartnerVO.parnerID),null!=this.meridianServerVO){var t=this.meridianServerVO.level,i=this.meridianServerVO.star,n=0,s=0;0>=t?(n=t+1,s=0):8>i?(n=t,s=i+1):(n=t+1,s=0);var a=MeridianModel.getInstance().getMeridianDataVO(t,i),o=MeridianModel.getInstance().getMeridianDataVO(n,s),r="",h="",l=[];1==t&&0>=i?(r=e(o,EquipBasic.PROPERTY_INDEX,"#00D228",!0),h=e(a,l,"#e7d0b7",!1,!0),this._txtFpower.text="0"):(h=e(a,EquipBasic.PROPERTY_INDEX),o&&(r=e(o,EquipBasic.PROPERTY_INDEX,"#00D228")),this._txtFpower.text=Number(PropertyUtil.calculateProFight(a)).toFixed()),this.updateNodeInfo(),this._txtJie.text=t.toString(),this._txtPro.htmlText=h,this._txtProNext.htmlText=r,this.updateNum()}},t}(BaseView);egret.registerClass(MeridiansView,"MeridiansView");var MineDuoWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/mine/MineDuoSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_mine_duo")},n.onGet=function(){this.isPop=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MinesEvtName.CCMD16211,this._data.role_id))},n.updateData=function(e){this._data=e;var t=MineModel.getInstance().getVoById(this._data.cfgid);this.item_1.data=GoodsListProxy.getInstance().getGoodsInfoByType(1),this.item_1.num=t.award_coin/10,this.item_2.data=GoodsListProxy.getInstance().getGoodsInfoByType(8),this.item_2.num=t.award_feats/10,this.head.setHeadURLByPartner(this._data.icon),this.txtName.text=this._data.name,this.txtGuild.text=this._data.guild_name,this.txtFight.text=this._data.power.toString(),this.txtName2.text=t.name;var i=0;i=HeFuModel.getInstance().isInHeFu()?Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18803).value):Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16202).value);var n=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_26);this.txtCount.text="我的剩余掠夺次数："+(i-n)+"/"+i,this.btnGet.visible=i>n},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},t}(LayeroutWindow);egret.registerClass(MineDuoWindow,"MineDuoWindow");var MineFuchouWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/mine/MineFuchouSKin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_mine_fc")},n.onGet=function(){this.isPop=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MinesEvtName.CCMD16221,this._data.log_id))},n.updateData=function(e){this._data=e;var t=MineModel.getInstance().getVoById(this._data.cfgid);this.item_1.data=GoodsListProxy.getInstance().getGoodsInfoByType(1),this.item_1.num=t.award_coin,this.item_2.data=GoodsListProxy.getInstance().getGoodsInfoByType(8),this.item_2.num=t.award_feats,this.head.setHeadURLByPartner(this._data.icon),this.txtName.text=this._data.name,this.txtFight.text=this._data.power.toString(),this.txtTime.text=TimeUtil.formatTime(1e3*this._data.ctime)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},t}(LayeroutWindow);egret.registerClass(MineFuchouWindow,"MineFuchouWindow");var MineItem=function(e){function t(){e.call(this),this.skinName="resource/game_skins/mine/MineItemSKin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dataChanged=function(){this._itemData=this.data,this.icon.source="mineItemIcon_"+this._itemData.template_id,this.txtName.source="mineItemName_"+this._itemData.template_id,this.item_1.data=GoodsListProxy.getInstance().getGoodsInfoByType(1),this.item_1.num=this._itemData.award_coin,this.item_2.data=GoodsListProxy.getInstance().getGoodsInfoByType(8),this.item_2.num=this._itemData.award_feats,this._itemData.add_item?(this.item_3.data=this._itemData.add_item[0].info,this.itemGroup.visible=!0):this.itemGroup.visible=!1},n.setSelect=function(e){this.selected=e,this.image_select.visible=e,this.image_jian.visible=e},n.dispose=function(){this.parent&&this.parent.removeChild(this)},t}(eui.ItemRenderer);egret.registerClass(MineItem,"MineItem");var MineLogItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/mine/MineLogItemSKin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.txtFuchou.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this)},n.onGet=function(){0==this._itemdata.revenge&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MinesEvtName.OPEN_MINE_FUCHOU_VIEW,this._itemdata))},n.dataChanged=function(){this._itemdata=this.data;var e=MineModel.getInstance().getVoById(this._itemdata.cfgid);this.txtTime.text=TimeUtil.formatTime(1e3*this._itemdata.ctime),2==this._itemdata.type?(this.txtContent.htmlText="<font color='"+ColorUtil.COLOR_GREEN+"'>"+this._itemdata.name+"</font>抢夺了我的"+e.name,this.txtFuchou.visible=!0,this._itemdata.revenge>0?this.txtFuchou.htmlText="已复仇":this.txtFuchou.htmlText="<u>复仇</u>"):(this.txtContent.htmlText="我抢夺了<font color='"+ColorUtil.COLOR_GREEN+"'>"+this._itemdata.name+"</font>的"+e.name,this.txtFuchou.visible=!1)},t}(eui.ItemRenderer);egret.registerClass(MineLogItem,"MineLogItem");var MineLogWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/mine/MineLogSKin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_mine_log")},n.updateData=function(e){var t=e.data;t.length>0&&t.sort(function(e,t){return e.ctime<t.ctime?1:-1});for(var i=new eui.ArrayCollection,n=0;n<t.length;n++)i.addItem(t[n]);this.list.dataProvider=i},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.addGlobalEventListener(MinesEvtName.CCMD16220_UPDATE,this.updateData,this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(MinesEvtName.CCMD16220_UPDATE,this.updateData,this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},t}(LayeroutWindow);egret.registerClass(MineLogWindow,"MineLogWindow");var MineRewardWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/mine/MineRewardSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_mine_reward")},n.onGet=function(){this.isPop=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MinesEvtName.CCMD16205))},n.updateData=function(e){var t=MineModel.getInstance().getVoById(e.mine_cfgid);if(this.icon.source="mineItemIcon_"+e.mine_cfgid,this.txtName.source="mineItemName_"+e.mine_cfgid,e.harry_list.length>0){this.txtCoin.htmlText="金币*"+t.award_coin+"         <font color='"+ColorUtil.COLOR_RED+"'>-"+t.rob_coin*e.harry_list.length+"</foint>",this.txtFeat.htmlText="功勋*"+t.award_feats+"         <font color='"+ColorUtil.COLOR_RED+"'>-"+t.rob_feats*e.harry_list.length+"</foint>";for(var i,n="",s=0;s<e.harry_list.length;s++)i=e.harry_list[s],i.flag>0&&(n+=i.role_name+"掠夺了我\n");this.txtLog.text=n}else this.txtCoin.text="金币*"+t.award_coin,this.txtFeat.text="功勋*"+t.award_feats,this.txtLog.htmlText="<font color='"+ColorUtil.COLOR_GREEN+"'>强！本次开采无人掠夺</foint>"},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},t}(LayeroutWindow);egret.registerClass(MineRewardWindow,"MineRewardWindow");var MineRoleItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/mine/MineRoleItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.txtTime.addMiaoBian(),this.txtName.addMiaoBian()},n.onGet=function(){0!=this._itemData.is_harry&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MinesEvtName.CCMD16210,this._itemData.role_id))},n.dataChanged=function(){this._itemData=this.data,this.icon.source="mineIcon_"+this._itemData.mine_cfgid,this._itemData.role_id==RoleModel.getInstance().getRoleCommon().role_id?(this.txtName.htmlText="我的矿工",this._effect_duo&&(this._effect_duo.dispose(),this._effect_duo=null)):(this.txtName.text=this._itemData.role_name,0==this._itemData.is_harry?this._effect_duo&&(this._effect_duo.dispose(),this._effect_duo=null):null==this._effect_duo&&(this._effect_duo=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("wakuang2"),160,130,this,80,!0))),TimerManager.getInstance().remove(1e3,this.onShowTime,this),this._itemData.last_time>0?(this.txtTime.text=TimeUtil.getTime(this._itemData.last_time),TimerManager.getInstance().add(1e3,this.onShowTime,this)):this.txtTime.text="",null==this._effect&&(this._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("wakuang"),80,180,this,80,!0))},n.onShowTime=function(){this._itemData.last_time--,this._itemData.last_time>0?this.txtTime.text=TimeUtil.getTime(this._itemData.last_time):(this.txtTime.text="",TimerManager.getInstance().remove(1e3,this.onShowTime,this))},n.dispose=function(){this.parent&&this.parent.removeChild(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),TimerManager.getInstance().remove(1e3,this.onShowTime,this),this._effect&&(this._effect.dispose(),this._effect=null),this._effect_duo&&(this._effect_duo.dispose(),this._effect_duo=null)},t}(eui.ItemRenderer);egret.registerClass(MineRoleItem,"MineRoleItem");var MineView=function(e){function t(){e.call(this),this._roleItemPoint=[{x:2,y:74},{x:280,y:85},{x:30,y:270},{x:250,y:298},{x:0,y:455},{x:325,y:455}],this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/mine/MineViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.txtSpeed.htmlText="<u>快速完成</u>",this.txtSpeed.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSpeed,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnLog.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLog,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeft,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRight,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this.addGlobalEventListener(MinesEvtName.CCMD16200_UPDATE,this.updateData,this),this._itemObj=new Object,this._pageIndex=0,this.effectGroup.touchEnabled=!1},n.onHelp=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.MINE))},n.onGet=function(){this.dispatchGlobalEvent(new ParamEvent(MinesEvtName.OPEN_MINE_VIEW))},n.onLog=function(){this.dispatchGlobalEvent(new ParamEvent(MinesEvtName.OPEN_MINE_LOG_VIEW))},n.onSpeed=function(){var e=this,t=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16203).value)*Math.ceil(this._myData.last_time/60);if(RoleModel.getInstance().CheckGold(t)){var i=StringUtil.substitute("是否花费{0}元宝加速完成？",t);Alert.show(i,1,function(){e.dispatchGlobalEvent(new ParamEvent(MinesEvtName.CCMD16206))})}},n.onLeft=function(){this._pageIndex-=6,this._pageIndex<0&&(this._pageIndex=0),this.btnLeft.visible=this._pageIndex>0,this.btnRight.visible=this._pageIndex+6<this._list.length,this.updateList()},n.onRight=function(){this._pageIndex+=6,this.btnLeft.visible=!0,this.btnRight.visible=this._pageIndex+6<this._list.length,this.updateList()},n.updateList=function(){for(var e,t,i=0;6>i;i++)t=this._itemObj[i],e=this._list[this._pageIndex+i],e?(null==t&&(t=new MineRoleItem,t.x=this._roleItemPoint[i].x,t.y=this._roleItemPoint[i].y,this._itemObj[i]=t),t.data=e,this.addChild(t)):t&&(t.dispose(),t=null);this.setChildIndex(this.btnLeft,this.numChildren-1),this.setChildIndex(this.btnRight,this.numChildren-1),this.setChildIndex(this.btnGet,this.numChildren-1),this.setChildIndex(this.effectGroup,this.numChildren-1)},n.updateData=function(e){this._myData=null,this._list=MineModel.getInstance().getList(),this.btnLeft.visible=!1,this.btnRight.visible=this._list.length>6;for(var t,i=0;i<this._list.length;i++)t=this._list[i],t.role_id==RoleModel.getInstance().getRoleCommon().role_id&&(this._myData=t,this._list.splice(i,1));this._myData&&this._list.unshift(this._myData),this._pageIndex<=this._list.length?this.onLeft():this.updateList();var n=0,s=0;s=HeFuModel.getInstance().isInHeFu()?Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18802).value):Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16201).value);var a=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_25);n=s-a,0>n&&(n=0),this.txtCount.htmlText="<font color='"+(n>0?ColorUtil.COLOR_GREEN:ColorUtil.COLOR_RED)+"'>"+n+"/"+s+"</font>";var o=0;o=HeFuModel.getInstance().isInHeFu()?Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18803).value):Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16202).value);var r=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_26),h=o-r;0>h&&(h=0),this.txtCount2.htmlText="<font color='"+(h>0?ColorUtil.COLOR_GREEN:ColorUtil.COLOR_RED)+"'>"+h+"/"+o+"</font>",TimerManager.getInstance().remove(1e3,this.onShowTime,this),this._myData?(this._vo=MineModel.getInstance().getVoById(this._myData.mine_cfgid),this.btnGet.visible=!1,this._myData.last_time>0?(this.txtSpeed.visible=!0,this.txtTime.visible=!0,this.txtTime.text=this._vo.name+"开采中："+TimeUtil.getTime(this._myData.last_time),TimerManager.getInstance().add(1e3,this.onShowTime,this)):(this.txtSpeed.visible=!1,this.txtTime.visible=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MinesEvtName.CCMD16201)))):(this.btnGet.visible=n>0,this.txtTime.visible=!1,this.txtSpeed.visible=!1),this.btnGet.visible?null==this._effect&&(this._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("anniu"),60,25,this.effectGroup,80,!0)):this._effect&&(this._effect.dispose(),this._effect=null)},n.onShowTime=function(){this._myData.last_time--,this._myData.last_time>0?this.txtTime.text=this._vo.name+"开采中："+TimeUtil.getTime(this._myData.last_time):(this.txtTime.visible=!1,this.txtSpeed.visible=!1,TimerManager.getInstance().remove(1e3,this.onShowTime,this))},n.dispose=function(){e.prototype.dispose.call(this),e.prototype.onRemove.call(this),TimerManager.getInstance().remove(1e3,this.onShowTime,this),this.removeGlobalEventListener(MinesEvtName.CCMD16200_UPDATE,this.updateData,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnLog.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLog,this),this.txtSpeed.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSpeed,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeft,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRight,this),this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this);for(var t=0;6>t;t++)this._itemObj[t]&&(this._itemObj[t].parent&&this._itemObj[t].parent.removeChild(this._itemObj[t]),this._itemObj[t].dispose(),this._itemObj[t]=null);this._itemObj=null,this._effect&&(this._effect.dispose(),this._effect=null)},t}(Csprite);egret.registerClass(MineView,"MineView");var MineWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/mine/MineWindowSKin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_mine_tk"),this._itemArr=[];for(var t,i=1;6>i;i++)t=new MineItem,t.data=MineModel.getInstance().getVoById(i),t.y=130*(i-1),this.contentGroup.addChild(t),this._itemArr.push(t);this.bar.labelDisplay.visible=!1},n.onGet=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MinesEvtName.CCMD16204)),this.isPop=!1},n.onUpgrade=function(){RoleModel.getInstance().CheckGold(Number(this.txtCost.text))&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MinesEvtName.CCMD16203))},n.updateData=function(e){var t=e.data,i=MineModel.getInstance().getVoById(t.cfgid);this.bar.maximum=i.luck_limit,this.bar.value=t.bless;for(var n,s=0;s<this._itemArr.length;s++)n=this._itemArr[s],s+1==t.cfgid?n.setSelect(!0):n.setSelect(!1);this.txtCost.text=MineModel.getInstance().getCost(t.num+1).toString();var a=0;a=HeFuModel.getInstance().isInHeFu()?Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18802).value):Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16201).value);var o=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_25);this.txtCount.text=a-o+"/"+a},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnUpgrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpgrade,this),this.addGlobalEventListener(MinesEvtName.CCMD16202_UPDATE,this.updateData,this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.removeGlobalEventListener(MinesEvtName.CCMD16202_UPDATE,this.updateData,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnUpgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpgrade,this);for(var t=0;t<this._itemArr.length;t++)this._itemArr[t].dispose(),this._itemArr[t]=null;this._itemArr=null},t}(LayeroutWindow);egret.registerClass(MineWindow,"MineWindow");var LeveupAlertView=function(e){function t(t){void 0===t&&(t=0),e.call(this),this.skinName="resource/game_skins/novice/LevelupAlertViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._txtLvl.text=RoleModel.getInstance().getRoleCommon().level+"",TimerManager.getInstance().add(1200,this.onTimer,this),this._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("lvup"),305,50,this,150,!1)},n.onCloseHandler=function(){TimerManager.getInstance().remove(1200,this.onTimer,this),this._effect&&(this._effect.dispose(),this._effect=null),e.prototype.onCloseHandler.call(this)},n.onTimer=function(){this.isPop=!1},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=125},t}(LayeroutWindow);egret.registerClass(LeveupAlertView,"LeveupAlertView");var NoviceCgWindow=function(e){function t(){e.call(this),this._sIndex=0,this.LABEL_CONTINUE="点击继续",this.LABEL_GET="领取奖励",this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/novice/NoviceCgWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this._startPoint=this.localToGlobal(this._item.x,this._item.y)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._sIndex=0,this.updateInfoHandler()},n.onCloseHandler=function(){this._item&&(this._item.data&&(this._item.data=null),this._item.dispose(),this._item=null),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),e.prototype.onCloseHandler.call(this)},n.onOkHandler=function(){this._btnOK.label==this.LABEL_CONTINUE?this.updateInfoHandler():(AccessGoodFlyEffectManager.getInstance().getGood(this._item.data.template_id,AccessGoodFlyEffectManager.BAGTYPE,this._startPoint),this.dispatchGlobalEvent(new ParamEvent(CheckPointBossEvtName.NOVICECG_CLOSE_WINDOW)),this.dispatchGlobalEvent(new ParamEvent(CheckPointBossEvtName.CCMD10605)))},n.updateInfoHandler=function(){var e=SceneModel.getInstance().getSceneWave(),t=e.awarded_id+1,i=NoviceCgModel.getInstance().getNoviceCgVO(t),n=i.cgList[this._sIndex];if(null!=n){var s=SceneModel.getInstance().getSceneLevelVo(t),a=GoodsListProxy.getInstance().getGoodsInfoByType(s.itemID);this._txtTitle.text=n.title,this._txtContent.text=n.talk,this._item.data=a,this._imageHead.source=rURL("resource/assets/icon/noviceCg/"+n.head+".png"),this._sIndex++,this._sIndex<=i.cgList.length-1?this._btnOK.label=this.LABEL_CONTINUE:this._btnOK.label=this.LABEL_GET}},t}(BaseView);egret.registerClass(NoviceCgWindow,"NoviceCgWindow");var NoviceDialogView=function(e){function t(t){e.call(this,"NoviceDialogView"),this._itemArr=[],this._tempDataArr=[],this._vo=t,this.skinName="resource/game_skins/novice/NoviceDialogViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this);var e=this;e._txtContent.text=e._vo.desc,e._txtNpcName.text=SceneModel.getInstance().getSceneNpcInfo(e._vo.end_npc).name;var t,i,n,s,a=RoleModel.getInstance().getRoleCommon().career,o=[];e._vo.add_coin>0&&(n=new ItemData,n.info=GoodsListProxy.getInstance().getGoodsInfoByType(1),n.num=e._vo.add_coin,o.push(n)),e._vo.add_exp>0&&(s=new ItemData,s.info=GoodsListProxy.getInstance().getGoodsInfoByType(5),s.num=e._vo.add_exp,o.push(s)),null!=e._vo.itemList&&void 0!=e._vo.itemList&&null!=e._vo.itemList&&e._vo.itemList.length>0&&(1==e._vo.itemList.length?o.push(e._vo.itemList[0]):o.push(e._vo.itemList[a-1])),e._tempDataArr=o;for(var r=0;r<o.length;r++)i=o[r],t=new GoodsItem,t.x=r*(t.width+25),t.data=i.info,t.num=i.num,e._itemContainer.addChild(t),e._itemArr.push(t);TimerManager.getInstance().add(1e3,e.addDaoJiShi,e),e._leftTime=6,e.addDaoJiShi(),e.updateGuide()},n.updateGuide=function(){NoviceGuideManager.getInstance().removeGuide(),NoviceGuideManager.getInstance().showGuide(NoviceGuideType.TASK,438,150,this)},n.onClick=function(e){var t=this;this.dispatchGlobalEvent(new ParamEvent(EventName.NOVICE_TASK_FINISH)),EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("task2"),310,380,GameContent.gameLayers.guideLayer,120),t.flyGoods(),t.closeView()},n.flyGoods=function(){for(var e,t=this,i=this.localToGlobal(227,8),n=[],s=0;s<t._tempDataArr.length;s++)e=t._tempDataArr[s],n.push(e.info.pic);AccessGoodFlyEffectManager.getInstance().flyArray(n,i)},n.addDaoJiShi=function(){var e=this;e._leftTime--,e._leftTime>0?e._txtTime.htmlText=StringUtil.substitute("<font color='#00d228'>({0}</font>后自动提交)",this._leftTime):e.onClick(null)},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=GameContent.stageHeight-this.height>>1},n.closeView=function(){this._leftTime=0,TimerManager.getInstance().remove(1e3,this.addDaoJiShi,this),this.clear(),this.isPop=!1},n.clear=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],this._itemContainer.contains(e)&&this._itemContainer.removeChild(e),e.dispose(),e=null;this._itemArr=[]},n.dispose=function(){e.prototype.dispose.call(this),this.clear(),TimerManager.getInstance().remove(1e3,this.addDaoJiShi,this)},t}(LayeroutWindow);egret.registerClass(NoviceDialogView,"NoviceDialogView");var NoviceOtherView=function(e){function t(t,i,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),e.call(this),this._type=0,this._type=t;var s=this;s._pic=new PicLoader,s.addChild(s._pic),s._pic.load("resource/assets/icon/novice/other/"+s._type+".png"),0==s._type&&(s._item=new GoodsItemSmall,s._item.data=GoodsListProxy.getInstance().getGoodsInfoByType(11050001),s._item.num=6,s._item.x=62,s._item.y=67,s.addChild(s._item),s._eff=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("color_5"),s._item.x-395,s._item.y-395,s,80,!0)),null==s.parent&&(GameContent.gameLayers.iconLayer.addChild(s),s.x=i,s.y=n),s.addEventListener(egret.TouchEvent.TOUCH_TAP,s.onThisClick,s)
}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onThisClick=function(e){var t=this;0==t._type?(t.parent&&t.parent.removeChild(t),t.dispose()):(this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.SHOW_HDDAILY_VIEW)),t.parent&&t.parent.removeChild(t),t.dispose())},n.getType=function(){return this._type},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t._eff&&(t._eff.dispose(),t._eff=null),t._pic&&(t._pic.dispose(),t._pic=null),t._item&&(t._item.parent&&t._item.parent.removeChild(t._item),t._item.dispose(),t._item=null)},t}(BaseView);egret.registerClass(NoviceOtherView,"NoviceOtherView");var NoviceTaskGiftWindow=function(e){function t(){e.call(this),this._itemArr=[],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/novice/NoviceTaskGiftWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this._imgWord=new PicLoader,this._imgWord.load(rURL("resource/assets/icon/noviceTaskGift/word.png")),this.addChild(this._imgWord),this._imgWord.x=77,this._imgWord.y=307;for(var e,t=SingleModel.getInstance().getSingVO(SingleModel.KEY_20402),i=Tools.changeToNodeDropList(t.value),n=i.length,s=0;n>s;s++)e=new GoodsItem,e.x=(e.width+15)*s,e.data=GoodsListProxy.getInstance().getGoodsInfoByType(Number(i[s].asset_id)),e.num=i[s].value,this._itemContainer.addChild(e),this._itemArr.push(e)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnCloseBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClose2Handler,this),ConfigManager.isGuoZiZF()||ConfigManager.isGuoZi()?PhpHttpStatisticsManager.requestShowShareNewGift():ConfigManager.isTencent()&&window.shareNewGift()},n.onCloseHandler=function(){this._imgWord&&(this._imgWord.dispose(),this._imgWord=null);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t.parent&&t.parent.removeChild(t),t.dispose(),t=null;this._itemArr=[],this._btnShare.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnCloseBtn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClose2Handler,this),e.prototype.onCloseHandler.call(this)},n.onBtnClose2Handler=function(){this.isPop=!1},n.onOkHandler=function(){1==ConfigManager.isTencent()?QQManager.getInstance().shareNewGift():1==ShareModel.getInstance().isShowShare?PhpHttpStatisticsManager.requestShare(""):(this.dispatchGlobalEvent(new ParamEvent(CheckPointBossEvtName.CCMD20400)),this.isPop=!1)},t}(LayeroutWindow);egret.registerClass(NoviceTaskGiftWindow,"NoviceTaskGiftWindow");var OneRmbWindow=function(e){function t(){e.call(this),this._delaySI=0,this._clickSi=0,this.skinName="resource/game_skins/oneRmb/OneRmbWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.onBtnReturnSetIndex(),this.setImageWindowTitle("title_oneRmb")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnCharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnBuyHandler,this),this._btnYao.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYaoHandler,this),this.addGlobalEventListener(HuoDongDailyEvtName.UPDATE_18100,this.updateInfoHandler,this),this.addGlobalEventListener(HuoDongDailyEvtName.UPDATE_18110,this.onChargeHandler,this),this.updateInfoHandler(null)},n.onCloseHandler=function(){this._btnCharge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnBuyHandler,this),this._btnYao.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onYaoHandler,this),this.removeGlobalEventListener(HuoDongDailyEvtName.UPDATE_18100,this.updateInfoHandler,this),this.removeGlobalEventListener(HuoDongDailyEvtName.UPDATE_18110,this.onChargeHandler,this),TimerManager.getInstance().remove(60,this.changeNumber,this),clearTimeout(this._delaySI),this._clickSi>0&&(clearTimeout(this._clickSi),this.grayChargeBtn(!1)),e.prototype.onCloseHandler.call(this)},n.onChargeHandler=function(){var e=HuoDongDailyModel.getInstance().nodeRmbCanBuy;if(0==e)return void Message.show("请明天再次购买");if(ConfigManager.isTencent()){if(this._vo){var t=QQManager.getInstance().getRMBGoIDByRmb(this._vo.template_id);QQManager.getInstance().QQBuyGoods(t),this.grayChargeBtn(!0)}}else PhpHttpStatisticsManager.requestChargeOrder(1,this._vo.template_id,6,"N元购",1)},n.onBtnBuyHandler=function(){this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQEUST_18110))},n.onYaoHandler=function(){this._btnYao.enabled=!1,this.startAnimation()},n.startAnimation=function(){var e=this;TimerManager.getInstance().remove(60,this.changeNumber,this),clearTimeout(this._delaySI),TimerManager.getInstance().add(60,this.changeNumber,this),this._delaySI=setTimeout2(function(){e.onNumChange()},1500)},n.onNumChange=function(){TimerManager.getInstance().remove(60,this.changeNumber,this),clearTimeout(this._delaySI),this._txt0.text="0",this._txt1.text="0",this._txt2.text="0",this._txt3.text="1",this.dispatchGlobalEvent(new ParamEvent(HuoDongDailyEvtName.REQEUST_18101,{id:this._vo.template_id})),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(FuLiEvtName.SHOW_SHARENEW_VIEW,4))},n.changeNumber=function(){var e=10*Math.random(),t=10*Math.random(),i=10*Math.random(),n=10*Math.random();this._txt0.text=e+"",this._txt1.text=t+"",this._txt2.text=i+"",this._txt3.text=n+""},n.updateInfoHandler=function(e){var t,i=!1;if(i=!1,null==e&&(t=HuoDongDailyModel.getInstance().getNodeRmbCurrentInfo(),this._vo=t),null!=this._vo){this._txtFlag.text=this._vo.template_id+"";var n=HuoDongDailyModel.getInstance().getNodeRmbInfoNodeByType(this._vo.template_id);null==n?(this._btnCharge.visible=!0,this._btnYao.visible=!1):n.awarded_id<this._vo.num?(i=TimeUtil.isOnSameDay(new Date(1e3*n.ctime),new Date(1e3*RoleModel.getInstance().serverTime)),1==i?(this._btnCharge.visible=!1,this._btnYao.visible=!1,n.rand_num>0&&this.showNum(n.rand_num)):n.award_id>n.awarded_id?(this._btnCharge.visible=!1,this._btnYao.visible=!0):(this._btnYao.visible=!1,this._btnCharge.visible=!0)):n.rand_num>0&&this.showNum(n.rand_num)}},n.showNum=function(e){for(var t=e+"",i="",n=1,s=3;s>=0;s--)i=t.charAt(t.length-n),""!=i?this["_txt"+s].text=i:this["_txt"+s].text="0",n++;this._btnYao.visible=!1,this._btnCharge.visible=!1},n.grayChargeBtn=function(e){var t=this;this._btnCharge&&(e?(this._btnCharge.enabled=!1,this._btnCharge.filters=[Tools.GrayFilter]):(this._btnCharge.enabled=!0,this._btnCharge.filters=null),this._clickSi>0&&clearTimeout(this._clickSi),this._clickSi=setTimeout2(function(e){t.grayChargeBtn(e)},5e3,!1))},t}(LayeroutWindow);egret.registerClass(OneRmbWindow,"OneRmbWindow");var OnlineRewardGiftItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/onlineReward/OnlineRewardGiftItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){},n.showGet=function(e){this.iconGet.visible=e},n.setData=function(e){this.txtHead.text="在线"+e.online_time/60+"分钟奖励",this.rewardCon.removeChildren();for(var t=0;t<e.awards.length;t++){var i=new GoodsItem;i.data=e.awards[t].info,i.x=100*t,this.rewardCon.addChild(i)}},t}(BaseView);egret.registerClass(OnlineRewardGiftItem,"OnlineRewardGiftItem");var OnlineRewardHelpWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/onlineReward/OnlineRewardHelpWindowSkin.exml",this.resGroupName=GModuleResGroupName.CITYWAR,this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onClickBtn=function(e){this.isPop=!1},t}(LayeroutWindow);egret.registerClass(OnlineRewardHelpWindow,"OnlineRewardHelpWindow");var OnlineRewardWindow=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/onlineReward/OnlineRewardWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toClose,this),this.btnGet.label=ConfigManager.isTencent()?"分享领奖":"领取奖励",this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toGet,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelp,this),this.update()},n.update=function(){new Date(1e3*RoleModel.getInstance().serverTime);this.rewardCon.removeChildren();for(var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_23101),t=OnlineRewardModel.getInstance().getRewardsByType(OnlineRewardModel.getInstance().actType),i=e+2<t.length?e:t.length-2,n=0,s=i;i+2>s;s++){var a=new OnlineRewardGiftItem;a.setData(t[s]),a.showGet(e>s),a.y=170*n,this.rewardCon.addChild(a),n++}this.txtTime.text="今天在线时间："+Math.floor(Number(OnlineRewardModel.getInstance().onlineTime/60))+"分钟"},n.toClose=function(e){this.isPop=!1},n.openHelp=function(e){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.ONLINE_REWARD_OPEN_HELP))},n.toGet=function(e){return ConfigManager.isTencent()?void QQManager.getInstance().shareForOnLine():void GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.ONLINE_REWARD_GET))},t}(LayeroutWindow);egret.registerClass(OnlineRewardWindow,"OnlineRewardWindow");var OpenpartnerItem=function(e){function t(t){e.call(this),this._career=0,this._cloth=150,this._weaponArr=[16001,16002,16003],this._sex=1,this._career=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/openpartner/OpenpartnerItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this._figure=new BigFigure,this.addChild(this._figure),this._figure.x=155,this._figure.y=166,this._figure.changeBody(this._career,this._sex,this._cloth),this._figure.changeWeapon(this._career,this._sex,this._weaponArr[this._career-1]),this._imageCareer.addEventListener(egret.TouchEvent.TOUCH_END,this.onClickHandler,this),this._imageBottom.addEventListener(egret.TouchEvent.TOUCH_END,this.onClickHandler,this),this._imageCareer.source=RES.getRes("share_json.share_title_career"+this._career)},n.getCareer=function(){return this._career},n.setData=function(e){e&&(this._vo=e,this._sex=e.getSex(),this._figure.changeBody(this._career,this._sex,this._cloth),this._figure.changeWeapon(this._career,this._sex,this._weaponArr[this._career-1]),this._imageSelected||(this._imageSelected=new CustomImage,this._imageSelected.source=RES.getRes("openpartner_json.openpartner_opened"),this.addChild(this._imageSelected),this._imageSelected.horizontalCenter=0,this._imageSelected.verticalCenter=0))},n.isOpened=function(){return this._vo?!0:!1},n.setSex=function(e){this._sex=e,this._figure.changeBody(this._career,this._sex,this._cloth),this._figure.changeWeapon(this._career,this._sex,this._weaponArr[this._career-1])},n.getSex=function(){return this._sex},n.addCall=function(e,t,i){this._func=e,this._param=t,this._thisObj=i},n.onClickHandler=function(){this._func&&this._func(this._param,this._thisObj)},n.isHit=function(e){return this._figure?this._figure.isHit(e):!1},n.dispose=function(){this._imageCareer.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClickHandler,this),this._imageBottom.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClickHandler,this),this._figure&&(this._figure.parent&&this._figure.parent.removeChild(this._figure),this._figure.dispose(),this._figure=null)},t}(Csprite);egret.registerClass(OpenpartnerItem,"OpenpartnerItem");var OpenpartnerRewardItem=function(e){function t(){e.call(this),this._itemArr=[],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/openpartner/OpenpartnerRewardItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.setData=function(e){for(var t,i,n=0;n<e.goodsList.length;n++)i=e.goodsList[n],t=new GoodsItem,t.showLv(!1),t.data=GoodsListProxy.getInstance().getGoodsInfoByType(i.asset_id),t.num=i.value,t.x=n*(t.width+13),this._itemContainer.addChild(t),this._itemArr.push(t);this._txtDesc.htmlText="激活第<font color='#00d228'>"+e.template_id+"</font>角色奖励"},n.dispose=function(){this.parent&&this.parent.removeChild(this);for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e&&(e.parent&&e.parent.removeChild(e),e.dispose(),e=null);this._itemArr=[]},t}(Csprite);egret.registerClass(OpenpartnerRewardItem,"OpenpartnerRewardItem");var OpenpartnerRewardView=function(e){function t(){e.call(this),this._itemArr=[],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/openpartner/OpenpartnerRewardViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKHandler,this),this.initItem()},n.onCloseHandler=function(){this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKHandler,this),this.clearItem(),e.prototype.onCloseHandler.call(this)},n.initItem=function(){this.clearItem(),this._itemArr=[];for(var e,t,i=FigureModel.getInstance().getOpenpartnerConfig(),n=i.length,s=0,a=0;n>a;a++)t=i[a],t.goodsList[0].asset_id>0&&(e=new OpenpartnerRewardItem,e.setData(t),e.y=115*s,this._itemArr.push(e),this._itemContainer.addChild(e),s++)},n.clearItem=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e&&(e.dispose(),e=null);this._itemArr=[]},n.onOKHandler=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},t}(BaseView);egret.registerClass(OpenpartnerRewardView,"OpenpartnerRewardView");var OpenpartnerView=function(e){function t(){e.call(this),this._itemArr=[],this._selectedSex=1,this._posArr=[{x:18,y:26},{x:318,y:26},{x:148,y:126}],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/openpartner/OpenpartnerViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKHandler,this),this._btnSex1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSex1Handler,this),this._btnSex2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSex2Handler,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_ROUND_CHANGE,this.updateRoundAndVip,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.initItem,this),this.addGlobalEventListener(VipEvtName.VIP_UPDATE,this.updateRoundAndVip,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onThisClickHandler,this),this._itemArr.length<=0&&this.initItem()},n.onCloseHandler=function(){this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKHandler,this),this._btnSex1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSex1Handler,this),this._btnSex2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSex2Handler,this),RoleModel.getInstance().removeEventListener(RoleModel.ROLE_ROUND_CHANGE,this.updateRoundAndVip,this),RoleModel.getInstance().removeEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.initItem,this),this.removeGlobalEventListener(VipEvtName.VIP_UPDATE,this.updateRoundAndVip,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onThisClickHandler,this),this.clearItem(),e.prototype.onCloseHandler.call(this)},n.initItem=function(){this.clearItem(),this._itemArr=[];var e,t=RoleModel.getInstance().getPartnerList().length,i=FigureModel.getInstance().getOpenpartnerVO(t+1);i&&(this.updateRoundAndVip(),2==i.template_id?(this._imageDesc.source=RES.getRes("openpartner_json.openpartner_word2"),this._imageCount.source=RES.getRes("openpartner_json.openpartner_word5"),this._imageDesc.x=166,this._imageCount.x=365,this._imageCount.y=626):3==i.template_id&&(this._imageDesc.source=RES.getRes("openpartner_json.openpartner_word3"),this._imageCount.source=RES.getRes("openpartner_json.openpartner_word4"),this._imageDesc.x=166,this._imageCount.x=408,this._imageCount.y=622));for(var n=0;3>n;n++)e=new OpenpartnerItem(n+1),e.touchEnabled=!1,e.x=this._posArr[n].x,e.y=this._posArr[n].y,e.addCall(this.itemCallHandler,e,this),2!=n&&(e.scaleX=e.scaleY=.9),this._itemArr.push(e),this._itemContainer.addChild(e);for(var s,e,a=RoleModel.getInstance().getPartnerList(),n=0;n<this._itemArr.length;n++){e=this._itemArr[n];for(var o=0;o<a.length;o++)s=a[o],s&&s.getCareer()==e.getCareer()&&e.setData(s)}for(n=0;n<this._itemArr.length;n++)if(e=this._itemArr[n],0==e.isOpened()){this.setSelected(e);break}this.updateButtonState(1)},n.updateRoundAndVip=function(){var e=RoleModel.getInstance().getPartnerList().length,t=FigureModel.getInstance().getOpenpartnerVO(e+1),i=(VipModel.getInstance().getVIPLevel(),RoleModel.getInstance().getRoleCommon().round,"#e7d0b7"),n="#e7d0b7",s="解锁需要：";t.lv>0?s+="<font color='"+i+"'>"+t.lv+"级</font>":t.round>0&&(s+="<font color='"+i+"'>"+t.round+"转</font>"),t.vip>0&&(s+="或<font color='"+n+"'>VIP"+t.vip+"</font>"),this._txtCon.htmlText=s},n.clearItem=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e&&(e.parent&&e.parent.removeChild(e),e.dispose(),e=null);this._itemArr=[]},n.onOKHandler=function(){var e=new ParamEvent(FigureEvtName.CCMD10301);FigureModel.getInstance().selectedPartnerVO;e.data={sex:this._selectedSex,career:this._selectedItem.getCareer()},this.dispatchGlobalEvent(e)},n.onSex1Handler=function(e){this.updateButtonState(1)},n.onSex2Handler=function(e){this.updateButtonState(2)},n.checkPoint=function(e,t){for(var i in this._posArr)if(e==this._posArr[i].x&&t==this._posArr[i].y)return!0;return!1},n.itemCallHandler=function(e,t){for(var i,n=!0,s=0;s<t._itemArr.length;s++)i=t._itemArr[s],0==t.checkPoint(i.x,i.y)&&(n=!1);0!=n&&(t.checkIsSelectedPos(e)||t.setSelected(e))},n.updateButtonState=function(e){this._selectedSex=e,1==e?(this._btnSex1.source=RES.getRes("openpartner_json.openpartner_sex1_1"),this._btnSex2.source=RES.getRes("openpartner_json.openpartner_sex2_2")):(this._btnSex1.source=RES.getRes("openpartner_json.openpartner_sex1_2"),this._btnSex2.source=RES.getRes("openpartner_json.openpartner_sex2_1"));for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],0==t.isOpened()&&t.setSex(this._selectedSex)},n.checkIsSelectedPos=function(e){return e.x==this._posArr[2].x&&e.y==this._posArr[2].y?!0:!1},n.setSelected=function(e){var t=this;this._selectedItem=e;for(var i,n,s=[],a=1,o=0,r=0;r<this._itemArr.length;r++)i=this._itemArr[r],e!=i&&(this.checkIsSelectedPos(i)?(n=this._selectedItem,a=.9,o=1):(n=i,a=n.scaleX),s=n.x==this._posArr[0].x&&n.y==this._posArr[0].y?[this._posArr[1].x,this._posArr[1].y]:[this._posArr[0].x,this._posArr[0].y],i.touchEnabled=!1,egret.Tween.get(i).to({x:s[0],y:s[1],scaleX:a,scaleY:a},500).call(function(){t.onCompleteF(i)}),this._itemContainer.setChildIndex(e,o));egret.Tween.get(e).to({x:this._posArr[2].x,y:this._posArr[2].y,scaleX:1,scaleY:1},500).call(function(){t.onCompleteF(e)}),this._itemContainer.setChildIndex(e,this._itemContainer.numChildren-1),this._selectedItem.isOpened()?this._btnOK.visible=!1:this._btnOK.visible=!0},n.onCompleteF=function(e){},n.onThisClickHandler=function(e){for(var t,i,n=0;n<this._itemArr.length;n++)if(t=this._itemArr[n],i=t.globalToLocal(e.stageX,e.stageY),t.isHit(i)){t.onClickHandler();break}},t}(BaseView);egret.registerClass(OpenpartnerView,"OpenpartnerView");var OpenpartnerWindow=function(e){function t(){e.call(this),this._selectedTabIndex=0,this.skinName="resource/game_skins/openpartner/OpenpartnerWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.OPEN_PARTNER,this.setImageWindowTitle("openpartner_title"),this.tabBar.dataProvider=new eui.ArrayCollection(["激活伙伴","激活奖励"])},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),0==this.tabBar.selectedIndex&&this._openPartnerView&&this._openPartnerView.initItem()},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this)},n.onCloseHandler=function(){this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.clearContent(),e.prototype.onCloseHandler.call(this)},n.openView=function(e,t){if(t)this.isPop=!0;else{var i=!this.isPop;this.isPop=i}1==this.isPop&&(this.setTabIndex(e),this.onBarItemTap(null))},n.onBoxTap=function(e){e.data&&(FigureModel.getInstance().selectedPartnerVO=e.data)},n.onBarItemTap=function(e){switch(this.clearContent(),this.tabBar.selectedIndex){case 0:this._openPartnerView||(this._openPartnerView=new OpenpartnerView,this.container.addChild(this._openPartnerView),this._openPartnerView.onOpenHandler());break;case 1:this._openPartnerRewardView||(this._openPartnerRewardView=new OpenpartnerRewardView,this.container.addChild(this._openPartnerRewardView),this._openPartnerRewardView.onOpenHandler())}},n.setTabIndex=function(e){this._selectedTabIndex=e,this.tabBar.selectedIndex=this._selectedTabIndex},n.clearContent=function(){for(var e;this.container.numChildren>0;)e=this.container.getChildAt(0),this.container.removeChild(e),e.dispose(),e=null;this._openPartnerView&&(this._openPartnerView.parent&&this._openPartnerView.parent.removeChild(this._openPartnerView),this._openPartnerView.onCloseHandler(),this._openPartnerView=null),this._tastePartnerView&&(this._tastePartnerView.parent&&this._tastePartnerView.parent.removeChild(this._tastePartnerView),this._tastePartnerView.onCloseHandler(),this._tastePartnerView=null),this._openPartnerRewardView&&(this._openPartnerRewardView.parent&&this._openPartnerRewardView.parent.removeChild(this._openPartnerRewardView),this._openPartnerRewardView.onCloseHandler(),this._openPartnerRewardView=null)},t}(LayeroutWindow);egret.registerClass(OpenpartnerWindow,"OpenpartnerWindow");var TastepartnerView=function(e){function t(){e.call(this),this._itemArr=[],this._posArr=[{x:6,y:26},{x:306,y:26},{x:148,y:126}],this._sexArr=[1,2],this._careerArr=[1,2,3],this._resTime=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/openpartner/TastepartnerViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKHandler,this),this.addGlobalEventListener(FigureEvtName.TASTE_UPDATE_INFO,this.onUpdateServerData,this),this._itemArr.length<=0&&this.initItem()},n.onCloseHandler=function(){this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKHandler,this),this.removeGlobalEventListener(FigureEvtName.TASTE_UPDATE_INFO,this.onUpdateServerData,this),this.clearItem(),TimerManager.getInstance().remove(1e3,this.onTimer,this),e.prototype.onCloseHandler.call(this)},n.initItem=function(){this.clearItem(),this._itemArr=[];for(var e,t=RoleModel.getInstance().getPartnerList()[0],i=RoleModel.getInstance().getPartnerList().length,n=(FigureModel.getInstance().getOpenpartnerVO(i+1),[]),s=[],a=0;a<this._sexArr.length;a++)t.getSex()!=this._sexArr[a]&&n.push(this._sexArr[a]);for(var a=0;a<this._careerArr.length;a++)t.getCareer()!=this._careerArr[a]&&s.push(this._careerArr[a]);for(a=0;a<s.length;a++)e=new OpenpartnerItem(s[a]),e.touchEnabled=!1,e.x=this._posArr[a].x,e.y=this._posArr[a].y,e.setSex(n[0]),this._itemArr.push(e),this._itemContainer.addChild(e)},n.clearItem=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e&&(e.parent&&e.parent.removeChild(e),e.dispose(),e=null);this._itemArr=[]},n.onUpdateServerData=function(){var e=FigureModel.getInstance().tastePartner_flag,t=FigureModel.getInstance().tastePartner_time;t>0&&(this._resTime=t,TimerManager.getInstance().add(1e3,this.onTimer,this)),0==e?(this._btnOK.enabled=!0,this._btnOK.label="立即体验"):(this._btnOK.enabled=!1,this._btnOK.label="已体验")},n.onTimer=function(){this._resTime--,this._resTime>0?this._txtTime.text="体验倒计时："+TimeUtil.getTime5(this._resTime):(TimerManager.getInstance().remove(1e3,this.onTimer,this),this._txtTime.text="体验倒计时：0")},n.onOKHandler=function(){var e=new ParamEvent(FigureEvtName.CCMD17201);this.dispatchGlobalEvent(e)},t}(BaseView);egret.registerClass(TastepartnerView,"TastepartnerView");var DecompositionItem=function(e){function t(t){e.call(this),this._type=t,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/orangesuit/DecompositionItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKHandler,this),1==this._type?this.txtCount.textColor=ColorUtil.getGoodColorNumber(GoodsType.COLOR_ORANGE):2==this._type&&(this.txtCount.textColor=ColorUtil.getGoodColorNumber(GoodsType.COLOR_RED))},n.setData=function(e){if(this._vo=e,this._item.data=this._vo,this._txtName.text=this._vo.name,1==this._type){var t=OrangeSuitModel.getInstance().getDataVOByItemId(this._vo.template_id);this.txtCount.text=GoodsListProxy.getInstance().getBasicGood(t.con_itemid).name+"X"+t.con_count.toString()}else if(2==this._type){var i=LegendSuitModel.getInstance().getDataVOByItemId(this._vo.template_id);this.txtCount.text=GoodsListProxy.getInstance().getBasicGood(i.add_itemid).name+"X"+i.add_count.toString()}else if(3==this._type){var n=DominateModel.getInstance().getDominateDecVO(this._vo.template_id);this.txtCount.text=GoodsListProxy.getInstance().getBasicGood(n.add_itemid).name+"X"+n.add_count.toString()}},n.onOKHandler=function(){var e;1==this._type?e=new ParamEvent(OrangeSuitEvtName.CCMD13901):2==this._type?e=new ParamEvent(LegendSuitEvtName.CCMD14001):3==this._type&&(e=new ParamEvent(DominateEvtName.CCMD12403)),e.data={id:this._vo.item_id},this.dispatchGlobalEvent(e)},n.dispose=function(){this.parent&&this.parent.removeChild(this),this._item&&this._item.data&&(this._item.data=null,this._item.dispose(),this._item=null),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKHandler,this)},t}(Csprite);egret.registerClass(DecompositionItem,"DecompositionItem");var DecompositionView=function(e){function t(){e.call(this),this.type=1,this.skinName="resource/game_skins/orangesuit/DecompositionViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this._itemArr=[]},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this._btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnReturnHandler,this),this._txtLink1.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._txtLink2.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._txtLink3.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this.addGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateGoods,this),this.updateGoods();var t="";1==this.type?t="神装":2==this.type&&(t="百战装备"),this._txtLink1.htmlText="<u><a href = 'event:1'>获得"+t+"：寻宝</a></u>",this._txtLink2.htmlText="<u><a href = 'event:2'>获得"+t+"：全民BOSS</a></u>",this._txtLink3.htmlText="<u><a href = 'event:3'>获得"+t+"：挑战副本</a></u>",1==this.type?this._txtTitle.text="分解神装不会有碎片的损失":2==this.type?this._txtTitle.text="分解百战装备可获得大量碎片":3==this.type&&(this._txtTitle.text="分解主宰装备可获得大量碎片")},n.onCloseHandler=function(){this._btnReturn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnReturnHandler,this),this._txtLink1.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._txtLink2.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._txtLink3.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this.removeGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateGoods,this),this.clearGoods(),e.prototype.onCloseHandler.call(this)},n.clearGoods=function(){for(var e,t=this._itemArr.length,i=0;t>i;i++)e=this._itemArr[i],e&&(e.parent&&e.parent.removeChild(e),e.dispose(),e=null);this._itemArr=[]},n.updateGoods=function(){this.clearGoods();var e,t;1==this.type?(e=GoodsType.QUALITY_6,t=GoodsListProxy.getInstance().getDecompositionEquipInfoList(e)):2==this.type?(e=GoodsType.QUALITY_7,t=GoodsListProxy.getInstance().getDecompositionEquipInfoList(e)):3==this.type&&(t=DominateModel.getInstance().getDecompositionEquipInfoListForDominate()),this._itemArr=[];for(var i,n=0;n<t.length;n++)i=new DecompositionItem(this.type),i.setData(t[n]),i.y=153*n,this._itemContainer.addChild(i),this._itemArr.push(i)},n.setData=function(e){for(var t,i=0;i<e.length;i++)t=new GetMaterialItem,this._itemlinkContainer.addChild(t),t.y=i*t.height,t.setData(e[i].type,e[i].linkStr)},n.onTxtLinkHandler=function(e){var t;this.isPop=!1,"1"==e.text?(t=new ParamEvent(TreasureEvtName.TREASURE_OPEN_WINDOW),t.data={index:0,isOpen:!0},this.dispatchGlobalEvent(t)):"2"==e.text||(t=new ParamEvent(FubenEvtName.OPEN_FUBEN_VIEW),this.dispatchGlobalEvent(t))},n.onBtnReturnHandler=function(){this.isPop=!1},t}(LayeroutWindow);egret.registerClass(DecompositionView,"DecompositionView");var LegendSuitView=function(e){function t(){e.call(this),this._itemArr=[],this._selectedIndex=0,this.LABEL_MERGE="合成",this.LABEL_LEVELUP="升级",this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/orangesuit/LegendSuitViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){function e(e,t){return Number(e.name)-Number(t.name)}this._txtLink.htmlText="<u><a href = 'event:2'>获得百战碎片</a></u>";var t;this._itemArr=[];for(var i=0;i<this.equipItemContainer.numChildren;i++)t=this.equipItemContainer.getChildAt(i),t.showLv(!1),t.addCallBack(this.callBackF,t,this),t.setImageBottomType(Number(t.name)),this._itemArr.push(t);this._itemArr.sort(e),this._myEquip.touchEnabled=this._myEquip.touchChildren=!1,this._nextEquip.touchEnabled=this._nextEquip.touchChildren=!1,this._myEquip.showLv(!1),this._nextEquip.showLv(!1),this.updateInfoHandler()},n.callBackF=function(e,t){var i=Number(e.name)-1;t._selectedItem=e,t.setSelect(i)},n.onOpenHandler=function(){this.onPartnerChangeHandler(),this._txtLink.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOKHandler,this),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),this.addGlobalEventListener(EventName.EQUIP_LIST_CHANGE,this.updateInfoHandler,this),this.updateTxtLinkRedDot()},n.onCloseHandler=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e&&(e.parent&&e.parent.removeChild(e),e.data&&(e.data=null),e.dispose(),e=null);this._txtLink.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOKHandler,this),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),this.removeGlobalEventListener(EventName.EQUIP_LIST_CHANGE,this.updateInfoHandler,this),this.showTextLinkEffect(!1)},n.onTxtLinkHandler=function(){var e=new ParamEvent(OrangeSuitEvtName.ORANGESUIT_OPEN_DECOMPOSITION_VIEW);e.data={type:2,linkStrArr:[{type:GetMaterialItem.OPEN_TREASURE,linkStr:"<u><a href = 'event:1'>获得百战装备：寻宝</a></u>"}]},this.dispatchGlobalEvent(e)},n.onPartnerChangeHandler=function(){this.updateInfoHandler()},n.onBtnOKHandler=function(){var e,t=Number(this._selectedItem.name);this._btnOK.label==this.LABEL_LEVELUP?(e=new ParamEvent(LegendSuitEvtName.CCMD14000),e.data={id:FigureModel.getInstance().selectedPartnerVO.parnerID,slot:t}):(e=new ParamEvent(LegendSuitEvtName.CCMD14000),e.data={id:FigureModel.getInstance().selectedPartnerVO.parnerID,slot:t}),this.dispatchGlobalEvent(e)
},n.updateInfoHandler=function(){RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.ORANGE_HEROLIST_REDDOT,{index:2}));for(var e,t,i=0,n=FigureModel.getInstance().selectedPartnerVO.parnerID,s=FigureModel.getInstance().selectedPartnerVO,a=0;a<this._itemArr.length;a++)e=this._itemArr[a],i=Number(e.name),t=GoodsListProxy.getInstance().getEquipInfoBySlot(n,i,GoodsType.QUALITY_7),t?e.data=t:e.data=null,LegendSuitModel.getInstance().getLegendsuitSingeDebrisCanUpOrActiveBySlot(s,i)?e.showRedDot=!0:e.showRedDot=!1;null==this._selectedItem&&(this._selectedItem=this._itemArr[0]),this.setSelect(this._selectedIndex)},n.setSelect=function(e){this._imageSelected.x=this.equipItemContainer.x+this._selectedItem.x-7,this._imageSelected.y=this.equipItemContainer.y+this._selectedItem.y-7;var t=(FigureModel.getInstance().selectedPartnerVO.parnerID,FigureModel.getInstance().selectedPartnerVO),i=RoleModel.getInstance().getRoleCommon().round,n=i;i>14&&(n=14),this.legendSuitVO=LegendSuitModel.getInstance().getDataVO(n,Number(this._selectedItem.name)),this.legendSuitNextVO=LegendSuitModel.getInstance().getDataVOByTemplateId(this.legendSuitVO.next_id),this.conItemVO=GoodsListProxy.getInstance().getGoodsInfoByType(this.legendSuitVO.con_itemid);var s,a;this._selectedItem.data?(this._btnOK.label=this.LABEL_LEVELUP,this._nextGroup.visible=!0,this._nextProGroup.visible=!0,this._currentGroup.x=128,this._currentProGroup.x=140,this.legendSuitVO=LegendSuitModel.getInstance().getDataVOByItemId(this._selectedItem.data.template_id),this.conItemVO=GoodsListProxy.getInstance().getGoodsInfoByType(this.legendSuitVO.con_itemid),this.legendSuitNextVO=LegendSuitModel.getInstance().getDataVOByTemplateId(this.legendSuitVO.next_id),s=this._selectedItem.data,this.legendSuitNextVO?(a=GoodsListProxy.getInstance().getGoodsInfoByType(this.legendSuitNextVO.item_id),this._myEquip.data=s,this._nextEquip.data=a,this._txtName.text=s.name,this._txtName2.text=a.name,this._txtFPower.text="战力:"+GoodsListProxy.getInstance().getEquipFightValue(s).toString(),this._txtFPowerNext.text="战力:"+GoodsListProxy.getInstance().getEquipFightValue(a,15,100).toString(),this._txtPro.htmlText=this.addProperty(GoodsListProxy.getInstance().getEquipBasicGood(s.template_id),s,EquipBasic.PROPERTY_INDEX,0,1e4),this._txtProNext.htmlText=this.addProperty(GoodsListProxy.getInstance().getEquipBasicGood(a.template_id),a,EquipBasic.PROPERTY_INDEX,15,100)):(this._nextGroup.visible=!1,this._nextProGroup.visible=!1,this._currentGroup.x=199,this._currentProGroup.x=229),LegendSuitModel.getInstance().getLegendsuitSingeDebrisCanUpOrActiveBySlot(t,Number(this._selectedItem.name))?this._btnOK.enabled=!0:this._btnOK.enabled=!1):(0==this._btnOK.enabled&&(this._btnOK.enabled=!0),this._btnOK.label=this.LABEL_MERGE,this._nextGroup.visible=!1,this._nextProGroup.visible=!1,this._currentGroup.x=199,this._currentProGroup.x=229,s=GoodsListProxy.getInstance().getGoodsInfoByType(this.legendSuitVO.item_id),this._myEquip.data=s,this._txtName.text=s.name,this._txtFPower.text="战力:"+GoodsListProxy.getInstance().getEquipFightValue(s,15,100).toString(),this._txtPro.htmlText=this.addProperty(GoodsListProxy.getInstance().getEquipBasicGood(s.template_id),s,EquipBasic.PROPERTY_INDEX,15,100),LegendSuitModel.getInstance().getLegendsuitSingeDebrisCanUpOrActiveBySlot(t,Number(this._selectedItem.name))?this._btnOK.enabled=!0:this._btnOK.enabled=!1);var o=Number(this._selectedItem.name);7==o||8==o?this._txtLink.visible=!1:this._txtLink.visible=!0,this.updateNum()},n.updateNum=function(){var e="",t=0,i=GoodsListProxy.getInstance().findGoodNumber(this.legendSuitVO.con_itemid);this._selectedItem.data?this.legendSuitNextVO?(e=GoodsListProxy.getInstance().getBasicGood(this.legendSuitNextVO.con_itemid).name,t=this.legendSuitNextVO.con_count-this.legendSuitVO.con_count):(e=this.conItemVO.name,t=0):(t=this.legendSuitVO.con_count,e=this.conItemVO.name),this._txtConLabel.text="消耗"+e+"：";var n="#E7D0B7";t>i&&(n="#ff0000"),this._txtConNum.htmlText="<font color='"+n+"'>"+i+"</font>/"+t,this.updateTxtLinkRedDot()},n.updateTxtLinkRedDot=function(){GoodsListProxy.getInstance().getDecompositionEquipInfoList(GoodsType.QUALITY_7).length>0?(this.showTextLinkEffect(!0),this._imageReddot.visible=!0):(this.showTextLinkEffect(!1),this._imageReddot.visible=!1)},n.showTextLinkEffect=function(e){e?this._textLinkEff||(this._textLinkEff=new UIEffect,this._textLinkEff.showEffect(UrlUtil.getCommonEffectURL("anniu"),this._txtLink.x+48,this._txtLink.y+10,this,120,!0)):this._textLinkEff&&(this._textLinkEff.dispose(),this._textLinkEff=null)},n.addProperty=function(e,t,i,n,s,a,o,r){void 0===n&&(n=0),void 0===s&&(s=1e4),void 0===a&&(a="#dda66b"),void 0===o&&(o="#e7d0b7"),void 0===r&&(r="#00d228");var h=0,l=0,d=0,_="",c="";t.rand_attr<=0&&(t.rand_attr=n);for(var u=0;u<i.length;u++)c=i[u],h=e[c],l=null==t?0:Math.floor(t.rand_attr/s*h),0>=l&&(l=1),0>=h||(d=u,_+=d>=5?"\n<font color='"+a+"'>"+EquipBasic.PROPERTY_NAME[c]+" ：</font><font color='"+o+"'>"+h/100+"%</font><font color='"+r+"'>+"+l+"%</font>":"\n<font color='"+a+"'>"+EquipBasic.PROPERTY_NAME[c]+" ：</font><font color='"+o+"'></font>"+h+"<font color='"+r+"'>+"+l+"</font>");return _},t}(BaseView);egret.registerClass(LegendSuitView,"LegendSuitView");var OrangesuitView=function(e){function t(){e.call(this),this._itemArr=[],this._selectedIndex=0,this.LABEL_MERGE="合成",this.LABEL_LEVELUP="升级",this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/orangesuit/OrangesuitViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){function e(e,t){return Number(e.name)-Number(t.name)}this._txtLink.htmlText="<u><a href = 'event:2'>获得神装碎片</a></u>";var t;this._itemArr=[];for(var i=0;i<this.equipItemContainer.numChildren;i++)t=this.equipItemContainer.getChildAt(i),t.showLv(!1),t.addCallBack(this.callBackF,t,this),t.setImageBottomType(Number(t.name)),this._itemArr.push(t);this._itemArr.sort(e),this._myEquip.touchEnabled=this._myEquip.touchChildren=!1,this._nextEquip.touchEnabled=this._nextEquip.touchChildren=!1,this.updateInfoHandler()},n.callBackF=function(e,t){var i=Number(e.name)-1;t._selectedItem=e,t.setSelect(i)},n.onOpenHandler=function(){this.onPartnerChangeHandler(),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this._txtLink.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOKHandler,this),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),this.addGlobalEventListener(EventName.EQUIP_LIST_CHANGE,this.updateInfoHandler,this),this.updateTxtLinkRedDot()},n.onCloseHandler=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e&&(e.parent&&e.parent.removeChild(e),e.data&&(e.data=null),e.dispose(),e=null);this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this._txtLink.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOKHandler,this),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),this.removeGlobalEventListener(EventName.EQUIP_LIST_CHANGE,this.updateInfoHandler,this),this.showTextLinkEffect(!1)},n.onHelp=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.ORANGESUIT))},n.onTxtLinkHandler=function(){var e=new ParamEvent(OrangeSuitEvtName.ORANGESUIT_OPEN_DECOMPOSITION_VIEW);e.data={type:1,linkStrArr:[{type:GetMaterialItem.OPEN_TREASURE,linkStr:"<u><a href = 'event:1'>获得神装：寻宝</a></u>"},{type:GetMaterialItem.OPEN_BOSS,linkStr:"<u><a href = 'event:2'>获得神装：前往BOSS</a></u>"},{type:GetMaterialItem.OPEN_MATERIAL_FUBEN,linkStr:"<u><a href = 'event:3'>获得神装：挑战副本</a></u>"}]},this.dispatchGlobalEvent(e)},n.onPartnerChangeHandler=function(){this.updateInfoHandler()},n.onBtnOKHandler=function(){var e,t=Number(this._selectedItem.name);this._btnOK.label==this.LABEL_LEVELUP?(e=new ParamEvent(OrangeSuitEvtName.CCMD13900),e.data={id:FigureModel.getInstance().selectedPartnerVO.parnerID,slot:t}):(e=new ParamEvent(OrangeSuitEvtName.CCMD13900),e.data={id:FigureModel.getInstance().selectedPartnerVO.parnerID,slot:t}),this.dispatchGlobalEvent(e)},n.updateInfoHandler=function(){RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.ORANGE_HEROLIST_REDDOT,{index:0}));for(var e,t,i=0,n=FigureModel.getInstance().selectedPartnerVO.parnerID,s=FigureModel.getInstance().selectedPartnerVO,a=0;a<this._itemArr.length;a++)e=this._itemArr[a],i=Number(e.name),t=GoodsListProxy.getInstance().getEquipInfoBySlot(n,i,GoodsType.QUALITY_6),t?e.data=t:e.data=null,OrangeSuitModel.getInstance().getOrangesuitSingleDebrisCanUpOrActiveBySlot(s,i)?e.showRedDot=!0:e.showRedDot=!1;null==this._selectedItem&&(this._selectedItem=this._itemArr[0]),this.setSelect(this._selectedIndex)},n.setSelect=function(e){this._imageSelected.x=this.equipItemContainer.x+this._selectedItem.x-13,this._imageSelected.y=this.equipItemContainer.y+this._selectedItem.y-13;var t=(FigureModel.getInstance().selectedPartnerVO.parnerID,FigureModel.getInstance().selectedPartnerVO),i=RoleModel.getInstance().getRoleCommon().level,n=RoleModel.getInstance().getRoleCommon().round;this.orangeVO=OrangeSuitModel.getInstance().getDataVO(n,i,Number(this._selectedItem.name),t.getCareer()),this.orangeNextVO=OrangeSuitModel.getInstance().getDataVOByTemplateId(this.orangeVO.next_id),this.conItemVO=GoodsListProxy.getInstance().getGoodsInfoByType(this.orangeVO.con_itemid);var s,a;this._selectedItem.data?(this._btnOK.label=this.LABEL_LEVELUP,this._nextGroup.visible=!0,this._nextProGroup.visible=!0,this._currentGroup.x=128,this._currentProGroup.x=130,this.orangeVO=OrangeSuitModel.getInstance().getDataVOByItemId(this._selectedItem.data.template_id),this.conItemVO=GoodsListProxy.getInstance().getGoodsInfoByType(this.orangeVO.con_itemid),this.orangeNextVO=OrangeSuitModel.getInstance().getDataVOByTemplateId(this.orangeVO.next_id),s=this._selectedItem.data,this.orangeNextVO?(a=GoodsListProxy.getInstance().getGoodsInfoByType(this.orangeNextVO.item_id),this._myEquip.data=s,this._nextEquip.data=a,this._txtName.text=s.name,this._txtName2.text=a.name,this._txtFPower.text="战力:"+GoodsListProxy.getInstance().getEquipFightValue(s).toString(),this._txtFPowerNext.text="战力:"+GoodsListProxy.getInstance().getEquipFightValue(a,15,100).toString(),this._txtPro.htmlText=this.addProperty(GoodsListProxy.getInstance().getEquipBasicGood(s.template_id),s,EquipBasic.PROPERTY_INDEX,0,1e4),this._txtProNext.htmlText=this.addProperty(GoodsListProxy.getInstance().getEquipBasicGood(a.template_id),a,EquipBasic.PROPERTY_INDEX,15,100)):(this._nextGroup.visible=!1,this._nextProGroup.visible=!1,this._currentGroup.x=199,this._currentProGroup.x=229),OrangeSuitModel.getInstance().getOrangesuitSingleDebrisCanUpOrActiveBySlot(t,Number(this._selectedItem.name))?this._btnOK.enabled=!0:this._btnOK.enabled=!1):(0==this._btnOK.enabled&&(this._btnOK.enabled=!0),this._btnOK.label=this.LABEL_MERGE,this._nextGroup.visible=!1,this._nextProGroup.visible=!1,this._currentGroup.x=199,this._currentProGroup.x=229,s=GoodsListProxy.getInstance().getGoodsInfoByType(this.orangeVO.item_id),this._myEquip.data=s,this._txtName.text=s.name,this._txtFPower.text="战力:"+GoodsListProxy.getInstance().getEquipFightValue(s,15,100).toString(),this._txtPro.htmlText=this.addProperty(GoodsListProxy.getInstance().getEquipBasicGood(s.template_id),s,EquipBasic.PROPERTY_INDEX,15,100)),this.updateNum()},n.updateNum=function(){var e="",t=0,i=GoodsListProxy.getInstance().findGoodNumber(this.orangeVO.con_itemid);this._selectedItem.data?this.orangeNextVO?(e=GoodsListProxy.getInstance().getBasicGood(this.orangeNextVO.con_itemid).name,t=this.orangeNextVO.con_count-this.orangeVO.con_count):(e=this.conItemVO.name,t=0):(t=this.orangeVO.con_count,e=this.conItemVO.name),this._txtConLabel.text="消耗"+e+"：";var n="#E7D0B7";t>i&&(n="#ff0000"),this._txtConNum.htmlText="<font color='"+n+"'>"+i+"</font>/"+t,this.updateTxtLinkRedDot()},n.updateTxtLinkRedDot=function(){GoodsListProxy.getInstance().getDecompositionEquipInfoList(GoodsType.QUALITY_6).length>0?(this.showTextLinkEffect(!0),this._imageReddot.visible=!0):(this.showTextLinkEffect(!1),this._imageReddot.visible=!1)},n.showTextLinkEffect=function(e){e?this._textLinkEff||(this._textLinkEff=new UIEffect,this._textLinkEff.showEffect(UrlUtil.getCommonEffectURL("anniu"),this._txtLink.x+48,this._txtLink.y+10,this,120,!0)):this._textLinkEff&&(this._textLinkEff.dispose(),this._textLinkEff=null)},n.addProperty=function(e,t,i,n,s,a,o,r){void 0===n&&(n=0),void 0===s&&(s=1e4),void 0===a&&(a="#dda66b"),void 0===o&&(o="#e7d0b7"),void 0===r&&(r="#00d228");var h=0,l=0,d=0,_="",c="";t.rand_attr<=0&&(t.rand_attr=n);for(var u=0;u<i.length;u++)c=i[u],h=e[c],l=null==t?0:Math.floor(t.rand_attr/s*h),0>=l&&(l=1),0>=h||(d=u,_+=d>=5?"\n<font color='"+a+"'>"+EquipBasic.PROPERTY_NAME[c]+" ：</font><font color='"+o+"'>"+h/100+"%</font><font color='"+r+"'>+"+l+"%</font>":"\n<font color='"+a+"'>"+EquipBasic.PROPERTY_NAME[c]+" ：</font><font color='"+o+"'></font>"+h+"<font color='"+r+"'>+"+l+"</font>");return _},t}(BaseView);egret.registerClass(OrangesuitView,"OrangesuitView");var PKSkillProjectItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/pkSkill/PKSkillProjectItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiComplementHandler,e),e.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGetClick,e),e.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGoClick,e),e.icon=new PicLoader,e.icon.x=25,e.addChild(e.icon)},n.onGoClick=function(){var e=this,t=e._vo.event.split(",");TaskModel.getInstance().getTaskOpen(t[0],Number(t[1])),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ArtifactEvtName.ARTIFACT_CLOSE_WINDOW))},n.onGetClick=function(){var e=this,t=this;t._effect&&(t._effect.dispose(),t._effect=null);var i=t.parent.localToGlobal(t.x+t.btnGet.x,t.y+t.btnGet.y);t._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("lightball"),i.x,i.y,GameContent.gameLayers.topLayer,50,!0),egret.Tween.get(t._effect.content).to({x:355,y:280,alpha:0},500).wait(0).call(function(){t._effect&&(t._effect.dispose(),t._effect=null),t.btnGet.visible=!1,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(PKSkillEvtName.CCMD23801,e._vo.template_id))}),egret.Tween.get(t).to({alpha:0},500)},n.dataChanged=function(){var e=this,t=e.data;e._vo=PKSkillModel.getInstance().getPKTargetConfigList()[t.template_id],e.txtName.text=StringUtil.substitute(e._vo.describe,e._vo.need),e.bar.maximum=e._vo.need,e.bar.minimum=0,e.bar.value=t.progress,e.btnGo.visible=t.progress<e._vo.need,e.btnGet.visible=t.progress>=e._vo.need,e.txtTips.visible=e._vo.is_daily>0,e._vo.reward&&e._vo.reward.length>0?e.txtItem.text="（"+e._vo.reward[0].info.name+"×"+Tools.convertNumber(e._vo.reward[0].num)+"）":e.txtItem.text="",e.icon.load(UrlUtil.getFolderPic("pkSkill","pkSkill_type_"+e._vo.type))},n.dispose=function(){var e=this;e.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onGetClick,e),e.btnGo.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onGoClick,e),e.icon&&(e.icon.parent&&e.icon.parent.removeChild(e.icon),e.icon.dispose(),e.icon=null)},t}(eui.ItemRenderer);egret.registerClass(PKSkillProjectItem,"PKSkillProjectItem");var PKSkillProjectView=function(e){function t(){e.call(this),this._isTween=!0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/pkSkill/PKSkillProjectViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiComplementHandler,e),e.addGlobalEventListener(PKSkillEvtName.CCMD23800_UPDATE,e.updateData,e),e._icon=new PicLoader,e._icon.load(UrlUtil.getPKSkillURL("pkSkillIcon")),e.contentGroup.addChild(e._icon),e._iconCur=new PicLoader,e.iconGroup.addChild(e._iconCur),e._iconNext=new PicLoader,e._iconNext.x=464,e._iconNext.y=21,e.contentGroup.addChild(e._iconNext),e._iconCur.touchEnabled=!0,e._iconNext.touchEnabled=!0,e._iconCur.addEventListener(egret.TouchEvent.TOUCH_TAP,e.openPetWindow,e),e._iconNext.addEventListener(egret.TouchEvent.TOUCH_TAP,e.openPetWindow,e),e._arrItem=[]},n.updateData=function(e){var t=this,i=e.data;if(i){t.txtExp.text=i.point+"";var n=PKSkillModel.getInstance().getPKRewardList()[i.level];n?(t._iconCur.load(UrlUtil.getPKSkillURL("pet_"+n.get_pet)),t.txtCur.text=n.need+"",t.iconGroup.visible=!0,t._txt300.visible=!1):(t.iconGroup.visible=!1,t._txt300.visible=!0);var s=PKSkillModel.getInstance().getPKRewardList()[i.level+1];s||(s=PKSkillModel.getInstance().getPKRewardList()[i.level]),t._iconNext.load(UrlUtil.getPKSkillURL("pet_"+s.get_pet)),t.txtNext.text=s.need+"",t.bar.maximum=s.need,t.bar.value=i.point;for(var a,o,r=[],h=[],l=0;l<i.target_list.length;l++)o=i.target_list[l],a=PKSkillModel.getInstance().getPKTargetConfigList()[o.template_id],RoleModel.getInstance().getRoleCommon().level>=a.open_lv&&RoleModel.getInstance().getRoleCommon().round>=a.open_round&&(o.progress>=a.need?r.push(o):h.push(o));r.sort(function(e,t){return e.template_id>t.template_id?1:-1}),h.sort(function(e,t){return e.template_id>t.template_id?1:-1}),r=r.concat(h);for(var d,l=0;l<t._arrItem.length;l++)d=t._arrItem[l],d&&d.parent&&d.parent.removeChild(d);for(var _=0;_<r.length;_++)o=r[_],d=t._arrItem[_],d||(d=new PKSkillProjectItem,t._arrItem.push(d)),d.data=o,d.y=118*_,d.alpha=1,t._isTween&&5>_&&(d.x=575,egret.Tween.get(d).to({x:0},50*_+300)),t.itemList.addChild(d);t._isTween=!1}},n.openPetWindow=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.PET_OPEN_WINDOW))},n.dispose=function(){e.prototype.dispose.call(this);var t=this;if(t.removeGlobalEventListener(PKSkillEvtName.CCMD23800_UPDATE,t.updateData,t),t._arrItem){for(var i,n=0;n<t._arrItem.length;n++)i=t._arrItem[n],i.parent&&i.parent.removeChild(i),i.dispose(),i=null;t._arrItem=null}},t}(BaseView);egret.registerClass(PKSkillProjectView,"PKSkillProjectView");var PKSkillView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/pkSkill/PKSkillViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiComplementHandler,e),e.icon=new PicLoader,e.icon.x=239,e.icon.y=306,e.addChild(e.icon),e.txtName=new PicLoader,e.txtName.x=144,e.txtName.y=484,e.addChild(e.txtName),e.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onLeft,e),e.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onRight,e),e._dataArr=PKSkillModel.getInstance().getSkillConfigList(),e._pageIndex=0,e.updateContent(),e.addGlobalEventListener(PKSkillEvtName.CCMD23801_UPDATE,e.updateContent,e)},n.onLeft=function(){var e=this;e._pageIndex--,e.updateContent()},n.onRight=function(){var e=this;e._pageIndex++,e.updateContent()},n.updateContent=function(){var e=this;e._pageIndex<0&&(e._pageIndex=0),e.btnLeft.visible=e._pageIndex>0,e.btnRight.visible=e._pageIndex<e._dataArr.length-1;var t=e._dataArr[e._pageIndex];e.icon.load(UrlUtil.getPKSkillURL("pkSkill_"+t.template_id)),e.txtName.load(UrlUtil.getFolderPic("pkSkill","pkSkillName_"+t.template_id)),e.txtTitle.text=t.name,e.txtDes.text=StringUtil.substitute(t.describe,t.value1/100,t.cd_second);var i=PKSkillModel.getInstance().getLevelBySkill(t.template_id),n=PKSkillModel.getInstance().projectData;e.img_jh.visible=n&&n.level>=i},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onLeft,t),t.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onRight,t),t.removeGlobalEventListener(PKSkillEvtName.CCMD23801_UPDATE,t.updateContent,t),t.icon&&(t.icon.dispose(),t.icon=null),t.txtName&&(t.txtName.dispose(),t.txtName=null)},t}(BaseView);egret.registerClass(PKSkillView,"PKSkillView");var PKSkillWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/pkSkill/PKSkillWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this);var t=this;t.setImageWindowTitle("title_pkSkill"),t.tabBar.dataProvider=new eui.ArrayCollection(["目标","绝技"]),t.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,t.onBarItemTap,t),t.addGlobalEventListener(PKSkillEvtName.CCMD23800_UPDATE,t.updateData,t),t.addGlobalEventListener(PKSkillEvtName.CCMD23801_UPDATE,t.updateData,t),t._icon=new PicLoader,t._icon.x=12,t._icon.y=72,t._icon.load(UrlUtil.getPKSkillURL("pkSkillIcon")),t.panelSkin.addChild(t._icon),t._iconCur=new PicLoader,t.iconGroup.addChild(t._iconCur),t._iconNext=new PicLoader,t._iconNext.x=476,t._iconNext.y=93,t.panelSkin.addChild(t._iconNext),t._isInit||(t._isInit=!0,t.setSelectIndex(0))},n.updateData=function(e){var t=this,i=e.data;t.txtExp.text=i.point+"";var n=PKSkillModel.getInstance().getPKRewardList()[i.level];n?(t._iconCur.load(UrlUtil.getPKSkillURL("pet_"+n.get_pet)),t.txtCur.text=n.need+"",t.iconGroup.visible=!0):t.iconGroup.visible=!1;var s=PKSkillModel.getInstance().getPKRewardList()[i.level+1];s||(s=PKSkillModel.getInstance().getPKRewardList()[i.level]),t._iconNext.load(UrlUtil.getPKSkillURL("pet_"+s.get_pet)),t.txtNext.text=s.need+"",t.bar.maximum=s.need,t.bar.value=i.point},n.onBarItemTap=function(e){var t=this;t.setSelectIndex(t.tabBar.selectedIndex)},n.setSelectIndex=function(e){void 0===e&&(e=0);var t=this;if(t._isInit){switch(t.tabBar.selectedIndex=e,t._curView&&t._curView.parent&&t._curView.parent.removeChild(t._curView),t._project&&(t._project.parent&&t._project.parent.removeChild(t._project),t._project.dispose(),t._project=null),e){case 0:t._project||(t._project=new PKSkillProjectView),t._curView=t._project,t.dispatchGlobalEvent(new ParamEvent(PKSkillEvtName.CCMD23800));break;case 1:t._skill||(t._skill=new PKSkillView),t._curView=t._skill}t._curView&&t.viewContainer.addChild(t._curView);GameContent.stage.localToGlobal(t._project.x,t._project.y)}},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,t.onBarItemTap,t),t.removeGlobalEventListener(PKSkillEvtName.CCMD23800_UPDATE,this.updateData,this),t.removeGlobalEventListener(PKSkillEvtName.CCMD23801_UPDATE,this.updateData,this),t._project&&(t._project.parent&&t._project.parent.removeChild(t._project),t._project.dispose(),t._project=null),t._skill&&(t._skill.parent&&t._skill.parent.removeChild(t._skill),t._skill.dispose(),t._skill=null),t._icon&&(t._icon.parent&&t._icon.parent.removeChild(t._icon),t._icon.dispose(),t._icon=null),t._iconCur&&(t._iconCur.parent&&t._iconCur.parent.removeChild(t._iconCur),t._iconCur.dispose(),t._iconCur=null),t._iconNext&&(t._iconNext.parent&&t._iconNext.parent.removeChild(t._iconNext),t._iconNext.dispose(),t._iconNext=null)},t}(LayeroutWindow);egret.registerClass(PKSkillWindow,"PKSkillWindow");var QQCoverWindow=function(e){function t(){e.call(this),this._isFirst=!0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/qq/QQCoverWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiComplementHandler,e),e._btnGoto.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick,e),e._btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickClose,e),e.createIcons()},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),QQManager.getInstance().addEventListener(QQEvtName.UPDATE_COVER_STATU,this.updateStatu,this),QQManager.getInstance().requestCoverStatu()},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),QQManager.getInstance().removeEventListener(QQEvtName.UPDATE_COVER_STATU,this.updateStatu,this)},n.updateStatu=function(e){var t=this;QQManager.getInstance().isSetCover?t._btnGoto.label="领取奖励":t._btnGoto.label="去设置"},n.createIcons=function(){var e=QQManager.getInstance().coverRewardID,t=OrderGiftModel.getInstance().getOrderGiftRewardVo(e);if(t){var i=t.goods_id,n=this;n._goodsItem=new GoodsItemSmall;var s=GoodsListProxy.getInstance().getGoodsInfoByType(i);n._goodsItem.data=s,n._container.addChild(n._goodsItem)}},n.onClick=function(e){var t=QQManager.getInstance().isSetCover,i=this;t?(i.dispatchGlobalEvent(new ParamEvent(EventName.REQUEST_22801,{id:QQManager.getInstance().coverRewardID})),TipsWordManager.getInstance().removeIcon(TipsWord.QQ_COVER)):window.open("https://h5.qzone.qq.com/bgstore/detail/128409?_wv=2098179&from=adv&page=1&router=detail&coverid=128409&_proxy=1"),i.onClickClose(null)},n.onClickClose=function(e){this.isPop=!1},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.pic&&(t.pic.dispose(),t.pic=null),t._goodsItem&&(t._goodsItem.dispose(),t._goodsItem=null),QQManager.getInstance().removeEventListener(QQEvtName.UPDATE_COVER_STATU,t.updateStatu,t)},t}(LayeroutWindow);egret.registerClass(QQCoverWindow,"QQCoverWindow");var QQHaoLiWindow=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/qq/QQHaoLiWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,e.uiComplementHandler,e),e._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick,e),e.pic=new CustomImage;var t=UrlUtil.getOtherIcon("qqHaoLiBg","jpg");e.pic.source=t,e._container.addChild(e.pic),t=UrlUtil.getOtherIcon("qqHaoLiDL"),e._dlPic=new PicLoader,e._dlPic.load(t),e.panelSkin.addChild(e._dlPic)},n.onClick=function(e){window.open("https://act.qzone.qq.com/vip/meteor/m/p/2163")},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.pic&&(t.pic.dispose(),t.pic=null)},t}(LayeroutWindow);egret.registerClass(QQHaoLiWindow,"QQHaoLiWindow");var QQKuaiJieWindow=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/qq/QQKuaiJieWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickClose,this),this._picBg=new PicLoader(PicLoader.MAPTILE),this._picBg.load(UrlUtil.getOtherIcon("qq_kuaijie")),this.addChildAt(this._picBg,0),this.setGoods()},n.setGoods=function(){var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_20001);if(e)var t=e.value.match(/\d+/g),i=parseInt(t[0]),n=parseInt(t[1]);else var i=WelfareType.ADD_GOLD,n=100;var s=GoodsListProxy.getInstance().getGoodsInfoByType(i);s.num=n,this._goodsItem.data=s},n.onClick=function(e){QQManager.getInstance().addShortCut(),this.dispatchGlobalEvent(new ParamEvent(QQEvtName.REQEUST_20000))},n.onClickClose=function(e){this.isPop=!1},n.dispose=function(){e.prototype.dispose.call(this),this._picBg&&(this._picBg.dispose(),this._picBg=null),this._goodsItem&&(this._goodsItem.dispose(),this._goodsItem=null)},n.setCenter=function(){e.prototype.setCenter.call(this),this.y=GameContent.stageHeight-405>>1},t}(LayeroutWindow);egret.registerClass(QQKuaiJieWindow,"QQKuaiJieWindow");var RankCommonWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/rank/RankCommonSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.RANK,this._isInit||(this._isInit=!0,this.setType(this._type))},n.updateData=function(e){var t=e.data;this.txtRank.text=t.self_rank.toString();var i=t.rank_list,n=new eui.ArrayCollection;if(i.length>0)for(var s=0;s<i.length;s++)n.addItem({info:i[s],type:this._type});this.ranklist.dataProvider=n},n.setType=function(e){if(this._type=e,this._isInit)switch(e){case RankModel.RANK_TYPE_11:this.setImageWindowTitle("title_rank_checkPointBoss");break;case RankModel.RANK_TYPE_12:this.setImageWindowTitle("title_rank_fuben")}},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateData,this)},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateData,this)},t}(LayeroutWindow);egret.registerClass(RankCommonWindow,"RankCommonWindow");var RankItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/rank/RankItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onListClick,this),this.iconItem=new PicLoader,this.iconItem.x=253,this.iconItem.y=40,this.addChild(this.iconItem)},n.onListClick=function(){this._rankData&&(this._rankData.role_id==RoleModel.getInstance().getRoleCommon().role_id?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_FIGURE)):GameDispatcher.getInstance().dispatchEvent(new ParamEvent(RankEvtName.RANK_CCMD13501,{id:this._rankData.role_id,isShow:!0})))},n.dataChanged=function(){var e=this.data.type;this._rankData=this.data.info,this.txtName.text=this._rankData.name,this.txtResult.visible=!1,this.txtCoin.visible=!1,this.txtItem.visible=!1,this.iconCoin.visible=!1,this.iconItem.visible=!1,this.txtFight.visible=!0,this.txtLv.x=276,this.txtLv.y=16;var t="",i=this._rankData.level;switch(e){case RankModel.RANK_TYPE_1:t="战斗力:";break;case RankModel.RANK_TYPE_2:t="",this.txtFight.visible=!1,this.txtLv.x=this.txtFight.x,this.txtLv.y=this.txtFight.y;var n=this._rankData.value/1e3;this._rankData.round=Math.floor(n),i=Math.floor(1e3*(n-this._rankData.round));break;case RankModel.RANK_TYPE_3:t="神翼战力:";break;case RankModel.RANK_TYPE_4:this.txtFight.visible=!1,this.txtResult.visible=!0,this.txtCoin.visible=!0,this.txtItem.visible=!0,this.iconCoin.visible=!0,this.iconItem.visible=!0;var s=RankModel.getInstance().getPkVo(this._rankData.rank),a=s.add_coin.toString();s.add_coin>1e4&&(a=Math.floor(s.add_coin/1e4)+"万"),this.txtCoin.text=a,this.iconItem.load(UrlUtil.getSmallPic(s.item_id));var o=s.item_num.toString();s.item_num>1e4&&(o=Math.floor(s.item_num/1e4)+"万"),this.txtItem.text=o;break;case RankModel.RANK_TYPE_5:t=Tools.getJobName(Tools.ZHANSHI)+"战力:";break;case RankModel.RANK_TYPE_6:t=Tools.getJobName(Tools.FASHI)+"战力:";break;case RankModel.RANK_TYPE_7:t=Tools.getJobName(Tools.DAOSHI)+"战力:"}t+=this._rankData.value>1e4?"<font color='#ffd200'>"+Math.floor(this._rankData.value/1e4)+"万</font>":"<font color='#ffd200'>"+this._rankData.value+"</font>",this.txtFight.htmlText=t;var r=i+"级";this._rankData.round>0&&(r=this._rankData.round+"转"+r),this.txtLv.text=e==RankModel.RANK_TYPE_4?this._rankData.value+"声望":r,this.txtRank.text=this._rankData.rank.toString(),1==this._rankData.rank?(this.txtRank.visible=!1,this.txtRank.visible=!1,this.rankIcon_num.visible=!0,this.itemBg.visible=!0,this.line.visible=!1):(this.txtRank.visible=!0,this.txtRank.visible=!0,this.rankIcon_num.visible=!1,this.itemBg.visible=!1,this.line.visible=!0),e==RankModel.RANK_TYPE_1&&this._rankData.rank>=2&&this._rankData.rank<=10?(this.rankIcon.source="rankIcon",this.rankIcon.visible=!0):e==RankModel.RANK_TYPE_4&&this._rankData.rank>=2&&this._rankData.rank<=10?(this.rankIcon.source="rankIcon3",this.rankIcon.visible=!0):this.rankIcon.visible=!1,this._rankData.vip>0?(this.vipNum.text=this._rankData.vip.toString(),this.vipNum.visible=!0,this.vipIcon.visible=!0):(this.vipNum.visible=!1,this.vipIcon.visible=!1),this._rankData.month_card>0?this.vipMonth.visible=!0:this.vipMonth.visible=!1
},t}(eui.ItemRenderer);egret.registerClass(RankItem,"RankItem");var RankItem2=function(e){function t(){e.call(this),this.skinName="resource/game_skins/rank/RankItemSkin2.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dataChanged=function(){this.data.type;this._rankData=this.data.info,this.txtName.text=this._rankData.name;var e;e=this._rankData.power>1e4?Math.floor(this._rankData.power/1e4)+"万":this._rankData.power.toString(),this.txtFight.htmlText=e,this.txtRank.text=this._rankData.rank.toString(),this.txtValue.text=this._rankData.value+"关",this.itemBg.source=this._rankData.rank%2==0?"share_lineBg":"share_lineBg2",this._rankData.vip>0?(this.vipNum.text=this._rankData.vip.toString(),this.vipNum.visible=!0,this.vipIcon.visible=!0):(this.vipNum.visible=!1,this.vipIcon.visible=!1),this._rankData.month_card>0?this.vipMonth.visible=!0:this.vipMonth.visible=!1},t}(eui.ItemRenderer);egret.registerClass(RankItem2,"RankItem2");var RankWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/rank/RankViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.RANK,this.windowBgBottom=-20,this.windowBgSource="rankBg",this.iconTitle=new PicLoader,this.iconTitle.x=147,this.iconTitle.y=23,this.roleGroup.addChild(this.iconTitle),this._btnArr=[];for(var t,i=1;8>i;i++)t=this["btnType_"+i],t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTypeClick,this),this._btnArr.push(t);this._isInit||(this._isInit=!0,this.selectIndex()),this.setTime()},n.setTime=function(){this._last_time=1800-TimeUtil.getTimeNow()%1800,this._last_time>0?(this.txtTime.text=TimeUtil.getTime(this._last_time),TimerManager.getInstance().remove(1e3,this.onShowTime,this),TimerManager.getInstance().add(1e3,this.onShowTime,this)):this.txtTime.text="00:00"},n.onShowTime=function(){this._last_time--,this._last_time>0?this.txtTime.text=TimeUtil.getTime(this._last_time):(this.txtTime.text="00:00",TimerManager.getInstance().remove(1e3,this.onShowTime,this),this.dispatchGlobalEvent(new ParamEvent(RankEvtName.RANK_CCMD13500,this._type)),this.setTime())},n.onTypeClick=function(e){var t=e.currentTarget,i=Number(t.name.split("_")[1]);this.selectIndex(i)},n.selectIndex=function(e){if(void 0===e&&(e=1),this._isInit){this._type=e;for(var t,i=0;i<this._btnArr.length;i++)t=this._btnArr[i],e==i+1?t.enabled=!1:t.enabled=!0;GameDispatcher.getInstance().dispatchEvent(new ParamEvent(RankEvtName.RANK_CCMD13500,e))}},n.updateData=function(e){var t=e.data;this.txtRank.text=t.self_rank.toString();var i,n=t.rank_list,s=new eui.ArrayCollection;if(n.length>0){this._rankItem||(this._rankItem=new RankItem,this._rankItem.y=360),this.roleGroup.addChild(this._rankItem),i=n.shift(),this._rankItem.data={info:i,type:this._type};for(var a=0;a<n.length;a++)n[a].rank<=200&&s.addItem({info:n[a],type:this._type})}!i&&this._rankItem&&this._rankItem.parent&&this._rankItem.parent.removeChild(this._rankItem),this.ranklist.dataProvider=s,1==this._type?(this.iconTitle.load("resource/assets/mapAssets/title/10004.png"),this.iconTitle.visible=!0):4==this._type?(this.iconTitle.load("resource/assets/mapAssets/title/10002.png"),this.iconTitle.visible=!0):this.iconTitle.visible=!1,this.btnGet.enabled=0==DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_8,this._type);var o=RankModel.getInstance().getMobaiVo();if(this.txtCoin.text=o.add_coin.toString(),this.txtExp.text=o.add_exp.toString(),i)if(i.role_id==RoleModel.getInstance().getRoleCommon().role_id){var r=0;this._type==RankModel.RANK_TYPE_5&&(r=1),this._type==RankModel.RANK_TYPE_6&&(r=2),this._type==RankModel.RANK_TYPE_7&&(r=3);var h=RoleModel.getInstance().getRoleBaseInfo();r>0&&(h=RoleModel.getInstance().getPartnerByCareer(r)),this.updateFigure(h.getCareer(),h.getSex(),h.getCloth(),h.getWeapon(),h.getWingID())}else GameDispatcher.getInstance().dispatchEvent(new ParamEvent(RankEvtName.RANK_CCMD13501,{id:i.role_id,isShow:!1}))},n.updateFigureData=function(e){var t=e.data;if(0!=t.rank_partners.length){var i,n=0;if(this._type==RankModel.RANK_TYPE_5&&(n=1),this._type==RankModel.RANK_TYPE_6&&(n=2),this._type==RankModel.RANK_TYPE_7&&(n=3),n>0)for(var s=0;s<t.rank_partners.length;s++)t.rank_partners[s].career==n&&(i=t.rank_partners[s]);else i=t.rank_partners[0];if(i){var a=AppearanceUtil.changeAppListToVo(i.appearance),o=a.clothFashion>0?a.clothFashion:a.cloth,r=a.weaponFashion>0?a.weaponFashion:a.weapon;a.wingFashion>0?a.wingFashion:a.wing;this.updateFigure(i.career,i.sex,o,r,a.wing)}}},n.updateFigure=function(e,t,i,n,s){this.figureMovie||(this.figureMovie=new BigFigure,this.figureMovie.x=225,this.figureMovie.y=225,this.roleGroup.touchEnabled=!1,this.roleGroup.addChildAt(this.figureMovie,0)),this.figureMovie.changeBody(e,t,i),this.figureMovie.changeWeapon(e,t,n),this.figureMovie.changeWing(s)},n.onGetClick=function(){this.btnGet.enabled=!1,this.dispatchGlobalEvent(new ParamEvent(RankEvtName.RANK_CCMD13502,this._type))},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_rank")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateData,this),this.addGlobalEventListener(RankEvtName.RANK_CCMD13501_UPDATE,this.updateFigureData,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13500_UPDATE,this.updateData,this),this.removeGlobalEventListener(RankEvtName.RANK_CCMD13501_UPDATE,this.updateFigureData,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this);for(var t,i=0;i<this._btnArr.length;i++)t=this._btnArr[i],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTypeClick,this);this._btnArr=null,this.figureMovie&&(this.figureMovie.dispose(),this.figureMovie=null),this._rankItem=null,TimerManager.getInstance().remove(1e3,this.onShowTime,this),this.iconTitle&&(this.iconTitle.parent&&this.iconTitle.parent.removeChild(this.iconTitle),this.iconTitle.dispose(),this.iconTitle=null)},t}(LayeroutWindow);egret.registerClass(RankWindow,"RankWindow");var ReliveView=function(e){function t(){e.call(this),this._leftTime=0,this._w=609,this._si=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/relive/ReliveViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this);var e=UrlUtil.getOtherIcon("reliveMeiZi");this._meiziPic=new PicLoader,this._meiziPic.load(e),this._meiziPic.x=-100,this._meiziPic.y=-181,this.addChild(this._meiziPic),this._yuanbao=new PicLoader,this._yuanbao.x=442,this._yuanbao.y=116,this.addChild(this._yuanbao),e=UrlUtil.getSmallPic(WelfareType.ADD_GOLD),this._yuanbao.load(e)},n.onClickBtn=function(e){RoleModel.getInstance().getRoleInfo().getGold()>=ReliveModel.getInstance().getReliveYuanBao()?(this.onRemove(),this.relive(1)):Message.show("元宝不足")},n.showView=function(){var e=this,t=GameContent.stageWidth-e._w>>1,i=600;e.x=t,e.y=i,e._leftTime=ReliveModel.getInstance().getReliveTime(),TimerManager.getInstance().add(1e3,e.onTimer,e),GameContent.gameLayers.mainUILayer.addChild(e),e._btn.label=StringUtil.substitute("立即复活(     {0})",ReliveModel.getInstance().getReliveYuanBao()),SceneModel.getInstance().isClientHunZhan()?e._bg&&e.contains(e._bg)&&e.removeChild(e._bg):e.addBg()},n.addBg=function(){var e=this;if(null==e._bg){var t=GameContent.stageWidth-e._w>>1;e._bg=new egret.Shape,e._bg.y=-600,e._bg.x=-t,e._bg.graphics.beginFill(0,.6),e._bg.graphics.drawRect(0,0,GameContent.stageWidth,GameContent.stageHeight),e._bg.graphics.endFill(),e.addChildAt(e._bg,0)}},n.onRemove=function(){e.prototype.onRemove.call(this),this.parent&&this.parent.removeChild(this),TimerManager.getInstance().remove(1e3,this.onTimer,this)},n.onTimer=function(){return this._leftTime<=0?(this.onRemove(),void(SceneModel.getInstance().isGuildBoss()?this.exit():this.relive(0))):(this._txtTime.text=this._leftTime.toString(),void this._leftTime--)},n.relive=function(e){SceneModel.getInstance().isRoundBoss()?this.dispatchGlobalEvent(new ParamEvent(BossEvtName.BOSS_CCMD14811,{type:e})):SceneModel.getInstance().isCityWarInside()?this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15413,{type:e})):SceneModel.getInstance().isCityWarFrontPalace()?this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15510,{type:e})):SceneModel.getInstance().isCityWarPalace()?this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15620,{type:e})):SceneModel.getInstance().isGuildBoss()?this.dispatchGlobalEvent(new ParamEvent(BossEvtName.CMD19420)):SceneModel.getInstance().isKFBossScene()&&this.dispatchGlobalEvent(new ParamEvent(BossEvtName.CMD20120,{type:e}))},n.exit=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.EXIT_SCENE))},n.dispose=function(){e.prototype.dispose.call(this),clearTimeout(this._si),this._meiziPic&&(this.contains(this._meiziPic)&&this.removeChild(this._meiziPic),this._meiziPic.dispose(),this._meiziPic=null),this._yuanbao&&(this.contains(this._yuanbao)&&this.removeChild(this._yuanbao),this._yuanbao.dispose(),this._yuanbao=null)},t}(BaseView);egret.registerClass(ReliveView,"ReliveView");var FightUpItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/role/FightUpItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/fightUp/FightUpIcon.png"),this.imageBg.x=20,this.imageBg.y=10,this.addChild(this.imageBg)},n.onGetClick=function(){TaskModel.getInstance().getTaskOpenView(this._vo)},n.dataChanged=function(){this._vo=this.data,this.txtName.text=this._vo.name,this.btnGet.visible=0==this._vo.need||FunctionOpenModel.getInstance().check(this._vo.need,!1),this.txtTips.visible=!this.btnGet.visible},n.dispose=function(){this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null)},t}(eui.ItemRenderer);egret.registerClass(FightUpItem,"FightUpItem");var FightUpWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/role/FightUpWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_fightUp"),this.imageBg=new PicLoader,this.imageBg.y=5,this._viewContainer.addChild(this.imageBg),this.createIcons()},n.createIcons=function(){var e='<e:Skin class="skins.ButtonSkin" states="up,down" xmlns:e="http://ns.egret.com/eui">\n                <e:Image width="100%" height="100%"\n                         source="{0}"\n                         source.down="{0}"/>\n            </e:Skin>',t=0;this._btnCach=[];for(var i,n=1;n<=OtherModel.getInstance().getFightUpTypeLen();n++)i=this._btnCach[n],i||(i=new CustomButton,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickIcon,this),i.data=n,this._btnCach.push(i)),i.x=115*t+20,i.y=15,i.skinName=StringUtil.substitute(e,"resource/assets/icon/fightUp/fightUpType_"+n+".png"),t++,this._iconContainer.addChild(i);this._iconContainer.addChild(this._selectImage),this._selectImage.x=this._btnCach[0].x-17,this._selectImage.y=this._btnCach[0].y-17,this._type=1,this.updateView()},n.clickIcon=function(e){var t=e.currentTarget;this._selectImage.x=t.x-17,this._selectImage.y=t.y-17,this._type=t.data,this.updateView()},n.updateView=function(){this.imageBg.load("resource/assets/icon/fightUp/fightUpContent_"+this._type+".png");for(var e=OtherModel.getInstance().getFightUpArr(this._type),t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this._itemContainer.dataProvider=t},n.dispose=function(){e.prototype.dispose.call(this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null)},t}(LayeroutWindow);egret.registerClass(FightUpWindow,"FightUpWindow");var RoleEditHeadWindow=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/role/RoleEditHeadSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_roleHead"),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this._select=new PicLoader,this._select.load("resource/assets/icon/other/roleHeadSelect.png"),this.headGroup.addChild(this._select),this._headArr=[];for(var t,i=[1001,1002,2001,2002,3001,3002],n=0;n<i.length;n++)t=new PicLoader,t.touchEnabled=!0,t.name="head_"+i[n],t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSelect,this),t.load("resource/assets/icon/head/bighead_"+i[n]+".png"),n>2?(t.x=170*(n-3),t.y=115):t.x=170*n,this.headGroup.addChild(t),this._headArr.push(t);this._icon=i[0],this._select.x=this._headArr[0].x-14,this._select.y=this._headArr[0].y-15},n.onSelect=function(e){var t=e.currentTarget;this._icon=Number(t.name.split("_")[1]),this._select.x=t.x-14,this._select.y=t.y-15},n.onGetClick=function(){this._icon!=RoleModel.getInstance().getRoleCommon().icon&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.CCMD_10202,this._icon)),this.isPop=!1},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this);for(var t,i=0;i<this._headArr.length;i++)t=this._headArr[i],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSelect,this),t=null;this._headArr=null},t}(LayeroutWindow);egret.registerClass(RoleEditHeadWindow,"RoleEditHeadWindow");var RoleNameEditWindow=function(e){function t(){e.call(this),this._itemId=13080001,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/role/RoleNameEditSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_roleName"),this.txtBuy.htmlText="<u>立即购买</>",this.txtBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyClick,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.addGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateData,this)},n.updateData=function(){this._backCount=GoodsListProxy.getInstance().findGoodNumber(this._itemId);var e=GoodsListProxy.getInstance().getGoodsInfoByType(this._itemId).name;e+=0==this._backCount?"<font color='#e31101'>("+this._backCount+")</font>/1":"("+this._backCount+")/1",this.txtGood.htmlText=e,this.btnGet.enabled=this._backCount>0},n.onGetClick=function(){""!=this.txtName.text&&this._backCount>0&&(GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.CCMD_10210,this.txtName.text)),this.isPop=!1)},n.onBuyClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.OPEN_BUY_WINDOW,this._itemId))},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.txtBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyClick,this),this.removeGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateData,this)},t}(LayeroutWindow);egret.registerClass(RoleNameEditWindow,"RoleNameEditWindow");var RollPointView=function(e){function t(){e.call(this),this._w=587,this._leftTime=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/rollPoint/RollPointViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this._btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCloseBtn,this),this._item.showLv(!1)},n.onClickBtn=function(e){SceneModel.getInstance().isRoundBoss()?this.dispatchGlobalEvent(new ParamEvent(BossEvtName.BOSS_CCMD14820)):SceneModel.getInstance().isCityWar()&&this.dispatchGlobalEvent(new ParamEvent(CityWarEvtName.REQUEST_15310))},n.onClickCloseBtn=function(e){this.onRemove()},n.setData=function(e){if(!this._isInit){this._item.data=e,this._txtItemName.text=e.name;var t=SingleModel.getInstance().getSingVO(SingleModel.KEY_14804);this._leftTime=parseInt(t.value),TimerManager.getInstance().remove(1e3,this.onTimer,this),TimerManager.getInstance().add(1e3,this.onTimer,this),this._tween=egret.Tween.get(this._imageBar).to({scaleX:0},1e3*this._leftTime),this.onTimer(),this.contains(this._btn)||this.addChild(this._btn),this._isInit=!0}},n.onTimer=function(){return this._leftTime<=0?void this.onRemove():(this._txtTime.text=this._leftTime.toString(),void this._leftTime--)},n.showView=function(){var e=GameContent.stageWidth-this._w>>1,t=600;this.x=e,this.y=t,this._txtBig.text="",this.addChild(this._btn),null==this.parent&&GameContent.gameLayers.mainUILayer.addChild(this)},n.onRemove=function(){e.prototype.onRemove.call(this),this.parent&&this.parent.removeChild(this),TimerManager.getInstance().remove(1e3,this.onTimer,this),this._tween&&(egret.Tween.removeTweens(this._imageBar),this._tween=null),this._imageBar.scaleX=1,this._isInit=!1},n.setMyValue=function(e){this._txtValue.text=e.toString(),this.contains(this._btn)&&this.removeChild(this._btn)},n.setMax=function(e,t){this._txtBig.htmlText=StringUtil.substitute("{0} \n掷出了<font color='#28ff28'>{1}</font>",t,e)},t}(BaseView);egret.registerClass(RollPointView,"RollPointView");var RongLianSelectItem=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},n.dataChanged=function(){e.prototype.dataChanged.call(this)},n.childrenCreated=function(){if(e.prototype.childrenCreated.call(this),this.data){this.item.data=this.data,this.item.touchEnabled=this.item.touchChildren=!1,this.checkBox.selected=this._m_selected;var t=GoodsListProxy.getInstance().getEquipBasicGood(this.item.data.template_id),i=0;t&&(i=PropertyUtil.calculateProFight(t)),this.txtPoint.text="评分："+i.toString()}this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onThisClick,this)},n.onThisClick=function(){this.checkBox.selected=!this.checkBox.selected,this.dispatchEvent(new ParamEvent(RongLianEvtName.RONGLIAN_SELECTED_CHECKBOX))},n.setSelectd=function(e){this._m_selected=e,this.checkBox&&(this.checkBox.selected=e)},n.getSelected=function(){return this.checkBox.selected},n.dispose=function(){},t}(eui.ItemRenderer);egret.registerClass(RongLianSelectItem,"RongLianSelectItem",["eui.UIComponent"]);var RongLianSelectView=function(e){function t(t){void 0===t&&(t=1),e.call(this),this._itemArr=[],this.type=1,this.type=t,this.skinName="resource/game_skins/ronglian/RongLianSelectViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.RONGLIAN,this.setImageTitle("ronglian_title5");var t=new eui.TileLayout;t.paddingTop=3,t.paddingLeft=3,t.paddingRight=3,t.paddingBottom=3,this.groupGrid.layout=t,t.horizontalGap=27,t.verticalGap=27,this.vScroll.viewport=this.groupGrid},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnHandler,this),this.addGlobalEventListener(RongLianEvtName.RONGLIAN_HUISHOU_SUCESS,this.refreshGoods,this),this.refreshGoods()},n.onCloseHandler=function(){this._btnReturn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnHandler,this),this.btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this.removeGlobalEventListener(RongLianEvtName.RONGLIAN_HUISHOU_SUCESS,this.refreshGoods,this);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t.parent&&(t.parent.removeChild(t),t.dispose(),t=null);this._itemArr=[],e.prototype.onCloseHandler.call(this)},n.refreshGoods=function(){for(var e,t=0;t<this._itemArr.length;t++)e=this._itemArr[t],e.parent&&(e.parent.removeChild(e),e.dispose(),e=null);this._itemArr=[];var i=GoodsListProxy.getInstance().getRonglianCanSelectList(this.type),n=i.length;this._itemArr=[];for(var t=0;n>t;t++)e=new RongLianSelectItem,e.data=i[t],2==this.type&&e.setSelectd(RongLianProxy.getInstance().checkSelected(i[t].item_id)),e.addEventListener(RongLianEvtName.RONGLIAN_SELECTED_CHECKBOX,this.updateTxtNum,this),this.groupGrid.addChild(e),this._itemArr.push(e);this.updateTxtNum()},n.onReturnHandler=function(){this.isPop=!1},n.updateTxtNum=function(){for(var e,t=this._itemArr.length,i=[],n=0;t>n;n++)e=this._itemArr[n],e.data&&e.getSelected()&&i.push(e.data);this.txtNum.text="（"+i.length+"/"+t+"）"},n.onOkHandler=function(){for(var e,t,i=this._itemArr.length,n=[],s=[],a=0;i>a;a++)e=this._itemArr[a],e.data&&e.getSelected()&&(t=new NodeItem_ids,t.item_id=e.data.item_id,n.push(t),s.push(e.data));return s.length<=0?void(this.isPop=!1):void(1==this.type?this.dispatchGlobalEvent(new ParamEvent(RongLianEvtName.CCMD10901,{item_ids:n})):(this.dispatchGlobalEvent(new ParamEvent(RongLianEvtName.RONGLIAN_SELECTED,{arr:s})),this.isPop=!1))},t}(LayeroutWindow);egret.registerClass(RongLianSelectView,"RongLianSelectView");var RongLianView=function(e){function t(){e.call(this),this._tempArr=[],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/ronglian/RongLianViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){function e(e,t){return Number(e.name)-Number(t.name)}function t(e){if(e.data)RongLianProxy.getInstance().deleteSelectedInfo(e.data.item_id),e.data=null,e.showAdd(!0);else{var t=GoodsListProxy.getInstance().getRonglianCanSelectList();if(t.length<=0)return void Message.show("当前没有可回收的装备");GameDispatcher.getInstance().dispatchEvent(new ParamEvent(RongLianEvtName.RONGLIAN_OPEN_SELECT_VIEW,{type:1}))}}this.itemArr=[];for(var i,n=0;n<this.itemContainer.numChildren;n++)i=this.itemContainer.getChildAt(n),i.addCallBack(function(e){t(e)},i),i.showAdd(!0),i.showLv(!0),this.itemArr.push(i);this.itemArr.sort(e),this.btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this)},n.onOpenHandler=function(){this.addGlobalEventListener(RongLianEvtName.RONGLIAN_HUISHOU_SUCESS,this.onHuiShouSuccessHandler,this),this.addGlobalEventListener(RongLianEvtName.RONGLIAN_SELECTED,this.onSelectedHandler,this),this.addGoodsItem()},n.onCloseHandler=function(){this.clearItems(),this.removeGlobalEventListener(RongLianEvtName.RONGLIAN_HUISHOU_SUCESS,this.onHuiShouSuccessHandler,this),this.removeGlobalEventListener(RongLianEvtName.RONGLIAN_SELECTED,this.onSelectedHandler,this)},n.onHuiShouSuccessHandler=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],null!=e.data&&EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("shark"),44,40,e,120,!1);this.addGoodsItem()},n.onSelectedHandler=function(e){var t,i,n=e.data.arr;RongLianProxy.getInstance().ronglianSelectdList=n;for(var s=0;s<this.itemArr.length;s++)t=this.itemArr[s],t.data&&(t.data=null,t.showAdd(!0));for(var s=0;s<this.itemArr.length&&(t=this.itemArr[s],i=n[s],!(n.length<s+1));s++)null==t.data&&n.length>0&&(t.data=i)},n.onOkHandler=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.GUILE_END,1));for(var e,t,i=[],n=0;n<this.itemArr.length;n++)e=this.itemArr[n],null!=e.data&&(t=new NodeItem_ids,t.item_id=e.data.item_id,i.push(t));i.length>0&&this.dispatchGlobalEvent(new ParamEvent(RongLianEvtName.CCMD10901,{item_ids:i}))},n.addGoodsItem=function(){var e,t,i=GoodsListProxy.getInstance().getRongLianGoods();if(RongLianProxy.getInstance().ronglianSelectdList=[],i.length<=0)return void this.clearItems();for(var n=0;n<i.length;n++)t=i[n],e=this.itemArr[n],e&&(e.data=i[n],RongLianProxy.getInstance().ronglianSelectdList.push(t))},n.clearItems=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],e.data&&(e.data=null,e.showAdd(!0));RongLianProxy.getInstance().ronglianSelectdList=[]},n.getBtnChange=function(){return this.btnOK},t}(BaseView);egret.registerClass(RongLianView,"RongLianView");var RongLianWindow=function(e){function t(){e.call(this),this._selectedTabIndex=0,this._isNovice=!0,this.skinName="resource/game_skins/ronglian/RongLianWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.RONGLIAN,this.tabBar.dataProvider=new eui.ArrayCollection(["普通装备","熔炉"]),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.guideBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnButtonClick,this),this.addGlobalEventListener(EventName.GUILE_END,this.nextGuile,this)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this)},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),this.clearContent()},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("ronglian_title1")},n.openView=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!0),this.isPop=t,this.setTabIndex(e),this.onBarItemTap(null)},n.setTabIndex=function(e){this._selectedTabIndex=e,this.tabBar.selectedIndex=this._selectedTabIndex},n.onBarItemTap=function(e){switch(this.clearContent(),this.tabBar.selectedIndex){case 0:this._ronglianView||(this._ronglianView=new RongLianView,this.container.addChild(this._ronglianView),this.setImageTitle("ronglian_title1"),this._ronglianView.onOpenHandler()),this.updateGuide();break;case 1:this._rongluView||(this._rongluView=new RongLuView,this.container.addChild(this._rongluView),this.setImageTitle("ronglian_json.ronglian_title3"),this._rongluView.onOpenHandler())}},n.clearContent=function(){for(var e;this.container.numChildren>0;)e=this.container.getChildAt(0),e.onCloseHandler(),this.container.removeChild(e),e.dispose(),e=null;this._ronglianView&&(this._ronglianView.parent&&this._ronglianView.parent.removeChild(this._ronglianView),this._ronglianView.onCloseHandler(),this._ronglianView.dispose(),this._ronglianView=null),this._rongluView&&(this._rongluView.parent&&this._rongluView.parent.removeChild(this._rongluView),this._rongluView.onCloseHandler(),this._rongluView.dispose(),this._rongluView=null)},n.onCloseBtnClick=function(t){e.prototype.onCloseBtnClick.call(this,t),NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip(),this.getBtnReturn().visible=!0,this.guideBtn.visible=!1},n.nextGuile=function(e){this.updateGuide(e.data)},n.updateGuide=function(e){if(void 0===e&&(e=0),this._isNovice){if(TaskModel.getInstance().getCurTaskXS()!=NoviceGuideType.GuideRonglianTips)return;if(1==e){this._isNovice=!1;var t=this.localToGlobal(this.guideBtn.x,this.guideBtn.y);this.getBtnReturn().visible=!1,this.guideBtn.visible=!0,NoviceGuideManager.getInstance().showShadeTip(this.guideBtn,"点击关闭",t,new egret.Point(t.x-42,t.y-68))}else{var t=this._ronglianView.localToGlobal(this._ronglianView.getBtnChange().x,this._ronglianView.getBtnChange().y);NoviceGuideManager.getInstance().showShadeTip(this._ronglianView.getBtnChange(),"点击回收装备",t,new egret.Point(t.x-15,t.y-85))}}},t}(LayeroutWindow);egret.registerClass(RongLianWindow,"RongLianWindow",["INoviceGuide"]);var RongLuView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/ronglian/RongLuViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.onOpenHandler=function(){function e(e){if(e.data)RongLianProxy.getInstance().deleteSelectedInfo(e.data.item_id),e.data=null,e.showAdd(!0);else{var t=GoodsListProxy.getInstance().getRonglianCanSelectList(2);if(t.length<=0)return void Message.show("当前没有可回收的装备");GameDispatcher.getInstance().dispatchEvent(new ParamEvent(RongLianEvtName.RONGLIAN_OPEN_SELECT_VIEW,{type:2}))}}this.itemArr=[];for(var t,i=0;i<this.itemContainer.numChildren;i++)t=this.itemContainer.getChildAt(i),t.addCallBack(function(t){e(t)},t),t.showAdd(!0),t.showLv(!1),this.itemArr.push(t);this.onAddHandler(),this.dispatchGlobalEvent(new ParamEvent(RongLianEvtName.CCMD10900)),this.addGlobalEventListener(RongLianEvtName.RONGLIAN_UPDATE_INFO,this.onUpdateInfoHandler,this),this.addGlobalEventListener(RongLianEvtName.RONGLIAN_SELECTED,this.onSelectedHandler,this),this.addGlobalEventListener(RongLianEvtName.RONGLU_HUISHOU_SUCESS,this.onHuiShouSuccessHandler,this),this._btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddHandler,this),this._btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this.onUpdateInfoHandler()},n.onCloseHandler=function(){this._btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddHandler,this),this._btnOk.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this.removeGlobalEventListener(RongLianEvtName.RONGLIAN_UPDATE_INFO,this.onUpdateInfoHandler,this),this.removeGlobalEventListener(RongLianEvtName.RONGLIAN_SELECTED,this.onSelectedHandler,this),this.removeGlobalEventListener(RongLianEvtName.RONGLU_HUISHOU_SUCESS,this.onHuiShouSuccessHandler,this),this.clearItems()},n.clearItems=function(){for(var e,t=0;t<this.itemArr.length;t++)e=this.itemArr[t],e.data&&(e.data=null,e.showAdd(!0));RongLianProxy.getInstance().ronglianSelectdList=[]},n.onHuiShouSuccessHandler=function(){this.onAddHandler()},n.onSelectedHandler=function(e){var t,i,n=e.data.arr;RongLianProxy.getInstance().ronglianSelectdList=n;for(var s=0;s<this.itemArr.length;s++)t=this.itemArr[s],t.data&&(t.data=null,t.showAdd(!0));for(var s=0;s<this.itemArr.length&&(t=this.itemArr[s],i=n[s],!(n.length<s+1));s++)null==t.data&&n.length>0&&(t.data=i)},n.onUpdateInfoHandler=function(){var e=RongLianProxy.getInstance().lv,t=RongLianProxy.getInstance().getRongLuMaxExp(e),i=RongLianProxy.getInstance().exp,n=i/t;n>1&&(n=1),this._bar.scaleX=n,this._txtLv.text="Lv"+e,this._txtValue.text=i+"/"+t,this.updateProperty()},n.onItemClick=function(){},n.onAddHandler=function(){var e,t,i=GoodsListProxy.getInstance().getRongLianGoods(2);if(i.length<=0)return void this.clearItems();RongLianProxy.getInstance().ronglianSelectdList=[];for(var n=0;n<i.length;n++)t=i[n],e=this.itemArr[n],e&&(RongLianProxy.getInstance().ronglianSelectdList.push(t),e.data=t)},n.onOkHandler=function(){for(var e,t,i=[],n=0;n<this.itemArr.length;n++)e=this.itemArr[n],null!=e.data&&(t=new NodeItem_ids,t.item_id=e.data.item_id,i.push(t));i.length>0&&this.dispatchGlobalEvent(new ParamEvent(RongLianEvtName.CCMD10902,{item_ids:i}))},n.updateProperty=function(){function e(e,t,i,n,s){void 0===i&&(i="#e7d0b7"),void 0===n&&(n=!1),void 0===s&&(s=!1);for(var a="",r=0,h="",l=0,d=0;d<t.length;d++)h=t[d],r=null==e?0:e[h],l=d,!s&&0>=r||(n&&o.push(h),a+=l>=5?"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+r/100+"%</font>":"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+r+"</font>");return a}var t=(RongLianProxy.getInstance().exp,RongLianProxy.getInstance().lv),i=GoodsListProxy.getInstance().getEquipRongLuVOByLv(t),n=GoodsListProxy.getInstance().getEquipRongLuVOByLv(t+1),s="",a="",o=[];
0>=t?(s=e(n,EquipBasic.PROPERTY_INDEX,"#00D228",!0),a=e(i,o,"#e7d0b7",!1,!0),this._txtFpwer.text="0"):(a=e(i,EquipBasic.PROPERTY_INDEX),n&&(s=e(n,EquipBasic.PROPERTY_INDEX,"#00D228")),this._txtFpwer.text=PropertyUtil.calculateProFight(i).toString()),this._txtPro.htmlText=a,this._txtProNext.htmlText=s},t}(BaseView);egret.registerClass(RongLuView,"RongLuView");var Arrow=function(e){function t(){e.call(this),this._enterTimes=0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.showArrow=function(e,i,n,s,a,o,r,h){this._arrowEffect=new UIEffect("Arrow_Effect"),this._endPoint=new Point(n.x+h.x,n.y+h.y),this._speed=o;var l=new Point(i.x+h.x,i.y+h.y),d=180*Math.atan2(this._endPoint.y-l.y,this._endPoint.x-l.x)/Math.PI+90;this._arrowEffect.setRotation(d),this._arrowEffect.showEffect(e,l.x,l.y,s,40,!0),this._id=t.ARROWINDEX++,RenderManager.add(this.enterHandler,this),this._lastFrameTime=getTimer()},n.enterHandler=function(){this._currentFrameTime=getTimer();var e=(this._currentFrameTime-this._lastFrameTime)/1e3;this._lastFrameTime=this._currentFrameTime;var t=new Point(this._arrowEffect.x-this._endPoint.x,this._arrowEffect.y-this._endPoint.y);t.normalize(1);var i=Math.abs(this._arrowEffect.x-this._endPoint.x)>5,n=Math.abs(this._arrowEffect.y-this._endPoint.y)>5;i&&(this._arrowEffect.x-=this._speed*e*t.x),n&&(this._arrowEffect.y-=this._speed*e*t.y),this._enterTimes++,((this._arrowEffect.x-this._endPoint.x)*t.x<0||(this._arrowEffect.y-this._endPoint.y)*t.y<0||!i&&!n)&&this.stop(),this._enterTimes>20&&this.stop()},n.stop=function(){this._arrowEffect&&(this._arrowEffect.dispose(),this._arrowEffect=null),RenderManager.remove(this.enterHandler,this),this.dispatchEvent(new ParamEvent(t.ARROW_END,{endP:this._endPoint}))},t.ARROWINDEX=0,t.ARROW_END="ARROW_END",t}(egret.EventDispatcher);egret.registerClass(Arrow,"Arrow");var BloodBar=function(e){function t(t,i){void 0===i&&(i="BloodBar"),e.call(this,i),this._progress=1,this._bloodType=t}__extends(t,e);var i=(__define,t),n=i.prototype;return n.configUI=function(){if(this._barColorType=0,this._sceneCommonURL=UrlUtil.getCommonSceneURL(),SourceCache.getInstance().has(this._sceneCommonURL)){var e=SourceCache.getInstance().getSP(this._sceneCommonURL);this.build(e)}else SourceCache.getInstance().addEventListener(SourceCache.LOAD_TEXTURE_COMPLETE,this.loadCompleteHandler,this),0==SourceCache.getInstance().isLoading(this._sceneCommonURL)&&SourceCache.getInstance().load(this._sceneCommonURL,ResourceType.TEXTURE)},n.loadCompleteHandler=function(e){if(e.data.url==this._sceneCommonURL){SourceCache.getInstance().removeEventListener(SourceCache.LOAD_TEXTURE_COMPLETE,this.loadCompleteHandler,this);var t=e.data.texture;this.build(t)}},n.build=function(e){var t=e.getTexture("bar");this._maxWidth=t.textureWidth,null==this._barbg&&(this._barbg=new Bitmap(t)),this._barbg.name="_barbg",this.addChild(this._barbg),t=e.getTexture("redBar"),null==this._bar&&(this._bar=new Bitmap(t)),this._bar.name="_bar",this.changeBarColor(),this.addChild(this._bar),this.setProgress(1),this.update()},n.changeBarColor=function(){},n.update=function(e){void 0===e&&(e=!1),null!=this._bar&&(this._bar.scaleX=this._progress)},n.step=function(){},n.getWidth=function(){return this._maxWidth},n.setProgress=function(e){e>1&&(e=1),this._progress!=e&&(this._progress=e,this.update())},n.showHpMC=function(e,t){this._bar?(this._tween&&(egret.Tween.removeTweens(this._bar),this._tween=null),this._tween=egret.Tween.get(this._bar).to({scaleX:e/t},300),this._tween.call(this.endMC,this,[])):this.endMC()},n.dispose=function(){this._tween&&this._bar&&(egret.Tween.removeTweens(this._bar),this._tween=null),this.parent&&this.parent.removeChild(this),SourceCache.getInstance().removeEventListener(SourceCache.LOAD_TEXTURE_COMPLETE,this.loadCompleteHandler,this)},n.clear=function(){this._tween&&this._bar&&(egret.Tween.removeTweens(this._bar),this._tween=null),SourceCache.getInstance().removeEventListener(SourceCache.LOAD_TEXTURE_COMPLETE,this.loadCompleteHandler,this)},n.endMC=function(){this.dispatchEvent(new ParamEvent(t.BLOOD_MCEND))},t.BLOOD_MCEND="BLOOD_MCEND",t}(CommonSprite);egret.registerClass(BloodBar,"BloodBar");var BossEnterView=function(e){function t(){e.call(this),this.n=0,this.nBg=0,this._timeGap=100,this._timeGap2=150,this._bgSi=0,this._endSi=0,this._txtSi=0,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){var e=!1,t=this;t._px=GameContent.stageWidth-442>>1,t._py=GameContent.stageHeight-244>>1,t._bigBg=new PicLoader,t._bigBg.setPicCanGC(e);var i=UrlUtil.getOtherIcon("bossEnterBg");t._bigBg.load(i),t._bigBg.setWH(GameContent.stageWidth,GameContent.stageHeight),t.addChild(t._bigBg),t._bg=new PicLoader,t._bg.setPicCanGC(e),i=UrlUtil.getOtherIcon("bossEnter1"),t._bg.load(i),t._bg.x=t._px,t._bg.y=t._py,t.addChild(t._bg),t._txtImage=new PicLoader,t._txtImage.setPicCanGC(e),i=UrlUtil.getOtherIcon("bossEnter2"),t._txtImage.load(i),t.addChild(t._txtImage),t._txtImage.x=t._px+70,t._txtImage.y=t._py+157,this.setBigBgAlpha()},n.setBigBgAlpha=function(){var e=this._bigBg,t=this._txtImage;e.alpha=.2,this.startTweenBg(e),this.startTweenTxt(t)},n.startTweenBg=function(e){this.nBg>1||(this.nBg++,this._tween1=egret.Tween.get(e).to({alpha:1},this._timeGap),this._tween1.call(this.endTweenBg,this,[e]))},n.endTweenBg=function(e){var t=this;this._bgSi=setTimeout2(function(e){t._tween1=egret.Tween.get(e).to({alpha:.2},t._timeGap),t._tween1.call(t.startTweenBg,t,[e])},this._timeGap2,e)},n.startTweenTxt=function(e){var t=this;return this.n>1?(this._endSi>0&&clearTimeout(this._endSi),void(this._endSi=setTimeout2(function(){t.remove()},this._timeGap+100))):(this.n++,this._tween2=egret.Tween.get(e).to({x:this._px+18,scaleX:1.5,scaleY:1.5},this._timeGap),void this._tween2.call(this.endTweenTxt,this,[e]))},n.endTweenTxt=function(e){var t=this;this._txtSi=setTimeout2(function(){t._tween2=egret.Tween.get(e).to({x:t._px+70,scaleX:1,scaleY:1},t._timeGap),t._tween2.call(t.startTweenTxt,t,[e])},this._timeGap2,e)},n.remove=function(){this.parent&&this.parent.removeChild(this),this.dispatchEvent(new ParamEvent(EventName.WINDOW_DISPOSE))},n.show=function(){GameContent.gameLayers.mainUILayer.addChild(this)},n.dispose=function(){var e=this;e._tween1&&(egret.Tween.removeTweens(e._bigBg),e._tween1=null),e._tween2&&(egret.Tween.removeTweens(e._txtImage),e._tween2=null),e._bg&&(e._bg.dispose(),e._bg=null),e._txtImage&&(e._txtImage.dispose(),e._txtImage=null),e._bgSi>0&&clearTimeout(e._bgSi),e._txtSi>0&&clearTimeout(e._txtSi),e=null},t}(egret.DisplayObjectContainer);egret.registerClass(BossEnterView,"BossEnterView");var DaoJiShiInScene=function(e){function t(){e.call(this),this._leftTimes=0,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){this._txt=new CustomLabel,this._txt.addMiaoBian(),this._txt.textColor=15192247,this._txt.size=24,this._txt.bold=!0,this._txt.textAlign="center",this.addChild(this._txt)},n.show=function(){this.parent||GameContent.gameLayers.mainUILayer.addChild(this),this.y=GameContent.stageHeight-240,this.x=GameContent.stageWidth-270>>1},n.addTimes=function(e){0!=e&&(this._leftTimes=e,TimerManager.getInstance().remove(1e3,this.daoJiShi,this),TimerManager.getInstance().add(1e3,this.daoJiShi,this),this.daoJiShi())},n.daoJiShi=function(){return this._leftTimes<=0?void this.remove():(this._txt.htmlText=StringUtil.substitute("本关剩余时间：<font color='#ff0000'>{0}</font>",TimeUtil.getTime(this._leftTimes)),void this._leftTimes--)},n.remove=function(){this.dispatchEvent(new ParamEvent(EventName.WINDOW_DISPOSE))},n.dispose=function(){this.parent&&this.parent.removeChild(this),this._txt.dispose(),this._txt=null,TimerManager.getInstance().remove(1e3,this.daoJiShi,this)},t}(egret.DisplayObjectContainer);egret.registerClass(DaoJiShiInScene,"DaoJiShiInScene");var SceneElement=function(e){function t(t){void 0===t&&(t="SceneElement"),e.call(this,t),this._isInteractive=!0,this._mask=!1,this._sceneModel=SceneModel.getInstance()}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.setSelect=function(e){},s.getId=function(){return""},s.getType=function(){return""},s.setIsInteractive=function(e){this._isInteractive=e},s.getIsInteractive=function(){return this._isInteractive},s.isHit=function(e){return this.visible&&null!=parent&&e.x>this.x&&e.x<this.x+this.width&&e.y>this.y&&e.y<this.y+this.height?!0:!1},s.getEz=function(){return Math.floor(this.y)},s.getEffectPoint=function(){return new Point(0,0)},s.dispose=function(){e.prototype.dispose.call(this)},i(s,"halfMask",function(){return this._mask},function(e){var t=this;t._mask!=e&&(t._mask=e,1==t._mask?1==t.alpha&&(t.alpha=.5):.5==t.alpha&&(t.alpha=1))}),t}(CommonSprite);egret.registerClass(SceneElement,"SceneElement",["IElement","IDepthObject"]);var DropItem=function(e){function t(){e.call(this,"DropItem"),this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){this._image=new PicLoader,this._image.x=-15,this.addChild(this._image)},n.setData=function(e){this.dropVo=e;var t=GoodsListProxy.getInstance().getBasicGood(e.id);null==t&&trace("goodsBasic == null, id = ",e.id);var i;t.quality>2&&(i=UrlUtil.getCommonEffectURL(StringUtil.substitute("dg{0}",t.quality)),this._eff1=EffectManager.getInstance().showEffect(i,this._image.x+30,this._image.y-40,this,40,!0)),i=UrlUtil.getGoodsDropURL(t.pic),this._image.load(i),null==this._txtNum&&(this._txtNum=new CustomLabel("DropTxt")),this._txtNum.size=16,this._txtNum.bold=!0,this._txtNum.addMiaoBian(),this._txtNum.x=Math.floor(2*this.getHalfW()-this._txtNum.textWidth>>1),this._txtNum.y=-30,this.addChild(this._txtNum),e.id==WelfareType.ADD_COIN||e.id==WelfareType.ADD_GOLD?this._txtNum.text=e.num.toString():(this._txtNum.text=t.name,this._txtNum.textColor=ColorUtil.getGoodColorNumber(t.quality-1)),this._txtNum.x=-this._txtNum.textWidth>>1},n.getHalfW=function(){return 30},n.getHalfH=function(){return 30},n.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this),this._image&&(this.contains(this._image)&&this.removeChild(this._image),this._image.dispose(),this._image=null),this._txtNum&&(this.contains(this._txtNum)&&this.removeChild(this._txtNum),this._txtNum.dispose(),this._txtNum=null),this._eff1&&(this._eff1.dispose(),this._eff1=null)},t}(SceneElement);egret.registerClass(DropItem,"DropItem");var LiveThing=function(e){function t(t){void 0===t&&(t="LiveThing"),e.call(this,t),this.speed=200,this.canLayout=!1,this.canUpdateAction=!1,this._stepX=0,this._stepY=0,this._moveTime=0,this._run=0,this._hasPutShadow=!1,this.backAngle=0,this.belongTo="",this.isInZSCZ=!1,this.isYun=!1,this.isUsing=!1,this.isPicking=!1,this._speakSi=0,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){this.configMC(),this._angle=0,this._stepX=0,this._stepY=0,this._moveTime=0,this._endPoint=null,this._oldTime=getTimer(),this.initshadow()},n.setSpeed=function(e){this.speed!=e&&(this.speed=e)},n.getSpeed=function(){return this.speed},n.redraw=function(){this.canUpdateAction=!0,this.canLayout=!0},n.getDirState=function(){return null},n.getPoseState=function(){return null},n.configMC=function(){var e=this;e.shadowLayer=new CommonSprite,e.addChild(e.shadowLayer),e.bodyLayer=new CommonSprite,e.addChild(e.bodyLayer),e.hpLayer=new CommonSprite,e.addChild(e.hpLayer),e.nameLayer=new CommonSprite,e.addChild(e.nameLayer),e.titleLayer=new CommonSprite,e.titleLayer.touchChildren=!1,e.titleLayer.touchEnabled=!1,e.addChild(e.titleLayer),null==e._nameTxt&&(e._nameTxt=new CustomTextField("LiveThing_name")),e._nameTxt.size=18,e._nameTxt.bold=!0,e._nameTxt.addMiaoBian(),e._nameTxt.cacheAsBitmap=!0,e._nameTxt.textAlign="center",e.nameLayer.addChild(e._nameTxt),e._hpTxt=new CustomTextField("LiveThing_hpTxt"),e._hpTxt.size=18,e._hpTxt.y=-20,e._hpTxt.bold=!0,e._hpTxt.addMiaoBian(),e.hpLayer.addChild(e._hpTxt)},n.updateAction=function(){},n.playZhanShenChongZhuang=function(){},n.setDefaultState=function(){var e=this.getPoseState(),t=this.getDirState();null!=e&&null!=t&&(t.revert(),e.revert(),e.addEventListener(PoseState.CHANGE,this.changePoseHandler,this),t.addEventListener(DirState.CHANGE,this.changeDirHandler,this),e.setState(PoseState.STAND),t.setState(2))},n.changePoseHandler=function(e){this.redraw()},n.changeDirHandler=function(e){this.redraw()},n.initshadow=function(){if(this._sceneCommonURL=UrlUtil.getCommonSceneURL(),SourceCache.getInstance().has(this._sceneCommonURL)){var e=SourceCache.getInstance().getSP(this._sceneCommonURL);e&&this.addShadow(e)}else SourceCache.getInstance().addEventListener(SourceCache.LOAD_TEXTURE_COMPLETE,this.loadCompleteHandler,this),0==SourceCache.getInstance().isLoading(this._sceneCommonURL)&&SourceCache.getInstance().load(this._sceneCommonURL,ResourceType.TEXTURE)},n.addShadow=function(e){if(!this._shadowPic){var t=e.getTexture("shadow");this._shadowPic=new Bitmap(t),this._shadowPic.x=-this._shadowPic.width>>1,this._shadowPic.y=-this._shadowPic.height>>1}this.shadowLayer.addChild(this._shadowPic)},n.loadCompleteHandler=function(e){if(e.data.url==this._sceneCommonURL){SourceCache.getInstance().removeEventListener(SourceCache.LOAD_TEXTURE_COMPLETE,this.loadCompleteHandler,this);var t=e.data.texture;this.addShadow(t)}},n.reLayout=function(){this.canLayout=!0},n.removeAllTimer=function(){clearTimeout(this._moveBackSi),clearTimeout(this._onFightingSi)},n.updatePosition=function(){this.x=Math.ceil(this._tmpx+.5>>0),this.y=Math.ceil(this._tmpy+.5>>0)},n.nextPosition=function(){this.getDirState().stepState(),this.nowTime=getTimer(),this.timelen=this.nowTime-this._oldTime,this._oldTime=this.nowTime,null!=this.stage&&(1==this.canUpdateAction&&(this.updateAction(),this.canUpdateAction=!1),1==this.canLayout&&(this.layout(),this.canLayout=!1)),this._moveTime<=10&&!this.isPicking||null!=this.getPoseState()&&(this.getPoseState().getLockMove()||(this._moveTime-=this.timelen,this._moveTime<=10?(this._endPoint&&(this.x=Math.ceil(this._endPoint.x),this.y=Math.ceil(this._endPoint.y)),this.moveComplete()):(this._tmpx=this._tmpx+this._stepX*this.timelen,this._tmpy=this._tmpy+this._stepY*this.timelen,this.updatePosition())))},n.move=function(e){var t=this,i=t.getPoseState();if(null!=i&&null!=e){var n=i.getState();if(n!=PoseState.DEAD&&n!=PoseState.MOVEBACK){t._endPoint=e;var s=Point.distance(new Point(t.x,t.y),e),a=Math.ceil(s/(t.speed/1e3)),o=s/a;if(t._stepX=o*(e.x-t.x)/s,t._stepY=o*(e.y-t.y)/s,t._moveTime=a,t._moveTime<=10&&!t.isPicking)return void t.moveComplete();if(t._tmpx=t.x,t._tmpy=t.y,i.getState()==PoseState.STAND&&(t._oldTime=getTimer()),i.setState(PoseState.MOVE),i.getState()==PoseState.MOVE){var r=MapUtil.judgeDir(t.x,t.y,e.x,e.y);t.getDirState().setState(r)}else t._moveTime=0}}},n.moveBack=function(e,t){void 0===t&&(t=900);var i=this.getPoseState();if(null!=i&&i.getState()!=PoseState.DEAD&&null!=this._bodyMovieClip){this._angle=Math.atan2(e.y-this.y,e.x-this.x),this._endPoint=e;var n=Point.distance(new Point(this.x,this.y),e),s=Math.round(n/(t/1e3)),a=n/s;if(this._stepX=a*Math.cos(this._angle),this._stepY=a*Math.sin(this._angle),this._moveTime=s,this._moveTime<=10)return void this.moveComplete();this._tmpx=this.x,this._tmpy=this.y,i.setState(PoseState.MOVEBACK)}},n.dirToPoint=function(e){var t=this.getDirState();if(null!=t){var i=MapUtil.judgeDir(this.x,this.y,e.x,e.y);t.setState(i)}},n.moveComplete=function(){var e=this;this._moveTime=0,this._endPoint=null;var t=this.getPoseState();t.getState()==PoseState.MOVEBACK&&(clearTimeout(this._moveBackSi),this._moveBackSi=setTimeout2(function(){e.moveBackComplete()},150))},n.moveBackComplete=function(){clearTimeout(this._moveBackSi),this.getPoseState().setState(PoseState.STAND),this.dispatchEvent(new ParamEvent(EventName.MONSTERMOVEBACK))},n.layout=function(){this._type.indexOf("Player")>=0?this.hpLayer.y=-Math.ceil(this.getBodyHeight()+30):this.hpLayer.y=-Math.ceil(this.getBodyHeight()),this._hpTxt.x=-this._hpTxt.textWidth>>1,this._hp.x=-Math.ceil(this._hp.width>>1)},n.stop=function(){this.moveComplete()},n.getBodyHeight=function(){return 0},n.getBodyWidth=function(){return 0},n.getBodyPoint=function(){return new Point},n.getAttackType=function(){return 0},n.toAttack=function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=null),void 0===i&&(i=null)},n.toHited=function(){},n.toDead=function(){},n.setHp=function(e){},n.getHp=function(){return 0},n.setFighting=function(e){void 0===e&&(e=1e4),this._onFighting=!0,clearTimeout(this._onFightingSi),this._onFightingSi=setTimeout2(this.cancelFighting,e)},n.cancelFighting=function(){clearTimeout(this._onFightingSi),this._onFighting=!1},n.getOnFighting=function(){return this._onFighting},n.getBuffStateDic=function(){return null==this._buffStateDic&&(this._buffStateDic=new Object),this._buffStateDic},n.GetIsRole=function(){return!1},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.isPicking=!1,t.removeSpeak(),t._moveTime=0,t.removeAllTimer(),t.removeTitle(),t.setSelect(!1),null!=t.parent&&t.parent.removeChild(t),SourceCache.getInstance().removeEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,t.loadCompleteHandler,t),SourceCache.getInstance().removeEventListener(SourceCache.LOAD_TEXTURE_COMPLETE,t.loadCompleteHandler,t),null!=t.getPoseState()&&t.getPoseState().removeEventListener(PoseState.CHANGE,t.changePoseHandler,t),null!=t.getDirState()&&t.getDirState().removeEventListener(DirState.CHANGE,t.changeDirHandler,t),t._bodyMovieClip&&(t._bodyMovieClip.parent&&t._bodyMovieClip.parent.removeChild(t._bodyMovieClip),t._bodyMovieClip.dispose(),t._bodyMovieClip=null),t._weaponMovieClip&&(t._weaponMovieClip.parent&&t._weaponMovieClip.parent.removeChild(t._weaponMovieClip),t._weaponMovieClip.dispose(),t._weaponMovieClip=null),t._wingMovieClip&&(t._wingMovieClip.parent&&t._wingMovieClip.parent.removeChild(t._wingMovieClip),t._wingMovieClip.dispose(),t._wingMovieClip=null),t._ringMovieClip&&(t._ringMovieClip.parent&&t._ringMovieClip.parent.removeChild(t._ringMovieClip),t._ringMovieClip.dispose(),t._ringMovieClip=null),t.hpLayer&&t.hpLayer.parent&&t.hpLayer.parent.removeChild(t.hpLayer),t.nameLayer&&t.nameLayer.parent&&t.nameLayer.parent.removeChild(t.nameLayer),t._hp&&(t._hp.dispose(),t._hp=null),t._nameTxt&&(t._nameTxt.dispose(),t._nameTxt=null),t=null},n.clear=function(){var e=this;e.isPicking=!1,e.isUsing=!1,e.removeSpeak(),e._moveTime=0,e.removeAllTimer(),e.removeTitle(),null!=e.parent&&e.parent.removeChild(e),SourceCache.getInstance().removeEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,e.loadCompleteHandler,e),SourceCache.getInstance().removeEventListener(SourceCache.LOAD_TEXTURE_COMPLETE,e.loadCompleteHandler,e),null!=e.getPoseState()&&e.getPoseState().removeEventListener(PoseState.CHANGE,e.changePoseHandler,e),null!=e.getDirState()&&e.getDirState().removeEventListener(DirState.CHANGE,e.changeDirHandler,e),e._bodyMovieClip&&e._bodyMovieClip.parent&&e._bodyMovieClip.parent.removeChild(e._bodyMovieClip),e._weaponMovieClip&&e._weaponMovieClip.parent&&e._weaponMovieClip.parent.removeChild(e._weaponMovieClip),e._wingMovieClip&&e._wingMovieClip.parent&&e._wingMovieClip.parent.removeChild(e._wingMovieClip),e._ringMovieClip&&e._ringMovieClip.parent&&e._ringMovieClip.parent.removeChild(e._ringMovieClip),e._hp&&e._hp.clear(),e=null},n.movePath=function(e){},n.getVo=function(){return null},n.playSkillEffect=function(e,t,i,n,s){},n.getPropertyVo=function(){return null},n.setZSCZEff=function(e){},n.getBelongID=function(){return""},n.speak=function(e,t){var i=this;if(null==this._speakContainer){this._speakContainer=new CommonSprite("livingSpeak"),this._speakContainer.y=-180,this._speakContainer.x=-100;var n=new CustomImage;n.source="share_json.share_guildAlertBg",this._speakContainer.addChild(n),this._txt=new CustomTextField,this._txt.width=178,this._txt.height=50,this._txt.wordWrap=!0,this._txt.multiline=!0,this._txt.x=6,this._txt.y=4,this._txt.addMiaoBian(),this._speakContainer.addChild(this._txt)}this._txt.text=e,this.addChild(this._speakContainer),this._speakSi>0&&clearTimeout(this._speakSi),this._speakSi=setTimeout2(function(){i.removeSpeak()},1e3*t)},n.removeSpeak=function(){this._speakContainer&&this._speakContainer.parent&&this._speakContainer.parent.removeChild(this._speakContainer),this._speakSi>0&&clearTimeout(this._speakSi)},n.addTitle=function(e){if(this.removeTitle(),e>0){var t=UrlUtil.getTitleURL(e);this._titleEffect=EffectManager.getInstance().showEffect(t,0,0,this.titleLayer,60,!0)}},n.removeTitle=function(){this._titleEffect&&(this._titleEffect.dispose(),this._titleEffect=null)},n.showBuff=function(e){var t=null;if(e==BuffVo.HUSHEN?(t=new BuffVo,t.id=BuffVo.HUSHEN,t.showID=t.id):t=SkillModel.getInstance().getBUffVo(e),null!=t){var i=UrlUtil.getBuffIcon(t.showID),n=new PicLoader;n.load(i);var s=this.getBodyHeight();n.x=-Math.ceil(this.getBodyWidth()/2),n.y=-Math.ceil(.75*s),this.addChild(n);var a=egret.Tween.get(n);a.to({y:-s-20},1500),a.call(this.showBuffEnd,this,[n])}},n.showBuffEnd=function(e){e&&(egret.Tween.removeTweens(e),e.dispose(),e=null)},t}(SceneElement);egret.registerClass(LiveThing,"LiveThing");var MapImage=function(e){function t(){e.call(this),this._loadRectWidth=1e3,this._loadRectHeight=1e3,this._loadingGap=0,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){this._model=SceneModel.getInstance()},n.initTiles=function(){var e=Math.ceil(this._w/TileUtil.tileWidth),t=Math.ceil(this._h/TileUtil.tileHeight);this._loadingList=new Array;var i,n=this._model.getFocusPos();if(n)return void(i=new egret.Rectangle(n.x,n.y,GameContent.stageWidth,GameContent.stageHeight));for(var s=0;e>s;s++)for(var a=0;t>a;a++){var o=Tools.changeToNumberStr(a+1)+Tools.changeToNumberStr(s+1),r=new MapTile(this,o);r.url=this._rootURL+o+".jpg",r.x=s*TileUtil.tileWidth,r.y=a*TileUtil.tileHeight,r.col=s,r.row=a,this._tileDic[o]=r,SceneModel.getInstance().isSceneMapResLoaded()?this._loadingGap=3:this._loadingGap=10,this._loadingList.push(r)}TimerManager.getInstance().add(this._loadingGap,this.doLoadHandler,this)},n.doLoadHandler=function(){if(this._loadingList&&this._loadingList.length>0){var e=this._loadingList.shift();e.getHasLoad()||e.doLoad(),this.contains(e)||this.addChild(e)}},n.build=function(e,t,i){this._w=e,this._h=t,this._currentID=this._model.id,this._rootURL=rURL(i),this._tileDic=new Object,this.initTiles()},n.checkTileInRect=function(e,t){var i=2;this._loadRectWidth=GameContent.stageWidth,this._loadRectHeight=GameContent.stageHeight;var n=t.x+(t.width>>1),s=t.y+(t.height>>1),a=Math.floor((n-(this._loadRectWidth>>1))/TileUtil.tileWidth)-i,o=Math.floor((s-(this._loadRectHeight>>1))/TileUtil.tileHeight)-i,r=0,h=0,l=Math.floor((this._w-this._loadRectWidth)/TileUtil.tileWidth),d=Math.floor((this._h-this._loadRectHeight)/TileUtil.tileHeight);a=h>a?h:a,o=r>o?r:o,a=a>l?l:a,o=o>d?d:o;var _=Math.ceil(this._loadRectWidth/TileUtil.tileWidth),c=Math.ceil(this._loadRectHeight/TileUtil.tileHeight),u=a+i+_,p=o+i+c;return e.col>=a&&e.col<=u&&e.row>=o&&e.row<=p?!0:!1},n.load=function(e){var t=2;this._loadRectWidth=GameContent.stageWidth,this._loadRectHeight=GameContent.stageHeight;var i=e.x+(e.width>>1),n=e.y+(e.height>>1),s=Math.floor((i-(this._loadRectWidth>>1))/TileUtil.tileWidth)-t,a=Math.floor((n-(this._loadRectHeight>>1))/TileUtil.tileHeight)-t,o=0,r=0,h=Math.floor((this._w-this._loadRectWidth)/TileUtil.tileWidth),l=Math.floor((this._h-this._loadRectHeight)/TileUtil.tileHeight);s=r>s?r:s,a=o>a?o:a,s=s>h?h:s,a=a>l?l:a;var d,_=Math.ceil(this._loadRectWidth/TileUtil.tileWidth),c=Math.ceil(this._loadRectHeight/TileUtil.tileHeight),u=s+t+_,p=a+t+c;for(var g in this._tileDic)if(d=this._tileDic[g],d.col>=s&&d.col<=u&&d.row>=a&&d.row<=p)0==this.contains(d)&&-1==this._loadingList.indexOf(d)&&this._loadingList.push(d);else{this.contains(d)&&this.removeChild(d);var m=this._loadingList.indexOf(d);m>-1&&this._loadingList.splice(m,1)}},n.dispose=function(){var e,t;for(e in this._tileDic)t=this._tileDic[e],t.dispose(),t=null;this._tileDic=null,TimerManager.getInstance().remove(this._loadingGap,this.doLoadHandler,this)},t}(egret.Sprite);egret.registerClass(MapImage,"MapImage");var MapLayer=function(e){function t(t){e.call(this),this._scrollRangeX=0,this._scrollRangeY=0,this._isTweenScroll=!0,this._tweenValue=.08,this._positionChanged=!1,this._container=t,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){this._model=SceneModel.getInstance(),this._mapImage=new MapImage,this.addChild(this._mapImage)},n.scroll=function(){var e=this._container.x,t=this._container.y;if(this._isTweenScroll){var i=this._model.getFocusPos();if(null==i)return;this._positionChanged?(this._tempX=this._container.x,this._tempY=this._container.y,this._tempX+i.x>this._scrollRangeX?(this._tempX-=(this._tempX+i.x-this._scrollRangeX)*this._tweenValue,this._container.x=this._tempX-.5>>0):this._tempX+i.x<-this._scrollRangeX&&(this._tempX-=(this._tempX+i.x+this._scrollRangeX)*this._tweenValue,this._container.x=this._tempX-.5>>0),this._tempY+i.y>this._scrollRangeY?(this._tempY-=(this._tempY+i.y-this._scrollRangeY)*this._tweenValue,this._container.y=this._tempY-.5>>0):this._tempY+i.y<-this._scrollRangeY&&(this._tempY-=(this._tempY+i.y+this._scrollRangeY)*this._tweenValue,this._container.y=this._tempY-.5>>0)):(this._container.x+i.x>this._scrollRangeX?this._container.x=-i.x+this._scrollRangeX>>0:this._container.x+i.x<-this._scrollRangeX&&(this._container.x=-i.x-this._scrollRangeX>>0),this._container.y+i.y>this._scrollRangeY?this._container.y=-i.y+this._scrollRangeY>>0:this._container.y+i.y<-this._scrollRangeY&&(this._container.y=-i.y-this._scrollRangeY>>0))}return GameContent.gameLayers.sceneLayer.x=this._container.x,GameContent.gameLayers.sceneLayer.y=this._container.y,e!=this._container.x||t!=this._container.y},n.build=function(){var e=this._model.sceneWidth,t=this._model.sceneHeight;null==this._buttomImage&&(this._buttomImage=new PicLoader(PicLoader.MAPTILE),this.addChildAt(this._buttomImage,0));var i=UrlUtil.getSmallMapURL(this._model.resID);this._buttomImage.load(i,!0),this._buttomImage.setWH(e,t),i=UrlUtil.getMapTileURL(this._model.resID),this._mapImage.build(e,t,i),SceneModel.getInstance().storeSceneRes()},n.update=function(){var e=this._model.getFocusPos();null!=e&&this._mapImage.load(new egret.Rectangle(e.x,e.y,GameContent.stageWidth,GameContent.stageHeight))},n.setPositionChanged=function(e){this._positionChanged=e},n.getPositionChanged=function(){return this._positionChanged},n.getIsTweenScroll=function(){return this._isTweenScroll},n.dispose=function(){e.prototype.dispose.call(this),this._positionChanged=!1,this._mapImage&&this._mapImage.dispose(),this._buttomImage&&this.contains(this._buttomImage)&&(this.removeChild(this._buttomImage),this._buttomImage.dispose(),this._buttomImage=null)},t}(CommonSprite);egret.registerClass(MapLayer,"MapLayer");var MapTile=function(e){function t(t,i){e.call(this),this._hasLoad=!1,this._parent=t,this._key=i}__extends(t,e);var i=(__define,t),n=i.prototype;return n.doLoad=function(){this._pic||(this._pic=new PicLoader(PicLoader.MAPTILE)),this.contains(this._pic)||this.addChild(this._pic),this._pic.load(this.url),this._hasLoad=!0},n.unLoad=function(){this._hasLoad=!1,this._pic&&(this.contains(this._pic)&&this.removeChild(this._pic),this._pic.dispose(),this._pic=null),this.parent&&this.parent.removeChild(this)},n.getHasLoad=function(){return this._hasLoad},n.dispose=function(){this.unLoad()},t}(CommonSprite);egret.registerClass(MapTile,"MapTile");var Monster=function(e){function t(){e.call(this,"Monster"),this.ownerID=""}__extends(t,e);var i=(__define,t),n=i.prototype;return n.setMonsterVo=function(e){this.monsterVo=e,this.setDefaultState(),this.init2(),this.isUsing=!0},n.init2=function(){var e=this,t=e.monsterVo.appVo;e.monsterVo.isPetMonster?(e._frameCls=PetMonsterFrame2,e.contains(e.hpLayer)&&e.removeChild(e.hpLayer),e.contains(e.nameLayer)&&e.removeChild(e.nameLayer)):(t?e._frameCls=PlayerFrame:e._frameCls=MonsterFrame,e.contains(e.nameLayer)||e.addChild(e.nameLayer),e.contains(e.hpLayer)||e.addChild(e.hpLayer)),e.getDirState().setState(DirState.dirList[Math.floor(Math.random()*DirState.dirList.length)]),""!=e.monsterVo.guildName?e._nameTxt.text=StringUtil.substitute("{0}\n{1}",e.monsterVo.guildName,e.monsterVo.getName()):e._nameTxt.text=e.monsterVo.getName(),e._nameTxt.x=-Math.ceil(e._nameTxt.textWidth>>1),e._hpTxt.text=e.monsterVo.getHp()+"/"+e.monsterVo.getMaxHp(),null==e._bodyMovieClip&&(e._bodyMovieClip=new BitmapMovieClip("Monster_Body")),e.bodyLayer.addChild(e._bodyMovieClip),t&&(null==e._weaponMovieClip&&(e._weaponMovieClip=new BitmapMovieClip("Monster_weapon")),e.bodyLayer.addChild(e._weaponMovieClip),t.wing>0&&(null==e._wingMovieClip&&(e._wingMovieClip=new BitmapMovieClip("Monster_wing")),e.bodyLayer.addChild(e._wingMovieClip)),t.ring>0&&(null==e._ringMovieClip&&(e._ringMovieClip=new BitmapMovieClip("Monster_ring")),e.bodyLayer.addChild(e._ringMovieClip)),e.addTitle(t.title),SceneModel.getInstance().isMineFuBen()?e.getDirState().setState(4):SceneModel.getInstance().isUnKnowPalace()&&e.getDirState().setState(1)),e.setSpeed(e.monsterVo.getSpeed()),null==e._hp&&(e._hp=new BloodBar(2)),e._hp.configUI(),e._hp.addEventListener(BloodBar.BLOOD_MCEND,e.bloodMCEnd,e),e.hpLayer.addChild(e._hp),e.monsterVo.addEventListener(LiveThingVo.CHANGEHP,e.changeHPHandler,e),e.monsterVo.addEventListener(LiveThingVo.CHANGEMAXHP,e.changeHPHandler,e),e.monsterVo.addEventListener(MonsterVO.CHANGERESID,e.changeResIdHandler,e),e.getPoseState().setState(PoseState.STAND),9000001==e.monsterVo.typeId&&e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e=null},n.addToStage=function(e){9000001==this.monsterVo.typeId&&this.parent.setChildIndex(this,0)},n.getPoseState=function(){return this.monsterVo?this.monsterVo.poseState:null},n.getDirState=function(){return this.monsterVo?this.monsterVo.dirState:null},n.changeHPHandler=function(e){this._hp&&this._hp.showHpMC(this.monsterVo.getHp(),this.monsterVo.getMaxHp())},n.has0hp=function(){return 0==this.monsterVo.getHp()},n.changeResIdHandler=function(e){this.updateRes()},n.updateRes=function(){if(null==this.getPoseState())return!1;var e=this.getBodyActionURL(),t=this.getWingURL(),i=this.getWeaponURL(),n=this.getRingUrl();return null==e?(this._bodyMovieClip&&null!=this._bodyMovieClip.parent&&(this._bodyMovieClip.parent.removeChild(this._bodyMovieClip),this._bodyMovieClip.dispose()),this._bodyURL=null,!1):e==this._bodyURL?!0:(this._bodyMovieClip&&null==this._bodyMovieClip.parent&&this.bodyLayer.addChild(this._bodyMovieClip),this._bodyURL=e,this._wingURL=t,this._weaponURL=i,this._ringURL=n,SourceCache.getInstance().has(this._bodyURL)?(this._bodyMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._bodyURL)),this.redraw()):(SourceCache.getInstance().addEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,this.loadCompleteHandler2,this),0==SourceCache.getInstance().isLoading(this._bodyURL)&&SourceCache.getInstance().load(this._bodyURL,ResourceType.ANIMATION)),this._wingURL&&(SourceCache.getInstance().has(this._wingURL)?(this._wingMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._wingURL)),this.redraw()):(SourceCache.getInstance().addEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,this.loadCompleteHandler2,this),0==SourceCache.getInstance().isLoading(this._wingURL)&&SourceCache.getInstance().load(this._wingURL,ResourceType.ANIMATION))),this._weaponURL&&(SourceCache.getInstance().has(this._weaponURL)?(this._weaponMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._weaponURL)),this.redraw()):(SourceCache.getInstance().addEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,this.loadCompleteHandler2,this),0==SourceCache.getInstance().isLoading(this._weaponURL)&&SourceCache.getInstance().load(this._weaponURL,ResourceType.ANIMATION))),this._ringURL&&(SourceCache.getInstance().has(this._ringURL)?(this._ringMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._ringURL)),this.redraw()):(SourceCache.getInstance().addEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,this.loadCompleteHandler2,this),0==SourceCache.getInstance().isLoading(this._ringURL)&&SourceCache.getInstance().load(this._ringURL,ResourceType.ANIMATION))),!0)
},n.getBodyActionURL=function(){var e=null,t="stand",i=this.getPoseState().getState(),n=this.monsterVo;if(i==PoseState.MOVE?t="run":i==PoseState.ATTACK?t=n.job==Tools.ZHANSHI||0==n.job?"attack":"magic":(i==PoseState.HITED||i==PoseState.MOVEBACK)&&(t="stand"),this._frameCls==MonsterFrame||this._frameCls==PetMonsterFrame||this._frameCls==PetMonsterFrame2)e=UrlUtil.getMonsterURL(this.monsterVo.getResId())+t;else if(this._frameCls==PlayerFrame){var n=this.monsterVo,s=n.appVo;e=UrlUtil.getClothURL(n.job,n.sex,s.cloth)+t}return e+=this.getDirState().getFrame()},n.getWeaponURL=function(){var e=this.monsterVo,t=e.appVo;if(!t)return null;if(0==t.weapon)return null;var i=null,n="stand",s=this.getPoseState().getState();return s==PoseState.MOVE?n="run":s==PoseState.ATTACK?n=e.job==Tools.ZHANSHI?"attack":"magic":(s==PoseState.HITED||s==PoseState.MOVEBACK)&&(n="stand"),i=UrlUtil.getWeaponURL(e.sex,t.weapon)+n+this.getDirState().getFrame()},n.getRingUrl=function(){var e=this.monsterVo.appVo;if(null==e||0==e.ring)return null;var t=UrlUtil.getRingURL(e.ring);return t},n.getWingURL=function(){var e=this.monsterVo,t=e.appVo;if(!t)return null;if(0==t.wing)return null;var i=null,n="stand",s=this.getPoseState().getState();return s==PoseState.MOVE?n="run":s==PoseState.ATTACK?n=e.job==Tools.ZHANSHI?"attack":"magic":(s==PoseState.HITED||s==PoseState.MOVEBACK)&&(n="stand"),i=UrlUtil.getWingURL(t.wing)+n+this.getDirState().getFrame()},n.loadCompleteHandler2=function(e){var t=this,i=e.data.url,n=e.data.mc;i==t._bodyURL&&t._bodyMovieClip?(t._bodyMovieClip.setMovieClipData(n),t.redraw()):i==t._wingURL?t._wingMovieClip&&(t._wingMovieClip.setMovieClipData(n),t.redraw()):i==t._weaponURL?t._weaponMovieClip&&(t._weaponMovieClip.setMovieClipData(n),t.redraw()):i==t._ringURL&&t._ringMovieClip&&(t._ringMovieClip.setMovieClipData(n),t.redraw()),t=null},n.moveComplete=function(){e.prototype.moveComplete.call(this);var t=this.getPoseState();this.getDirState();t.getState()!=PoseState.ATTACK&&t.getState()!=PoseState.MOVEBACK&&(null!=this.monsterVo.path?this.completeHandler():t.setState(PoseState.STAND),this.updateAction(),null!=this.attackObj&&this.dispatchEvent(new ParamEvent(EventName.MONSTERATTACK,this.attackObj)))},n.updateAction=function(){e.prototype.updateAction.call(this),this.updateRes();var t,i,n=this.getPoseState(),s=this.getDirState();9000001==this.monsterVo.typeId||600100==this.monsterVo.getResId()?this._bodyMovieClip.scaleX=1:(this._bodyMovieClip.scaleX=s.getScale(),this._wingMovieClip&&(this._wingMovieClip.scaleX=s.getScale()),this._weaponMovieClip&&(this._weaponMovieClip.scaleX=s.getScale()));var a=n.getState();a==PoseState.MOVE?9000001==this.monsterVo.typeId?this._bodyMovieClip.gotoAndPlay(1,!0,1,1):600100==this.monsterVo.getResId()?this._bodyMovieClip.gotoAndPlay(1,!0,1,1):(t=1,i=this._frameCls.RUN,this._bodyMovieClip.gotoAndPlay(t,!0,t,i),this._wingMovieClip&&this._wingMovieClip.gotoAndPlay(t,!0,t,i),this._weaponMovieClip&&this._weaponMovieClip.gotoAndPlay(t,!0,t,i)):a==PoseState.STAND?(t=1,i=this._frameCls.STAND,600100==this.monsterVo.typeId||this._frameCls==PetMonsterFrame||this._frameCls==PetMonsterFrame2?this._bodyMovieClip.gotoAndPlay(1,!0,1,4):this._bodyMovieClip.gotoAndPlay(t,!0,t,i),this._wingMovieClip&&this._wingMovieClip.gotoAndPlay(t,!0,t,i),this._weaponMovieClip&&this._weaponMovieClip.gotoAndPlay(t,!0,t,i)):a==PoseState.MOVEBACK?(t=1,this._bodyMovieClip.gotoAndStop(t),this._wingMovieClip&&this._wingMovieClip.gotoAndStop(t),this._weaponMovieClip&&this._weaponMovieClip.gotoAndStop(t)):a==PoseState.DEAD?(this.isDead=!0,this.dispatchEvent(new ParamEvent(SceneEvtName.DEAD))):a==PoseState.ATTACK&&this.playAttackAction()},n.playAttackAction=function(){var e=1,t=this._frameCls.ATTACK;600100==this.monsterVo.getResId()&&(t=6),null==this._attackObj&&(this._attackObj={func:this.endAttackFun,thisObj:this}),this._bodyMovieClip.gotoAndPlay(e,!1,e,t,this._attackObj),this._wingMovieClip&&this._wingMovieClip.parent&&this._wingMovieClip.gotoAndPlay(e,!0,e,t),this._weaponMovieClip&&this._weaponMovieClip.parent&&this._weaponMovieClip.gotoAndPlay(e,!0,e,t)},n.endAttackFun=function(){var e=this;clearTimeout(this._attackSi);var t=this.monsterVo.monsterType;(t==MonsterVO.SMALL||t==MonsterVO.MEET_BOSS)&&(this._attackSi=setTimeout2(function(){null!=e.attackObj&&e.dispatchEvent(new ParamEvent(EventName.MONSTERATTACK,e.attackObj))},900)),null!=this.getPoseState()&&this.getPoseState().getState()==PoseState.ATTACK&&this.getPoseState().setState(PoseState.STAND)},n.playHitAction=function(){},n.completeHandler=function(){null==this._path||0==this._path.length?(this.getPoseState().setState(PoseState.STAND),this.dispatchEvent(new ParamEvent(SceneEvtName.WALK_COMPLETE))):(this.dispatchEvent(new ParamEvent(SceneEvtName.WALK_COMPLETE_NODE)),this.move(this._path.shift()))},n.movePath=function(e){return this._path=e,null!=this._path?0==this._path.length?(this.getPoseState().setState(PoseState.STAND),void this.dispatchEvent(new ParamEvent(SceneEvtName.WALK_COMPLETE))):(this.dispatchEvent(new ParamEvent(SceneEvtName.WALK_START)),void this.move(this._path.shift())):void 0},n.step=function(){this.nextPosition(),this._hp&&this._hp.step()},n.getId=function(){return this.monsterVo?this.monsterVo.id:0},n.layout=function(){e.prototype.layout.call(this),this.nameLayer.y=this.hpLayer.y-40,""!=this.monsterVo.guildName?this.nameLayer.y=this.hpLayer.y-60:this.nameLayer.y=this.hpLayer.y-40,this.titleLayer.y=this.nameLayer.y-15,this.canLayout=!1},n.toAttack=function(){null!=this.getPoseState()&&(this.getPoseState().setState(PoseState.ATTACK),this.getPoseState().isChanged()&&this.redraw())},n.setHp=function(t){e.prototype.setHp.call(this,t),this.monsterVo.setHp(t)},n.getBodyHeight=function(){if(null==this._bodyMovieClip)return 0;var e=this._bodyMovieClip.getBitmapFrame();return null==e?0:e.height},n.getBodyWidth=function(){if(null==this._bodyMovieClip)return 0;var e=this._bodyMovieClip.getBitmapFrame();return null==e?0:e.width},n.getVo=function(){return this.monsterVo},n.canBeAttack=function(){return this.monsterVo.useType==MonsterVO.VIRTUAL?!1:this.monsterVo.isPetMonster?!1:this.monsterVo.monsterType!=MonsterVO.MEET_BOSS||SceneModel.getInstance().toFightBossMeet?!0:!1},n.getPropertyVo=function(){return this.monsterVo.getPropertyVo()},n.getHp=function(){return this.monsterVo.getHp()},n.bloodMCEnd=function(e){this.has0hp()?this.dispatchEvent(new ParamEvent(SceneEvtName.DEAD)):null!=this._hp&&(this._hp.setProgress(this.monsterVo.getHp()/this.monsterVo.getMaxHp()),this._hpTxt.text=this.monsterVo.getHp()+"/"+this.monsterVo.getMaxHp())},n.dispose=function(){this._hp&&this._hp.removeEventListener(BloodBar.BLOOD_MCEND,this.bloodMCEnd,this),e.prototype.dispose.call(this),clearTimeout(this._attackSi),this._hpTxt&&(this._hpTxt.dispose(),this._hpTxt=null),this._nameTxt&&(this._nameTxt.dispose(),this._nameTxt=null),this.monsterVo.removeEventListener(LiveThingVo.CHANGEHP,this.changeHPHandler,this),this.monsterVo.removeEventListener(LiveThingVo.CHANGEMAXHP,this.changeHPHandler,this),this.monsterVo.removeEventListener(MonsterVO.CHANGERESID,this.changeResIdHandler,this),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this),SourceCache.getInstance().removeEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,this.loadCompleteHandler2,this)},n.clear=function(){e.prototype.clear.call(this),this._hp&&this._hp.removeEventListener(BloodBar.BLOOD_MCEND,this.bloodMCEnd,this),clearTimeout(this._attackSi),this.monsterVo.removeEventListener(LiveThingVo.CHANGEHP,this.changeHPHandler,this),this.monsterVo.removeEventListener(LiveThingVo.CHANGEMAXHP,this.changeHPHandler,this),this.monsterVo.removeEventListener(MonsterVO.CHANGERESID,this.changeResIdHandler,this),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this),SourceCache.getInstance().removeEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,this.loadCompleteHandler2,this)},t}(LiveThing);egret.registerClass(Monster,"Monster");var Npc=function(e){function t(t){e.call(this),this.isUsing=!1,this._nameWidth=0,this._bodyHeight=0,this.npcVo=t,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){var e=this;e.shadowLayer=new CommonSprite,e.addChild(e.shadowLayer),e.bodyLayer=new CommonSprite,e.addChild(e.bodyLayer),e.nameLayer=new CommonSprite,e.addChild(e.nameLayer),e.titleLayer=new CommonSprite,e.titleLayer.touchChildren=!1,e.titleLayer.touchEnabled=!1,e.addChild(e.titleLayer),e.bodyLayer.touchChildren=!1,e.bodyLayer.touchEnabled=!1,e.nameLayer.touchChildren=!1,e.nameLayer.touchEnabled=!1,null==e._nameTxt&&(e._nameTxt=new CustomTextField("LiveThing_name")),e._nameTxt.size=18,e._nameTxt.bold=!0,e._nameTxt.addMiaoBian(),e._nameTxt.cacheAsBitmap=!0,e._nameTxt.textAlign="center",e._nameTxt.text=e.npcVo.name,e.nameLayer.addChild(e._nameTxt),e._iconFun=new PicLoader,e._iconFun.touchEnabled=!1,e._iconFun.load(UrlUtil.getNpcFunIconURL(e.npcVo.icon)),e.titleLayer.addChild(e._iconFun);var e=this;null==e._bodyMovieClip&&(e._bodyMovieClip=new BitmapMovieClip("Npc_body")),e.bodyLayer.addChild(e._bodyMovieClip),e.addEvent(),e.isUsing=!0,e.updateCloth(),e.initshadow()},n.initshadow=function(){if(this._sceneCommonURL=UrlUtil.getCommonSceneURL(),SourceCache.getInstance().has(this._sceneCommonURL)){var e=SourceCache.getInstance().getSP(this._sceneCommonURL);e&&this.addShadow(e)}else SourceCache.getInstance().addEventListener(SourceCache.LOAD_TEXTURE_COMPLETE,this.loadCompleteHandler,this),0==SourceCache.getInstance().isLoading(this._sceneCommonURL)&&SourceCache.getInstance().load(this._sceneCommonURL,ResourceType.TEXTURE)},n.loadCompleteHandler=function(e){if(e.data.url==this._sceneCommonURL){SourceCache.getInstance().removeEventListener(SourceCache.LOAD_TEXTURE_COMPLETE,this.loadCompleteHandler,this);var t=e.data.texture;this.addShadow(t)}},n.addShadow=function(e){if(!this._shadowPic){var t=e.getTexture("shadow");this._shadowPic=new Bitmap(t),this._shadowPic.x=-this._shadowPic.width>>1,this._shadowPic.y=-this._shadowPic.height>>1}this.shadowLayer.addChild(this._shadowPic)},n.layout=function(){var e=this;e._nameWidth=e._nameTxt.textWidth,e.nameLayer.x=-e._nameWidth>>1,null==e.npcVo.name||""==e.npcVo.name?e.nameLayer.y=-e.getBodyHeight()+120:e.nameLayer.y=-e.getBodyHeight()-30,e.titleLayer.x=-e._iconFun.width>>1,e.titleLayer.y=e.nameLayer.y-30},n.getBodyHeight=function(){if(null==this._bodyMovieClip)return 0;var e=this._bodyMovieClip.getBitmapFrame();return null==e?0:(this._bodyHeight=e.height,this._bodyHeight)},n.addEvent=function(){SourceCache.getInstance().addEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,this.loadResComplete,this),SourceCache.getInstance().addEventListener(SourceCache.LOAD_PIC_COMPLETE,this.loadTitleComplete,this)},n.loadResComplete=function(e){var t=e.data.url,i=e.data.mc,n=this;t==n._bodyURL&&(n._bodyMovieClip.setMovieClipData(i),n.stand(),n.layout())},n.loadTitleComplete=function(e){var t=this,i=e.data.url;UrlUtil.getNpcFunIconURL(t.npcVo.icon)==i&&t.layout()},n.updateCloth=function(e){void 0===e&&(e=!0);var t=this,i=t.npcVo.getBodyURL();return null==i?(this._bodyMovieClip&&null!=this._bodyMovieClip.parent&&this._bodyMovieClip.parent.removeChild(this._bodyMovieClip),void(this._bodyURL=null)):void(i!=this._bodyURL&&(this._bodyMovieClip&&null==this._bodyMovieClip.parent&&this.bodyLayer.addChildAt(this._bodyMovieClip,0),t._bodyURL=i,t.stand(),SourceCache.getInstance().has(this._bodyURL)?(this._bodyMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._bodyURL)),e&&(t.stand(),t.layout())):0==SourceCache.getInstance().isLoading(this._bodyURL)&&SourceCache.getInstance().load(this._bodyURL,ResourceType.ANIMATION)))},n.stand=function(){var e=this;if(null!=e._bodyMovieClip){var t=1,i=NpcFrame.STAND;e._bodyMovieClip.gotoAndPlay(t,!0,t,i)}},n.isHit=function(e){var t=this;return t.visible&&null!=parent?(null==t._localPoint&&(t._localPoint=new Point),t._localPoint.x=e.x-t.x,t._localPoint.y=e.y-t.y,null!=t._bodyMovieClip.getCurrentBitmapFrame()&&(t._localPoint.x=t._localPoint.x-t._bodyMovieClip.getCurrentBitmapFrame().getBitmapData()._offsetX,t._localPoint.y=t._localPoint.y-t._bodyMovieClip.getCurrentBitmapFrame().getBitmapData()._offsetY),null!=t._bodyMovieClip&&t._bodyMovieClip.isHit(t._localPoint)?!0:!1):!1},n.dispose=function(){e.prototype.dispose.call(this);var t=this;SourceCache.getInstance().removeEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,t.loadResComplete,t),SourceCache.getInstance().removeEventListener(SourceCache.LOAD_PIC_COMPLETE,t.loadTitleComplete,this),t._bodyMovieClip&&t._bodyMovieClip.parent&&t._bodyMovieClip.parent.removeChild(t._bodyMovieClip),t._iconFun&&(t._iconFun.dispose(),t._iconFun=null),t._nameTxt&&(t._nameTxt.parent&&t._nameTxt.parent.removeChild(t._nameTxt),t._nameTxt=null),t.shadowLayer&&t.shadowLayer.parent&&t.shadowLayer.parent.removeChild(t.shadowLayer),t.shadowLayer=null,t.nameLayer&&t.nameLayer.parent&&t.nameLayer.parent.removeChild(t.nameLayer),t.nameLayer=null,t.bodyLayer&&t.bodyLayer.parent&&t.bodyLayer.parent.removeChild(t.bodyLayer),t.bodyLayer=null,t.titleLayer&&t.titleLayer.parent&&t.titleLayer.parent.removeChild(t.titleLayer),t.titleLayer=null},t}(SceneElement);egret.registerClass(Npc,"Npc");var Pet=function(e){function t(t){void 0===t&&(t="Pet"),e.call(this,t),this.dis=0,this._nameWidth=0,this._canUpdateName=!0,this._clothLoading=!1,this._bodyHeight=0,this._n=0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){e.prototype.init.call(this)},n.setPetBaseVo=function(e){var t=this;t.isUsing=!0,t.isPicking=!1,t.petVo=e,t.initNameTxt(),t.initBitmapMovieClip(),t.setDefaultState(),t.setSpeed(t.petVo.getSpeed()),t.addEvent(),t.updateName(!1),t.petVo.addEventListener(PetBaseVO.CHANGE_PET_CLOTH,t.changeClothHandle,t),t.redraw()},n.initBitmapMovieClip=function(){var e=this;null==e._bodyMovieClip&&(e._bodyMovieClip=new BitmapMovieClip("Pet_body")),e.bodyLayer.addChild(e._bodyMovieClip),null==e._weaponMovieClip&&(e._weaponMovieClip=new BitmapMovieClip("Pet_weapon")),e.bodyLayer.addChild(e._weaponMovieClip)},n.getId=function(){return this.petVo?this.petVo.uid:""},n.setOwner=function(e){var t=this;t._owner=e,t._owner&&t._owner.playerVo&&t._owner.playerVo.addEventListener(PlayerBaseVO.CHANGE_PET_WEAPON,t.changeWeaponHandle,t)},n.getOwner=function(){return this._owner},n.addEvent=function(){SourceCache.getInstance().addEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,this.loadResComplete,this)},n.updateAction=function(){e.prototype.updateAction.call(this);var t=this,i=this.getPoseState();if(null!=i){t.updateCloth(!1),t.updateWeapon(!1);var n=i.getState();n==PoseState.MOVE?t.playMoveAction():n==PoseState.STAND&&0==t._clothLoading&&(t.isPicking?t.playMoveAction():t.playStandAction()),t.setScale(t.getDirState().getScale()),t.bodyLayer.addChildAt(t._bodyMovieClip,0),t._weaponMovieClip&&t.bodyLayer.addChildAt(t._weaponMovieClip,1);var s=t.getDirState().getState();4>s&&t._weaponMovieClip&&t.bodyLayer.contains(t._weaponMovieClip)&&t.bodyLayer.swapChildren(t._bodyMovieClip,t._weaponMovieClip);var s=this.getDirState().getState()}},n.updateCloth=function(e){void 0===e&&(e=!0);var t=this.petVo.getBodyURL(this.isPicking);return null==t?(this._bodyMovieClip&&null!=this._bodyMovieClip.parent&&this._bodyMovieClip.parent.removeChild(this._bodyMovieClip),void(this._bodyURL=null)):void(t!=this._bodyURL&&(this._bodyMovieClip&&null==this._bodyMovieClip.parent&&this.bodyLayer.addChildAt(this._bodyMovieClip,0),this._bodyURL=t,this.redraw(),SourceCache.getInstance().has(this._bodyURL)?(this._bodyMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._bodyURL)),this._clothLoading=!1,e&&this.redraw()):(this._clothLoading=!0,0==SourceCache.getInstance().isLoading(this._bodyURL)&&SourceCache.getInstance().load(this._bodyURL,ResourceType.ANIMATION))))},n.updateWeapon=function(e){void 0===e&&(e=!0);var t=this.petVo.getWeaponURL(this.isPicking),i=this;return null==t?(this._weaponMovieClip&&null!=this._weaponMovieClip.parent&&(this._weaponMovieClip.parent.removeChild(this._weaponMovieClip),this._weaponMovieClip.dispose(),this._weaponMovieClip=null),void(this._weaponURL=null)):void(t!=this._weaponURL&&(null==i._weaponMovieClip&&(i._weaponMovieClip=new BitmapMovieClip("Pet_weapon")),i.bodyLayer.addChild(i._weaponMovieClip),this._weaponMovieClip&&null==this._weaponMovieClip.parent&&this.bodyLayer.addChild(this._weaponMovieClip),this._weaponURL=t,this.redraw(),SourceCache.getInstance().has(this._weaponURL)?(this._weaponMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._weaponURL)),e&&this.redraw()):0==SourceCache.getInstance().isLoading(this._weaponURL)&&SourceCache.getInstance().load(this._weaponURL,ResourceType.ANIMATION)))},n.playStandAction=function(){var e=1,t=PetFrame.STAND;this._bodyMovieClip.gotoAndPlay(e,!0,e,t),this._weaponMovieClip&&this._weaponMovieClip.gotoAndPlay(e,!0,e,t)},n.playMoveAction=function(){var e=1,t=PetFrame.RUN;this._bodyMovieClip.gotoAndPlay(e,!0,e,t),this._weaponMovieClip&&this._weaponMovieClip.gotoAndPlay(e,!0,e,t)},n.loadResComplete=function(e){var t=e.data.url,i=e.data.mc,n=this;t==n._bodyURL?(n._clothLoading=!1,n._bodyMovieClip.setMovieClipData(i),n.redraw()):t==n._wingURL?(n._wingMovieClip.setMovieClipData(i),n.redraw()):t==n._weaponURL?(n._weaponMovieClip&&n._weaponMovieClip.setMovieClipData(i),n.redraw()):t==n._ringURL&&(n._ringMovieClip.setMovieClipData(i),n.redraw())},n.initNameTxt=function(){this._nameTxt&&(this._nameTxt.text=this.petVo.name+"的魔宠")},n.layout=function(){this._nameWidth=this._nameTxt.textWidth,this.nameLayer.x=-this._nameWidth>>1,this.nameLayer.y=-this.getBodyHeight()-30,this.canLayout=!1},n.updateName=function(e){void 0===e&&(e=!1),e?(this.setName(!0),this.layout(),this._canUpdateName=!1):this._canUpdateName=!0},n.setName=function(e){void 0===e&&(e=!1),null!=this.petVo&&null!=this._nameTxt&&(this._nameTxt.text=StringUtil.substitute("{0}",this.petVo.name+"的魔宠"))},n.getPoseState=function(){return this.petVo?this.petVo.poseState:null},n.getDirState=function(){return null!=this.petVo?this.petVo.dirState:null},n.getBodyHeight=function(){if(null==this._bodyMovieClip)return 0;var e=this._bodyMovieClip.getBitmapFrame();return null==e?0:(this._bodyHeight=e.height,this._bodyHeight)},n.getBodyWidth=function(){if(null==this._bodyMovieClip)return 0;var e=this._bodyMovieClip.getBitmapFrame();return null==e?0:e.width},n.step=function(){var e=this;e._n++,this.nextPosition(),this._canUpdateName&&(this.setName(),this.canLayout||this.layout(),this._canUpdateName=!1),null!=this._hp&&this._hp.step(),e._n%50==0&&e.followTo()},n.followTo=function(e,t){void 0===e&&(e=null),void 0===t&&(t=0);var i=this;if(i.getPoseState().getState()!=PoseState.ATTACK){null==e&&(e=new Point(this._owner.x,this._owner.y));var n=Point.distance(e,new Point(this.x,this.y));if(t>0)i.setSpeed(t);else{if(150>n)return void(i.getPoseState().getState()==PoseState.MOVE&&i.getPoseState().setState(PoseState.STAND));220>n?150>n?i.setSpeed(.8*this._owner.getSpeed()):i.setSpeed(this._owner.getSpeed()):n>=220&&i.setSpeed(this._owner.getSpeed())}var s=Math.atan2(e.y-this.y,e.x-this.x),a=new Point(this._owner.x+2*TileUtil.GRID_WIDTH*Math.cos(s),this._owner.y+3*TileUtil.GRID_HEIGHT*Math.sin(s)),o=MapUtil.judgeDir(this.x,this.y,a.x,a.y);this.getDirState().setState(o),this.move(a)}},n.setScale=function(e){this._bodyMovieClip.scaleX=e,this._weaponMovieClip&&(this._weaponMovieClip.scaleX=e)},n.toDead=function(){e.prototype.toDead.call(this),this.dispatchEvent(new ParamEvent(SceneEvtName.DEAD))},n.dispose=function(){var t=this;e.prototype.dispose.call(this),SourceCache.getInstance().removeEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,t.loadResComplete,t),t.petVo.removeEventListener(PetBaseVO.CHANGE_PET_CLOTH,t.changeClothHandle,t),t._owner&&t._owner.playerVo&&t._owner.playerVo.removeEventListener(PlayerBaseVO.CHANGE_PET_WEAPON,t.changeWeaponHandle,t),t._n=0},n.clear=function(){var t=this;e.prototype.clear.call(this),SourceCache.getInstance().removeEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,t.loadResComplete,t),t.petVo.removeEventListener(PetBaseVO.CHANGE_PET_CLOTH,t.changeClothHandle,t),t._owner&&t._owner.playerVo&&t._owner.playerVo.removeEventListener(PlayerBaseVO.CHANGE_PET_WEAPON,t.changeWeaponHandle,t),t._n=0},n.getVo=function(){return this.petVo},n.playSkillEffect=function(e,t,i,n,s,a){void 0===a&&(a=-1),this._skillEffect&&(this._skillEffect.dispose(),this._skillEffect=null),this._skillEffect=EffectManager.getInstance().showEffect(e,t,i,this,n,s,!1,0,!1,0,!0,1,-1,0,a)},n.changeClothHandle=function(e){this.updateCloth()},n.changeWeaponHandle=function(e){var t=this;null!=t._owner&&null!=t._owner.playerVo&&null!=t.petVo&&t.petVo.setWeapon(t._owner.playerVo.getAppVo().getPetWeapon()),this.updateWeapon()},n.getPropertyVo=function(){return this.petVo.getPropertyVo()},t}(LiveThing);egret.registerClass(Pet,"Pet");var Player=function(e){function t(t){void 0===t&&(t="Player"),e.call(this,t),this.dis=0,this._walkTimes=0,this._nameWidth=0,this._canUpdateName=!0,this._clothLoading=!1,this._bodyHeight=0,this._toAttackSkillID=0,this._stopFrameSi=0,this._zsczSi=0,this.lastAttackTime=0}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.init=function(){e.prototype.init.call(this)},s.setPlayerVo=function(e){var t=this;t.isUsing=!0,t.isPicking=!1,t.playerVo=e,t.playerVo.poseState.ownerID=e.uid,t.initNameTxt(),t.initBitmapMovieClip(),t.setDefaultState(),t.setSpeed(t.playerVo.getSpeed()),t.changeHPHandler(null),t.addEvent(),null==t._hp&&(t._hp=new BloodBar(1,"LiveThing_blood")),t._hp.configUI(),t.hpLayer.addChild(t._hp),t.addTitle(e.getAppVo().title),t.updateName(t.playerVo.getBangID()>0),t.playerVo.addEventListener(LiveThingVo.CHANGEHP,t.changeHPHandler,t),t.playerVo.addEventListener(LiveThingVo.CHANGEMAXHP,t.changeHPHandler,t),t.playerVo.isRole&&(t.playerVo.addEventListener(LiveThingVo.CHANGEMP,t.changeMPHandler,t),t.playerVo.addEventListener(LiveThingVo.CHANGEMAXMP,t.changeMPHandler,t)),t.playerVo.addEventListener(PlayerBaseVO.CHANGE_CLOTH,t.changeClothHandle,t),t.playerVo.addEventListener(PlayerBaseVO.CHANGE_WEAPON,t.changeWeaponHandle,t),t.playerVo.addEventListener(PlayerBaseVO.CHANGE_WING,t.changeWingHandle,t),t.playerVo.addEventListener(PlayerBaseVO.CHANGE_GONGHUI,t.guildChange,t),GameDispatcher.getInstance().addEventListener(EventName.CHANGE_TITLE,t.changeTitleHandler,t),GameDispatcher.getInstance().addEventListener(EventName.CHANGE_RING,t.changeRingHandler,t),t.halfMask=!1,t.redraw()},s.initBitmapMovieClip=function(){var e=this;null==e._wingMovieClip&&(e._wingMovieClip=new BitmapMovieClip("Player_wing")),e.bodyLayer.addChild(e._wingMovieClip),null==e._bodyMovieClip&&(e._bodyMovieClip=new BitmapMovieClip("Player_body")),e.bodyLayer.addChild(e._bodyMovieClip),null==e._weaponMovieClip&&(e._weaponMovieClip=new BitmapMovieClip("Player_weapon")),e.bodyLayer.addChild(e._weaponMovieClip),null==e._ringMovieClip&&(e._ringMovieClip=new BitmapMovieClip("Player_ring")),e.bodyLayer.addChildAt(e._ringMovieClip,0),e.playerVo.isRealFigure||RoleModel.getInstance().isMyPartner(e.playerVo.uid)?(e._wingMovieClip.visible=!0,e._bodyMovieClip.visible=!0,e._weaponMovieClip.visible=!0,e._ringMovieClip.visible=!0):(e._wingMovieClip.visible=!1,e._bodyMovieClip.visible=!1,e._weaponMovieClip.visible=!1,e._ringMovieClip.visible=!1)},s.getId=function(){return this.playerVo?this.playerVo.uid:""},s.addEvent=function(){SourceCache.getInstance().addEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,this.loadResComplete,this)},s.updateAction=function(){e.prototype.updateAction.call(this);var t=this,i=t.getPoseState();if(null!=i){t.updateCloth(!1),t.updateWing(!1),t.changeWeapon(!1),t.changeRing(!1);var n=i.getState();n==PoseState.MOVE?t.playMoveAction():n==PoseState.STAND?0==t._clothLoading&&(t.isPicking?t.playMoveAction():t.playStandAction()):n==PoseState.ATTACK&&t.playAttackAction(),t.setScale(t.getDirState().getScale()),t.bodyLayer.addChildAt(t._bodyMovieClip,0),t.bodyLayer.addChildAt(t._weaponMovieClip,1),t._hasWing&&t.bodyLayer.addChildAt(t._wingMovieClip,2);var s=t.getDirState().getState();4>s&&t.bodyLayer.contains(t._wingMovieClip)&&(t.bodyLayer.swapChildren(t._bodyMovieClip,t._wingMovieClip),t.bodyLayer.swapChildren(t._bodyMovieClip,t._weaponMovieClip)),t.bodyLayer.setChildIndex(t._ringMovieClip,0)}},s.updateCloth=function(e){void 0===e&&(e=!0);var t=this.playerVo.getBodyURL(this.isPicking);return null==t?(this._bodyMovieClip&&null!=this._bodyMovieClip.parent&&this._bodyMovieClip.parent.removeChild(this._bodyMovieClip),void(this._bodyURL=null)):void(t!=this._bodyURL&&(this._bodyMovieClip&&null==this._bodyMovieClip.parent&&this.bodyLayer.addChildAt(this._bodyMovieClip,0),this._bodyURL=t,this.redraw(),SourceCache.getInstance().has(this._bodyURL)?(this._bodyMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._bodyURL)),this._clothLoading=!1,e&&this.redraw()):(this._clothLoading=!0,0==SourceCache.getInstance().isLoading(this._bodyURL)&&(1==this.playerVo.isRole?SourceCache.getInstance().load(this._bodyURL,ResourceType.ANIMATION,!0):SourceCache.getInstance().load(this._bodyURL,ResourceType.ANIMATION)))))},s.updateWing=function(e){void 0===e&&(e=!0);var t=this.playerVo.getWingURL(this.isPicking);return null==t?(this._wingMovieClip&&this._wingMovieClip.parent&&this._wingMovieClip.parent.removeChild(this._wingMovieClip),this._wingMovieClip.dispose(),this._wingURL=null,void(this._hasWing=!1)):void(t!=this._wingURL&&(this._wingURL=t,null==this._wingMovieClip&&(this._wingMovieClip=new BitmapMovieClip),this.bodyLayer.addChild(this._wingMovieClip),this._hasWing=!0,SourceCache.getInstance().has(this._wingURL)?(this._wingMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._wingURL)),e&&this.redraw()):0==SourceCache.getInstance().isLoading(this._wingURL)&&(1==this.playerVo.isRole?SourceCache.getInstance().load(this._wingURL,ResourceType.ANIMATION,!0):SourceCache.getInstance().load(this._wingURL,ResourceType.ANIMATION))))},s.changeWeapon=function(e){void 0===e&&(e=!0);var t=this.playerVo.getWeaponURL(this.isPicking);null==t&&(this._weaponURL="",this._weaponMovieClip&&this._weaponMovieClip.parent&&(this._weaponMovieClip.parent.removeChild(this._weaponMovieClip),this._weaponMovieClip.dispose()),this._weaponURL=null),t!=this._weaponURL&&(this._weaponMovieClip&&null==this._weaponMovieClip.parent&&this.bodyLayer.addChild(this._weaponMovieClip),this._weaponURL=t,null!=this._weaponURL&&(SourceCache.getInstance().has(this._weaponURL)?(this._weaponMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(this._weaponURL)),e&&this.redraw()):0==SourceCache.getInstance().isLoading(this._weaponURL)&&(1==this.playerVo.isRole?SourceCache.getInstance().load(this._weaponURL,ResourceType.ANIMATION,!0):SourceCache.getInstance().load(this._weaponURL,ResourceType.ANIMATION))))},s.changeRing=function(e){void 0===e&&(e=!1);var t=this,i=t.playerVo.getRingUrl();null==i&&(t._ringURL="",t._ringMovieClip&&t._ringMovieClip.parent&&(t._ringMovieClip.parent.removeChild(t._ringMovieClip),t._ringMovieClip.dispose())),i!=t._ringURL&&(t._ringMovieClip&&null==t._ringMovieClip.parent&&t.bodyLayer.addChildAt(t._ringMovieClip,0),t._ringURL=i,null!=t._ringURL&&(SourceCache.getInstance().has(t._ringURL)?(t._ringMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(t._ringURL)),e&&t.redraw()):0==SourceCache.getInstance().isLoading(t._ringURL)&&(1==t.playerVo.isRole?SourceCache.getInstance().load(t._ringURL,ResourceType.ANIMATION,!0):SourceCache.getInstance().load(t._ringURL,ResourceType.ANIMATION))),t=null)},s.playStandAction=function(){var e=1,t=PlayerFrame.STAND;this._bodyMovieClip.gotoAndPlay(e,!0,e,t),this._weaponMovieClip.gotoAndPlay(e,!0,e,t),this._wingMovieClip.gotoAndPlay(e,!0,e,t)},s.playMoveAction=function(){var e=1,t=PlayerFrame.RUN;this._bodyMovieClip.gotoAndPlay(e,!0,e,t),this._weaponMovieClip.gotoAndPlay(e,!0,e,t),this._wingMovieClip.gotoAndPlay(e,!0,e,t),e=1,t=6,this._ringMovieClip.gotoAndPlay(e,!0,e,t)},s.playAttackAction=function(){var e=1,t=PlayerFrame.ATTACK;null==this._attackEndObj&&(this._attackEndObj={func:this.endAttack,thisObj:this}),this._bodyMovieClip.gotoAndPlay(e,!0,e,t,this._attackEndObj),this._weaponMovieClip.gotoAndPlay(e,!0,e,t),this._wingMovieClip.gotoAndPlay(e,!0,e,t)},s.loadResComplete=function(e){var t=e.data.url,i=e.data.mc,n=this;t==n._bodyURL?(n._clothLoading=!1,n._bodyMovieClip.setMovieClipData(i),n.redraw()):t==n._wingURL?(n._wingMovieClip.setMovieClipData(i),n.redraw()):t==n._weaponURL?(n._weaponMovieClip.setMovieClipData(i),n.redraw()):t==n._ringURL&&(n._ringMovieClip.setMovieClipData(i),n.redraw())},s.initNameTxt=function(){this._nameTxt&&(this._nameTxt.text=this.playerVo.name)},s.layout=function(){e.prototype.layout.call(this);var t=this;t._nameWidth=t._nameTxt.textWidth,t.nameLayer.x=-t._nameWidth>>1,t.playerVo.getBangID()>0?t.nameLayer.y=t.hpLayer.y-60:t.nameLayer.y=t.hpLayer.y-40,t.titleLayer.y=t.nameLayer.y-15,t.canLayout=!1},s.updateName=function(e){void 0===e&&(e=!1),e?(this.setName(!0),this.layout(),this._canUpdateName=!1):this._canUpdateName=!0},s.setName=function(e){void 0===e&&(e=!1),null!=this.playerVo&&null!=this._nameTxt&&(e?this._nameTxt.text=StringUtil.substitute("{0}\n{1}",this.playerVo.guildName,this.playerVo.name):this._nameTxt.text=StringUtil.substitute("{0}",this.playerVo.name))},s.changeHPHandler=function(e){var t=this;t.has0hp()&&t.getPoseState()&&t.getPoseState().getState()!=PoseState.DEAD&&t.toDead(),null!=t._hp&&t._hp.setProgress(t.playerVo.getHp()/t.playerVo.getMaxHp()),t._hpTxt&&(t._hpTxt.text=t.playerVo.getHp()+"/"+t.playerVo.getMaxHp()),t.playerVo.isRole&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.CHANGE_ROLE_HP,{id:t.getId()}))},s.changeMPHandler=function(e){this.playerVo.isRole&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.CHANGE_ROLE_MP,{id:this.getId()}))},s.has0hp=function(){return this.playerVo.getHp()<=0},s.getPoseState=function(){return this.playerVo?this.playerVo.poseState:null},s.getDirState=function(){return null!=this.playerVo?this.playerVo.dirState:null},s.getBodyHeight=function(){if(null==this._bodyMovieClip)return 0;var e=this._bodyMovieClip.getBitmapFrame();return null==e?0:(this._bodyHeight=e.height,this._bodyHeight)},s.getBodyWidth=function(){if(null==this._bodyMovieClip)return 0;var e=this._bodyMovieClip.getBitmapFrame();return null==e?0:e.width},s.step=function(){this.nextPosition(),this._canUpdateName&&(this.setName(),this.canLayout||this.layout(),this._canUpdateName=!1),null!=this._hp&&this._hp.step()},s.isMonster=function(){return!1},s.stopPath=function(e){void 0===e&&(e=!0),this._path=null,e&&this.getPoseState().setState(PoseState.STAND)},s.movePath=function(e){if(this._path=e,null!=this._path){if(0==this._path.length)return this.getPoseState().setState(PoseState.STAND),void this.dispatchEvent(new ParamEvent(SceneEvtName.WALK_COMPLETE));this._walkTimes=0;var t=this._path.shift();this.moveTo(t)}},s.moveTo=function(e){this.move(e);var t=this;(t._walkTimes%15==0||t._path.length<=0)&&SceneModel.getInstance().isMainCity(),t._walkTimes++},s.completeHandler=function(){if(this.getPoseState().getState()!=PoseState.ATTACK)if(null==this._path||0==this._path.length)this.getPoseState().setState(PoseState.STAND),this.dispatchEvent(new ParamEvent(SceneEvtName.WALK_COMPLETE));else{if(this.dispatchEvent(new ParamEvent(SceneEvtName.WALK_COMPLETE_NODE)),null==this._path||0==this._path.length)return;this.moveTo(this._path.shift())}},s.moveComplete=function(){e.prototype.moveComplete.call(this),this.completeHandler(),!this.isInZSCZ||null!=this._path&&0!=this._path.length||(this.isInZSCZ=!1,this.stopZSCZEffect(),this.dispatchEvent(new ParamEvent(EventName.ZSCZ_FINISH,{skillID:this._toAttackSkillID})))},s.getCurrentPath=function(){return this._path},s.setScale=function(e){this._bodyMovieClip.scaleX=e,this._weaponMovieClip.scaleX=e,this._wingMovieClip.scaleX=e},s.toAttack=function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=null),void 0===i&&(i=null);
var n=this.getPoseState();null!=n&&(this.lastAttackTime=getTimer(),this._toAttackSkillID=e,101004==e||101009==e?n.setState(PoseState.MOVE):n.setState(PoseState.ATTACK))},s.clearStopFrameSi=function(){this._stopFrameSi>0&&clearTimeout(this._stopFrameSi)},s.endAttack=function(){var e=this.getPoseState();null!=e&&e.getState()==PoseState.ATTACK&&e.setState(PoseState.STAND)},s.toDead=function(){e.prototype.toDead.call(this),this.dispatchEvent(new ParamEvent(SceneEvtName.DEAD))},s.setHp=function(t){e.prototype.setHp.call(this,t),this.playerVo.setHp(t)},s.dispose=function(){var t=this;t._zsczSi>0&&clearTimeout(t._zsczSi),e.prototype.dispose.call(this),t.clearStopFrameSi(),t.stopZSCZEffect(),t._skillEffect&&(t._skillEffect.dispose(),t._skillEffect=null),SourceCache.getInstance().removeEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,t.loadResComplete,t),t.playerVo.removeEventListener(PlayerBaseVO.CHANGE_CLOTH,t.changeClothHandle,t),t.playerVo.removeEventListener(PlayerBaseVO.CHANGE_WEAPON,t.changeWeaponHandle,t),t.playerVo.removeEventListener(PlayerBaseVO.CHANGE_WING,t.changeWingHandle,t),t.playerVo.removeEventListener(PlayerBaseVO.CHANGE_GONGHUI,t.guildChange,t),t.playerVo.removeEventListener(LiveThingVo.CHANGEHP,t.changeHPHandler,t),t.playerVo.removeEventListener(LiveThingVo.CHANGEMAXHP,t.changeHPHandler,t),t.playerVo.removeEventListener(LiveThingVo.CHANGEMP,t.changeMPHandler,t),t.playerVo.removeEventListener(LiveThingVo.CHANGEMAXMP,t.changeMPHandler,t),GameDispatcher.getInstance().removeEventListener(EventName.CHANGE_TITLE,t.changeTitleHandler,t),GameDispatcher.getInstance().removeEventListener(EventName.CHANGE_RING,t.changeRingHandler,t),t._attackEndObj=null},s.clear=function(){var t=this;t._zsczSi>0&&clearTimeout(t._zsczSi),e.prototype.clear.call(this),t.clearStopFrameSi(),t.stopZSCZEffect(),t._skillEffect&&(t._skillEffect.dispose(),t._skillEffect=null),SourceCache.getInstance().removeEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,t.loadResComplete,t),t.playerVo.removeEventListener(PlayerBaseVO.CHANGE_CLOTH,t.changeClothHandle,t),t.playerVo.removeEventListener(PlayerBaseVO.CHANGE_WEAPON,t.changeWeaponHandle,t),t.playerVo.removeEventListener(PlayerBaseVO.CHANGE_WING,t.changeWingHandle,t),t.playerVo.removeEventListener(PlayerBaseVO.CHANGE_GONGHUI,t.guildChange,t),t.playerVo.removeEventListener(LiveThingVo.CHANGEHP,t.changeHPHandler,t),t.playerVo.removeEventListener(LiveThingVo.CHANGEMAXHP,t.changeHPHandler,t),t.playerVo.removeEventListener(LiveThingVo.CHANGEMP,t.changeMPHandler,t),t.playerVo.removeEventListener(LiveThingVo.CHANGEMAXMP,t.changeMPHandler,t),GameDispatcher.getInstance().removeEventListener(EventName.CHANGE_TITLE,t.changeTitleHandler,t),GameDispatcher.getInstance().removeEventListener(EventName.CHANGE_RING,t.changeRingHandler,t),t._attackEndObj=null},s.changeTitleHandler=function(e){if(this.playerVo.parnerID==e.data.id){var t=this.playerVo.getAppVo().title;this.addTitle(t)}},s.guildChange=function(e){this.updateName(this.playerVo.getBangID()>0)},s.getVo=function(){return this.playerVo},s.playSkillEffect=function(e,t,i,n,s,a){void 0===a&&(a=-1),this._skillEffect&&(this._skillEffect.dispose(),this._skillEffect=null),this._skillEffect=EffectManager.getInstance().showEffect(e,t,i,this,n,s,!1,0,!1,0,!0,1,-1,0,a)},s.playZhanShenChongZhuang=function(e){var t=this;void 0===e&&(e=1250),this.playMoveAction(),this._zsczSi>0&&clearTimeout(this._zsczSi),this._zsczSi=setTimeout2(function(){t.moveComplete()},e)},s.changeClothHandle=function(e){this.updateCloth()},s.changeWeaponHandle=function(e){this.changeWeapon()},s.changeWingHandle=function(e){this.updateWing()},s.getPropertyVo=function(){return this.playerVo.getPropertyVo()},s.getHp=function(){return this.playerVo.getHp()},s.setZSCZEff=function(e){this._zsczEff&&(this._zsczEff.dispose(),this._zsczEff=null),this._zsczEff=e},s.stopZSCZEffect=function(){this._zsczEff&&(this._zsczEff.dispose(),this._zsczEff=null),this.playerVo&&(this.playerVo.setSpeed(240),this.setSpeed(240))},i(s,"ownerID",function(){return this.playerVo?this.playerVo.pid:""}),s.getBelongID=function(){return this.ownerID},s.changeRingHandler=function(e){this.playerVo.parnerID==e.data.id&&this.changeRing()},s.removeSkillEffect=function(e){this._skillEffect&&(this._skillEffect.dispose(),this._skillEffect=null)},s.GetIsRole=function(){return this.playerVo.isRole},t}(LiveThing);egret.registerClass(Player,"Player");var Scene=function(e){function t(){e.call(this),this._zhanshiSkillSi=0,this._isClickMap=!1,this._targetMonster=0,this._clickTarget=null,this.n=0,this._processSKillID=0,this._103001Si=0,this._dropFlySi=0,this._callPetMonsterSi=0,this._zhanJiaSi=0,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){var e=this;e._model=SceneModel.getInstance(),e._skillManager=SkillModel.getInstance(),e._playerCachList=new Array,e._monsterCachList=new Array,e._petCachList=new Array,e._npcCachList=new Array,e._sceneUpContainer=new CommonSprite("mapContainer"),e.addChild(e._sceneUpContainer),e._map=new MapLayer(e._sceneUpContainer),e._sceneUpContainer.addChild(e._map),e._dropContainer=new CommonSprite("dropLayer"),e._sceneUpContainer.addChild(e._dropContainer),e._effectLayer=new CommonSprite("effectLayer"),e._sceneUpContainer.addChild(e._effectLayer),e._elementLayer=new CommonSprite("elementLayer"),e._sceneUpContainer.addChild(e._elementLayer),e._imageTxtLayer=new CommonSprite("imageTxtLayer"),e._sceneUpContainer.addChild(e._imageTxtLayer),e._sceneUpContainer.touchChildren=!1,e._sceneUpContainer.touchEnabled=!1,e._effectLayer.touchChildren=!1,e._effectLayer.touchEnabled=!1,e._elementLayer.touchChildren=!1,e._elementLayer.touchEnabled=!1,e._imageTxtLayer.touchChildren=!1,e._imageTxtLayer.touchEnabled=!1,e._dropContainer.touchChildren=!1,e._dropContainer.touchEnabled=!1,e._roleModel=RoleModel.getInstance(),e._roleModel.addEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,e.addPartnerHandler,e),e._model.addEventListener(EventName.SCENE_BUILD,e.buildScene,e),e._model.addEventListener(SceneModel.ADDPLAYER,e.addPlayerHandler,e),this._model.addEventListener(SceneModel.ADDPET,this.addPetHandler,this),this._model.addEventListener(SceneModel.REMOVEPET,this.removePetHandler,this),e._model.addEventListener(SceneModel.FOCUS_POS_CHANGE,e.focusPosChangeHandler,e),e._model.addEventListener(SceneModel.ADDMONSTER,e.addMonsterHandler,e),e._model.addEventListener(SceneModel.ADD_DROP_ITEM,e.addDropItemHandler,e),e._model.addEventListener(SceneModel.REMOVEMONSTER,e.removeMonsterHandler,e),e._model.addEventListener(SceneModel.CREATE_WAVE_MONSTER_FINISH,e.continueFightMonster,e),e._model.addEventListener(SceneModel.CREATE_NOVICE_MONSTER_FINISH,e.noviceMonsterCreateFinish,e),e._model.addEventListener(SceneModel.CREATE_MONSTER_LIST_FINISH,e.monsterListCreateFinish,e),e._model.addEventListener(SceneModel.CLEAR_ELEMENT,e.clearElement,e),e._model.addEventListener(SceneModel.REMOVEPLAYER,e.removePlayerHandler,e),e._model.addEventListener(SceneModel.CREATE_MATERIAL_MONSTER_FINISH,e.continueFightMonster,e),e._model.addEventListener(SceneModel.ISHIDE_CHANGE,e.isHideOtherChange,e),e._model.addEventListener(SceneModel.REMOVEALLMONSTER,e.clearAllMonster,e),e._gameDispatcher=GameDispatcher.getInstance(),e._gameDispatcher.addEventListener(EventName.GAME_START,e.onGameStart,e),e._gameDispatcher.addEventListener(EventName.SHOW_BUFF,e.showBUff,e),e._gameDispatcher.addEventListener(EventName.WAVE_MONSTER_END,e.waveMonsterEnd,e),e._gameDispatcher.addEventListener(EventName.ADD_BOSS_MEET,e.addBossMeetHandler,e),e._gameDispatcher.addEventListener(EventName.MEET_BOSS_FINISH,e.meetBossFinish,e),e._gameDispatcher.addEventListener(EventName.ADD_VIRTUAL_PLAYER,e.addVirtualPlayerHandler,e),e._gameDispatcher.addEventListener(EventName.ALL_PARTNER_HP0,e.allPartnerDead,e),e._gameDispatcher.addEventListener(EventName.ROLE_POS_CHANGE,e.rolePosChange,e),e._gameDispatcher.addEventListener(EventName.SET_ROLES_FIGHT,e.setRolesFightHandler,e),e._gameDispatcher.addEventListener(EventName.RANDOM_RUN,e.randomRunHandler,e),e._gameDispatcher.addEventListener(CityWarEvtName.ROLES_GOTO_FLAG,e.rolesGotoFlagHandler,e),e._gameDispatcher.addEventListener(CityWarEvtName.SET_ENERMY_POS,e.goToFightPlayers,e),e._gameDispatcher.addEventListener(EventName.CONTINUEFIGHT,e.continueFightMonster,e),e._gameDispatcher.addEventListener(EventName.AUTO_FLY_GOODS,e.autoFlyGoods,e),e._gameDispatcher.addEventListener(EventName.CHECK_HUNZHAN_FIGHT,e.checkHunZhanFight,e),e._gameDispatcher.addEventListener(EventName.CONTINUEFIGHT_REALPLAYER,e.continueFightRealPlayer,e),e._gameDispatcher.addEventListener(EventName.REMOVE_BUFF,e.removeBuff,e),e._gameDispatcher.addEventListener(EventName.PLAYER_MOVE,e.playerMove,e),e._gameDispatcher.addEventListener(EventName.WALK_TO_NPC,e.walkToNpc,e),e._sceneUpContainer.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickMap,e),e._sceneUpContainer.touchEnabled=!0,RenderManager.add(e.step,e),e._moveBackSiDic=new Object,e._playMovieDic=new Object,e._myPartnerList=new Array,e._meetPlayerList=new Array,e._petList=new Array,e._npcList=new Array,e._partnerClickTargetDic=new Object,e._meetPlayerTargetDic=new Object,e._buffDic=new Object,e._walkTimesDic=new Object,e._roleNextAttackSiDic=new Object},n.onClickMap=function(e){var t=this,i=e.localX,n=e.localY;if(1!=TaskModel.getInstance().isNovicePlayer()){if(t._model.isMainCity()){t.cancelClickTarget();for(var s,a=t._npcList.length-1;a>=0;a--)if(s=t._npcList[a],1==s.getIsInteractive()&&s.isHit(new Point(i,n)))return void t.roleTalkToNPC(s,1)}if((t._model.isHookSmall()||t._model.isMainCity())&&t._role){if(t._model.isCanFind8Scene()){var o=new Point(i,n),r=t._model.checkPointCanMove(o);if(!r)return void Message.show("该处不能行走")}t._isClickMap=!0,this.allPartnerMove(new Point(i,n)),t.showClickEffect(i,n)}}},n.showClickEffect=function(e,t){var i=UrlUtil.getCommonEffectURL("dian");EffectManager.getInstance().showEffect(i,e,t,this._sceneUpContainer)},n.allPartnerMove=function(e){for(var t=this,i=t._myPartnerList,n=0;n<i.length;n++){var s=i[n];t.roleMove(s,e)}},n.onGameStart=function(e){this._gameDispatcher.removeEventListener(EventName.GAME_START,this.onGameStart,this),this.addAllPartner(!0),this.addAllNpc(),this.rolesAutoFightMonster()},n.addAllPartner=function(e){void 0===e&&(e=!1);for(var t,i=this._roleModel.getPartnerList(),n=this._roleModel.getPetList(),s=0;s<i.length;s++)t=i[s],t.parnerID!=this._roleModel.getRoleBaseInfo().parnerID&&SceneModel.getInstance().isMainCity()||(this.addPartner(t),t.parnerID==this._roleModel.getRoleBaseInfo().parnerID&&(this.addRole(t.uid),n&&n.length>0&&(n[0].setWeapon(t.getAppVo().getPetWeapon()),this.addPet(n[0]))));e&&(this._sceneUpContainer.x=-Math.ceil(this._model.getFocusPos().x),this._sceneUpContainer.y=-Math.ceil(this._model.getFocusPos().y),GameContent.gameLayers.sceneLayer.x=this._sceneUpContainer.x,GameContent.gameLayers.sceneLayer.y=this._sceneUpContainer.y)},n.addPartner=function(e){var t=this.makePlayer(e);t.setPlayerVo(e),t.isYun=!1,t.playerVo.useType=PlayerBaseVO.COMMON,e.setHp(e.getMaxHp()),e.setMp(e.getMaxMp()),t.x=TileUtil.changeXToPixs(e.x),t.y=TileUtil.changeYToPixs(e.y),t.playerVo.x=e.x,t.playerVo.y=e.y,t.addEventListener(SceneEvtName.DEAD,this.roleDeadHandler,this),t.addEventListener(EventName.ZSCZ_FINISH,this.roleZSCZHandler,this),t.addEventListener(SceneEvtName.WALK_COMPLETE_NODE,this.roleWalkCompleteNodeHandler,this),t.addEventListener(SceneEvtName.WALK_COMPLETE,this.roleWalkCompleteHandler,this),t.getPoseState().addEventListener(PoseState.CHANGE,this.roleStateChangeHandler,this),null==this._playerDic&&(this._playerDic=new Object),this._playerDic[e.uid]=t,this.addElement(t),this._myPartnerList.push(t),this._model.addPlayer(e,!1)},n.addAllNpc=function(e){void 0===e&&(e=!1);var t=this._model.getCurrentSceneInfo(),i=t.npcList;if(null!=i)for(var n,s,a=0;a<i.length;a++)n=i[a],s=this.makeNpc(n),s.x=TileUtil.changeXToPixs(n.x),s.y=TileUtil.changeYToPixs(n.y),this._npcDic[s.npcVo.template_id]=s,this.addElement(s),this._npcList.push(s)},n.addPet=function(e){if(!(this._petList.length>0)){var t=this.makePet(e);t.setPetBaseVo(e),t.x=this._role.x-25,t.y=this._role.y+45,t.petVo.x=e.x,t.petVo.y=e.y,t.setOwner(this._role),null==this._petDic&&(this._petDic=new Object),this._petDic[e.uid]=t,this.addElement(t),t.redraw(),this._petList.push(t),this._model.addPet(e,!1)}},n.buildScene=function(e){this._isDispose=!1,this._elementList=new Array,this._addMonsterList=new Array,this._fightPlayList=new Array,this._playerDic=new Object,this._monsterDic=new Object,this._npcDic=new Object,this._dropItemList=new Array,this.disposeMap(),this._map.build(),this._isStartRender=!0,this._model.isFirstScene||(this.addAllPartner(!0),this.addAllNpc(),this._model.isHookSmall()&&BossModel.getInstance().addMeetBoss())},n.addPlayerHandler=function(e){var t=e.data.vo;this.addPlayer(t)},n.removeRole=function(){var e=this;if(null!=e._role){null!=e._role.getPoseState()&&e._role.getPoseState().removeEventListener(egret.Event.CHANGE,e.roleStateChangeHandler,e),e._role.removeEventListener(SceneEvtName.WALK_COMPLETE,e.roleWalkCompleteHandler,e),e._role.removeEventListener(SceneEvtName.WALK_COMPLETE_NODE,e.roleWalkCompleteNodeHandler,e),e._role.removeEventListener(SceneEvtName.DEAD,e.roleDeadHandler,e),e._role.removeEventListener(EventName.ZSCZ_FINISH,e.roleZSCZHandler,e),e.removeElement(e._role),e._role.clear();var t=e._myPartnerList.indexOf(e._role);t>=0&&e._myPartnerList.splice(t,1);var i=e._buffDic[e._role.getId()];i>0&&clearTimeout(i),i=e._roleNextAttackSiDic[e._role.getId()],i>0&&clearTimeout(i),delete e._playerDic[e._role.getId()],e._role=null}},n.addPetHandler=function(e){var t=e.data.vo;this.addPetOnScene(t)},n.removePetHandler=function(e){this.removePet(e.data.id)},n.addPetOnScene=function(e){if(null!=this._role){var t=this.getPet(e.uid);null!=t&&this.removePet(e.uid),t=this.makePet(e),null==this._petDic&&(this._petDic=new Object),this._petDic[e.uid]=t;var i=this._model.changeToPixsPoint(new Point(e.x,e.y));return i=this._model.changeToRightPoint(i),t.x=i.x,t.y=i.y,t.setOwner(this._role),t.setPetBaseVo(e),this.addElement(t),t.redraw(),t}},n.removeElement=function(e){if(null!=e){this._elementLayer.contains(e)&&this._elementLayer.removeChild(e);var t=this._elementList.indexOf(e);t>-1&&this._elementList.splice(t,1)}},n.roleStateChangeHandler=function(e){},n.roleAttackClickTarget=function(e,t){if(void 0===t&&(t=0),null==e)return!1;if(null!=e.playerVo&&null==this._clickTarget){var i=this.getPartnerClickTarget(e.playerVo.uid);if(is(i,"Player")){var n=i;return this.roleAttackPlayer(e,n)}if(is(i,"Monster")){var s=i;if(this._model.isClientHunZhan()){var a=e.playerVo.hunZhanTargetID;return""!=a?(this.rolesFightRealPlayer(e),!0):this.roleAttackMonster(e,s)}if(!i.isDead)return this._targetMonster=s.monsterVo.typeId,this.roleAttackMonster(e,s);i=null}if(null==i)if(this._model.isCityWarInner()){if(CityWarModel.getInstance().fightType==AttackType.MONSTER)return!1;CityWarModel.getInstance().fightType==AttackType.PARTNER&&this.rolesFightRealPlayer(e)}else MeetPlayerModel.getInstance().gotoFightMeetPlayerID>0?this.onePartnerFightPlayer(e):this.onePartnerFightMonster(e,t);return!1}},n.onePartnerFightMonster=function(e,t){void 0===t&&(t=0);var i;i=0==t?this.findNoBelongMonster(e.getId()):this.findMonsterByTypeID(t),i&&(i.belongTo=e.getId(),this.setPartnerClickTarget(e.getId(),i),this.roleAttackMonster(e,i))},n.onePartnerFightPlayer=function(e){var t=this._meetPlayerList;if(0!=t.length){var i=Math.ceil(Math.random()*t.length)-1;0>i&&(i=0);var n=t[i];this.roleAttackPlayer(e,n)}},n.addRole=function(e){this._role||(this._role=this.getPlayer(e),this._model.setRolePos(new Point(this._role.x,this._role.y)),this._role.playerVo.x=TileUtil.changeXToTile(this._role.x),this._role.playerVo.y=TileUtil.changeYToTile(this._role.y),this.addEventListener(SceneEvtName.WALK_START_NODE,this.roleWalkStartHandler,this),this._role.addEventListener(SceneEvtName.WALK_COMPLETE_NODE,this.roleWalkCompleteNodeHandler,this),this._role.addEventListener(SceneEvtName.WALK_COMPLETE,this.roleWalkCompleteHandler,this))},n.addElement=function(e){this._elementLayer.contains(e)||(this._elementLayer.addChild(e),this._elementList.push(e))},n.addElementAt=function(e,t){return this._elementLayer.contains(e)?void this._elementLayer.setChildIndex(e,t):(this._elementLayer.addChildAt(e,t),void this._elementList.push(e))},n.step=function(){if(this._isStartRender){var e,i=this,n=0;(this._model.isPeopleBoss()||this._model.isRoundBoss())&&(n=800),i.n++,i.n%8==0&&i.sortElement(i.n);var s,a=this._model.hideOhters;t.playNum=0;for(e in i._playerDic){s=i._playerDic[e];var o=s.playerVo.useType;if((s.parent||o==PlayerBaseVO.FIGHTER||o==PlayerBaseVO.HELP_FIGHTER)&&s.step(),i.n%4==0&&(s.playerVo.isRole||(i._model.checkInScreen(s.x,s.y,n)?s.parent||a||i.addElement(s):s.parent&&i.removeElement(s))),i.n%5==0&&i._model.isNoviceScene()&&s.GetIsRole()){var r=i._model.checkPixsXY(s.x,s.y);r==TileUtil.ALPHA?s.halfMask=!0:s.halfMask=!1}t.playNum++}var h;t.monsterNum=0;for(e in i._monsterDic)h=i._monsterDic[e],h.parent&&h.step(),i.n%4==0&&(h.monsterVo.isPetMonster||(i._model.checkInScreen(h.x,h.y)?h.parent||9000001==h.monsterVo.typeId?i.n%4==0&&9000001==h.monsterVo.typeId&&i.addElementAt(h,0):i.addElement(h):h.parent&&i.removeElement(h))),t.monsterNum++;var l,d;for(e in i._petDic)l=i._petDic[e],l.parent&&l.step(),i.n%4==0&&(d=l.getOwner(),null!=this._role&&null!=this._role.getVo()&&null!=d&&null!=d.getVo()&&d.getVo().pid!=this._role.getVo().pid&&(i._model.checkInScreen(l.x,l.y,n)?l.parent||a||i.addElement(l):l.parent&&i.removeElement(l))),t.petNum++;i.n%48==0&&i.monsterRandomWalk(),i.roleChangePosition(),i.scrollMap()}},n.sortElement=function(e){if(null!=this._elementList){this.sortList2(this._elementList);for(var t=this._elementList.length;t--;){var i=this._elementList[t];0!=this._elementLayer.contains(i)&&(is(i,"Monster")&&9000001==i.monsterVo.typeId||this._elementLayer.getChildIndex(i)!=t&&t<this._elementLayer.numChildren&&this._elementLayer.setChildIndex(i,t))}}},n.sortList2=function(e){for(var t=0;t<e.length-1;){if(e[t].y>e[t+1].y){var i=e[t];e[t]=e[t+1],e[t+1]=i}t++}},n.roleAttackMonster=function(e,t){if(this._model.isLock||!this._model.isStart)return!1;if(0==this.checkRoleCanAttack(e))return!1;if(null==t)return!1;e.attackObj={type:AttackType.MONSTER,id:t.getId()};var i=new Point(t.x,t.y),n=e.playerVo.getAttackRange(),s=Point.distance(new Point(e.x,e.y),i)/n;if(s>1){var a=this._model.findPoint(i),o=0;if(e==this._role||this._model.isHookSmall()||this._model.isMaterialFuBen())o=Math.floor(n/TileUtil.STEP);else{var r=60;e.playerVo.isRole||(r=180),a=this._model.getRandomPosByR(a,new Point(e.x,e.y),n-15,r)}return null==a?!1:(this.roleMove(e,a,o),!1)}return this.roleAttack(e,t.getId(),AttackType.MONSTER),!0},n.checkRoleCanAttack=function(e){return null==e?!1:null==e.playerVo?!1:null==e.getPoseState()?!1:e.getPoseState().getState()==PoseState.DEAD?!1:!0},n.setPartnerClickTarget=function(e,t){this._partnerClickTargetDic[e]=t},n.getPartnerClickTarget=function(e){return this._partnerClickTargetDic[e]},n.roleAttackPlayer=function(e,t){if(1==this._model.isLock||0==this._model.isStart)return!1;if(0==this.checkRoleCanAttack(e))return!1;if(null==t||null==t.playerVo||null==t.getPoseState()||!this._model.isCanPK(t.playerVo,!1))return!1;var i=new Point(t.x,t.y),n=e.playerVo.getAttackRange(),s=Point.distance(new Point(e.x,e.y),i)/n;if(s>1){var a=this._model.findPoint(i),o=Math.floor(n/TileUtil.STEP);return this.roleMove(e,a,o),!1}return this.roleAttack(e,t.getId(),AttackType.PARTNER),!0},n.roleMove=function(e,t,i,n,s){if(void 0===i&&(i=1),void 0===n&&(n=!1),void 0===s&&(s=!1),null==e||null==e.getPoseState())return null;if(null==this._model.getRolePos()||null==t)return null;if(t.x>this._model.sceneWidth||t.x<0||t.y>this._model.sceneHeight||t.y<0)return null;this._role==e&&TaskModel.getInstance().isNovicePlayer()&&this.showAutoFindRoad();var a,o=new Point(e.x,e.y);if(this._model.isCanFind8Scene()){var r=this._model.checkPointCanMove(t);if(!r)return void Message.show("该处不能行走");a=this._model.findPath(this._model.changeToTilePoint(o),this._model.changeToTilePoint(t)),a=this.changeToMapPath(a)}if((null==a||0==a.length)&&(a=this._model.findLine(t,i,s,o)),!e.isPicking&&a.length<2)return null;1==a.length&&e.isPicking&&a.push(t),a.shift();var h=a[a.length-1];return e.movePath(a),h},n.roleAttack=function(e,t,i,n){void 0===n&&(n=0);var s=e.getPoseState().getState();if(this._model.isCityWarInner()&&CityWarModel.getInstance().fightType==AttackType.PARTNER&&s!=PoseState.STAND?e.stopPath(!1):e.stopPath(),e.removeSpeak(),null!=e&&!e.isYun&&e.getPoseState().getState()!=PoseState.DEAD){var a,o=e.getId(),r=this._buffDic[o];if(r>0&&clearTimeout(r),i==AttackType.MONSTER){a=t;var h=this._monsterDic[a];if(null!=h&&(this.setPartnerClickTarget(e.getId(),h),h.getHp()>0||h.monsterVo.monsterType>0)){var l=new FightEvent(FightEvent.ATTACKMONSTER,{parnerID:o,monsterId:a,monsterTypeId:h.monsterVo.typeId});this._model.dispatchEvent(l),SceneModel.getInstance().isNoviceScene&&h.monsterVo.typeId==this._targetMonster&&this.monsterToPartnerPoint(h,this._role.getId())}}else if(i==AttackType.PARTNER){a=t;var d=this.getPlayer(a);this.setPartnerClickTarget(e.getId(),d),null!=d&&d.playerVo.getHp()>0&&this._model.dispatchEvent(new FightEvent(FightEvent.ATTACKPLAYER,{partnerID:o,target:a}))}(this._model.isHookSmall()||this._model.isNoviceScene())&&this.continueFight(e)}},n.continueFight=function(e){var t=this;if(null!=e){var i=e.getId(),n=this._roleNextAttackSiDic[i];n>0&&clearTimeout(n),n=setTimeout2(function(e){RoleModel.getInstance().isMyPartner(e.getId())||e.playerVo.useType==PlayerBaseVO.HELP_FIGHTER?t.roleAttackClickTarget(e):MeetPlayerModel.getInstance().fightMPID>0&&t.meetPlayerAttackTarget(e)},470,e),this._roleNextAttackSiDic[i]=n}},n.getPlayer=function(e){return null==this._playerDic?null:null==RoleModel.getInstance().getRoleBaseInfo()?null:e==RoleModel.getInstance().getRoleBaseInfo().uid&&this._role?this._role:void 0!=this._playerDic[e]?this._playerDic[e]:null},n.getNpc=function(e){return null==this._npcDic?null:void 0!=this._npcDic[e]?this._npcDic[e]:null},n.getPet=function(e){return null==this._petDic?null:null==RoleModel.getInstance().getRoleBaseInfo()?null:void 0!=this._petDic[e]?this._petDic[e]:null},n.changeToMapPath=function(e){if(null==e||0==e.length)return null;for(var t=new Array,i=0;i<e.length;i++){var n=e[i];null!=n&&t.push(this._model.changeToPixsPoint(n))}return t},n.addPlayer=function(e){if(null!=this._role){var t=this.getPlayer(e.uid);null!=t&&e.uid!=this._role.getId()&&this.removePlayer(e.uid),t=this.makePlayer(e),this._playerDic[e.uid]=t;var i=this._model.changeToPixsPoint(new Point(e.x,e.y));i=this._model.changeToRightPoint(i),t.x=i.x,t.y=i.y,t.setPlayerVo(e),t.addEventListener(SceneEvtName.DEAD,this.playerDeadHandler,this);var n=e.useType;if(n==PlayerBaseVO.VIRTUAL)t.toAttack(),t.dirToPoint(new Point(t.x+50,t.y+30));else if(n==PlayerBaseVO.MEET)t.addEventListener(SceneEvtName.WALK_COMPLETE_NODE,this.rolePosChange,this),t.addEventListener(SceneEvtName.WALK_COMPLETE,this.meetPlayerWalkComplete,this),this._meetPlayerList.push(t);else if(n==PlayerBaseVO.FIGHTER||n==PlayerBaseVO.HELP_FIGHTER){t.addEventListener(SceneEvtName.WALK_COMPLETE,this.helpFighterWalkComplete,this);var s=this.findBoss();this.roleAttackMonster(t,s)}return this.addElement(t),t}},n.removePlayer=function(e){var t=this.getPlayer(e);if(null!=t){this.isPartnerRemoveTarget(e),this._petMonsterTarget==t&&(this._petMonsterTarget=null),t.removeEventListener(SceneEvtName.DEAD,this.playerDeadHandler,this),t.removeEventListener(EventName.ZSCZ_FINISH,this.roleZSCZHandler,this),t.removeEventListener(EventName.ROLE_POS_CHANGE,this.rolePosChange,this),t.removeEventListener(SceneEvtName.WALK_COMPLETE,this.helpFighterWalkComplete,this),t.getPoseState().removeEventListener(PoseState.CHANGE,this.playerStateChangeHandler,this),t.getPoseState().removeEventListener(PoseState.CHANGE,this.roleStateChangeHandler,this),t.removeEventListener(SceneEvtName.WALK_COMPLETE_NODE,this.roleWalkCompleteNodeHandler,this),t.removeEventListener(SceneEvtName.WALK_COMPLETE,this.roleWalkCompleteHandler,this),t.removeEventListener(SceneEvtName.WALK_COMPLETE,this.meetPlayerWalkComplete,this),this.removeElement(t);var i=this._myPartnerList.indexOf(t);i>-1&&this._myPartnerList.splice(i,1),i=this._meetPlayerList.indexOf(t),i>-1&&this._meetPlayerList.splice(i,1),t.clear(),delete this._playerDic[e]}},n.removeAllNpc=function(){for(var e,t=this,i=new Array,n=0;n<t._npcList.length;n++)e=t._npcList[n],i.push(e.npcVo.template_id);for(n=0;n<i.length;n++)t.removeNpc(i[n]);t._npcList=new Array},n.removeNpc=function(e){var t=this._npcDic[e];if(null!=t){var i=this._npcList.indexOf(t);i>=0&&this._npcList.splice(i,1),this.removeElement(t),t.dispose(),delete this._npcDic[e]}},n.removeAllPet=function(){if(this._petList){var e,t,i=new Array;for(t=0;t<this._petList.length;t++)e=this._petList[t],i.push(e.getId());for(t=0;t<i.length;t++)this.removePet(i[t]);this._petList=new Array}},n.removePet=function(e){var t=this.getPet(e);if(null!=t){var i=this._petList.indexOf(t);i>=0&&this._petList.splice(i,1),this.removeElement(t),t.clear(),delete this._petDic[e]}},n.isPartnerRemoveTarget=function(e){var t,i;for(t in this._partnerClickTargetDic)if(i=this._partnerClickTargetDic[t],i&&i.getId()==e){delete this._partnerClickTargetDic[t];var n=this.getPlayer(t);n&&n.stopZSCZEffect()}},n.playerDeadHandler=function(e){var t=e.currentTarget,i=t.getId();if(this._model.isClientHunZhan()){var n=this._model.getPlayer(i);n&&n.isRealFigure&&this._model.removeOneRealFigure()}this._model.removePlayer(i),t.playerVo.useType==PlayerBaseVO.MEET&&(this._model.checkMeetPlayerFinish()?(this.clearMeetPlayer(),this._gameDispatcher.dispatchEvent(new ParamEvent(MeetPlayerEvtName.REQUEST_13301,{result:1}))):this.rolesAutoFightPlayer(),(this._petMonsterTarget=t)&&(this._petMonsterTarget=null))},n.roleWalkStartHandler=function(e){var t=e.data.path;t.length<1||this._model.dispatchEvent(new ParamEvent(SceneEvtName.WALK_START,{path:t}))},n.roleWalkCompleteNodeHandler=function(e){if(this.roleChangePosition(),MeetPlayerModel.getInstance().gotoFightMeetPlayerID>0)this._gameDispatcher.dispatchEvent(new ParamEvent(EventName.ROLE_POS_CHANGE));else{var t=e.target;if(null==t)return;var i=0;this._walkTimesDic[t.getId()]&&(i=this._walkTimesDic[t.getId()]),this._role==t&&(this.roleChangePosition(),this._isClickMap&&i%15==0&&this.allSmallMonFollowRole(t.getId())),i%4!=0||this._isClickMap||null!=this._clickTarget||this.roleAttackClickTarget(t),i++,i>99999999&&(i=0),this._walkTimesDic[t.getId()]=i}},n.allSmallMonFollowRole=function(e){var t=this;for(var i in t._monsterDic){var n=t._monsterDic[i];n.monsterVo.isPetMonster||n.monsterVo.useType!=MonsterVO.VIRTUAL&&(n.monsterVo.monsterType!=MonsterVO.MEET_BOSS||this._model.toFightBossMeet)&&t.monsterToPartnerPoint(n,e)}},n.roleChangePosition=function(){if(null!=this._role){this._model.setRolePos(new Point(this._role.x,this._role.y)),this._role.playerVo.x=TileUtil.changeXToTile(this._role.x),this._role.playerVo.y=TileUtil.changeYToTile(this._role.y);for(var e,t=this._myPartnerList,i=0;i<t.length;i++)e=t[i],e!=this._role&&(e.playerVo.x=TileUtil.changeXToTile(e.x),e.playerVo.y=TileUtil.changeYToTile(e.y))}},n.roleWalkCompleteHandler=function(e){var t=e.target,i=this;if(this._role==t&&(this._isClickMap=!1,this.roleChangePosition(),i.removeAutoFindRoad()),i._model.isMainCity()&&i._role==t){var n=TileUtil.changeXToTile(this._role.x),s=TileUtil.changeYToTile(this._role.y);i.dispatchEvent(new ParamEvent(SceneEvtName.WALK_START_NODE,{path:[new Point(n,s)]}))}return i._clickTarget instanceof Npc?void i.roleTalkToNPC(i._clickTarget,2):void(0==CityWarModel.getInstance().fightType&&this._model.isCityWarInner()&&!CityWarModel.getInstance().isCaiQi?this._role&&this.randomRunHandler(null):this.roleAttackClickTarget(t))},n.meetPlayerWalkComplete=function(e){var t=e.target;this.meetPlayerAttackTarget(t)},n.monsterToPartnerPoint=function(e,t,i){if(void 0===i&&(i=0),null!=e){var n=this.getPlayer(t);if(null!=n&&(e.monsterVo.monsterType!=MonsterVO.MEET_BOSS||this._model.toFightBossMeet)){var s=100,a=new Point(e.x,e.y),o=Point.distance(a,new Point(n.x,n.y));if(e.attackObj={type:AttackType.PARTNER,id:t},s>o)this.monsterAttack(e,{type:AttackType.PARTNER,id:t});else{var r=Math.atan2(e.y-n.y,e.x-n.x)+i,h=new Point;h.x=Math.floor(n.x+60*Math.cos(r)),h.y=Math.floor(n.y+60*Math.sin(r)),h=this._model.changeToRightPoint(h);var l=this._model.findLine(h,1,!0,a);l.shift(),e.movePath(l)}}}},n.focusPosChangeHandler=function(e){var t=this._model.getFocusPos();(null==this._oldPos||Point.distance(this._oldPos,t)>=100)&&(this._map.update(),this._oldPos=t.clone()),this._map.getIsTweenScroll()&&this._map.setPositionChanged(!0)},n.scrollMap=function(){this._map.scroll()},n.getMonsterById=function(e){var t=this._monsterDic[e];return t},n.addMonsterHandler=function(e){this.addMonster(e.data)},n.removeMonsterHandler=function(e){this.removeMonster(e.data.id)},n.addMonster=function(e){(null==this._monsterDic||void 0==this._monsterDic)&&(this._monsterDic=new Object),void 0!=this._monsterDic[e.id]&&this.removeMonster(e.id);var t=this.makeMonster(e.useType);t.setMonsterVo(e),this._monsterDic[e.id]=t;var i=new Point;i.x=TileUtil.changeXToPixs(e.x),i.y=TileUtil.changeYToPixs(e.y),i=this._model.changeToRightPoint(i),t.x=i.x,t.y=i.y,t.addEventListener(SceneEvtName.DEAD,this.monsterDeadHandler,this),t.addEventListener(EventName.MONSTERATTACK,this.monsterAttackHandler,this),t.addEventListener(EventName.MONSTERMOVEBACK,this.monsterMoveBackHandler,this),t.addEventListener(SceneEvtName.WALK_COMPLETE_NODE,this.monsterWalkNodeHandler,this),t.addEventListener(SceneEvtName.WALK_COMPLETE,this.monsterWalkComplete,this),this.addElement(t),t.redraw(),null!=e.path&&t.movePath(e.path.concat()),e.useType==MonsterVO.VIRTUAL&&t.dirToPoint(new Point(t.x-50,t.y-50)),this._model.isHookSmall()&&t.monsterVo.useType!=MonsterVO.VIRTUAL&&this._role&&this.monsterToPartnerPoint(t,this._role.getId())},n.monsterAttackHandler=function(e){var t=e.currentTarget,i=e.data;this.monsterToPartnerPoint(t,i.id)},n.monsterAttack=function(e,t){var i=t.id,n=t.type,s=this.getLiveThing(n,i);if(null!=s){e.dirToPoint(new Point(s.x,s.y)),e.toAttack();var a=Math.atan2(s.y-e.y,s.x-e.x),o=PropertyUtil.calculateDamage(e.getVo().propertyVo,s.getVo().getPropertyVo(),0,0),r=!1;n==AttackType.PARTNER&&RoleModel.getInstance().isMyPartner(i)&&(r=!0),SceneImageManager.getInstance().showDamage(this._imageTxtLayer,o,s.x,s.y+s.getBodyHeight()/2,a,0,r)}},n.monsterMoveBackHandler=function(e){var t=e.currentTarget;t.attackObj&&this.monsterToPartnerPoint(t,t.attackObj.id)},n.getLiveThing=function(e,t){var i;switch(e){case AttackType.PARTNER:i=this.getPlayer(t);break;case AttackType.MONSTER:i=this.getMonsterById(t)}return i},n.monsterDeadHandler=function(e){var t=e.target;if(t){var i=t.monsterVo.monsterType,n=t.monsterVo.dropInfo;n&&(this._model.setDropList(n,new Point(t.x,t.y)),i>MonsterVO.SMALL&&this._gameDispatcher.dispatchEvent(new ParamEvent(EventName.SHOW_FR_SUCCESS,{list:n}))),SceneModel.getInstance().isNoviceScene()&&(TaskModel.getInstance().killMonsterAddCount(t.monsterVo.typeId),this._targetMonster=0),this._model.removeMonster(t.getId())}},n.removeMonster=function(e){if(this.isPartnerRemoveTarget(e),void 0!=this._monsterDic[e]){var t=this._monsterDic[e];this._moveBackSiDic[e]&&clearTimeout(this._moveBackSiDic[e]),t.removeEventListener(SceneEvtName.DEAD,this.monsterDeadHandler,this),t.removeEventListener(EventName.MONSTERATTACK,this.monsterAttackHandler,this),t.removeEventListener(EventName.MONSTERMOVEBACK,this.monsterMoveBackHandler,this),t.removeEventListener(SceneEvtName.WALK_COMPLETE_NODE,this.monsterWalkNodeHandler,this),t.removeEventListener(SceneEvtName.WALK_COMPLETE,this.monsterWalkComplete,this),this.removeElement(t),t.clear(),delete this._monsterDic[e],this._petMonsterTarget==t&&(this._petMonsterTarget=null,this._petMonster&&(null==this._petMonsterTarget&&(t=this.findNoBelongMonster(this._petMonster.ownerID),this._petMonsterTarget=t),this.petMonsterAttack())),t=null
}},n.monsterWalkNodeHandler=function(e){if(this._model.isHookSmall()){var t=e.target,i=t.attackObj;if(i){var n=i.id,s=0;this._walkTimesDic[t.getId()]&&(s=this._walkTimesDic[t.getId()]),s%4==0&&this.monsterToPartnerPoint(t,n),s++,s>99999999&&(s=0),this._walkTimesDic[t.getId()]=s}}},n.monsterWalkComplete=function(e){if(this._model.isHookSmall()||this._model.isMaterialFuBen()){var t=e.target;this._role&&this.monsterToPartnerPoint(t,this._role.getId())}},n.playFight=function(e,t,i){var n=this._playerDic[e],s=this._monsterDic[t];if(null!=n&&null!=s){var a=this.makeFightList(n.getId(),t,i,AttackType.MONSTER);this.playFight2(n,s,i,a)}},n.playFightPlayer=function(e,t,i){var n=this._playerDic[e],s=this._playerDic[t];if(null!=n&&null!=s){var a=this.makeFightList(n.getId(),t,i,AttackType.PARTNER);this.playFight2(n,s,i,a)}},n.playFight2=function(e,t,i,n){var s=this;if(null!=e&&null!=t){e.dirToPoint(new Point(t.x,t.y)),e.toAttack(i,null,t);var a=this._skillManager.getSKillEffect(i);if(a&&a.eff1Delay>0){this._playMovieDic[e.getId()]&&clearTimeout(this._playMovieDic[e.getId()]);var o=setTimeout2(function(e,t,i,n){s.playFightMovie(e,t,i,n),delete s._playMovieDic[e.getId()]},a.eff1Delay,e,t,i,n);this._playMovieDic[e.getId()]=o}else this.playFightMovie(e,t,i,n)}},n.playRealFight=function(e){var t,i=SkillModel.getInstance().getSkill(e.skill_id),n=PlayerBaseVO.makeUid(e.plat_name,e.att_id);switch(e.type){case AttackType.PARTNER:if(t=this.getPlayer(n),(this._model.isCityWarFrontPalace()||this._model.isCityWarPalace())&&0==e.battle_result.length)return void(RoleModel.getInstance().isMyPartner(n)&&this.rolesFightRealPlayer(t));t&&(RoleModel.getInstance().isMyPartner(n)||t.getVo().useType==PlayerBaseVO.HELP_FIGHTER)&&this.continueFight(t);break;case AttackType.MONSTER:t=this.getMonsterById(e.att_id)}if(null!=i&&null!=t){for(var s,a,o,r=new Array,h=0;h<e.battle_result.length;h++){switch(s=e.battle_result[h],a=new FightVo,a.hitterType=s.obj_type,s.obj_type){case AttackType.PARTNER:var l=PlayerBaseVO.makeUid(s.plat_name,s.obj_id);a.hitter=this.getPlayer(l);break;case AttackType.MONSTER:a.hitter=this.getMonsterById(s.obj_id)}if(null!=a.hitter&&(a.hurt=s.hurt,a.leftHp=s.hp,a.leftType=s.type,0==h&&(o=a.hitter),r.push(a),this._model.isCityWarInner())){var d=PlayerBaseVO.makeUid(s.plat_name,s.obj_id);if(null==this._roleModel.getPartnerInfo(n)&&null==this._roleModel.getPartnerInfo(d)&&!(t.getBelongID()==CityWarModel.getInstance().fightID&&null!=this._roleModel.getPartnerInfo(d)||null==a.hitter||t.getBelongID()==this._roleModel.getRoleBaseInfo().pid&&a.hitter.getBelongID()==CityWarModel.getInstance().fightID)){var _,c=155,u=220;if(e.type==AttackType.PARTNER)if(s.obj_type==AttackType.MONSTER){if(Point.distance(new Point(t.x,t.y),new Point(a.hitter.x,a.hitter.y))<=c)continue;(this._model.checkInScreen(a.hitter.x,a.hitter.y)||this._model.checkInScreen(t.x,t.y))&&(_=this._model.getRandomPointOfRound(new Point(a.hitter.x,a.hitter.y),c),t.x=_.x,t.y=_.y,t.getVo().x=TileUtil.changeXToTile(_.x),t.getVo().y=TileUtil.changeYToTile(_.y))}else if(s.obj_id==AttackType.PARTNER){if(null==this._role)continue;this._model.checkInScreen(t.x,t.y,100)||(u=300+100*Math.random(),_=this._model.getRandomPointOfRound(new Point(this._role.x,this._role.y),u),t.x=_.x,t.y=_.y,t.getVo().x=TileUtil.changeXToTile(_.x),t.getVo().y=TileUtil.changeYToTile(_.y)),this._model.checkInScreen(a.hitter.x,a.hitter.y,100)||(u=220,_=this._model.getRandomPointOfRound(new Point(t.x,t.y),u),a.hitter.x=_.x,a.hitter.y=_.y,a.hitter.getVo().x=TileUtil.changeXToTile(_.x),a.hitter.getVo().y=TileUtil.changeYToTile(_.y))}}}}this.playFight2(t,o,e.skill_id,r)}},n.makeFightList=function(e,t,i,n){var s,a=new Array,o=RoleModel.getInstance().getPartnerSkillInfo(e,i);if(null==o)return null;var r,h=SkillModel.getInstance().getSkillAttackExt(i,o.level);n==AttackType.MONSTER?r=this.getMonsterListBySkill(e,i,t):n==AttackType.PARTNER&&(r=this.getPlayerListBySkill(e,i,t));for(var l,d=this.getPlayer(e),_=0;_<r.length;_++){l=r[_],s=new FightVo,s.hitter=l,s.hitterType=n;var c=PropertyUtil.calculateDamage(d.playerVo.getPropertyVo(),l.getPropertyVo(),h,0);s.hurt=c,s.leftHp=l.getHp()-c,a.push(s)}return a},n.playFightMovie=function(e,t,i,n){var s=this;if(t&&e){var a=this._skillManager.getSKillEffect(i);if(SkillModel.getInstance().isCallPetSkill(i)){this._callPetMonsterSi>0&&clearTimeout(this._callPetMonsterSi);var o=UrlUtil.getSkillEffectURL(a.eff1);return EffectManager.getInstance().showEffect(o,e.x-40,e.y+60,this._effectLayer),void(this._callPetMonsterSi=setTimeout2(function(){s.callPetMonster()},a.eff1Delay))}if(null==a&&200001!=i)return void Message.show("没有找到技能效果配置：id = "+i);var r,h,l,d=0,_=0;if(a)switch(a.type){case SkillEffectVo.PROCESS:this._processSKillID=i,this.playHuoQiu(e,t,a.speed,a);break;case SkillEffectVo.SELF:if(r=UrlUtil.getSkillEffectURL(a.eff1),a.pos==SkillEffectVo.POS_SCENE)103004==a.id?EffectManager.getInstance().showEffect(r,e.x+a.off1.x,e.y+a.off1.y,this._effectLayer,120):EffectManager.getInstance().showEffect(r,e.x+a.off1.x,e.y+a.off1.y,this._effectLayer);else{switch(a.pos){case SkillEffectVo.POS_BODY:_=-e.getBodyHeight()/2;break;case SkillEffectVo.POS_FOOT:_=0;break;case SkillEffectVo.POS_HEAD:_=-e.getBodyHeight()}if(101004!=i&&101009!=i){var c=70,u=!0;e.playSkillEffect(r,a.off1.x+d,a.off1.y+_,c,u)}}break;case SkillEffectVo.TARGET:this.playTargetEffect(a,t,!0),""!=a.eff2&&"0"!=a.eff2&&this.playTargetEffect(a,t);break;case SkillEffectVo.TARGET_SELF:if(101003==a.id||101008==a.id)this.playTargetEffect(a,e,!0);else{var p=this._skillManager.getSkillEffectDir(e.x,e.y,t.x,t.y);this.playTargetEffect(a,e,!0,p),a.eff2Delay>0?(this._zhanshiSkillSi>0&&clearTimeout(this._zhanshiSkillSi),this._zhanshiSkillSi=setTimeout2(function(e,t){s.playTargetEffect(e,t)},250,a,t)):this.playTargetEffect(a,t)}break;case SkillEffectVo.SELF_ALL:this.playTargetEffect(a,e,!0),this._zhanJiaSi>0&&clearTimeout(this._zhanJiaSi),this._zhanJiaSi=setTimeout2(function(e){s.playAllPartnerZhanJiaEffect(e)},a.eff2Delay,a);break;case SkillEffectVo.PARTNERS:var g=this.getRandomPartner();if(null==g)return;switch(a.pos){case SkillEffectVo.POS_BODY:_=-g.getBodyHeight()/2;break;case SkillEffectVo.POS_FOOT:_=0;break;case SkillEffectVo.POS_HEAD:_=-g.getBodyHeight()}var c=70,u=!0;r=UrlUtil.getSkillEffectURL(a.eff1),g.playSkillEffect(r,a.off1.x+d,a.off1.y+_,c,u)}if(101004==i||101009==i){l=new Point;var m=new Point;h=Math.atan2(t.y-e.y,t.x-e.x),l.x=e.x+250*Math.cos(h),l.y=e.y+250*Math.sin(h),l=this._model.changeToRightPoint(l);var v=new Point(e.x,e.y),C=Point.distance(l,v),f=180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI+90;e.getVo().setSpeed(320),e.setSpeed(320);var E=EffectManager.getInstance().showEffect(r,a.off1.x,a.off1.y+_,e,70,!0,!1,C*(1200/e.getVo().getSpeed()));if(E.setRotation(f),e.setZSCZEff(E),this._model.isHookSmall()&&Point.distance(l,v)>30){m.x=t.x+250*Math.cos(h),m.y=t.y+250*Math.sin(h),m=this._model.changeToRightPoint(m);var I=this._model.findLine(l);return void(I&&I.length>0&&(I.shift(),e.movePath(I),t.moveBack(m,320),e.isInZSCZ=!0))}e.playZhanShenChongZhuang()}for(var D,M,T,y,w,L=0;L<n.length;L++)if(D=n[L],M=D.hitter,null!=M&&(T=D.hurt,D.hitterType==AttackType.PARTNER?w=this._model.getPlayer(M.getId()):D.hitterType==AttackType.MONSTER&&(w=this._model.getMonsterVo(M.getId())),w)){if(y=Math.max(D.leftHp,0),D.leftType==FightVo.RED?is(e,"Player")&&e.playerVo.useType==PlayerBaseVO.FIGHTER||w.setHp(y):w.setMp(y),T>0){h=Math.atan2(M.y-e.y,M.x-e.x);var S=0,P=!1;is(e,"Player")&&(S=e.playerVo.getCareer(),RoleModel.getInstance().isMyPartner(e.getId())&&(P=!0)),is(M,"Player")&&RoleModel.getInstance().isMyPartner(M.getId())&&(P=!0),SceneImageManager.getInstance().showDamage(this._imageTxtLayer,T,M.x,M.y+M.getBodyHeight()/2,h,S,P)}if(this._model.isHookSmall())if(102003==i||102008==i){if(0==MeetPlayerModel.getInstance().fightMPID){this._moveBackSiDic[M.getId()]&&clearTimeout(this._moveBackSiDic[M.getId()]),l=new Point,l.x=M.x+100*Math.cos(h),l.y=M.y+100*Math.sin(h),l=this._model.changeToRightPoint(l);var N=setTimeout2(function(e,t){e.moveBack(t)},400,M,l);this._moveBackSiDic[M.getId()]=N}}else(101003==i||101008==i)&&this.playTargetEffect(a,M)}}},n.getMonsterListBySkill=function(e,t,i){var n=this._skillManager.getSkillTargetNum(t),s=new Array;if(0!=i&&1>=n)return s.push(this._monsterDic[i]),s;var a,o,r,h=this.getPlayer(e),l=new Point(h.x,h.y);for(a in this._monsterDic)if(o=this._monsterDic[a],o.canBeAttack()&&(r=Point.distance(new Point(o.x,o.y),l),300>r&&s.push(o),s.length>=n))break;return s},n.getPlayerListBySkill=function(e,t,i){var n=this._skillManager.getSkillTargetNum(t),s=new Array;if(""!=i&&1>=n)return s.push(this.getPlayer(i)),s;var a,o,r,h=this.getPlayer(e),l=new Point(h.x,h.y);for(a in this._playerDic)if(o=this._playerDic[a],o.playerVo.useType==PlayerBaseVO.MEET&&(r=Point.distance(new Point(o.x,o.y),l),300>r&&s.push(o),s.length>=n))break;return s},n.playTargetEffect=function(e,t,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=null),t){var s,a=0,o=0;e.pos==SkillEffectVo.POS_FOOT?(o=t.y,a=t.x,s=this._effectLayer):e.pos==SkillEffectVo.POS_BODY?(o=-t.getBodyHeight()/2,a=0,s=t):(a=t.x,o=t.y,s=this._effectLayer);var r,h=1;if(e.type==SkillEffectVo.TARGET)r=i?UrlUtil.getSkillEffectURL(e.eff1):UrlUtil.getSkillEffectURL(e.eff2);else if(e.type==SkillEffectVo.TARGET_SELF)if(i)if(n){var l=n.dir;4==l&&(l=6),r=UrlUtil.getSkillEffectURL(e.eff1+l),h=n.scale}else r=UrlUtil.getSkillEffectURL(e.eff1);else r=UrlUtil.getSkillEffectURL(e.eff2);else e.type==SkillEffectVo.SELF_ALL&&i&&(r=r=UrlUtil.getSkillEffectURL(e.eff1));var d=new UIEffect("playTargetEffect");d.scaleX=h,d.showEffect(r,a,o,s)}},n.playHuoQiu=function(e,t,i,n){var s=new Arrow,a=UrlUtil.getSkillEffectURL(n.eff1);s.showArrow(a,e,t,this._sceneUpContainer,200,n.speed,200,new Point(30,-50)),s.addEventListener(Arrow.ARROW_END,this.playHuoQiu2,this),this._huoQiuHitter=t},n.playHuoQiu2=function(e){e.currentTarget.removeEventListener(Arrow.ARROW_END,this.playHuoQiu2,this);var t=e.data.endP;if(null!=this._huoQiuHitter){if(0!=this._processSKillID){var i=this._skillManager.getSKillEffect(this._processSKillID),n=i.off2,s=UrlUtil.getSkillEffectURL(i.eff2);EffectManager.getInstance().showEffect(s,t.x+n.x,t.y+n.y,this._sceneUpContainer),103001==this._processSKillID&&(this._103001Si>0&&clearTimeout(this._103001Si),s=UrlUtil.getSkillEffectURL("zhazha"),this._103001Si=setTimeout2(function(e,t,i,n){EffectManager.getInstance().showEffect(e,t.x+i.x,t.y+i.y,n)},150,s,t,n,this._effectLayer))}this._huoQiuHitter=null}this._processSKillID=0},n.findMonsterByTypeID=function(e){var t,i;for(t in this._monsterDic)if(i=this._monsterDic[t],i.monsterVo&&i.monsterVo.typeId==e)return i;return null},n.noviceMonsterCreateFinish=function(e){var t=this;if(this._model.isStart){t.monsterRandomWalk();var i=this._roleModel.getPartnerIdByCareer(Tools.ZHANSHI);if(""!=i){var n=this.getPlayer(i);n&&n.stopZSCZEffect()}this.clearPlayMovieSi();var s=0;null!=e.data&&null!=e.data.monsterId&&void 0!=e.data.monsterId&&(s=e.data.monsterId),this.rolesAutoFightMonster(s)}},n.monsterRandomWalk=function(){if(this._monsterDic&&SceneModel.getInstance().isNoviceScene()){var e,t,i,n=!1;for(e in this._monsterDic)t=this._monsterDic[e],n=Math.ceil(9*Math.random())>=5,i=new Point(t.x+Tools.makeCustomRandom(120),t.y+Tools.makeCustomRandom(60)),n&&t.movePath([i])}},n.continueFightMonster=function(e){if(void 0===e&&(e=null),this._model.isStart){var t=this._roleModel.getPartnerIdByCareer(Tools.ZHANSHI);if(""!=t){var i=this.getPlayer(t);i&&i.stopZSCZEffect()}this.clearPlayMovieSi(),this.rolesAutoFightMonster()}},n.monsterListCreateFinish=function(e){void 0===e&&(e=null),this._model.isStart&&(this.clearPlayMovieSi(),this._model.isCityWarInner()||this.rolesAutoFightMonster())},n.rolesAutoFightMonster=function(e){void 0===e&&(e=0);for(var t,i,n=this._myPartnerList,s=0;s<n.length;s++){var a=n[s];(a.getPoseState()&&a.getPoseState().getState()!=PoseState.ATTACK||this._model.isKFBossScene()&&getTimer()-a.lastAttackTime>3e3||this._model.isHookSmall())&&(i?this.roleAttackClickTarget(a,e):i=this.roleAttackClickTarget(a,e))}return this._petMonster&&(null==this._petMonsterTarget&&(t=this.findNoBelongMonster(this._petMonster.ownerID),this._petMonsterTarget=t),this.petMonsterAttack()),i},n.petMonsterAttack=function(){var e=this,t=this._petMonsterTarget;if(null!=this._petMonster&&null!=t&&!this._model.isLock&&this._model.isStart){var i=this._petMonster;i.attackObj={type:AttackType.MONSTER,id:t.getId()};var n=new Point(t.x,t.y),s=new Point(5,4),a=s.x>2?s.x*TileUtil.GRID_WIDTH+SkillModel.ATTACK_RANGER_X:s.x*TileUtil.GRID_WIDTH,o=s.y>2?s.y*TileUtil.GRID_HEIGHT+SkillModel.ATTACK_RANGER_Y:s.y*TileUtil.GRID_HEIGHT,r=(i.x-n.x)*(i.x-n.x)/(a*a)+(i.y-n.y)*(i.y-n.y)/(o*o);if(r>1){var h=this._model.findPoint(n);if(null==h)return;return void i.move(h)}i.dirToPoint(n),i.toAttack();var l=PropertyUtil.calculateDamage(i.monsterVo.propertyVo,t.getVo().getPropertyVo(),0,0),d=Math.atan2(t.y-i.y,t.x-i.x);if(SceneImageManager.getInstance().showDamage(this._imageTxtLayer,l,t.x,t.y+t.getBodyHeight()/2,d),this._model.isHookSmall()){var _=Math.max(0,t.getVo().getHp()-l);t.getVo().setHp(_)}this._petMonsterAttackSi>0&&clearTimeout(this._petMonsterAttackSi),this._petMonsterAttackSi=setTimeout2(function(){e.petMonsterAttack()},800)}},n.findNoBelongMonster=function(e){var t=RoleModel.getInstance().getPartnerList();if(t&&1==t.length&&this._model.isHookSmall()){var i=this.getPlayer(e);return this.findNearSmallMon(i)}var n,s,a,o;for(o in this._monsterDic)if(n=this._monsterDic[o],a=n.monsterVo,!a.isPetMonster&&a.useType!=MonsterVO.VIRTUAL){if(a.monsterType==MonsterVO.MEET_BOSS){if(!this._model.toFightBossMeet)continue;if(this._model.checkSceneHasSmallMonster())continue}if(s=n,""==n.belongTo||n.belongTo==e)return n}return n&&!n.canBeAttack()?s:n},n.dispose=function(){this._zhanJiaSi&&clearTimeout(this._zhanJiaSi),this._callPetMonsterSi>0&&clearTimeout(this._callPetMonsterSi),this._103001Si>0&&clearTimeout(this._103001Si),this._zhanshiSkillSi>0&&clearTimeout(this._zhanshiSkillSi)},n.clearAllMonster=function(e){var t=this;t.disposeMonster()},n.disposeMonster=function(){if(this._monsterDic){var e,t;for(e in this._monsterDic)t=this._monsterDic[e],t.clear(),t=null;this._monsterDic=null}},n.clearMoveBackSi=function(){var e,t;for(t in this._moveBackSiDic)e=this._moveBackSiDic[t],clearTimeout(e);this._moveBackSiDic=new Object},n.disposePlayer=function(){if(this._playerDic){var e,t;for(e in this._playerDic)t=this._playerDic[e],t.GetIsRole()||(t.clear(),t=null);this._playerDic=null}},n.disposeDropItem=function(){if(this._dropItemList){for(var e,t=0;t<this._dropItemList.length;t++)e=this._dropItemList[t],e.dispose(),this.removeDropItem(e);this._dropItemList=null}},n.disposeMap=function(){this._map&&this._map.dispose()},n.clearElement=function(e){void 0===e&&(e=null);var t=this;t.removeAllPartner(),t.removeAllPet(),t.removeAllNpc(),t.removePetMonster(),t.disposeDropItem(),t.disposeMonster(),t.disposePlayer(),t.clearMoveBackSi(),t.clearPlayMovieSi(),t.clearBuffSi(),t.clearRoleAttackSi(),t.cancelClickTarget(),t._zhanJiaSi&&clearTimeout(t._zhanJiaSi),t._callPetMonsterSi>0&&clearTimeout(t._callPetMonsterSi),t._103001Si>0&&clearTimeout(t._103001Si),t._zhanshiSkillSi>0&&clearTimeout(t._zhanshiSkillSi),t._partnerClickTargetDic=new Object,t.clearMeetPlayer()},n.clearBuffSi=function(){for(var e in this._buffDic){var t=this._buffDic[e];clearTimeout(t)}this._buffDic=new Object},n.removeAllPartner=function(){if(this._myPartnerList){var e,t,i=new Array;for(t=0;t<this._myPartnerList.length;t++)e=this._myPartnerList[t],i.push(e.getId());for(t=0;t<i.length;t++)this.removePartner(i[t],!0);this._myPartnerList=new Array,this._role=null,this._isClickMap=!1}},n.removePartner=function(e,t){void 0===t&&(t=!1);var i,n=!1;this._role&&e==this._role.playerVo.uid?(this.removeRole(),n=!0):(i=this.getPlayer(e),this.removePlayer(e)),this._model.removePlayer(e,!1);var s=this._myPartnerList.indexOf(i);s>=0&&this._myPartnerList.splice(s,1);var a=this._buffDic[e];a>0&&clearTimeout(a),a=this._roleNextAttackSiDic[e],a>0&&clearTimeout(a),t||0!=RoleModel.getInstance().getAllHP()&&0!=this._myPartnerList.length&&n&&(i=this._myPartnerList[0],this.addRole(i.getId()))},n.clearPlayMovieSi=function(){var e,t;for(e in this._playMovieDic)t=this._playMovieDic[e],clearTimeout(t);this._playMovieDic=new Object},n.addDropItemHandler=function(e){var t=e.data.data;this.addDropItem(t)},n.addDropItem=function(e){var t=new DropItem;t.setData(e),t.x=e.x,t.y=e.y,this._dropItemList.push(t),this._dropContainer.addChild(t)},n.dropFly=function(){if(this._dropItemList)for(;this._dropItemList.length>0;)if(this._role){var e=this._dropItemList.shift();egret.Tween.get(e).to({x:this._role.x,y:this._role.y-60},400).call(this.removeDropItem,this,[e])}},n.removeDropItem=function(e,t){if(void 0===t&&(t=!1),t){var i=this._dropItemList;if(null==i)return;var n=i.indexOf(e);if(-1==n);n>=0&&i.splice(n,1)}this._dropContainer.contains(e)&&this._dropContainer.removeChild(e),e.dispose(),e=null},n.waveMonsterEnd=function(e){var t=this;this._dropFlySi>0&&clearTimeout(this._dropFlySi),this._dropFlySi=setTimeout2(function(){t.dropFly()},200)},n.roleDeadHandler=function(e){var t=e.currentTarget;if(t.playerVo.getCareer()==Tools.DAOSHI&&(clearTimeout(this._callPetMonsterSi),this.removePetMonster()),this._petList&&this._petList.length>0){var i=this._petList[0];i.getOwner().getVo().pid==t.getVo().pid&&this.removePet(i.getVo().uid)}if(this._model.isHookSmall()){if(this.removePartner(t.getId()),0==RoleModel.getInstance().getAllHP()||0==this._myPartnerList.length)return void this._gameDispatcher.dispatchEvent(new ParamEvent(EventName.ALL_PARTNER_DEAD));this.meetPlayerRemoveTarget(t.getId())}},n.meetPlayerRemoveTarget=function(e){var t,i;for(t in this._meetPlayerTargetDic)i=this._meetPlayerTargetDic[t],i.getId()==e&&delete this._meetPlayerTargetDic[t]},n.callPetMonster=function(){if(!this._petMonster){var e=this._roleModel.getPartnerIdByCareer(Tools.DAOSHI);if(""!=e){var t=SkillModel.getInstance().getPetSkillID(),i=this._roleModel.getPartnerSkillInfo(e,t);if(null!=i){var n=SkillModel.getInstance().getSkillAttackExt(t,i.level),s=this.getPlayer(e);if(null!=s){var a=new MonsterVO;a.setName(""),a.id=999999,a.isPetMonster=!0,a.useType=MonsterVO.PET,a.propertyVo=new PropertyVO,a.propertyVo.setValue(PropertyVO.ATTACK,n);var o=SkillModel.getInstance().getResIDBySkillID(t);if(a.setResId(o),a.setSpeed(PlayerBaseVO.SPEED),this._petMonster=this.makeMonster(MonsterVO.PET),this._petMonster.setMonsterVo(a),this._petMonster.ownerID=e,this._petMonster.x=s.x-40,this._petMonster.y=s.y+60,this.addElement(this._petMonster),this._monsterDic[a.id]=this._petMonster,this._petMonster.redraw(),this._petMonster.addEventListener(EventName.MONSTERATTACK,this.petMonsterAttackHandler,this),this._model.hasPetMonster=!0,null==this._petMonsterTarget)if(this._model.isCityWarInner()){if(CityWarModel.getInstance().fightType==AttackType.MONSTER)return;CityWarModel.getInstance().fightType==AttackType.PARTNER}else{var r=this.findNoBelongMonster(this._petMonster.ownerID);this._petMonsterTarget=r}this.petMonsterAttack()}}}}},n.petMonsterAttackHandler=function(e){this._model.isCityWarInner()?this.petMonsterAttack():(null==this._petMonsterTarget&&(this._petMonsterTarget=this.findNoBelongMonster(this._petMonster.ownerID)),this.petMonsterAttack())},n.removePetMonster=function(){this._petMonster&&(this._petMonster.removeEventListener(EventName.MONSTERATTACK,this.petMonsterAttackHandler,this),this.removeMonster(this._petMonster.getId()),this._petMonster.clear(),this._petMonster=null,this._petMonsterTarget=null,clearTimeout(this._petMonsterAttackSi),this._model.hasPetMonster=!1)},n.addBossMeetHandler=function(e){this._model.toFightBossMeet=!0,this._role&&(this._role.isPicking=!1),this._model.checkSceneHasSmallMonster()||this.rolesAutoFightMonster()},n.rolesToFight=function(){return MeetPlayerModel.getInstance().gotoFightMeetPlayerID>0?this.rolesAutoFightPlayer():this.rolesAutoFightMonster()},n.addPartnerHandler=function(e){if(!this._model.isHookSmall())return void Message.show("新伙伴将在下次战斗加入");if(null!=this._elementList){var t=e.data.vo;this.addPartner(t);var i=this.getPlayer(t.uid);this.onePartnerFightMonster(i)}},n.meetBossFinish=function(e){this.dropFly()},n.addVirtualPlayerHandler=function(e){var t=MeetPlayerModel.getInstance().getPkInfo();if(null!=t){var i=t.meet_roles;if(null!=i)for(var n=0;n<i.length;n++)if(0!=i[n].partner_list.length){var s=this._roleModel.changeOtherNodePartnerToVo(i[n].partner_list[0],i[n]);if(!this._model.getPlayer(s.uid)){var a=this._model.getMeetPlayerPos(n);a&&(s.x=a.x,s.y=a.y,this.addVirtualPlayer(s))}}}},n.addVirtualPlayer=function(e){e.useType=PlayerBaseVO.VIRTUAL,this._model.addPlayer(e);var t=new Point(e.x+1,e.y+2),i=this._model.createVirtualMonster(t);e.attackVirtualMon=i},n.removePlayerHandler=function(e){var t=e.data.id,i=this.getPlayer(t);null!=i&&(i.playerVo.isRole?(this.removePartner(t),this._model.isHookSmall()||(0==RoleModel.getInstance().getAllHP()||0==this._myPartnerList.length)&&this._gameDispatcher.dispatchEvent(new ParamEvent(EventName.ALL_PARTNER_DEAD))):this.removePlayer(t))},n.playerStateChangeHandler=function(e){var t=e.target.getState(),i=e.target.getPreState(),n=e.target.ownerID,s=this.getPlayer(n);if(s&&t==PoseState.STAND&&i!=PoseState.DEAD){var a=s.playerVo.useType;if(a==PlayerBaseVO.VIRTUAL&&(s.toAttack(),this._model.isKFBossScene()&&Message.show("fail fight"),this._model.checkInScreen(s.x,s.y))){var o=this._model.getRandomSkill(s.playerVo.getCareer()),r=this.getMonsterById(s.playerVo.attackVirtualMon.id);this.playFightMovie(s,r,o,[])}}},n.rolesAutoFightPlayer=function(){for(var e,t=this._myPartnerList,i=!1,n=0;n<t.length;n++)e=t[n],i?this.roleAttackClickTarget(e):i=this.roleAttackClickTarget(e);if(this._petMonster){if(null==this._petMonsterTarget){var s=this._meetPlayerList,a=Math.ceil(Math.random()*s.length)-1;0>a&&(a=0);var o=s[a];this._petMonsterTarget=o}this.petMonsterAttack()}return i},n.playAllPartnerZhanJiaEffect=function(e){for(var t,i=UrlUtil.getSkillEffectURL(e.eff2),n=0;n<this._myPartnerList.length;n++)t=this._myPartnerList[n],t.playSkillEffect(i,-50,-45,40,!1)},n.meetPlayerFightRoles=function(){if(0!=MeetPlayerModel.getInstance().gotoFightMeetPlayerID&&!this._model.checkMeetPlayerFinish()){for(var e,t=this._meetPlayerList,i=!1,n=0;n<t.length;n++)e=t[n],i?this.meetPlayerAttackTarget(e):i=this.meetPlayerAttackTarget(e);return i}},n.meetPlayerAttackTarget=function(e){var t=this._meetPlayerTargetDic[e.getId()];return null==t&&(t=this.getRandomPartner(),this._meetPlayerTargetDic[e.getId()]=t),this.roleAttackPlayer(e,t)},n.getRandomPartner=function(){var e,t,i=this._myPartnerList;return 1==i.length?t=i[0]:(e=Math.floor(Math.random()*i.length),t=i[e]),t},n.allPartnerDead=function(e){for(var t=this._myPartnerList.concat(),i=0;i<t.length;i++)t[i].playerVo.setHp(0)},n.findBoss=function(){var e,t;for(e in this._monsterDic)if(t=this._monsterDic[e],t.monsterVo.monsterType>MonsterVO.SMALL)return t;return null},n.clearMeetPlayer=function(){this._meetPlayerList=new Array;var e,t;for(t in this._playerDic)e=this._playerDic[t],e.playerVo.useType==PlayerBaseVO.MEET&&this.removePlayer(e.getId());this._meetPlayerTargetDic=new Object,this._partnerClickTargetDic=new Object,this._petMonsterTarget=null},n.isHideOtherChange=function(e){if(this._model.isRoundBoss()||this._model.isGuildBoss()){var t,i,n=this._model.hideOhters;if(n)for(t in this._playerDic)i=this._playerDic[t],i.playerVo.isRole||(n?this.removeElement(i):this.addElement(i))}},n.roleZSCZHandler=function(e){var t=e.currentTarget,i=t.attackObj.id,n=this.getMonsterById(i),s=e.data.skillID;if(n&&t){var a=RoleModel.getInstance().getPartnerSkillInfo(t.getId(),s);if(null==a)return;var o=SkillModel.getInstance().getSkillAttackExt(s,a.level),r=PropertyUtil.calculateDamage(t.playerVo.getPropertyVo(),n.getPropertyVo(),o,0);if(r>0){var h=Math.atan2(n.y-t.y,n.x-t.x);SceneImageManager.getInstance().showDamage(this._imageTxtLayer,r,n.x,n.y+n.getBodyHeight()/2,h,Tools.ZHANSHI,!0);var l=Math.max(n.monsterVo.getHp()-r,0);n.monsterVo.setHp(l)}}},n.rolePosChange=function(e){if(MeetPlayerModel.getInstance().gotoFightMeetPlayerID>0){this.meetPlayerFightRoles()&&this._gameDispatcher.removeEventListener(EventName.ROLE_POS_CHANGE,this.rolePosChange,this);var t=e.currentTarget;is(t,"Player")&&this.rolesToFight()&&t.removeEventListener(EventName.ROLE_POS_CHANGE,this.rolePosChange,this)}},n.setRolesFightHandler=function(e){for(var t=e.data.id,i=e.data.type,n=this._myPartnerList,s=0;s<n.length;s++){var a=n[s];if(i==AttackType.MONSTER){var o=this.getMonsterById(t);if(null==o)return void Message.show("没有找到要攻击的守卫 id = "+t);this.setPartnerClickTarget(a.getId(),o),this._petMonsterTarget=o,this.roleAttackMonster(a,o),this.petMonsterAttack()}else i==AttackType.PARTNER&&a&&this.rolesFightRealPlayer(a)}},n.rolesFightRealPlayer=function(e){if(e&&e.playerVo){var t="",i=null;this._model.isCityWarInner()?CityWarModel.getInstance().fightType==AttackType.PARTNER&&(t=CityWarModel.getInstance().fightID):this._model.isClientHunZhan()&&(t=e.playerVo.hunZhanTargetID),i=this.findRealPartnerByRoleID(t),i?(this.setPartnerClickTarget(e.getId(),i),this.roleAttackPlayer(e,i)):this._model.isClientHunZhan()&&this.onePartnerFightMonster(e)}},n.findRealPartnerByRoleID=function(e){var t=new Array;for(var i in this._playerDic){var n=this.getPlayer(i);n.playerVo.pid==e&&t.push(n)}var s=t.length;if(s>0){var a=Math.floor(Math.random()*s);return t[a]}return null},n.rolesGotoFlagHandler=function(e){var t=e.data.id;this.rolesGotoFlag(t)},n.rolesGotoFlag=function(e){var t,i=CityWarModel.getInstance().getCityWarSceneConfig(SceneInfoVo.CITYWAR_PALACE),n=i.monPoint[0],s=this._model.changeToPixsPoint(n);for(t in this._playerDic){var a=this.getPlayer(t);a.playerVo.id==e&&(a.playerVo.isRole?this.roleMove(a,s):(a.x=s.x,a.y=s.y,a.playerVo.x=n.x,a.playerVo.y=n.y))}},n.goToFightPlayers=function(e){var t=e.data.id,i=e.data.pos;if(null!=this._role)for(var n in this._playerDic){var s=this.getPlayer(n);if(s&&s.playerVo.pid==t){s.playerVo.x=i.x,s.playerVo.y=i.y;var a=this._model.changeToPixsPoint(i);s.x=a.x,s.y=a.y}}},n.randomRunHandler=function(e){if(this._model.isCityWarInner()){for(var t=this._myPartnerList,i=this._model.getMyQuadrant(),n=this._model.getOppositequadrant(i),s=this._model.getRandomPointInQuadrant(n),a=0;a<t.length;a++){var o=t[a];s.x=s.x+100*Math.random(),s.y=s.y+50*Math.random(),s=this._model.changeToRightPoint(s),this.roleMove(o,s)}if(this._role){null==this._contentList&&(this._contentList=new Array,this._contentList.push("先打守卫，没毛病"),this._contentList.push("高玩不可怕，蚂蚁啃大象"),this._contentList.push("同志们，攒够30分直接进皇宫"),this._contentList.push("眼疾手快，莫挂机，挂机遭人P"),this._contentList.push("抱团才能胜利"),this._contentList.push("高玩当守卫，小号采皇旗"),this._contentList.push("我不会告诉你，采皇旗的人是无敌的"));var r=Math.floor(this._contentList.length*Math.random()),h=this._contentList[r];this._role.speak(h,5)}}},n.autoFlyGoods=function(e){this.dropFly()},n.showBUff=function(e){var t=this,i=e.data.data,n=null;if(i.type==AttackType.PARTNER){var s=PlayerBaseVO.makeUid(i.plat_name,i.def_id);if(n=this.getPlayer(s),RoleModel.getInstance().isMyPartner(s)&&n){var a=SkillModel.getInstance().getBUffVo(i.buff_id);if(a&&a.type==BuffVo.YUN){var o=this._buffDic[i.def_id];o>0&&clearTimeout(o),n.isYun=!0,o=setTimeout2(function(){n.isYun=!1,t.roleAttackClickTarget(n)},a.time+50),this._buffDic[i.def_id]=o}}}else n=this.getMonsterById(i.def_id);n&&n.showBuff(i.buff_id)},n.continueFightRealPlayer=function(e){for(var t=this._myPartnerList,i=0;i<t.length;i++){var n=t[i];this.rolesFightRealPlayer(n)}},n.checkHunZhanFight=function(e){if(void 0===e&&(e=null),this._model.isClientHunZhan()){var t=this._myPartnerList;if(t)for(var i=0;i<t.length;i++){var n=t[i];if(n&&n.getPoseState()){var s=n.getPoseState().getState();s!=PoseState.ATTACK&&null==this._buffDic[n.getId()]&&this.roleAttackClickTarget(n)}}}},n.makePlayer=function(e){for(var t,i=this._playerCachList,n=0;n<i.length&&(t=i[n],t.isUsing);n++);return(null==t||t.isUsing)&&(t=new Player,this._playerCachList.push(t)),t},n.makePet=function(e){for(var t,i=this._petCachList,n=0;n<i.length&&(t=i[n],t.isUsing);n++);return(null==t||t.isUsing)&&(t=new Pet,this._petCachList.push(t)),t},n.makeNpc=function(e){for(var t,i=this._npcCachList,n=0;n<i.length&&(t=i[n],t.isUsing);n++);return(null==t||t.isUsing)&&(t=new Npc(e),this._npcCachList.push(t)),t},n.makeMonster=function(e){void 0===e&&(e=0);for(var t,i=this._monsterCachList,n=0;n<i.length&&(t=i[n],t.isUsing);n++);return(null==t||t.isUsing)&&(t=new Monster,i.push(t)),t},n.removeBuff=function(e){var t=e.data.data,i=PlayerBaseVO.makeUid(t.plat_name,t.partner_id),n=this.getPlayer(i);n&&n.removeSkillEffect(t.buff_id)},n.findNearSmallMon=function(e){var t=null,i=0;if(this._model.isHookSmall()&&e)for(var n in this._monsterDic){var s=this._monsterDic[n];if(!s.isDead&&!s.monsterVo.isPetMonster&&(s.monsterVo.monsterType!=MonsterVO.MEET_BOSS||this._model.toFightBossMeet)&&s.monsterVo.useType!=MonsterVO.VIRTUAL){var a=Point.distance(new Point(s.x,s.y),new Point(e.x,e.y));(0==i||i>a)&&(t=s,i=a)}}return t},n.clearRoleAttackSi=function(){for(var e in this._roleNextAttackSiDic){var t=this._roleNextAttackSiDic[e];clearTimeout(t)}},n.helpFighterWalkComplete=function(e){var t=e.target;if(t){var i=t.playerVo.useType;i==PlayerBaseVO.HELP_FIGHTER&&this.roleAttackClickTarget(t)}},n.playerMove=function(e){var t=this,i=e.data.platform,n=e.data.eId,s=e.data.path,a=PlayerBaseVO.makeUid(i,n),o=t.getPlayer(a);o&&o.movePath(s)},n.walkToNpc=function(e){var t=this,i=e.data.id,n=t.getNpc(i);n&&t.roleTalkToNPC(n,2)},n.roleTalkToNPC=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=null);var n=this;n._role&&n.setPartnerClickTarget(n._role.getId(),null),n.setClickTarget(e);var s=(Math.atan2(e.y-n._model.getRolePos().y,e.x-n._model.getRolePos().x),new Point(e.x,e.y)),a=3,o=Math.abs(n._role.x-s.x),r=Math.abs(n._role.y-s.y);o>TileUtil.GRID_WIDTH*a||r>TileUtil.GRID_HEIGHT*a?n.roleMove(n._role,s,a):(n.cancelClickTarget(),n._gameDispatcher.dispatchEvent(new ParamEvent(EventName.TRIGGER_NPC,{npcVO:e.npcVo,type:t})))},n.setClickTarget=function(e){var t=this;null!=e&&t._clickTarget!=e&&(t._clickTarget=e)},n.cancelClickTarget=function(){var e=this;e._clickTarget=null},n.showAutoFindRoad=function(){var e=this;null==e._findRoadEffect&&(e._findRoadEffect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("xunlu"),300,262,GameContent.gameLayers.guideLayer,120,!0))},n.removeAutoFindRoad=function(){var e=this;e._findRoadEffect&&(e._findRoadEffect.dispose(),e._findRoadEffect=null)},t}(CommonSprite);egret.registerClass(Scene,"Scene");var SceneImageTxt=function(e){function t(t){e.call(this,"SceneImageTxt"),this._career=t,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){this._txt=new eui.BitmapLabel,this._txt.font="number_fight_"+this._career+"_fnt",this.addChild(this._txt)},n.setData=function(e){this._txt.text="a"+e},n.dispose=function(){e.prototype.dispose.call(this),this.parent&&this.parent.removeChild(this.parent)},t}(CommonSprite);egret.registerClass(SceneImageTxt,"SceneImageTxt");var MonsterFrame=function(){function e(){}var t=(__define,e);t.prototype;return e.STAND=4,e.RUN=6,e.ATTACK=6,e}();egret.registerClass(MonsterFrame,"MonsterFrame");var NpcFrame=function(){function e(){}var t=(__define,e);t.prototype;return e.STAND=6,e}();egret.registerClass(NpcFrame,"NpcFrame");var PetFrame=function(){function e(){}var t=(__define,e);t.prototype;return e.STAND=4,e.RUN=8,e.ATTACK=7,e}();egret.registerClass(PetFrame,"PetFrame");var PetMonsterFrame=function(){function e(){}var t=(__define,e);t.prototype;return e.STAND=4,e.RUN=8,e.ATTACK=7,e}();egret.registerClass(PetMonsterFrame,"PetMonsterFrame");var PetMonsterFrame2=function(){function e(){}var t=(__define,e);t.prototype;return e.STAND=4,e.RUN=6,e.ATTACK=6,e}();egret.registerClass(PetMonsterFrame2,"PetMonsterFrame2");var PlayerFrame=function(){function e(){}var t=(__define,e);
t.prototype;return e.STAND=1,e.RUN=8,e.ATTACK=7,e}();egret.registerClass(PlayerFrame,"PlayerFrame");var WingFrame=function(){function e(){}var t=(__define,e);t.prototype;return e.stand8=1,e.stand9=2,e.stand6=3,e.stand3=4,e.stand2=5,e.standEnd8=1,e.standEnd9=2,e.standEnd6=3,e.standEnd3=4,e.standEnd2=5,e.walk8=1,e.walk9=9,e.walk6=17,e.walk3=25,e.walk2=33,e.walkEnd8=8,e.walkEnd9=16,e.walkEnd6=24,e.walkEnd3=32,e.walkEnd2=40,e.attack8=1,e.attack9=8,e.attack6=15,e.attack3=22,e.attack2=29,e.attackEnd8=7,e.attackEnd9=14,e.attackEnd6=21,e.attackEnd3=28,e.attackEnd2=35,e}();egret.registerClass(WingFrame,"WingFrame");var ShadowEquipView=function(e){function t(){e.call(this),this._type=1,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/shadow/ShadowEquipSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.addGlobalEventListener(ShadowEvtName.CCMD18030_UPDATE,this.updateData,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.item_1.showTips=!1,this.item_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap,this),this.itemLock_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap,this),this.item_2.showTips=!1,this.item_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap2,this),this.itemLock_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap2,this),this.item_3.showTips=!1,this.item_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap3,this),this.itemLock_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap3,this),this.item_4.showTips=!1,this.item_4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap4,this),this.itemLock_4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap4,this),this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/shadow/shadowBg.png"),this.addChildAt(this.imageBg,0)},n.onItemTap=function(){this._type=1,this.setSelect()},n.onItemTap2=function(){this._type=2,this.setSelect()},n.onItemTap3=function(){this._type=3,this.setSelect()},n.onItemTap4=function(){this._type=4,this.setSelect()},n.setPlayerVo=function(e){this._playerVo=e,this._type=1},n.onGet=function(){this.dispatchGlobalEvent(new ParamEvent(ShadowEvtName.CCMD18031,{id:this._playerVo.parnerID,type:this._type}))},n.updateData=function(e){this.setSelect(),this.imageTitle||(this.imageTitle=new PicLoader,this.imageTitle.x=485,this.imageTitle.y=80,this.addChild(this.imageTitle));var t=ShadowModel.getInstance().getDataJie(this._playerVo.parnerID);if(t){var i=t.adv_lv>0?t.adv_lv:1;this.imageTitle.load("resource/assets/icon/shadow/shadowlvTitle_"+i+".png")}},n.setSelect=function(){var e,t=ShadowModel.getInstance().getDataEquip(this._playerVo.parnerID),i="";this._fightVo=new PropertyVO;for(var n,s,a,o=1;5>o;o++){n=this["item_"+o],a=1e3*o;for(var r=0;r<t.length;r++)s=t[r],s.type==o&&(a+=s.level);e=ShadowModel.getInstance().getEquipVo(a),e?(n.data=GoodsListProxy.getInstance().getGoodsInfoByType(e.show),this["itemLock_"+o].visible=!1,o==this._type&&(e.hp>0&&(i="\n生命+"+e.hp,this._fightVo.setValue(1,e.hp)),e.att>0&&(i+="\n攻击+"+e.att,this._fightVo.setValue(3,e.att)),e.att_def>0&&(i+="\n物防+"+e.att_def,this._fightVo.setValue(4,e.att_def)),e.magic_def>0&&(i+="\n魔防+"+e.magic_def,this._fightVo.setValue(5,e.magic_def)),this.item_cur.data=n.data)):(n.data=null,this["itemLock_"+o].visible=!0,o==this._type&&(this.item_cur.data=null,this.item_cur.showAdd(!1))),o==this._type&&(this.imageSelect.x=n.x-13)}this.txtPro.text=i,this.txtFight.text="战斗力："+PropertyUtil.calculateProFight(this._fightVo);for(var h=1e3*this._type,r=0;r<t.length;r++)s=t[r],s.type==this._type&&(h=1e3*this._type+s.level);if(e=ShadowModel.getInstance().getEquipVo(h+1))if(this.item_next.data=GoodsListProxy.getInstance().getGoodsInfoByType(e.show),i="",this._fightVo=new PropertyVO,e&&(e.hp>0&&(i="\n生命+"+e.hp,this._fightVo.setValue(1,e.hp)),e.att>0&&(i+="\n攻击+"+e.att,this._fightVo.setValue(3,e.att)),e.att_def>0&&(i+="\n物防+"+e.att_def,this._fightVo.setValue(4,e.att_def)),e.magic_def>0&&(i+="\n魔防+"+e.magic_def,this._fightVo.setValue(5,e.magic_def)),this.txtFight2.text="战斗力："+PropertyUtil.calculateProFight(this._fightVo)),this.txtPro2.text=i,e.con_item&&e.con_item.length>0){var l=GoodsListProxy.getInstance().findGoodNumber(e.con_item[0].info.template_id),d=e.con_item[0].num;this.txtCount.htmlText=ColorUtil.getColorHtmlStr(l+"/"+d,d>l?ColorUtil.COLOR_RED:ColorUtil.COLOR_GREEN),this.btnGet.enabled=l>=d}else this.txtCount.text="0"},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(ShadowEvtName.CCMD18030_UPDATE,this.updateData,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.item_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap,this),this.item_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap2,this),this.item_3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap3,this),this.item_4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap4,this),this.itemLock_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap,this),this.itemLock_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap2,this),this.itemLock_3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap3,this),this.itemLock_4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap4,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null),this.imageTitle&&(this.imageTitle.dispose(),this.imageTitle=null)},t}(BaseView);egret.registerClass(ShadowEquipView,"ShadowEquipView");var ShadowJieView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/shadow/ShadowJieSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.imageTitle=new PicLoader,this.imageTitle.x=485,this.imageTitle.y=80,this.addChildAt(this.imageTitle,0),this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/shadow/shadowBg_lv.png"),this.addChildAt(this.imageBg,0),this.item=new PicLoader,this.item.x=10,this.item.y=40,this.itemGroup.addChild(this.item),this.bar.labelDisplay.visible=!1,this.effectGroup.touchChildren=!1,this.effectGroup.touchEnabled=!1,this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.addGlobalEventListener(ShadowEvtName.CCMD18010_UPDATE,this.updateData,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnGetAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetAuto,this),this.btnStop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStop,this),this.btn_jihuo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJihuo,this),this.btn_tiaozhan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTiaozhan,this),this.itemGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap,this),this.addGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateInfo,this),this.txtlink.htmlText="<u>获得途径</u>",this.txtlink.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTxtLink,this)},n.onTxtLink=function(){var e=new ParamEvent(EventName.OPEN_GETMATERIAL_BUY_WINDOW);e.data={typeId:13060001,type:GetMaterialItem.OPEN_SHADOW,linkStrArr:["光环秘藏"]},this.dispatchGlobalEvent(e)},n.onItemTap=function(){this._data.adv_lv>=3&&this._levelVo&&this.dispatchGlobalEvent(new ParamEvent(ShadowEvtName.OPEN_SHADOW_TIPS,this._levelVo))},n.onGet=function(){var e=this;this.btnGet.enabled=!1,clearTimeout(this._timeIndex),this._timeIndex=setTimeout2(function(){e.dispatchGlobalEvent(new ParamEvent(ShadowEvtName.CCMD18012,e._playerVo.parnerID))},200)},n.onGetAuto=function(){this.btnGet.enabled=!1,this.btnGetAuto.visible=!1,this.btnStop.visible=!0,this._isAuto=!0,this.onGet()},n.onStop=function(){this._isAuto=!1,this.btnGetAuto.visible=!0,this.btnStop.visible=!1},n.onJihuo=function(){this.dispatchGlobalEvent(new ParamEvent(ShadowEvtName.CCMD18011,this._playerVo.parnerID))},n.onTiaozhan=function(){this.dispatchGlobalEvent(new ParamEvent(ShadowEvtName.CCMD18013,this._playerVo.parnerID))},n.updateData=function(e){this._data=e.data,this._playerVo.parnerID==this._data.partner_id&&this.updateInfo()},n.updateInfo=function(){this.btnGet.visible=!1,this.btnGetAuto.visible=!1,this.btn_jihuo.visible=!1,this.btn_tiaozhan.visible=!1,this.starGroup.visible=!1,this.lockGroup.visible=!1,this.txtTips.visible=!1,0==this._data.adv_lv?(this.starGroup.visible=!0,this.btn_jihuo.visible=!0):10==this._data.star?(this.btn_tiaozhan.visible=!0,this.txtTips.visible=!0,this.lockGroup.visible=!0,this.imageJiantou.visible=!0,this._lockBg||(this._lockBg=new CustomImage,this._lockBg.source="share_black2",this._lockBg.width=520,this._lockBg.height=395,this.lockGroup.addChild(this._lockBg)),this._lock||(this._lock=new PicLoader,this._lock.load("resource/assets/icon/shadow/shadowLock.png"),this.lockGroup.addChild(this._lock))):(this.starGroup.visible=!0,this.btnGet.visible=!0,this.btnGetAuto.visible=!0,this.imageJiantou.visible=!0);var e=this._data.adv_lv;if(e>0){this._fightVo||(this._fightVo=new PropertyVO);var t=ShadowModel.getInstance().getStarVo(e,this._data.star),i="生命+"+t.hp;if(this._fightVo.setValue(1,t.hp),i+="\n攻击+"+t.att,this._fightVo.setValue(3,t.att),i+="\n物防+"+t.att_def,this._fightVo.setValue(4,t.att_def),i+="\n魔防+"+t.magic_def,this._fightVo.setValue(5,t.magic_def),this.txtPro.text=i,this.numFight.text=PropertyUtil.calculateProFight(this._fightVo).toString(),10==this._data.star?(this.bar.maximum=100,this.bar.value=100,null==this._effect2&&(this._effect2=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("bosschu"),270,630,this.effectGroup,80,!0))):(this.bar.maximum=t.luck_limit,this.bar.value=this._data.exp,this._effect2&&(this._effect2.dispose(),this._effect2=null)),t.con_item&&t.con_item.length>0){var n=GoodsListProxy.getInstance().findGoodNumber(t.con_item[0].info.template_id),s=t.con_item[0].num;this.txtCount.htmlText=ColorUtil.getColorHtmlStr(n+"/"+s,s>n?ColorUtil.COLOR_RED:ColorUtil.COLOR_GREEN),this.btnGet.enabled=n>=s,this.btnGetAuto.enabled=n>=s}else this.txtCount.text="0";var a=ShadowModel.getInstance().getStarVo(e,this._data.star+1);a||(a=ShadowModel.getInstance().getStarVo(e+1,0)),a?(i="生命+"+a.hp,i+="\n攻击+"+a.att,i+="\n物防+"+a.att_def,i+="\n魔防+"+a.magic_def):this.txtPro2.text=i,this._levelVo=ShadowModel.getInstance().getLevelVo(e),this.item.load("resource/assets/icon/shadow/shadowSkill_"+this._levelVo.show_pic+".png")}this.lock_skill.visible=this._data.adv_lv<3,this.itemGroup.addChild(this.lock_skill);for(var o,r=1;11>r;r++)o=this["star_"+r],r<=this._data.star?o.source="shadowStar2":o.source="shadowStar";var h=e>0?e:1;this._effect&&(this._effect.dispose(),this._effect=null),this._effect=EffectManager.getInstance().showEffect(UrlUtil.getFigureRingURL(h),290,220,this.effectGroup,80,!0),this.imageTitle.load("resource/assets/icon/shadow/shadowlvTitle_"+h+".png"),this._isAuto&&this.btnGet.visible&&this.btnGet.enabled?this.onGet():this._isAuto=!1},n.setPlayerVo=function(e){this._playerVo=e},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(ShadowEvtName.CCMD18010_UPDATE,this.updateData,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnGetAuto.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetAuto,this),this.btnStop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStop,this),this.btn_jihuo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onJihuo,this),this.btn_tiaozhan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTiaozhan,this),this.itemGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap,this),this.txtlink.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTxtLink,this),this.removeGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updateInfo,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null),this.imageTitle&&(this.imageTitle.dispose(),this.imageTitle=null),this.item&&(this.item.dispose(),this.item=null),this._lockBg&&(this._lockBg.dispose(),this._lockBg=null),this._lock&&(this._lock.dispose(),this._lock=null),this._effect&&(this._effect.dispose(),this._effect=null),this._effect2&&(this._effect2.dispose(),this._effect2=null)},t}(BaseView);egret.registerClass(ShadowJieView,"ShadowJieView");var ShadowLevelView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/shadow/ShadowLevelSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.addGlobalEventListener(ShadowEvtName.CCMD18000_UPDATE,this.updateData,this),this.addGlobalEventListener(ShadowEvtName.CCMD18001_UPDATE,this.updateDataBaoji,this),this.addGlobalEventListener(ShadowEvtName.CCMD18010_UPDATE,this.updateDataJie,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnEquip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEquip,this),this.btnEquip.showRedDot=ShadowModel.getInstance().isEquipUpgradeAll,this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/shadow/shadowBg_lv.png"),this.addChildAt(this.imageBg,0),this.imageTitle=new PicLoader,this.imageTitle.x=485,this.imageTitle.y=80,this.addChild(this.imageTitle),this.bar.maximum=10,this.bar.labelDisplay.visible=!1,this.effectGroup.touchChildren=!1,this.effectGroup.touchEnabled=!1},n.setPlayerVo=function(e){this._playerVo=e},n.onGet=function(){RoleModel.getInstance().CheckCoin(Number(this.txtCost.text))&&(this.btnGet.enabled=!1,this.dispatchGlobalEvent(new ParamEvent(ShadowEvtName.CCMD18001,this._playerVo.parnerID)))},n.onEquip=function(){this._data_jie.adv_lv>0&&this.dispatchGlobalEvent(new ParamEvent(ShadowEvtName.OPEN_SHADOW_EQUIP_VIEW))},n.updateData=function(e){this._data=e.data;var t=this._data.level;this.txtLv.text="光环Lv."+Math.floor(t/10),this.bar.value=t%10;var i=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18011).value);this._data.last_time>0&&(TimerManager.getInstance().remove(1e3,this.onShowTime,this),TimerManager.getInstance().add(1e3,this.onShowTime,this)),this.txtCount.text="剩余次数："+this._data.num+"/"+i,this.txtCost.text=(Math.ceil((t+1)/10)*Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18006).value)).toString(),this.btnGet.enabled=this._data.num>0,this.btnGet.enabled?null==this._effectBtn&&(this._effectBtn=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("anniu"),287,716,this.effectGroup,80,!0)):this._effectBtn&&(this._effectBtn.dispose(),this._effectBtn=null),this._fightVo||(this._fightVo=new PropertyVO);var n=t*Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18007).value),s="生命+"+n;this._fightVo.setValue(1,n),n=t*Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18008).value),s+="\n攻击+"+n,this._fightVo.setValue(3,n),n=t*Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18009).value),s+="\n物防+"+n,this._fightVo.setValue(4,n),n=t*Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18010).value),s+="\n魔防+"+n,this._fightVo.setValue(5,n),this.txtPro.text=s,this.numFight.text=PropertyUtil.calculateProFight(this._fightVo).toString();var a=t+1;s="生命+"+a*Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18007).value),s+="\n攻击+"+a*Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18008).value),s+="\n物防+"+a*Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18009).value),s+="\n魔防+"+a*Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18010).value),this.txtPro2.text=s},n.updateDataJie=function(e){this._data_jie=e.data,this.btnEquip.visible=this._data_jie.adv_lv>0;var t=this._data_jie.adv_lv>0?this._data_jie.adv_lv:1;this._effect&&(this._effect.dispose(),this._effect=null),this._effect=EffectManager.getInstance().showEffect(UrlUtil.getFigureRingURL(t),290,220,this.effectGroup,80,!0),this.imageTitle.load("resource/assets/icon/shadow/shadowlvTitle_"+t+".png")},n.updateDataBaoji=function(e){var t=e.data;t.flag>0&&(this._effect2&&(this._effect2.dispose(),this._effect2=null),this._effect2||(this._effect2=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("baoji"),300,230,this.effectGroup,150)))},n.onShowTime=function(){this._data.last_time--;var e=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_18011).value);this._data.last_time>0?this.txtCount.htmlText="剩余次数："+this._data.num+"/"+e+"("+ColorUtil.getColorHtmlStr(TimeUtil.getTime(this._data.last_time),ColorUtil.COLOR_GREEN)+")":(this.txtCount.text=this._data.num+"/"+e,TimerManager.getInstance().remove(1e3,this.onShowTime,this))},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(1e3,this.onShowTime,this),this.removeGlobalEventListener(ShadowEvtName.CCMD18000_UPDATE,this.updateData,this),this.removeGlobalEventListener(ShadowEvtName.CCMD18001_UPDATE,this.updateDataBaoji,this),this.removeGlobalEventListener(ShadowEvtName.CCMD18010_UPDATE,this.updateDataJie,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnEquip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEquip,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null),this.imageTitle&&(this.imageTitle.dispose(),this.imageTitle=null),this._effect&&(this._effect.dispose(),this._effect=null),this._effect2&&(this._effect2.dispose(),this._effect2=null),this._effectBtn&&(this._effectBtn.dispose(),this._effectBtn=null)},t}(BaseView);egret.registerClass(ShadowLevelView,"ShadowLevelView");var ShadowShopView=function(e){function t(){e.call(this),this._shopid=1001,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/shadow/ShadowShopSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/shadow/shadowShopBg.png"),this.addChildAt(this.imageBg,0),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnGet2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet2,this),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this);var e=SingleModel.getInstance().getSingVO(SingleModel.KEY_18014).itemArr,t=Number(e[0]),i=Number(e[1]);this._goodsinfo=GoodsListProxy.getInstance().getGoodsInfoByType(t),this.item_1.data=this._goodsinfo,this.item_1.num=i,e=SingleModel.getInstance().getSingVO(SingleModel.KEY_18015).itemArr,t=Number(e[0]),i=Number(e[1]),this.item_3.data=GoodsListProxy.getInstance().getGoodsInfoByType(t),this.item_3.num=i,t=Number(e[2]),i=Number(e[3]),this.item_4.data=GoodsListProxy.getInstance().getGoodsInfoByType(t),this.item_4.num=i,this.updateDaily()},n.onGet=function(){var e=this;RoleModel.getInstance().CheckGold(2e3)&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"",content:"是否花费2000元宝购买特惠礼包",func:function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MallEvtName.MALL_CCMD11004,{id:e._shopid,num:1}))}}))},n.onGet2=function(){var e=MallModel.getInstance().getRmbShopVo(MallModel.MALL_RMB_1);e&&(ConfigManager.isTencent()?ConfigManager.isIOS()?QQManager.getInstance().QQBuyGoods(QQManager.SHADOW_IOS,e.template_id):QQManager.getInstance().QQBuyGoods(QQManager.SHADOW_ANDROID,e.template_id):PhpHttpStatisticsManager.requestChargeOrder(1,e.rmb,7,"RMB商城",1,e.template_id))},n.updateDaily=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_3,this._shopid);this.btnGet.visible=0==e,e>0&&(this.lingqu||(this.lingqu=new PicLoader,this.lingqu.load("resource/assets/icon/mall/mallIcon_over.png"),this.lingqu.x=this.btnGet.x+40,this.lingqu.y=this.btnGet.y+10),this.addChild(this.lingqu));var t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_40,MallModel.MALL_RMB_1);this.btnGet2.visible=0==t,t>0&&(this.lingqu2||(this.lingqu2=new PicLoader,this.lingqu2.load("resource/assets/icon/mall/mallIcon_over.png"),this.lingqu2.x=this.btnGet2.x+40,this.lingqu2.y=this.btnGet2.y+10),this.addChild(this.lingqu2))},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnGet2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet2,this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null),this.lingqu&&(this.lingqu.dispose(),this.lingqu=null),this.lingqu2&&(this.lingqu2.dispose(),this.lingqu2=null)},t}(BaseView);egret.registerClass(ShadowShopView,"ShadowShopView");var ShadowTipWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/shadow/ShadowTipSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseWin,this),this.item=new PicLoader,this.item.x=138,this.item.y=51,this.addChild(this.item)},n.setData=function(e){this.txtDes.htmlText=e.show_word,this.item.load("resource/assets/icon/shadow/shadowSkill_"+e.show_pic+".png")},n.onCloseWin=function(){this.isPop=!1},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=GameContent.stageHeight-this.height>>1},n.dispose=function(){e.prototype.dispose.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseWin,this),this.item&&(this.item.dispose(),this.item=null)},t}(LayeroutWindow);egret.registerClass(ShadowTipWindow,"ShadowTipWindow");var ShadowWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/shadow/ShadowWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_shadow"),this.heroListTopBox=new HeroListTopBox,this.topContainer.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0,this.tabBar.dataProvider=new eui.ArrayCollection(["等级","品阶","秘藏","特惠"]),this._playerVo=this.heroListTopBox.roleListData[0],this.setSelectIndex()},n.onBoxTap=function(e){e.data&&(this._playerVo=e.data,this._isOpenEquip?this.openEquipView():this.setSelectIndex(this.tabBar.selectedIndex))},n.onBarItemTap=function(e){this.setSelectIndex(this.tabBar.selectedIndex)},n.onCloseBtnClick=function(e){this._isOpenEquip?(this._isOpenEquip=!1,this._equip&&(this._equip.parent&&this._equip.parent.removeChild(this._equip),this._equip.dispose(),this._equip=null),this.setSelectIndex()):this.isPop=!1},n.onHelp=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.SHADOW))},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.addGlobalEventListener(ShadowEvtName.OPEN_SHADOW_EQUIP_VIEW,this.openEquipView,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this.addGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updatePack,this),this.addGlobalEventListener(ShadowEvtName.CCMD18010_UPDATE,this.updatePack,this),this.addGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2020,this.onShowRedDots,this),this.tabBar.validateNow(),this.onShowRedDots(),this.updatePack()},n.dispose=function(){e.prototype.dispose.call(this),this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null,this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.removeGlobalEventListener(ShadowEvtName.OPEN_SHADOW_EQUIP_VIEW,this.openEquipView,this),this.removeGlobalEventListener(EventName.RED_DOTS+RedDotsModel.ID_2020,this.onShowRedDots,this),this.removeGlobalEventListener(ShadowEvtName.CCMD18010_UPDATE,this.updatePack,this),this.removeGlobalEventListener(EventName.UPDATE_GOODSITEM,this.updatePack,this),this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this._view&&(this._view.parent&&this._view.parent.removeChild(this._view),this._view.dispose(),this._view=null),this._lv&&(this._lv.parent&&this._lv.parent.removeChild(this._lv),this._lv.dispose(),this._lv=null),this._jie&&(this._jie.parent&&this._jie.parent.removeChild(this._jie),this._jie.dispose(),this._jie=null),this._equip&&(this._equip.parent&&this._equip.parent.removeChild(this._equip),this._equip.dispose(),this._equip=null),this._zhuan&&(this._zhuan.parent&&this._zhuan.parent.removeChild(this._zhuan),this._zhuan.dispose(),this._zhuan=null),this._shop&&(this._shop.parent&&this._shop.parent.removeChild(this._shop),this._shop.dispose(),this._shop=null)},n.openEquipView=function(){this._isOpenEquip=!0,this._lv&&(this._lv.parent&&this._lv.parent.removeChild(this._lv),this._lv.dispose(),this._lv=null),this._equip||(this._equip=new ShadowEquipView),this._equip.setPlayerVo(this._playerVo),this.viewContainer.addChild(this._equip),this.dispatchGlobalEvent(new ParamEvent(ShadowEvtName.CCMD18030,this._playerVo.parnerID)),this.tabBar.visible=!1,this.onShowRedDotsBox()},n.setSelectIndex=function(e){switch(void 0===e&&(e=0),this._isOpenEquip=!1,this.tabBar.visible=!0,this.tabBar.selectedIndex=e,this.topContainer.visible=!0,this._lv&&0!=e&&(this._lv.parent&&this._lv.parent.removeChild(this._lv),this._lv.dispose(),this._lv=null),this._jie&&1!=e&&(this._jie.parent&&this._jie.parent.removeChild(this._jie),this._jie.dispose(),this._jie=null),this._zhuan&&2!=e&&(this._zhuan.parent&&this._zhuan.parent.removeChild(this._zhuan),this._zhuan.dispose(),this._zhuan=null),this._shop&&3!=e&&(this._shop.parent&&this._shop.parent.removeChild(this._shop),this._shop.dispose(),this._shop=null),e){case 0:this._lv||(this._lv=new ShadowLevelView),this._lv.setPlayerVo(this._playerVo),this._view=this._lv,this.dispatchGlobalEvent(new ParamEvent(ShadowEvtName.CCMD18000,this._playerVo.parnerID)),this.dispatchGlobalEvent(new ParamEvent(ShadowEvtName.CCMD18010,this._playerVo.parnerID));break;case 1:this._jie||(this._jie=new ShadowJieView),this._jie.setPlayerVo(this._playerVo),this._view=this._jie,this.dispatchGlobalEvent(new ParamEvent(ShadowEvtName.CCMD18010,this._playerVo.parnerID));break;case 2:this._zhuan||(this._zhuan=new ShadowZhuanView),this._view=this._zhuan,this.topContainer.visible=!1;break;case 3:this._shop||(this._shop=new ShadowShopView),this._view=this._shop,this.topContainer.visible=!1}this.viewContainer.addChild(this._view),this.onShowRedDotsBox()},n.onShowRedDotsBox=function(){switch(this.tabBar.selectedIndex){case 0:this.heroListTopBox.updateShadowLvRedDots();break;case 1:this.heroListTopBox.updateShadowJieRedDots()}this._equip&&this._equip.parent&&this.heroListTopBox.updateShadowEquipRedDots()},n.onShowRedDots=function(){RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2020)||ShadowModel.getInstance().isEquipUpgradeAll?this.tabBar.getChildAt(0).showRedDot=!0:this.tabBar.getChildAt(0).showRedDot=ShadowModel.getInstance().isLvUpgradeAll},n.updatePack=function(){this.onShowRedDotsBox(),this.tabBar.getChildAt(1).showRedDot=ShadowModel.getInstance().isJieUpgradeAll},t}(LayeroutWindow);egret.registerClass(ShadowWindow,"ShadowWindow");var ShadowZhuanView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/shadow/ShadowZhuanSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.addGlobalEventListener(ShadowEvtName.CCMD18020_UPDATE,this.updateData,this),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.imageBg=new PicLoader,this.imageBg.x=-276,this.imageBg.y=-273,this.imageBg.load("resource/assets/icon/shadow/shadow_zhuanBg.png"),this.zhuanBg.addChildAt(this.imageBg,0),this.imageBg2=new PicLoader,this.imageBg2.load("resource/assets/icon/shadow/shadowBg.png"),this.addChildAt(this.imageBg2,0),this._imageProMask=new egret.Rectangle(0,0,0,40),this.bar.mask=this._imageProMask;var e=[16010012,16010013,16010014,16010015,16010016];this._boxPointArr=[0,75,185,295,407,520],this._boxArr=[],this._boxArr2=[];for(var t,i,n=0;5>n;n++)t=new PicLoader,t.load(UrlUtil.getGoodsImageURL(e[n])),t.x=this._boxPointArr[n+1]-40,t.y=625,this.addChild(t),this._boxArr.push(t),i=new CustomImage,i.source="share_geted",i.scaleX=.7,i.scaleY=.7,i.x=t.x-10,i.y=t.y,this.addChild(i),this._boxArr2.push(i);this.init()},n.updateDaily=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_35);this._vo=ShadowModel.getInstance().getZhuanCost(e+1),this._vo&&(this._vo.con_coin>0?(this.imageCost.source="image_copper",this.txtCost.text=this._vo.con_coin.toString()):this._vo.con_gold>0&&(this.imageCost.source="image_gold",this.txtCost.text=this._vo.con_gold.toString())),e>4?(this.btnGet.enabled=!1,this._imageProMask.width=578,this.imageCost.visible=!1,this.txtCost.text="今天次数不足",this.txtCost.x=236):(this.btnGet.enabled=!0,this._imageProMask.width=this._boxPointArr[e],this.imageCost.visible=!0,this.txtCost.x=292),this.bar.mask=this._imageProMask;for(var t,i=0;i<this._boxArr2.length;i++)t=this._boxArr2[i],e>=i+1?t.visible=!0:t.visible=!1},n.init=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_35);e>4?(e=4,this.btnGet.enabled=!1):this.btnGet.enabled=!0,this._arrVo=ShadowModel.getInstance().getNumArr(e+1);for(var t,i=0;i<this._arrVo.length;i++)t=this["txt_"+i],t.addMiaoBian(),t.text="×"+this._arrVo[i].add_item[0].num;this._arrNumVo=ShadowModel.getInstance().getMuArr(e+1);for(var n,s=0;s<this._arrNumVo.length;s++)n=this["txtbei_"+s],n.text=(this._arrNumVo[s]["double"]/1e4).toString();this.image_select.visible=!1,this.updateDaily()},n.onGet=function(){var e=this,t="";this._vo&&this._vo.con_coin>0?RoleModel.getInstance().CheckCoin(this._vo.con_coin)&&(t=StringUtil.substitute("是否花费{0}金币开启秘藏",this._vo.con_coin)):this._vo&&this._vo.con_gold>0&&RoleModel.getInstance().CheckGold(this._vo.con_gold)&&(t=StringUtil.substitute("是否花费{0}元宝开启秘藏",this._vo.con_gold)),""!=t&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"",content:t,func:function(){e.start()}}))},n.start=function(){var e=this;this.btnGet.enabled=!1,this.onRotation(3),clearTimeout(this._timeIndex),this._timeIndex=setTimeout2(function(){e.dispatchGlobalEvent(new ParamEvent(ShadowEvtName.CCMD18020))},2e3)},n.updateData=function(e){this._data=e.data;for(var t=0;t<this._arrVo.length;t++)if(this._arrVo[t].template_id==this._data.cfg_id){this.onComplete(t);for(var i=[],n=this._arrVo[t].add_item[0].num,s=0;n>s;s++)i.push(this._arrVo[t].add_item[0].info.pic);AccessGoodFlyEffectManager.getInstance().flyArray(i);break}},n.onRotation=function(e){this.RotationLong=Tools.getRotationLong(8,-.5,60,60,e,.5),this.zhuanBg.rotation=0,egret.Tween.get(this.zhuanBg).to({rotation:this.RotationLong},3e4),this.onEffect()},n.onComplete=function(e){var t=this;TimerManager.getInstance().remove(100,this.onEffectComplete,this),egret.Tween.removeTweens(this.zhuanBg),this.RotationLong=Tools.getRotationLong(8,-.5,1,1,e,.5),this.zhuanBg.rotation=this.RotationLong;for(var i,n=0;n<this._arrNumVo.length;n++)i=this["txtbeiBg_"+n],this._arrNumVo[n].template_id==this._data.double_cfg_id&&(this.image_select.x=i.x-18);clearTimeout(this._timeIndex),this._timeIndex=setTimeout2(function(){t.init()},1e3)},n.onEffect=function(){this.image_select.visible=!0,this._index=0,TimerManager.getInstance().remove(100,this.onEffectComplete,this),TimerManager.getInstance().add(100,this.onEffectComplete,this)
},n.onEffectComplete=function(){this.image_select.x=this["txtbeiBg_"+this._index].x-18,this._index>=3?this._index=0:this._index++},n.dispose=function(){if(e.prototype.dispose.call(this),this.removeGlobalEventListener(ShadowEvtName.CCMD18020_UPDATE,this.updateData,this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.imageBg&&(this.imageBg.dispose(),this.imageBg=null),this.imageBg2&&(this.imageBg2.dispose(),this.imageBg2=null),this._boxArr){for(var t,i,n=0;n<this._boxArr.length;n++)t=this._boxArr[n],t.parent&&t.parent.removeChild(t),t.dispose(),t=null,i=this._boxArr2[n],i.parent&&i.parent.removeChild(i),i.dispose(),i=null;this._boxArr=null,this._boxArr2=null}egret.Tween.removeTweens(this.zhuanBg)},t}(BaseView);egret.registerClass(ShadowZhuanView,"ShadowZhuanView");var ShareNewWindow=function(e){function t(){e.call(this),this._id=0,this._list=[t.FANLI_LOGIN,t.WILD_BOSS_CD,t.HOME_BOSS_CD,t.SPEED],this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/shareNew/ShareNewWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this._itemCach=new Array,this._btnShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShare,this),this._btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},n.clearItems=function(){for(var e=0;e<this._itemCach.length;e++){var t=this._itemCach[e];t&&t.parent&&t.parent.removeChild(t)}},n.setCenter=function(){this.y=GameContent.stageHeight-this.height>>1},n.setData=function(e){this._id=e,this._content&&this._content.load("resource/assets/icon/share/ShareNew_content_"+e+".png")},n.onShare=function(e){var i=ShareModel.getInstance().shareOrderID;if(i>0)window.shareTriggerOfOrder();else if(this._list.indexOf(this._id)>-1)switch(this._id){case t.FANLI_LOGIN:shareForFanliLoginInGame(0);break;case t.WILD_BOSS_CD:shareForWildBossInGame(0);break;case t.HOME_BOSS_CD:shareForBossHomeInGame(0);break;case t.SPEED:shareForSpeedFreeInGame(0)}else window.shareTrigger();this.isPop=!1},n.onClose=function(e){this.isPop=!1},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),null==this._content&&(this._content=new PicLoader,this.contentGroup.addChild(this._content)),this._content.load("resource/assets/icon/share/ShareNew_content_"+this._id+".png");var i,n=ShareModel.getInstance().shareOrderID;if(0==n)i=this._id==t.FANLI_LOGIN?[]:SingleModel.getInstance().getSingVO(SingleModel.KEY_22102).itemArr;else{var s=OrderGiftModel.getInstance().getOrderGiftRewardVo(n);s.show_item&&(i=s.show_item.match(/\d+/g))}for(var a,o,r,h=0,l=0;l<i.length;l+=2)a=parseInt(i[l]),o=parseInt(i[l+1]),r=new GoodsItemSmall,r.data=GoodsListProxy.getInstance().getGoodsInfoByType(a),r.num=o,r.x=120*h,this._container.addChild(r),h++},n.dispose=function(){e.prototype.dispose.call(this);for(var t=0;t<this._itemCach.length;t++){var i=this._itemCach[t];i&&(i.dispose(),i=null)}},t.FANLI_LOGIN=7,t.WILD_BOSS_CD=8,t.HOME_BOSS_CD=9,t.SPEED=10,t}(LayeroutWindow);egret.registerClass(ShareNewWindow,"ShareNewWindow");var ShopHelpView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/shop/ShopHelpViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._imgBg=new PicLoader,this._imgBg.load("resource/assets/icon/shop/shopBg.jpg"),this.addChildAt(this._imgBg,0),this.txtTime.text=SingleModel.getInstance().getSingVO(SingleModel.KEY_22501).desc},n.dispose=function(){e.prototype.dispose.call(this),this._imgBg&&(this._imgBg.dispose(),this._imgBg=null)},t}(BaseView);egret.registerClass(ShopHelpView,"ShopHelpView");var ShopItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/shop/ShopItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this)},n.onBuy=function(){RoleModel.getInstance().CheckGold(this._sale)&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ShopEvtName.CCMD22520,this._itemData.shop_id))},n.dataChanged=function(){this._itemData=this.data.info;var e=ShopModel.getInstance().getShopVoById(this._itemData.cfg_id),t=GoodsListProxy.getInstance().getGoodsInfoByType(e.template_id),i="（"+(t.req_round>0?t.req_round+"转":t.req_lv+"级")+"）";this.itemName.htmlText="<font color='"+ColorUtil.getGoodColor(t.quality-1)+"'>"+t.name+"</font>"+i,this.nameBg.source="mallNameBg_"+(t.quality-1),this._sale=e.price+e.tax,this.txtCost.text=this._sale.toString(),this.txtSkill.text=AwakeModel.getInstance().getAwakeSkillVO(this._itemData.rand_awake).name},t}(eui.ItemRenderer);egret.registerClass(ShopItem,"ShopItem");var ShopSelfItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/shop/ShopSelfItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.item.showLv(!1)},n.dataChanged=function(){this._itemData=this.data;var e=ShopModel.getInstance().getShopVoById(this._itemData.cfg_id),t=GoodsListProxy.getInstance().getGoodsInfoByType(e.template_id),i="（"+(t.req_round>0?t.req_round+"转":t.req_lv+"级")+"）";this.itemName.htmlText="<font color='"+ColorUtil.getGoodColor(t.quality-1)+"'>"+t.name+"</font>"+i,this.nameBg.source="mallNameBg_"+(t.quality-1),this._sale=e.price+e.tax,this.txtCost.text=this._sale.toString(),this.item.data=t},t}(eui.ItemRenderer);egret.registerClass(ShopSelfItem,"ShopSelfItem");var ShopSelfView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/shop/ShopSelfViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.addGlobalEventListener(ShopEvtName.CCMD22501_UPDATE,this.updateData,this),this.addGlobalEventListener(ShopEvtName.CCMD22520_UPDATE,this.delData,this)},n.updateData=function(e){var t=e.data;this._dataList?this._dataList.push(t[0]):this._dataList=t,this.updateList()},n.delData=function(e){if(this._dataList){for(var t,i=e.data,n=0;n<this._dataList.length;n++)if(t=this._dataList[n],t.shop_id==i){this._dataList.splice(n,1);break}this.updateList()}},n.updateList=function(){for(var e=new eui.ArrayCollection,t=0;t<this._dataList.length;t++)e.addItem(this._dataList[t]);this.itemList.dataProvider=e},n.onGet=function(){var e=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_22502).value),t=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_22501);t>=e?Message.show("不能同时上架"+e+"个商品"):this.dispatchGlobalEvent(new ParamEvent(ShopEvtName.OPEN_SHOP_SELL_VIEW))},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.removeGlobalEventListener(ShopEvtName.CCMD22501_UPDATE,this.updateData,this),this.removeGlobalEventListener(ShopEvtName.CCMD22520_UPDATE,this.delData,this)},t}(BaseView);egret.registerClass(ShopSelfView,"ShopSelfView");var ShopSellItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/shop/ShopSellItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.item.showLv(!1),this.item.showTips=!1},n.onGet=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ShopEvtName.SHOP_SELL_ITEM_CLICK,this.item.data))},n.dataChanged=function(){this.item.data=this.data},n.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.item.dispose(),this.item=null},t}(eui.ItemRenderer);egret.registerClass(ShopSellItem,"ShopSellItem");var ShopSellWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/shop/ShopSellWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_shop_sell");var t=new eui.TileLayout;this.itemList.layout=t,t.horizontalGap=15,t.verticalGap=20;for(var i=GoodsListProxy.getInstance().getEquipsListBySubtypeList(EquipmentVO.AWAKELEQUIP_GRID),n=new eui.ArrayCollection,s=0;s<i.length;s++)ShopModel.getInstance().getShopVoById(i[s].template_id)&&n.addItem(i[s]);this.itemList.dataProvider=n},n.onItemClick=function(e){var t=e.data;this.item.data=t;var i="（"+(t.req_round>0?t.req_round+"转":t.req_lv+"级")+"）";this.itemName.htmlText="<font color='"+ColorUtil.getGoodColor(t.quality-1)+"'>"+t.name+"</font>"+i,this.nameBg.source="mallNameBg_"+(t.quality-1);var n=ShopModel.getInstance().getShopVoById(t.template_id),s=n.price+n.tax;this.txtCost.text=s.toString()},n.onGet=function(){this.item.data?(this.dispatchGlobalEvent(new ParamEvent(ShopEvtName.CCMD22510,this.item.data.item_id)),this.isPop=!1):Message.show("请选择物品")},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.addGlobalEventListener(ShopEvtName.SHOP_SELL_ITEM_CLICK,this.onItemClick,this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.removeGlobalEventListener(ShopEvtName.SHOP_SELL_ITEM_CLICK,this.onItemClick,this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.item&&(this.item.dispose(),this.item=null);for(var t=0;t<this.itemList.numChildren;t++){var i=this.itemList.getChildAt(t);i&&(i.dispose(),i=null)}},t}(LayeroutWindow);egret.registerClass(ShopSellWindow,"ShopSellWindow");var ShopView=function(e){function t(){e.call(this),this._isOrder=!1,this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/shop/ShopViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addGlobalEventListener(ShopEvtName.CCMD22500_UPDATE,this.updateData,this),this.addGlobalEventListener(ShopEvtName.CCMD22520_UPDATE,this.delData,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEGOLD,this.updateGoldHandler,this),this.btnOrder.addEventListener(egret.TouchEvent.TOUCH_TAP,this.orderList,this),this.combobox.addEventListener(CustomCombobox.CHANGE,this.onChange,this),this.combobox.type=CustomCombobox.UP,this.combobox.dataProvider=[{label:"武器",data:40},{label:"衣服",data:41},{label:"帽子",data:42},{label:"鞋子",data:43},{label:"护腕",data:44},{label:"腰带",data:45},{label:"项链",data:46},{label:"戒指",data:47}],this.updateGoldHandler()},n.selectedIndex=function(e){void 0===e&&(e=0),this.combobox.selectedIndex=e},n.onChange=function(e){this.dispatchGlobalEvent(new ParamEvent(ShopEvtName.CCMD22500,{type:10,sub_type:Number(e.data)}))},n.updateGoldHandler=function(){this.txtCost.text=RoleModel.getInstance().getRoleInfo().getGold().toString()},n.updateData=function(e){this._dataList=e.data,this.updateList()},n.delData=function(e){if(this._dataList){for(var t,i=e.data,n=0;n<this._dataList.length;n++)if(t=this._dataList[n],t.shop_id==i){this._dataList.splice(n,1);break}this.updateList()}},n.orderList=function(){this._isOrder=!this._isOrder,this.btnOrder.label=this._isOrder?"等级升序":"等级降序",this.updateList()},n.updateList=function(){var e,t=[],i=[];for(var n in this._dataList)if(this._dataList.hasOwnProperty(n)){e=this._dataList[n];var s=ShopModel.getInstance().getShopVoById(e.cfg_id),a=GoodsListProxy.getInstance().getGoodsInfoByType(s.template_id);a.req_round>0?t.push({info:e,lv:a.req_round}):i.push({info:e,lv:a.req_lv})}var o;this._isOrder?(t.sort(function(e,t){return e.lv>t.lv?1:-1}),i.sort(function(e,t){return e.lv>t.lv?1:-1}),o=i.concat(t)):(t.sort(function(e,t){return e.lv>t.lv?-1:1}),i.sort(function(e,t){return e.lv>t.lv?-1:1}),o=t.concat(i));for(var r=new eui.ArrayCollection,h=0;h<o.length;h++)r.addItem(o[h]);this.itemList.dataProvider=r},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(ShopEvtName.CCMD22500_UPDATE,this.updateData,this),this.removeGlobalEventListener(ShopEvtName.CCMD22520_UPDATE,this.delData,this),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGEGOLD,this.updateGoldHandler,this),this.btnOrder.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.orderList,this),this.combobox.removeEventListener(CustomCombobox.CHANGE,this.onChange,this),this.combobox.dispose(),this.combobox=null},t}(BaseView);egret.registerClass(ShopView,"ShopView");var ShopWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/shop/ShopWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.FUBEN,this.tabBar.dataProvider=new eui.ArrayCollection(["赶集说明","装备拍卖","我的商品"]),this._isInit||(this._isInit=!0,this.setSelectIndex())},n.onBarItemTap=function(e){this.setSelectIndex(this.tabBar.selectedIndex)},n.setSelectIndex=function(e){if(void 0===e&&(e=0),this._isInit){switch(this.tabBar.selectedIndex=e,this._curView&&this._curView.parent&&this._curView.parent.removeChild(this._curView),this._self&&(this._self.parent&&this._self.parent.removeChild(this._self),this._self.dispose(),this._self=null),e){case 0:this._help||(this._help=new ShopHelpView),this._curView=this._help;break;case 1:this._shop||(this._shop=new ShopView),this._shop.selectedIndex(),this._curView=this._shop;break;case 2:this._self||(this._self=new ShopSelfView),this._curView=this._self,this.dispatchGlobalEvent(new ParamEvent(ShopEvtName.CCMD22501))}this._curView&&this.contentGroup.addChild(this._curView)}},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.tabBar.validateNow()},n.dispose=function(){e.prototype.dispose.call(this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this._help&&(this._help.parent&&this._help.parent.removeChild(this._help),this._help.dispose(),this._help=null),this._shop&&(this._shop.parent&&this._shop.parent.removeChild(this._shop),this._shop.dispose(),this._shop=null),this._self&&(this._self.parent&&this._self.parent.removeChild(this._self),this._self.dispose(),this._self=null)},t}(LayeroutWindow);egret.registerClass(ShopWindow,"ShopWindow");var ShopQizhenResultWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/shopQizhen/ShopQizhenResultWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_shop_qizhen"),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},n.setData=function(e){var t=e[0],i=GoodsListProxy.getInstance().getGoodsInfoByType(t.asset_id);this.txtDes.htmlText="好运到！\n恭喜你抽中"+i.name+ColorUtil.getColorHtmlStr("×"+t.value,ColorUtil.COLOR_GOLD)},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},t}(LayeroutWindow);egret.registerClass(ShopQizhenResultWindow,"ShopQizhenResultWindow");var ShopQizhenView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/shopQizhen/ShopQizhenViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this);var e=RoleModel.getInstance().getServerDate().getDay();0==e&&(e=7),this.content=new PicLoader,this.content.x=140,this.content.y=22,this.content.load("resource/assets/icon/shopQizhen/shopQizhenContent_"+e+".png"),this.addChild(this.content),this._vo=MallModel.getInstance().getRmbShopVoByType(2,e),this._itemArr=[];for(var t,i=0,n=0;n<this._vo.show.length;n++)t=new GoodsItemSmall,t.data=this._vo.show[n].info,t.x=120*n,this.itemGroup.addChild(t),this._itemArr.push(t),i=t.x+84;this.updateDaily();var s=TimeUtil.getTimeByTimeZone(),a=24-s.getHours(),o=s.getMinutes();this._time=60*a*60-60*o,this.timeComplete(),TimerManager.getInstance().add(1e3,this.timeComplete,this)},n.timeComplete=function(){this._time--,this._time<=0?(TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.txtTime.text="00:00"):this.txtTime.text=TimeUtil.getTime2(this._time)},n.onGetClick=function(){this._vo&&(ConfigManager.isTencent()?ConfigManager.isIOS()?QQManager.getInstance().QQBuyGoods(this._vo.ios,this._vo.template_id):QQManager.getInstance().QQBuyGoods(this._vo.android,this._vo.template_id):PhpHttpStatisticsManager.requestChargeOrder(1,this._vo.rmb,7,"RMB商城",1,this._vo.template_id))},n.updateDaily=function(){var e=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_40,this._vo.template_id);this.btnGet.visible=0==e,e>0&&(this.lingqu||(this.lingqu=new PicLoader,this.lingqu.load("resource/assets/icon/mall/mallIcon_over.png"),this.lingqu.x=245,this.lingqu.y=this.btnGet.y),this.addChild(this.lingqu))},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(1e3,this.timeComplete,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t.dispose(),t=null;this._itemArr=null,this.content&&(this.content.dispose(),this.content=null),this.lingqu&&(this.lingqu.dispose(),this.lingqu=null)},t}(BaseView);egret.registerClass(ShopQizhenView,"ShopQizhenView");var ShopQizhenZhuanView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/shopQizhen/ShopQizhenZhuanViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.addGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this);var e=RoleModel.getInstance().getServerDate().getDay();0==e&&(e=7);var t=MallModel.getInstance().getShopQizhenRandList(e);this._itemArr=[];for(var i,n,s=GoodsListProxy.getInstance().getGoodsInfoByType(2),a=0;12>a;a++)i=this["item_"+a],i.showLv(!1),n=t[a],i.data=s,i.num=n.rand_gold,this._itemArr.push(i);this.updateDaily()},n.onGetClick=function(){this.btnGet.visible=!1,this._time=0,TimerManager.getInstance().remove(100,this.onShowTime,this),TimerManager.getInstance().add(100,this.onShowTime,this)},n.onShowTime=function(){this._time>11?(this.img_select.visible=!1,TimerManager.getInstance().remove(100,this.onShowTime,this),this.dispatchGlobalEvent(new ParamEvent(FanLiEvtName.CCMD22000))):(this.img_select.visible=!0,this.img_select.x=this._itemArr[this._time].x-12,this.img_select.y=this._itemArr[this._time].y-12),this._time++},n.updateDaily=function(){var e=MallModel.getInstance().getShopQizhenCount();this.txtCount.text=e.toString(),this.btnGet.visible=e>0},n.dispose=function(){e.prototype.dispose.call(this),TimerManager.getInstance().remove(100,this.onShowTime,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.removeGlobalEventListener(DailyEvtName.DAILY_UPDATE,this.updateDaily,this)},t}(BaseView);egret.registerClass(ShopQizhenZhuanView,"ShopQizhenZhuanView");var SkillFeatBookItem=function(e){function t(){e.call(this),this.skinName="resource/game_skins/skill/SkillFeatBookItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.dataChanged=function(){var e=this.data;null==this.icon&&(this.icon=new PicLoader,this.icon.x=20,this.icon.y=12,this.addChild(this.icon)),this.icon.load(UrlUtil.getSkillFeatURL(e));var t=SkillModel.getInstance().getFeatVo(e,1);this.txtDes.htmlText=t.show},t}(eui.ItemRenderer);egret.registerClass(SkillFeatBookItem,"SkillFeatBookItem");var SkillFeatBookWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/skill/SkillFeatBookSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_skill_feat_tujian"),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this._itemArr=[];for(var t=0;10>t;t++){var i=new SkillFeatBookItem;i.y=115*t,i.data=t+1,this.itemList.addChild(i),this._itemArr.push(i)}},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.dispose=function(){e.prototype.dispose.call(this);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t.parent.removeChild(t),t=null;this._itemArr=null,this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this)},t}(LayeroutWindow);egret.registerClass(SkillFeatBookWindow,"SkillFeatBookWindow");var SkillFeatItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/skill/skillItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiCompHandler=function(){this.txtLv.visible=!1,this.lvBg.visible=!1,this.skillIcon||(this.skillIcon=new PicLoader,this.skillIcon.x=32,this.skillIcon.y=31),this.addChildAt(this.skillIcon,0),this.addChildAt(this.itemBg,0)},s.dataChanged=function(){this._skillVo=this.data,this._skillVo?(this.txtName.text=this._skillVo.name,this.skillIcon.load(UrlUtil.getSkillFeatURL(this._skillVo.type)),this.skillIcon.x=34,this.skillIcon.y=31,this.skillIcon.visible=!0):this.setIndex()},s.setIndex=function(e){if(void 0===e&&(e=0),e>0){this.idx=e;var t=SkillModel.getInstance().getFeatOpenVo(e);if(t){var i=RoleModel.getInstance().getRoleCommon().round;i<t.open_round?(this.skillIcon.loadByJsonName("skill_lock"),this.skillIcon.x=32,this.skillIcon.y=31,this.txtName.text=t.open_round+"转开启",this._lock=!0):(this.skillIcon.loadByJsonName("share_imageAdd"),this.skillIcon.x=63,this.skillIcon.y=63,this.txtName.htmlText="<font color='#02a4e7'>可学习</font>",this._lock=!1),this.skillIcon.visible=!0}}else this.skillIcon.visible=!1,this.txtName.text=""},s.getIdx=function(){return this.idx},i(s,"isLock",function(){return this._lock}),s.changeBg=function(e,t,i){this.itemBg.source=e,this.itemBg.x=t,this.itemBg.y=i},s.setSelect=function(e){this.selected=e,this.iconSelect.visible=e},t}(eui.ItemRenderer);egret.registerClass(SkillFeatItem,"SkillFeatItem",["eui.UIComponent"]);var SkillFeatPackWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/skill/SkillFeatPackSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.SKILL,this.setImageTitle("title_skill_book");var t=new eui.TileLayout;t.paddingTop=3,t.paddingLeft=3,t.paddingRight=3,t.paddingBottom=3,this.itemList.layout=t,t.horizontalGap=20,t.verticalGap=20,this.vScroll.viewport=this.itemList,this.txtLink.htmlText="<u>获得技能书：功勋商店</u>",this.txtLink2.htmlText="<u>获得技能书：公会商店</u>"},n.onLink=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_MALL,3)),this.isPop=!1},n.onLink2=function(){RoleModel.getInstance().getRoleCommon().guild_id>0?GameDispatcher.getInstance().dispatchEvent(new ParamEvent(GuildEvtName.GUILD_OPEN_VIEW,1)):GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.MAINUI_CLICK_GUILD)),this.isPop=!1},n.onListClick=function(e){var t=e.item;GameDispatcher.getInstance().dispatchEvent(new ParamEvent(SkillEvtName.CCMD14701,{idx:this._idx,pid:this._pid,tid:t.template_id})),this.isPop=!1},n.updateReward=function(){for(var e=GoodsListProxy.getInstance().getGoodsByTypeAndSubType(15,10),t=new eui.ArrayCollection,i=0;i<e.length;i++)t.addItem(e[i]);this.itemList.dataProvider=t},n.setIdx=function(e,t){this._idx=e,this._pid=t,this.updateReward()},n.setCenter=function(){this.x=GameContent.stageWidth-this.width>>1,this.y=(GameContent.stageHeight-this.height>>1)+170},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.returnButton.addEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.itemList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListClick,this),this.txtLink.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLink,this),this.txtLink2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLink2,this)},n.dispose=function(){e.prototype.dispose.call(this),this.returnButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.prototype.onReturnButtonClick,this),this.itemList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListClick,this),this.txtLink.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLink,this),this.txtLink2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLink2,this)},t}(LayeroutWindow);egret.registerClass(SkillFeatPackWindow,"SkillFeatPackWindow");var SkillFeatView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/skill/SkillFeatViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.resGroupName=GModuleResGroupName.SKILL,this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skillItem.changeBg("skillItemBg2",19,20),this._skillItemArr=[];for(var e,t=1;9>t;t++)e=this["skillItem_"+t],e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSkillTap,this),this._skillItemArr.push(e);this.heroListTopBox=new HeroListTopBox,this.topContainer.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0,this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnCanel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCanel,this),this.btnBook.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBookClick,this),this.addGlobalEventListener(SkillEvtName.CCMD14700_UPDATE,this.onUpdateSkill,this),this.addGlobalEventListener(SkillEvtName.CCMD14702_UPDATE,this.onSkillSuccess,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGEFEAT,this.updateFeatHandler,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.showRedDots,this),this._isInit||(this._isInit=!0,this._playerVo=this.heroListTopBox.roleListData[0]),this.init(),this.onSelectPlayer()},n.onHelp=function(e){this.dispatchGlobalEvent(new ParamEvent(EventName.OPEN_HELP_WINDOW,HelpWindow.SKILL_FEAT))},n.showRedDots=function(){this.heroListTopBox.updateSkillFeatRedDots()},n.onGet=function(){this._selectItem&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(SkillEvtName.CCMD14702,{idx:this._selectItem.getIdx(),pid:this._playerVo.parnerID}))},n.onCanel=function(){this._selectItem&&(GameDispatcher.getInstance().dispatchEvent(new ParamEvent(SkillEvtName.CCMD14703,{idx:this._selectItem.getIdx(),pid:this._playerVo.parnerID})),this.init())},n.onPackClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(SkillEvtName.OPEN_SKILL_FEAT_PACK,{idx:this._selectItem.getIdx(),pid:this._playerVo.parnerID}))},n.onBookClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(SkillEvtName.OPEN_SKILL_FEAT_BOOK))},n.onSkillTap=function(e){this._selectItem=e.currentTarget,this.onSelectSkill(),this._selectItem.isLock||this._selectItem.data||GameDispatcher.getInstance().dispatchEvent(new ParamEvent(SkillEvtName.OPEN_SKILL_FEAT_PACK,{idx:this._selectItem.getIdx(),pid:this._playerVo.parnerID}))},n.onBoxTap=function(e){e.data&&(this.init(),this._playerVo=e.data,this.onSelectPlayer())},n.onSelectPlayer=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(SkillEvtName.CCMD14700,{id:this._playerVo.parnerID}))},n.onSelectSkill=function(){for(var e,t,i,n=0;n<this._skillItemArr.length;n++)if(e=this._skillItemArr[n],e==this._selectItem)if(e.setSelect(!0),t=this._selectItem.data,this.skillItem.data=t,t){var s=SkillModel.getInstance().getFeatProStr(t);1==s.length?this.txtCur.text=StringUtil.substitute(t.description,s[0]):2==s.length&&(this.txtCur.text=StringUtil.substitute(t.description,s[0],s[1])),i=SkillModel.getInstance().getFeatVo(t.type,t.level+1),i?(s=SkillModel.getInstance().getFeatProStr(i),1==s.length?this.txtNext.text=StringUtil.substitute(i.description,s[0]):2==s.length&&(this.txtNext.text=StringUtil.substitute(i.description,s[0],s[1])),this.txtCost.text=i.con_feats.toString(),this.btnGet.enabled=RoleModel.getInstance().getRoleInfo().getFeat()>=i.con_feats):(this.txtNext.text="已满级",this.txtCost.text="0",this.btnGet.enabled=!1),this.txtTips.visible=!0,this.btnCanel.enabled=!0}else this.txtCur.text="未学习",this.txtNext.text="未学习",this.txtCost.text="0",this.txtTips.visible=!1,this.btnCanel.enabled=!1,this.btnGet.enabled=!1;else e.setSelect(!1)},n.onUpdateSkill=function(e){for(var t,i,n=SkillModel.getInstance().getFeatData(this._playerVo.parnerID),s=0;s<this._skillItemArr.length;s++){i=s+1,t=this._skillItemArr[s],t.data=null,t.setIndex(i);for(var a=0;a<n.length;a++)if(n[a].skill_id>0&&n[a].slot==i){t.data=SkillModel.getInstance().getFeatVo(n[a].skill_id,n[a].level),t.selected&&(this.skillItem.data=t.data);break}}this.skillItem.data&&this.onSelectSkill(),this.showRedDots(),this.updateFeatHandler()},n.updateFeatHandler=function(){this.txtMy.text=RoleModel.getInstance().getRoleInfo().getFeat().toString()},n.onSkillSuccess=function(e){var t=e.data;t>0?EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("tisheng"),-30,0,this):EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("shibai"),280,300,this)},n.init=function(){this.skillItem.data=null,this._selectItem&&(this._selectItem.data=null),this.txtCur.text="未学习",this.txtNext.text="未学习",this.txtCost.text="0",this.txtTips.visible=!1},n.dispose=function(){e.prototype.dispose.call(this);for(var t,i=0;i<this._skillItemArr.length;i++)t=this._skillItemArr[i],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSkillTap,this);this._skillItemArr=null,this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null,this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnCanel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCanel,this),this.btnBook.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBookClick,this),this.removeGlobalEventListener(SkillEvtName.CCMD14700_UPDATE,this.onUpdateSkill,this),this.removeGlobalEventListener(SkillEvtName.CCMD14702_UPDATE,this.onSkillSuccess,this),this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGEFEAT,this.updateFeatHandler,this),RoleModel.getInstance().removeEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.showRedDots,this)
},t}(BaseView);egret.registerClass(SkillFeatView,"SkillFeatView");var SkillItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/skill/skillItemSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.uiComplementHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skillIcon||(this.skillIcon=new PicLoader,this.skillIcon.x=32,this.skillIcon.y=31),this.addChildAt(this.skillIcon,0),this.addChildAt(this.itemBg,0)},s.dataChanged=function(){this._skillVo=this.data,this.txtName.text=this._skillVo.name,this.skillIcon.load(UrlUtil.getSkillURL(this._skillVo.icon)),this.updateLv(this._skillVo.lev)},s.updateLv=function(e){void 0===e&&(e=0);var t=RoleModel.getInstance().getRoleCommon().level;t<this._skillVo.open_lv?(this.skillIcon.filters=[Tools.GrayFilter],this.txtLv.htmlText="<font color='#e7d0b7'>"+this._skillVo.open_lv+"级开启</font>",this.txtLv.width=80,this.enabled=!1):(this.enabled=!0,this.skillIcon.filters=[],this.txtLv.text=e.toString(),this.txtLv.width=73,this.enabled=!0)},s.show=function(){this.itemBg.source="skillItemBg3",this.nameBg.x=80,this.nameBg.y=210,this.txtName.x=85,this.txtName.y=218,this.txtLv.x=90,this.txtLv.y=135,this.iconSelect.x=48,this.iconSelect.y=38,this.skillIcon.x=81,this.skillIcon.y=70,this.lvBg.x=87,this.lvBg.y=128},s.setSelect=function(e){this.selected=e,this.iconSelect.visible=e},i(s,"isAwake",void 0,function(e){this.txtLv.visible=!e,this.lvBg.visible=!e,this.txtName.visible=!e,this.nameBg.visible=!e}),t}(eui.ItemRenderer);egret.registerClass(SkillItem,"SkillItem",["eui.UIComponent"]);var SkillPackItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/skill/SkillFeatPackItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.goodItem.showTips=!1},n.dataChanged=function(){this._info=this.data,this.goodItem.data=this._info},t}(eui.ItemRenderer);egret.registerClass(SkillPackItem,"SkillPackItem");var SkillView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/skill/skillViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.resGroupName=GModuleResGroupName.SKILL,this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this._skillItemArr=[];for(var e,t=0;5>t;t++)e=this["skillItem_"+t],4==t&&e.show(),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSkillTap,this),this._skillItemArr.push(e);this.heroListTopBox=new HeroListTopBox,this.topContainer.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0,this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnGetAll.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetAll,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGECOIN,this.onChangeCoin,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_CHANGE,this.updateData,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.showRedDots,this),this.addGlobalEventListener(EventName.SKILL_INFO_CHANGE,this.updateData,this),this._isInit||(this._isInit=!0,this._playerVo=this.heroListTopBox.roleListData[0],this.onUpdateSkill(),this.onSelectSkill())},n.onChangeCoin=function(e){this.onUpdateSkill(),this.showRedDots(),this.updateCost()},n.updateCost=function(){RoleModel.getInstance().getRoleInfo().getCoin()<this._cost?(this.txtCost.htmlText="<font color='"+ColorUtil.COLOR_RED+"'>"+this._cost+"</font>",this.btnGet.enabled=!1,this.btnGet.showRedDot=!1):(this.btnGet.enabled=this._selectVo.lev<this._maxLv,this.btnGet.showRedDot=this._selectVo.lev<this._maxLv,this.txtCost.htmlText=this._cost.toString())},n.onSkillInfoChange=function(e){this._playerVo&&this._playerVo.parnerID==e.data.id&&this.updateData()},n.showRedDots=function(){this.heroListTopBox.updateSkillRedDots()},n.updateData=function(){this._isInit&&(this.showRedDots(),this.onUpdateSkill(),this.onSelectSkill())},n.onGet=function(){RoleModel.getInstance().CheckCoin(Number(this.txtCost.text))&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(SkillEvtName.SKILL_CCMD10500,{sid:this._selectVo.id,pid:this._playerVo.parnerID}))},n.onGetAll=function(){RoleModel.getInstance().CheckCoin(Number(this.txtCostAll.text))&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(SkillEvtName.SKILL_CCMD10501,this._playerVo.parnerID))},n.onSkillTap=function(e){this._selectVo=e.currentTarget.data,this.onSelectSkill()},n.onSelectSkill=function(){for(var e,t=0;t<this._skillItemArr.length;t++)e=this._skillItemArr[t],e.data==this._selectVo?(e.setSelect(!0),this._cost=SkillModel.getInstance().getCost(this._selectVo.lev),this.updateCost(),this.txtName.text=this._selectVo.name,this.txtDes.text=SkillModel.getInstance().getSkillDes(this._selectVo)):e.setSelect(!1)},n.onBoxTap=function(e){e.data&&(this._playerVo=e.data,this.onUpdateSkill(),this._selectVo=this._skillVoArr[0],this.onSelectSkill())},n.onUpdateSkill=function(){this._skillVoArr=SkillModel.getInstance().getSkillByCareer(this._playerVo.getCareer()),this._skillData=RoleModel.getInstance().getPartnerSkillList(this._playerVo.parnerID),this._maxLv=SkillModel.getInstance().getCurSkillMaxLv();for(var e,t,i,n=0,s=RoleModel.getInstance().getRoleInfo().getCoin(),a=0;a<this._skillVoArr.length;a++){e=this._skillItemArr[a],t=this._skillVoArr[a],t.lev=0;for(var o=0;o<this._skillData.length;o++)this._skillData[o].skill_id==t.id&&(t.lev=this._skillData[o].level);if(e.data=t,t.lev>0&&t.lev<this._maxLv)for(var r=t.lev;r<this._maxLv&&(i=SkillModel.getInstance().getCost(r),s>=n+i);r++)n+=i}null==this._selectVo&&(this._selectVo=this._skillVoArr[0]),n>s||0==n?(this.btnGetAll.enabled=!1,this.btnGetAll.showRedDot=!1):(this.btnGetAll.enabled=!0,this.btnGetAll.showRedDot=this._selectVo.lev<this._maxLv,this.txtCostAll.text=n.toString())},n.dispose=function(){e.prototype.dispose.call(this);for(var t,i=0;i<this._skillItemArr.length;i++)t=this._skillItemArr[i],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSkillTap,this);this._skillItemArr=null,this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null,this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet,this),this.btnGetAll.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetAll,this),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGECOIN,this.onChangeCoin,this),RoleModel.getInstance().removeEventListener(RoleModel.ROLE_LV_CHANGE,this.updateData,this),RoleModel.getInstance().removeEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.showRedDots,this),this.removeGlobalEventListener(EventName.SKILL_INFO_CHANGE,this.updateData,this)},t}(BaseView);egret.registerClass(SkillView,"SkillView");var SkillWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/skill/SkillWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.SKILL,this.tabBar.dataProvider=new eui.ArrayCollection(["技能","功勋技能"])},n.onBarItemTap=function(e){this.setIndex(this.tabBar.selectedIndex)},n.setIndex=function(e){switch(void 0===e&&(e=0),this.tabBar.selectedIndex=e,e){case 0:this._skill||(this._skill=new SkillView),this.contentGroup.addChild(this._skill);break;case 1:this._feat||(this._feat=new SkillFeatView),this.contentGroup.addChild(this._feat)}},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.showRedDots,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGECOIN,this.showRedDots,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_CHANGE,this.showRedDots,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.showRedDots,this),GameDispatcher.getInstance().addEventListener(EventName.SKILL_INFO_CHANGE,this.showRedDots,this),this.showRedDots()},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.showRedDots,this),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGECOIN,this.showRedDots,this),RoleModel.getInstance().removeEventListener(RoleModel.ROLE_LV_CHANGE,this.showRedDots,this),RoleModel.getInstance().removeEventListener(RoleModel.ROLE_PARTNERLIST_CHANGE,this.showRedDots,this),GameDispatcher.getInstance().removeEventListener(EventName.SKILL_INFO_CHANGE,this.showRedDots,this),this._skill&&(this._skill.parent&&this._skill.parent.removeChild(this._skill),this._skill.dispose(),this._skill=null),this._feat&&(this._feat.parent&&this._feat.parent.removeChild(this._feat),this._feat.dispose(),this._feat=null)},n.showRedDots=function(){this.tabBar.validateNow(),this.tabBar.getChildAt(0).showRedDot=SkillModel.getInstance().isUpgradeSkill,this.tabBar.getChildAt(1).showRedDot=SkillModel.getInstance().isUpgradeFeat},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_skill")},t}(LayeroutWindow);egret.registerClass(SkillWindow,"SkillWindow");var NoviceTaskView=function(e){function t(){e.call(this),this._clicked=!1,this._end=!1,this._siDelay=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/task/TaskViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=this;e.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,e),e.txtContent.addMiaoBian(),e.txtContent2.addMiaoBian(),e.addGlobalEventListener(DailyEvtName.FIXED_DATA_UPDATE,e.updateData,e),e.addGlobalEventListener(EventName.GUILE_END,e.guideEnd,e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick,e),GameDispatcher.getInstance().addEventListener(TaskEvtName.NOVICE_TASK_KILLNUM_UPDATE,e.updateTask,e),this.addGlobalEventListener(EventName.GUILE_START,this.startGuide,this),e.addGuide()},n.onClick=function(){var e=this;NoviceGuideManager.getInstance().removeGuide(NoviceGuideType.TASK,!0),e.clickHandler()},n.updateData=function(){var e=this;e._clicked=!1;var t=TaskModel.getInstance().getCurNoviceTask();return null==t?void(TaskModel.getInstance().taskMonster=0):(e._taskVo=t,e._task_id=t.template_id,null!=e._taskVo.monsterList&&e._taskVo.monsterList.length>0?TaskModel.getInstance().taskMonster=e._taskVo.monsterList[0].id:TaskModel.getInstance().taskMonster=0,this.updateTask(),void e.autoRunTask())},n.autoRunTask=function(e){var t=this;void 0===e&&(e=!1);NoviceGuideManager.getInstance().isNovice();if(1!=NoviceGuideManager.getInstance().isNovice()){var i=this;null==i._taskVo&&(i._taskVo=TaskModel.getInstance().getCurNoviceTask()),null!=i._taskVo&&((107==i._taskVo.template_id||108==i._taskVo.template_id||109==i._taskVo.template_id||110==i._taskVo.template_id)&&0==SceneModel.getInstance().isMainCity()&&(TipsWordManager.getInstance().isCity=!0,this.dispatchGlobalEvent(new ParamEvent(EventName.ENTER_MAINCITY))),i._siDelay>0&&clearTimeout(i._siDelay),0==e?i._taskVo.xs<=0&&(i._siDelay=setTimeout2(function(){t.clickHandler()},TaskModel.getInstance().autoTime)):this.clickHandler())}},n.clickHandler=function(){var e=this;null!=e._taskVo&&(e._taskVo.xs>0&&0==e._end||0==e._clicked&&(NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip(),TaskModel.getInstance().isNoviceTaskFinishedById(e._task_id)?e._taskVo.end_npc>0&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.WALK_TO_NPC,{id:e._taskVo.end_npc})):e._taskVo.end_npc>0&&(null!=e._taskVo.monsterList&&e._taskVo.monsterList.length>0?SceneModel.getInstance().createNoviceSceneMonster(e._taskVo.template_id):GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.WALK_TO_NPC,{id:e._taskVo.end_npc}))),e._clicked=!0))},n.updateTask=function(){var e=this;if(e._task_id>0){if(e._taskVo=TaskModel.getInstance().getTaskInfoById(e._task_id),null==e._taskVo)return;NoviceGuideManager.getInstance().removeGuide(NoviceGuideType.TASK,!0);var t="";if(e._taskVo.itemID>0){var i=GoodsListProxy.getInstance().getGoodsInfoByType(e._taskVo.itemID);t="<font color='"+ColorUtil.getGoodColor(i.quality)+"'>"+i.name+"</font>×"+e._taskVo.itemNum}else e._taskVo.add_coin>0&&(t="金币×"+e._taskVo.add_coin);var n="已完成";if(null!=e._taskVo.monsterList&&e._taskVo.monsterList.length>0){var s=SceneModel.getInstance().getMonsterConfig(e._taskVo.monsterList[0].id);TaskModel.getInstance().getKillMonsterCount()<e._taskVo.monsterList[0].count?(n="未完成",e.txtContent2.text=s.name+" "+TaskModel.getInstance().getKillMonsterCount()+"/"+e._taskVo.monsterList[0].count):e.txtContent2.htmlText=t}else e.txtContent2.htmlText=t;e.txtContent.htmlText=e._taskVo.name+"<font color='#008000'>("+n+")</font>",e.addGuide()}else e.dispose()},n.addGuide=function(){var e=this;RoleModel.getInstance().getRoleCommon().level<50?e.updateGuide(3):NoviceGuideManager.getInstance().removeGuide(NoviceGuideType.TASK,!0)},n.startGuide=function(e){var t=this;t.autoRunTask(!0)},n.isShow=function(e){this.visible=e&&this._task_id>0},n.guideEnd=function(e){var t=this;t._end=!0,null!=t._taskVo.monsterList?SceneModel.getInstance().createNoviceSceneMonster(t._taskVo.template_id):GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.WALK_TO_NPC,{id:t._taskVo.end_npc})),t.addGuide()},n.updateGuide=function(e){void 0===e&&(e=0);var t=new egret.Point(0,977);switch(e){case 1:NoviceGuideManager.getInstance().showShadeTip(this,"点击领取奖励",t,new egret.Point(t.x+55,t.y-65));break;case 2:NoviceGuideManager.getInstance().showShadeTip(this,"点击继续任务",t,new egret.Point(t.x+55,t.y-65));break;case 3:NoviceGuideManager.getInstance().showGuide(NoviceGuideType.TASK,47,-65,this)}},n.dispose=function(){e.prototype.dispose.call(this);var t=this;t.txtContent.text="已完成所有任务",t.parent&&t.parent.removeChild(this),t._siDelay>0&&clearTimeout(t._siDelay),t.removeGlobalEventListener(DailyEvtName.FIXED_DATA_UPDATE,this.updateData,this),t.removeGlobalEventListener(EventName.GUILE_END,this.guideEnd,this),GameDispatcher.getInstance().removeEventListener(TaskEvtName.NOVICE_TASK_KILLNUM_UPDATE,t.updateTask,t),this.removeGlobalEventListener(EventName.GUILE_START,this.startGuide,this)},t}(BaseView);egret.registerClass(NoviceTaskView,"NoviceTaskView",["INoviceGuide"]);var TaskView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/task/TaskViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){var e=this;this.removeEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.txtContent.addMiaoBian(),this.txtContent2.addMiaoBian(),this.addGlobalEventListener(TaskEvtName.TASK_CCMD11400_UPDATE,this.updateData,this),this.addGlobalEventListener(EventName.GUILE_END,this.updateTask,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),e.updateData()},n.onClick=function(){var e=[],t=new Point(this.x+200,this.y);if(NoviceGuideManager.getInstance().isNovice()&&NoviceGuideManager.getInstance().removeShadeTip(),this._num>=this._taskVo.need){if(GameDispatcher.getInstance().dispatchEvent(new ParamEvent(TaskEvtName.TASK_CCMD11401)),this._taskVo.add_coin>0){for(var i=0;10>i;i++)e.push(1);AccessGoodFlyEffectManager.getInstance().flyArray(e,t,null,AccessGoodFlyEffectManager.GOLDTYPE)}else if(this._taskVo.itemList){var n=this._taskVo.itemList[0].num;n>10&&(n=10);for(var s=0;s<this._taskVo.itemList[0].num;s++)e.push(this._taskVo.itemList[0].info.pic);AccessGoodFlyEffectManager.getInstance().flyArray(e,t)}}else TaskModel.getInstance().getTaskOpenView(this._taskVo)},n.updateData=function(e){void 0===e&&(e=null);var t=TaskModel.getInstance().getCurTaskInfo();null!=t&&(this._task_id=t.task_id,this._num=t.num,this.updateTask())},n.updateTask=function(){var e=this;if(e._task_id>0){if(e._taskVo=TaskModel.getInstance().getTaskInfoById(e._task_id),null==e._taskVo)return;var t=e._num+"/"+e._taskVo.need,i=e._num>=e._taskVo.need,n=RoleModel.getInstance().getRoleCommon().level;i?(e.dispatchGlobalEvent(new ParamEvent(TaskEvtName.TASK_COMPLETE,e._taskVo)),t="已完成",e._taskVo.xs!=NoviceGuideType.GuideFigureTips||NoviceGuideManager.getInstance().isNovice()||e.updateGuide(1)):e._taskVo.xs!=NoviceGuideType.GuideBuildStrengthenTips||NoviceGuideManager.getInstance().isNovice()||e.updateGuide(2),50>n?e.updateGuide(3):NoviceGuideManager.getInstance().removeGuide(NoviceGuideType.TASK,!0);var s="";if(e._taskVo.itemID>0){var a=GoodsListProxy.getInstance().getGoodsInfoByType(e._taskVo.itemID);s="<font color='"+ColorUtil.getGoodColor(a.quality)+"'>"+a.name+"</font>×"+e._taskVo.itemNum}else e._taskVo.add_coin>0&&(s="金币×"+e._taskVo.add_coin);e.txtContent.htmlText=e._taskVo.name+"<font color='#008000'>("+t+")</font>",e.txtContent2.htmlText=s}else e.dispose()},n.isShow=function(e){this.visible=e&&this._task_id>0},n.updateGuide=function(e){void 0===e&&(e=0);var t=new egret.Point(0,977);switch(e){case 1:NoviceGuideManager.getInstance().showShadeTip(this,"点击领取奖励",t,new egret.Point(t.x+55,t.y-65));break;case 2:NoviceGuideManager.getInstance().showShadeTip(this,"点击继续任务",t,new egret.Point(t.x+55,t.y-65));break;case 3:NoviceGuideManager.getInstance().showGuide(NoviceGuideType.TASK,47,-65,this)}},n.dispose=function(){e.prototype.dispose.call(this),this.txtContent.text="已完成所有任务",this.parent&&this.parent.removeChild(this),this.removeGlobalEventListener(TaskEvtName.TASK_CCMD11400_UPDATE,this.updateData,this),this.removeGlobalEventListener(EventName.GUILE_END,this.updateTask,this)},t}(BaseView);egret.registerClass(TaskView,"TaskView",["INoviceGuide"]);var TreasurePackItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/treasure/TreasurePackItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.goodItem.showTips=!1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this)},n.onItemClick=function(){var e=TreasureModel.getInstance().getItemIdById(this._info.template_id);if(e>0){var t=new NodeTreasure_item;t.item_id=e,this._info.type==GoodsType.ITEM_EQUIP?t.num=1:t.num=this._info.num;var i=[t];GameDispatcher.getInstance().dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD13811,i))}},n.dataChanged=function(){this._info=this.data,this.goodItem.data=this._info,this.goodItem.showName(Tools.convertRoundLv(this._info.req_lv,this._info.req_round,!1))},t}(eui.ItemRenderer);egret.registerClass(TreasurePackItem,"TreasurePackItem");var TreasurePackView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/treasure/TreasurePackSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){var e=new eui.TileLayout;e.paddingTop=3,e.paddingLeft=3,e.paddingRight=3,e.paddingBottom=3,this.itemList.layout=e,e.horizontalGap=20,e.verticalGap=20},n.onGetClick=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD13812))},n.updateData=function(e){var t=TreasureModel.getInstance().packData,i=new eui.ArrayCollection;if(t.length>0){this._dataObj||(this._dataObj=new Object);for(var n,s,a,o=0;o<t.length;o++)if(t[o].item_id>0){if(a=t[o].num,s=TreasureModel.getInstance().getVoById(t[o].item_id),n=GoodsListProxy.getInstance().getGoodsInfoByType(s.item_id),n.type==GoodsType.ITEM_EQUIP)for(var r=0;a>r;r++)i.addItem(n);else n.num=a*s.num,i.addItem(n);this._dataObj[n.template_id]=t[o]}}this.itemList.dataProvider=i},n.onOpenHandler=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.addGlobalEventListener(TreasureEvtName.TREASURE__CCMD13810_UPDATE,this.updateData,this),this.addGlobalEventListener(TreasureEvtName.TREASURE__CCMD13811_UPDATE,this.updateData,this),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD13810))},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.removeGlobalEventListener(TreasureEvtName.TREASURE__CCMD13810_UPDATE,this.updateData,this),this.removeGlobalEventListener(TreasureEvtName.TREASURE__CCMD13811_UPDATE,this.updateData,this)},t}(BaseView);egret.registerClass(TreasurePackView,"TreasurePackView");var TreasureResultWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/treasure/TreasureResultSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){var e=new eui.TileLayout;e.paddingTop=3,e.paddingLeft=3,e.paddingRight=3,e.paddingBottom=3,this.itemList.layout=e,e.horizontalGap=20,e.verticalGap=20,this.vScroll.viewport=this.itemList,this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyClick,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseWin,this),this._itemFly=[]},n.updateReward=function(e){var t,i,n,s=new eui.ArrayCollection;this._itemFly=[];for(var a=0;a<e.length;a++){if(n=e[a].num,i=TreasureModel.getInstance().getVoById(e[a].item_id),t=GoodsListProxy.getInstance().getGoodsInfoByType(i.item_id),t.type==GoodsType.ITEM_EQUIP)for(var o=0;n>o;o++)s.addItem(t);else t.num=n*i.num,s.addItem(t);this._itemFly.push(t.pic)}this.itemList.dataProvider=s},n.setType=function(e){this._type=e,1==this._type?(this.btnBuy.label="再买1个",this.txtCost.text=SingleModel.getInstance().getSingVO(SingleModel.KEY_13801).value):(this.btnBuy.label="再买10个",this.txtCost.text=SingleModel.getInstance().getSingVO(SingleModel.KEY_13802).value)},n.onBuyClick=function(){(1!=this._type||RoleModel.getInstance().CheckGold(Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_13801).value)))&&(2!=this._type||RoleModel.getInstance().CheckGold(Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_13802).value)))&&GameDispatcher.getInstance().dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD13801,this._type))},n.onGetClick=function(){AccessGoodFlyEffectManager.getInstance().flyArray(this._itemFly,null,new Point(150,900)),this.onCloseWin()},n.onCloseWin=function(){this.isPop=!1},t}(LayeroutWindow);egret.registerClass(TreasureResultWindow,"TreasureResultWindow");var TreasureView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/treasure/TreasureViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){for(var e,t,i,n,s=1;15>s;s++)e=this["item_"+s],t=TreasureModel.getInstance().getItemByIndex(s),i=GoodsListProxy.getInstance().getGoodsInfoByType(t.item_id),e.data=i,i.type==GoodsType.ITEM_EQUIP&&(n=i.req_round>0?i.req_round+"转":i.req_lv+"级",e.showName(n)),e.num=t.num,13==s?this._effect=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("color_6"),-270,-390,e,80,!0):14==s&&(this._effect2=EffectManager.getInstance().showEffect(UrlUtil.getCommonEffectURL("color_6"),-270,-390,e,80,!0));this.txtCost10.text=SingleModel.getInstance().getSingVO(SingleModel.KEY_13802).value},n.onGetClick=function(){if(this._type=1,this._last_time>0){if(!RoleModel.getInstance().CheckGold(Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_13801).value)))return;GameDispatcher.getInstance().dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD13801,this._type))}else GameDispatcher.getInstance().dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD13821))},n.onGet10Click=function(){RoleModel.getInstance().CheckGold(Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_13802).value))&&(this._type=2,GameDispatcher.getInstance().dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD13801,this._type)))},n.updateData=function(e){var t=e.data;this._last_time=t.last_time,this.txtTime.text=TimeUtil.getTime(this._last_time),this._last_time>0?(TimerManager.getInstance().remove(1e3,this.onShowTime,this),TimerManager.getInstance().add(1e3,this.onShowTime,this),this.txtCost.text=SingleModel.getInstance().getSingVO(SingleModel.KEY_13801).value):this.txtCost.text="免费"},n.updateLog=function(e){var t="",i=new eui.ArrayCollection,n=e.data;n.sort(function(e,t){return e.ctime<t.ctime?1:-1});for(var s,a,o=0;o<n.length;o++)s=GoodsListProxy.getInstance().getGoodsInfoByType(n[o].item_id),a="",s.type==GoodsType.ITEM_EQUIP&&(a=s.req_round>0?s.req_round+"转":s.req_lv+"级",a="("+a+"  "+(s.req_career>0?Tools.getJobName(s.req_career):"")+")"),t=n[o].name+" <font color='#dda66b'>获得</font> <font color='#ffd200'>"+s.name+a+"</font>",i.addItem(t);this.logList.dataProvider=i},n.onShowTime=function(){this._last_time--,this._last_time>0?this.txtTime.text=TimeUtil.getTime(this._last_time):(this.txtTime.text="0",TimerManager.getInstance().remove(1e3,this.onShowTime,this))},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnBuy10.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet10Click,this),this.addGlobalEventListener(TreasureEvtName.TREASURE__CCMD13800_UPDATE,this.updateLog,this),this.addGlobalEventListener(TreasureEvtName.TREASURE__CCMD13801_UPDATE,this.openTreasureResult,this),this.addGlobalEventListener(TreasureEvtName.TREASURE__CCMD13820_UPDATE,this.updateData,this),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD13800)),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(TreasureEvtName.TREASURE__CCMD13820))},n.onCloseHandler=function(){e.prototype.onCloseHandler.call(this),TimerManager.getInstance().remove(1e3,this.onShowTime,this),this.btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnBuy10.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGet10Click,this),this.removeGlobalEventListener(TreasureEvtName.TREASURE__CCMD13800_UPDATE,this.updateLog,this),this.removeGlobalEventListener(TreasureEvtName.TREASURE__CCMD13801_UPDATE,this.openTreasureResult,this),this.removeGlobalEventListener(TreasureEvtName.TREASURE__CCMD13820_UPDATE,this.updateData,this),this._effect&&(this._effect.dispose(),this._effect=null),this._effect2&&(this._effect2.dispose(),this._effect2=null)},n.openTreasureResult=function(e){this._resultWin||(this._resultWin=new TreasureResultWindow,this._resultWin.addEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this)),this._resultWin.isPop||(this._resultWin.isPop2=!0),this._resultWin.setType(this._type),this._resultWin.updateReward(e.data)},n.disposeView=function(e){this._resultWin&&(this._resultWin.removeEventListener(EventName.WINDOW_DISPOSE,this.disposeView,this),this._resultWin.dispose(),this._resultWin=null)},t}(BaseView);egret.registerClass(TreasureView,"TreasureView");var TreasureWindow=function(e){function t(){e.call(this),this._selectedTabIndex=0,this.skinName="resource/game_skins/treasure/TreasureWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.TREASURE,this.tabBar.dataProvider=new eui.ArrayCollection(["寻宝","仓库","商店"])},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_treasure")},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),GameDispatcher.getInstance().addEventListener(EventName.RED_DOTS+RedDotsModel.ID_2004,this.onPackUpdate,this),GameDispatcher.getInstance().addEventListener(EventName.RED_DOTS+RedDotsModel.ID_2014,this.onTreasureUpdate,this),this.onPackUpdate(),this.onTreasureUpdate()},n.dispose=function(){e.prototype.dispose.call(this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),GameDispatcher.getInstance().removeEventListener(EventName.RED_DOTS+RedDotsModel.ID_2002,this.onPackUpdate,this),GameDispatcher.getInstance().removeEventListener(EventName.RED_DOTS+RedDotsModel.ID_2004,this.onPackUpdate,this),GameDispatcher.getInstance().removeEventListener(EventName.RED_DOTS+RedDotsModel.ID_2014,this.onTreasureUpdate,this),this.clearContent()},n.openView=function(e,t){if(t)this.isPop=!0;else{var i=!this.isPop;this.isPop=i}1==this.isPop&&(this.setTabIndex(e),this.onBarItemTap(null))},n.onBoxTap=function(e){e.data&&(FigureModel.getInstance().selectedPartnerVO=e.data)},n.onBarItemTap=function(e){switch(this.clearContent(),this.tabBar.selectedIndex){case 0:this._treasureView||(this._treasureView=new TreasureView),this.container.addChild(this._treasureView),this._treasureView.onOpenHandler(),this.setImageTitle("title_treasure");break;case 1:this._packView||(this._packView=new TreasurePackView),this.container.addChild(this._packView),this._packView.onOpenHandler(),this.setImageTitle("title_treasurePack");break;case 2:this._shopView||(this._shopView=new MallContent2),this.container.addChild(this._shopView),this._shopView.updateData(MallModel.MALL_TYPE_4),this.setImageTitle("title_treasure")}},n.setTabIndex=function(e){this._selectedTabIndex=e,this.tabBar.selectedIndex=this._selectedTabIndex},n.updateTabRedDot=function(e){var t=e.data.index,i=e.data.show;i?(this.tabBar.validateNow(),this.tabBar.getChildAt(t).showRedDot=!0):(this.tabBar.validateNow(),this.tabBar.getChildAt(t).showRedDot=!1)},n.onPackUpdate=function(){RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.TREASURE_TAB_REDDOT,{index:3,show:RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2004)}))},n.onTreasureUpdate=function(){RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.TREASURE_TAB_REDDOT,{index:0,show:RedDotsModel.getInstance().isShowRedDotsDataById(RedDotsModel.ID_2014)}))},n.clearContent=function(){for(var e;this.container.numChildren>0;)e=this.container.getChildAt(0),this.container.removeChild(e),e.dispose(),e=null;this._treasureView&&(this._treasureView.parent&&this._treasureView.parent.removeChild(this._treasureView),this._treasureView.onCloseHandler(),this._treasureView=null),this._packView&&(this._packView.parent&&this._packView.parent.removeChild(this._packView),this._packView.onCloseHandler(),this._packView=null),this._shopView&&(this._shopView.parent&&this._shopView.parent.removeChild(this._shopView),this._shopView.onCloseHandler(),this._shopView=null)},t}(LayeroutWindow);egret.registerClass(TreasureWindow,"TreasureWindow");var VipGuizuLifeView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/vip/VipGuizuLifeSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.imageContent=new PicLoader,this.imageContent.y=132,this.imageContent.load("resource/assets/icon/vipGuizu/vipGuizuContent_1.png"),this.addChildAt(this.imageContent,0),this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/vipGuizu/vipGuizuBg2.png"),this.addChildAt(this.imageBg,0),this.btnChong.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChongClick,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnBar_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBarClick,this),this.btnBar_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBarClick,this),this.btnBar_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBarClick,this),this.btnBar_4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBarClick,this),this.addGlobalEventListener(VipEvtName.CCMD16700_UPDATE,this.updateData,this);
var e=GoodsListProxy.getInstance().getGoodsInfoByType(2);this.item_0.data=e;var t=Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16703).value),i=FixedNumModel.getInstance().getFixedNumNode(FixedNumModel.FIXED_NUM_TYPE2);i&&(t+=i.value*Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16704).value)),this.item_0.num=t;var n=Tools.changeToItemData(SingleModel.getInstance().getSingVO(SingleModel.KEY_16709).value);this.item_1.data=n[0].info,this.item_2.data=n[1].info,this._itemFly=[e.pic],this._itemFly.push(n[0].info.pic),this._itemFly.push(n[1].info.pic)},n.updateData=function(){this.btnChong.visible=!VipModel.getInstance().isLife,this.btnGet.visible=VipModel.getInstance().isLifeReward,this.image_lq.visible=VipModel.getInstance().isLife&&!VipModel.getInstance().isLifeReward},n.onBarClick=function(e){var t=e.currentTarget;switch(this.imageSelect.x=t.x,t){case this.btnBar_1:this.imageContent.load("resource/assets/icon/vipGuizu/vipGuizuContent_1.png");break;case this.btnBar_2:this.imageContent.load("resource/assets/icon/vipGuizu/vipGuizuContent_2.png");break;case this.btnBar_3:this.imageContent.load("resource/assets/icon/vipGuizu/vipGuizuContent_3.png");break;case this.btnBar_4:this.imageContent.load("resource/assets/icon/vipGuizu/vipGuizuContent_4.png")}},n.onChongClick=function(){ConfigManager.isTencent()?ConfigManager.isIOS()?QQManager.getInstance().QQBuyGoods(QQManager.LIFE_IOS):QQManager.getInstance().QQBuyGoods(QQManager.LIFE_ANDROID):PhpHttpStatisticsManager.requestChargeOrder(1,Number(SingleModel.getInstance().getSingVO(SingleModel.KEY_16701).value),4,"终生卡",1)},n.onGetClick=function(){this.btnGet.enabled=!1,this.dispatchGlobalEvent(new ParamEvent(VipEvtName.CCMD16701)),AccessGoodFlyEffectManager.getInstance().flyArray(this._itemFly)},n.dispose=function(){e.prototype.dispose.call(this),this.btnChong.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChongClick,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnBar_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBarClick,this),this.btnBar_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBarClick,this),this.btnBar_3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBarClick,this),this.btnBar_4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBarClick,this),this.removeGlobalEventListener(VipEvtName.CCMD16700_UPDATE,this.updateData,this),this.imageBg&&(this.imageBg.parent&&this.imageBg.parent.removeChild(this.imageBg),this.imageBg.dispose(),this.imageBg=null),this.imageContent&&(this.imageContent.parent&&this.imageContent.parent.removeChild(this.imageContent),this.imageContent.dispose(),this.imageContent=null)},t}(BaseView);egret.registerClass(VipGuizuLifeView,"VipGuizuLifeView");var VipGuizuVipView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/vip/VipGuizuVipSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.imageContent=new PicLoader,this.imageContent.x=87,this.imageContent.y=5,this.imageContent.load("resource/assets/icon/vipGuizu/vipGuizuContent.png"),this.addChildAt(this.imageContent,0),this.imageBg=new PicLoader,this.imageBg.load("resource/assets/icon/vipGuizu/vipGuizuBg.png"),this.addChildAt(this.imageBg,0),this._effect=EffectManager.getInstance().showEffect(UrlUtil.getArtifactEffectURL("model_4001"),140,200,this.effectGroup,80,!0),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this);for(var e=VipModel.getInstance().getVipVoByLv(3),t=(new eui.ArrayCollection,0);t<e.itemList.length;t++)this["item_"+t]&&(this["item_"+t].data=e.itemList[t].info)},n.onGetClick=function(){this.dispatchGlobalEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.dispose=function(){e.prototype.dispose.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this._effect&&(this._effect.dispose(),this._effect=null),this.imageBg&&(this.imageBg.parent&&this.imageBg.parent.removeChild(this.imageBg),this.imageBg.dispose(),this.imageBg=null),this.imageContent&&(this.imageContent.parent&&this.imageContent.parent.removeChild(this.imageContent),this.imageContent.dispose(),this.imageContent=null)},t}(BaseView);egret.registerClass(VipGuizuVipView,"VipGuizuVipView");var VipGuizuWindow=function(e){function t(){e.call(this),this.skinName="resource/game_skins/vip/VipGuizuViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.setImageWindowTitle("title_guizu"),VipModel.getInstance().getVIPLevel()>=3&&this.btnVip.parent.removeChild(this.btnVip),this.updateData()},n.updateData=function(){this.btn_life.showRedDot=VipModel.getInstance().isLifeReward},n.onMonthClick=function(){this.setIndex(0)},n.onZSClick=function(){this.setIndex(1)},n.onJijinClick=function(){this.setIndex(2)},n.onVipClick=function(){this.setIndex(3)},n.setIndex=function(e){switch(void 0===e&&(e=0),this._curView&&this._curView.parent&&(this._curView.onCloseHandler(),this._curView.parent.removeChild(this._curView)),e){case 0:this._monthView||(this._monthView=new FuliVipView),this.dispatchGlobalEvent(new ParamEvent(VipEvtName.VIP_CCMD11910)),this._curView=this._monthView,this.selectBg.x=this.btn_month.x-18;break;case 1:this._liftView||(this._liftView=new VipGuizuLifeView),this._liftView.updateData(),this._curView=this._liftView,this.selectBg.x=this.btn_life.x-20;break;case 2:this._jijinView||(this._jijinView=new FuliJijinView),this._curView=this._jijinView,this.selectBg.x=this.btn_jijin.x-10,this.dispatchGlobalEvent(new ParamEvent(FuLiEvtName.CCMD15700));break;case 3:this._vipView||(this._vipView=new VipGuizuVipView),this._curView=this._vipView,this.selectBg.x=this.btnVip.x-15}this.contentGroup.addChild(this._curView),this.onBtnReturnSetIndex()},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.btnVip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onVipClick,this),this.btn_month.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMonthClick,this),this.btn_life.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onZSClick,this),this.btn_jijin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJijinClick,this),this.addGlobalEventListener(VipEvtName.CCMD16700_UPDATE,this.updateData,this)},n.dispose=function(){e.prototype.dispose.call(this),this.btnVip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onVipClick,this),this.btn_month.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMonthClick,this),this.btn_life.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onZSClick,this),this.btn_jijin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onJijinClick,this),this.removeGlobalEventListener(VipEvtName.CCMD16700_UPDATE,this.updateData,this),this._vipView&&(this._vipView.parent&&this._vipView.parent.removeChild(this._vipView),this._vipView.dispose(),this._vipView=null),this._monthView&&(this._monthView.parent&&this._monthView.parent.removeChild(this._monthView),this._monthView.dispose(),this._monthView=null),this._liftView&&(this._liftView.parent&&this._liftView.parent.removeChild(this._liftView),this._liftView.dispose(),this._liftView=null),this._jijinView&&(this._jijinView.parent&&this._jijinView.parent.removeChild(this._jijinView),this._jijinView.dispose(),this._jijinView=null)},t}(LayeroutWindow);egret.registerClass(VipGuizuWindow,"VipGuizuWindow");var VipItem=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/vip/VipItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.dataChanged=function(){this.goodItem.data=this.data.info,this.goodItem.num=this.data.num},t}(eui.ItemRenderer);egret.registerClass(VipItem,"VipItem");var VipWindow=function(e){function t(){e.call(this),this._vipMax=0,this.skinName="resource/game_skins/vip/VipViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.VIP,e.prototype.onBtnReturnSetIndex.call(this),this.addGlobalEventListener(VipEvtName.VIP_UPDATE,this.updateData,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftClick,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRightClick,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnChongzhi.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChong,this),this.vipBg=new PicLoader,this.vipBg.y=145,this.vipBg.load("resource/assets/icon/vip/vipBg2.png"),this.picGroup.addChild(this.vipBg),this.bm_content=new PicLoader,this.bm_content.x=55,this.bm_content.y=180,this.picGroup.addChild(this.bm_content),this._isInit||(this._isInit=!0,this.updateData())},n.updateData=function(){if(this._isInit){var e=VipModel.getInstance().getVIPLevel(),t=e+1,i=VipModel.getInstance().getVipVoByLv(t);i||(t=e,i=VipModel.getInstance().getVipVoByLv(t));var n=i.exp,s=VipModel.getInstance().getVIPExp(),a=s/n;a>1&&(a=1),this.txtExp.text=s+"/"+n,this.bm_exp.scaleX=a,this.txtCount.text=(n>s?n-s:0).toString(),this.curLv.text=e.toString(),this.nextLv.text=t.toString(),this.txtLv.text=t.toString(),this._nextLv=0;for(var o,r=1;100>r;r++)o=VipModel.getInstance().getVipVoByLv(r),o&&o.show>0&&(0!=this._nextLv||VipModel.getInstance().isGetVipReward(r)||(this._nextLv=r),this._vipMax=r);(this._nextLv>this._vipMax||0==this._nextLv)&&(this._nextLv=this._vipMax),this.updateContent()}},n.onLeftClick=function(){this._nextLv--,this._nextLv<0&&(this._nextLv=0),this.updateContent()},n.onRightClick=function(){this._nextLv++,this._nextLv>this._vipMax&&(this._nextLv=this._vipMax),this.updateContent()},n.onChong=function(){GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.CHARGE_OPEN))},n.onGetClick=function(){AccessGoodFlyEffectManager.getInstance().flyArray(this._itemFly),GameDispatcher.getInstance().dispatchEvent(new ParamEvent(VipEvtName.VIP_CCMD11901,this._nextLv))},n.updateContent=function(){this._nextLv<=1?this.btnLeft.visible=!1:this.btnLeft.visible=!0,this.btnRight.visible=this._nextLv+1<=this._vipMax,this._itemFly=[],this.bm_content.load("resource/assets/icon/vip/vipContent_"+this._nextLv+".png");for(var e=VipModel.getInstance().getVipVoByLv(this._nextLv),t=new eui.ArrayCollection,i=0;i<e.itemList.length;i++)t.addItem(e.itemList[i]),this._itemFly.push(e.itemList[i].info.pic);this.vipList.dataProvider=t,VipModel.getInstance().isGetVipReward(this._nextLv)?(this.btnGet.enabled=!1,this.btnGet.label="已领取"):VipModel.getInstance().getVIPLevel()<this._nextLv?(this.btnGet.enabled=!1,this.btnGet.label="领取"):(this.btnGet.enabled=!0,this.btnGet.label="领取")},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.setImageTitle("title_vip")},n.dispose=function(){e.prototype.dispose.call(this),this.removeGlobalEventListener(VipEvtName.VIP_UPDATE,this.updateData,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftClick,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRightClick,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.btnChongzhi.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChong,this),this.vipBg&&(this.vipBg.parent&&this.vipBg.parent.removeChild(this.vipBg),this.vipBg.dispose(),this.vipBg=null),this.bm_content&&(this.bm_content.parent&&this.bm_content.parent.removeChild(this.bm_content),this.bm_content.dispose(),this.bm_content=null)},t}(LayeroutWindow);egret.registerClass(VipWindow,"VipWindow");var WingView=function(e){function t(){e.call(this),this.itemStarArr=[],this._jie=0,this._lvl=0,this._url="",this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/wing/wingViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this),this.updateStar()},n.onOpenHandler=function(){this.resGroupName=GModuleResGroupName.WING,this._btnOK2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOk2Handler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnFast.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFastHandler,this),this._btnActive.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnActiveHandler,this),this._btnEquip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEquipHandler,this),this._btnup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpHandler,this),this._btnAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAutoHandler,this),this.addGlobalEventListener(WingEvtName.WING_UPDATE_INFO,this.updateInfoHandler,this),this.addGlobalEventListener(EventName.EQUIP_LIST_CHANGE,this.onChangeEquipListHandler,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGECOIN,this.onCoinChangeHandler,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),FigureModel.getInstance().addEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),this.onPartnerChangeHandler()},n.onCloseHandler=function(){this._btnOK2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOk2Handler,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),this._btnFast.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onFastHandler,this),this._btnActive.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnActiveHandler,this),this._btnEquip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEquipHandler,this),this._btnup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpHandler,this),this._btnAuto.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAutoHandler,this),this.removeGlobalEventListener(WingEvtName.WING_UPDATE_INFO,this.updateInfoHandler,this),this.removeGlobalEventListener(EventName.EQUIP_LIST_CHANGE,this.onChangeEquipListHandler,this),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGECOIN,this.onCoinChangeHandler,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),FigureModel.getInstance().removeEventListener(FigureEvtName.FIGURE_SELECTED_PARTNER,this.onPartnerChangeHandler,this),this.clearDelayTime(),this.clearStar(),this._wingMovieClip&&(this._wingMovieClip.dispose(),this._wingMovieClip=null),this.dispose()},n.onCoinChangeHandler=function(){RedDotsModel.getInstance().calWingTabRedDot(),RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.FIGURE_HEROLIST_REDDOT,{index:1}))},n.onPartnerChangeHandler=function(){var e=new ParamEvent(WingEvtName.CCMD12100),t=FigureModel.getInstance().selectedPartnerVO;e.data={id:t.parnerID},this.dispatchGlobalEvent(e)},n.onUpHandler=function(){var e=new ParamEvent(WingEvtName.CCMD12106),t=FigureModel.getInstance().selectedPartnerVO;e.data={id:t.parnerID},this.dispatchGlobalEvent(e)},n.onEquipHandler=function(){var e=new ParamEvent(WingEvtName.WING_OPEN_WEARWINDOW);this.dispatchGlobalEvent(e)},n.onFastHandler=function(){var e=this,t=GoodsListProxy.getInstance().findGoodNumber(WingModel.ITEM_FAST);if(0>=t)return void Message.show("物品不足");var i=new ParamEvent(WingEvtName.CCMD12103),n=FigureModel.getInstance().selectedPartnerVO;i.data={id:n.parnerID},GameDispatcher.getInstance().dispatchEvent(new ParamEvent(EventName.SHOW_TIPS,{title:"",content:"是否使用1个羽翼直升丹？注：4阶以下使用提升1阶，4阶以上使用增加5000羽翼经验",func:function(){e.dispatchGlobalEvent(i)}}))},n.onBtnActiveHandler=function(){var e=new ParamEvent(WingEvtName.CCMD12105),t=FigureModel.getInstance().selectedPartnerVO;e.data={id:t.parnerID},this.dispatchGlobalEvent(e)},n.onOkHandler=function(){this.clearDelayTime(),this.coinUP()},n.onOk2Handler=function(){this.clearDelayTime(),this.goodsUP()},n.coinUP=function(){clearTimeout(this._siDelay);var e=0,t=0,e=0,i=0,n=0;this.wingServerVO&&(e=this.wingServerVO.star,t=this.wingServerVO.jie,e=this.wingServerVO.star),10>e?(i=t,n=e+1):(i=t+1,n=1),0==t&&(i=t+1),this._nextProVO=WingModel.getInstance().getWingDataVO(i,n);var s=RoleModel.getInstance().getRoleInfo().getCoin();if(10==e)return void this.clearDelayTime();if(null==this._nextProVO)return this.clearDelayTime(),void Message.show("已提升最高级");if(s<this._nextProVO.con_coin)return this.clearDelayTime(),void this.popCoinGetView();var a=new ParamEvent(WingEvtName.CCMD12101),o=FigureModel.getInstance().selectedPartnerVO;a.data={id:o.parnerID},GameDispatcher.getInstance().dispatchEvent(a)},n.goodsUP=function(){clearTimeout(this._siDelay);var e=new ParamEvent(WingEvtName.CCMD12102),t=FigureModel.getInstance().selectedPartnerVO;e.data={id:t.parnerID},GameDispatcher.getInstance().dispatchEvent(e)},n.clearDelayTime=function(){WingModel.getInstance().isAuto&&(WingModel.getInstance().isAuto=!1),clearTimeout(this._siDelay),this.updateButtonState()},n.popCoinGetView=function(){var e=new ParamEvent(EventName.OPEN_GETMATERIAL_WINDOW),t=[];t.push({type:GetMaterialItem.OPEN_PK,linkStr:"<u><a href = 'event:1'>遭遇pk</a></u>"}),t.push({type:GetMaterialItem.OPEN_FUBEN_TIAOZHAN,linkStr:"<u><a href = 'event:2'>挑战副本</a></u>"}),t.push({type:GetMaterialItem.OPEN_CHECKPOINTBOSS,linkStr:"<u><a href = 'event:2'>关卡boss</a></u>"}),t.push({type:GetMaterialItem.OPEN_FAST_FIGHT,linkStr:"<u><a href = 'event:2'>快速战斗</a></u>"}),0==HuoDongDailyModel.getInstance().checkOneRmbFinished()&&t.push({type:GetMaterialItem.OPEN_ONE_RMB,linkStr:"<u><a href = 'event:2'>一元购</a></u>"}),e.data={typeId:1,type:0,linkStrArr:t},this.dispatchGlobalEvent(e)},n.onAutoHandler=function(){return WingModel.getInstance().isAuto?this.clearDelayTime():WingModel.getInstance().isAuto=!0,this._nextProVO?(WingModel.getInstance().isAuto&&this.autoUp(),void this.updateButtonState()):(this.clearDelayTime(),this.updateButtonState(),void Message.show("已提升最高级"))},n.autoUp=function(){var e=this,t=this.wingServerVO.star,i=RoleModel.getInstance().getRoleInfo().getCoin(),n=GoodsListProxy.getInstance().findGoodNumber(this._nextProVO.con_itemid);return 10==t?void this.clearDelayTime():void(n>=this._nextProVO.con_count?(clearTimeout(this._siDelay),this._siDelay=setTimeout2(function(){e.goodsUP()},100)):i>=this._nextProVO.con_coin?(clearTimeout(this._siDelay),this._siDelay=setTimeout2(function(){e.coinUP()},100)):(i<this._nextProVO.con_coin&&this.popCoinGetView(),this.clearDelayTime()))},n.updateButtonState=function(){WingModel.getInstance().isAuto?this._btnAuto.label="停止":this._btnAuto.label="自动升星"},n.updateNum=function(){if(this.wingServerVO=WingModel.getInstance().getWingServerVO(FigureModel.getInstance().selectedPartnerVO.parnerID),null!=this.wingServerVO){var e,t,i=(RoleModel.getInstance().getRoleInfo().getCoin(),this.wingServerVO.jie),n=this.wingServerVO.star,s=0,a=0,o=GoodsListProxy.getInstance().findGoodNumber(WingModel.ITEM_FAST);10>n?(s=i,a=n+1):(s=i+1,a=1),0==i&&(s=i+1),e=WingModel.getInstance().getWingDataVO(s,a),e?(this._nextProVO=e,t=GoodsListProxy.getInstance().findGoodNumber(e.con_itemid),this._txtCoinCount.text=""+Tools.convertNumber(e.con_coin),this._txtItemCount.text=t+"/"+e.con_count,o>0?this.updateBtnFastRedDot(!0):this.updateBtnFastRedDot(!1)):this.updateBtnFastRedDot(!1),WingModel.getInstance().isAuto&&this.autoUp(),this.updateButtonState()}},n.updateBtnFastRedDot=function(e){this._btnFast.showRedDot=e},n.clearStar=function(){for(var e,t=0;t<this.itemStarArr.length;t++)e=this.itemStarArr[t],e&&(e.parent&&e.parent.removeChild(e),e.dispose(),e=null);this.itemStarArr=[]},n.updateStar=function(){if(this.itemStarArr.length<=0)for(var e,t=0;10>t;t++)e=new CustomImage,e.source=RES.getRes("share_json.share_star1"),this.starContainer.addChild(e),this.itemStarArr.push(e),e.x=45*t;for(var i in this.itemStarArr)this.itemStarArr[i].source=RES.getRes("share_json.share_star1");if(this.wingServerVO=WingModel.getInstance().getWingServerVO(FigureModel.getInstance().selectedPartnerVO.parnerID),null!=this.wingServerVO)for(var e,n=this.wingServerVO.star,t=0;n>t;t++)e=this.itemStarArr[t],n>t&&(e.source=RES.getRes("share_json.share_star2"))},n.updateFightValue=function(){this._jie<=1&&this._lvl<=0?this._txtFpower.text="0":this._txtFpower.text=Number(PropertyUtil.calculateProFight(this._proVO)+WingModel.getInstance().getWingEquipFigValue(FigureModel.getInstance().selectedPartnerVO)).toFixed()},n.updateInfoHandler=function(){function e(e,t,i,n,s){void 0===i&&(i="#e7d0b7"),void 0===n&&(n=!1),void 0===s&&(s=!1);for(var a=0,o=0,r="",h="",l=0;l<t.length;l++)h=t[l],a=null==e?0:e[h],o=l,!s&&0>=a||(n&&d.push(h),r+=o>=5?"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+a/100+"%</font>":"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[h]+" ：</font><font color='"+i+"'>+"+a+"</font>");return r}if(this.wingServerVO=WingModel.getInstance().getWingServerVO(FigureModel.getInstance().selectedPartnerVO.parnerID),null!=this.wingServerVO){var t=this.wingServerVO.jie,i=this.wingServerVO.star,n=this.wingServerVO.exp,s=0,a=0;if(0>=t)return this._startedContainer.visible=!1,this._btnActive.visible=!0,this._txtJie.text="1阶羽翼",void this.loadWing(1);this.loadWing(t),0==this._startedContainer.visible&&(this._startedContainer.visible=!0),1==this._btnActive.visible&&(this._btnActive.visible=!1),10>i?(s=t,a=i+1):(s=t+1,a=0),0==t&&(s=t+1);var o=WingModel.getInstance().getWingDataVO(t,i),r=WingModel.getInstance().getWingDataVO(s,a);this._nextProVO=r;var h="",l="";this._proVO=o,this._jie=t,this._lvl=i;var d=[];1>=t&&0>=i?(h=e(r,EquipBasic.PROPERTY_INDEX,"#00D228",!0),l=e(o,d,"#e7d0b7",!1,!0)):(l=e(o,EquipBasic.PROPERTY_INDEX),r&&(h=e(r,EquipBasic.PROPERTY_INDEX,"#00D228"))),this.updateStar(),this._txtJie.text=t.toString()+"阶羽翼",this._txtPro.htmlText=l,this._txtProNext.htmlText=h,this.updateNum(),this.onChangeEquipListHandler();var _;_=r?n/r.need:1,_>1&&(_=1),this._bar.scaleX=_,r?(this._txtProgress.text=n+"/"+r.need,this._txtPro.x=0):(this._txtProgress.text="0/0",this._txtPro.x=94),10==i?(this._normalGroup.visible=!1,this._btnup.visible=!0,this._progressBar.visible=!1):(this._normalGroup.visible=!0,this._btnup.visible=!1,this._progressBar.visible=!0)}},n.onChangeEquipListHandler=function(){this._btnEquip.showRedDot=FigureModel.getInstance().getEquipsCanWearByPartner(FigureModel.getInstance().selectedPartnerVO,!0),RedDotsModel.getInstance().dispatchEvent(new ParamEvent(RedDotsModel.FIGURE_HEROLIST_REDDOT,{index:1})),this.updateFightValue()},n.loadWing=function(e){var t=UrlUtil.getFigureWingURL(e)+"stand";null==this._wingMovieClip&&(this._wingMovieClip=new UIEffect),this._wingMovieClip.showEffect(t,18,33,this._wingCotainer,70,!0)},t}(BaseView);egret.registerClass(WingView,"WingView");var WingWearWindow=function(e){function t(){e.call(this),this._url="",this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/game_skins/wing/WingWearWindowSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiCompHandler=function(){function t(e,t){return Number(e.name)-Number(t.name)}e.prototype.uiCompHandler.call(this),this.resGroupName=GModuleResGroupName.WING,this.heroListTopBox=new HeroListTopBox,this.topContainer.addChild(this.heroListTopBox),this.heroListTopBox.horizontalCenter=0,FigureModel.getInstance().selectedPartnerVO=this.heroListTopBox.roleListData[0],this.setImageWindowTitle("title_wingequip");var i;this._itemArr=[];for(var n=0;n<this._itemContainer.numChildren;n++)i=this._itemContainer.getChildAt(n),i.showLv(!1),i.setImageBottomType(Number(i.name)),this._itemArr.push(i);this._itemArr.sort(t)},n.onReGroupLoadComplete=function(){e.prototype.onReGroupLoadComplete.call(this)},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.addGlobalEventListener(EventName.EQUIP_LIST_CHANGE,this.onChangeEquipListHandler,this),this.heroListTopBox.addEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOKHandler,this),this.addGlobalEventListener(WingEvtName.WING_UPDATE_INFO,this.updateInfoHandler,this),this.onChangeEquipListHandler(null),this.updateInfoHandler()},n.onCloseHandler=function(){this.heroListTopBox&&(this.heroListTopBox.parent&&this.heroListTopBox.parent.removeChild(this.heroListTopBox),this.heroListTopBox.removeEventListener(HeroListTopBox.ITEM_TAP,this.onBoxTap,this),this.heroListTopBox.dispose(),this.heroListTopBox=null),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOKHandler,this),this.removeGlobalEventListener(EventName.EQUIP_LIST_CHANGE,this.onChangeEquipListHandler,this),this.removeGlobalEventListener(WingEvtName.WING_UPDATE_INFO,this.updateInfoHandler,this),this._wingMovieClip&&(this._wingMovieClip.dispose(),this._wingMovieClip=null);for(var t,i=0;i<this._itemArr.length;i++)t=this._itemArr[i],t&&(t.parent&&t.parent.removeChild(t),t.data&&(t.data=null),t.dispose(),t=null);e.prototype.onCloseHandler.call(this)},n.onBtnOKHandler=function(){var e=GoodsListProxy.getInstance().checkCanWearEquip(FigureModel.getInstance().selectedPartnerVO,!0);if(!e)return void Message.show("没有装备可以换");var t=new ParamEvent(WingEvtName.CCMD12104),i=FigureModel.getInstance().selectedPartnerVO;t.data={id:i.parnerID},GameDispatcher.getInstance().dispatchEvent(t)},n.onBoxTap=function(e){e.data&&(FigureModel.getInstance().selectedPartnerVO=e.data,this.onChangeEquipListHandler(null))},n.updateInfoHandler=function(){if(this.wingServerVO=WingModel.getInstance().getWingServerVO(FigureModel.getInstance().selectedPartnerVO.parnerID),null!=this.wingServerVO){var e=this.wingServerVO.jie;this._txtJie.text=e+"阶羽翼";var e=0;e=this.wingServerVO.jie,0>=e?this.loadWing(1):this.loadWing(e)}},n.onChangeEquipListHandler=function(e){var t=PlayerBaseVO.makeUid(null,FigureModel.getInstance().selectedPartnerVO.parnerID),i=RoleModel.getInstance().getPartnerInfo(t),n=GoodsListProxy.getInstance().getEquipPartnerByPartnerId(i.parnerID);if(null!=n){for(var s,a,o=this._itemArr.length,r=0;o>r;r++)s=this._itemArr[r],a=n["the_"+(r+30)+"_Grid"],a?(s.data=a,s.showLv(!0),s.showName(a.name)):s&&s.data&&(s.data=null);this.heroListTopBox.updateWingEquipWearRedDots(),this._btnOK.showRedDot=FigureModel.getInstance().getEquipsCanWearByPartner(i,!0)}},n.loadWing=function(e){null==this._wingMovieClip&&(this._wingMovieClip=new BitmapMovieClip,this._wingMovieClip.setDealy(120)),null==this._wingMovieClip.parent&&(this._wingCotainer.addChild(this._wingMovieClip),this._wingCotainer.touchEnabled=!1,this._wingCotainer.touchChildren=!1);var t=UrlUtil.getFigureWingURL(e)+"stand";null!=t&&""!=t&&(this._url=t,SourceCache.getInstance().has(t)?(this._wingMovieClip.setMovieClipData(SourceCache.getInstance().getAnimation(t)),this.redraw()):(SourceCache.getInstance().addEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,this.loadResComplete,this),0==SourceCache.getInstance().isLoading(t)&&SourceCache.getInstance().load(t,ResourceType.ANIMATION)))},n.loadResComplete=function(e){if(this._url==e.data.url){SourceCache.getInstance().removeEventListener(SourceCache.LOAD_ANIMATION_COMPLETE,this.loadResComplete,this);var t=e.data.mc;this._wingMovieClip.setMovieClipData(t),this.redraw()}},n.redraw=function(){null!=this._wingMovieClip&&null!=this._wingMovieClip.parent&&(this._wingMovieClip.stop(),this._wingMovieClip.gotoAndPlay(1,!0,1,6))},t}(LayeroutWindow);egret.registerClass(WingWearWindow,"WingWearWindow");var ZhuanShengBuyView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/zhuan/ZhuanShenBuyViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){},n.onOpenHandler=function(){e.prototype.onOpenHandler.call(this),this.itemArr=new Array;for(var t,i=0;4>i;i++)t=new ZhuanShengXiuWeiItem(i+1),t.y=140*i,this.itemContainer.addChild(t),this.itemArr.push(t),0==i?t.data=GoodsListProxy.getInstance().getGoodsInfoByType(WelfareType.ADD_EXP):1==i?t.data=GoodsListProxy.getInstance().getGoodsInfoByType(RoundModel.ROUND_MEDICINE1):2==i?t.data=GoodsListProxy.getInstance().getGoodsInfoByType(RoundModel.ROUND_MEDICINE2):3==i&&(t.data=GoodsListProxy.getInstance().getGoodsInfoByType(4))},n.onCloseHandler=function(){for(var t,i=this.itemArr.length,n=0;i>n;n++)t=this.itemArr[n],t&&(t.parent&&t.parent.removeChild(t),t.dispose(),t=null);this.itemArr=[],e.prototype.onCloseHandler.call(this)},t}(LayeroutWindow);egret.registerClass(ZhuanShengBuyView,"ZhuanShengBuyView");var ZhuanShengView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiComplementHandler,this),this.skinName="resource/game_skins/zhuan/ZhuanShenViewSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.uiComplementHandler=function(){this.txtLink.htmlText="<u><a href = 'event:2'>获取修为</a></u>",""==this._imageSoulIcon.source&&(this._imageSoulIcon.source=UrlUtil.getSmallPic(4))},n.onOpenHandler=function(){this.txtLink.addEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKHandler,this),RoleModel.getInstance().getRoleInfo().addEventListener(PlayerInfoVO.CHANGESOUL,this.updateSoulHandler,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_ROUND_CHANGE,this.updateRoundHandler,this),this.updateRoundHandler(),this.updateTxtLinkRedDot()},n.onCloseHandler=function(){this.txtLink.removeEventListener(egret.TextEvent.LINK,this.onTxtLinkHandler,this),this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKHandler,this),RoleModel.getInstance().getRoleInfo().removeEventListener(PlayerInfoVO.CHANGESOUL,this.updateSoulHandler,this),RoleModel.getInstance().removeEventListener(RoleModel.ROLE_ROUND_CHANGE,this.updateRoundHandler,this),this.showTextLinkEffect(!1),this.dispatchGlobalEvent(new ParamEvent(ZhuanShengEvtName.ZHUANSHENG_CLOSE_BUY))},n.onOKHandler=function(){this.dispatchGlobalEvent(new ParamEvent(ZhuanShengEvtName.CCMD_11200))},n.onTxtLinkHandler=function(){var e=new ParamEvent(ZhuanShengEvtName.ZHUANSHENG_OPEN_BUY);e.data={state:!0},this.dispatchGlobalEvent(e)},n.updateRoundHandler=function(){var e=RoleModel.getInstance().getRoleCommon();this._txtRoundNum.text="当前转生："+e.round+"转",this.updateProperty(),this.updateSoulHandler()},n.updateSoulHandler=function(){var e=RoleModel.getInstance().getRoleInfo().getSoul(),t=RoleModel.getInstance().getRoleCommon(),i=t.round+1,n=RoundModel.getInstance().getRoundVO(i);if(n){var s="",a="";s=e>1e4?Number(e/1e4).toFixed(1)+"万":e.toString(),a=n.con_soul>1e4?Number(n.con_soul/1e4).toFixed(1)+"万":n.con_soul.toString(),this._txtConSoul.text=Tools.convertNumber(e)+"/"+a,e>=n.con_soul?this._txtConSoul.textColor=53800:this._txtConSoul.textColor=16711680}this.updateTxtLinkRedDot()},n.updateTxtLinkRedDot=function(){RoundModel.getInstance().getExchangeTimes()>0&&RoleModel.getInstance().getRoleCommon().level>=81?this.showTextLinkEffect(!0):this.showTextLinkEffect(!1)},n.showTextLinkEffect=function(e){e?this._textLinkEff||(this._textLinkEff=new UIEffect,this._textLinkEff.showEffect(UrlUtil.getCommonEffectURL("anniu"),this.txtLink.x+35,this.txtLink.y+10,this,120,!0)):this._textLinkEff&&(this._textLinkEff.dispose(),this._textLinkEff=null)},n.updateProperty=function(){function e(e,t,i,n,s){void 0===i&&(i="#e7d0b7"),void 0===n&&(n=!1),void 0===s&&(s=!1);for(var a=0,r=0,h="",l="",d=0;d<t.length;d++)l=t[d],a=null==e?0:e[l],r=d,!s&&0>=a||(n&&o.push(l),h+=r>=5?"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[l]+" ：</font><font color='"+i+"'>+"+a/100+"%</font>":"\n<font color='"+i+"'>"+EquipBasic.PROPERTY_NAME[l]+" ：</font><font color='"+i+"'>+"+a+"</font>");return h}var t=RoleModel.getInstance().getRoleCommon(),i=RoundModel.getInstance().getRoundVO(t.round),n=RoundModel.getInstance().getRoundVO(t.round+1),s="",a="",o=[];t.round<=0?(s=e(n,EquipBasic.PROPERTY_INDEX,"#00D228",!0),a=e(i,o,"#e7d0b7",!1,!0),this._txtFPower.text="0"):(a=e(i,EquipBasic.PROPERTY_INDEX),n&&(s=e(n,EquipBasic.PROPERTY_INDEX,"#00D228")),this._txtFPower.text=Number(PropertyUtil.calculateProFight(i)).toFixed()),this._txtPro.htmlText=a,this._txtProNext.htmlText=s
},t}(BaseView);egret.registerClass(ZhuanShengView,"ZhuanShengView");var ZhuanShengXiuWeiItem=function(e){function t(t){void 0===t&&(t=1),e.call(this),this._type=1,this._type=t,this.skinName="resource/game_skins/zhuan/ZhuanShengXiuWeiItemSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},n.updateLvHandler=function(){this.updateInfo()},n.dataChanged=function(){this.updateInfo()},n.updateInfo=function(){if(null!=this.data){this._item.data=this.data,this.mallVO=MallModel.getInstance().getShopBasicVO(MallModel.MALL_TYPE_1,this.data.template_id);var e=RoleModel.getInstance().getRoleCommon().level,t=RoundModel.getInstance().getRoundSoulVO(e);if(this._txtReqGold.visible=!1,this._imageGold.visible=!1,1==this._type)this._txtSoul.text="增加"+t.add_soul+"点修为",this._txtReq.text="等级转换：降1级",this._btnOK.label="兑换",this._btnOK.enabled=!0,RoleModel.getInstance().getRoleCommon().level<81&&(this._btnOK.enabled=!1,this._btnOK.label="81级开启");else if(2==this._type||3==this._type){if(!this.mallVO)return;this.roundMedcineVO=RoundModel.getInstance().getRoundMedicineData(this.mallVO.id),this._txtSoul.text="增加"+this.roundMedcineVO.soul+"点修为",this.updateNum()}else{var i=DailyModel.getInstance().getCountByTypeId(DailyModel.DAILY_TYPE_40,MallModel.MALL_RMB_4),n=MallModel.getInstance().getRmbShopVo(MallModel.MALL_RMB_4);if(1>i?this._btnOK.enabled=!0:this._btnOK.enabled=!1,n){var s=Tools.convertNumber(n.add_item[1].num);this._txtReqGold.text="赠送"+Tools.convertNumber(n.add_item[0].num),this._txtSoul.text="增加"+s+"点修为",this._txtReq.text="仅售人民币："+n.rmb}this._imageGold.visible=!0,this._txtReqGold.visible=!0,this._txtReqGold.x=312,this._imageGold.x=this._txtReqGold.x+this._txtReqGold.textWidth+3,this._btnOK.label="购买"}this.updateResTimes()}},n.updateResTimes=function(){var e,t,i;1==this._type?(e=DailyModel.DAILY_TYPE_1,t=0,i=RoundModel.getInstance().getLvToSoulDays()):2==this._type||3==this._type?(e=DailyModel.DAILY_TYPE_2,t=this.mallVO.id,i=this.roundMedcineVO.limit_times):(e=DailyModel.DAILY_TYPE_40,t=MallModel.MALL_RMB_4,i=1);var n=i-DailyModel.getInstance().getCountByTypeId(e,t);4==this._type?(this._txtTimes.text="今天还可购买"+n+"/"+i+"次",n>0?this._btnOK.enabled=!0:this._btnOK.enabled=!1):this._txtTimes.text="今天还可兑换"+n+"/"+i+"次"},n.updateNum=function(){var e=0;1!=this._type&&4!=this._type&&(e=GoodsListProxy.getInstance().findGoodNumber(this.mallVO.id),e>0?(this._btnOK.label="兑换",this._txtReq.text="剩余数量："+e+"个",this._txtReqGold.visible=!1,this._imageGold.visible=!1):(this._btnOK.label="购买",this._txtReq.text=GoodsListProxy.getInstance().getBasicGood(this.roundMedcineVO.tid).name+"：",this._txtReqGold.text=this.mallVO.con_gold.toString(),this._txtReqGold.visible=!0,this._imageGold.visible=!0,this._imageGold.x=this._txtReq.x+this._txtReq.textWidth,this._txtReqGold.x=this._imageGold.x+42))},n.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._item.showLv(!1),this._btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().addEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),GameDispatcher.getInstance().addEventListener(DailyEvtName.DAILY_UPDATE,this.updateResTimes,this),RoleModel.getInstance().addEventListener(RoleModel.ROLE_LV_EXP_CHANGE,this.updateLvHandler,this)},n.onOkHandler=function(){if(1==this._type)GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ZhuanShengEvtName.CCMD_11201));else if(2==this._type||3==this._type)if(GoodsListProxy.getInstance().findGoodNumber(this.mallVO.id)>0)GameDispatcher.getInstance().dispatchEvent(new ParamEvent(ZhuanShengEvtName.CCMD_11202,{id:this.mallVO.id}));else{if(0==RoleModel.getInstance().CheckGold(this.mallVO.con_gold))return;GameDispatcher.getInstance().dispatchEvent(new ParamEvent(MallEvtName.MALL_CCMD11004,{id:this.mallVO.template_id,num:1}))}else{var e=MallModel.getInstance().getRmbShopVo(MallModel.MALL_RMB_4);if(null==e)return;ConfigManager.isTencent()?ConfigManager.isIOS()?QQManager.getInstance().QQBuyGoods(16115,e.template_id):QQManager.getInstance().QQBuyGoods(16114,e.template_id):PhpHttpStatisticsManager.requestChargeOrder(1,e.rmb,7,"RMB商城",1,e.template_id)}},n.dispose=function(){this._btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkHandler,this),GameDispatcher.getInstance().removeEventListener(EventName.UPDATE_GOODSITEM,this.updateNum,this),GameDispatcher.getInstance().removeEventListener(DailyEvtName.DAILY_UPDATE,this.updateResTimes,this),RoleModel.getInstance().removeEventListener(RoleModel.ROLE_LV_EXP_CHANGE,this.updateLvHandler,this),this._item&&(this._item.data&&(this._item.data=null),this._item.dispose())},t}(eui.ItemRenderer);egret.registerClass(ZhuanShengXiuWeiItem,"ZhuanShengXiuWeiItem",["eui.UIComponent"]);